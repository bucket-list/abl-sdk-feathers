!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var parentJsonpFunction=window.webpackJsonp;window.webpackJsonp=function(chunkIds,moreModules){for(var moduleId,chunkId,i=0,callbacks=[];i<chunkIds.length;i++)chunkId=chunkIds[i],installedChunks[chunkId]&&callbacks.push.apply(callbacks,installedChunks[chunkId]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(chunkIds,moreModules);callbacks.length;)callbacks.shift().call(null,__webpack_require__);if(moreModules[0])return installedModules[0]=0,__webpack_require__(0)};var installedModules={},installedChunks={1:0};return __webpack_require__.e=function(chunkId,callback){if(0===installedChunks[chunkId])return callback.call(null,__webpack_require__);if(void 0!==installedChunks[chunkId])installedChunks[chunkId].push(callback);else{installedChunks[chunkId]=[callback];var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.charset="utf-8",script.async=!0,script.src=__webpack_require__.p+""+chunkId+".abl-sdk.min.js",head.appendChild(script)}},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){__webpack_require__(135),__webpack_require__(5),__webpack_require__(76),__webpack_require__(62),__webpack_require__(2),module.exports=__webpack_require__(91)},,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global,process){(function(undefined){function checkGlobal(value){return value&&value.Object===Object?value:null}function cloneArray(arr){for(var a=[],i=0,len=arr.length;i<len;i++)a.push(arr[i]);return a}function tryCatcherGen(tryCatchTarget){return function(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}}function thrower(e){throw e}function makeStackTraceLong(error,observable){if(hasStacks&&observable.stack&&"object"==typeof error&&null!==error&&error.stack&&error.stack.indexOf(STACK_JUMP_SEPARATOR)===-1){for(var stacks=[],o=observable;o;o=o.source)o.stack&&stacks.unshift(o.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0,len=lines.length;i<len;i++){var line=lines[i];isInternalFrame(line)||isNodeFrame(line)||!line||desiredLines.push(line)}return desiredLines.join("\n")}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===rFileName&&lineNumber>=rStartingLine&&lineNumber<=rEndingLine}function isNodeFrame(stackLine){return stackLine.indexOf("(module.js:")!==-1||stackLine.indexOf("(node.js:")!==-1}function captureLine(){if(hasStacks)try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return rFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);return attempt3?[attempt3[1],Number(attempt3[2])]:void 0}function equalObjects(object,other,equalFunc,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!==othLength&&!isLoose)return!1;for(var key,index=objLength;index--;)if(key=objProps[index],!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1;for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var result,objValue=object[key],othValue=other[key];if(!(result===undefined?equalFunc(objValue,othValue,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"===key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!==othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object===+other;case errorTag:return object.name===other.name&&object.message===other.message;case numberTag:return object!==+object?other!==+other:object===+other;case regexpTag:case stringTag:return object===other+""}return!1}function isObjectLike(value){return!!value&&"object"==typeof value}function isLength(value){return"number"==typeof value&&value>-1&&value%1===0&&value<=MAX_SAFE_INTEGER}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function equalArrays(array,other,equalFunc,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!==othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var result,arrValue=array[index],othValue=other[index];if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,isLoose,stackA,stackB))return!1}return!0}function baseIsEqualDeep(object,other,equalFunc,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag===argsTag?objTag=objectTag:objTag!==objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag===argsTag&&(othTag=objectTag));var objIsObj=objTag===objectTag&&!isHostObject(object),othIsObj=othTag===objectTag&&!isHostObject(other),isSameTag=objTag===othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]===object)return stackB[length]===other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsEqual(value,other,isLoose,stackA,stackB){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,isLoose,stackA,stackB))}function arrayInitialize(count,factory){for(var a=new Array(count),i=0;i<count;i++)a[i]=factory();return a}function IndexedItem(id,value){this.id=id,this.value=value}function ScheduledDisposable(scheduler,disposable){this.scheduler=scheduler,this.disposable=disposable,this.isDisposed=!1}function scheduleItem(s,self){self.isDisposed||(self.isDisposed=!0,self.disposable.dispose())}function IsDisposedDisposable(state){this._s=state,this.isDisposed=!1}function StringIterable(s){this._s=s}function StringIterator(s){this._s=s,this._l=s.length,this._i=0}function ArrayIterable(a){this._a=a}function ArrayIterator(a){this._a=a,this._l=toLength(a),this._i=0}function numberIsFinite(value){return"number"==typeof value&&root.isFinite(value)}function getIterable(o){var it,i=o[$iterator$];if(!i&&"string"==typeof o)return it=new StringIterable(o),it[$iterator$]();if(!i&&o.length!==undefined)return it=new ArrayIterable(o),it[$iterator$]();if(!i)throw new TypeError("Object is not iterable");return o[$iterator$]()}function sign(value){var number=+value;return 0===number?number:isNaN(number)?number:number<0?-1:1}function toLength(o){var len=+o.length;return isNaN(len)?0:0!==len&&numberIsFinite(len)?(len=sign(len)*Math.floor(Math.abs(len)),len<=0?0:len>maxSafeInteger?maxSafeInteger:len):len}function observableOf(scheduler,array){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)}function RepeatSink(observer,parent){this.observer=observer,this.parent=parent}function amb(p,c){return p.amb(c)}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function asObservable(source){return function(o){return source.subscribe(o)}}function toArray(x){return x.toArray()}function notEmpty(x){return x.length>0}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function concatMap(source,selector,thisArg){var selectorFunc=bindCallback(selector,thisArg,3);return source.map(function(x,i){var result=selectorFunc(x,i,source);return isPromise(result)&&(result=observableFromPromise(result)),(isArrayLike(result)||isIterable(result))&&(result=observableFrom(result)),result}).concatAll()}function arrayIndexOfComparer(array,item,comparer){for(var i=0,len=array.length;i<len;i++)if(comparer(array[i],item))return i;return-1}function HashSet(comparer){this.comparer=comparer,this.set=[]}function plucker(args,len){return function(x){for(var currentProp=x,i=0;i<len;i++){var p=currentProp[args[i]];if("undefined"==typeof p)return undefined;currentProp=p}return currentProp}}function firstOnly(x){if(0===x.length)throw new EmptyError;return x[0]}function findValue(source,predicate,thisArg,yieldIndex){var callback=bindCallback(predicate,thisArg,3);return new AnonymousObservable(function(o){return source.subscribe(new FindValueObserver(o,source,callback,yieldIndex))},source)}function toObservable(obj){return obj?Observable.isObservable(obj)?obj:isPromise(obj)?Observable.fromPromise(obj):isGeneratorFunction(obj)||isGenerator(obj)?spawn.call(this,obj):isFunction(obj)?thunkToObservable.call(this,obj):isArrayLike(obj)||isIterable(obj)?arrayToObservable.call(this,obj):isObject(obj)?objectToObservable.call(this,obj):obj:obj}function arrayToObservable(obj){return Observable.from(obj).concatMap(function(o){return Observable.isObservable(o)||isObject(o)?toObservable.call(null,o):Rx.Observable.just(o)}).toArray()}function objectToObservable(obj){function defer(observable,key){results[key]=undefined,observables.push(observable.map(function(next){results[key]=next}))}for(var results=new obj.constructor,keys=Object.keys(obj),observables=[],i=0,len=keys.length;i<len;i++){var key=keys[i],observable=toObservable.call(this,obj[key]);observable&&Observable.isObservable(observable)?defer(observable,key):results[key]=obj[key]}return Observable.forkJoin.apply(Observable,observables).map(function(){return results})}function thunkToObservable(fn){var self=this;return new AnonymousObservable(function(o){fn.call(self,function(){var err=arguments[0],res=arguments[1];if(err)return o.onError(err);if(arguments.length>2){for(var args=[],i=1,len=arguments.length;i<len;i++)args.push(arguments[i]);res=args}o.onNext(res),o.onCompleted()})})}function isGenerator(obj){return isFunction(obj.next)&&isFunction(obj.throw)}function isGeneratorFunction(obj){var ctor=obj.constructor;return!!ctor&&("GeneratorFunction"===ctor.name||"GeneratorFunction"===ctor.displayName||isGenerator(ctor.prototype))}function isObject(val){return Object==val.constructor}function createCbObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createCbHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createCbHandler(o,ctx,selector){return function(){for(var len=arguments.length,results=new Array(len),i=0;i<len;i++)results[i]=arguments[i];if(isFunction(selector)){if(results=tryCatch(selector).apply(ctx,results),results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function createNodeObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createNodeHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createNodeHandler(o,ctx,selector){return function(){var err=arguments[0];if(err)return o.onError(err);for(var len=arguments.length,results=[],i=1;i<len;i++)results[i-1]=arguments[i];if(isFunction(selector)){var results=tryCatch(selector).apply(ctx,results);if(results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function isNodeList(el){return root.StaticNodeList?el instanceof root.StaticNodeList||el instanceof root.NodeList:"[object NodeList]"===Object.prototype.toString.call(el)}function ListenDisposable(e,n,fn){this._e=e,this._n=n,this._fn=fn,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function createEventListener(el,eventName,handler){var disposables=new CompositeDisposable,elemToString=Object.prototype.toString.call(el);if(isNodeList(el)||"[object HTMLCollection]"===elemToString)for(var i=0,len=el.length;i<len;i++)disposables.add(createEventListener(el.item(i),eventName,handler));else el&&disposables.add(new ListenDisposable(el,eventName,handler));return disposables}function combineLatestSource(source,subject,resultSelector){return new AnonymousObservable(function(o){function next(x,i){if(values[i]=x,hasValue[i]=!0,hasValueAll||(hasValueAll=hasValue.every(identity))){if(err)return o.onError(err);var res=tryCatch(resultSelector).apply(null,values);if(res===errorObj)return o.onError(res.e);o.onNext(res)}isDone&&values[1]&&o.onCompleted()}var err,hasValue=[!1,!1],hasValueAll=!1,isDone=!1,values=new Array(2);return new BinaryDisposable(source.subscribe(function(x){next(x,0)},function(e){values[1]?o.onError(e):err=e},function(){isDone=!0,values[1]&&o.onCompleted()}),subject.subscribe(function(x){next(x,1)},function(e){o.onError(e)},function(){isDone=!0,next(!0,1)}))},source)}function toArray(x){return x.toArray()}function observableWindowWithOpenings(windowOpenings,windowClosingSelector){return windowOpenings.groupJoin(this,windowClosingSelector,observableEmpty,function(_,win){return win})}function observableWindowWithBoundaries(windowBoundaries){var source=this;return new AnonymousObservable(function(observer){var win=new Subject,d=new CompositeDisposable,r=new RefCountDisposable(d);return observer.onNext(addRef(win,r)),d.add(source.subscribe(function(x){win.onNext(x)},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),isPromise(windowBoundaries)&&(windowBoundaries=observableFromPromise(windowBoundaries)),d.add(windowBoundaries.subscribe(function(w){win.onCompleted(),win=new Subject,observer.onNext(addRef(win,r))},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),r},source)}function observableWindowWithClosingSelector(windowClosingSelector){var source=this;return new AnonymousObservable(function(observer){function createWindowClose(){var windowClose;try{windowClose=windowClosingSelector()}catch(e){return void observer.onError(e)}isPromise(windowClose)&&(windowClose=observableFromPromise(windowClose));var m1=new SingleAssignmentDisposable;m.setDisposable(m1),m1.setDisposable(windowClose.take(1).subscribe(noop,function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),win=new Subject,observer.onNext(addRef(win,r)),createWindowClose()}))}var m=new SerialDisposable,d=new CompositeDisposable(m),r=new RefCountDisposable(d),win=new Subject;return observer.onNext(addRef(win,r)),d.add(source.subscribe(function(x){win.onNext(x)},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),createWindowClose(),r},source)}function enumerableWhile(condition,source){return new WhileEnumerable(condition,source)}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function Pattern(patterns){this.patterns=patterns}function Plan(expression,selector){this.expression=expression,this.selector=selector}function handleOnError(o){return function(e){o.onError(e)}}function handleOnNext(self,observer){return function(){var result=tryCatch(self.selector).apply(self,arguments);return result===errorObj?observer.onError(result.e):void observer.onNext(result)}}function planCreateObserver(externalSubscriptions,observable,onError){var entry=externalSubscriptions.get(observable);if(!entry){var observer=new JoinObserver(observable,onError);return externalSubscriptions.set(observable,observer),observer}return entry}function ActivePlan(joinObserverArray,onNext,onCompleted){this.joinObserverArray=joinObserverArray,this.onNext=onNext,this.onCompleted=onCompleted,this.joinObservers=new Map;for(var i=0,len=this.joinObserverArray.length;i<len;i++){var joinObserver=this.joinObserverArray[i];this.joinObservers.set(joinObserver,joinObserver)}}function _observableTimer(dueTime,scheduler){return new TimerObservable(dueTime,scheduler)}function observableTimerDateAndPeriod(dueTime,period,scheduler){return new AnonymousObservable(function(observer){var d=dueTime,p=normalizeTime(period);return scheduler.scheduleRecursiveFuture(0,d,function(count,self){if(p>0){var now=scheduler.now();d=new Date(d.getTime()+p),d.getTime()<=now&&(d=new Date(now+p))}observer.onNext(count),self(count+1,new Date(d))})})}function observableTimerTimeSpanAndPeriod(dueTime,period,scheduler){return dueTime===period?new AnonymousObservable(function(observer){return scheduler.schedulePeriodic(0,period,function(count){return observer.onNext(count),count+1})}):observableDefer(function(){return observableTimerDateAndPeriod(new Date(scheduler.now()+dueTime),period,scheduler)})}function observableDelayRelative(source,dueTime,scheduler){return new AnonymousObservable(function(o){var subscription,active=!1,cancelable=new SerialDisposable,exception=null,q=[],running=!1;return subscription=source.materialize().timestamp(scheduler).subscribe(function(notification){var d,shouldRun;"E"===notification.value.kind?(q=[],q.push(notification),exception=notification.value.error,shouldRun=!running):(q.push({value:notification.value,timestamp:notification.timestamp+dueTime}),shouldRun=!active,active=!0),shouldRun&&(null!==exception?o.onError(exception):(d=new SingleAssignmentDisposable,cancelable.setDisposable(d),d.setDisposable(scheduler.scheduleRecursiveFuture(null,dueTime,function(_,self){var e,recurseDueTime,result,shouldRecurse;if(null===exception){running=!0;do result=null,q.length>0&&q[0].timestamp-scheduler.now()<=0&&(result=q.shift().value),null!==result&&result.accept(o);while(null!==result);shouldRecurse=!1,recurseDueTime=0,q.length>0?(shouldRecurse=!0,recurseDueTime=Math.max(0,q[0].timestamp-scheduler.now())):active=!1,e=exception,running=!1,null!==e?o.onError(e):shouldRecurse&&self(null,recurseDueTime)}}))))}),new BinaryDisposable(subscription,cancelable)},source)}function observableDelayAbsolute(source,dueTime,scheduler){return observableDefer(function(){return observableDelayRelative(source,dueTime-scheduler.now(),scheduler)})}function delayWithSelector(source,subscriptionDelay,delayDurationSelector){var subDelay,selector;return isFunction(subscriptionDelay)?selector=subscriptionDelay:(subDelay=subscriptionDelay,selector=delayDurationSelector),new AnonymousObservable(function(o){function start(){subscription.setDisposable(source.subscribe(function(x){var delay=tryCatch(selector)(x);if(delay===errorObj)return o.onError(delay.e);var d=new SingleAssignmentDisposable;delays.add(d),d.setDisposable(delay.subscribe(function(){o.onNext(x),delays.remove(d),done()},function(e){o.onError(e)},function(){o.onNext(x),delays.remove(d),done()}))},function(e){o.onError(e)},function(){atEnd=!0,subscription.dispose(),done()}))}function done(){atEnd&&0===delays.length&&o.onCompleted()}var delays=new CompositeDisposable,atEnd=!1,subscription=new SerialDisposable;return subDelay?subscription.setDisposable(subDelay.subscribe(start,function(e){o.onError(e)},start)):start(),new BinaryDisposable(subscription,delays)},source)}function debounceWithSelector(source,durationSelector){return new AnonymousObservable(function(o){var value,hasValue=!1,cancelable=new SerialDisposable,id=0,subscription=source.subscribe(function(x){var throttle=tryCatch(durationSelector)(x);if(throttle===errorObj)return o.onError(throttle.e);isPromise(throttle)&&(throttle=observableFromPromise(throttle)),hasValue=!0,value=x,id++;var currentid=id,d=new SingleAssignmentDisposable;cancelable.setDisposable(d),d.setDisposable(throttle.subscribe(function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()},function(e){o.onError(e)},function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()}))},function(e){cancelable.dispose(),o.onError(e),hasValue=!1,id++},function(){cancelable.dispose(),hasValue&&o.onNext(value),o.onCompleted(),hasValue=!1,id++});return new BinaryDisposable(subscription,cancelable)},source)}function toArray(x){return x.toArray()}function toArray(x){return x.toArray()}function timeoutWithSelector(source,firstTimeout,timeoutDurationSelector,other){return isFunction(firstTimeout)&&(other=timeoutDurationSelector,timeoutDurationSelector=firstTimeout,firstTimeout=observableNever()),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function setTimer(timeout){function timerWins(){return switched=myId===id}var myId=id,d=new SingleAssignmentDisposable;timer.setDisposable(d),d.setDisposable(timeout.subscribe(function(){timerWins()&&subscription.setDisposable(other.subscribe(o)),d.dispose()},function(e){timerWins()&&o.onError(e)},function(){timerWins()&&subscription.setDisposable(other.subscribe(o))}))}function oWins(){var res=!switched;return res&&id++,res}var subscription=new SerialDisposable,timer=new SerialDisposable,original=new SingleAssignmentDisposable;subscription.setDisposable(original);var id=0,switched=!1;return setTimer(firstTimeout),original.setDisposable(source.subscribe(function(x){if(oWins()){o.onNext(x);var timeout=tryCatch(timeoutDurationSelector)(x);if(timeout===errorObj)return o.onError(timeout.e);setTimer(isPromise(timeout)?observableFromPromise(timeout):timeout)}},function(e){oWins()&&o.onError(e)},function(){oWins()&&o.onCompleted()})),new BinaryDisposable(subscription,timer)},source)}function timeout(source,dueTime,other,scheduler){return isScheduler(other)&&(scheduler=other,other=observableThrow(new TimeoutError)),other instanceof Error&&(other=observableThrow(other)),isScheduler(scheduler)||(scheduler=defaultScheduler),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function createTimer(){var myId=id;timer.setDisposable(scheduler.scheduleFuture(null,dueTime,function(){switched=id===myId,switched&&(isPromise(other)&&(other=observableFromPromise(other)),subscription.setDisposable(other.subscribe(o)))}))}var id=0,original=new SingleAssignmentDisposable,subscription=new SerialDisposable,switched=!1,timer=new SerialDisposable;return subscription.setDisposable(original),createTimer(),original.setDisposable(source.subscribe(function(x){switched||(id++,o.onNext(x),createTimer())},function(e){switched||(id++,o.onError(e))},function(){switched||(id++,o.onCompleted())})),new BinaryDisposable(subscription,timer)},source)}function transformForObserver(o){return{"@@transducer/init":function(){return o},"@@transducer/step":function(obs,input){return obs.onNext(input)},"@@transducer/result":function(obs){return obs.onCompleted()}}}function OnNextPredicate(predicate){this.predicate=predicate}function OnErrorPredicate(predicate){this.predicate=predicate}function MockPromise(scheduler,messages){var self=this;this.scheduler=scheduler,this.messages=messages,this.subscriptions=[],this.observers=[];for(var i=0,len=this.messages.length;i<len;i++){var message=this.messages[i],notification=message.value;!function(innerNotification){scheduler.scheduleAbsolute(null,message.time,function(){for(var obs=self.observers.slice(0),j=0,jLen=obs.length;j<jLen;j++)innerNotification.accept(obs[j]);return disposableEmpty})}(notification)}}var objectTypes={function:!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:null,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:null,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),moduleExports=freeModule&&freeModule.exports===freeExports?freeExports:null,thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),Rx={internals:{},config:{Promise:root.Promise},helpers:{}},noop=Rx.helpers.noop=function(){},identity=Rx.helpers.identity=function(x){return x},defaultNow=Rx.helpers.defaultNow=Date.now,defaultComparer=Rx.helpers.defaultComparer=function(x,y){return isEqual(x,y)},defaultSubComparer=Rx.helpers.defaultSubComparer=function(x,y){return x>y?1:x<y?-1:0},defaultError=(Rx.helpers.defaultKeySerializer=function(x){return x.toString()},Rx.helpers.defaultError=function(err){throw err}),isPromise=Rx.helpers.isPromise=function(p){return!!p&&"function"!=typeof p.subscribe&&"function"==typeof p.then},isFunction=Rx.helpers.isFunction=function(){var isFn=function(value){return"function"==typeof value||!1};return isFn(/x/)&&(isFn=function(value){return"function"==typeof value&&"[object Function]"==toString.call(value)}),isFn}(),errorObj={e:{}},tryCatch=Rx.internals.tryCatch=function(fn){if(!isFunction(fn))throw new TypeError("fn must be a function");return tryCatcherGen(fn)};Rx.config.longStackSupport=!1;var hasStacks=!1,stacks=tryCatch(function(){throw new Error})();hasStacks=!!stacks.e&&!!stacks.e.stack;var rFileName,rStartingLine=captureLine(),STACK_JUMP_SEPARATOR="From previous event:",EmptyError=Rx.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};EmptyError.prototype=Object.create(Error.prototype),EmptyError.prototype.name="EmptyError";var ObjectDisposedError=Rx.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ObjectDisposedError.prototype=Object.create(Error.prototype),ObjectDisposedError.prototype.name="ObjectDisposedError";var ArgumentOutOfRangeError=Rx.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};ArgumentOutOfRangeError.prototype=Object.create(Error.prototype),ArgumentOutOfRangeError.prototype.name="ArgumentOutOfRangeError";var NotSupportedError=Rx.NotSupportedError=function(message){this.message=message||"This operation is not supported",Error.call(this)};NotSupportedError.prototype=Object.create(Error.prototype),NotSupportedError.prototype.name="NotSupportedError";var NotImplementedError=Rx.NotImplementedError=function(message){this.message=message||"This operation is not implemented",Error.call(this)};NotImplementedError.prototype=Object.create(Error.prototype),NotImplementedError.prototype.name="NotImplementedError";var notImplemented=Rx.helpers.notImplemented=function(){throw new NotImplementedError},$iterator$=(Rx.helpers.notSupported=function(){throw new NotSupportedError},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");root.Set&&"function"==typeof(new root.Set)["@@iterator"]&&($iterator$="@@iterator");var doneEnumerator=Rx.doneEnumerator={done:!0,value:undefined},isIterable=Rx.helpers.isIterable=function(o){return o&&o[$iterator$]!==undefined},isArrayLike=Rx.helpers.isArrayLike=function(o){return o&&o.length!==undefined};Rx.helpers.iterator=$iterator$;var bindCallback=Rx.internals.bindCallback=function(func,thisArg,argCount){if("undefined"==typeof thisArg)return func;switch(argCount){case 0:return function(){return func.call(thisArg)};case 1:return function(arg){return func.call(thisArg,arg)};case 2:return function(value,index){return func.call(thisArg,value,index)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)}}return function(){return func.apply(thisArg,arguments)}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],argsTag=(dontEnums.length,"[object Arguments]"),arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,MAX_SAFE_INTEGER=Math.pow(2,53)-1,keys=Object.keys||function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("object"!=typeof obj&&("function"!=typeof obj||null===obj))throw new TypeError("Object.keys called on non-object");var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}(),isObject=Rx.internals.isObject=function(value){var type=typeof value;return!!value&&("object"===type||"function"===type);
},isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(value){return"function"!=typeof value.toString&&"string"==typeof(value+"")}}(),isArray=Array.isArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)===arrayTag},isEqual=Rx.internals.isEqual=function(value,other){return baseIsEqual(value,other)},inherits=({}.hasOwnProperty,Array.prototype.slice,Rx.internals.inherits=function(child,parent){function __(){this.constructor=child}__.prototype=parent.prototype,child.prototype=new __}),addProperties=Rx.internals.addProperties=function(obj){for(var sources=[],i=1,len=arguments.length;i<len;i++)sources.push(arguments[i]);for(var idx=0,ln=sources.length;idx<ln;idx++){var source=sources[idx];for(var prop in source)obj[prop]=source[prop]}},addRef=Rx.internals.addRef=function(xs,r){return new AnonymousObservable(function(observer){return new BinaryDisposable(r.getDisposable(),xs.subscribe(observer))})};IndexedItem.prototype.compareTo=function(other){var c=this.value.compareTo(other.value);return 0===c&&(c=this.id-other.id),c};var PriorityQueue=Rx.internals.PriorityQueue=function(capacity){this.items=new Array(capacity),this.length=0},priorityProto=PriorityQueue.prototype;priorityProto.isHigherPriority=function(left,right){return this.items[left].compareTo(this.items[right])<0},priorityProto.percolate=function(index){if(!(index>=this.length||index<0)){var parent=index-1>>1;if(!(parent<0||parent===index)&&this.isHigherPriority(index,parent)){var temp=this.items[index];this.items[index]=this.items[parent],this.items[parent]=temp,this.percolate(parent)}}},priorityProto.heapify=function(index){if(+index||(index=0),!(index>=this.length||index<0)){var left=2*index+1,right=2*index+2,first=index;if(left<this.length&&this.isHigherPriority(left,first)&&(first=left),right<this.length&&this.isHigherPriority(right,first)&&(first=right),first!==index){var temp=this.items[index];this.items[index]=this.items[first],this.items[first]=temp,this.heapify(first)}}},priorityProto.peek=function(){return this.items[0].value},priorityProto.removeAt=function(index){this.items[index]=this.items[--this.length],this.items[this.length]=undefined,this.heapify()},priorityProto.dequeue=function(){var result=this.peek();return this.removeAt(0),result},priorityProto.enqueue=function(item){var index=this.length++;this.items[index]=new IndexedItem(PriorityQueue.count++,item),this.percolate(index)},priorityProto.remove=function(item){for(var i=0;i<this.length;i++)if(this.items[i].value===item)return this.removeAt(i),!0;return!1},PriorityQueue.count=0;var CompositeDisposable=Rx.CompositeDisposable=function(){var i,len,args=[];if(Array.isArray(arguments[0]))args=arguments[0];else for(len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];this.disposables=args,this.isDisposed=!1,this.length=args.length},CompositeDisposablePrototype=CompositeDisposable.prototype;CompositeDisposablePrototype.add=function(item){this.isDisposed?item.dispose():(this.disposables.push(item),this.length++)},CompositeDisposablePrototype.remove=function(item){var shouldDispose=!1;if(!this.isDisposed){var idx=this.disposables.indexOf(item);idx!==-1&&(shouldDispose=!0,this.disposables.splice(idx,1),this.length--,item.dispose())}return shouldDispose},CompositeDisposablePrototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var len=this.disposables.length,currentDisposables=new Array(len),i=0;i<len;i++)currentDisposables[i]=this.disposables[i];for(this.disposables=[],this.length=0,i=0;i<len;i++)currentDisposables[i].dispose()}};var Disposable=Rx.Disposable=function(action){this.isDisposed=!1,this.action=action||noop};Disposable.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var disposableCreate=Disposable.create=function(action){return new Disposable(action)},disposableEmpty=Disposable.empty={dispose:noop},isDisposable=Disposable.isDisposable=function(d){return d&&isFunction(d.dispose)},checkDisposed=Disposable.checkDisposed=function(disposable){if(disposable.isDisposed)throw new ObjectDisposedError},disposableFixup=Disposable._fixup=function(result){return isDisposable(result)?result:disposableEmpty},SingleAssignmentDisposable=Rx.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};SingleAssignmentDisposable.prototype.getDisposable=function(){return this.current},SingleAssignmentDisposable.prototype.setDisposable=function(value){if(this.current)throw new Error("Disposable has already been assigned");var shouldDispose=this.isDisposed;!shouldDispose&&(this.current=value),shouldDispose&&value&&value.dispose()},SingleAssignmentDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null,old&&old.dispose()}};var SerialDisposable=Rx.SerialDisposable=function(){this.isDisposed=!1,this.current=null};SerialDisposable.prototype.getDisposable=function(){return this.current},SerialDisposable.prototype.setDisposable=function(value){var shouldDispose=this.isDisposed;if(!shouldDispose){var old=this.current;this.current=value}old&&old.dispose(),shouldDispose&&value&&value.dispose()},SerialDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null}old&&old.dispose()};var BinaryDisposable=Rx.BinaryDisposable=function(first,second){this._first=first,this._second=second,this.isDisposed=!1};BinaryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old1=this._first;this._first=null,old1&&old1.dispose();var old2=this._second;this._second=null,old2&&old2.dispose()}};var NAryDisposable=Rx.NAryDisposable=function(disposables){this._disposables=disposables,this.isDisposed=!1};NAryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var i=0,len=this._disposables.length;i<len;i++)this._disposables[i].dispose();this._disposables.length=0}};var RefCountDisposable=Rx.RefCountDisposable=function(){function InnerDisposable(disposable){this.disposable=disposable,this.disposable.count++,this.isInnerDisposed=!1}function RefCountDisposable(disposable){this.underlyingDisposable=disposable,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return InnerDisposable.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},RefCountDisposable.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},RefCountDisposable.prototype.getDisposable=function(){return this.isDisposed?disposableEmpty:new InnerDisposable(this)},RefCountDisposable}();ScheduledDisposable.prototype.dispose=function(){this.scheduler.schedule(this,scheduleItem)};var ScheduledItem=Rx.internals.ScheduledItem=function(scheduler,state,action,dueTime,comparer){this.scheduler=scheduler,this.state=state,this.action=action,this.dueTime=dueTime,this.comparer=comparer||defaultSubComparer,this.disposable=new SingleAssignmentDisposable};ScheduledItem.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},ScheduledItem.prototype.compareTo=function(other){return this.comparer(this.dueTime,other.dueTime)},ScheduledItem.prototype.isCancelled=function(){return this.disposable.isDisposed},ScheduledItem.prototype.invokeCore=function(){return disposableFixup(this.action(this.scheduler,this.state))};var Scheduler=Rx.Scheduler=function(){function Scheduler(){}Scheduler.isScheduler=function(s){return s instanceof Scheduler};var schedulerProto=Scheduler.prototype;return schedulerProto.schedule=function(state,action){throw new NotImplementedError},schedulerProto.scheduleFuture=function(state,dueTime,action){var dt=dueTime;return dt instanceof Date&&(dt-=this.now()),dt=Scheduler.normalize(dt),0===dt?this.schedule(state,action):this._scheduleFuture(state,dt,action)},schedulerProto._scheduleFuture=function(state,dueTime,action){throw new NotImplementedError},Scheduler.now=defaultNow,Scheduler.prototype.now=defaultNow,Scheduler.normalize=function(timeSpan){return timeSpan<0&&(timeSpan=0),timeSpan},Scheduler}(),normalizeTime=Scheduler.normalize,isScheduler=Scheduler.isScheduler;!function(schedulerProto){function invokeRecImmediate(scheduler,pair){function innerAction(state2){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.schedule(state2,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}function invokeRecDate(scheduler,pair){function innerAction(state2,dueTime1){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.scheduleFuture(state2,dueTime1,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}schedulerProto.scheduleRecursive=function(state,action){return this.schedule([state,action],invokeRecImmediate)},schedulerProto.scheduleRecursiveFuture=function(state,dueTime,action){return this.scheduleFuture([state,action],dueTime,invokeRecDate)}}(Scheduler.prototype),function(schedulerProto){schedulerProto.schedulePeriodic=function(state,period,action){if("undefined"==typeof root.setInterval)throw new NotSupportedError;period=normalizeTime(period);var s=state,id=root.setInterval(function(){s=action(s)},period);return disposableCreate(function(){root.clearInterval(id)})}}(Scheduler.prototype),function(schedulerProto){schedulerProto.catchError=schedulerProto.catch=function(handler){return new CatchScheduler(this,handler)}}(Scheduler.prototype);var scheduleMethod,clearMethod,SchedulePeriodicRecursive=Rx.internals.SchedulePeriodicRecursive=function(){function createTick(self){return function(command,recurse){recurse(0,self._period);var state=tryCatch(self._action)(self._state);state===errorObj&&(self._cancel.dispose(),thrower(state.e)),self._state=state}}function SchedulePeriodicRecursive(scheduler,state,period,action){this._scheduler=scheduler,this._state=state,this._period=period,this._action=action}return SchedulePeriodicRecursive.prototype.start=function(){var d=new SingleAssignmentDisposable;return this._cancel=d,d.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,createTick(this))),d},SchedulePeriodicRecursive}(),ImmediateScheduler=function(__super__){function ImmediateScheduler(){__super__.call(this)}return inherits(ImmediateScheduler,__super__),ImmediateScheduler.prototype.schedule=function(state,action){return disposableFixup(action(this,state))},ImmediateScheduler}(Scheduler),immediateScheduler=Scheduler.immediate=new ImmediateScheduler,CurrentThreadScheduler=function(__super__){function runTrampoline(){for(;queue.length>0;){var item=queue.dequeue();!item.isCancelled()&&item.invoke()}}function CurrentThreadScheduler(){__super__.call(this)}var queue;return inherits(CurrentThreadScheduler,__super__),CurrentThreadScheduler.prototype.schedule=function(state,action){var si=new ScheduledItem(this,state,action,this.now());if(queue)queue.enqueue(si);else{queue=new PriorityQueue(4),queue.enqueue(si);var result=tryCatch(runTrampoline)();queue=null,result===errorObj&&thrower(result.e)}return si.disposable},CurrentThreadScheduler.prototype.scheduleRequired=function(){return!queue},CurrentThreadScheduler}(Scheduler),currentThreadScheduler=Scheduler.currentThread=new CurrentThreadScheduler,localTimer=function(){var localSetTimeout,localClearTimeout=noop;if(root.setTimeout)localSetTimeout=root.setTimeout,localClearTimeout=root.clearTimeout;else{if(!root.WScript)throw new NotSupportedError;localSetTimeout=function(fn,time){root.WScript.Sleep(time),fn()}}return{setTimeout:localSetTimeout,clearTimeout:localClearTimeout}}(),localSetTimeout=localTimer.setTimeout,localClearTimeout=localTimer.clearTimeout;!function(){function runTask(handle){if(currentlyRunning)localSetTimeout(function(){runTask(handle)},0);else{var task=tasksByHandle[handle];if(task){currentlyRunning=!0;var result=tryCatch(task)();clearMethod(handle),currentlyRunning=!1,result===errorObj&&thrower(result.e)}}}function postMessageSupported(){if(!root.postMessage||root.importScripts)return!1;var isAsync=!1,oldHandler=root.onmessage;return root.onmessage=function(){isAsync=!0},root.postMessage("","*"),root.onmessage=oldHandler,isAsync}var nextHandle=1,tasksByHandle={},currentlyRunning=!1;clearMethod=function(handle){delete tasksByHandle[handle]};var reNative=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),setImmediate="function"==typeof(setImmediate=freeGlobal&&moduleExports&&freeGlobal.setImmediate)&&!reNative.test(setImmediate)&&setImmediate;if(isFunction(setImmediate))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,setImmediate(function(){runTask(id)}),id};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,process.nextTick(function(){runTask(id)}),id};else if(postMessageSupported()){var MSG_PREFIX="ms.rx.schedule"+Math.random(),onGlobalPostMessage=function(event){"string"==typeof event.data&&event.data.substring(0,MSG_PREFIX.length)===MSG_PREFIX&&runTask(event.data.substring(MSG_PREFIX.length))};root.addEventListener("message",onGlobalPostMessage,!1),scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,root.postMessage(MSG_PREFIX+id,"*"),id}}else if(root.MessageChannel){var channel=new root.MessageChannel;channel.port1.onmessage=function(e){runTask(e.data)},scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,channel.port2.postMessage(id),id}}else scheduleMethod="document"in root&&"onreadystatechange"in root.document.createElement("script")?function(action){var scriptElement=root.document.createElement("script"),id=nextHandle++;return tasksByHandle[id]=action,scriptElement.onreadystatechange=function(){runTask(id),scriptElement.onreadystatechange=null,scriptElement.parentNode.removeChild(scriptElement),scriptElement=null},root.document.documentElement.appendChild(scriptElement),id}:function(action){var id=nextHandle++;return tasksByHandle[id]=action,localSetTimeout(function(){runTask(id)},0),id}}();var DefaultScheduler=function(__super__){function DefaultScheduler(){__super__.call(this)}function scheduleAction(disposable,action,scheduler,state){return function(){disposable.setDisposable(Disposable._fixup(action(scheduler,state)))}}function ClearDisposable(id){this._id=id,this.isDisposed=!1}function LocalClearDisposable(id){this._id=id,this.isDisposed=!1}function scheduleLongRunning(state,action,disposable){return function(){action(state,disposable)}}return inherits(DefaultScheduler,__super__),ClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,clearMethod(this._id))},LocalClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,localClearTimeout(this._id))},DefaultScheduler.prototype.schedule=function(state,action){var disposable=new SingleAssignmentDisposable,id=scheduleMethod(scheduleAction(disposable,action,this,state));return new BinaryDisposable(disposable,new ClearDisposable(id))},DefaultScheduler.prototype._scheduleFuture=function(state,dueTime,action){if(0===dueTime)return this.schedule(state,action);var disposable=new SingleAssignmentDisposable,id=localSetTimeout(scheduleAction(disposable,action,this,state),dueTime);return new BinaryDisposable(disposable,new LocalClearDisposable(id))},DefaultScheduler.prototype.scheduleLongRunning=function(state,action){var disposable=disposableCreate(noop);return scheduleMethod(scheduleLongRunning(state,action,disposable)),disposable},DefaultScheduler}(Scheduler),defaultScheduler=Scheduler.default=Scheduler.async=new DefaultScheduler,CatchScheduler=function(__super__){function CatchScheduler(scheduler,handler){this._scheduler=scheduler,this._handler=handler,this._recursiveOriginal=null,this._recursiveWrapper=null,__super__.call(this)}return inherits(CatchScheduler,__super__),CatchScheduler.prototype.schedule=function(state,action){return this._scheduler.schedule(state,this._wrap(action))},CatchScheduler.prototype._scheduleFuture=function(state,dueTime,action){return this._scheduler.schedule(state,dueTime,this._wrap(action))},CatchScheduler.prototype.now=function(){return this._scheduler.now()},CatchScheduler.prototype._clone=function(scheduler){return new CatchScheduler(scheduler,this._handler)},CatchScheduler.prototype._wrap=function(action){var parent=this;return function(self,state){var res=tryCatch(action)(parent._getRecursiveWrapper(self),state);return res===errorObj?(parent._handler(res.e)||thrower(res.e),disposableEmpty):disposableFixup(res)}},CatchScheduler.prototype._getRecursiveWrapper=function(scheduler){if(this._recursiveOriginal!==scheduler){this._recursiveOriginal=scheduler;var wrapper=this._clone(scheduler);wrapper._recursiveOriginal=scheduler,wrapper._recursiveWrapper=wrapper,this._recursiveWrapper=wrapper}return this._recursiveWrapper},CatchScheduler.prototype.schedulePeriodic=function(state,period,action){var self=this,failed=!1,d=new SingleAssignmentDisposable;return d.setDisposable(this._scheduler.schedulePeriodic(state,period,function(state1){if(failed)return null;var res=tryCatch(action)(state1);return res===errorObj?(failed=!0,self._handler(res.e)||thrower(res.e),d.dispose(),null):res})),d},CatchScheduler}(Scheduler),Notification=Rx.Notification=function(){function Notification(){}return Notification.prototype._accept=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype._acceptObserver=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype.accept=function(observerOrOnNext,onError,onCompleted){return observerOrOnNext&&"object"==typeof observerOrOnNext?this._acceptObserver(observerOrOnNext):this._accept(observerOrOnNext,onError,onCompleted)},Notification.prototype.toObservable=function(scheduler){var self=this;return isScheduler(scheduler)||(scheduler=immediateScheduler),new AnonymousObservable(function(o){return scheduler.schedule(self,function(_,notification){notification._acceptObserver(o),"N"===notification.kind&&o.onCompleted()})})},Notification}(),OnNextNotification=function(__super__){function OnNextNotification(value){this.value=value,this.kind="N"}return inherits(OnNextNotification,__super__),OnNextNotification.prototype._accept=function(onNext){return onNext(this.value)},OnNextNotification.prototype._acceptObserver=function(o){return o.onNext(this.value)},OnNextNotification.prototype.toString=function(){return"OnNext("+this.value+")"},OnNextNotification}(Notification),OnErrorNotification=function(__super__){function OnErrorNotification(error){this.error=error,this.kind="E"}return inherits(OnErrorNotification,__super__),OnErrorNotification.prototype._accept=function(onNext,onError){return onError(this.error)},OnErrorNotification.prototype._acceptObserver=function(o){return o.onError(this.error)},OnErrorNotification.prototype.toString=function(){return"OnError("+this.error+")"},OnErrorNotification}(Notification),OnCompletedNotification=function(__super__){function OnCompletedNotification(){this.kind="C"}return inherits(OnCompletedNotification,__super__),OnCompletedNotification.prototype._accept=function(onNext,onError,onCompleted){return onCompleted()},OnCompletedNotification.prototype._acceptObserver=function(o){return o.onCompleted()},OnCompletedNotification.prototype.toString=function(){return"OnCompleted()"},OnCompletedNotification}(Notification),notificationCreateOnNext=Notification.createOnNext=function(value){return new OnNextNotification(value)},notificationCreateOnError=Notification.createOnError=function(error){return new OnErrorNotification(error)},notificationCreateOnCompleted=Notification.createOnCompleted=function(){return new OnCompletedNotification},Observer=Rx.Observer=function(){};Observer.prototype.toNotifier=function(){var observer=this;return function(n){return n.accept(observer)}},Observer.prototype.asObserver=function(){var self=this;return new AnonymousObserver(function(x){self.onNext(x)},function(err){self.onError(err)},function(){self.onCompleted()})},Observer.prototype.checked=function(){return new CheckedObserver(this)};var observerCreate=Observer.create=function(onNext,onError,onCompleted){return onNext||(onNext=noop),onError||(onError=defaultError),onCompleted||(onCompleted=noop),new AnonymousObserver(onNext,onError,onCompleted)};Observer.fromNotifier=function(handler,thisArg){var cb=bindCallback(handler,thisArg,1);return new AnonymousObserver(function(x){return cb(notificationCreateOnNext(x))},function(e){return cb(notificationCreateOnError(e))},function(){return cb(notificationCreateOnCompleted())})},Observer.prototype.notifyOn=function(scheduler){return new ObserveOnObserver(scheduler,this)},Observer.prototype.makeSafe=function(disposable){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,disposable)};var observableProto,AbstractObserver=Rx.internals.AbstractObserver=function(__super__){function AbstractObserver(){this.isStopped=!1}return inherits(AbstractObserver,__super__),AbstractObserver.prototype.next=notImplemented,AbstractObserver.prototype.error=notImplemented,AbstractObserver.prototype.completed=notImplemented,AbstractObserver.prototype.onNext=function(value){!this.isStopped&&this.next(value)},AbstractObserver.prototype.onError=function(error){this.isStopped||(this.isStopped=!0,this.error(error))},AbstractObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},AbstractObserver.prototype.dispose=function(){this.isStopped=!0},AbstractObserver.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.error(e),!0)},AbstractObserver}(Observer),AnonymousObserver=Rx.AnonymousObserver=function(__super__){function AnonymousObserver(onNext,onError,onCompleted){__super__.call(this),this._onNext=onNext,this._onError=onError,this._onCompleted=onCompleted}return inherits(AnonymousObserver,__super__),AnonymousObserver.prototype.next=function(value){this._onNext(value)},AnonymousObserver.prototype.error=function(error){this._onError(error)},AnonymousObserver.prototype.completed=function(){this._onCompleted()},AnonymousObserver}(AbstractObserver),CheckedObserver=function(__super__){function CheckedObserver(observer){__super__.call(this),this._observer=observer,this._state=0}inherits(CheckedObserver,__super__);var CheckedObserverPrototype=CheckedObserver.prototype;return CheckedObserverPrototype.onNext=function(value){this.checkAccess();var res=tryCatch(this._observer.onNext).call(this._observer,value);this._state=0,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.onError=function(err){this.checkAccess();var res=tryCatch(this._observer.onError).call(this._observer,err);this._state=2,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.onCompleted=function(){this.checkAccess();var res=tryCatch(this._observer.onCompleted).call(this._observer);this._state=2,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},CheckedObserver}(Observer),ScheduledObserver=Rx.internals.ScheduledObserver=function(__super__){function ScheduledObserver(scheduler,observer){__super__.call(this),this.scheduler=scheduler,this.observer=observer,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new SerialDisposable}function enqueueNext(observer,x){return function(){observer.onNext(x)}}function enqueueError(observer,e){return function(){observer.onError(e)}}function enqueueCompleted(observer){return function(){observer.onCompleted()}}function scheduleMethod(state,recurse){var work;if(!(state.queue.length>0))return void(state.isAcquired=!1);work=state.queue.shift();var res=tryCatch(work)();return res===errorObj?(state.queue=[],state.hasFaulted=!0,thrower(res.e)):void recurse(state)}return inherits(ScheduledObserver,__super__),ScheduledObserver.prototype.next=function(x){this.queue.push(enqueueNext(this.observer,x))},ScheduledObserver.prototype.error=function(e){this.queue.push(enqueueError(this.observer,e))},ScheduledObserver.prototype.completed=function(){this.queue.push(enqueueCompleted(this.observer))},ScheduledObserver.prototype.ensureActive=function(){var isOwner=!1;!this.hasFaulted&&this.queue.length>0&&(isOwner=!this.isAcquired,this.isAcquired=!0),isOwner&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,scheduleMethod))},ScheduledObserver.prototype.dispose=function(){__super__.prototype.dispose.call(this),this.disposable.dispose()},ScheduledObserver}(AbstractObserver),ObserveOnObserver=function(__super__){function ObserveOnObserver(scheduler,observer,cancel){__super__.call(this,scheduler,observer),this._cancel=cancel}return inherits(ObserveOnObserver,__super__),ObserveOnObserver.prototype.next=function(value){__super__.prototype.next.call(this,value),this.ensureActive()},ObserveOnObserver.prototype.error=function(e){__super__.prototype.error.call(this,e),this.ensureActive()},ObserveOnObserver.prototype.completed=function(){__super__.prototype.completed.call(this),this.ensureActive()},ObserveOnObserver.prototype.dispose=function(){__super__.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},ObserveOnObserver}(ScheduledObserver),Observable=Rx.Observable=function(){function makeSubscribe(self,subscribe){return function(o){var oldOnError=o.onError;return o.onError=function(e){makeStackTraceLong(e,self),oldOnError.call(o,e)},subscribe.call(self,o)}}function Observable(){if(Rx.config.longStackSupport&&hasStacks){var oldSubscribe=this._subscribe,e=tryCatch(thrower)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=makeSubscribe(this,oldSubscribe)}}return observableProto=Observable.prototype,Observable.isObservable=function(o){return o&&isFunction(o.subscribe)},observableProto.subscribe=observableProto.forEach=function(oOrOnNext,onError,onCompleted){return this._subscribe("object"==typeof oOrOnNext?oOrOnNext:observerCreate(oOrOnNext,onError,onCompleted))},observableProto.subscribeOnNext=function(onNext,thisArg){return this._subscribe(observerCreate("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext))},observableProto.subscribeOnError=function(onError,thisArg){return this._subscribe(observerCreate(null,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError))},observableProto.subscribeOnCompleted=function(onCompleted,thisArg){return this._subscribe(observerCreate(null,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted))},Observable}(),ObservableBase=Rx.ObservableBase=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.subscribeCore).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function ObservableBase(){__super__.call(this)}return inherits(ObservableBase,__super__),ObservableBase.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},ObservableBase.prototype.subscribeCore=notImplemented,ObservableBase}(Observable),FlatMapObservable=Rx.FlatMapObservable=function(__super__){function FlatMapObservable(source,selector,resultSelector,thisArg){this.resultSelector=isFunction(resultSelector)?resultSelector:null,this.selector=bindCallback(isFunction(selector)?selector:function(){return selector},thisArg,3),this.source=source,__super__.call(this)}function InnerObserver(observer,selector,resultSelector,source){this.i=0,this.selector=selector,this.resultSelector=resultSelector,this.source=source,this.o=observer,AbstractObserver.call(this)}return inherits(FlatMapObservable,__super__),FlatMapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this.resultSelector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype._wrapResult=function(result,x,i){return this.resultSelector?result.map(function(y,i2){return this.resultSelector(x,y,i,i2)},this):result},InnerObserver.prototype.next=function(x){var i=this.i++,result=tryCatch(this.selector)(x,i,this.source);return result===errorObj?this.o.onError(result.e):(isPromise(result)&&(result=observableFromPromise(result)),(isArrayLike(result)||isIterable(result))&&(result=Observable.from(result)),void this.o.onNext(this._wrapResult(result,x,i)))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FlatMapObservable}(ObservableBase),Enumerable=Rx.internals.Enumerable=function(){};IsDisposedDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var ConcatEnumerableObservable=function(__super__){function ConcatEnumerableObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,AbstractObserver.call(this)}return inherits(ConcatEnumerableObservable,__super__),ConcatEnumerableObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,o:o,subscription:subscription,e:this.sources[$iterator$]()},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.o.onError(e)},InnerObserver.prototype.completed=function(){this._recurse(this._state)},ConcatEnumerableObservable}(ObservableBase);Enumerable.prototype.concat=function(){return new ConcatEnumerableObservable(this)};var CatchErrorObservable=function(__super__){function CatchErrorObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return null!==state.lastError?state.o.onError(state.lastError):state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,
AbstractObserver.call(this)}return inherits(CatchErrorObservable,__super__),CatchErrorObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,e:this.sources[$iterator$](),subscription:subscription,lastError:null,o:o},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.lastError=e,this._recurse(this._state)},InnerObserver.prototype.completed=function(){this._state.o.onCompleted()},CatchErrorObservable}(ObservableBase);Enumerable.prototype.catchError=function(){return new CatchErrorObservable(this)};var RepeatEnumerable=function(__super__){function RepeatEnumerable(v,c){this.v=v,this.c=null==c?-1:c}function RepeatEnumerator(p){this.v=p.v,this.l=p.c}return inherits(RepeatEnumerable,__super__),RepeatEnumerable.prototype[$iterator$]=function(){return new RepeatEnumerator(this)},RepeatEnumerator.prototype.next=function(){return 0===this.l?doneEnumerator:(this.l>0&&this.l--,{done:!1,value:this.v})},RepeatEnumerable}(Enumerable),enumerableRepeat=Enumerable.repeat=function(value,repeatCount){return new RepeatEnumerable(value,repeatCount)},OfEnumerable=function(__super__){function OfEnumerable(s,fn,thisArg){this.s=s,this.fn=fn?bindCallback(fn,thisArg,3):null}function OfEnumerator(p){this.i=-1,this.s=p.s,this.l=this.s.length,this.fn=p.fn}return inherits(OfEnumerable,__super__),OfEnumerable.prototype[$iterator$]=function(){return new OfEnumerator(this)},OfEnumerator.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:doneEnumerator},OfEnumerable}(Enumerable),enumerableOf=Enumerable.of=function(source,selector,thisArg){return new OfEnumerable(source,selector,thisArg)},ObserveOnObservable=function(__super__){function ObserveOnObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(ObserveOnObservable,__super__),ObserveOnObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ObserveOnObserver(this._s,o))},ObserveOnObservable}(ObservableBase);observableProto.observeOn=function(scheduler){return new ObserveOnObservable(this,scheduler)};var SubscribeOnObservable=function(__super__){function SubscribeOnObservable(source,s){this.source=source,this._s=s,__super__.call(this)}function scheduleMethod(scheduler,state){var source=state[0],d=state[1],o=state[2];d.setDisposable(new ScheduledDisposable(scheduler,source.subscribe(o)))}return inherits(SubscribeOnObservable,__super__),SubscribeOnObservable.prototype.subscribeCore=function(o){var m=new SingleAssignmentDisposable,d=new SerialDisposable;return d.setDisposable(m),m.setDisposable(this._s.schedule([this.source,d,o],scheduleMethod)),d},SubscribeOnObservable}(ObservableBase);observableProto.subscribeOn=function(scheduler){return new SubscribeOnObservable(this,scheduler)};var FromPromiseObservable=function(__super__){function FromPromiseObservable(p,s){this._p=p,this._s=s,__super__.call(this)}function scheduleNext(s,state){var o=state[0],data=state[1];o.onNext(data),o.onCompleted()}function scheduleError(s,state){var o=state[0],err=state[1];o.onError(err)}return inherits(FromPromiseObservable,__super__),FromPromiseObservable.prototype.subscribeCore=function(o){var sad=new SingleAssignmentDisposable,self=this,p=this._p;return isFunction(p)&&(p=tryCatch(p)(),p===errorObj)?(o.onError(p.e),sad):(p.then(function(data){sad.setDisposable(self._s.schedule([o,data],scheduleNext))},function(err){sad.setDisposable(self._s.schedule([o,err],scheduleError))}),sad)},FromPromiseObservable}(ObservableBase),observableFromPromise=Observable.fromPromise=function(promise,scheduler){return scheduler||(scheduler=defaultScheduler),new FromPromiseObservable(promise,scheduler)};observableProto.toPromise=function(promiseCtor){if(promiseCtor||(promiseCtor=Rx.config.Promise),!promiseCtor)throw new NotSupportedError("Promise type not provided nor in Rx.config.Promise");var source=this;return new promiseCtor(function(resolve,reject){var value;source.subscribe(function(v){value=v},reject,function(){resolve(value)})})};var ToArrayObservable=function(__super__){function ToArrayObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.a=[],AbstractObserver.call(this)}return inherits(ToArrayObservable,__super__),ToArrayObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.a.push(x)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},ToArrayObservable}(ObservableBase);observableProto.toArray=function(){return new ToArrayObservable(this)},Observable.create=function(subscribe,parent){return new AnonymousObservable(subscribe,parent)};var Defer=function(__super__){function Defer(factory){this._f=factory,__super__.call(this)}return inherits(Defer,__super__),Defer.prototype.subscribeCore=function(o){var result=tryCatch(this._f)();return result===errorObj?observableThrow(result.e).subscribe(o):(isPromise(result)&&(result=observableFromPromise(result)),result.subscribe(o))},Defer}(ObservableBase),observableDefer=Observable.defer=function(observableFactory){return new Defer(observableFactory)},EmptyObservable=function(__super__){function EmptyObservable(scheduler){this.scheduler=scheduler,__super__.call(this)}function EmptySink(observer,scheduler){this.observer=observer,this.scheduler=scheduler}function scheduleItem(s,state){return state.onCompleted(),disposableEmpty}return inherits(EmptyObservable,__super__),EmptyObservable.prototype.subscribeCore=function(observer){var sink=new EmptySink(observer,this.scheduler);return sink.run()},EmptySink.prototype.run=function(){var state=this.observer;return this.scheduler===immediateScheduler?scheduleItem(null,state):this.scheduler.schedule(state,scheduleItem)},EmptyObservable}(ObservableBase),EMPTY_OBSERVABLE=new EmptyObservable(immediateScheduler),observableEmpty=Observable.empty=function(scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),scheduler===immediateScheduler?EMPTY_OBSERVABLE:new EmptyObservable(scheduler)},FromObservable=function(__super__){function FromObservable(iterable,fn,scheduler){this._iterable=iterable,this._fn=fn,this._scheduler=scheduler,__super__.call(this)}function createScheduleMethod(o,it,fn){return function(i,recurse){var next=tryCatch(it.next).call(it);if(next===errorObj)return o.onError(next.e);if(next.done)return o.onCompleted();var result=next.value;return isFunction(fn)&&(result=tryCatch(fn)(result,i),result===errorObj)?o.onError(result.e):(o.onNext(result),void recurse(i+1))}}return inherits(FromObservable,__super__),FromObservable.prototype.subscribeCore=function(o){var list=Object(this._iterable),it=getIterable(list);return this._scheduler.scheduleRecursive(0,createScheduleMethod(o,it,this._fn))},FromObservable}(ObservableBase),maxSafeInteger=Math.pow(2,53)-1;StringIterable.prototype[$iterator$]=function(){return new StringIterator(this._s)},StringIterator.prototype[$iterator$]=function(){return this},StringIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:doneEnumerator},ArrayIterable.prototype[$iterator$]=function(){return new ArrayIterator(this._a)},ArrayIterator.prototype[$iterator$]=function(){return this},ArrayIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:doneEnumerator};var observableFrom=Observable.from=function(iterable,mapFn,thisArg,scheduler){if(null==iterable)throw new Error("iterable cannot be null.");if(mapFn&&!isFunction(mapFn))throw new Error("mapFn when provided must be a function");if(mapFn)var mapper=bindCallback(mapFn,thisArg,2);return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromObservable(iterable,mapper,scheduler)},FromArrayObservable=function(__super__){function FromArrayObservable(args,scheduler){this._args=args,this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,args){var len=args.length;return function(i,recurse){i<len?(o.onNext(args[i]),recurse(i+1)):o.onCompleted()}}return inherits(FromArrayObservable,__super__),FromArrayObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._args))},FromArrayObservable}(ObservableBase),observableFromArray=Observable.fromArray=function(array,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)},GenerateObservable=function(__super__){function GenerateObservable(state,cndFn,itrFn,resFn,s){this._initialState=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);var hasResult=tryCatch(state.self._cndFn)(state.newState);if(hasResult===errorObj)return state.o.onError(hasResult.e);if(hasResult){var result=tryCatch(state.self._resFn)(state.newState);if(result===errorObj)return state.o.onError(result.e);state.o.onNext(result),recurse(state)}else state.o.onCompleted()}return inherits(GenerateObservable,__super__),GenerateObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(state,scheduleRecursive)},GenerateObservable}(ObservableBase);Observable.generate=function(initialState,condition,iterate,resultSelector,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new GenerateObservable(initialState,condition,iterate,resultSelector,scheduler)},Observable.of=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return new FromArrayObservable(args,currentThreadScheduler)},Observable.ofWithScheduler=function(scheduler){for(var len=arguments.length,args=new Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];return new FromArrayObservable(args,scheduler)},Observable.ofArrayChanges=function(array){if(!Array.isArray(array))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new AnonymousObservable(function(observer){function observerFn(changes){for(var i=0,len=changes.length;i<len;i++)observer.onNext(changes[i])}return Array.observe(array,observerFn),function(){Array.unobserve(array,observerFn)}})},Observable.ofObjectChanges=function(obj){if(null==obj)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new AnonymousObservable(function(observer){function observerFn(changes){for(var i=0,len=changes.length;i<len;i++)observer.onNext(changes[i])}return Object.observe(obj,observerFn),function(){Object.unobserve(obj,observerFn)}})};var NeverObservable=function(__super__){function NeverObservable(){__super__.call(this)}return inherits(NeverObservable,__super__),NeverObservable.prototype.subscribeCore=function(observer){return disposableEmpty},NeverObservable}(ObservableBase),NEVER_OBSERVABLE=new NeverObservable,observableNever=Observable.never=function(){return NEVER_OBSERVABLE},PairsObservable=function(__super__){function PairsObservable(o,scheduler){this._o=o,this._keys=Object.keys(o),this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,obj,keys){return function(i,recurse){if(i<keys.length){var key=keys[i];o.onNext([key,obj[key]]),recurse(i+1)}else o.onCompleted()}}return inherits(PairsObservable,__super__),PairsObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._o,this._keys))},PairsObservable}(ObservableBase);Observable.pairs=function(obj,scheduler){return scheduler||(scheduler=currentThreadScheduler),new PairsObservable(obj,scheduler)};var RangeObservable=function(__super__){function RangeObservable(start,count,scheduler){this.start=start,this.rangeCount=count,this.scheduler=scheduler,__super__.call(this)}function loopRecursive(start,count,o){return function(i,recurse){i<count?(o.onNext(start+i),recurse(i+1)):o.onCompleted()}}return inherits(RangeObservable,__super__),RangeObservable.prototype.subscribeCore=function(o){return this.scheduler.scheduleRecursive(0,loopRecursive(this.start,this.rangeCount,o))},RangeObservable}(ObservableBase);Observable.range=function(start,count,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RangeObservable(start,count,scheduler)};var RepeatObservable=function(__super__){function RepeatObservable(value,repeatCount,scheduler){this.value=value,this.repeatCount=null==repeatCount?-1:repeatCount,this.scheduler=scheduler,__super__.call(this)}return inherits(RepeatObservable,__super__),RepeatObservable.prototype.subscribeCore=function(observer){var sink=new RepeatSink(observer,this);return sink.run()},RepeatObservable}(ObservableBase);RepeatSink.prototype.run=function(){function loopRecursive(i,recurse){return(i===-1||i>0)&&(observer.onNext(value),i>0&&i--),0===i?observer.onCompleted():void recurse(i)}var observer=this.observer,value=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,loopRecursive)},Observable.repeat=function(value,repeatCount,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RepeatObservable(value,repeatCount,scheduler)};var JustObservable=function(__super__){function JustObservable(value,scheduler){this._value=value,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var value=state[0],observer=state[1];return observer.onNext(value),observer.onCompleted(),disposableEmpty}return inherits(JustObservable,__super__),JustObservable.prototype.subscribeCore=function(o){var state=[this._value,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},JustObservable}(ObservableBase),ThrowObservable=(Observable.return=Observable.just=function(value,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new JustObservable(value,scheduler)},function(__super__){function ThrowObservable(error,scheduler){this._error=error,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var e=state[0],o=state[1];return o.onError(e),disposableEmpty}return inherits(ThrowObservable,__super__),ThrowObservable.prototype.subscribeCore=function(o){var state=[this._error,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},ThrowObservable}(ObservableBase)),observableThrow=Observable.throw=function(error,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new ThrowObservable(error,scheduler)},UsingObservable=function(__super__){function UsingObservable(resFn,obsFn){this._resFn=resFn,this._obsFn=obsFn,__super__.call(this)}return inherits(UsingObservable,__super__),UsingObservable.prototype.subscribeCore=function(o){var disposable=disposableEmpty,resource=tryCatch(this._resFn)();if(resource===errorObj)return new BinaryDisposable(observableThrow(resource.e).subscribe(o),disposable);resource&&(disposable=resource);var source=tryCatch(this._obsFn)(resource);return source===errorObj?new BinaryDisposable(observableThrow(source.e).subscribe(o),disposable):new BinaryDisposable(source.subscribe(o),disposable)},UsingObservable}(ObservableBase);Observable.using=function(resourceFactory,observableFactory){return new UsingObservable(resourceFactory,observableFactory)},observableProto.amb=function(rightSource){var leftSource=this;return new AnonymousObservable(function(observer){function choiceL(){choice||(choice=leftChoice,rightSubscription.dispose())}function choiceR(){choice||(choice=rightChoice,leftSubscription.dispose())}var choice,leftChoice="L",rightChoice="R",leftSubscription=new SingleAssignmentDisposable,rightSubscription=new SingleAssignmentDisposable;isPromise(rightSource)&&(rightSource=observableFromPromise(rightSource));var leftSubscribe=observerCreate(function(left){choiceL(),choice===leftChoice&&observer.onNext(left)},function(e){choiceL(),choice===leftChoice&&observer.onError(e)},function(){choiceL(),choice===leftChoice&&observer.onCompleted()}),rightSubscribe=observerCreate(function(right){choiceR(),choice===rightChoice&&observer.onNext(right)},function(e){choiceR(),choice===rightChoice&&observer.onError(e)},function(){choiceR(),choice===rightChoice&&observer.onCompleted()});return leftSubscription.setDisposable(leftSource.subscribe(leftSubscribe)),rightSubscription.setDisposable(rightSource.subscribe(rightSubscribe)),new BinaryDisposable(leftSubscription,rightSubscription)})},Observable.amb=function(){var items,acc=observableNever();if(Array.isArray(arguments[0]))items=arguments[0];else{var len=arguments.length;items=new Array(items);for(var i=0;i<len;i++)items[i]=arguments[i]}for(var i=0,len=items.length;i<len;i++)acc=amb(acc,items[i]);return acc};var CatchObservable=function(__super__){function CatchObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(CatchObservable,__super__),CatchObservable.prototype.subscribeCore=function(o){var d1=new SingleAssignmentDisposable,subscription=new SerialDisposable;return subscription.setDisposable(d1),d1.setDisposable(this.source.subscribe(new CatchObserver(o,subscription,this._fn))),subscription},CatchObservable}(ObservableBase),CatchObserver=function(__super__){function CatchObserver(o,s,fn){this._o=o,this._s=s,this._fn=fn,__super__.call(this)}return inherits(CatchObserver,__super__),CatchObserver.prototype.next=function(x){this._o.onNext(x)},CatchObserver.prototype.completed=function(){return this._o.onCompleted()},CatchObserver.prototype.error=function(e){var result=tryCatch(this._fn)(e);if(result===errorObj)return this._o.onError(result.e);isPromise(result)&&(result=observableFromPromise(result));var d=new SingleAssignmentDisposable;this._s.setDisposable(d),d.setDisposable(result.subscribe(this._o))},CatchObserver}(AbstractObserver);observableProto.catch=function(handlerOrSecond){return isFunction(handlerOrSecond)?new CatchObservable(this,handlerOrSecond):observableCatch([this,handlerOrSecond])};var observableCatch=Observable.catch=function(){var items;if(Array.isArray(arguments[0]))items=arguments[0];else{var len=arguments.length;items=new Array(len);for(var i=0;i<len;i++)items[i]=arguments[i]}return enumerableOf(items).catchError()};observableProto.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return Array.isArray(args[0])?args[0].unshift(this):args.unshift(this),combineLatest.apply(this,args)};var CombineLatestObservable=function(__super__){function CombineLatestObservable(params,cb){this._params=params,this._cb=cb,__super__.call(this)}return inherits(CombineLatestObservable,__super__),CombineLatestObservable.prototype.subscribeCore=function(observer){for(var len=this._params.length,subscriptions=new Array(len),state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,isDone:arrayInitialize(len,falseFactory),values:new Array(len)},i=0;i<len;i++){var source=this._params[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new CombineLatestObserver(observer,i,this._cb,state)))}return new NAryDisposable(subscriptions)},CombineLatestObservable}(ObservableBase),CombineLatestObserver=function(__super__){function CombineLatestObserver(o,i,cb,state){this._o=o,this._i=i,this._cb=cb,this._state=state,__super__.call(this)}function notTheSame(i){return function(x,j){return j!==i}}return inherits(CombineLatestObserver,__super__),CombineLatestObserver.prototype.next=function(x){if(this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(identity))){var res=tryCatch(this._cb).apply(null,this._state.values);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._state.isDone.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},CombineLatestObserver.prototype.error=function(e){this._o.onError(e)},CombineLatestObserver.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(identity)&&this._o.onCompleted()},CombineLatestObserver}(AbstractObserver),combineLatest=Observable.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new CombineLatestObservable(args,resultSelector)};observableProto.concat=function(){for(var args=[],i=0,len=arguments.length;i<len;i++)args.push(arguments[i]);return args.unshift(this),observableConcat.apply(null,args)};var ConcatObserver=function(__super__){function ConcatObserver(s,fn){this._s=s,this._fn=fn,__super__.call(this)}return inherits(ConcatObserver,__super__),ConcatObserver.prototype.next=function(x){this._s.o.onNext(x)},ConcatObserver.prototype.error=function(e){this._s.o.onError(e)},ConcatObserver.prototype.completed=function(){this._s.i++,this._fn(this._s)},ConcatObserver}(AbstractObserver),ConcatObservable=function(__super__){function ConcatObservable(sources){this._sources=sources,__super__.call(this)}function scheduleRecursive(state,recurse){if(!state.disposable.isDisposed){if(state.i===state.sources.length)return state.o.onCompleted();var currentValue=state.sources[state.i];isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new ConcatObserver(state,recurse)))}}return inherits(ConcatObservable,__super__),ConcatObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,disposable=disposableCreate(noop),state={o:o,i:0,subscription:subscription,disposable:disposable,sources:this._sources},cancelable=immediateScheduler.scheduleRecursive(state,scheduleRecursive);return new NAryDisposable([subscription,disposable,cancelable])},ConcatObservable}(ObservableBase),observableConcat=Observable.concat=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(arguments.length);for(var i=0,len=arguments.length;i<len;i++)args[i]=arguments[i]}return new ConcatObservable(args)};observableProto.concatAll=function(){return this.merge(1)};var MergeObservable=function(__super__){function MergeObservable(source,maxConcurrent){this.source=source,this.maxConcurrent=maxConcurrent,__super__.call(this)}return inherits(MergeObservable,__super__),MergeObservable.prototype.subscribeCore=function(observer){var g=new CompositeDisposable;return g.add(this.source.subscribe(new MergeObserver(observer,this.maxConcurrent,g))),g},MergeObservable}(ObservableBase),MergeObserver=function(__super__){function MergeObserver(o,max,g){this.o=o,this.max=max,this.g=g,this.done=!1,this.q=[],this.activeCount=0,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeObserver,__super__),MergeObserver.prototype.handleSubscribe=function(xs){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(xs)&&(xs=observableFromPromise(xs)),sad.setDisposable(xs.subscribe(new InnerObserver(this,sad)))},MergeObserver.prototype.next=function(innerSource){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(innerSource)):this.q.push(innerSource)},MergeObserver.prototype.error=function(e){this.o.onError(e)},MergeObserver.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},MergeObserver}(AbstractObserver);observableProto.merge=function(maxConcurrentOrOther){return"number"!=typeof maxConcurrentOrOther?observableMerge(this,maxConcurrentOrOther):new MergeObservable(this,maxConcurrentOrOther)};var observableMerge=Observable.merge=function(){var scheduler,i,sources=[],len=arguments.length;if(arguments[0])if(isScheduler(arguments[0]))for(scheduler=arguments[0],i=1;i<len;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=0;i<len;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=1;i<len;i++)sources.push(arguments[i]);return Array.isArray(sources[0])&&(sources=sources[0]),observableOf(scheduler,sources).mergeAll()},MergeAllObservable=function(__super__){function MergeAllObservable(source){this.source=source,__super__.call(this)}return inherits(MergeAllObservable,__super__),MergeAllObservable.prototype.subscribeCore=function(o){var g=new CompositeDisposable,m=new SingleAssignmentDisposable;return g.add(m),m.setDisposable(this.source.subscribe(new MergeAllObserver(o,g))),g},MergeAllObservable}(ObservableBase),MergeAllObserver=function(__super__){function MergeAllObserver(o,g){this.o=o,this.g=g,this.done=!1,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeAllObserver,__super__),MergeAllObserver.prototype.next=function(innerSource){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),sad.setDisposable(innerSource.subscribe(new InnerObserver(this,sad)))},MergeAllObserver.prototype.error=function(e){this.o.onError(e)},MergeAllObserver.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},MergeAllObserver}(AbstractObserver);observableProto.mergeAll=function(){return new MergeAllObservable(this)};var CompositeError=Rx.CompositeError=function(errors){this.innerErrors=errors,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};CompositeError.prototype=Object.create(Error.prototype),CompositeError.prototype.name="CompositeError";var MergeDelayErrorObservable=function(__super__){function MergeDelayErrorObservable(source){this.source=source,__super__.call(this)}return inherits(MergeDelayErrorObservable,__super__),MergeDelayErrorObservable.prototype.subscribeCore=function(o){var group=new CompositeDisposable,m=new SingleAssignmentDisposable,state={isStopped:!1,errors:[],o:o};return group.add(m),m.setDisposable(this.source.subscribe(new MergeDelayErrorObserver(group,state))),group},MergeDelayErrorObservable}(ObservableBase),MergeDelayErrorObserver=function(__super__){function MergeDelayErrorObserver(group,state){this._group=group,this._state=state,__super__.call(this)}function setCompletion(o,errors){0===errors.length?o.onCompleted():1===errors.length?o.onError(errors[0]):o.onError(new CompositeError(errors))}function InnerObserver(inner,group,state){this._inner=inner,this._group=group,this._state=state,__super__.call(this)}return inherits(MergeDelayErrorObserver,__super__),MergeDelayErrorObserver.prototype.next=function(x){var inner=new SingleAssignmentDisposable;this._group.add(inner),isPromise(x)&&(x=observableFromPromise(x)),inner.setDisposable(x.subscribe(new InnerObserver(inner,this._group,this._state)))},MergeDelayErrorObserver.prototype.error=function(e){this._state.errors.push(e),this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.errors.push(e),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},InnerObserver.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver}(AbstractObserver);Observable.mergeDelayError=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{var len=arguments.length;args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}var source=observableOf(null,args);return new MergeDelayErrorObservable(source)},observableProto.onErrorResumeNext=function(second){if(!second)throw new Error("Second observable is required");return onErrorResumeNext([this,second])};var OnErrorResumeNextObservable=function(__super__){function OnErrorResumeNextObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(state.pos<state.sources.length){var current=state.sources[state.pos++];isPromise(current)&&(current=observableFromPromise(current));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(current.subscribe(new OnErrorResumeNextObserver(state,recurse)))}else state.o.onCompleted()}return inherits(OnErrorResumeNextObservable,__super__),OnErrorResumeNextObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={pos:0,subscription:subscription,o:o,sources:this.sources},cancellable=immediateScheduler.scheduleRecursive(state,scheduleMethod);return new BinaryDisposable(subscription,cancellable)},OnErrorResumeNextObservable}(ObservableBase),OnErrorResumeNextObserver=function(__super__){function OnErrorResumeNextObserver(state,recurse){this._state=state,this._recurse=recurse,__super__.call(this)}return inherits(OnErrorResumeNextObserver,__super__),OnErrorResumeNextObserver.prototype.next=function(x){this._state.o.onNext(x)},OnErrorResumeNextObserver.prototype.error=function(){this._recurse(this._state)},OnErrorResumeNextObserver.prototype.completed=function(){this._recurse(this._state)},OnErrorResumeNextObserver}(AbstractObserver),onErrorResumeNext=Observable.onErrorResumeNext=function(){var sources=[];if(Array.isArray(arguments[0]))sources=arguments[0];else{var len=arguments.length;sources=new Array(len);for(var i=0;i<len;i++)sources[i]=arguments[i]}return new OnErrorResumeNextObservable(sources)},SkipUntilObservable=function(__super__){function SkipUntilObservable(source,other){this._s=source,this._o=isPromise(other)?observableFromPromise(other):other,this._open=!1,__super__.call(this)}return inherits(SkipUntilObservable,__super__),SkipUntilObservable.prototype.subscribeCore=function(o){var leftSubscription=new SingleAssignmentDisposable;leftSubscription.setDisposable(this._s.subscribe(new SkipUntilSourceObserver(o,this))),isPromise(this._o)&&(this._o=observableFromPromise(this._o));var rightSubscription=new SingleAssignmentDisposable;return rightSubscription.setDisposable(this._o.subscribe(new SkipUntilOtherObserver(o,this,rightSubscription))),
new BinaryDisposable(leftSubscription,rightSubscription)},SkipUntilObservable}(ObservableBase),SkipUntilSourceObserver=function(__super__){function SkipUntilSourceObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipUntilSourceObserver,__super__),SkipUntilSourceObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipUntilSourceObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilSourceObserver.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},SkipUntilSourceObserver}(AbstractObserver),SkipUntilOtherObserver=function(__super__){function SkipUntilOtherObserver(o,p,r){this._o=o,this._p=p,this._r=r,__super__.call(this)}return inherits(SkipUntilOtherObserver,__super__),SkipUntilOtherObserver.prototype.next=function(){this._p._open=!0,this._r.dispose()},SkipUntilOtherObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilOtherObserver.prototype.onCompleted=function(){this._r.dispose()},SkipUntilOtherObserver}(AbstractObserver);observableProto.skipUntil=function(other){return new SkipUntilObservable(this,other)};var SwitchObservable=function(__super__){function SwitchObservable(source){this.source=source,__super__.call(this)}function SwitchObserver(o,inner){this.o=o,this.inner=inner,this.stopped=!1,this.latest=0,this.hasLatest=!1,AbstractObserver.call(this)}function InnerObserver(parent,id){this.parent=parent,this.id=id,AbstractObserver.call(this)}return inherits(SwitchObservable,__super__),SwitchObservable.prototype.subscribeCore=function(o){var inner=new SerialDisposable,s=this.source.subscribe(new SwitchObserver(o,inner));return new BinaryDisposable(s,inner)},inherits(SwitchObserver,AbstractObserver),SwitchObserver.prototype.next=function(innerSource){var d=new SingleAssignmentDisposable,id=++this.latest;this.hasLatest=!0,this.inner.setDisposable(d),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),d.setDisposable(innerSource.subscribe(new InnerObserver(this,id)))},SwitchObserver.prototype.error=function(e){this.o.onError(e)},SwitchObserver.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.parent.latest===this.id&&this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.latest===this.id&&this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},SwitchObservable}(ObservableBase);observableProto.switch=observableProto.switchLatest=function(){return new SwitchObservable(this)};var TakeUntilObservable=function(__super__){function TakeUntilObservable(source,other){this.source=source,this.other=isPromise(other)?observableFromPromise(other):other,__super__.call(this)}return inherits(TakeUntilObservable,__super__),TakeUntilObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this.source.subscribe(o),this.other.subscribe(new TakeUntilObserver(o)))},TakeUntilObservable}(ObservableBase),TakeUntilObserver=function(__super__){function TakeUntilObserver(o){this._o=o,__super__.call(this)}return inherits(TakeUntilObserver,__super__),TakeUntilObserver.prototype.next=function(){this._o.onCompleted()},TakeUntilObserver.prototype.error=function(err){this._o.onError(err)},TakeUntilObserver.prototype.onCompleted=noop,TakeUntilObserver}(AbstractObserver);observableProto.takeUntil=function(other){return new TakeUntilObservable(this,other)};var WithLatestFromObservable=function(__super__){function WithLatestFromObservable(source,sources,resultSelector){this._s=source,this._ss=sources,this._cb=resultSelector,__super__.call(this)}return inherits(WithLatestFromObservable,__super__),WithLatestFromObservable.prototype.subscribeCore=function(o){for(var len=this._ss.length,state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,values:new Array(len)},n=this._ss.length,subscriptions=new Array(n+1),i=0;i<n;i++){var other=this._ss[i],sad=new SingleAssignmentDisposable;isPromise(other)&&(other=observableFromPromise(other)),sad.setDisposable(other.subscribe(new WithLatestFromOtherObserver(o,i,state))),subscriptions[i]=sad}var outerSad=new SingleAssignmentDisposable;return outerSad.setDisposable(this._s.subscribe(new WithLatestFromSourceObserver(o,this._cb,state))),subscriptions[n]=outerSad,new NAryDisposable(subscriptions)},WithLatestFromObservable}(ObservableBase),WithLatestFromOtherObserver=function(__super__){function WithLatestFromOtherObserver(o,i,state){this._o=o,this._i=i,this._state=state,__super__.call(this)}return inherits(WithLatestFromOtherObserver,__super__),WithLatestFromOtherObserver.prototype.next=function(x){this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(identity)},WithLatestFromOtherObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromOtherObserver.prototype.completed=noop,WithLatestFromOtherObserver}(AbstractObserver),WithLatestFromSourceObserver=function(__super__){function WithLatestFromSourceObserver(o,cb,state){this._o=o,this._cb=cb,this._state=state,__super__.call(this)}return inherits(WithLatestFromSourceObserver,__super__),WithLatestFromSourceObserver.prototype.next=function(x){var allValues=[x].concat(this._state.values);if(this._state.hasValueAll){var res=tryCatch(this._cb).apply(null,allValues);return res===errorObj?this._o.onError(res.e):void this._o.onNext(res)}},WithLatestFromSourceObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromSourceObserver.prototype.completed=function(){this._o.onCompleted()},WithLatestFromSourceObserver}(AbstractObserver);observableProto.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new WithLatestFromObservable(this,args,resultSelector)};var ZipObservable=function(__super__){function ZipObservable(sources,resultSelector){this._s=sources,this._cb=resultSelector,__super__.call(this)}return inherits(ZipObservable,__super__),ZipObservable.prototype.subscribeCore=function(observer){for(var n=this._s.length,subscriptions=new Array(n),done=arrayInitialize(n,falseFactory),q=arrayInitialize(n,emptyArrayFactory),i=0;i<n;i++){var source=this._s[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new ZipObserver(observer,i,this,q,done)))}return new NAryDisposable(subscriptions)},ZipObservable}(ObservableBase),ZipObserver=function(__super__){function ZipObserver(o,i,p,q,d){this._o=o,this._i=i,this._p=p,this._q=q,this._d=d,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipObserver,__super__),ZipObserver.prototype.next=function(x){if(this._q[this._i].push(x),this._q.every(notEmpty)){var queuedValues=this._q.map(shiftEach),res=tryCatch(this._p._cb).apply(null,queuedValues);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._d.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},ZipObserver.prototype.error=function(e){this._o.onError(e)},ZipObserver.prototype.completed=function(){this._d[this._i]=!0,this._d.every(identity)&&this._o.onCompleted()},ZipObserver}(AbstractObserver);observableProto.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;Array.isArray(args[0])&&(args=args[0]);var parent=this;return args.unshift(parent),new ZipObservable(args,resultSelector)},Observable.zip=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];Array.isArray(args[0])&&(args=isFunction(args[1])?args[0].concat(args[1]):args[0]);var first=args.shift();return first.zip.apply(first,args)};var ZipIterableObservable=function(__super__){function ZipIterableObservable(sources,cb){this.sources=sources,this._cb=cb,__super__.call(this)}return inherits(ZipIterableObservable,__super__),ZipIterableObservable.prototype.subscribeCore=function(o){for(var sources=this.sources,len=sources.length,subscriptions=new Array(len),state={q:arrayInitialize(len,emptyArrayFactory),done:arrayInitialize(len,falseFactory),cb:this._cb,o:o},i=0;i<len;i++)!function(i){var source=sources[i],sad=new SingleAssignmentDisposable;(isArrayLike(source)||isIterable(source))&&(source=observableFrom(source)),subscriptions[i]=sad,sad.setDisposable(source.subscribe(new ZipIterableObserver(state,i)))}(i);return new NAryDisposable(subscriptions)},ZipIterableObservable}(ObservableBase),ZipIterableObserver=function(__super__){function ZipIterableObserver(s,i){this._s=s,this._i=i,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipIterableObserver,__super__),ZipIterableObserver.prototype.next=function(x){if(this._s.q[this._i].push(x),this._s.q.every(notEmpty)){var queuedValues=this._s.q.map(shiftEach),res=tryCatch(this._s.cb).apply(null,queuedValues);if(res===errorObj)return this._s.o.onError(res.e);this._s.o.onNext(res)}else this._s.done.filter(notTheSame(this._i)).every(identity)&&this._s.o.onCompleted()},ZipIterableObserver.prototype.error=function(e){this._s.o.onError(e)},ZipIterableObserver.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(identity)&&this._s.o.onCompleted()},ZipIterableObserver}(AbstractObserver);observableProto.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray,parent=this;return args.unshift(parent),new ZipIterableObservable(args,resultSelector)},observableProto.asObservable=function(){return new AnonymousObservable(asObservable(this),this)},observableProto.bufferWithCount=observableProto.bufferCount=function(count,skip){return"number"!=typeof skip&&(skip=count),this.windowWithCount(count,skip).flatMap(toArray).filter(notEmpty)};var DematerializeObservable=function(__super__){function DematerializeObservable(source){this.source=source,__super__.call(this)}return inherits(DematerializeObservable,__super__),DematerializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DematerializeObserver(o))},DematerializeObservable}(ObservableBase),DematerializeObserver=function(__super__){function DematerializeObserver(o){this._o=o,__super__.call(this)}return inherits(DematerializeObserver,__super__),DematerializeObserver.prototype.next=function(x){x.accept(this._o)},DematerializeObserver.prototype.error=function(e){this._o.onError(e)},DematerializeObserver.prototype.completed=function(){this._o.onCompleted()},DematerializeObserver}(AbstractObserver);observableProto.dematerialize=function(){return new DematerializeObservable(this)};var DistinctUntilChangedObservable=function(__super__){function DistinctUntilChangedObservable(source,keyFn,comparer){this.source=source,this.keyFn=keyFn,this.comparer=comparer,__super__.call(this)}return inherits(DistinctUntilChangedObservable,__super__),DistinctUntilChangedObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DistinctUntilChangedObserver(o,this.keyFn,this.comparer))},DistinctUntilChangedObservable}(ObservableBase),DistinctUntilChangedObserver=function(__super__){function DistinctUntilChangedObserver(o,keyFn,comparer){this.o=o,this.keyFn=keyFn,this.comparer=comparer,this.hasCurrentKey=!1,this.currentKey=null,__super__.call(this)}return inherits(DistinctUntilChangedObserver,__super__),DistinctUntilChangedObserver.prototype.next=function(x){var comparerEquals,key=x;return isFunction(this.keyFn)&&(key=tryCatch(this.keyFn)(x),key===errorObj)?this.o.onError(key.e):this.hasCurrentKey&&(comparerEquals=tryCatch(this.comparer)(this.currentKey,key),comparerEquals===errorObj)?this.o.onError(comparerEquals.e):void(this.hasCurrentKey&&comparerEquals||(this.hasCurrentKey=!0,this.currentKey=key,this.o.onNext(x)))},DistinctUntilChangedObserver.prototype.error=function(e){this.o.onError(e)},DistinctUntilChangedObserver.prototype.completed=function(){this.o.onCompleted()},DistinctUntilChangedObserver}(AbstractObserver);observableProto.distinctUntilChanged=function(keyFn,comparer){return comparer||(comparer=defaultComparer),new DistinctUntilChangedObservable(this,keyFn,comparer)};var TapObservable=function(__super__){function TapObservable(source,observerOrOnNext,onError,onCompleted){this.source=source,this._oN=observerOrOnNext,this._oE=onError,this._oC=onCompleted,__super__.call(this)}function InnerObserver(o,p){this.o=o,this.t=!p._oN||isFunction(p._oN)?observerCreate(p._oN||noop,p._oE||noop,p._oC||noop):p._oN,this.isStopped=!1,AbstractObserver.call(this)}return inherits(TapObservable,__super__),TapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var res=tryCatch(this.t.onNext).call(this.t,x);res===errorObj&&this.o.onError(res.e),this.o.onNext(x)},InnerObserver.prototype.error=function(err){var res=tryCatch(this.t.onError).call(this.t,err);return res===errorObj?this.o.onError(res.e):void this.o.onError(err)},InnerObserver.prototype.completed=function(){var res=tryCatch(this.t.onCompleted).call(this.t);return res===errorObj?this.o.onError(res.e):void this.o.onCompleted()},TapObservable}(ObservableBase);observableProto.do=observableProto.tap=observableProto.doAction=function(observerOrOnNext,onError,onCompleted){return new TapObservable(this,observerOrOnNext,onError,onCompleted)},observableProto.doOnNext=observableProto.tapOnNext=function(onNext,thisArg){return this.tap("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext)},observableProto.doOnError=observableProto.tapOnError=function(onError,thisArg){return this.tap(noop,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError)},observableProto.doOnCompleted=observableProto.tapOnCompleted=function(onCompleted,thisArg){return this.tap(noop,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted)};var FinallyObservable=function(__super__){function FinallyObservable(source,fn,thisArg){this.source=source,this._fn=bindCallback(fn,thisArg,0),__super__.call(this)}function FinallyDisposable(s,fn){this.isDisposed=!1,this._s=s,this._fn=fn}return inherits(FinallyObservable,__super__),FinallyObservable.prototype.subscribeCore=function(o){var d=tryCatch(this.source.subscribe).call(this.source,o);return d===errorObj&&(this._fn(),thrower(d.e)),new FinallyDisposable(d,this._fn)},FinallyDisposable.prototype.dispose=function(){if(!this.isDisposed){var res=tryCatch(this._s.dispose).call(this._s);this._fn(),res===errorObj&&thrower(res.e)}},FinallyObservable}(ObservableBase);observableProto.finally=function(action,thisArg){return new FinallyObservable(this,action,thisArg)};var IgnoreElementsObservable=function(__super__){function IgnoreElementsObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.isStopped=!1}return inherits(IgnoreElementsObservable,__super__),IgnoreElementsObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},InnerObserver.prototype.onNext=noop,InnerObserver.prototype.onError=function(err){this.isStopped||(this.isStopped=!0,this.o.onError(err))},InnerObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},InnerObserver.prototype.dispose=function(){this.isStopped=!0},InnerObserver.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(e),!0)},IgnoreElementsObservable}(ObservableBase);observableProto.ignoreElements=function(){return new IgnoreElementsObservable(this)};var MaterializeObservable=function(__super__){function MaterializeObservable(source,fn){this.source=source,__super__.call(this)}return inherits(MaterializeObservable,__super__),MaterializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new MaterializeObserver(o))},MaterializeObservable}(ObservableBase),MaterializeObserver=function(__super__){function MaterializeObserver(o){this._o=o,__super__.call(this)}return inherits(MaterializeObserver,__super__),MaterializeObserver.prototype.next=function(x){this._o.onNext(notificationCreateOnNext(x))},MaterializeObserver.prototype.error=function(e){this._o.onNext(notificationCreateOnError(e)),this._o.onCompleted()},MaterializeObserver.prototype.completed=function(){this._o.onNext(notificationCreateOnCompleted()),this._o.onCompleted()},MaterializeObserver}(AbstractObserver);observableProto.materialize=function(){return new MaterializeObservable(this)},observableProto.repeat=function(repeatCount){return enumerableRepeat(this,repeatCount).concat()},observableProto.retry=function(retryCount){return enumerableRepeat(this,retryCount).catchError()};var RetryWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RetryWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RetryWhenObservable,__super__),RetryWhenObservable.prototype.subscribeCore=function(o){var lastError,exceptions=new Subject,notifier=new Subject,handled=this._notifier(exceptions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),exceptions.onNext(exn),outer.dispose()},function(){o.onCompleted()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RetryWhenObservable}(ObservableBase);observableProto.retryWhen=function(notifier){return new RetryWhenObservable(repeat(this),notifier)};var RepeatWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RepeatWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RepeatWhenObservable,__super__),RepeatWhenObservable.prototype.subscribeCore=function(o){var lastError,completions=new Subject,notifier=new Subject,handled=this._notifier(completions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){o.onError(exn)},function(){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),completions.onNext(null),outer.dispose()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RepeatWhenObservable}(ObservableBase);observableProto.repeatWhen=function(notifier){return new RepeatWhenObservable(repeat(this),notifier)};var ScanObservable=function(__super__){function ScanObservable(source,accumulator,hasSeed,seed){this.source=source,this.accumulator=accumulator,this.hasSeed=hasSeed,this.seed=seed,__super__.call(this)}return inherits(ScanObservable,__super__),ScanObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ScanObserver(o,this))},ScanObservable}(ObservableBase),ScanObserver=function(__super__){function ScanObserver(o,parent){this._o=o,this._p=parent,this._fn=parent.accumulator,this._hs=parent.hasSeed,this._s=parent.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,__super__.call(this)}return inherits(ScanObserver,__super__),ScanObserver.prototype.next=function(x){return!this._hv&&(this._hv=!0),this._ha?this._a=tryCatch(this._fn)(this._a,x,this._i,this._p):(this._a=this._hs?tryCatch(this._fn)(this._s,x,this._i,this._p):x,this._ha=!0),this._a===errorObj?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},ScanObserver.prototype.error=function(e){this._o.onError(e)},ScanObserver.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},ScanObserver}(AbstractObserver);observableProto.scan=function(){var seed,hasSeed=!1,accumulator=arguments[0];return 2===arguments.length&&(hasSeed=!0,seed=arguments[1]),new ScanObservable(this,accumulator,hasSeed,seed)};var SkipLastObservable=function(__super__){function SkipLastObservable(source,c){this.source=source,this._c=c,__super__.call(this)}return inherits(SkipLastObservable,__super__),SkipLastObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipLastObserver(o,this._c))},SkipLastObservable}(ObservableBase),SkipLastObserver=function(__super__){function SkipLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(SkipLastObserver,__super__),SkipLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._o.onNext(this._q.shift())},SkipLastObserver.prototype.error=function(e){this._o.onError(e)},SkipLastObserver.prototype.completed=function(){this._o.onCompleted()},SkipLastObserver}(AbstractObserver);observableProto.skipLast=function(count){if(count<0)throw new ArgumentOutOfRangeError;return new SkipLastObservable(this,count)},observableProto.startWith=function(){var scheduler,start=0;arguments.length&&isScheduler(arguments[0])?(scheduler=arguments[0],start=1):scheduler=immediateScheduler;for(var args=[],i=start,len=arguments.length;i<len;i++)args.push(arguments[i]);return observableConcat.apply(null,[observableFromArray(args,scheduler),this])};var TakeLastObserver=function(__super__){function TakeLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(TakeLastObserver,__super__),TakeLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._q.shift()},TakeLastObserver.prototype.error=function(e){this._o.onError(e)},TakeLastObserver.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},TakeLastObserver}(AbstractObserver);observableProto.takeLast=function(count){if(count<0)throw new ArgumentOutOfRangeError;var source=this;return new AnonymousObservable(function(o){return source.subscribe(new TakeLastObserver(o,count))},source)};var TakeLastBufferObserver=function(__super__){function TakeLastBufferObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(TakeLastBufferObserver,__super__),TakeLastBufferObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._q.shift()},TakeLastBufferObserver.prototype.error=function(e){this._o.onError(e)},TakeLastBufferObserver.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},TakeLastBufferObserver}(AbstractObserver);observableProto.takeLastBuffer=function(count){if(count<0)throw new ArgumentOutOfRangeError;var source=this;return new AnonymousObservable(function(o){return source.subscribe(new TakeLastBufferObserver(o,count))},source)},observableProto.windowWithCount=observableProto.windowCount=function(count,skip){var source=this;if(+count||(count=0),Math.abs(count)===1/0&&(count=0),count<=0)throw new ArgumentOutOfRangeError;if(null==skip&&(skip=count),+skip||(skip=0),Math.abs(skip)===1/0&&(skip=0),skip<=0)throw new ArgumentOutOfRangeError;return new AnonymousObservable(function(observer){function createWindow(){var s=new Subject;q.push(s),observer.onNext(addRef(s,refCountDisposable))}var m=new SingleAssignmentDisposable,refCountDisposable=new RefCountDisposable(m),n=0,q=[];return createWindow(),m.setDisposable(source.subscribe(function(x){for(var i=0,len=q.length;i<len;i++)q[i].onNext(x);var c=n-count+1;c>=0&&c%skip===0&&q.shift().onCompleted(),++n%skip===0&&createWindow()},function(e){for(;q.length>0;)q.shift().onError(e);observer.onError(e)},function(){for(;q.length>0;)q.shift().onCompleted();observer.onCompleted()})),refCountDisposable},source)},observableProto.selectConcat=observableProto.concatMap=function(selector,resultSelector,thisArg){return isFunction(selector)&&isFunction(resultSelector)?this.concatMap(function(x,i){var selectorResult=selector(x,i);return isPromise(selectorResult)&&(selectorResult=observableFromPromise(selectorResult)),(isArrayLike(selectorResult)||isIterable(selectorResult))&&(selectorResult=observableFrom(selectorResult)),selectorResult.map(function(y,i2){return resultSelector(x,y,i,i2)})}):isFunction(selector)?concatMap(this,selector,thisArg):concatMap(this,function(){return selector})},observableProto.concatMapObserver=observableProto.selectConcatObserver=function(onNext,onError,onCompleted,thisArg){var source=this,onNextFunc=bindCallback(onNext,thisArg,2),onErrorFunc=bindCallback(onError,thisArg,1),onCompletedFunc=bindCallback(onCompleted,thisArg,0);return new AnonymousObservable(function(observer){var index=0;return source.subscribe(function(x){var result;try{result=onNextFunc(x,index++)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result)},function(err){var result;try{result=onErrorFunc(err)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()},function(){var result;try{result=onCompletedFunc()}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()})},this).concatAll()};var DefaultIfEmptyObserver=function(__super__){function DefaultIfEmptyObserver(o,d){this._o=o,this._d=d,this._f=!1,__super__.call(this)}return inherits(DefaultIfEmptyObserver,__super__),DefaultIfEmptyObserver.prototype.next=function(x){this._f=!0,this._o.onNext(x)},DefaultIfEmptyObserver.prototype.error=function(e){this._o.onError(e)},DefaultIfEmptyObserver.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},DefaultIfEmptyObserver}(AbstractObserver);observableProto.defaultIfEmpty=function(defaultValue){var source=this;return defaultValue===undefined&&(defaultValue=null),new AnonymousObservable(function(o){return source.subscribe(new DefaultIfEmptyObserver(o,defaultValue))},source)},HashSet.prototype.push=function(value){var retValue=arrayIndexOfComparer(this.set,value,this.comparer)===-1;return retValue&&this.set.push(value),retValue};var DistinctObservable=function(__super__){function DistinctObservable(source,keyFn,cmpFn){this.source=source,this._keyFn=keyFn,this._cmpFn=cmpFn,__super__.call(this)}return inherits(DistinctObservable,__super__),DistinctObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DistinctObserver(o,this._keyFn,this._cmpFn))},DistinctObservable}(ObservableBase),DistinctObserver=function(__super__){function DistinctObserver(o,keyFn,cmpFn){this._o=o,this._keyFn=keyFn,this._h=new HashSet(cmpFn),__super__.call(this)}return inherits(DistinctObserver,__super__),DistinctObserver.prototype.next=function(x){var key=x;return isFunction(this._keyFn)&&(key=tryCatch(this._keyFn)(x),key===errorObj)?this._o.onError(key.e):void(this._h.push(key)&&this._o.onNext(x))},DistinctObserver.prototype.error=function(e){this._o.onError(e)},DistinctObserver.prototype.completed=function(){this._o.onCompleted()},DistinctObserver}(AbstractObserver);observableProto.distinct=function(keySelector,comparer){return comparer||(comparer=defaultComparer),new DistinctObservable(this,keySelector,comparer)},observableProto.groupBy=function(keySelector,elementSelector){return this.groupByUntil(keySelector,elementSelector,observableNever)},observableProto.groupByUntil=function(keySelector,elementSelector,durationSelector){var source=this;return new AnonymousObservable(function(o){var map=new Map,groupDisposable=new CompositeDisposable,refCountDisposable=new RefCountDisposable(groupDisposable),handleError=function(e){return function(item){item.onError(e)}};return groupDisposable.add(source.subscribe(function(x){var key=tryCatch(keySelector)(x);if(key===errorObj)return map.forEach(handleError(key.e)),o.onError(key.e);var fireNewMapEntry=!1,writer=map.get(key);if(writer===undefined&&(writer=new Subject,map.set(key,writer),fireNewMapEntry=!0),fireNewMapEntry){var group=new GroupedObservable(key,writer,refCountDisposable),durationGroup=new GroupedObservable(key,writer),duration=tryCatch(durationSelector)(durationGroup);if(duration===errorObj)return map.forEach(handleError(duration.e)),o.onError(duration.e);o.onNext(group);var md=new SingleAssignmentDisposable;groupDisposable.add(md),md.setDisposable(duration.take(1).subscribe(noop,function(e){map.forEach(handleError(e)),o.onError(e)},function(){map.delete(key)&&writer.onCompleted(),groupDisposable.remove(md)}))}var element=x;return isFunction(elementSelector)&&(element=tryCatch(elementSelector)(x),element===errorObj)?(map.forEach(handleError(element.e)),o.onError(element.e)):void writer.onNext(element)},function(e){map.forEach(handleError(e)),o.onError(e)},function(){map.forEach(function(item){item.onCompleted()}),o.onCompleted()})),refCountDisposable},source)};var MapObservable=function(__super__){function MapObservable(source,selector,thisArg){this.source=source,this.selector=bindCallback(selector,thisArg,3),__super__.call(this)}function innerMap(selector,self){return function(x,i,o){return selector.call(this,self.selector(x,i,o),i,o)}}function InnerObserver(o,selector,source){this.o=o,this.selector=selector,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(MapObservable,__super__),MapObservable.prototype.internalMap=function(selector,thisArg){return new MapObservable(this.source,innerMap(selector,this),thisArg)},MapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var result=tryCatch(this.selector)(x,this.i++,this.source);return result===errorObj?this.o.onError(result.e):void this.o.onNext(result)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},MapObservable}(ObservableBase);observableProto.map=observableProto.select=function(selector,thisArg){var selectorFn="function"==typeof selector?selector:function(){return selector};return this instanceof MapObservable?this.internalMap(selectorFn,thisArg):new MapObservable(this,selectorFn,thisArg);
},observableProto.pluck=function(){var len=arguments.length,args=new Array(len);if(0===len)throw new Error("List of properties cannot be empty.");for(var i=0;i<len;i++)args[i]=arguments[i];return this.map(plucker(args,len))},observableProto.flatMap=observableProto.selectMany=observableProto.mergeMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).mergeAll()},observableProto.flatMapObserver=observableProto.selectManyObserver=function(onNext,onError,onCompleted,thisArg){var source=this;return new AnonymousObservable(function(observer){var index=0;return source.subscribe(function(x){var result;try{result=onNext.call(thisArg,x,index++)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result)},function(err){var result;try{result=onError.call(thisArg,err)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()},function(){var result;try{result=onCompleted.call(thisArg)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()})},source).mergeAll()},observableProto.flatMapLatest=observableProto.switchMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).switchLatest()};var SkipObservable=function(__super__){function SkipObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function SkipObserver(o,c){this._o=o,this._r=c,AbstractObserver.call(this)}return inherits(SkipObservable,__super__),SkipObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipObserver(o,this._count))},inherits(SkipObserver,AbstractObserver),SkipObserver.prototype.next=function(x){this._r<=0?this._o.onNext(x):this._r--},SkipObserver.prototype.error=function(e){this._o.onError(e)},SkipObserver.prototype.completed=function(){this._o.onCompleted()},SkipObservable}(ObservableBase);observableProto.skip=function(count){if(count<0)throw new ArgumentOutOfRangeError;return new SkipObservable(this,count)};var SkipWhileObservable=function(__super__){function SkipWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SkipWhileObservable,__super__),SkipWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipWhileObserver(o,this))},SkipWhileObservable}(ObservableBase),SkipWhileObserver=function(__super__){function SkipWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!1,__super__.call(this)}return inherits(SkipWhileObserver,__super__),SkipWhileObserver.prototype.next=function(x){if(!this._r){var res=tryCatch(this._p._fn)(x,this._i++,this._p);if(res===errorObj)return this._o.onError(res.e);this._r=!res}this._r&&this._o.onNext(x)},SkipWhileObserver.prototype.error=function(e){this._o.onError(e)},SkipWhileObserver.prototype.completed=function(){this._o.onCompleted()},SkipWhileObserver}(AbstractObserver);observableProto.skipWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new SkipWhileObservable(this,fn)};var TakeObservable=function(__super__){function TakeObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function TakeObserver(o,c){this._o=o,this._c=c,this._r=c,AbstractObserver.call(this)}return inherits(TakeObservable,__super__),TakeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeObserver(o,this._count))},inherits(TakeObserver,AbstractObserver),TakeObserver.prototype.next=function(x){this._r-- >0&&(this._o.onNext(x),this._r<=0&&this._o.onCompleted())},TakeObserver.prototype.error=function(e){this._o.onError(e)},TakeObserver.prototype.completed=function(){this._o.onCompleted()},TakeObservable}(ObservableBase);observableProto.take=function(count,scheduler){if(count<0)throw new ArgumentOutOfRangeError;return 0===count?observableEmpty(scheduler):new TakeObservable(this,count)};var TakeWhileObservable=function(__super__){function TakeWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(TakeWhileObservable,__super__),TakeWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeWhileObserver(o,this))},TakeWhileObservable}(ObservableBase),TakeWhileObserver=function(__super__){function TakeWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!0,__super__.call(this)}return inherits(TakeWhileObserver,__super__),TakeWhileObserver.prototype.next=function(x){return this._r&&(this._r=tryCatch(this._p._fn)(x,this._i++,this._p),this._r===errorObj)?this._o.onError(this._r.e):void(this._r?this._o.onNext(x):this._o.onCompleted())},TakeWhileObserver.prototype.error=function(e){this._o.onError(e)},TakeWhileObserver.prototype.completed=function(){this._o.onCompleted()},TakeWhileObserver}(AbstractObserver);observableProto.takeWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new TakeWhileObservable(this,fn)};var FilterObservable=function(__super__){function FilterObservable(source,predicate,thisArg){this.source=source,this.predicate=bindCallback(predicate,thisArg,3),__super__.call(this)}function innerPredicate(predicate,self){return function(x,i,o){return self.predicate(x,i,o)&&predicate.call(this,x,i,o)}}function InnerObserver(o,predicate,source){this.o=o,this.predicate=predicate,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(FilterObservable,__super__),FilterObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.predicate,this))},FilterObservable.prototype.internalFilter=function(predicate,thisArg){return new FilterObservable(this.source,innerPredicate(predicate,this),thisArg)},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var shouldYield=tryCatch(this.predicate)(x,this.i++,this.source);return shouldYield===errorObj?this.o.onError(shouldYield.e):void(shouldYield&&this.o.onNext(x))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FilterObservable}(ObservableBase);observableProto.filter=observableProto.where=function(predicate,thisArg){return this instanceof FilterObservable?this.internalFilter(predicate,thisArg):new FilterObservable(this,predicate,thisArg)};var ExtremaByObservable=function(__super__){function ExtremaByObservable(source,k,c){this.source=source,this._k=k,this._c=c,__super__.call(this)}return inherits(ExtremaByObservable,__super__),ExtremaByObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ExtremaByObserver(o,this._k,this._c))},ExtremaByObservable}(ObservableBase),ExtremaByObserver=function(__super__){function ExtremaByObserver(o,k,c){this._o=o,this._k=k,this._c=c,this._v=null,this._hv=!1,this._l=[],__super__.call(this)}return inherits(ExtremaByObserver,__super__),ExtremaByObserver.prototype.next=function(x){var key=tryCatch(this._k)(x);if(key===errorObj)return this._o.onError(key.e);var comparison=0;if(this._hv){if(comparison=tryCatch(this._c)(key,this._v),comparison===errorObj)return this._o.onError(comparison.e)}else this._hv=!0,this._v=key;comparison>0&&(this._v=key,this._l=[]),comparison>=0&&this._l.push(x)},ExtremaByObserver.prototype.error=function(e){this._o.onError(e)},ExtremaByObserver.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},ExtremaByObserver}(AbstractObserver),ReduceObservable=function(__super__){function ReduceObservable(source,accumulator,hasSeed,seed){this.source=source,this.accumulator=accumulator,this.hasSeed=hasSeed,this.seed=seed,__super__.call(this)}return inherits(ReduceObservable,__super__),ReduceObservable.prototype.subscribeCore=function(observer){return this.source.subscribe(new ReduceObserver(observer,this))},ReduceObservable}(ObservableBase),ReduceObserver=function(__super__){function ReduceObserver(o,parent){this._o=o,this._p=parent,this._fn=parent.accumulator,this._hs=parent.hasSeed,this._s=parent.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,__super__.call(this)}return inherits(ReduceObserver,__super__),ReduceObserver.prototype.next=function(x){return!this._hv&&(this._hv=!0),this._ha?this._a=tryCatch(this._fn)(this._a,x,this._i,this._p):(this._a=this._hs?tryCatch(this._fn)(this._s,x,this._i,this._p):x,this._ha=!0),this._a===errorObj?this._o.onError(this._a.e):void this._i++},ReduceObserver.prototype.error=function(e){this._o.onError(e)},ReduceObserver.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new EmptyError),this._o.onCompleted()},ReduceObserver}(AbstractObserver);observableProto.reduce=function(){var seed,hasSeed=!1,accumulator=arguments[0];return 2===arguments.length&&(hasSeed=!0,seed=arguments[1]),new ReduceObservable(this,accumulator,hasSeed,seed)};var SomeObservable=function(__super__){function SomeObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SomeObservable,__super__),SomeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SomeObserver(o,this._fn,this.source))},SomeObservable}(ObservableBase),SomeObserver=function(__super__){function SomeObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,__super__.call(this)}return inherits(SomeObserver,__super__),SomeObserver.prototype.next=function(x){var result=tryCatch(this._fn)(x,this._i++,this._s);return result===errorObj?this._o.onError(result.e):void(Boolean(result)&&(this._o.onNext(!0),this._o.onCompleted()))},SomeObserver.prototype.error=function(e){this._o.onError(e)},SomeObserver.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},SomeObserver}(AbstractObserver);observableProto.some=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new SomeObservable(this,fn)};var IsEmptyObservable=function(__super__){function IsEmptyObservable(source){this.source=source,__super__.call(this)}return inherits(IsEmptyObservable,__super__),IsEmptyObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new IsEmptyObserver(o))},IsEmptyObservable}(ObservableBase),IsEmptyObserver=function(__super__){function IsEmptyObserver(o){this._o=o,__super__.call(this)}return inherits(IsEmptyObserver,__super__),IsEmptyObserver.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},IsEmptyObserver.prototype.error=function(e){this._o.onError(e)},IsEmptyObserver.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},IsEmptyObserver}(AbstractObserver);observableProto.isEmpty=function(){return new IsEmptyObservable(this)};var EveryObservable=function(__super__){function EveryObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(EveryObservable,__super__),EveryObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new EveryObserver(o,this._fn,this.source))},EveryObservable}(ObservableBase),EveryObserver=function(__super__){function EveryObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,__super__.call(this)}return inherits(EveryObserver,__super__),EveryObserver.prototype.next=function(x){var result=tryCatch(this._fn)(x,this._i++,this._s);return result===errorObj?this._o.onError(result.e):void(Boolean(result)||(this._o.onNext(!1),this._o.onCompleted()))},EveryObserver.prototype.error=function(e){this._o.onError(e)},EveryObserver.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},EveryObserver}(AbstractObserver);observableProto.every=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new EveryObservable(this,fn)};var IncludesObservable=function(__super__){function IncludesObservable(source,elem,idx){var n=+idx||0;Math.abs(n)===1/0&&(n=0),this.source=source,this._elem=elem,this._n=n,__super__.call(this)}return inherits(IncludesObservable,__super__),IncludesObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(!1),o.onCompleted(),disposableEmpty):this.source.subscribe(new IncludesObserver(o,this._elem,this._n))},IncludesObservable}(ObservableBase),IncludesObserver=function(__super__){function IncludesObserver(o,elem,n){this._o=o,this._elem=elem,this._n=n,this._i=0,__super__.call(this)}function comparer(a,b){return 0===a&&0===b||a===b||isNaN(a)&&isNaN(b)}return inherits(IncludesObserver,__super__),IncludesObserver.prototype.next=function(x){this._i++>=this._n&&comparer(x,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},IncludesObserver.prototype.error=function(e){this._o.onError(e)},IncludesObserver.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},IncludesObserver}(AbstractObserver);observableProto.includes=function(searchElement,fromIndex){return new IncludesObservable(this,searchElement,fromIndex)};var CountObservable=function(__super__){function CountObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(CountObservable,__super__),CountObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new CountObserver(o,this._fn,this.source))},CountObservable}(ObservableBase),CountObserver=function(__super__){function CountObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,this._c=0,__super__.call(this)}return inherits(CountObserver,__super__),CountObserver.prototype.next=function(x){if(this._fn){var result=tryCatch(this._fn)(x,this._i++,this._s);if(result===errorObj)return this._o.onError(result.e);Boolean(result)&&this._c++}else this._c++},CountObserver.prototype.error=function(e){this._o.onError(e)},CountObserver.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},CountObserver}(AbstractObserver);observableProto.count=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new CountObservable(this,fn)};var IndexOfObservable=function(__super__){function IndexOfObservable(source,e,n){this.source=source,this._e=e,this._n=n,__super__.call(this)}return inherits(IndexOfObservable,__super__),IndexOfObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(-1),o.onCompleted(),disposableEmpty):this.source.subscribe(new IndexOfObserver(o,this._e,this._n))},IndexOfObservable}(ObservableBase),IndexOfObserver=function(__super__){function IndexOfObserver(o,e,n){this._o=o,this._e=e,this._n=n,this._i=0,__super__.call(this)}return inherits(IndexOfObserver,__super__),IndexOfObserver.prototype.next=function(x){this._i>=this._n&&x===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},IndexOfObserver.prototype.error=function(e){this._o.onError(e)},IndexOfObserver.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},IndexOfObserver}(AbstractObserver);observableProto.indexOf=function(searchElement,fromIndex){var n=+fromIndex||0;return Math.abs(n)===1/0&&(n=0),new IndexOfObservable(this,searchElement,n)};var SumObservable=function(__super__){function SumObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SumObservable,__super__),SumObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SumObserver(o,this._fn,this.source))},SumObservable}(ObservableBase),SumObserver=function(__super__){function SumObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,this._c=0,__super__.call(this)}return inherits(SumObserver,__super__),SumObserver.prototype.next=function(x){if(this._fn){var result=tryCatch(this._fn)(x,this._i++,this._s);if(result===errorObj)return this._o.onError(result.e);this._c+=result}else this._c+=x},SumObserver.prototype.error=function(e){this._o.onError(e)},SumObserver.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},SumObserver}(AbstractObserver);observableProto.sum=function(keySelector,thisArg){var fn=bindCallback(keySelector,thisArg,3);return new SumObservable(this,fn)},observableProto.minBy=function(keySelector,comparer){return comparer||(comparer=defaultSubComparer),new ExtremaByObservable(this,keySelector,function(x,y){return comparer(x,y)*-1})},observableProto.min=function(comparer){return this.minBy(identity,comparer).map(firstOnly)},observableProto.maxBy=function(keySelector,comparer){return comparer||(comparer=defaultSubComparer),new ExtremaByObservable(this,keySelector,comparer)},observableProto.max=function(comparer){return this.maxBy(identity,comparer).map(firstOnly)};var AverageObservable=function(__super__){function AverageObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(AverageObservable,__super__),AverageObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new AverageObserver(o,this._fn,this.source))},AverageObservable}(ObservableBase),AverageObserver=function(__super__){function AverageObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._c=0,this._t=0,__super__.call(this)}return inherits(AverageObserver,__super__),AverageObserver.prototype.next=function(x){if(this._fn){var r=tryCatch(this._fn)(x,this._c++,this._s);if(r===errorObj)return this._o.onError(r.e);this._t+=r}else this._c++,this._t+=x},AverageObserver.prototype.error=function(e){this._o.onError(e)},AverageObserver.prototype.completed=function(){return 0===this._c?this._o.onError(new EmptyError):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},AverageObserver}(AbstractObserver);observableProto.average=function(keySelector,thisArg){var fn,source=this;return isFunction(keySelector)&&(fn=bindCallback(keySelector,thisArg,3)),new AverageObservable(source,fn)},observableProto.sequenceEqual=function(second,comparer){var first=this;return comparer||(comparer=defaultComparer),new AnonymousObservable(function(o){var donel=!1,doner=!1,ql=[],qr=[],subscription1=first.subscribe(function(x){if(qr.length>0){var v=qr.shift(),equal=tryCatch(comparer)(v,x);if(equal===errorObj)return o.onError(equal.e);equal||(o.onNext(!1),o.onCompleted())}else doner?(o.onNext(!1),o.onCompleted()):ql.push(x)},function(e){o.onError(e)},function(){donel=!0,0===ql.length&&(qr.length>0?(o.onNext(!1),o.onCompleted()):doner&&(o.onNext(!0),o.onCompleted()))});(isArrayLike(second)||isIterable(second))&&(second=observableFrom(second)),isPromise(second)&&(second=observableFromPromise(second));var subscription2=second.subscribe(function(x){if(ql.length>0){var v=ql.shift(),equal=tryCatch(comparer)(v,x);if(equal===errorObj)return o.onError(equal.e);equal||(o.onNext(!1),o.onCompleted())}else donel?(o.onNext(!1),o.onCompleted()):qr.push(x)},function(e){o.onError(e)},function(){doner=!0,0===qr.length&&(ql.length>0?(o.onNext(!1),o.onCompleted()):donel&&(o.onNext(!0),o.onCompleted()))});return new BinaryDisposable(subscription1,subscription2)},first)};var ElementAtObservable=function(__super__){function ElementAtObservable(source,i,d){this.source=source,this._i=i,this._d=d,__super__.call(this)}return inherits(ElementAtObservable,__super__),ElementAtObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ElementAtObserver(o,this._i,this._d))},ElementAtObservable}(ObservableBase),ElementAtObserver=function(__super__){function ElementAtObserver(o,i,d){this._o=o,this._i=i,this._d=d,__super__.call(this)}return inherits(ElementAtObserver,__super__),ElementAtObserver.prototype.next=function(x){0===this._i--&&(this._o.onNext(x),this._o.onCompleted())},ElementAtObserver.prototype.error=function(e){this._o.onError(e)},ElementAtObserver.prototype.completed=function(){this._d===undefined?this._o.onError(new ArgumentOutOfRangeError):(this._o.onNext(this._d),this._o.onCompleted())},ElementAtObserver}(AbstractObserver);observableProto.elementAt=function(index,defaultValue){if(index<0)throw new ArgumentOutOfRangeError;return new ElementAtObservable(this,index,defaultValue)};var SingleObserver=function(__super__){function SingleObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,this._hv=!1,this._v=null,__super__.call(this)}return inherits(SingleObserver,__super__),SingleObserver.prototype.next=function(x){var shouldYield=!1;if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(shouldYield=!0)}else this._obj.predicate||(shouldYield=!0);if(shouldYield){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=x}},SingleObserver.prototype.error=function(e){this._o.onError(e)},SingleObserver.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},SingleObserver}(AbstractObserver);observableProto.single=function(predicate,thisArg){var obj={},source=this;if(obj="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new AnonymousObservable(function(o){return source.subscribe(new SingleObserver(o,obj,source))},source)};var FirstObservable=function(__super__){function FirstObservable(source,obj){this.source=source,this._obj=obj,__super__.call(this)}return inherits(FirstObservable,__super__),FirstObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new FirstObserver(o,this._obj,this.source))},FirstObservable}(ObservableBase),FirstObserver=function(__super__){function FirstObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,__super__.call(this)}return inherits(FirstObserver,__super__),FirstObserver.prototype.next=function(x){if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(this._o.onNext(x),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(x),this._o.onCompleted())},FirstObserver.prototype.error=function(e){this._o.onError(e)},FirstObserver.prototype.completed=function(){this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},FirstObserver}(AbstractObserver);observableProto.first=function(){var obj={};if(obj="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new FirstObservable(this,obj)};var LastObservable=function(__super__){function LastObservable(source,obj){this.source=source,this._obj=obj,__super__.call(this)}return inherits(LastObservable,__super__),LastObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new LastObserver(o,this._obj,this.source))},LastObservable}(ObservableBase),LastObserver=function(__super__){function LastObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,this._hv=!1,this._v=null,__super__.call(this)}return inherits(LastObserver,__super__),LastObserver.prototype.next=function(x){var shouldYield=!1;if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(shouldYield=!0)}else this._obj.predicate||(shouldYield=!0);shouldYield&&(this._hv=!0,this._v=x)},LastObserver.prototype.error=function(e){this._o.onError(e)},LastObserver.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},LastObserver}(AbstractObserver);observableProto.last=function(){var obj={};if(obj="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new LastObservable(this,obj)};var FindValueObserver=function(__super__){function FindValueObserver(observer,source,callback,yieldIndex){this._o=observer,this._s=source,this._cb=callback,this._y=yieldIndex,this._i=0,__super__.call(this)}return inherits(FindValueObserver,__super__),FindValueObserver.prototype.next=function(x){var shouldRun=tryCatch(this._cb)(x,this._i,this._s);return shouldRun===errorObj?this._o.onError(shouldRun.e):void(shouldRun?(this._o.onNext(this._y?this._i:x),this._o.onCompleted()):this._i++)},FindValueObserver.prototype.error=function(e){this._o.onError(e)},FindValueObserver.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},FindValueObserver}(AbstractObserver);observableProto.find=function(predicate,thisArg){return findValue(this,predicate,thisArg,!1)},observableProto.findIndex=function(predicate,thisArg){return findValue(this,predicate,thisArg,!0)};var ToSetObservable=function(__super__){function ToSetObservable(source){this.source=source,__super__.call(this)}return inherits(ToSetObservable,__super__),ToSetObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ToSetObserver(o))},ToSetObservable}(ObservableBase),ToSetObserver=function(__super__){function ToSetObserver(o){this._o=o,this._s=new root.Set,__super__.call(this)}return inherits(ToSetObserver,__super__),ToSetObserver.prototype.next=function(x){this._s.add(x)},ToSetObserver.prototype.error=function(e){this._o.onError(e)},ToSetObserver.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},ToSetObserver}(AbstractObserver);observableProto.toSet=function(){if("undefined"==typeof root.Set)throw new TypeError;return new ToSetObservable(this)};var ToMapObservable=function(__super__){function ToMapObservable(source,k,e){this.source=source,this._k=k,this._e=e,__super__.call(this)}return inherits(ToMapObservable,__super__),ToMapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ToMapObserver(o,this._k,this._e))},ToMapObservable}(ObservableBase),ToMapObserver=function(__super__){function ToMapObserver(o,k,e){this._o=o,this._k=k,this._e=e,this._m=new root.Map,__super__.call(this)}return inherits(ToMapObserver,__super__),ToMapObserver.prototype.next=function(x){var key=tryCatch(this._k)(x);if(key===errorObj)return this._o.onError(key.e);var elem=x;return this._e&&(elem=tryCatch(this._e)(x),elem===errorObj)?this._o.onError(elem.e):void this._m.set(key,elem)},ToMapObserver.prototype.error=function(e){this._o.onError(e)},ToMapObserver.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},ToMapObserver}(AbstractObserver);observableProto.toMap=function(keySelector,elementSelector){if("undefined"==typeof root.Map)throw new TypeError;return new ToMapObservable(this,keySelector,elementSelector)};var SliceObservable=function(__super__){function SliceObservable(source,b,e){this.source=source,this._b=b,this._e=e,__super__.call(this)}return inherits(SliceObservable,__super__),SliceObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SliceObserver(o,this._b,this._e))},SliceObservable}(ObservableBase),SliceObserver=function(__super__){function SliceObserver(o,b,e){this._o=o,this._b=b,this._e=e,this._i=0,__super__.call(this)}return inherits(SliceObserver,__super__),SliceObserver.prototype.next=function(x){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(x)),this._i++},SliceObserver.prototype.error=function(e){this._o.onError(e)},SliceObserver.prototype.completed=function(){this._o.onCompleted()},SliceObserver}(AbstractObserver);observableProto.slice=function(begin,end){var start=begin||0;if(start<0)throw new Rx.ArgumentOutOfRangeError;if("number"==typeof end&&end<start)throw new Rx.ArgumentOutOfRangeError;return new SliceObservable(this,start,end)};var LastIndexOfObservable=function(__super__){function LastIndexOfObservable(source,e,n){this.source=source,this._e=e,this._n=n,__super__.call(this)}return inherits(LastIndexOfObservable,__super__),LastIndexOfObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(-1),o.onCompleted(),disposableEmpty):this.source.subscribe(new LastIndexOfObserver(o,this._e,this._n))},LastIndexOfObservable}(ObservableBase),LastIndexOfObserver=function(__super__){function LastIndexOfObserver(o,e,n){this._o=o,this._e=e,this._n=n,this._v=0,this._hv=!1,this._i=0,__super__.call(this)}return inherits(LastIndexOfObserver,__super__),LastIndexOfObserver.prototype.next=function(x){this._i>=this._n&&x===this._e&&(this._hv=!0,this._v=this._i),this._i++},LastIndexOfObserver.prototype.error=function(e){this._o.onError(e)},LastIndexOfObserver.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},LastIndexOfObserver}(AbstractObserver);observableProto.lastIndexOf=function(searchElement,fromIndex){var n=+fromIndex||0;return Math.abs(n)===1/0&&(n=0),new LastIndexOfObservable(this,searchElement,n)},Observable.wrap=function(fn){function createObservable(){return Observable.spawn.call(this,fn.apply(this,arguments))}return createObservable.__generatorFunction__=fn,createObservable};var spawn=Observable.spawn=function(){for(var gen=arguments[0],self=this,args=[],i=1,len=arguments.length;i<len;i++)args.push(arguments[i]);return new AnonymousObservable(function(o){function processGenerator(res){var ret=tryCatch(gen.next).call(gen,res);return ret===errorObj?o.onError(ret.e):void next(ret)}function onError(err){var ret=tryCatch(gen.next).call(gen,err);return ret===errorObj?o.onError(ret.e):void next(ret)}function next(ret){if(ret.done)return o.onNext(ret.value),void o.onCompleted();var obs=toObservable.call(self,ret.value),value=null,hasValue=!1;Observable.isObservable(obs)?g.add(obs.subscribe(function(val){hasValue=!0,value=val},onError,function(){hasValue&&processGenerator(value)})):onError(new TypeError("type not supported"))}var g=new CompositeDisposable;return isFunction(gen)&&(gen=gen.apply(self,args)),gen&&isFunction(gen.next)?(processGenerator(),g):(o.onNext(gen),o.onCompleted())})};Observable.start=function(func,context,scheduler){return observableToAsync(func,context,scheduler)()};var observableToAsync=Observable.toAsync=function(func,context,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),function(){var args=arguments,subject=new AsyncSubject;return scheduler.schedule(null,function(){var result;try{result=func.apply(context,args)}catch(e){return void subject.onError(e)}subject.onNext(result),subject.onCompleted()}),subject.asObservable()}};Observable.fromCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return createCbObservable(fn,ctx,selector,args)}},Observable.fromNodeCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return createNodeObservable(fn,ctx,selector,args)}},ListenDisposable.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Rx.config.useNativeEvents=!1;var EventObservable=function(__super__){function EventObservable(el,name,fn){this._el=el,this._n=name,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}return inherits(EventObservable,__super__),EventObservable.prototype.subscribeCore=function(o){return createEventListener(this._el,this._n,createHandler(o,this._fn))},EventObservable}(ObservableBase);Observable.fromEvent=function(element,eventName,selector){return element.addListener?fromEventPattern(function(h){element.addListener(eventName,h);
},function(h){element.removeListener(eventName,h)},selector):Rx.config.useNativeEvents||"function"!=typeof element.on||"function"!=typeof element.off?new EventObservable(element,eventName,selector).publish().refCount():fromEventPattern(function(h){element.on(eventName,h)},function(h){element.off(eventName,h)},selector)};var EventPatternObservable=function(__super__){function EventPatternObservable(add,del,fn){this._add=add,this._del=del,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}function EventPatternDisposable(del,fn,ret){this._del=del,this._fn=fn,this._ret=ret,this.isDisposed=!1}return inherits(EventPatternObservable,__super__),EventPatternObservable.prototype.subscribeCore=function(o){var fn=createHandler(o,this._fn),returnValue=this._add(fn);return new EventPatternDisposable(this._del,fn,returnValue)},EventPatternDisposable.prototype.dispose=function(){this.isDisposed||(isFunction(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},EventPatternObservable}(ObservableBase),fromEventPattern=Observable.fromEventPattern=function(addHandler,removeHandler,selector){return new EventPatternObservable(addHandler,removeHandler,selector).publish().refCount()};Observable.startAsync=function(functionAsync){var promise=tryCatch(functionAsync)();return promise===errorObj?observableThrow(promise.e):observableFromPromise(promise)};var PausableObservable=function(__super__){function PausableObservable(source,pauser){this.source=source,this.controller=new Subject,this.paused=!0,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableObservable,__super__),PausableObservable.prototype._subscribe=function(o){var conn=this.source.publish(),subscription=conn.subscribe(o),connection=disposableEmpty,pausable=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(b){b?connection=conn.connect():(connection.dispose(),connection=disposableEmpty)});return new NAryDisposable([subscription,connection,pausable])},PausableObservable.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},PausableObservable.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},PausableObservable}(Observable);observableProto.pausable=function(pauser){return new PausableObservable(this,pauser)};var PausableBufferedObservable=function(__super__){function PausableBufferedObservable(source,pauser){this.source=source,this.controller=new Subject,this.paused=!0,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableBufferedObservable,__super__),PausableBufferedObservable.prototype._subscribe=function(o){function drainQueue(){for(;q.length>0;)o.onNext(q.shift())}var previousShouldFire,q=[],subscription=combineLatestSource(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(data,shouldFire){return{data:data,shouldFire:shouldFire}}).subscribe(function(results){previousShouldFire!==undefined&&results.shouldFire!==previousShouldFire?(previousShouldFire=results.shouldFire,results.shouldFire&&drainQueue()):(previousShouldFire=results.shouldFire,results.shouldFire?o.onNext(results.data):q.push(results.data))},function(err){drainQueue(),o.onError(err)},function(){drainQueue(),o.onCompleted()});return subscription},PausableBufferedObservable.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},PausableBufferedObservable.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},PausableBufferedObservable}(Observable);observableProto.pausableBuffered=function(pauser){return new PausableBufferedObservable(this,pauser)};var ControlledObservable=function(__super__){function ControlledObservable(source,enableQueue,scheduler){__super__.call(this),this.subject=new ControlledSubject(enableQueue,scheduler),this.source=source.multicast(this.subject).refCount()}return inherits(ControlledObservable,__super__),ControlledObservable.prototype._subscribe=function(o){return this.source.subscribe(o)},ControlledObservable.prototype.request=function(numberOfItems){return this.subject.request(null==numberOfItems?-1:numberOfItems)},ControlledObservable}(Observable),ControlledSubject=function(__super__){function ControlledSubject(enableQueue,scheduler){null==enableQueue&&(enableQueue=!0),__super__.call(this),this.subject=new Subject,this.enableQueue=enableQueue,this.queue=enableQueue?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=scheduler||currentThreadScheduler}return inherits(ControlledSubject,__super__),addProperties(ControlledSubject.prototype,Observer,{_subscribe:function(o){return this.subject.subscribe(o)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(error){this.hasFailed=!0,this.error=error,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnError(error)):(this.subject.onError(error),this.disposeCurrentRequest())},onNext:function(value){this.requestedCount<=0?this.enableQueue&&this.queue.push(Notification.createOnNext(value)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(value))},_processRequest:function(numberOfItems){if(this.enableQueue)for(;this.queue.length>0&&(numberOfItems>0||"N"!==this.queue[0].kind);){var first=this.queue.shift();first.accept(this.subject),"N"===first.kind?numberOfItems--:(this.disposeCurrentRequest(),this.queue=[])}return numberOfItems},request:function(number){this.disposeCurrentRequest();var self=this;return this.requestedDisposable=this.scheduler.schedule(number,function(s,i){var remaining=self._processRequest(i),stopped=self.hasCompleted||self.hasFailed;if(!stopped&&remaining>0)return self.requestedCount=remaining,disposableCreate(function(){self.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),ControlledSubject}(Observable);observableProto.controlled=function(enableQueue,scheduler){return enableQueue&&isScheduler(enableQueue)&&(scheduler=enableQueue,enableQueue=!0),null==enableQueue&&(enableQueue=!0),new ControlledObservable(this,enableQueue,scheduler)};var StopAndWaitObservable=function(__super__){function StopAndWaitObservable(source){__super__.call(this),this.source=source}function scheduleMethod(s,self){return self.source.request(1)}inherits(StopAndWaitObservable,__super__),StopAndWaitObservable.prototype._subscribe=function(o){return this.subscription=this.source.subscribe(new StopAndWaitObserver(o,this,this.subscription)),new BinaryDisposable(this.subscription,defaultScheduler.schedule(this,scheduleMethod))};var StopAndWaitObserver=function(__sub__){function StopAndWaitObserver(observer,observable,cancel){__sub__.call(this),this.observer=observer,this.observable=observable,this.cancel=cancel,this.scheduleDisposable=null}function innerScheduleMethod(s,self){return self.observable.source.request(1)}return inherits(StopAndWaitObserver,__sub__),StopAndWaitObserver.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},StopAndWaitObserver.prototype.error=function(error){this.observer.onError(error),this.dispose()},StopAndWaitObserver.prototype.next=function(value){this.observer.onNext(value),this.scheduleDisposable=defaultScheduler.schedule(this,innerScheduleMethod)},StopAndWaitObserver.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),__sub__.prototype.dispose.call(this)},StopAndWaitObserver}(AbstractObserver);return StopAndWaitObservable}(Observable);ControlledObservable.prototype.stopAndWait=function(){return new StopAndWaitObservable(this)};var WindowedObservable=function(__super__){function WindowedObservable(source,windowSize){__super__.call(this),this.source=source,this.windowSize=windowSize}function scheduleMethod(s,self){return self.source.request(self.windowSize)}inherits(WindowedObservable,__super__),WindowedObservable.prototype._subscribe=function(o){return this.subscription=this.source.subscribe(new WindowedObserver(o,this,this.subscription)),new BinaryDisposable(this.subscription,defaultScheduler.schedule(this,scheduleMethod))};var WindowedObserver=function(__sub__){function WindowedObserver(observer,observable,cancel){this.observer=observer,this.observable=observable,this.cancel=cancel,this.received=0,this.scheduleDisposable=null,__sub__.call(this)}function innerScheduleMethod(s,self){return self.observable.source.request(self.observable.windowSize)}return inherits(WindowedObserver,__sub__),WindowedObserver.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},WindowedObserver.prototype.error=function(error){this.observer.onError(error),this.dispose()},WindowedObserver.prototype.next=function(value){this.observer.onNext(value),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=defaultScheduler.schedule(this,innerScheduleMethod))},WindowedObserver.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),__sub__.prototype.dispose.call(this)},WindowedObserver}(AbstractObserver);return WindowedObservable}(Observable);ControlledObservable.prototype.windowed=function(windowSize){return new WindowedObservable(this,windowSize)},observableProto.pipe=function(dest){function onDrain(){source.resume()}var source=this.pausableBuffered();return dest.addListener("drain",onDrain),source.subscribe(function(x){!dest.write(x)&&source.pause()},function(err){dest.emit("error",err)},function(){!dest._isStdio&&dest.end(),dest.removeListener("drain",onDrain)}),source.resume(),dest};var MulticastObservable=function(__super__){function MulticastObservable(source,fn1,fn2){this.source=source,this._fn1=fn1,this._fn2=fn2,__super__.call(this)}return inherits(MulticastObservable,__super__),MulticastObservable.prototype.subscribeCore=function(o){var connectable=this.source.multicast(this._fn1());return new BinaryDisposable(this._fn2(connectable).subscribe(o),connectable.connect())},MulticastObservable}(ObservableBase);observableProto.multicast=function(subjectOrSubjectSelector,selector){return isFunction(subjectOrSubjectSelector)?new MulticastObservable(this,subjectOrSubjectSelector,selector):new ConnectableObservable(this,subjectOrSubjectSelector)},observableProto.publish=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new Subject},selector):this.multicast(new Subject)},observableProto.share=function(){return this.publish().refCount()},observableProto.publishLast=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new AsyncSubject},selector):this.multicast(new AsyncSubject)},observableProto.publishValue=function(initialValueOrSelector,initialValue){return 2===arguments.length?this.multicast(function(){return new BehaviorSubject(initialValue)},initialValueOrSelector):this.multicast(new BehaviorSubject(initialValueOrSelector))},observableProto.shareValue=function(initialValue){return this.publishValue(initialValue).refCount()},observableProto.replay=function(selector,bufferSize,windowSize,scheduler){return selector&&isFunction(selector)?this.multicast(function(){return new ReplaySubject(bufferSize,windowSize,scheduler)},selector):this.multicast(new ReplaySubject(bufferSize,windowSize,scheduler))},observableProto.shareReplay=function(bufferSize,windowSize,scheduler){return this.replay(null,bufferSize,windowSize,scheduler).refCount()};var InnerSubscription=function(s,o){this._s=s,this._o=o};InnerSubscription.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var idx=this._s.observers.indexOf(this._o);this._s.observers.splice(idx,1),this._o=null}};var RefCountObservable=function(__super__){function RefCountObservable(source){this.source=source,this._count=0,this._connectableSubscription=null,__super__.call(this)}function RefCountDisposable(p,s){this._p=p,this._s=s,this.isDisposed=!1}return inherits(RefCountObservable,__super__),RefCountObservable.prototype.subscribeCore=function(o){var subscription=this.source.subscribe(o);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new RefCountDisposable(this,subscription)},RefCountDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},RefCountObservable}(ObservableBase),ConnectableObservable=Rx.ConnectableObservable=function(__super__){function ConnectableObservable(source,subject){this.source=source,this._connection=null,this._source=source.asObservable(),this._subject=subject,__super__.call(this)}function ConnectDisposable(parent,subscription){this._p=parent,this._s=subscription}return inherits(ConnectableObservable,__super__),ConnectDisposable.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},ConnectableObservable.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return disposableEmpty;var subscription=this._source.subscribe(this._subject);this._connection=new ConnectDisposable(this,subscription)}return this._connection},ConnectableObservable.prototype._subscribe=function(o){return this._subject.subscribe(o)},ConnectableObservable.prototype.refCount=function(){return new RefCountObservable(this)},ConnectableObservable}(Observable);observableProto.singleInstance=function(){function getObservable(){return hasObservable||(hasObservable=!0,observable=source.finally(function(){hasObservable=!1}).publish().refCount()),observable}var observable,source=this,hasObservable=!1;return new AnonymousObservable(function(o){return getObservable().subscribe(o)})},observableProto.join=function(right,leftDurationSelector,rightDurationSelector,resultSelector){var left=this;return new AnonymousObservable(function(o){var group=new CompositeDisposable,leftDone=!1,rightDone=!1,leftId=0,rightId=0,leftMap=new Map,rightMap=new Map,handleError=function(e){o.onError(e)};return group.add(left.subscribe(function(value){var id=leftId++,md=new SingleAssignmentDisposable;leftMap.set(id,value),group.add(md);var duration=tryCatch(leftDurationSelector)(value);return duration===errorObj?o.onError(duration.e):(md.setDisposable(duration.take(1).subscribe(noop,handleError,function(){leftMap.delete(id)&&0===leftMap.size&&leftDone&&o.onCompleted(),group.remove(md)})),void rightMap.forEach(function(v){var result=tryCatch(resultSelector)(value,v);return result===errorObj?o.onError(result.e):void o.onNext(result)}))},handleError,function(){leftDone=!0,(rightDone||0===leftMap.size)&&o.onCompleted()})),group.add(right.subscribe(function(value){var id=rightId++,md=new SingleAssignmentDisposable;rightMap.set(id,value),group.add(md);var duration=tryCatch(rightDurationSelector)(value);return duration===errorObj?o.onError(duration.e):(md.setDisposable(duration.take(1).subscribe(noop,handleError,function(){rightMap.delete(id)&&0===rightMap.size&&rightDone&&o.onCompleted(),group.remove(md)})),void leftMap.forEach(function(v){var result=tryCatch(resultSelector)(v,value);return result===errorObj?o.onError(result.e):void o.onNext(result)}))},handleError,function(){rightDone=!0,(leftDone||0===rightMap.size)&&o.onCompleted()})),group},left)},observableProto.groupJoin=function(right,leftDurationSelector,rightDurationSelector,resultSelector){var left=this;return new AnonymousObservable(function(o){function handleError(e){}var group=new CompositeDisposable,r=new RefCountDisposable(group),leftMap=new Map,rightMap=new Map,leftId=0,rightId=0,handleError=function(e){return function(v){v.onError(e)}};return group.add(left.subscribe(function(value){var s=new Subject,id=leftId++;leftMap.set(id,s);var result=tryCatch(resultSelector)(value,addRef(s,r));if(result===errorObj)return leftMap.forEach(handleError(result.e)),o.onError(result.e);o.onNext(result),rightMap.forEach(function(v){s.onNext(v)});var md=new SingleAssignmentDisposable;group.add(md);var duration=tryCatch(leftDurationSelector)(value);return duration===errorObj?(leftMap.forEach(handleError(duration.e)),o.onError(duration.e)):void md.setDisposable(duration.take(1).subscribe(noop,function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){leftMap.delete(id)&&s.onCompleted(),group.remove(md)}))},function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){o.onCompleted()})),group.add(right.subscribe(function(value){var id=rightId++;rightMap.set(id,value);var md=new SingleAssignmentDisposable;group.add(md);var duration=tryCatch(rightDurationSelector)(value);return duration===errorObj?(leftMap.forEach(handleError(duration.e)),o.onError(duration.e)):(md.setDisposable(duration.take(1).subscribe(noop,function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){rightMap.delete(id),group.remove(md)})),void leftMap.forEach(function(v){v.onNext(value)}))},function(e){leftMap.forEach(handleError(e)),o.onError(e)})),r},left)},observableProto.buffer=function(){return this.window.apply(this,arguments).flatMap(toArray)},observableProto.window=function(windowOpeningsOrClosingSelector,windowClosingSelector){return 1===arguments.length&&"function"!=typeof arguments[0]?observableWindowWithBoundaries.call(this,windowOpeningsOrClosingSelector):"function"==typeof windowOpeningsOrClosingSelector?observableWindowWithClosingSelector.call(this,windowOpeningsOrClosingSelector):observableWindowWithOpenings.call(this,windowOpeningsOrClosingSelector,windowClosingSelector)};var PairwiseObservable=function(__super__){function PairwiseObservable(source){this.source=source,__super__.call(this)}return inherits(PairwiseObservable,__super__),PairwiseObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new PairwiseObserver(o))},PairwiseObservable}(ObservableBase),PairwiseObserver=function(__super__){function PairwiseObserver(o){this._o=o,this._p=null,this._hp=!1,__super__.call(this)}return inherits(PairwiseObserver,__super__),PairwiseObserver.prototype.next=function(x){this._hp?this._o.onNext([this._p,x]):this._hp=!0,this._p=x},PairwiseObserver.prototype.error=function(err){this._o.onError(err)},PairwiseObserver.prototype.completed=function(){this._o.onCompleted()},PairwiseObserver}(AbstractObserver);observableProto.pairwise=function(){return new PairwiseObservable(this)},observableProto.partition=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return[this.filter(predicate,thisArg),this.filter(function(x,i,o){return!fn(x,i,o)})]};var WhileEnumerable=function(__super__){function WhileEnumerable(c,s){this.c=c,this.s=s}return inherits(WhileEnumerable,__super__),WhileEnumerable.prototype[$iterator$]=function(){var self=this;return{next:function(){return self.c()?{done:!1,value:self.s}:{done:!0,value:void 0}}}},WhileEnumerable}(Enumerable);observableProto.letBind=observableProto.let=function(func){return func(this)},Observable.if=function(condition,thenSource,elseSourceOrScheduler){return observableDefer(function(){return elseSourceOrScheduler||(elseSourceOrScheduler=observableEmpty()),isPromise(thenSource)&&(thenSource=observableFromPromise(thenSource)),isPromise(elseSourceOrScheduler)&&(elseSourceOrScheduler=observableFromPromise(elseSourceOrScheduler)),"function"==typeof elseSourceOrScheduler.now&&(elseSourceOrScheduler=observableEmpty(elseSourceOrScheduler)),condition()?thenSource:elseSourceOrScheduler})},Observable.for=Observable.forIn=function(sources,resultSelector,thisArg){return enumerableOf(sources,resultSelector,thisArg).concat()};var observableWhileDo=Observable.while=Observable.whileDo=function(condition,source){return isPromise(source)&&(source=observableFromPromise(source)),enumerableWhile(condition,source).concat()};observableProto.doWhile=function(condition){return observableConcat([this,observableWhileDo(condition,this)])},Observable.case=function(selector,sources,defaultSourceOrScheduler){return observableDefer(function(){isPromise(defaultSourceOrScheduler)&&(defaultSourceOrScheduler=observableFromPromise(defaultSourceOrScheduler)),defaultSourceOrScheduler||(defaultSourceOrScheduler=observableEmpty()),isScheduler(defaultSourceOrScheduler)&&(defaultSourceOrScheduler=observableEmpty(defaultSourceOrScheduler));var result=sources[selector()];return isPromise(result)&&(result=observableFromPromise(result)),result||defaultSourceOrScheduler})};var ExpandObservable=function(__super__){function ExpandObservable(source,fn,scheduler){this.source=source,this._fn=fn,this._scheduler=scheduler,__super__.call(this)}function scheduleRecursive(args,recurse){var work,state=args[0],self=args[1];if(!(state.q.length>0))return void(state.isAcquired=!1);work=state.q.shift();var m1=new SingleAssignmentDisposable;state.d.add(m1),m1.setDisposable(work.subscribe(new ExpandObserver(state,self,m1))),recurse([state,self])}return inherits(ExpandObservable,__super__),ExpandObservable.prototype._ensureActive=function(state){var isOwner=!1;state.q.length>0&&(isOwner=!state.isAcquired,state.isAcquired=!0),isOwner&&state.m.setDisposable(this._scheduler.scheduleRecursive([state,this],scheduleRecursive))},ExpandObservable.prototype.subscribeCore=function(o){var m=new SerialDisposable,d=new CompositeDisposable(m),state={q:[],m:m,d:d,activeCount:0,isAcquired:!1,o:o};return state.q.push(this.source),state.activeCount++,this._ensureActive(state),d},ExpandObservable}(ObservableBase),ExpandObserver=function(__super__){function ExpandObserver(state,parent,m1){this._s=state,this._p=parent,this._m1=m1,__super__.call(this)}return inherits(ExpandObserver,__super__),ExpandObserver.prototype.next=function(x){this._s.o.onNext(x);var result=tryCatch(this._p._fn)(x);return result===errorObj?this._s.o.onError(result.e):(this._s.q.push(result),this._s.activeCount++,void this._p._ensureActive(this._s))},ExpandObserver.prototype.error=function(e){this._s.o.onError(e)},ExpandObserver.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},ExpandObserver}(AbstractObserver);observableProto.expand=function(selector,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new ExpandObservable(this,selector,scheduler)};var ForkJoinObservable=function(__super__){function ForkJoinObservable(sources,cb){this._sources=sources,this._cb=cb,__super__.call(this)}return inherits(ForkJoinObservable,__super__),ForkJoinObservable.prototype.subscribeCore=function(o){if(0===this._sources.length)return o.onCompleted(),disposableEmpty;for(var count=this._sources.length,state={finished:!1,hasResults:new Array(count),hasCompleted:new Array(count),results:new Array(count)},subscriptions=new CompositeDisposable,i=0,len=this._sources.length;i<len;i++){var source=this._sources[i];isPromise(source)&&(source=observableFromPromise(source)),subscriptions.add(source.subscribe(new ForkJoinObserver(o,state,i,this._cb,subscriptions)))}return subscriptions},ForkJoinObservable}(ObservableBase),ForkJoinObserver=function(__super__){function ForkJoinObserver(o,s,i,cb,subs){this._o=o,this._s=s,this._i=i,this._cb=cb,this._subs=subs,__super__.call(this)}return inherits(ForkJoinObserver,__super__),ForkJoinObserver.prototype.next=function(x){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=x)},ForkJoinObserver.prototype.error=function(e){this._s.finished=!0,this._o.onError(e),this._subs.dispose()},ForkJoinObserver.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var i=0;i<this._s.results.length;i++)if(!this._s.hasCompleted[i])return;this._s.finished=!0;var res=tryCatch(this._cb).apply(null,this._s.results);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res),this._o.onCompleted()}},ForkJoinObserver}(AbstractObserver);Observable.forkJoin=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new ForkJoinObservable(args,resultSelector)},observableProto.forkJoin=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return Array.isArray(args[0])?args[0].unshift(this):args.unshift(this),Observable.forkJoin.apply(null,args)},observableProto.manySelect=observableProto.extend=function(selector,scheduler){isScheduler(scheduler)||(scheduler=Rx.Scheduler.immediate);var source=this;return observableDefer(function(){var chain;return source.map(function(x){var curr=new ChainObservable(x);return chain&&chain.onNext(x),chain=curr,curr}).tap(noop,function(e){chain&&chain.onError(e)},function(){chain&&chain.onCompleted()}).observeOn(scheduler).map(selector)},source)};var ChainObservable=function(__super__){function ChainObservable(head){__super__.call(this),this.head=head,this.tail=new AsyncSubject}return inherits(ChainObservable,__super__),addProperties(ChainObservable.prototype,Observer,{_subscribe:function(o){var g=new CompositeDisposable;return g.add(currentThreadScheduler.schedule(this,function(_,self){o.onNext(self.head),g.add(self.tail.mergeAll().subscribe(o))})),g},onCompleted:function(){this.onNext(Observable.empty())},onError:function(e){this.onNext(Observable.throw(e))},onNext:function(v){this.tail.onNext(v),this.tail.onCompleted()}}),ChainObservable}(Observable),Map=root.Map||function(){function Map(){this.size=0,this._values=[],this._keys=[]}return Map.prototype.delete=function(key){var i=this._keys.indexOf(key);return i!==-1&&(this._values.splice(i,1),this._keys.splice(i,1),this.size--,!0)},Map.prototype.get=function(key){var i=this._keys.indexOf(key);return i===-1?undefined:this._values[i]},Map.prototype.set=function(key,value){var i=this._keys.indexOf(key);return i===-1?(this._keys.push(key),this._values.push(value),this.size++):this._values[i]=value,this},Map.prototype.forEach=function(cb,thisArg){for(var i=0;i<this.size;i++)cb.call(thisArg,this._values[i],this._keys[i])},Map}();Pattern.prototype.and=function(other){return new Pattern(this.patterns.concat(other))},Pattern.prototype.thenDo=function(selector){return new Plan(this,selector)},Plan.prototype.activate=function(externalSubscriptions,observer,deactivate){for(var joinObservers=[],errHandler=handleOnError(observer),i=0,len=this.expression.patterns.length;i<len;i++)joinObservers.push(planCreateObserver(externalSubscriptions,this.expression.patterns[i],errHandler));var activePlan=new ActivePlan(joinObservers,handleOnNext(this,observer),function(){for(var j=0,jlen=joinObservers.length;j<jlen;j++)joinObservers[j].removeActivePlan(activePlan);deactivate(activePlan)});for(i=0,len=joinObservers.length;i<len;i++)joinObservers[i].addActivePlan(activePlan);return activePlan},ActivePlan.prototype.dequeue=function(){this.joinObservers.forEach(function(v){v.queue.shift()})},ActivePlan.prototype.match=function(){var i,len,hasValues=!0;for(i=0,len=this.joinObserverArray.length;i<len;i++)if(0===this.joinObserverArray[i].queue.length){hasValues=!1;break}if(hasValues){var firstValues=[],isCompleted=!1;for(i=0,len=this.joinObserverArray.length;i<len;i++)firstValues.push(this.joinObserverArray[i].queue[0]),"C"===this.joinObserverArray[i].queue[0].kind&&(isCompleted=!0);if(isCompleted)this.onCompleted();else{this.dequeue();var values=[];for(i=0,len=firstValues.length;i<firstValues.length;i++)values.push(firstValues[i].value);this.onNext.apply(this,values)}}};var JoinObserver=function(__super__){function JoinObserver(source,onError){__super__.call(this),this.source=source,this.onError=onError,this.queue=[],this.activePlans=[],this.subscription=new SingleAssignmentDisposable,this.isDisposed=!1}inherits(JoinObserver,__super__);var JoinObserverPrototype=JoinObserver.prototype;return JoinObserverPrototype.next=function(notification){if(!this.isDisposed){if("E"===notification.kind)return this.onError(notification.error);this.queue.push(notification);for(var activePlans=this.activePlans.slice(0),i=0,len=activePlans.length;i<len;i++)activePlans[i].match()}},JoinObserverPrototype.error=noop,JoinObserverPrototype.completed=noop,JoinObserverPrototype.addActivePlan=function(activePlan){this.activePlans.push(activePlan)},JoinObserverPrototype.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},JoinObserverPrototype.removeActivePlan=function(activePlan){this.activePlans.splice(this.activePlans.indexOf(activePlan),1),0===this.activePlans.length&&this.dispose()},JoinObserverPrototype.dispose=function(){__super__.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},JoinObserver}(AbstractObserver);observableProto.and=function(right){return new Pattern([this,right])},observableProto.thenDo=function(selector){return new Pattern([this]).thenDo(selector)},Observable.when=function(){var plans,len=arguments.length;if(Array.isArray(arguments[0]))plans=arguments[0];else{plans=new Array(len);for(var i=0;i<len;i++)plans[i]=arguments[i]}return new AnonymousObservable(function(o){var activePlans=[],externalSubscriptions=new Map,outObserver=observerCreate(function(x){o.onNext(x)},function(err){externalSubscriptions.forEach(function(v){v.onError(err)}),o.onError(err)},function(x){o.onCompleted()});try{for(var i=0,len=plans.length;i<len;i++)activePlans.push(plans[i].activate(externalSubscriptions,outObserver,function(activePlan){var idx=activePlans.indexOf(activePlan);activePlans.splice(idx,1),0===activePlans.length&&o.onCompleted()}))}catch(e){return observableThrow(e).subscribe(o)}var group=new CompositeDisposable;return externalSubscriptions.forEach(function(joinObserver){joinObserver.subscribe(),group.add(joinObserver)}),group})};var TimerObservable=function(__super__){function TimerObservable(dt,s){this._dt=dt,this._s=s,__super__.call(this)}function scheduleMethod(s,o){o.onNext(0),o.onCompleted()}return inherits(TimerObservable,__super__),TimerObservable.prototype.subscribeCore=function(o){return this._s.scheduleFuture(o,this._dt,scheduleMethod)},TimerObservable}(ObservableBase),observableinterval=Observable.interval=function(period,scheduler){return observableTimerTimeSpanAndPeriod(period,period,isScheduler(scheduler)?scheduler:defaultScheduler)};Observable.timer=function(dueTime,periodOrScheduler,scheduler){var period;return isScheduler(scheduler)||(scheduler=defaultScheduler),null!=periodOrScheduler&&"number"==typeof periodOrScheduler?period=periodOrScheduler:isScheduler(periodOrScheduler)&&(scheduler=periodOrScheduler),(dueTime instanceof Date||"number"==typeof dueTime)&&period===undefined?_observableTimer(dueTime,scheduler):dueTime instanceof Date&&period!==undefined?observableTimerDateAndPeriod(dueTime,periodOrScheduler,scheduler):observableTimerTimeSpanAndPeriod(dueTime,period,scheduler)};observableProto.delay=function(){var firstArg=arguments[0];if("number"==typeof firstArg||firstArg instanceof Date){var dueTime=firstArg,scheduler=arguments[1];return isScheduler(scheduler)||(scheduler=defaultScheduler),dueTime instanceof Date?observableDelayAbsolute(this,dueTime,scheduler):observableDelayRelative(this,dueTime,scheduler)}if(Observable.isObservable(firstArg)||isFunction(firstArg))return delayWithSelector(this,firstArg,arguments[1]);throw new Error("Invalid arguments")};var DebounceObservable=function(__super__){
function DebounceObservable(source,dt,s){isScheduler(s)||(s=defaultScheduler),this.source=source,this._dt=dt,this._s=s,__super__.call(this)}return inherits(DebounceObservable,__super__),DebounceObservable.prototype.subscribeCore=function(o){var cancelable=new SerialDisposable;return new BinaryDisposable(this.source.subscribe(new DebounceObserver(o,this._dt,this._s,cancelable)),cancelable)},DebounceObservable}(ObservableBase),DebounceObserver=function(__super__){function DebounceObserver(observer,dueTime,scheduler,cancelable){this._o=observer,this._d=dueTime,this._scheduler=scheduler,this._c=cancelable,this._v=null,this._hv=!1,this._id=0,__super__.call(this)}return inherits(DebounceObserver,__super__),DebounceObserver.prototype.next=function(x){this._hv=!0,this._v=x;var currentId=++this._id,d=new SingleAssignmentDisposable;this._c.setDisposable(d),d.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(_,self){self._hv&&self._id===currentId&&self._o.onNext(x),self._hv=!1}))},DebounceObserver.prototype.error=function(e){this._c.dispose(),this._o.onError(e),this._hv=!1,this._id++},DebounceObserver.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},DebounceObserver}(AbstractObserver);observableProto.debounce=function(){if(isFunction(arguments[0]))return debounceWithSelector(this,arguments[0]);if("number"==typeof arguments[0])return new DebounceObservable(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},observableProto.windowWithTime=observableProto.windowTime=function(timeSpan,timeShiftOrScheduler,scheduler){var timeShift,source=this;return null==timeShiftOrScheduler&&(timeShift=timeSpan),isScheduler(scheduler)||(scheduler=defaultScheduler),"number"==typeof timeShiftOrScheduler?timeShift=timeShiftOrScheduler:isScheduler(timeShiftOrScheduler)&&(timeShift=timeSpan,scheduler=timeShiftOrScheduler),new AnonymousObservable(function(observer){function createTimer(){var m=new SingleAssignmentDisposable,isSpan=!1,isShift=!1;timerD.setDisposable(m),nextSpan===nextShift?(isSpan=!0,isShift=!0):nextSpan<nextShift?isSpan=!0:isShift=!0;var newTotalTime=isSpan?nextSpan:nextShift,ts=newTotalTime-totalTime;totalTime=newTotalTime,isSpan&&(nextSpan+=timeShift),isShift&&(nextShift+=timeShift),m.setDisposable(scheduler.scheduleFuture(null,ts,function(){if(isShift){var s=new Subject;q.push(s),observer.onNext(addRef(s,refCountDisposable))}isSpan&&q.shift().onCompleted(),createTimer()}))}var groupDisposable,refCountDisposable,nextShift=timeShift,nextSpan=timeSpan,q=[],timerD=new SerialDisposable,totalTime=0;return groupDisposable=new CompositeDisposable(timerD),refCountDisposable=new RefCountDisposable(groupDisposable),q.push(new Subject),observer.onNext(addRef(q[0],refCountDisposable)),createTimer(),groupDisposable.add(source.subscribe(function(x){for(var i=0,len=q.length;i<len;i++)q[i].onNext(x)},function(e){for(var i=0,len=q.length;i<len;i++)q[i].onError(e);observer.onError(e)},function(){for(var i=0,len=q.length;i<len;i++)q[i].onCompleted();observer.onCompleted()})),refCountDisposable},source)},observableProto.windowWithTimeOrCount=observableProto.windowTimeOrCount=function(timeSpan,count,scheduler){var source=this;return isScheduler(scheduler)||(scheduler=defaultScheduler),new AnonymousObservable(function(observer){function createTimer(id){var m=new SingleAssignmentDisposable;timerD.setDisposable(m),m.setDisposable(scheduler.scheduleFuture(null,timeSpan,function(){if(id===windowId){n=0;var newId=++windowId;s.onCompleted(),s=new Subject,observer.onNext(addRef(s,refCountDisposable)),createTimer(newId)}}))}var timerD=new SerialDisposable,groupDisposable=new CompositeDisposable(timerD),refCountDisposable=new RefCountDisposable(groupDisposable),n=0,windowId=0,s=new Subject;return observer.onNext(addRef(s,refCountDisposable)),createTimer(0),groupDisposable.add(source.subscribe(function(x){var newId=0,newWindow=!1;s.onNext(x),++n===count&&(newWindow=!0,n=0,newId=++windowId,s.onCompleted(),s=new Subject,observer.onNext(addRef(s,refCountDisposable))),newWindow&&createTimer(newId)},function(e){s.onError(e),observer.onError(e)},function(){s.onCompleted(),observer.onCompleted()})),refCountDisposable},source)},observableProto.bufferWithTime=observableProto.bufferTime=function(timeSpan,timeShiftOrScheduler,scheduler){return this.windowWithTime(timeSpan,timeShiftOrScheduler,scheduler).flatMap(toArray)},observableProto.bufferWithTimeOrCount=observableProto.bufferTimeOrCount=function(timeSpan,count,scheduler){return this.windowWithTimeOrCount(timeSpan,count,scheduler).flatMap(toArray)};var TimeIntervalObservable=function(__super__){function TimeIntervalObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(TimeIntervalObservable,__super__),TimeIntervalObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TimeIntervalObserver(o,this._s))},TimeIntervalObservable}(ObservableBase),TimeIntervalObserver=function(__super__){function TimeIntervalObserver(o,s){this._o=o,this._s=s,this._l=s.now(),__super__.call(this)}return inherits(TimeIntervalObserver,__super__),TimeIntervalObserver.prototype.next=function(x){var now=this._s.now(),span=now-this._l;this._l=now,this._o.onNext({value:x,interval:span})},TimeIntervalObserver.prototype.error=function(e){this._o.onError(e)},TimeIntervalObserver.prototype.completed=function(){this._o.onCompleted()},TimeIntervalObserver}(AbstractObserver);observableProto.timeInterval=function(scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TimeIntervalObservable(this,scheduler)};var TimestampObservable=function(__super__){function TimestampObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(TimestampObservable,__super__),TimestampObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TimestampObserver(o,this._s))},TimestampObservable}(ObservableBase),TimestampObserver=function(__super__){function TimestampObserver(o,s){this._o=o,this._s=s,__super__.call(this)}return inherits(TimestampObserver,__super__),TimestampObserver.prototype.next=function(x){this._o.onNext({value:x,timestamp:this._s.now()})},TimestampObserver.prototype.error=function(e){this._o.onError(e)},TimestampObserver.prototype.completed=function(){this._o.onCompleted()},TimestampObserver}(AbstractObserver);observableProto.timestamp=function(scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TimestampObservable(this,scheduler)};var SampleObservable=function(__super__){function SampleObservable(source,sampler){this.source=source,this._sampler=sampler,__super__.call(this)}return inherits(SampleObservable,__super__),SampleObservable.prototype.subscribeCore=function(o){var state={o:o,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new SingleAssignmentDisposable};return state.sourceSubscription.setDisposable(this.source.subscribe(new SampleSourceObserver(state))),new BinaryDisposable(state.sourceSubscription,this._sampler.subscribe(new SamplerObserver(state)))},SampleObservable}(ObservableBase),SamplerObserver=function(__super__){function SamplerObserver(s){this._s=s,__super__.call(this)}return inherits(SamplerObserver,__super__),SamplerObserver.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},SamplerObserver.prototype.next=function(){this._handleMessage()},SamplerObserver.prototype.error=function(e){this._s.onError(e)},SamplerObserver.prototype.completed=function(){this._handleMessage()},SamplerObserver}(AbstractObserver),SampleSourceObserver=function(__super__){function SampleSourceObserver(s){this._s=s,__super__.call(this)}return inherits(SampleSourceObserver,__super__),SampleSourceObserver.prototype.next=function(x){this._s.hasValue=!0,this._s.value=x},SampleSourceObserver.prototype.error=function(e){this._s.o.onError(e)},SampleSourceObserver.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},SampleSourceObserver}(AbstractObserver);observableProto.sample=function(intervalOrSampler,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),"number"==typeof intervalOrSampler?new SampleObservable(this,observableinterval(intervalOrSampler,scheduler)):new SampleObservable(this,intervalOrSampler)};var TimeoutError=Rx.TimeoutError=function(message){this.message=message||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};TimeoutError.prototype=Object.create(Error.prototype),observableProto.timeout=function(){var firstArg=arguments[0];if(firstArg instanceof Date||"number"==typeof firstArg)return timeout(this,firstArg,arguments[1],arguments[2]);if(Observable.isObservable(firstArg)||isFunction(firstArg))return timeoutWithSelector(this,firstArg,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var GenerateAbsoluteObservable=function(__super__){function GenerateAbsoluteObservable(state,cndFn,itrFn,resFn,timeFn,s){this._state=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._timeFn=timeFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.hasResult&&state.o.onNext(state.result),state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);if(state.hasResult=tryCatch(state.self._cndFn)(state.newState),state.hasResult===errorObj)return state.o.onError(state.hasResult.e);if(state.hasResult){if(state.result=tryCatch(state.self._resFn)(state.newState),state.result===errorObj)return state.o.onError(state.result.e);var time=tryCatch(state.self._timeFn)(state.newState);if(time===errorObj)return state.o.onError(time.e);recurse(state,time)}else state.o.onCompleted()}return inherits(GenerateAbsoluteObservable,__super__),GenerateAbsoluteObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(state,new Date(this._s.now()),scheduleRecursive)},GenerateAbsoluteObservable}(ObservableBase);Observable.generateWithAbsoluteTime=function(initialState,condition,iterate,resultSelector,timeSelector,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new GenerateAbsoluteObservable(initialState,condition,iterate,resultSelector,timeSelector,scheduler)};var GenerateRelativeObservable=function(__super__){function GenerateRelativeObservable(state,cndFn,itrFn,resFn,timeFn,s){this._state=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._timeFn=timeFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.hasResult&&state.o.onNext(state.result),state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);if(state.hasResult=tryCatch(state.self._cndFn)(state.newState),state.hasResult===errorObj)return state.o.onError(state.hasResult.e);if(state.hasResult){if(state.result=tryCatch(state.self._resFn)(state.newState),state.result===errorObj)return state.o.onError(state.result.e);var time=tryCatch(state.self._timeFn)(state.newState);if(time===errorObj)return state.o.onError(time.e);recurse(state,time)}else state.o.onCompleted()}return inherits(GenerateRelativeObservable,__super__),GenerateRelativeObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(state,0,scheduleRecursive)},GenerateRelativeObservable}(ObservableBase);Observable.generateWithRelativeTime=function(initialState,condition,iterate,resultSelector,timeSelector,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new GenerateRelativeObservable(initialState,condition,iterate,resultSelector,timeSelector,scheduler)};var DelaySubscription=function(__super__){function DelaySubscription(source,dt,s){this.source=source,this._dt=dt,this._s=s,__super__.call(this)}function scheduleMethod(s,state){var source=state[0],o=state[1],d=state[2];d.setDisposable(source.subscribe(o))}return inherits(DelaySubscription,__super__),DelaySubscription.prototype.subscribeCore=function(o){var d=new SerialDisposable;return d.setDisposable(this._s.scheduleFuture([this.source,o,d],this._dt,scheduleMethod)),d},DelaySubscription}(ObservableBase);observableProto.delaySubscription=function(dueTime,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new DelaySubscription(this,dueTime,scheduler)};var SkipLastWithTimeObservable=function(__super__){function SkipLastWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}return inherits(SkipLastWithTimeObservable,__super__),SkipLastWithTimeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipLastWithTimeObserver(o,this))},SkipLastWithTimeObservable}(ObservableBase),SkipLastWithTimeObserver=function(__super__){function SkipLastWithTimeObserver(o,p){this._o=o,this._s=p._s,this._d=p._d,this._q=[],__super__.call(this)}return inherits(SkipLastWithTimeObserver,__super__),SkipLastWithTimeObserver.prototype.next=function(x){var now=this._s.now();for(this._q.push({interval:now,value:x});this._q.length>0&&now-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},SkipLastWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipLastWithTimeObserver.prototype.completed=function(){for(var now=this._s.now();this._q.length>0&&now-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},SkipLastWithTimeObserver}(AbstractObserver);observableProto.skipLastWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipLastWithTimeObservable(this,duration,scheduler)};var TakeLastWithTimeObservable=function(__super__){function TakeLastWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}return inherits(TakeLastWithTimeObservable,__super__),TakeLastWithTimeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeLastWithTimeObserver(o,this._d,this._s))},TakeLastWithTimeObservable}(ObservableBase),TakeLastWithTimeObserver=function(__super__){function TakeLastWithTimeObserver(o,d,s){this._o=o,this._d=d,this._s=s,this._q=[],__super__.call(this)}return inherits(TakeLastWithTimeObserver,__super__),TakeLastWithTimeObserver.prototype.next=function(x){var now=this._s.now();for(this._q.push({interval:now,value:x});this._q.length>0&&now-this._q[0].interval>=this._d;)this._q.shift()},TakeLastWithTimeObserver.prototype.error=function(e){this._o.onError(e)},TakeLastWithTimeObserver.prototype.completed=function(){for(var now=this._s.now();this._q.length>0;){var next=this._q.shift();now-next.interval<=this._d&&this._o.onNext(next.value)}this._o.onCompleted()},TakeLastWithTimeObserver}(AbstractObserver);observableProto.takeLastWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TakeLastWithTimeObservable(this,duration,scheduler)},observableProto.takeLastBufferWithTime=function(duration,scheduler){var source=this;return isScheduler(scheduler)||(scheduler=defaultScheduler),new AnonymousObservable(function(o){var q=[];return source.subscribe(function(x){var now=scheduler.now();for(q.push({interval:now,value:x});q.length>0&&now-q[0].interval>=duration;)q.shift()},function(e){o.onError(e)},function(){for(var now=scheduler.now(),res=[];q.length>0;){var next=q.shift();now-next.interval<=duration&&res.push(next.value)}o.onNext(res),o.onCompleted()})},source)};var TakeWithTimeObservable=function(__super__){function TakeWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}function scheduleMethod(s,o){o.onCompleted()}return inherits(TakeWithTimeObservable,__super__),TakeWithTimeObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._s.scheduleFuture(o,this._d,scheduleMethod),this.source.subscribe(o))},TakeWithTimeObservable}(ObservableBase);observableProto.takeWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TakeWithTimeObservable(this,duration,scheduler)};var SkipWithTimeObservable=function(__super__){function SkipWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,this._open=!1,__super__.call(this)}function scheduleMethod(s,self){self._open=!0}return inherits(SkipWithTimeObservable,__super__),SkipWithTimeObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._s.scheduleFuture(this,this._d,scheduleMethod),this.source.subscribe(new SkipWithTimeObserver(o,this)))},SkipWithTimeObservable}(ObservableBase),SkipWithTimeObserver=function(__super__){function SkipWithTimeObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipWithTimeObserver,__super__),SkipWithTimeObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipWithTimeObserver.prototype.completed=function(){this._o.onCompleted()},SkipWithTimeObserver}(AbstractObserver);observableProto.skipWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipWithTimeObservable(this,duration,scheduler)};var SkipUntilWithTimeObservable=function(__super__){function SkipUntilWithTimeObservable(source,startTime,scheduler){this.source=source,this._st=startTime,this._s=scheduler,__super__.call(this)}function scheduleMethod(s,state){state._open=!0}return inherits(SkipUntilWithTimeObservable,__super__),SkipUntilWithTimeObservable.prototype.subscribeCore=function(o){return this._open=!1,new BinaryDisposable(this._s.scheduleFuture(this,this._st,scheduleMethod),this.source.subscribe(new SkipUntilWithTimeObserver(o,this)))},SkipUntilWithTimeObservable}(ObservableBase),SkipUntilWithTimeObserver=function(__super__){function SkipUntilWithTimeObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipUntilWithTimeObserver,__super__),SkipUntilWithTimeObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipUntilWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipUntilWithTimeObserver.prototype.completed=function(){this._o.onCompleted()},SkipUntilWithTimeObserver}(AbstractObserver);observableProto.skipUntilWithTime=function(startTime,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipUntilWithTimeObservable(this,startTime,scheduler)},observableProto.takeUntilWithTime=function(endTime,scheduler){isScheduler(scheduler)||(scheduler=defaultScheduler);var source=this;return new AnonymousObservable(function(o){return new BinaryDisposable(scheduler.scheduleFuture(o,endTime,function(_,o){o.onCompleted()}),source.subscribe(o))},source)},observableProto.throttle=function(windowDuration,scheduler){isScheduler(scheduler)||(scheduler=defaultScheduler);var duration=+windowDuration||0;if(duration<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var source=this;return new AnonymousObservable(function(o){var lastOnNext=0;return source.subscribe(function(x){var now=scheduler.now();(0===lastOnNext||now-lastOnNext>=duration)&&(lastOnNext=now,o.onNext(x))},function(e){o.onError(e)},function(){o.onCompleted()})},source)};var TransduceObserver=function(__super__){function TransduceObserver(o,xform){this._o=o,this._xform=xform,__super__.call(this)}return inherits(TransduceObserver,__super__),TransduceObserver.prototype.next=function(x){var res=tryCatch(this._xform["@@transducer/step"]).call(this._xform,this._o,x);res===errorObj&&this._o.onError(res.e)},TransduceObserver.prototype.error=function(e){this._o.onError(e)},TransduceObserver.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},TransduceObserver}(AbstractObserver);observableProto.transduce=function(transducer){var source=this;return new AnonymousObservable(function(o){var xform=transducer(transformForObserver(o));return source.subscribe(new TransduceObserver(o,xform))},source)};var SwitchFirstObservable=function(__super__){function SwitchFirstObservable(source){this.source=source,__super__.call(this)}return inherits(SwitchFirstObservable,__super__),SwitchFirstObservable.prototype.subscribeCore=function(o){var m=new SingleAssignmentDisposable,g=new CompositeDisposable,state={hasCurrent:!1,isStopped:!1,o:o,g:g};return g.add(m),m.setDisposable(this.source.subscribe(new SwitchFirstObserver(state))),g},SwitchFirstObservable}(ObservableBase),SwitchFirstObserver=function(__super__){function SwitchFirstObserver(state){this._s=state,__super__.call(this)}function InnerObserver(state,inner){this._s=state,this._i=inner,__super__.call(this)}return inherits(SwitchFirstObserver,__super__),SwitchFirstObserver.prototype.next=function(x){if(!this._s.hasCurrent){this._s.hasCurrent=!0,isPromise(x)&&(x=observableFromPromise(x));var inner=new SingleAssignmentDisposable;this._s.g.add(inner),inner.setDisposable(x.subscribe(new InnerObserver(this._s,inner)))}},SwitchFirstObserver.prototype.error=function(e){this._s.o.onError(e)},SwitchFirstObserver.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this._s.o.onNext(x)},InnerObserver.prototype.error=function(e){this._s.o.onError(e)},InnerObserver.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},SwitchFirstObserver}(AbstractObserver);observableProto.switchFirst=function(){return new SwitchFirstObservable(this)},observableProto.flatMapFirst=observableProto.exhaustMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).switchFirst()},observableProto.flatMapWithMaxConcurrent=observableProto.flatMapMaxConcurrent=function(limit,selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).merge(limit)};var VirtualTimeScheduler=Rx.VirtualTimeScheduler=function(__super__){function VirtualTimeScheduler(initialClock,comparer){this.clock=initialClock,this.comparer=comparer,this.isEnabled=!1,this.queue=new PriorityQueue(1024),__super__.call(this)}inherits(VirtualTimeScheduler,__super__);var VirtualTimeSchedulerPrototype=VirtualTimeScheduler.prototype;return VirtualTimeSchedulerPrototype.now=function(){return this.toAbsoluteTime(this.clock)},VirtualTimeSchedulerPrototype.schedule=function(state,action){return this.scheduleAbsolute(state,this.clock,action)},VirtualTimeSchedulerPrototype.scheduleFuture=function(state,dueTime,action){var dt=dueTime instanceof Date?this.toRelativeTime(dueTime-this.now()):this.toRelativeTime(dueTime);return this.scheduleRelative(state,dt,action)},VirtualTimeSchedulerPrototype.add=notImplemented,VirtualTimeSchedulerPrototype.toAbsoluteTime=notImplemented,VirtualTimeSchedulerPrototype.toRelativeTime=notImplemented,VirtualTimeSchedulerPrototype.schedulePeriodic=function(state,period,action){var s=new SchedulePeriodicRecursive(this,state,period,action);return s.start()},VirtualTimeSchedulerPrototype.scheduleRelative=function(state,dueTime,action){var runAt=this.add(this.clock,dueTime);return this.scheduleAbsolute(state,runAt,action)},VirtualTimeSchedulerPrototype.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var next=this.getNext();null!==next?(this.comparer(next.dueTime,this.clock)>0&&(this.clock=next.dueTime),next.invoke()):this.isEnabled=!1}while(this.isEnabled)}},VirtualTimeSchedulerPrototype.stop=function(){this.isEnabled=!1},VirtualTimeSchedulerPrototype.advanceTo=function(time){var dueToClock=this.comparer(this.clock,time);if(this.comparer(this.clock,time)>0)throw new ArgumentOutOfRangeError;if(0!==dueToClock&&!this.isEnabled){this.isEnabled=!0;do{var next=this.getNext();null!==next&&this.comparer(next.dueTime,time)<=0?(this.comparer(next.dueTime,this.clock)>0&&(this.clock=next.dueTime),next.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=time}},VirtualTimeSchedulerPrototype.advanceBy=function(time){var dt=this.add(this.clock,time),dueToClock=this.comparer(this.clock,dt);if(dueToClock>0)throw new ArgumentOutOfRangeError;0!==dueToClock&&this.advanceTo(dt)},VirtualTimeSchedulerPrototype.sleep=function(time){var dt=this.add(this.clock,time);if(this.comparer(this.clock,dt)>=0)throw new ArgumentOutOfRangeError;this.clock=dt},VirtualTimeSchedulerPrototype.getNext=function(){for(;this.queue.length>0;){var next=this.queue.peek();if(!next.isCancelled())return next;this.queue.dequeue()}return null},VirtualTimeSchedulerPrototype.scheduleAbsolute=function(state,dueTime,action){function run(scheduler,state1){return self.queue.remove(si),action(scheduler,state1)}var self=this,si=new ScheduledItem(this,state,run,dueTime,this.comparer);return this.queue.enqueue(si),si.disposable},VirtualTimeScheduler}(Scheduler);Rx.HistoricalScheduler=function(__super__){function HistoricalScheduler(initialClock,comparer){var clock=null==initialClock?0:initialClock,cmp=comparer||defaultSubComparer;__super__.call(this,clock,cmp)}inherits(HistoricalScheduler,__super__);var HistoricalSchedulerProto=HistoricalScheduler.prototype;return HistoricalSchedulerProto.add=function(absolute,relative){return absolute+relative},HistoricalSchedulerProto.toAbsoluteTime=function(absolute){return new Date(absolute).getTime()},HistoricalSchedulerProto.toRelativeTime=function(timeSpan){return timeSpan},HistoricalScheduler}(Rx.VirtualTimeScheduler),OnNextPredicate.prototype.equals=function(other){return other===this||null!=other&&("N"===other.kind&&this.predicate(other.value))},OnErrorPredicate.prototype.equals=function(other){return other===this||null!=other&&("E"===other.kind&&this.predicate(other.error))};var ReactiveTest=Rx.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(ticks,value){return"function"==typeof value?new Recorded(ticks,new OnNextPredicate(value)):new Recorded(ticks,Notification.createOnNext(value))},onError:function(ticks,error){return"function"==typeof error?new Recorded(ticks,new OnErrorPredicate(error)):new Recorded(ticks,Notification.createOnError(error))},onCompleted:function(ticks){return new Recorded(ticks,Notification.createOnCompleted())},subscribe:function(start,end){return new Subscription(start,end)}},Recorded=Rx.Recorded=function(time,value,comparer){this.time=time,this.value=value,this.comparer=comparer||defaultComparer};Recorded.prototype.equals=function(other){return this.time===other.time&&this.comparer(this.value,other.value)},Recorded.prototype.toString=function(){return this.value.toString()+"@"+this.time};var Subscription=Rx.Subscription=function(start,end){this.subscribe=start,this.unsubscribe=end||Number.MAX_VALUE};Subscription.prototype.equals=function(other){return this.subscribe===other.subscribe&&this.unsubscribe===other.unsubscribe},Subscription.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var MockDisposable=Rx.MockDisposable=function(scheduler){this.scheduler=scheduler,this.disposes=[],this.disposes.push(this.scheduler.clock)};MockDisposable.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var MockObserver=function(__super__){function MockObserver(scheduler){__super__.call(this),this.scheduler=scheduler,this.messages=[]}inherits(MockObserver,__super__);var MockObserverPrototype=MockObserver.prototype;return MockObserverPrototype.onNext=function(value){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnNext(value)))},MockObserverPrototype.onError=function(e){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnError(e)))},MockObserverPrototype.onCompleted=function(){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnCompleted()))},MockObserver}(Observer);MockPromise.prototype.then=function(onResolved,onRejected){var self=this;this.subscriptions.push(new Subscription(this.scheduler.clock));var newPromise,index=this.subscriptions.length-1,observer=Rx.Observer.create(function(x){var retValue=onResolved(x);if(retValue&&"function"==typeof retValue.then)newPromise=retValue;else{var ticks=self.scheduler.clock;newPromise=new MockPromise(self.scheduler,[Rx.ReactiveTest.onNext(ticks,undefined),Rx.ReactiveTest.onCompleted(ticks)])}var idx=self.observers.indexOf(observer);self.observers.splice(idx,1),self.subscriptions[index]=new Subscription(self.subscriptions[index].subscribe,self.scheduler.clock)},function(err){onRejected(err);var idx=self.observers.indexOf(observer);self.observers.splice(idx,1),self.subscriptions[index]=new Subscription(self.subscriptions[index].subscribe,self.scheduler.clock)});return this.observers.push(observer),newPromise||new MockPromise(this.scheduler,this.messages)};var HotObservable=function(__super__){function HotObservable(scheduler,messages){__super__.call(this);var message,notification,observable=this;this.scheduler=scheduler,this.messages=messages,this.subscriptions=[],this.observers=[];for(var i=0,len=this.messages.length;i<len;i++)message=this.messages[i],notification=message.value,function(innerNotification){scheduler.scheduleAbsolute(null,message.time,function(){for(var obs=observable.observers.slice(0),j=0,jLen=obs.length;j<jLen;j++)innerNotification.accept(obs[j]);return disposableEmpty})}(notification)}return inherits(HotObservable,__super__),HotObservable.prototype._subscribe=function(o){var observable=this;this.observers.push(o),this.subscriptions.push(new Subscription(this.scheduler.clock));var index=this.subscriptions.length-1;return disposableCreate(function(){var idx=observable.observers.indexOf(o);observable.observers.splice(idx,1),observable.subscriptions[index]=new Subscription(observable.subscriptions[index].subscribe,observable.scheduler.clock)})},HotObservable}(Observable),ColdObservable=function(__super__){function ColdObservable(scheduler,messages){__super__.call(this),this.scheduler=scheduler,this.messages=messages,this.subscriptions=[]}return inherits(ColdObservable,__super__),ColdObservable.prototype._subscribe=function(o){var message,notification,observable=this;this.subscriptions.push(new Subscription(this.scheduler.clock));for(var index=this.subscriptions.length-1,d=new CompositeDisposable,i=0,len=this.messages.length;i<len;i++)message=this.messages[i],notification=message.value,function(innerNotification){d.add(observable.scheduler.scheduleRelative(null,message.time,function(){return innerNotification.accept(o),disposableEmpty}))}(notification);return disposableCreate(function(){observable.subscriptions[index]=new Subscription(observable.subscriptions[index].subscribe,observable.scheduler.clock),d.dispose()})},ColdObservable}(Observable);Rx.TestScheduler=function(__super__){function baseComparer(x,y){return x>y?1:x<y?-1:0}function TestScheduler(){__super__.call(this,0,baseComparer)}return inherits(TestScheduler,__super__),TestScheduler.prototype.scheduleAbsolute=function(state,dueTime,action){return dueTime<=this.clock&&(dueTime=this.clock+1),__super__.prototype.scheduleAbsolute.call(this,state,dueTime,action)},TestScheduler.prototype.add=function(absolute,relative){return absolute+relative},TestScheduler.prototype.toAbsoluteTime=function(absolute){return new Date(absolute).getTime()},TestScheduler.prototype.toRelativeTime=function(timeSpan){return timeSpan},TestScheduler.prototype.startScheduler=function(createFn,settings){settings||(settings={}),null==settings.created&&(settings.created=ReactiveTest.created),null==settings.subscribed&&(settings.subscribed=ReactiveTest.subscribed),null==settings.disposed&&(settings.disposed=ReactiveTest.disposed);var source,subscription,observer=this.createObserver();
return this.scheduleAbsolute(null,settings.created,function(){return source=createFn(),disposableEmpty}),this.scheduleAbsolute(null,settings.subscribed,function(){return subscription=source.subscribe(observer),disposableEmpty}),this.scheduleAbsolute(null,settings.disposed,function(){return subscription.dispose(),disposableEmpty}),this.start(),observer},TestScheduler.prototype.createHotObservable=function(){var args,len=arguments.length;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}return new HotObservable(this,args)},TestScheduler.prototype.createColdObservable=function(){var args,len=arguments.length;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}return new ColdObservable(this,args)},TestScheduler.prototype.createResolvedPromise=function(ticks,value){return new MockPromise(this,[Rx.ReactiveTest.onNext(ticks,value),Rx.ReactiveTest.onCompleted(ticks)])},TestScheduler.prototype.createRejectedPromise=function(ticks,reason){return new MockPromise(this,[Rx.ReactiveTest.onError(ticks,reason)])},TestScheduler.prototype.createObserver=function(){return new MockObserver(this)},TestScheduler}(VirtualTimeScheduler);var AnonymousObservable=Rx.AnonymousObservable=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.__subscribe).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function AnonymousObservable(subscribe,parent){this.source=parent,this.__subscribe=subscribe,__super__.call(this)}return inherits(AnonymousObservable,__super__),AnonymousObservable.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},AnonymousObservable}(Observable),AutoDetachObserver=function(__super__){function AutoDetachObserver(observer){__super__.call(this),this.observer=observer,this.m=new SingleAssignmentDisposable}inherits(AutoDetachObserver,__super__);var AutoDetachObserverPrototype=AutoDetachObserver.prototype;return AutoDetachObserverPrototype.next=function(value){var result=tryCatch(this.observer.onNext).call(this.observer,value);result===errorObj&&(this.dispose(),thrower(result.e))},AutoDetachObserverPrototype.error=function(err){var result=tryCatch(this.observer.onError).call(this.observer,err);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.completed=function(){var result=tryCatch(this.observer.onCompleted).call(this.observer);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.setDisposable=function(value){this.m.setDisposable(value)},AutoDetachObserverPrototype.getDisposable=function(){return this.m.getDisposable()},AutoDetachObserverPrototype.dispose=function(){__super__.prototype.dispose.call(this),this.m.dispose()},AutoDetachObserver}(AbstractObserver),UnderlyingObservable=function(__super__){function UnderlyingObservable(m,u){this._m=m,this._u=u,__super__.call(this)}return inherits(UnderlyingObservable,__super__),UnderlyingObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._m.getDisposable(),this._u.subscribe(o))},UnderlyingObservable}(ObservableBase),GroupedObservable=function(__super__){function GroupedObservable(key,underlyingObservable,mergedDisposable){__super__.call(this),this.key=key,this.underlyingObservable=mergedDisposable?new UnderlyingObservable(mergedDisposable,underlyingObservable):underlyingObservable}return inherits(GroupedObservable,__super__),GroupedObservable.prototype._subscribe=function(o){return this.underlyingObservable.subscribe(o)},GroupedObservable}(Observable),Subject=Rx.Subject=function(__super__){function Subject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return inherits(Subject,__super__),addProperties(Subject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?this.hasError?(o.onError(this.error),disposableEmpty):(o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped)for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onNext(value)},dispose:function(){this.isDisposed=!0,this.observers=null}}),Subject.create=function(observer,observable){return new AnonymousSubject(observer,observable)},Subject}(Observable),AsyncSubject=Rx.AsyncSubject=function(__super__){function AsyncSubject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return inherits(AsyncSubject,__super__),addProperties(AsyncSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):this.hasValue?(o.onNext(this.value),o.onCompleted()):o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){var i,len;if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var os=cloneArray(this.observers),len=os.length;if(this.hasValue)for(i=0;i<len;i++){var o=os[i];o.onNext(this.value),o.onCompleted()}else for(i=0;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){checkDisposed(this),this.isStopped||(this.value=value,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),AsyncSubject}(Observable),BehaviorSubject=Rx.BehaviorSubject=function(__super__){function BehaviorSubject(value){__super__.call(this),this.value=value,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return inherits(BehaviorSubject,__super__),addProperties(BehaviorSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):o.onCompleted(),disposableEmpty):(this.observers.push(o),o.onNext(this.value),new InnerSubscription(this,o))},getValue:function(){return checkDisposed(this),this.hasError&&thrower(this.error),this.value},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped){this.value=value;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onNext(value)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),BehaviorSubject}(Observable),ReplaySubject=Rx.ReplaySubject=function(__super__){function createRemovableDisposable(subject,observer){return disposableCreate(function(){observer.dispose(),!subject.isDisposed&&subject.observers.splice(subject.observers.indexOf(observer),1)})}function ReplaySubject(bufferSize,windowSize,scheduler){this.bufferSize=null==bufferSize?maxSafeInteger:bufferSize,this.windowSize=null==windowSize?maxSafeInteger:windowSize,this.scheduler=scheduler||currentThreadScheduler,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,__super__.call(this)}var maxSafeInteger=Math.pow(2,53)-1;return inherits(ReplaySubject,__super__),addProperties(ReplaySubject.prototype,Observer.prototype,{_subscribe:function(o){checkDisposed(this);var so=new ScheduledObserver(this.scheduler,o),subscription=createRemovableDisposable(this,so);this._trim(this.scheduler.now()),this.observers.push(so);for(var i=0,len=this.q.length;i<len;i++)so.onNext(this.q[i].value);return this.hasError?so.onError(this.error):this.isStopped&&so.onCompleted(),so.ensureActive(),subscription},hasObservers:function(){return checkDisposed(this),this.observers.length>0},_trim:function(now){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&now-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(value){if(checkDisposed(this),!this.isStopped){var now=this.scheduler.now();this.q.push({interval:now,value:value}),this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onNext(value),observer.ensureActive()}}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onError(error),observer.ensureActive()}this.observers.length=0}},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onCompleted(),observer.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),ReplaySubject}(Observable),AnonymousSubject=Rx.AnonymousSubject=function(__super__){function AnonymousSubject(observer,observable){this.observer=observer,this.observable=observable,__super__.call(this)}return inherits(AnonymousSubject,__super__),addProperties(AnonymousSubject.prototype,Observer.prototype,{_subscribe:function(o){return this.observable.subscribe(o)},onCompleted:function(){this.observer.onCompleted()},onError:function(error){this.observer.onError(error)},onNext:function(value){this.observer.onNext(value)}}),AnonymousSubject}(Observable);Rx.Pauser=function(__super__){function Pauser(){__super__.call(this)}return inherits(Pauser,__super__),Pauser.prototype.pause=function(){this.onNext(!1)},Pauser.prototype.resume=function(){this.onNext(!0)},Pauser}(Subject),root.Rx=Rx,__WEBPACK_AMD_DEFINE_RESULT__=function(){return Rx}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));var rEndingLine=captureLine()}).call(this)}).call(exports,__webpack_require__(3)(module),function(){return this}(),__webpack_require__(4))},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children=[],module.webpackPolyfill=1),module}},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _client=__webpack_require__(6),_client2=_interopRequireDefault(_client),_client3=__webpack_require__(26),_client4=_interopRequireDefault(_client3),_client5=__webpack_require__(43),_client6=_interopRequireDefault(_client5),_client7=__webpack_require__(51),_client8=_interopRequireDefault(_client7),_feathersHooks=__webpack_require__(53),_feathersHooks2=_interopRequireDefault(_feathersHooks),_client9=__webpack_require__(58),_client10=_interopRequireDefault(_client9);Object.assign(_client2.default,{socketio:_client6.default,primus:_client8.default,rest:_client4.default,hooks:_feathersHooks2.default,authentication:_client10.default}),exports.default=_client2.default,module.exports=exports.default},function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createApplication(){return(0,_feathers2.default)(_express2.default.apply(void 0,arguments))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createApplication;var _feathers=__webpack_require__(8),_feathers2=_interopRequireDefault(_feathers),_express=__webpack_require__(25),_express2=_interopRequireDefault(_express);createApplication.version="2.0.1",module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createApplication(app){return _uberproto2.default.mixin(_application2.default,app),app.init(),app}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createApplication;var _uberproto=__webpack_require__(9),_uberproto2=_interopRequireDefault(_uberproto),_application=__webpack_require__(10),_application2=_interopRequireDefault(_application);module.exports=exports.default},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(){function makeSuper(_super,old,name,fn){return function(){var tmp=this._super;this._super="function"==typeof old?old:_super[name];var ret=fn.apply(this,arguments);return this._super=tmp,ret}}function legacyMixin(prop,obj){var _old,self=obj||this,fnTest=/\b_super\b/,_super=Object.getPrototypeOf(self)||self.prototype;for(var name in prop)_old=self[name],("function"==typeof prop[name]&&"function"==typeof _super[name]||"function"==typeof _old&&"function"==typeof prop[name])&&fnTest.test(prop[name])?self[name]=makeSuper(_super,_old,name,prop[name]):self[name]=prop[name];return self}function es5Mixin(prop,obj){var self=obj||this,fnTest=/\b_super\b/,_super=Object.getPrototypeOf(self)||self.prototype,descriptors={},proto=prop,processProperty=function(name){descriptors[name]||(descriptors[name]=Object.getOwnPropertyDescriptor(proto,name))};do Object.getOwnPropertyNames(proto).forEach(processProperty);while((proto=Object.getPrototypeOf(proto))&&Object.getPrototypeOf(proto));return Object.keys(descriptors).forEach(function(name){var descriptor=descriptors[name];"function"==typeof descriptor.value&&fnTest.test(descriptor.value)&&(descriptor.value=makeSuper(_super,self[name],name,descriptor.value)),Object.defineProperty(self,name,descriptor)}),self}return{create:function(){var instance=Object.create(this),init="string"==typeof instance.__init?instance.__init:"init";return"function"==typeof instance[init]&&instance[init].apply(instance,arguments),instance},mixin:"function"==typeof Object.defineProperty?es5Mixin:legacyMixin,extend:function(prop,obj){return this.mixin(prop,Object.create(obj||this))},proxy:function(name){var fn=this[name],args=Array.prototype.slice.call(arguments,1);return args.unshift(this),fn.bind.apply(fn,args)}}})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _debug=__webpack_require__(11),_debug2=_interopRequireDefault(_debug),_feathersCommons=__webpack_require__(14),_uberproto=__webpack_require__(9),_uberproto2=_interopRequireDefault(_uberproto),_index=__webpack_require__(18),_index2=_interopRequireDefault(_index),debug=(0,_debug2.default)("feathers:application"),methods=["find","get","create","update","patch","remove"],Proto=_uberproto2.default.extend({create:null});exports.default={init:function(){Object.assign(this,{methods:methods,mixins:(0,_index2.default)(),services:{},providers:[],_setup:!1})},service:function(location,_service){var _this=this,options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(location=(0,_feathersCommons.stripSlashes)(location),!_service){var current=this.services[location];return"undefined"==typeof current&&"function"==typeof this.defaultService?this.service(location,this.defaultService(location),options):current}var protoService=Proto.extend(_service);return debug("Registering new service at `"+location+"`"),this.mixins.forEach(function(fn){return fn.call(_this,protoService)}),"function"==typeof protoService._setup&&protoService._setup(this,location),this.providers.forEach(function(provider){return provider.call(_this,location,protoService,options)}),this._isSetup&&"function"==typeof protoService.setup&&(debug("Setting up service for `"+location+"`"),protoService.setup(this,location)),this.services[location]=protoService},use:function(location){var service=void 0,middleware=Array.from(arguments).slice(1).reduce(function(middleware,arg){if("function"==typeof arg)middleware[service?"after":"before"].push(arg);else{if(service)throw new Error("invalid arg passed to app.use");service=arg}return middleware},{before:[],after:[]}),hasMethod=function(methods){return methods.some(function(name){return service&&"function"==typeof service[name]})};return hasMethod(["handle","set"])||!hasMethod(this.methods.concat("setup"))?this._super.apply(this,arguments):(this.service(location,service,{middleware:middleware}),this)},setup:function(){var _this2=this;return Object.keys(this.services).forEach(function(path){var service=_this2.services[path];debug("Setting up service for `"+path+"`"),"function"==typeof service.setup&&service.setup(_this2,path)}),this._isSetup=!0,this},configure:function(fn){return fn.call(this),this},listen:function(){var server=this._super.apply(this,arguments);return this.setup(server),debug("Feathers application listening"),server}},module.exports=exports.default},function(module,exports,__webpack_require__){(function(process){function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(args){var useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),useColors){var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG),r}function localstorage(){try{return window.localStorage}catch(e){}}exports=module.exports=__webpack_require__(12),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},exports.enable(load())}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){function selectColor(namespace){var i,hash=0;for(i in namespace)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(debug.enabled){var self=debug,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr;for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||void 0;logFn.apply(self,args)}}return debug.namespace=namespace,debug.enabled=exports.enabled(namespace),debug.useColors=exports.useColors(),debug.color=selectColor(namespace),"function"==typeof exports.init&&exports.init(debug),debug}function enable(namespaces){exports.save(namespaces),exports.names=[],exports.skips=[];for(var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=__webpack_require__(13),exports.names=[],exports.skips=[],exports.formatters={};var prevTime},function(module,exports){function parse(str){if(str=String(str),!(str.length>100)){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]),type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return parse(val);if("number"===type&&isNaN(val)===!1)return options.long?fmtLong(val):fmtShort(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _arguments=__webpack_require__(15),_arguments2=_interopRequireDefault(_arguments),_utils=__webpack_require__(16),_hooks=__webpack_require__(17),_hooks2=_interopRequireDefault(_hooks);exports.default={_:_utils._,getArguments:_arguments2.default,stripSlashes:_utils.stripSlashes,hooks:_hooks2.default,matcher:_utils.matcher,sorter:_utils.sorter,select:_utils.select,makeUrl:_utils.makeUrl,each:_utils.each,some:_utils.some,every:_utils.every,keys:_utils.keys,values:_utils.values,isMatch:_utils.isMatch,isEmpty:_utils.isEmpty,isObject:_utils.isObject,extend:_utils.extend,omit:_utils.omit,pick:_utils.pick,merge:_utils.merge},module.exports=exports.default},function(module,exports){"use strict";function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function getArguments(method,args){return converters[method](args)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=getArguments;var noop=exports.noop=function(){},getCallback=function(args){var last=args[args.length-1];return"function"==typeof last?last:noop},getParams=function(args,position){return"object"===_typeof(args[position])?args[position]:{}},updateOrPatch=function(name){return function(args){var id=args[0],data=args[1],callback=getCallback(args),params=getParams(args,2);if("function"==typeof id)throw new Error("First parameter for '"+name+"' can not be a function");if("object"!==("undefined"==typeof data?"undefined":_typeof(data)))throw new Error("No data provided for '"+name+"'");if(args.length>4)throw new Error("Too many arguments for '"+name+"' service method");return[id,data,params,callback]}},getOrRemove=function(name){return function(args){var id=args[0],params=getParams(args,1),callback=getCallback(args);if(args.length>3)throw new Error("Too many arguments for '"+name+"' service method");if("function"==typeof id)throw new Error("First parameter for '"+name+"' can not be a function");return[id,params,callback]}},converters=exports.converters={find:function(args){var callback=getCallback(args),params=getParams(args,0);if(args.length>2)throw new Error("Too many arguments for 'find' service method");return[params,callback]},create:function(args){var data=args[0],params=getParams(args,1),callback=getCallback(args);if("object"!==("undefined"==typeof data?"undefined":_typeof(data)))throw new Error("First parameter for 'create' must be an object");if(args.length>3)throw new Error("Too many arguments for 'create' service method");return[data,params,callback]},update:updateOrPatch("update"),patch:updateOrPatch("patch"),get:getOrRemove("get"),remove:getOrRemove("remove")}},function(module,exports,__webpack_require__){(function(process){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function stripSlashes(name){return name.replace(/^(\/*)|(\/*)$/g,"")}function each(obj,callback){obj&&"function"==typeof obj.forEach?obj.forEach(callback):isObject(obj)&&Object.keys(obj).forEach(function(key){return callback(obj[key],key)})}function some(value,callback){return Object.keys(value).map(function(key){return[value[key],key]}).some(function(current){return callback.apply(void 0,_toConsumableArray(current))})}function every(value,callback){return Object.keys(value).map(function(key){return[value[key],key]}).every(function(current){return callback.apply(void 0,_toConsumableArray(current))})}function keys(obj){return Object.keys(obj)}function values(obj){return _.keys(obj).map(function(key){return obj[key]})}function isMatch(obj,item){return _.keys(item).every(function(key){return obj[key]===item[key]})}function isEmpty(obj){return 0===_.keys(obj).length}function isObject(item){return"object"===("undefined"==typeof item?"undefined":_typeof(item))&&!Array.isArray(item)&&null!==item}function extend(){return _extends.apply(void 0,arguments)}function omit(obj){for(var result=_.extend({},obj),_len=arguments.length,keys=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)keys[_key-1]=arguments[_key];return keys.forEach(function(key){return delete result[key]}),result}function pick(source){for(var result={},_len2=arguments.length,keys=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)keys[_key2-1]=arguments[_key2];return keys.forEach(function(key){result[key]=source[key]}),result}function merge(target,source){return isObject(target)&&isObject(source)&&Object.keys(source).forEach(function(key){isObject(source[key])?(target[key]||_extends(target,_defineProperty({},key,{})),
merge(target[key],source[key])):_extends(target,_defineProperty({},key,source[key]))}),target}function select(params){for(var fields=params&&params.query&&params.query.$select,_len3=arguments.length,otherFields=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)otherFields[_key3-1]=arguments[_key3];Array.isArray(fields)&&otherFields.length&&fields.push.apply(fields,otherFields);var convert=function(result){return Array.isArray(fields)?_.pick.apply(_,[result].concat(_toConsumableArray(fields))):result};return function(result){return Array.isArray(result)?result.map(convert):convert(result)}}function matcher(originalQuery){var query=_.omit(originalQuery,"$limit","$skip","$sort","$select");return function(item){return!(!query.$or||!_.some(query.$or,function(or){return matcher(or)(item)}))||_.every(query,function(value,key){return null!==value&&"object"===("undefined"==typeof value?"undefined":_typeof(value))?_.every(value,function(target,filterType){if(specialFilters[filterType]){var filter=specialFilters[filterType](key,target);return filter(item)}return!1}):"undefined"!=typeof item[key]&&item[key]===query[key]})}}function sorter($sort){return function(first,second){var comparator=0;return each($sort,function(modifier,key){modifier=parseInt(modifier,10),first[key]<second[key]&&(comparator-=1*modifier),first[key]>second[key]&&(comparator+=1*modifier)}),comparator}}function makeUrl(path){var app=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],get="function"==typeof app.get?app.get.bind(app):function(){},env=get("env")||process.env.NODE_ENV,host=get("host")||process.env.HOST_NAME||"localhost",protocol="development"===env||"test"===env||void 0===env?"http":"https",PORT=get("port")||process.env.PORT||3030,port="development"===env||"test"===env||void 0===env?":"+PORT:"";return path=path||"",protocol+"://"+host+port+"/"+stripSlashes(path)}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};Object.defineProperty(exports,"__esModule",{value:!0}),exports.stripSlashes=stripSlashes,exports.each=each,exports.some=some,exports.every=every,exports.keys=keys,exports.values=values,exports.isMatch=isMatch,exports.isEmpty=isEmpty,exports.isObject=isObject,exports.extend=extend,exports.omit=omit,exports.pick=pick,exports.merge=merge,exports.select=select,exports.matcher=matcher,exports.sorter=sorter,exports.makeUrl=makeUrl;var _=exports._={each:each,some:some,every:every,keys:keys,values:values,isMatch:isMatch,isEmpty:isEmpty,isObject:isObject,extend:extend,omit:omit,pick:pick,merge:merge},specialFilters=exports.specialFilters={$in:function(key,ins){return function(current){return ins.indexOf(current[key])!==-1}},$nin:function(key,nins){return function(current){return nins.indexOf(current[key])===-1}},$lt:function(key,value){return function(current){return current[key]<value}},$lte:function(key,value){return function(current){return current[key]<=value}},$gt:function(key,value){return function(current){return current[key]>value}},$gte:function(key,value){return function(current){return current[key]>=value}},$ne:function(key,value){return function(current){return current[key]!==value}}}}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function getOrRemove(args){return{id:args[0],params:args[1],callback:args[2]}}function updateOrPatch(args){return{id:args[0],data:args[1],params:args[2],callback:args[3]}}function hookObject(method,type,args){var app=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],hook=converters[method](args);return hook.method=method,hook.type=type,"function"==typeof app?hook.app=app:_extends(hook,app),hook}function defaultMakeArguments(hook){var result=[];return"undefined"!=typeof hook.id&&result.push(hook.id),hook.data&&result.push(hook.data),result.push(hook.params||{}),result.push(hook.callback),result}function makeArguments(hook){return"find"===hook.method?[hook.params,hook.callback]:"get"===hook.method||"remove"===hook.method?[hook.id,hook.params,hook.callback]:"update"===hook.method||"patch"===hook.method?[hook.id,hook.data,hook.params,hook.callback]:"create"===hook.method?[hook.data,hook.params,hook.callback]:defaultMakeArguments(hook)}function convertHookData(obj){var hook={};return Array.isArray(obj)?hook={all:obj}:"object"!==("undefined"==typeof obj?"undefined":_typeof(obj))?hook={all:[obj]}:(0,_utils.each)(obj,function(value,key){hook[key]=Array.isArray(value)?value:[value]}),hook}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};Object.defineProperty(exports,"__esModule",{value:!0});var _utils=__webpack_require__(16),converters={find:function(args){return{params:args[0],callback:args[1]}},create:function(args){return{data:args[0],params:args[1],callback:args[2]}},get:getOrRemove,remove:getOrRemove,update:updateOrPatch,patch:updateOrPatch};exports.default={hookObject:hookObject,hook:hookObject,converters:converters,defaultMakeArguments:defaultMakeArguments,makeArguments:makeArguments,convertHookData:convertHookData},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var mixins=[__webpack_require__(19),__webpack_require__(20),__webpack_require__(24)];return mixins.push=function(){var args=[this.length-1,0].concat(Array.from(arguments));return this.splice.apply(this,args),this.length},mixins},module.exports=exports.default},function(module,exports){"use strict";function isPromise(result){return"undefined"!=typeof result&&"function"==typeof result.then}function wrapper(){var result=this._super.apply(this,arguments),callback=arguments[arguments.length-1];return"function"==typeof callback&&isPromise(result)&&result.then(function(data){return callback(null,data)},function(error){return callback(error)}),result}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(service){var _this=this;"function"==typeof service.mixin&&!function(){var mixin={};_this.methods.forEach(function(method){"function"==typeof service[method]&&(mixin[method]=wrapper)}),service.mixin(mixin)}()},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function upperCase(name){return name.charAt(0).toUpperCase()+name.substring(1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(service){var app=this,isEmitter="function"==typeof service.on&&"function"==typeof service.emit,emitter=service._rubberDuck=_rubberduck2.default.emitter(service);"function"!=typeof service.mixin||isEmitter||service.mixin(_events.EventEmitter.prototype),service._serviceEvents=Array.isArray(service.events)?service.events.slice():[],emitter.on("error",function(errors){service.emit("serviceError",errors[0])}),Object.keys(eventMappings).forEach(function(method){var event=eventMappings[method],alreadyEmits=service._serviceEvents.indexOf(event)!==-1;if("function"==typeof service[method]&&!alreadyEmits){var eventName="after"+upperCase(method);service._serviceEvents.push(event),emitter.punch(method,-1),emitter.on(eventName,function(results,args){results[0]?service.emit("serviceError",results[0]):!function(){var hook=hookObject(method,"after",args),data=Array.isArray(results[1])?results[1]:[results[1]];hook.app=app,data.forEach(function(current){return service.emit(event,current,hook)})}()})}})};var _rubberduck=__webpack_require__(21),_rubberduck2=_interopRequireDefault(_rubberduck),_events=__webpack_require__(22),_feathersCommons=__webpack_require__(14),hookObject=_feathersCommons.hooks.hookObject,eventMappings={create:"created",update:"updated",remove:"removed",patch:"patched"};module.exports=exports.default},function(module,exports,__webpack_require__){var events=__webpack_require__(22),utils=__webpack_require__(23),wrap=exports.wrap={fn:function(emitter,fn,strict,name,scope){var wrapped=function(){var result;utils.emitEvents(emitter,"before",name,[arguments,this,name]);try{result=fn.apply(scope||this,arguments)}catch(e){throw utils.emitEvents(emitter,"error",name,[e,arguments,this,name]),e}return utils.emitEvents(emitter,"after",name,[result,arguments,this,name]),result};return strict&&eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length)),wrapped},async:function(emitter,fn,position,strict,name,scope){var wrapped=function(){var pos=position==-1?arguments.length-1:position||0,callback=arguments[pos],context=this,methodArgs=arguments,callbackWrapper=function(){try{callback.apply(context,arguments)}catch(e){throw utils.emitEvents(emitter,"error",name,[e,methodArgs,context,name]),e}var eventType=arguments[0]instanceof Error?"error":"after";utils.emitEvents(emitter,eventType,name,[arguments,methodArgs,context,name])};utils.emitEvents(emitter,"before",name,[methodArgs,this,name]),methodArgs[pos]=callbackWrapper;try{return fn.apply(scope||this,methodArgs)}catch(e){throw utils.emitEvents(emitter,"error",name,[e,methodArgs,context,name]),e}};return strict&&eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length)),wrapped}},Emitter=exports.Emitter=function(obj){this.obj=obj};Emitter.prototype=Object.create(events.EventEmitter.prototype),Emitter.prototype.punch=function(method,position,strict){if(Array.isArray(method)){var self=this;method.forEach(function(method){self.punch(method,position,strict)})}else{var old=this.obj[method];"function"==typeof old&&(this.obj[method]=position||0===position?wrap.async(this,old,position,strict,method):wrap.fn(this,old,strict,method))}return this},exports.emitter=function(obj){return new Emitter(obj)}},function(module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,"function"==typeof console.trace)),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},function(module,exports){exports.toBase26=function(num){for(var outString="",letters="abcdefghijklmnopqrstuvwxyz";num>25;){var remainder=num%26;outString=letters.charAt(remainder)+outString,num=Math.floor(num/26)-1}return outString=letters.charAt(num)+outString},exports.makeFakeArgs=function(len){for(var argArr=[],i=0;i<len;i++)argArr.push(exports.toBase26(i));return argArr.join(",")},exports.addArgs=function(fnString,argLen){return fnString.replace(/function\s*\(\)/,"function("+exports.makeFakeArgs(argLen)+")")},exports.emitEvents=function(emitter,type,name,args){var ucName=name?name.replace(/^\w/,function(first){return first.toUpperCase()}):null;emitter.emit.apply(emitter,[type].concat(args)),ucName&&emitter.emit.apply(emitter,[type+ucName].concat(args))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(service){var _this=this;"function"==typeof service.mixin&&!function(){var mixin={};_this.methods.forEach(function(method){"function"==typeof service[method]&&(mixin[method]=function(){return this._super.apply(this,(0,_feathersCommons.getArguments)(method,arguments))})}),service.mixin(mixin)}()};var _feathersCommons=__webpack_require__(14);module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var app={settings:{},get:function(name){return this.settings[name]},set:function(name,value){return this.settings[name]=value,this},disable:function(name){return this.settings[name]=!1,this},disabled:function(name){return!this.settings[name]},enable:function(name){return this.settings[name]=!0,this},enabled:function(name){return!!this.settings[name]},use:function(){throw new Error("Middleware functions can not be used in the Feathers client")},listen:function(){return{}}};return _uberproto2.default.mixin(_events.EventEmitter.prototype,app),app};var _events=__webpack_require__(22),_uberproto=__webpack_require__(9),_uberproto2=_interopRequireDefault(_uberproto);module.exports=exports.default},function(module,exports,__webpack_require__){module.exports=__webpack_require__(27)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var base=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",result={};return Object.keys(transports).forEach(function(key){var Service=transports[key];result[key]=function(connection){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!connection)throw new Error(key+" has to be provided to feathers-rest");var defaultService=function(name){return new Service({base:base,name:name,connection:connection,options:options})},initialize=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.rest=connection,this.defaultService=defaultService};return initialize.Service=Service,initialize.service=defaultService,initialize}}),result};var _jquery=__webpack_require__(28),_jquery2=_interopRequireDefault(_jquery),_superagent=__webpack_require__(39),_superagent2=_interopRequireDefault(_superagent),_request=__webpack_require__(40),_request2=_interopRequireDefault(_request),_fetch=__webpack_require__(41),_fetch2=_interopRequireDefault(_fetch),_axios=__webpack_require__(42),_axios2=_interopRequireDefault(_axios),transports={jquery:_jquery2.default,superagent:_superagent2.default,request:_request2.default,fetch:_fetch2.default,axios:_axios2.default};module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_base=__webpack_require__(29),_base2=_interopRequireDefault(_base),Service=function(_Base){function Service(){return _classCallCheck(this,Service),_possibleConstructorReturn(this,(Service.__proto__||Object.getPrototypeOf(Service)).apply(this,arguments))}return _inherits(Service,_Base),_createClass(Service,[{key:"request",value:function(options){var _this2=this,opts=_extends({dataType:options.type||"json"},{headers:this.options.headers||{}},options);return options.body&&(opts.data=JSON.stringify(options.body),opts.contentType="application/json"),delete opts.type,delete opts.body,new Promise(function(resolve,reject){_this2.connection.ajax(opts).then(resolve,function(xhr){var error=xhr.responseText;try{error=JSON.parse(error)}catch(e){error=new Error(xhr.responseText)}error.xhr=error.response=xhr,reject(error)})})}}]),Service}(_base2.default);exports.default=Service,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function toError(error){throw(0,_feathersErrors.convert)(error)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_qs=__webpack_require__(30),_qs2=_interopRequireDefault(_qs),_feathersCommons=__webpack_require__(14),_feathersErrors=__webpack_require__(35),Base=function(){function Base(settings){_classCallCheck(this,Base),this.name=(0,_feathersCommons.stripSlashes)(settings.name),this.options=settings.options,this.connection=settings.connection,this.base=settings.base+"/"+this.name}return _createClass(Base,[{key:"makeUrl",value:function(params,id){params=params||{};var url=this.base;if("undefined"!=typeof id&&null!==id&&(url+="/"+id),0!==Object.keys(params).length){var queryString=_qs2.default.stringify(params);url+="?"+queryString}return url}},{key:"find",value:function(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request({url:this.makeUrl(params.query),method:"GET",headers:_extends({},params.headers)}).catch(toError)}},{key:"get",value:function(id){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"undefined"==typeof id?Promise.reject(new Error("id for 'get' can not be undefined")):this.request({url:this.makeUrl(params.query,id),method:"GET",headers:_extends({},params.headers)}).catch(toError)}},{key:"create",value:function(body){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request({url:this.makeUrl(params.query),body:body,method:"POST",headers:_extends({"Content-Type":"application/json"},params.headers)}).catch(toError)}},{key:"update",value:function(id,body){var params=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"undefined"==typeof id?Promise.reject(new Error("id for 'update' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(params.query,id),body:body,method:"PUT",headers:_extends({"Content-Type":"application/json"},params.headers)}).catch(toError)}},{key:"patch",value:function(id,body){var params=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"undefined"==typeof id?Promise.reject(new Error("id for 'patch' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(params.query,id),body:body,method:"PATCH",headers:_extends({"Content-Type":"application/json"},params.headers)}).catch(toError)}},{key:"remove",value:function(id){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"undefined"==typeof id?Promise.reject(new Error("id for 'remove' can not be undefined, only 'null' when removing multiple entries")):this.request({url:this.makeUrl(params.query,id),method:"DELETE",headers:_extends({},params.headers)}).catch(toError)}}]),Base}();exports.default=Base,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(31),parse=__webpack_require__(34),formats=__webpack_require__(33);module.exports={formats:formats,parse:parse,stringify:stringify}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(32),formats=__webpack_require__(33),has=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(prefix){return prefix+"[]"},comma:"comma",indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix){return prefix}},isArray=Array.isArray,push=Array.prototype.push,pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])},toISO=Date.prototype.toISOString,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,formatter:formats.formatters[formats.default],indices:!1,serializeDate:function(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset){var obj=object;if("function"==typeof filter?obj=filter(prefix,obj):obj instanceof Date?obj=serializeDate(obj):"comma"===generateArrayPrefix&&isArray(obj)&&(obj=obj.join(",")),null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset):prefix;obj=""}if("string"==typeof obj||"number"==typeof obj||"boolean"==typeof obj||utils.isBuffer(obj)){if(encoder){var keyValue=encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset);return[formatter(keyValue)+"="+formatter(encoder(obj,defaults.encoder,charset))]}return[formatter(prefix)+"="+formatter(String(obj))]}var values=[];if("undefined"==typeof obj)return values;var objKeys;if(isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(isArray(obj)?pushToArray(values,stringify(obj[key],"function"==typeof generateArrayPrefix?generateArrayPrefix(prefix,key):prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)):pushToArray(values,stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly,charset)))}return values},normalizeStringifyOptions=function(opts){if(!opts)return defaults;if(null!==opts.encoder&&void 0!==opts.encoder&&"function"!=typeof opts.encoder)throw new TypeError("Encoder has to be a function.");var charset=opts.charset||defaults.charset;if("undefined"!=typeof opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var format=formats.default;if("undefined"!=typeof opts.format){if(!has.call(formats.formatters,opts.format))throw new TypeError("Unknown format option provided.");format=opts.format}var formatter=formats.formatters[format],filter=defaults.filter;return("function"==typeof opts.filter||isArray(opts.filter))&&(filter=opts.filter),{addQueryPrefix:"boolean"==typeof opts.addQueryPrefix?opts.addQueryPrefix:defaults.addQueryPrefix,allowDots:"undefined"==typeof opts.allowDots?defaults.allowDots:!!opts.allowDots,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,delimiter:"undefined"==typeof opts.delimiter?defaults.delimiter:opts.delimiter,encode:"boolean"==typeof opts.encode?opts.encode:defaults.encode,encoder:"function"==typeof opts.encoder?opts.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof opts.encodeValuesOnly?opts.encodeValuesOnly:defaults.encodeValuesOnly,filter:filter,formatter:formatter,serializeDate:"function"==typeof opts.serializeDate?opts.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof opts.skipNulls?opts.skipNulls:defaults.skipNulls,sort:"function"==typeof opts.sort?opts.sort:null,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}};module.exports=function(object,opts){var objKeys,filter,obj=object,options=normalizeStringifyOptions(opts);"function"==typeof options.filter?(filter=options.filter,obj=filter("",obj)):isArray(options.filter)&&(filter=options.filter,objKeys=filter);var keys=[];if("object"!=typeof obj||null===obj)return"";var arrayFormat;arrayFormat=opts&&opts.arrayFormat in arrayPrefixGenerators?opts.arrayFormat:opts&&"indices"in opts?opts.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),options.sort&&objKeys.sort(options.sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];options.skipNulls&&null===obj[key]||pushToArray(keys,stringify(obj[key],key,generateArrayPrefix,options.strictNullHandling,options.skipNulls,options.encode?options.encoder:null,options.filter,options.sort,options.allowDots,options.serializeDate,options.formatter,options.encodeValuesOnly,options.charset))}var joined=keys.join(options.delimiter),prefix=options.addQueryPrefix===!0?"?":"";return options.charsetSentinel&&(prefix+="iso-8859-1"===options.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),joined.length>0?prefix+joined:""}},function(module,exports){"use strict";var has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),compactQueue=function(queue){for(;queue.length>1;){var item=queue.pop(),obj=item.obj[item.prop];if(isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)"undefined"!=typeof obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}},arrayToObject=function(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)"undefined"!=typeof source[i]&&(obj[i]=source[i]);return obj},merge=function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(isArray(target))target.push(source);else{if(!target||"object"!=typeof target)return[target,source];(options&&(options.plainObjects||options.allowPrototypes)||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if(!target||"object"!=typeof target)return[target].concat(source);var mergeTarget=target;return isArray(target)&&!isArray(source)&&(mergeTarget=arrayToObject(target,options)),isArray(target)&&isArray(source)?(source.forEach(function(item,i){if(has.call(target,i)){var targetItem=target[i];targetItem&&"object"==typeof targetItem&&item&&"object"==typeof item?target[i]=merge(targetItem,item,options):target.push(item)}else target[i]=item}),target):Object.keys(source).reduce(function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc},mergeTarget)},assign=function(target,source){return Object.keys(source).reduce(function(acc,key){return acc[key]=source[key],acc},target)},decode=function(str,decoder,charset){var strWithoutPlus=str.replace(/\+/g," ");if("iso-8859-1"===charset)return strWithoutPlus.replace(/%[0-9a-f]{2}/gi,unescape);
try{return decodeURIComponent(strWithoutPlus)}catch(e){return strWithoutPlus}},encode=function(str,defaultEncoder,charset){if(0===str.length)return str;var string="string"==typeof str?str:String(str);if("iso-8859-1"===charset)return escape(string).replace(/%u[0-9a-f]{4}/gi,function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"});for(var out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},compact=function(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&refs.indexOf(val)===-1&&(queue.push({obj:obj,prop:key}),refs.push(val))}return compactQueue(queue),value},isRegExp=function(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},isBuffer=function(obj){return!(!obj||"object"!=typeof obj)&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},combine=function(a,b){return[].concat(a,b)};module.exports={arrayToObject:arrayToObject,assign:assign,combine:combine,compact:compact,decode:decode,encode:encode,isBuffer:isBuffer,isRegExp:isRegExp,merge:merge}},function(module,exports){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g;module.exports={default:"RFC3986",formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return value}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(32),has=Object.prototype.hasOwnProperty,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(str){return str.replace(/&#(\d+);/g,function($0,numberStr){return String.fromCharCode(parseInt(numberStr,10))})},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(str,options){var i,obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),skipIndex=-1,charset=options.charset;if(options.charsetSentinel)for(i=0;i<parts.length;++i)0===parts[i].indexOf("utf8=")&&(parts[i]===charsetSentinel?charset="utf-8":parts[i]===isoSentinel&&(charset="iso-8859-1"),skipIndex=i,i=parts.length);for(i=0;i<parts.length;++i)if(i!==skipIndex){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=bracketEqualsPos===-1?part.indexOf("="):bracketEqualsPos+1;pos===-1?(key=options.decoder(part,defaults.decoder,charset),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder,charset),val=options.decoder(part.slice(pos+1),defaults.decoder,charset)),val&&options.interpretNumericEntities&&"iso-8859-1"===charset&&(val=interpretNumericEntities(val)),val&&options.comma&&val.indexOf(",")>-1&&(val=val.split(",")),has.call(obj,key)?obj[key]=utils.combine(obj[key],val):obj[key]=val}return obj},parseObject=function(chain,val,options){for(var leaf=val,i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root&&options.parseArrays)obj=[].concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);options.parseArrays||""!==cleanRoot?!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[],obj[index]=leaf):obj[cleanRoot]=leaf:obj={0:leaf}}leaf=obj}return leaf},parseKeys=function(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,brackets=/(\[[^[\]]*])/,child=/(\[[^[\]]*])/g,segment=brackets.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),parseObject(keys,val,options)}},normalizeParseOptions=function(opts){if(!opts)return defaults;if(null!==opts.decoder&&void 0!==opts.decoder&&"function"!=typeof opts.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!=typeof opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var charset="undefined"==typeof opts.charset?defaults.charset:opts.charset;return{allowDots:"undefined"==typeof opts.allowDots?defaults.allowDots:!!opts.allowDots,allowPrototypes:"boolean"==typeof opts.allowPrototypes?opts.allowPrototypes:defaults.allowPrototypes,arrayLimit:"number"==typeof opts.arrayLimit?opts.arrayLimit:defaults.arrayLimit,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,comma:"boolean"==typeof opts.comma?opts.comma:defaults.comma,decoder:"function"==typeof opts.decoder?opts.decoder:defaults.decoder,delimiter:"string"==typeof opts.delimiter||utils.isRegExp(opts.delimiter)?opts.delimiter:defaults.delimiter,depth:"number"==typeof opts.depth?opts.depth:defaults.depth,ignoreQueryPrefix:opts.ignoreQueryPrefix===!0,interpretNumericEntities:"boolean"==typeof opts.interpretNumericEntities?opts.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:"number"==typeof opts.parameterLimit?opts.parameterLimit:defaults.parameterLimit,parseArrays:opts.parseArrays!==!1,plainObjects:"boolean"==typeof opts.plainObjects?opts.plainObjects:defaults.plainObjects,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}};module.exports=function(str,opts){var options=normalizeParseOptions(opts);if(""===str||null===str||"undefined"==typeof str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?parseValues(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},function(module,exports,__webpack_require__){"use strict";function FeathersError(msg,name,code,className,data){msg=msg||"Error";var errors=void 0,message=void 0,newData=void 0;msg instanceof Error?(message=msg.message||"Error",msg.errors&&(errors=msg.errors)):"object"===("undefined"==typeof msg?"undefined":_typeof(msg))?(message=msg.message||"Error",data=msg):message=msg,data&&(newData=JSON.parse(JSON.stringify(data)),newData.errors?(errors=newData.errors,delete newData.errors):data.errors&&(errors=JSON.parse(JSON.stringify(data.errors)))),this.type="FeathersError",this.name=name,this.message=message,this.code=code,this.className=className,this.data=newData,this.errors=errors||{},debug(this.name+"("+this.code+"): "+this.message),debug(this.errors),Error.captureStackTrace?Error.captureStackTrace(this,FeathersError):this.stack=(new Error).stack}function BadRequest(message,data){FeathersError.call(this,message,"BadRequest",400,"bad-request",data)}function NotAuthenticated(message,data){FeathersError.call(this,message,"NotAuthenticated",401,"not-authenticated",data)}function PaymentError(message,data){FeathersError.call(this,message,"PaymentError",402,"payment-error",data)}function Forbidden(message,data){FeathersError.call(this,message,"Forbidden",403,"forbidden",data)}function NotFound(message,data){FeathersError.call(this,message,"NotFound",404,"not-found",data)}function MethodNotAllowed(message,data){FeathersError.call(this,message,"MethodNotAllowed",405,"method-not-allowed",data)}function NotAcceptable(message,data){FeathersError.call(this,message,"NotAcceptable",406,"not-acceptable",data)}function Timeout(message,data){FeathersError.call(this,message,"Timeout",408,"timeout",data)}function Conflict(message,data){FeathersError.call(this,message,"Conflict",409,"conflict",data)}function LengthRequired(message,data){FeathersError.call(this,message,"LengthRequired",411,"length-required",data)}function Unprocessable(message,data){FeathersError.call(this,message,"Unprocessable",422,"unprocessable",data)}function TooManyRequests(message,data){FeathersError.call(this,message,"TooManyRequests",429,"too-many-requests",data)}function GeneralError(message,data){FeathersError.call(this,message,"GeneralError",500,"general-error",data)}function NotImplemented(message,data){FeathersError.call(this,message,"NotImplemented",501,"not-implemented",data)}function BadGateway(message,data){FeathersError.call(this,message,"BadGateway",502,"bad-gateway",data)}function Unavailable(message,data){FeathersError.call(this,message,"Unavailable",503,"unavailable",data)}function convert(error){if(!error)return error;var FeathersError=errors[error.name],result=FeathersError?new FeathersError(error.message,error.data):new Error(error.message||error);return"object"===("undefined"==typeof error?"undefined":_typeof(error))&&_extends(result,error),result}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},debug=__webpack_require__(36)("feathers-errors");FeathersError.prototype=Object.create(Error.prototype),Object.defineProperty(FeathersError.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),BadRequest.prototype=FeathersError.prototype,NotAuthenticated.prototype=FeathersError.prototype,PaymentError.prototype=FeathersError.prototype,Forbidden.prototype=FeathersError.prototype,NotFound.prototype=FeathersError.prototype,MethodNotAllowed.prototype=FeathersError.prototype,NotAcceptable.prototype=FeathersError.prototype,Timeout.prototype=FeathersError.prototype,Conflict.prototype=FeathersError.prototype,LengthRequired.prototype=FeathersError.prototype,Unprocessable.prototype=FeathersError.prototype,TooManyRequests.prototype=FeathersError.prototype,GeneralError.prototype=FeathersError.prototype,NotImplemented.prototype=FeathersError.prototype,BadGateway.prototype=FeathersError.prototype,Unavailable.prototype=FeathersError.prototype;var errors={FeathersError:FeathersError,BadRequest:BadRequest,NotAuthenticated:NotAuthenticated,PaymentError:PaymentError,Forbidden:Forbidden,NotFound:NotFound,MethodNotAllowed:MethodNotAllowed,NotAcceptable:NotAcceptable,Timeout:Timeout,Conflict:Conflict,LengthRequired:LengthRequired,Unprocessable:Unprocessable,TooManyRequests:TooManyRequests,GeneralError:GeneralError,NotImplemented:NotImplemented,BadGateway:BadGateway,Unavailable:Unavailable,400:BadRequest,401:NotAuthenticated,402:PaymentError,403:Forbidden,404:NotFound,405:MethodNotAllowed,406:NotAcceptable,408:Timeout,409:Conflict,411:LengthRequired,422:Unprocessable,429:TooManyRequests,500:GeneralError,501:NotImplemented,502:BadGateway,503:Unavailable};exports.default=_extends({convert:convert,types:errors,errors:errors},errors),module.exports=exports.default},function(module,exports,__webpack_require__){(function(process){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(args){if(args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),this.useColors){var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c)}}function log(){var _console;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(_console=console).log.apply(_console,arguments)}function save(namespaces){try{namespaces?exports.storage.setItem("debug",namespaces):exports.storage.removeItem("debug")}catch(error){}}function load(){var r;try{r=exports.storage.getItem("debug")}catch(error){}return!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG),r}function localstorage(){try{return localStorage}catch(error){}}exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage=localstorage(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=__webpack_require__(37)(exports);var formatters=module.exports.formatters;formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";function setup(env){function selectColor(namespace){for(var hash=0,i=0;i<namespace.length;i++)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return createDebug.colors[Math.abs(hash)%createDebug.colors.length]}function createDebug(namespace){function debug(){if(debug.enabled){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var self=debug,curr=Number(new Date),ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,args[0]=createDebug.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=createDebug.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),createDebug.formatArgs.call(self,args);var logFn=self.log||createDebug.log;logFn.apply(self,args)}}var prevTime;return debug.namespace=namespace,debug.enabled=createDebug.enabled(namespace),debug.useColors=createDebug.useColors(),debug.color=selectColor(namespace),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var index=createDebug.instances.indexOf(this);return index!==-1&&(createDebug.instances.splice(index,1),!0)}function extend(namespace,delimiter){return createDebug(this.namespace+("undefined"==typeof delimiter?":":delimiter)+namespace)}function enable(namespaces){createDebug.save(namespaces),createDebug.names=[],createDebug.skips=[];var i,split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length;for(i=0;i<len;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),"-"===namespaces[0]?createDebug.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):createDebug.names.push(new RegExp("^"+namespaces+"$")));for(i=0;i<createDebug.instances.length;i++){var instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace)}}function disable(){createDebug.enable("")}function enabled(name){if("*"===name[name.length-1])return!0;var i,len;for(i=0,len=createDebug.skips.length;i<len;i++)if(createDebug.skips[i].test(name))return!1;for(i=0,len=createDebug.names.length;i<len;i++)if(createDebug.names[i].test(name))return!0;return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=coerce,createDebug.disable=disable,createDebug.enable=enable,createDebug.enabled=enabled,createDebug.humanize=__webpack_require__(38),Object.keys(env).forEach(function(key){createDebug[key]=env[key]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}module.exports=setup},function(module,exports){function parse(str){if(str=String(str),!(str.length>100)){var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]),type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(ms){var msAbs=Math.abs(ms);return msAbs>=d?Math.round(ms/d)+"d":msAbs>=h?Math.round(ms/h)+"h":msAbs>=m?Math.round(ms/m)+"m":msAbs>=s?Math.round(ms/s)+"s":ms+"ms"}function fmtLong(ms){var msAbs=Math.abs(ms);return msAbs>=d?plural(ms,msAbs,d,"day"):msAbs>=h?plural(ms,msAbs,h,"hour"):msAbs>=m?plural(ms,msAbs,m,"minute"):msAbs>=s?plural(ms,msAbs,s,"second"):ms+" ms"}function plural(ms,msAbs,n,name){var isPlural=msAbs>=1.5*n;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d;module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return parse(val);if("number"===type&&isFinite(val))return options.long?fmtLong(val):fmtShort(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_base=__webpack_require__(29),_base2=_interopRequireDefault(_base),Service=function(_Base){function Service(){return _classCallCheck(this,Service),_possibleConstructorReturn(this,(Service.__proto__||Object.getPrototypeOf(Service)).apply(this,arguments))}return _inherits(Service,_Base),_createClass(Service,[{key:"request",value:function(options){var superagent=this.connection(options.method,options.url).set(this.options.headers||{}).set("Accept","application/json").set(options.headers||{}).type(options.type||"json");return new Promise(function(resolve,reject){superagent.set(options.headers),options.body&&superagent.send(options.body),superagent.end(function(error,res){if(error){try{var response=error.response;error=JSON.parse(error.response.text),error.response=response}catch(e){}return reject(error)}resolve(res&&res.body)})})}}]),Service}(_base2.default);exports.default=Service,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_base=__webpack_require__(29),_base2=_interopRequireDefault(_base),Service=function(_Base){function Service(){return _classCallCheck(this,Service),_possibleConstructorReturn(this,(Service.__proto__||Object.getPrototypeOf(Service)).apply(this,arguments))}return _inherits(Service,_Base),_createClass(Service,[{key:"request",value:function(options){var _this2=this;return new Promise(function(resolve,reject){_this2.connection(_extends({json:!0},options),function(error,res,data){return error?reject(error):!error&&res.statusCode>=400?"string"==typeof data?reject(new Error(data)):(data.response=res,reject(_extends(new Error(data.message),data))):void resolve(data)})})}}]),Service}(_base2.default);exports.default=Service,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_base=__webpack_require__(29),_base2=_interopRequireDefault(_base),Service=function(_Base){function Service(){return _classCallCheck(this,Service),_possibleConstructorReturn(this,(Service.__proto__||Object.getPrototypeOf(Service)).apply(this,arguments))}return _inherits(Service,_Base),_createClass(Service,[{key:"request",value:function(options){var fetchOptions=_extends({},options);fetchOptions.headers=_extends({Accept:"application/json"},this.options.headers,fetchOptions.headers),options.body&&(fetchOptions.body=JSON.stringify(options.body));var fetch=this.connection;return fetch(options.url,fetchOptions).then(this.checkStatus).then(function(response){return 204===response.status?null:response.json()})}},{key:"checkStatus",value:function(response){return response.ok?response:response.json().then(function(error){throw error.response=response,error})}}]),Service}(_base2.default);exports.default=Service,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_base=__webpack_require__(29),_base2=_interopRequireDefault(_base),Service=function(_Base){function Service(){return _classCallCheck(this,Service),_possibleConstructorReturn(this,(Service.__proto__||Object.getPrototypeOf(Service)).apply(this,arguments))}return _inherits(Service,_Base),_createClass(Service,[{key:"request",value:function(options){var config={url:options.url,method:options.method,data:options.body,headers:_extends({Accept:"application/json"},this.options.headers,options.headers)};return this.connection.request(config).then(function(res){return res.data}).catch(function(error){var response=error.response||error;throw response instanceof Error?response:response.data||response})}}]),Service}(_base2.default);exports.default=Service,module.exports=exports.default},function(module,exports,__webpack_require__){module.exports=__webpack_require__(44)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(connection,options){if(!connection)throw new Error("Socket.io connection needs to be provided");var defaultService=function(name){var settings=_extends({},options,{name:name,connection:connection,method:"emit"});return new _client2.default(settings)},initialize=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.io=connection,this.defaultService=defaultService};return initialize.Service=_client2.default,initialize.service=defaultService,initialize};var _client=__webpack_require__(45),_client2=_interopRequireDefault(_client);module.exports=exports.default},function(module,exports,__webpack_require__){module.exports=__webpack_require__(46)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(47),_feathersErrors=__webpack_require__(35),debug=__webpack_require__(48)("feathers-socket-commons:client"),namespacedEmitterMethods=["addListener","emit","listenerCount","listeners","on","once","prependListener","prependOnceListener","removeAllListeners","removeListener"],otherEmitterMethods=["eventNames","getMaxListeners","setMaxListeners"],addEmitterMethods=function(service){
otherEmitterMethods.forEach(function(method){service[method]=function(){var _connection;if("function"!=typeof this.connection[method])throw new Error("Can not call '"+method+"' on the client service connection.");return(_connection=this.connection)[method].apply(_connection,arguments)}}),namespacedEmitterMethods.forEach(function(method){service[method]=function(name){var _connection2;if("function"!=typeof this.connection[method])throw new Error("Can not call '"+method+"' on the client service connection.");var eventName=this.path+" "+name;debug("Calling emitter method "+method+" with "+("namespaced event '"+eventName+"'"));for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var result=(_connection2=this.connection)[method].apply(_connection2,[eventName].concat(args));return result===this.connection?this:result}})},Service=function(){function Service(options){_classCallCheck(this,Service),this.events=_utils.events,this.path=options.name,this.connection=options.connection,this.method=options.method,this.timeout=options.timeout||5e3,addEmitterMethods(this)}return _createClass(Service,[{key:"send",value:function(method){for(var _this=this,_len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];var callback=null;return"function"==typeof args[args.length-1]&&(callback=args.pop()),new Promise(function(resolve,reject){var _connection3,event=_this.path+"::"+method,timeoutId=setTimeout(function(){return reject(new Error("Timeout of "+_this.timeout+"ms exceeded calling "+event))},_this.timeout);args.unshift(event),args.push(function(error,data){return error=(0,_feathersErrors.convert)(error),clearTimeout(timeoutId),callback&&callback(error,data),error?reject(error):resolve(data)}),debug("Sending socket."+_this.method,args),(_connection3=_this.connection)[_this.method].apply(_connection3,args)})}},{key:"find",value:function(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.send("find",params.query||{})}},{key:"get",value:function(id){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("get",id,params.query||{})}},{key:"create",value:function(data){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("create",data,params.query||{})}},{key:"update",value:function(id,data){var params=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.send("update",id,data,params.query||{})}},{key:"patch",value:function(id,data){var params=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.send("patch",id,data,params.query||{})}},{key:"remove",value:function(id){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("remove",id,params.query||{})}},{key:"off",value:function(name){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];if("function"==typeof this.connection.off){var _connection4;return(_connection4=this.connection).off.apply(_connection4,[this.path+" "+name].concat(args))}return 0===args.length?this.removeAllListeners(name):this.removeListener.apply(this,[name].concat(args))}}]),Service}();exports.default=Service,module.exports=exports.default},function(module,exports,__webpack_require__){(function(process){"use strict";function convertFilterData(obj){return _feathersCommons.hooks.convertHookData(obj)}function promisify(method,context){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];return new Promise(function(resolve,reject){method.apply(context,args.concat(function(error,result){return error?reject(error):void resolve(result)}))})}function normalizeError(e){var result={};return Object.getOwnPropertyNames(e).forEach(function(key){return result[key]=e[key]}),"production"===process.env.NODE_ENV&&delete result.stack,delete result.hook,result}function normalizeArgs(args){var ret=[];return 2===args.length&&Array.isArray(args[0])?(ret=args[0],ret.push(args[1]),ret):args}Object.defineProperty(exports,"__esModule",{value:!0}),exports.events=exports.eventMappings=void 0,exports.convertFilterData=convertFilterData,exports.promisify=promisify,exports.normalizeError=normalizeError,exports.normalizeArgs=normalizeArgs;var _feathersCommons=__webpack_require__(14),eventMappings=exports.eventMappings={create:"created",update:"updated",patch:"patched",remove:"removed"};exports.events=Object.keys(eventMappings).map(function(method){return eventMappings[method]})}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){(function(process){function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(args){var useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),useColors){var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG),r}function localstorage(){try{return window.localStorage}catch(e){}}exports=module.exports=__webpack_require__(49),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},exports.enable(load())}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){function selectColor(namespace){var i,hash=0;for(i in namespace)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(debug.enabled){var self=debug,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr;for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||void 0;logFn.apply(self,args)}}return debug.namespace=namespace,debug.enabled=exports.enabled(namespace),debug.useColors=exports.useColors(),debug.color=selectColor(namespace),"function"==typeof exports.init&&exports.init(debug),debug}function enable(namespaces){exports.save(namespaces),exports.names=[],exports.skips=[];for(var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=__webpack_require__(50),exports.names=[],exports.skips=[],exports.formatters={};var prevTime},function(module,exports){function parse(str){if(str=String(str),!(str.length>100)){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]),type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return parse(val);if("number"===type&&isNaN(val)===!1)return options.long?fmtLong(val):fmtShort(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(52)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(connection,options){if(!connection)throw new Error("Primus connection needs to be provided");var defaultService=function(name){return new _client2.default(Object.assign({},options,{name:name,connection:connection,method:"send"}))},initialize=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.primus=connection,this.defaultService=defaultService};return initialize.Service=_client2.default,initialize.service=defaultService,initialize};var _client=__webpack_require__(45),_client2=_interopRequireDefault(_client);module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function isPromise(result){return"undefined"!=typeof result&&"function"==typeof result.then}function hookMixin(service){var app=this,methods=app.methods,old={before:service.before,after:service.after},mixin=(0,_commons.baseMixin)(methods,{before:function(_before){return this.hooks({before:_before})},after:function(_after){return this.hooks({after:_after})}});(0,_commons.addHookTypes)(service),methods.forEach(function(method){"function"==typeof service[method]&&(mixin[method]=function(){var _this=this,service=this,_super=this._super.bind(this),hookData={app:app,service:service,get path(){return Object.keys(app.services).find(function(path){return app.services[path]===service})}},hookObject=_feathersCommons.hooks.hookObject(method,"before",arguments,hookData),hooks={before:(0,_commons.getHooks)(app,this,"before",method),after:(0,_commons.getHooks)(app,this,"after",method,!0),error:(0,_commons.getHooks)(app,this,"error",method,!0)};return _commons.processHooks.call(this,hooks.before,hookObject).then(function(hookObject){return"undefined"!=typeof hookObject.result?Promise.resolve(hookObject):new Promise(function(resolve,reject){var args=_feathersCommons.hooks.makeArguments(hookObject),callback=function(error,result){error?reject(error):(hookObject.result=result,resolve(hookObject))};args.splice(args.length-1,1,callback);var result=_super.apply(void 0,_toConsumableArray(args));isPromise(result)&&result.then(function(data){return callback(null,data)},callback)})}).then(function(hookObject){return Object.assign({},hookObject,{type:"after"})}).then(_commons.processHooks.bind(this,hooks.after)).then(function(hookObject){return hookObject.result}).catch(function(error){var errorHook=Object.assign({},error.hook||hookObject,{type:"error",original:error.hook,error:error});return _commons.processHooks.call(_this,hooks.error,errorHook).then(function(hook){return Promise.reject(hook.error)})})})}),service.mixin(mixin),old.before&&service.before(old.before),old.after&&service.after(old.after)}function configure(){return function(){var app=this;(0,_commons.addHookTypes)(app),_uberproto2.default.mixin((0,_commons.baseMixin)(app.methods),app),this.mixins.unshift(hookMixin)}}Object.defineProperty(exports,"__esModule",{value:!0});var _uberproto=__webpack_require__(9),_uberproto2=_interopRequireDefault(_uberproto),_feathersCommons=__webpack_require__(14),_populate=__webpack_require__(54),_bundled=__webpack_require__(56),_commons=__webpack_require__(57);configure.removeQuery=_bundled.removeQuery,configure.pluckQuery=_bundled.pluckQuery,configure.lowerCase=_bundled.lowerCase,configure.remove=_bundled.remove,configure.pluck=_bundled.pluck,configure.disable=_bundled.disable,configure.populate=_populate.populate,configure.removeField=_bundled.removeField,exports.default=configure,module.exports=exports.default},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function populateItemArray(options,hook,items,includeSchema,depth){return Array.isArray(items)?Promise.all(items.map(function(item){return populateItem(options,hook,item,includeSchema,depth+1)})):populateItem(options,hook,items,includeSchema,depth+1)}function populateItem(options,hook,item,includeSchema,depth){var elapsed={},startAtAllIncludes=process.hrtime();return item._include=[],Promise.all(includeSchema.map(function(childSchema){var startAtThisInclude=process.hrtime();return populateAddChild(options,hook,item,childSchema,depth).then(function(result){var nameAs=childSchema.nameAs||childSchema.service;return elapsed[nameAs]=getElapsed(options,startAtThisInclude,depth),result})})).then(function(children){return options.profile!==!1&&(elapsed.total=getElapsed(options,startAtAllIncludes,depth),item._elapsed=elapsed),Object.assign.apply(Object,[item].concat(_toConsumableArray(children)))})}function populateAddChild(options,hook,parentItem,childSchema,depth){if(!childSchema.service||!childSchema.parentField||!childSchema.childField)throw new _feathersErrors2.default.BadRequest("Child schema is missing a required property. (populate)");if(childSchema.permissions&&!options.checkPermissions(hook,childSchema.service,childSchema.permissions,depth))throw new _feathersErrors2.default.BadRequest("Permissions for "+childSchema.service+" do not allow include. (populate)");var nameAs=childSchema.nameAs||childSchema.service;parentItem._include.push(nameAs);var promise=Promise.resolve().then(function(){return childSchema.select?childSchema.select(hook,parentItem,depth):{}}).then(function(selectQuery){var parentVal=(0,_utils.getByDot)(parentItem,childSchema.parentField);if(void 0===parentVal)throw new _feathersErrors2.default.BadRequest("ParentField "+childSchema.parentField+" for "+nameAs+" depth "+depth+" is undefined. (populate)");var query=Object.assign({},childSchema.query,_defineProperty({},childSchema.childField,Array.isArray(parentVal)?{$in:parentVal}:parentVal),selectQuery),serviceHandle=hook.app.service(childSchema.service);if(!serviceHandle)throw new _feathersErrors2.default.BadRequest("Service "+childSchema.service+" is not configured. (populate)");return serviceHandle.find({query:query,_populate:"skip"})}).then(function(result){return result=result.data||result,1!==result.length||childSchema.asArray||(result=result[0]),result});return childSchema.include&&(promise=promise.then(function(items){return populateItemArray(options,hook,items,childSchema.include,depth)})),promise.then(function(items){return _defineProperty({},nameAs,items)})}function getElapsed(options,startHrtime,depth){if(options.profile===!0){var elapsed=process.hrtime(startHrtime);return 1e9*elapsed[0]+elapsed[1]}if(options.profile!==!1)return depth}Object.defineProperty(exports,"__esModule",{value:!0}),exports.populate=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_feathersErrors=__webpack_require__(35),_feathersErrors2=_interopRequireDefault(_feathersErrors),_utils=__webpack_require__(55),_bundled=__webpack_require__(56);exports.populate=function(options){for(var _len=arguments.length,rest=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];return"string"==typeof options?_bundled.legacyPopulate.apply(void 0,[options].concat(rest)):function(hook){var optionsDefault={schema:{},checkPermissions:function(){return!0},profile:!1};return"skip"===hook.params._populate?hook:Promise.resolve().then(function(){var items=(0,_utils.getItems)(hook),options1=Object.assign({},optionsDefault,options),schema=options1.schema,checkPermissions=options1.checkPermissions,schema1="function"==typeof schema?schema(hook,options1):schema,permissions=schema1.permissions||null;if("function"!=typeof checkPermissions)throw new _feathersErrors2.default.BadRequest("Permissions param is not a function. (populate)");if(permissions&&!checkPermissions(hook,hook.path,permissions,0))throw new _feathersErrors2.default.BadRequest("Permissions do not allow this populate. (populate)");if("object"!==("undefined"==typeof schema1?"undefined":_typeof(schema1)))throw new _feathersErrors2.default.BadRequest("Schema does not resolve to an object. (populate)");return schema1.include&&Object.keys(schema1.include).length?populateItemArray(options1,hook,items,schema1.include,0):items}).then(function(items){return(0,_utils.replaceItems)(hook,items),hook})}}}).call(exports,__webpack_require__(4))},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.getByDot=function(obj,path){return path.indexOf(".")===-1?obj[path]:path.split(".").reduce(function(obj1,part){return"object"===("undefined"==typeof obj1?"undefined":_typeof(obj1))?obj1[part]:void 0},obj)},exports.setByDot=function(obj,path,value,ifDelete){if(path.indexOf(".")===-1)return obj[path]=value,void(void 0===value&&ifDelete&&delete obj[path]);var parts=path.split("."),lastIndex=parts.length-1;return parts.reduce(function(obj1,part,i){return i!==lastIndex?(obj1.hasOwnProperty(part)&&"object"===_typeof(obj1[part])||(obj1[part]={}),obj1[part]):(obj1[part]=value,void 0===value&&ifDelete&&delete obj1[part],obj1)},obj)},exports.checkContext=function(hook){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,methods=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],label=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous";if(type&&hook.type!==type)throw new Error("The '"+label+"' hook can only be used as a '"+type+"' hook.");if(methods){var myMethods=Array.isArray(methods)?methods:[methods];if(myMethods.length>0&&myMethods.indexOf(hook.method)===-1){var msg=JSON.stringify(myMethods);throw new Error("The '"+label+"' hook can only be used on the '"+msg+"' service method(s).")}}},exports.getItems=function(hook){var items="before"===hook.type?hook.data:hook.result;return items&&"find"===hook.method?items.data||items:items},exports.replaceItems=function(hook,items){"before"===hook.type?hook.data=items:"find"===hook.method&&hook.result&&hook.result.data?Array.isArray(items)?(hook.result.data=items,hook.result.total=items.length):(hook.result.data=[items],hook.result.total=1):hook.result=items}},function(module,exports,__webpack_require__){"use strict";function lowerCase(){for(var _len=arguments.length,fields=Array(_len),_key=0;_key<_len;_key++)fields[_key]=arguments[_key];var lowerCaseFields=function(data){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=fields[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var field=_step.value,value=(0,_utils.getByDot)(data,field);if(void 0!==value){if("string"!=typeof value&&null!==value)throw new errors.BadRequest("Expected string data. (lowercase "+field+")");(0,_utils.setByDot)(data,field,value?value.toLowerCase():value)}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}},callback=function(){return!0};return"function"==typeof fields[fields.length-1]&&(callback=fields.pop()),function(hook){var items="before"===hook.type?hook.data:hook.result,update=function(condition){return items&&condition&&("find"===hook.method||Array.isArray(items)?(items.data||items).forEach(lowerCaseFields):lowerCaseFields(items)),hook},check=callback(hook);return check&&"function"==typeof check.then?check.then(update):update(check)}}function removeQuery(){for(var _len2=arguments.length,fields=Array(_len2),_key2=0;_key2<_len2;_key2++)fields[_key2]=arguments[_key2];var removeQueries=function(data){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=fields[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var field=_step2.value,value=(0,_utils.getByDot)(data,field);void 0!==value&&(0,_utils.setByDot)(data,field,void 0,!0)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}},callback=function(){return!0};return"function"==typeof fields[fields.length-1]&&(callback=fields.pop()),function(hook){if("after"===hook.type){var provider=hook.params.provider||"server";throw new errors.GeneralError("Provider '"+provider+"' cannot remove query params on after hook. (removeQuery)")}var result=hook.params.query,update=function(condition){return result&&condition&&removeQueries(result),hook},check=callback(hook);return check&&"function"==typeof check.then?check.then(update):update(check)}}function pluckQuery(){for(var _len3=arguments.length,fields=Array(_len3),_key3=0;_key3<_len3;_key3++)fields[_key3]=arguments[_key3];var pluckQueries=function(data){var plucked={};return fields.forEach(function(field){var value=(0,_utils.getByDot)(data,field);void 0!==value&&(0,_utils.setByDot)(plucked,field,value)}),plucked},callback=function(){return!0};return"function"==typeof fields[fields.length-1]&&(callback=fields.pop()),function(hook){if("after"===hook.type)throw new errors.GeneralError("Provider '"+hook.params.provider+"' can not pluck query params on after hook. (pluckQuery)");var result=hook.params.query,update=function(condition){return result&&condition&&(hook.params.query=pluckQueries(result)),hook},check=callback(hook);return check&&"function"==typeof check.then?check.then(update):update(check)}}function remove(){for(var _len4=arguments.length,fields=Array(_len4),_key4=0;_key4<_len4;_key4++)fields[_key4]=arguments[_key4];var removeFields=function(data){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=fields[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var field=_step3.value,value=(0,_utils.getByDot)(data,field);void 0!==value&&(0,_utils.setByDot)(data,field,void 0,!0)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}},callback=function(hook){return!!hook.params.provider};return"function"==typeof fields[fields.length-1]&&(callback=fields.pop()),function(hook){var result="before"===hook.type?hook.data:hook.result,update=function(condition){return result&&condition&&(Array.isArray(result)?result.forEach(removeFields):(removeFields(result),result.data&&(Array.isArray(result.data)?result.data.forEach(removeFields):removeFields(result.data)))),hook},check=callback(hook);return check&&"function"==typeof check.then?check.then(update):update(check)}}function pluck(){for(var _len5=arguments.length,fields=Array(_len5),_key5=0;_key5<_len5;_key5++)fields[_key5]=arguments[_key5];var pluckFields=function(data){var plucked={};return fields.forEach(function(field){var value=(0,_utils.getByDot)(data,field);void 0!==value&&(0,_utils.setByDot)(plucked,field,value)}),plucked},callback=function(hook){return!!hook.params.provider};return"function"==typeof fields[fields.length-1]&&(callback=fields.pop()),function(hook){var update=function(condition){if(condition){var items=(0,_utils.getItems)(hook);items&&(Array.isArray(items)?(0,_utils.replaceItems)(hook,items.map(pluckFields)):(0,_utils.replaceItems)(hook,pluckFields(items)))}return hook},check=callback(hook);return check&&"function"==typeof check.then?check.then(update):update(check)}}function disable(realm){if(!realm)return function(hook){throw new errors.MethodNotAllowed("Calling '"+hook.method+"' not allowed. (disable)")};if("function"==typeof realm)return function(hook){var result=realm(hook),update=function(check){if(!check)throw new errors.MethodNotAllowed("Calling '"+hook.method+"' not allowed. (disable)")};return result&&"function"==typeof result.then?result.then(update):void update(result)};for(var _len6=arguments.length,args=Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++)args[_key6-1]=arguments[_key6];var providers=[realm].concat(args);return function(hook){var provider=hook.params.provider;if("external"===realm&&provider||providers.indexOf(provider)!==-1)throw new errors.MethodNotAllowed("Provider '"+hook.params.provider+"' can not call '"+hook.method+"'. (disable)'")}}function legacyPopulate(target,options){if(options=Object.assign({},options),!options.service)throw new Error("You need to provide a service. (populate)");var field=options.field||target;return function(hook){function populate1(item){if(!item[field])return Promise.resolve(item);var id=item[field];"function"==typeof item.toObject?item=item.toObject(options):"function"==typeof item.toJSON&&(item=item.toJSON(options));var params=Object.assign({},hook.params,{query:void 0}),promise=Array.isArray(id)?Promise.all(id.map(function(objectID){return hook.app.service(options.service).get(objectID,params)})):hook.app.service(options.service).get(id,params);return promise.then(function(relatedItem){return relatedItem&&(item[target]=relatedItem),item})}if("after"!==hook.type)throw new errors.GeneralError("Can not populate on before hook. (populate)");var isPaginated="find"===hook.method&&hook.result.data,data=isPaginated?hook.result.data:hook.result;return Array.isArray(data)?Promise.all(data.map(populate1)).then(function(results){return isPaginated?hook.result.data=results:hook.result=results,hook}):populate1(hook.result).then(function(item){return hook.result=item,hook})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lowerCase=lowerCase,exports.removeQuery=removeQuery,exports.pluckQuery=pluckQuery,exports.remove=remove,exports.pluck=pluck,exports.disable=disable,exports.legacyPopulate=legacyPopulate;var _utils=__webpack_require__(55),errors=__webpack_require__(35).errors},function(module,exports,__webpack_require__){"use strict";function isHookObject(hookObject){return"object"===("undefined"==typeof hookObject?"undefined":_typeof(hookObject))&&"string"==typeof hookObject.method&&"string"==typeof hookObject.type}function processHooks(hooks,initialHookObject){var _this=this,hookObject=initialHookObject,updateCurrentHook=function(current){if(current){if(!isHookObject(current))throw new Error(hookObject.type+" hook for '"+hookObject.method+"' method returned invalid hook object");hookObject=current}return hookObject},promise=Promise.resolve(hookObject);return hooks.forEach(function(fn){var hook=fn.bind(_this);promise=2===hook.length?promise.then(function(hookObject){return new Promise(function(resolve,reject){hook(hookObject,function(error,result){return error?reject(error):resolve(result)})})}):promise.then(hook),promise=promise.then(updateCurrentHook)}),promise.catch(function(error){throw error.hook=hookObject,error})}function addHookTypes(target){var types=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["before","after","error"];Object.defineProperty(target,"__hooks",{value:{}}),types.forEach(function(type){target.__hooks[type]={}})}function getHooks(app,service,type,method){var appLast=arguments.length>4&&void 0!==arguments[4]&&arguments[4],appHooks=app.__hooks[type][method]||[],serviceHooks=service.__hooks[type][method]||[];return appLast?serviceHooks.concat(appHooks):appHooks.concat(serviceHooks)}function baseMixin(methods){for(var mixin={hooks:function(allHooks){var _this2=this;return(0,_feathersCommons.each)(allHooks,function(obj,type){if(!_this2.__hooks[type])throw new Error("'"+type+"' is not a valid hook type");var hooks=_feathersCommons.hooks.convertHookData(obj);(0,_feathersCommons.each)(hooks,function(value,method){if("all"!==method&&methods.indexOf(method)===-1)throw new Error("'"+method+"' is not a valid hook method")}),methods.forEach(function(method){if(hooks[method]||hooks.all){var myHooks=_this2.__hooks[type][method]||(_this2.__hooks[type][method]=[]);hooks.all&&myHooks.push.apply(myHooks,hooks.all),hooks[method]&&myHooks.push.apply(myHooks,hooks[method])}})}),this}},_len=arguments.length,objs=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)objs[_key-1]=arguments[_key];return Object.assign.apply(Object,[mixin].concat(objs))}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.isHookObject=isHookObject,exports.processHooks=processHooks,exports.addHookTypes=addHookTypes,exports.getHooks=getHooks,exports.baseMixin=baseMixin;var _feathersCommons=__webpack_require__(14)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(59);
},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},config=Object.assign({},defaults,opts);return function(){var app=this;app.get("storage")||app.set("storage",(0,_utils.getStorage)(config.storage)),app.authenticate=function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},storage=this.get("storage"),getOptions=Promise.resolve(options);options.type||(getOptions=(0,_utils.getJWT)(config.tokenKey,config.cookie,this.get("storage")).then(function(token){return token?{type:"token",token:token}:Promise.reject(new _feathersErrors2.default.NotAuthenticated("Could not find stored JWT and no authentication type was given"))}));var handleResponse=function(response){return app.set("token",response.token),app.set("user",response.data),Promise.resolve(storage.setItem(config.tokenKey,response.token)).then(function(){return response})};return getOptions.then(function(options){var endPoint=void 0;if(options.endpoint)endPoint=options.endpoint;else if("local"===options.type)endPoint=config.localEndpoint;else{if("token"!==options.type)throw new Error("Unsupported authentication 'type': "+options.type);endPoint=config.tokenEndpoint}return(0,_utils.connected)(app).then(function(socket){if(app.rest)return app.service(endPoint).create(options).then(handleResponse);var method=app.io?"emit":"send";return(0,_utils.authenticateSocket)(options,socket,method).then(handleResponse)})})},app.logout=function(){return app.set("user",null),app.set("token",null),(0,_utils.clearCookie)(config.cookie),Promise.resolve(app.get("storage").removeItem(config.tokenKey)).then(function(){if(app.io||app.primus){var method=app.io?"emit":"send",socket=app.io?app.io:app.primus;return(0,_utils.logoutSocket)(socket,method)}})},app.mixins.push(function(service){if("function"!=typeof service.before||"function"!=typeof service.after)throw new Error("It looks like feathers-hooks isn't configured. It is required before running feathers-authentication.");service.before(hooks.populateParams(config))}),app.rest&&app.mixins.push(function(service){service.before(hooks.populateHeader(config))})}};var _feathersErrors=__webpack_require__(35),_feathersErrors2=_interopRequireDefault(_feathersErrors),_hooks=__webpack_require__(60),hooks=_interopRequireWildcard(_hooks),_utils=__webpack_require__(61),defaults={cookie:"feathers-jwt",tokenKey:"feathers-jwt",localEndpoint:"/auth/local",tokenEndpoint:"/auth/token"};module.exports=exports.default},function(module,exports){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function populateParams(){return function(hook){var app=hook.app;Object.assign(hook.params,{user:app.get("user"),token:app.get("token")})}}function populateHeader(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(hook){hook.params.token&&(hook.params.headers=Object.assign({},_defineProperty({},options.header||"authorization",hook.params.token),hook.params.headers))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.populateParams=populateParams,exports.populateHeader=populateHeader},function(module,exports){"use strict";function connected(app){return new Promise(function(resolve,reject){if(app.rest)return resolve();var socket=app.io||app.primus;if(!socket)return reject(new Error("It looks like no client connection has been configured."));if(socket.once("disconnect",reject),socket.once("close",reject),app.io&&!socket.connected||app.primus&&3!==socket.readyState){var connectEvent=app.primus?"open":"connect";socket.once(connectEvent,function(){return resolve(socket)})}else resolve(socket)})}function authenticateSocket(options,socket,method){return new Promise(function(resolve,reject){socket.once("unauthorized",reject),socket.once("authenticated",resolve),socket[method]("authenticate",options)})}function logoutSocket(socket,method){return new Promise(function(resolve,reject){socket[method]("logout",function(error){error&&reject(error),resolve()})})}function getCookie(name){if("undefined"!=typeof document){var value="; "+document.cookie,parts=value.split("; "+name+"=");if(2===parts.length)return parts.pop().split(";").shift()}return null}function clearCookie(name){return"undefined"!=typeof document&&(document.cookie=name+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),null}function getJWT(tokenKey,cookieKey,storage){return Promise.resolve(storage.getItem(tokenKey)).then(function(jwt){var cookieToken=getCookie(cookieKey);return cookieToken?cookieToken:jwt})}function getStorage(storage){return storage?storage:{store:{},getItem:function(key){return this.store[key]},setItem:function(key,value){return this.store[key]=value},removeItem:function(key){return delete this.store[key],this}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.connected=connected,exports.authenticateSocket=authenticateSocket,exports.logoutSocket=logoutSocket,exports.getCookie=getCookie,exports.clearCookie=clearCookie,exports.getJWT=getJWT,exports.getStorage=getStorage},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function init(options){return new LocalStorage(options)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)};exports.default=init;var _feathersMemory=__webpack_require__(63),LocalStorage=function(_Service){function LocalStorage(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,LocalStorage);var _this=_possibleConstructorReturn(this,(LocalStorage.__proto__||Object.getPrototypeOf(LocalStorage)).call(this,options));if(_this._storageKey=options.name||"feathers",_this._storage=options.storage||"undefined"!=typeof window&&window.localStorage,_this._throttle=options.throttle||200,_this.store=null,!_this._storage)throw new Error("The `storage` option needs to be provided");return _this}return _inherits(LocalStorage,_Service),_createClass(LocalStorage,[{key:"ready",value:function(){var _this2=this;return this.store?Promise.resolve(this.store):Promise.resolve(this._storage.getItem(this._storageKey)).then(function(str){return JSON.parse(str||"{}")}).then(function(store){var keys=Object.keys(store),last=store[keys[keys.length-1]];return _this2._uId=keys.length&&"undefined"!=typeof last[_this2.id]?last[_this2.id]+1:_this2._uId,_this2.store=store})}},{key:"flush",value:function(data){var _this3=this;return this._timeout||(this._timeout=setTimeout(function(){_this3._storage.setItem(_this3._storageKey,JSON.stringify(_this3.store)),delete _this3._timeout},this.throttle)),data}},{key:"execute",value:function(method){for(var _this4=this,_len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return this.ready().then(function(){var _get2;return(_get2=_get(LocalStorage.prototype.__proto__||Object.getPrototypeOf(LocalStorage.prototype),method,_this4)).call.apply(_get2,[_this4].concat(args))})}},{key:"find",value:function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.execute.apply(this,["find"].concat(args))}},{key:"get",value:function(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return this.execute.apply(this,["get"].concat(args))}},{key:"create",value:function(){for(var _this5=this,_len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return this.execute.apply(this,["create"].concat(args)).then(function(data){return _this5.flush(data)})}},{key:"patch",value:function(){for(var _this6=this,_len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return this.execute.apply(this,["patch"].concat(args)).then(function(data){return _this6.flush(data)})}},{key:"update",value:function(){for(var _this7=this,_len6=arguments.length,args=Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return this.execute.apply(this,["update"].concat(args)).then(function(data){return _this7.flush(data)})}},{key:"remove",value:function(){for(var _this8=this,_len7=arguments.length,args=Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return this.execute.apply(this,["remove"].concat(args)).then(function(data){return _this8.flush(data)})}}]),LocalStorage}(_feathersMemory.Service);init.Service=_feathersMemory.Service,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function init(options){return new Service(options)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.default=init;var _uberproto=__webpack_require__(9),_uberproto2=_interopRequireDefault(_uberproto),_feathersQueryFilters=__webpack_require__(64),_feathersQueryFilters2=_interopRequireDefault(_feathersQueryFilters),_feathersErrors=__webpack_require__(35),_feathersErrors2=_interopRequireDefault(_feathersErrors),_cloneDeep=__webpack_require__(65),_cloneDeep2=_interopRequireDefault(_cloneDeep),_feathersCommons=__webpack_require__(14),_sift=__webpack_require__(75),_sift2=_interopRequireDefault(_sift),select=function(){var base=_feathersCommons.select.apply(void 0,arguments);return function(result){return base((0,_cloneDeep2.default)(result))}},Service=function(){function Service(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Service),this.paginate=options.paginate||{},this._id=this.id=options.idField||options.id||"id",this._uId=options.startId||0,this.store=options.store||{},this.events=options.events||[],this._matcher=options.matcher,this._sorter=options.sorter||_feathersCommons.sorter}return _createClass(Service,[{key:"extend",value:function(obj){return _uberproto2.default.extend(obj,this)}},{key:"_find",value:function(params){var getFilter=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_feathersQueryFilters2.default,_getFilter=getFilter(params.query||{}),query=_getFilter.query,filters=_getFilter.filters,map=select(params),values=_feathersCommons._.values(this.store);values=this._matcher?values.filter(this._matcher(query)):(0,_sift2.default)(query,values);var total=values.length;return filters.$sort&&values.sort(this._sorter(filters.$sort)),filters.$skip&&(values=values.slice(filters.$skip)),"undefined"!=typeof filters.$limit&&(values=values.slice(0,filters.$limit)),Promise.resolve({total:total,limit:filters.$limit,skip:filters.$skip||0,data:map(values)})}},{key:"find",value:function(params){var paginate="undefined"!=typeof params.paginate?params.paginate:this.paginate,result=this._find(params,function(query){return(0,_feathersQueryFilters2.default)(query,paginate)});return paginate&&paginate.default?result:result.then(function(page){return page.data})}},{key:"get",value:function(id,params){return id in this.store?Promise.resolve(this.store[id]).then(select(params,this.id)):Promise.reject(new _feathersErrors2.default.NotFound("No record found for id '"+id+"'"))}},{key:"_create",value:function(data,params){var id=data[this._id]||this._uId++,current=_feathersCommons._.extend({},data,_defineProperty({},this._id,id));return Promise.resolve(this.store[id]=current).then(select(params,this.id))}},{key:"create",value:function(data,params){var _this=this;return Array.isArray(data)?Promise.all(data.map(function(current){return _this._create(current)})):this._create(data,params)}},{key:"_update",value:function(id,data,params){if(id in this.store){var oldId=this.store[id][this._id];return id=oldId==id?oldId:id,data=_feathersCommons._.extend({},data,_defineProperty({},this._id,id)),this.store[id]=data,Promise.resolve(this.store[id]).then(select(params,this.id))}return Promise.reject(new _feathersErrors2.default.NotFound("No record found for id '"+id+"'"))}},{key:"update",value:function(id,data,params){return null===id||Array.isArray(data)?Promise.reject(new _feathersErrors2.default.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")):this._update(id,data,params)}},{key:"_patch",value:function(id,data,params){return id in this.store?(_feathersCommons._.extend(this.store[id],_feathersCommons._.omit(data,this._id)),Promise.resolve(this.store[id]).then(select(params,this.id))):Promise.reject(new _feathersErrors2.default.NotFound("No record found for id '"+id+"'"))}},{key:"patch",value:function(id,data,params){var _this2=this;return null===id?this._find(params).then(function(page){return Promise.all(page.data.map(function(current){return _this2._patch(current[_this2._id],data,params)}))}):this._patch(id,data,params)}},{key:"_remove",value:function(id,params){if(id in this.store){var deleted=this.store[id];return delete this.store[id],Promise.resolve(deleted).then(select(params,this.id))}return Promise.reject(new _feathersErrors2.default.NotFound("No record found for id '"+id+"'"))}},{key:"remove",value:function(id,params){var _this3=this;return null===id?this._find(params).then(function(page){return Promise.all(page.data.map(function(current){return _this3._remove(current[_this3._id],params)}))}):this._remove(id,params)}}]),Service}();init.Service=Service,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function parse(number){if("undefined"!=typeof number)return Math.abs(parseInt(number,10))}function getLimit(limit,paginate){if(paginate&&paginate.default){var lower="number"==typeof limit?limit:paginate.default,upper="number"==typeof paginate.max?paginate.max:Number.MAX_VALUE;return Math.min(lower,upper)}return limit}function convertSort(sort){if("object"!==("undefined"==typeof sort?"undefined":_typeof(sort)))return sort;var result={};return Object.keys(sort).forEach(function(key){return result[key]="object"===_typeof(sort[key])?sort[key]:parseInt(sort[key],10)}),result}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default=function(query,paginate){var filters={$sort:convertSort(query.$sort),$limit:getLimit(parse(query.$limit),paginate),$skip:parse(query.$skip),$select:query.$select,$populate:query.$populate};return{filters:filters,query:_feathersCommons._.omit.apply(_feathersCommons._,[query].concat(PROPERTIES))}};var _feathersCommons=__webpack_require__(14),PROPERTIES=["$sort","$limit","$skip","$select","$populate"];module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function cloneDeep(val,instanceClone){switch(typeOf(val)){case"object":return cloneObjectDeep(val,instanceClone);case"array":return cloneArrayDeep(val,instanceClone);default:return clone(val)}}function cloneObjectDeep(obj,instanceClone){if(isObject(obj)){var res={};return forOwn(obj,function(obj,key){this[key]=cloneDeep(obj,instanceClone)},res),res}return instanceClone?instanceClone(obj):obj}function cloneArrayDeep(arr,instanceClone){for(var len=arr.length,res=[],i=-1;++i<len;)res[i]=cloneDeep(arr[i],instanceClone);return res}var isObject=__webpack_require__(66),clone=__webpack_require__(68),typeOf=__webpack_require__(72),forOwn=__webpack_require__(73);module.exports=cloneDeep},function(module,exports,__webpack_require__){/*!
	 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";function isObjectObject(o){return isObject(o)===!0&&"[object Object]"===Object.prototype.toString.call(o)}var isObject=__webpack_require__(67);module.exports=function(o){var ctor,prot;return isObjectObject(o)!==!1&&(ctor=o.constructor,"function"==typeof ctor&&(prot=ctor.prototype,isObjectObject(prot)!==!1&&prot.hasOwnProperty("isPrototypeOf")!==!1))}},function(module,exports){/*!
	 * isobject <https://github.com/jonschlinkert/isobject>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";module.exports=function(val){return null!=val&&"object"==typeof val&&Array.isArray(val)===!1}},function(module,exports,__webpack_require__){/*!
	 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
	 *
	 * Copyright (c) 2015-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";function clone(val){var type=typeOf(val);return clone.hasOwnProperty(type)?clone[type](val):val}var isObject=__webpack_require__(69),mixin=__webpack_require__(70),typeOf=__webpack_require__(72);clone.array=function(arr){return arr.slice()},clone.date=function(date){return new Date(+date)},clone.object=function(obj){return isObject(obj)?mixin({},obj):obj},clone.regexp=function(re){var flags="";return flags+=re.multiline?"m":"",flags+=re.global?"g":"",flags+=re.ignorecase?"i":"",new RegExp(re.source,flags)},module.exports=clone},function(module,exports){/*!
	 * is-extendable <https://github.com/jonschlinkert/is-extendable>
	 *
	 * Copyright (c) 2015, Jon Schlinkert.
	 * Licensed under the MIT License.
	 */
"use strict";module.exports=function(val){return"undefined"!=typeof val&&null!==val&&("object"==typeof val||"function"==typeof val)}},function(module,exports,__webpack_require__){"use strict";function mixin(target,objects){if(!isObject(target))throw new TypeError("mixin-object expects the first argument to be an object.");for(var len=arguments.length,i=0;++i<len;){var obj=arguments[i];isObject(obj)&&forIn(obj,copy,target)}return target}function copy(value,key){this[key]=value}var isObject=__webpack_require__(69),forIn=__webpack_require__(71);module.exports=mixin},function(module,exports){/*!
	 * for-in <https://github.com/jonschlinkert/for-in>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";module.exports=function(obj,fn,thisArg){for(var key in obj)if(fn.call(thisArg,obj[key],key,obj)===!1)break}},function(module,exports){function isBuffer(val){return val.constructor&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)}var toString=Object.prototype.toString;module.exports=function(val){var type=typeof val;return"undefined"===type?"undefined":null===val?"null":val===!0||val===!1||val instanceof Boolean?"boolean":"string"===type||val instanceof String?"string":"number"===type||val instanceof Number?"number":"function"===type||val instanceof Function?"undefined"!=typeof val.constructor.name&&"Generator"===val.constructor.name.slice(0,9)?"generatorfunction":"function":"undefined"!=typeof Array.isArray&&Array.isArray(val)?"array":val instanceof RegExp?"regexp":val instanceof Date?"date":(type=toString.call(val),"[object RegExp]"===type?"regexp":"[object Date]"===type?"date":"[object Arguments]"===type?"arguments":"[object Error]"===type?"error":"[object Promise]"===type?"promise":isBuffer(val)?"buffer":"[object Set]"===type?"set":"[object WeakSet]"===type?"weakset":"[object Map]"===type?"map":"[object WeakMap]"===type?"weakmap":"[object Symbol]"===type?"symbol":"[object Map Iterator]"===type?"mapiterator":"[object Set Iterator]"===type?"setiterator":"[object String Iterator]"===type?"stringiterator":"[object Array Iterator]"===type?"arrayiterator":"[object Int8Array]"===type?"int8array":"[object Uint8Array]"===type?"uint8array":"[object Uint8ClampedArray]"===type?"uint8clampedarray":"[object Int16Array]"===type?"int16array":"[object Uint16Array]"===type?"uint16array":"[object Int32Array]"===type?"int32array":"[object Uint32Array]"===type?"uint32array":"[object Float32Array]"===type?"float32array":"[object Float64Array]"===type?"float64array":"object")}},function(module,exports,__webpack_require__){/*!
	 * for-own <https://github.com/jonschlinkert/for-own>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";var forIn=__webpack_require__(74),hasOwn=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,thisArg){forIn(obj,function(val,key){if(hasOwn.call(obj,key))return fn.call(thisArg,obj[key],key,obj)})}},function(module,exports){/*!
	 * for-in <https://github.com/jonschlinkert/for-in>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
"use strict";module.exports=function(obj,fn,thisArg){for(var key in obj)if(fn.call(thisArg,obj[key],key,obj)===!1)break}},function(module,exports){!function(){"use strict";function isFunction(value){return"function"==typeof value}function isArray(value){return"[object Array]"===Object.prototype.toString.call(value)}function comparable(value){return value instanceof Date?value.getTime():isArray(value)?value.map(comparable):value&&"function"==typeof value.toJSON?value.toJSON():value}function get(obj,key){return isFunction(obj.get)?obj.get(key):obj[key]}function or(validator){return function(a,b){if(!isArray(b)||!b.length)return validator(a,b);for(var i=0,n=b.length;i<n;i++)if(validator(a,get(b,i)))return!0;return!1}}function and(validator){return function(a,b){if(!isArray(b)||!b.length)return validator(a,b);for(var i=0,n=b.length;i<n;i++)if(!validator(a,get(b,i)))return!1;return!0}}function validate(validator,b,k,o){return validator.v(validator.a,b,k,o)}function search(array,validator){for(var i=0;i<array.length;i++){get(array,i);if(validate(validator,get(array,i)))return i}return-1}function createValidator(a,validate){return{a:a,v:validate}}function nestedValidator(a,b){var values=[];if(findValues(b,a.k,0,b,values),1===values.length){var first=values[0];return validate(a.nv,first[0],first[1],first[2])}for(var i=0;i<values.length;i++){var result=values[i];if(validate(a.nv,result[0],result[1],result[2]))return!0}return!1}function findValues(current,keypath,index,object,values){if(index===keypath.length||void 0==current)return void values.push([current,keypath[index-1],object]);var k=get(keypath,index);if(isArray(current)&&isNaN(Number(k)))for(var i=0,n=current.length;i<n;i++)findValues(get(current,i),keypath,index,current,values);else findValues(get(current,k),keypath,index+1,current,values)}function createNestedValidator(keypath,a){return{a:{k:keypath,nv:a},v:nestedValidator}}function isVanillaObject(value){return value&&value.constructor===Object}function parse(query){query=comparable(query),query&&isVanillaObject(query)||(query={$eq:query});var validators=[];for(var key in query){var a=query[key];if("$options"!==key)if(OPERATORS[key])prepare[key]&&(a=prepare[key](a,query)),validators.push(createValidator(comparable(a),OPERATORS[key]));else{if(36===key.charCodeAt(0))throw new Error("Unknown operation "+key);validators.push(createNestedValidator(key.split("."),parse(a)))}}return 1===validators.length?validators[0]:createValidator(validators,OPERATORS.$and)}function createRootValidator(query,getter){var validator=parse(query);return getter&&(validator={a:validator,v:function(a,b,k,o){return validate(a,getter(b),k,o)}}),validator}function sift(query,array,getter){function filter(b,k,o){return validate(validator,b,k,o)}isFunction(array)&&(getter=array,array=void 0);var validator=createRootValidator(query,getter);return array?array.filter(filter):filter}var OPERATORS={$eq:or(function(a,b){return a(b)}),$ne:and(function(a,b){return!a(b)}),$gt:or(function(a,b){return sift.compare(comparable(b),a)>0}),$gte:or(function(a,b){return sift.compare(comparable(b),a)>=0}),$lt:or(function(a,b){return sift.compare(comparable(b),a)<0}),$lte:or(function(a,b){return sift.compare(comparable(b),a)<=0}),$mod:or(function(a,b){return b%a[0]==a[1]}),$in:function(a,b){if(!(b instanceof Array)){var comparableB=comparable(b);if(comparableB===b&&"object"==typeof b)for(var i=a.length;i--;)if(String(a[i])===String(b)&&"[object Object]"!==String(b))return!0;if("undefined"==typeof comparableB)for(var i=a.length;i--;)if(null==a[i])return!0;for(var i=a.length;i--;){var validator=createRootValidator(get(a,i),void 0),result=validate(validator,b,i,a);if(result&&"[object Object]"!==String(result)&&"[object Object]"!==String(b))return!0}return!!~a.indexOf(comparableB)}for(var i=b.length;i--;)if(~a.indexOf(comparable(get(b,i))))return!0;return!1},$nin:function(a,b,k,o){return!OPERATORS.$in(a,b,k,o)},$not:function(a,b,k,o){return!validate(a,b,k,o)},$type:function(a,b){return void 0!=b&&(b instanceof a||b.constructor==a)},$all:function(a,b,k,o){return OPERATORS.$and(a,b,k,o)},$size:function(a,b){return!!b&&a===b.length},$or:function(a,b,k,o){for(var i=0,n=a.length;i<n;i++)if(validate(get(a,i),b,k,o))return!0;return!1},$nor:function(a,b,k,o){return!OPERATORS.$or(a,b,k,o)},$and:function(a,b,k,o){for(var i=0,n=a.length;i<n;i++)if(!validate(get(a,i),b,k,o))return!1;return!0},$regex:or(function(a,b){return"string"==typeof b&&a.test(b)}),$where:function(a,b,k,o){return a.call(b,b,k,o)},$elemMatch:function(a,b,k,o){return isArray(b)?!!~search(b,a):validate(a,b,k,o)},$exists:function(a,b,k,o){return o.hasOwnProperty(k)===a}},prepare={$eq:function(a){return a instanceof RegExp?function(b){return"string"==typeof b&&a.test(b)}:a instanceof Function?a:isArray(a)&&!a.length?function(b){return isArray(b)&&!b.length}:null===a?function(b){return null==b}:function(b){return 0===sift.compare(comparable(b),a)}},$ne:function(a){return prepare.$eq(a)},$and:function(a){return a.map(parse)},$all:function(a){return prepare.$and(a)},$or:function(a){return a.map(parse)},$nor:function(a){return a.map(parse)},$not:function(a){return parse(a)},$regex:function(a,query){return new RegExp(a,query.$options)},$where:function(a){return"string"==typeof a?new Function("obj","return "+a):a},$elemMatch:function(a){return parse(a)},$exists:function(a){return!!a}};sift.use=function(plugin){if(isFunction(plugin))return plugin(sift);for(var key in plugin)36===key.charCodeAt(0)&&(OPERATORS[key]=plugin[key])},sift.indexOf=function(query,array,getter){return search(array,createRootValidator(query,getter))},sift.compare=function(a,b){if(a===b)return 0;if(typeof a==typeof b){if(a>b)return 1;if(a<b)return-1}},"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(Object.defineProperty(exports,"__esModule",{value:!0}),module.exports=sift,exports.default=module.exports.default=sift),"undefined"!=typeof window&&(window.sift=sift)}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FeathersRx(Rx,options){if(!Rx)throw new Error("You have to pass an instance of RxJS as the first paramter.");if(!Rx.Observable)throw new Error("The RxJS instance does not seem to provide an `Observable` type.");var listStrategies=(0,_strategies2.default)(Rx);options=Object.assign({idField:"id",dataField:"data",sorter:_utils2.makeSorter,lazy:!1,matcher:_utils.matcher,listStrategy:"smart",listStrategies:listStrategies},options);var mixin=function mixin(service){var app=this,mixin={rx:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._rx=options,this}},events={created:Rx.Observable.fromEvent(service,"created"),updated:Rx.Observable.fromEvent(service,"updated"),patched:Rx.Observable.fromEvent(service,"patched"),removed:Rx.Observable.fromEvent(service,"removed")};app.methods.forEach(function(method){"function"==typeof service[method]&&(mixin[method]="find"===method?(0,_list2.default)(Rx,events,options):(0,_resource2.default)(Rx,events,options,method))}),service.mixin(mixin)};return function(){debug("Initializing feathers-reactive plugin"),this.mixins.push(mixin)}}Object.defineProperty(exports,"__esModule",{value:!0});var _utils=__webpack_require__(16),_resource=__webpack_require__(77),_resource2=_interopRequireDefault(_resource),_list=__webpack_require__(79),_list2=_interopRequireDefault(_list),_strategies=__webpack_require__(80),_strategies2=_interopRequireDefault(_strategies),_utils2=__webpack_require__(78),debug=__webpack_require__(81)("feathers-reactive");FeathersRx.strategy=_strategies2.default,exports.default=FeathersRx,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.paramsPositions=void 0,exports.default=function(Rx,events,settings,method){return function(){var args=arguments,position="undefined"!=typeof paramsPositions[method]?paramsPositions[method]:1,params=arguments[position]||{};if(this._rx===!1||params.rx===!1)return this._super.apply(this,_toConsumableArray(args));var options=(0,_utils.getOptions)(settings,this._rx,params.rx),source=(0,_utils.getSource)(Rx,options.lazy,this._super.bind(this),args),stream=source.concat(source.exhaustMap(function(data){var filter=function(current){return current[options.idField]===data[options.idField]},filteredRemoves=events.removed.filter(filter),filteredEvents=Rx.Observable.merge(events.created,events.updated,events.patched).filter(filter);return Rx.Observable.merge(filteredEvents,filteredRemoves.map(function(){return null}))}));return(0,_utils.promisify)(stream)}};var _utils=__webpack_require__(78),paramsPositions=exports.paramsPositions={update:2,patch:2}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function getSource(Rx,lazy,__super,args){if(lazy===!0){var _ret=function(){var result=null;return{v:Rx.Observable.create(function(observer){var _observer=observer;if(result||(result=__super.apply(void 0,_toConsumableArray(args))),!result||"function"!=typeof result.then||"function"!=typeof result.catch)throw new Error("feathers-reactive only works with services that return a Promise");result.then(function(res){_observer.next(res),_observer.complete()}).catch(function(e){return _observer.error(e)})})}}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v}return Rx.Observable.fromPromise(__super.apply(void 0,_toConsumableArray(args)))}function promisify(stream){return Object.assign(stream,{then:function(){var _first$toPromise;return(_first$toPromise=this.first().toPromise()).then.apply(_first$toPromise,arguments)},catch:function(){var _first$toPromise2;return(_first$toPromise2=this.first().toPromise()).catch.apply(_first$toPromise2,arguments)}})}function makeSorter(query,options){var sorter=query.$sort?(0,_utils.sorter)(query.$sort):(0,_utils.sorter)(_defineProperty({},options.idField,1));return function(result){var isPaginated=!!result[options.dataField],data=isPaginated?result[options.dataField]:result;sorter&&(data=data.sort(sorter));var limit="number"==typeof result.limit?result.limit:parseInt(query.$limit,10);return limit&&!isNaN(limit)&&(data=data.slice(0,limit)),isPaginated?result[options.dataField]=data:result=data,result}}function getOptions(base){for(var _len=arguments.length,others=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)others[_key-1]=arguments[_key];var options=Object.assign.apply(Object,[{},base].concat(others));return"string"==typeof options.listStrategy&&(options.listStrategy=options.listStrategies[options.listStrategy]),options}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.getSource=getSource,exports.promisify=promisify,exports.makeSorter=makeSorter,exports.getOptions=getOptions;var _utils=__webpack_require__(16)},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(Rx,events,settings){return function(){var params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},args=arguments;if(this._rx===!1||params.rx===!1)return this._super.apply(this,_toConsumableArray(args));var options=(0,_utils.getOptions)(settings,this._rx,params.rx),source=(0,_utils.getSource)(Rx,options.lazy,this._super.bind(this),arguments),stream=options.listStrategy.call(this,source,events,options,args);return(0,_utils.promisify)(stream)}};var _utils=__webpack_require__(78);module.exports=exports.default},function(module,exports){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(Rx){return{never:function(source){return source},always:function(source,events,options,args){var params=args[0]||{},query=Object.assign({},params.query),_super=this._super.bind(this),matches=options.matcher(query),sortAndTrim=options.sorter(query,options);return source.concat(source.exhaustMap(function(){return Rx.Observable.merge(events.created.filter(matches),events.removed,events.updated,events.patched).flatMap(function(){var source=Rx.Observable.fromPromise(_super.apply(void 0,_toConsumableArray(args)));return source.map(sortAndTrim)})}))},smart:function(source,events,options,args){var params=args[0]||{},query=Object.assign({},params.query),matches=options.matcher(query),sortAndTrim=options.sorter(query,options),onCreated=function(eventData){return function(page){var isPaginated=!!page[options.dataField],process=function(data){return data.concat(eventData)};return isPaginated?Object.assign({},page,_defineProperty({total:page.total+1},options.dataField,process(page[options.dataField]))):process(page)}},onRemoved=function(eventData){return function(page){var isPaginated=!!page[options.dataField],process=function(data){return data.filter(function(current){return eventData[options.idField]!==current[options.idField]})};return isPaginated?Object.assign({},page,_defineProperty({total:matches(eventData)?page.total-1:page.total},options.dataField,process(page[options.dataField]))):process(page)}},onUpdated=function(eventData){return function(page){var isPaginated=!!page[options.dataField],length=isPaginated?page[options.dataField].length:page.length,process=function(data){return data.filter(function(current){return eventData[options.idField]!==current[options.idField]}).concat(eventData).filter(matches)};if(isPaginated){var processed=process(page[options.dataField]);return Object.assign({},page,_defineProperty({total:page.total-(length-processed.length)},options.dataField,processed))}return process(page)}};return source.concat(source.exhaustMap(function(data){return Rx.Observable.merge(events.created.filter(matches).map(onCreated),events.removed.map(onRemoved),Rx.Observable.merge(events.updated,events.patched).map(onUpdated)).scan(function(current,callback){return sortAndTrim(callback(current))},data)}))}}},module.exports=exports.default},function(module,exports,__webpack_require__){(function(process){function useColors(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(args){var useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),useColors){var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG),r}function localstorage(){try{return window.localStorage}catch(e){}}exports=module.exports=__webpack_require__(82),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},exports.enable(load())}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){function selectColor(namespace){var i,hash=0;for(i in namespace)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(debug.enabled){var self=debug,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr;for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||void 0;logFn.apply(self,args)}}return debug.namespace=namespace,debug.enabled=exports.enabled(namespace),debug.useColors=exports.useColors(),debug.color=selectColor(namespace),"function"==typeof exports.init&&exports.init(debug),debug}function enable(namespaces){exports.save(namespaces),exports.names=[],exports.skips=[];for(var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=__webpack_require__(83),exports.names=[],exports.skips=[],exports.formatters={};var prevTime},function(module,exports){function parse(str){if(str=String(str),!(str.length>100)){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]),type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return parse(val);if("number"===type&&isNaN(val)===!1)return options.long?fmtLong(val):fmtShort(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},,,,,,,,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(module,global){!function(root,factory){var objectTypes={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=(freeModule&&freeModule.exports===freeExports&&freeExports,objectTypes[typeof global]&&global);!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2),__webpack_require__(92),exports],__WEBPACK_AMD_DEFINE_RESULT__=function(Rx,angular,exports){return root.Rx=factory(root,exports,Rx,angular),root.Rx}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(global,exp,Rx,angular,undefined){function tryCatcherGen(tryCatchTarget){return function(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}}function tryCatch(fn){if(!angular.isFunction(fn))throw new TypeError("fn must be a function");return tryCatcherGen(fn)}function noop(){}var errorObj={e:{}},rxModule=angular.module("rx",[]);rxModule.factory("rx",["$window",function($window){$window.Rx||($window.Rx=Rx);var CreateObservableFunction=function(__super__){function CreateObservableFunction(self,name,fn){this._self=self,this._name=name,this._fn=fn,__super__.call(this)}function InnerDisposable(self,name){this._self=self,this._name=name,this.isDisposed=!1}return Rx.internals.inherits(CreateObservableFunction,__super__),CreateObservableFunction.prototype.subscribeCore=function(o){var fn=this._fn;return this._self[this._name]=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];if(angular.isFunction(fn)){var result=tryCatch(fn).apply(this,args);if(result===errorObj)return o.onError(result.e);o.onNext(result)}else 1===args.length?o.onNext(args[0]):o.onNext(args)},new InnerDisposable(this._self,this._name)},InnerDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,delete this._self[this._name])},CreateObservableFunction}(Rx.ObservableBase);return Rx.createObservableFunction=function(self,functionName,listener){return new CreateObservableFunction(self,functionName,listener).publish().refCount()},$window.Rx}]),rxModule.factory("observeOnScope",["rx",function(rx){var ObserveOnScope=function(__super__){function ObserveOnScope(scope,expr,eq){this._scope=scope,this._expr=expr,this._eq=eq,__super__.call(this)}function createListener(o){return function(newValue,oldValue){o.onNext({oldValue:oldValue,newValue:newValue})}}function InnerDisposable(fn){this._fn=fn,this.isDisposed=!1}return rx.internals.inherits(ObserveOnScope,__super__),ObserveOnScope.prototype.subscribeCore=function(o){return new InnerDisposable(this._scope.$watch(this._expr,createListener(o),this._eq))},InnerDisposable.prototype.dispose=function(){this.isDisposed||(this._fn(),this.isDisposed=!0)},ObserveOnScope}(rx.ObservableBase);return function(scope,watchExpression,objectEquality){return new ObserveOnScope(scope,watchExpression,objectEquality)}}]),Rx.Observable.prototype.safeApply=function($scope,onNext,onError,onComplete){return onNext=angular.isFunction(onNext)?onNext:noop,onError=angular.isFunction(onError)?onError:noop,onComplete=angular.isFunction(onComplete)?onComplete:noop,this.takeWhile(function(){return!$scope.$$destroyed}).tap(function(data){$scope.$$phase||$scope.$root.$$phase?onNext(data):$scope.$apply(function(){onNext(data)})},function(error){$scope.$$phase||$scope.$root.$$phase?onError(error):$scope.$apply(function(){onError(error)})},function(){$scope.$$phase||$scope.$root.$$phase?onComplete():$scope.$apply(function(){onComplete()})})},rxModule.config(["$provide",function($provide){$provide.decorator("$rootScope",["$delegate","rx",function($delegate,rx){return Object.defineProperties($delegate.constructor.prototype,{$toObservable:{value:function(watchExpression,objectEquality){var scope=this;return rx.Observable.create(function(observer){function listener(newValue,oldValue){observer.onNext({oldValue:oldValue,newValue:newValue})}var disposable=rx.Disposable.create(scope.$watch(watchExpression,listener,objectEquality));return scope.$on("$destroy",function(){disposable.dispose()}),disposable}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$toObservableCollection:{value:function(watchExpression){var scope=this;return rx.Observable.create(function(observer){function listener(newValue,oldValue){observer.onNext({oldValue:oldValue,newValue:newValue})}var disposable=rx.Disposable.create(scope.$watchCollection(watchExpression,listener));return scope.$on("$destroy",function(){disposable.dispose()}),disposable}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$toObservableGroup:{value:function(watchExpressions){var scope=this;return rx.Observable.create(function(observer){function listener(newValue,oldValue){observer.onNext({oldValue:oldValue,newValue:newValue})}var disposable=rx.Disposable.create(scope.$watchGroup(watchExpressions,listener));return scope.$on("$destroy",function(){disposable.dispose()}),disposable}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$eventToObservable:{value:function(eventName,selector){var scope=this;return rx.Observable.create(function(observer){function listener(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];if(angular.isFunction(selector)){var result=tryCatch(selector).apply(null,args);if(result===errorObj)return observer.onError(result.e);observer.onNext(result)}else 1===args.length?observer.onNext(args[0]):observer.onNext(args)}var disposable=rx.Disposable.create(scope.$on(eventName,listener));return scope.$on("$destroy",function(){disposable.dispose()}),disposable}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$createObservableFunction:{value:function(functionName,listener){return rx.createObservableFunction(this,functionName,listener)},enumerable:!1,configurable:!0,writable:!0},$digestObservables:{value:function(observables){var scope=this;return rx.Observable.pairs(observables).flatMap(function(pair){return pair[1].digest(scope,pair[0]).map(function(val){return{observable:pair[1],expression:pair[0],value:val}})}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0}}),$delegate}])}]),rxModule.run(["$parse",function($parse){var DigestObservable=function(__super__){function DigestObservable(source,$scope,prop){this.source=source,this.$scope=$scope,this.prop=prop,__super__.call(this)}return Rx.internals.inherits(DigestObservable,__super__),DigestObservable.prototype.subscribeCore=function(o){var propSetter=$parse(this.prop).assign;if(!propSetter)return o.onError(new Error("Property or expression is not assignable."));var m=new Rx.SingleAssignmentDisposable;return m.setDisposable(this.source.subscribe(new DigestObserver(o,this.$scope,propSetter))),this.$scope.$on("$destroy",function(){m.dispose()}),m},DigestObservable}(Rx.ObservableBase),DigestObserver=function(__super__){function DigestObserver(o,$scope,propSetter){this.o=o,this.$scope=$scope,this.propSetter=propSetter,__super__.call(this)}return Rx.internals.inherits(DigestObserver,__super__),DigestObserver.prototype.next=function(x){if(this.$scope.$$phase)this.propSetter(this.$scope,x);else{var _this=this;this.$scope.$apply(function(){_this.propSetter(_this.$scope,x)})}this.o.onNext(x)},DigestObserver.prototype.error=function(e){this.o.onError(e)},DigestObserver.prototype.completed=function(){this.o.onCompleted()},DigestObserver}(Rx.internals.AbstractObserver);Rx.Observable.prototype.digest=function($scope,prop){return new DigestObservable(this,$scope,prop)}}]);Rx.ScopeScheduler=function(__super__){function ScopeScheduler($scope){this.$scope=$scope,__super__.call(this)}return Rx.internals.inherits(ScopeScheduler,__super__),ScopeScheduler.prototype.schedule=function(state,action){if(this.$scope.$$destroyed)return Rx.Disposable.empty;var sad=new Rx.SingleAssignmentDisposable,$scope=this.$scope;$scope.$$phase||$scope.$root.$$phase?sad.setDisposable(Rx.Disposable._fixup(state(action))):$scope.$apply.call($scope,function(){sad.setDisposable(Rx.Disposable._fixup(state(action)))})},ScopeScheduler.prototype._scheduleFuture=function(state,dueTime,action){if(this.$scope.$$destroyed)return Rx.Disposable.empty;var sad=new Rx.SingleAssignmentDisposable,$scope=this.$scope,id=setTimeout(function(){return $scope.$$destroyed||sad.isDisposed?clearTimeout(id):void($scope.$$phase||$scope.$root.$$phase?sad.setDisposable(Rx.Disposable._fixup(state(action))):$scope.$apply.call($scope,function(){sad.setDisposable(Rx.Disposable._fixup(state(action)))}))},dueTime);return new Rx.BinaryDisposable(sad,Rx.Disposable.create(function(){clearTimeout(id)}))},ScopeScheduler.prototype.schedulePeriodic=function(state,period,action){if(this.$scope.$$destroyed)return Rx.Disposable.empty;period=Rx.Scheduler.normalize(period);var $scope=this.$scope,s=state,id=setInterval(function(){return $scope.$$destroyed?clearInterval(id):void($scope.$$phase||$scope.$root.$$phase?s=action(s):$scope.$apply.call($scope,function(){s=action(s)}))},period);return Rx.Disposable.create(function(){clearInterval(id)})},ScopeScheduler}(Rx.Scheduler);return Rx})}).call(exports,__webpack_require__(3)(module),function(){return this}())},function(module,exports){module.exports=angular},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){/*! SVG Morpheus v0.3.0 License: MIT */
(function(){"use strict";function t(t,e,r){var a,s={};for(a in t)switch(a){case"fill":case"stroke":s[a]=n(t[a]),s[a].r=t[a].r+(e[a].r-t[a].r)*r,s[a].g=t[a].g+(e[a].g-t[a].g)*r,s[a].b=t[a].b+(e[a].b-t[a].b)*r,s[a].opacity=t[a].opacity+(e[a].opacity-t[a].opacity)*r;break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":s[a]=t[a]+(e[a]-t[a])*r}return s}function e(t){var e,r={};for(e in t)switch(e){case"fill":case"stroke":r[e]=F(t[e]);break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":r[e]=t[e]}return r}function r(t,e){var r,a=[{},{}];for(r in t)switch(r){case"fill":case"stroke":a[0][r]=L(t[r]),void 0===e[r]&&(a[1][r]=L(t[r]),a[1][r].opacity=0);break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":a[0][r]=t[r],void 0===e[r]&&(a[1][r]=1)}for(r in e)switch(r){case"fill":case"stroke":a[1][r]=L(e[r]),void 0===t[r]&&(a[0][r]=L(e[r]),a[0][r].opacity=0);break;case"opacity":case"fill-opacity":case"stroke-opacity":case"stroke-width":a[1][r]=e[r],void 0===t[r]&&(a[0][r]=1)}return a}function a(t,e,r){var a={};for(var s in t)switch(s){case"rotate":a[s]=[0,0,0];for(var o=0;3>o;o++)a[s][o]=t[s][o]+(e[s][o]-t[s][o])*r}return a}function s(t){var e="";return t.rotate&&(e+="rotate("+t.rotate.join(" ")+")"),e}function o(t,e,r){for(var a=[],s=0,o=t.length;o>s;s++){a.push([t[s][0]]);for(var n=1,i=t[s].length;i>n;n++)a[s].push(t[s][n]+(e[s][n]-t[s][n])*r)}return a}function n(t){var e;if(t instanceof Array){e=[];for(var r=0,a=t.length;a>r;r++)e[r]=n(t[r]);return e}if(t instanceof Object){e={};for(var s in t)t.hasOwnProperty(s)&&(e[s]=n(t[s]));return e}return t}function i(t,e,r){if(!t)throw new Error('SVGMorpheus > "element" is required');if("string"==typeof t&&(t=document.querySelector(t),!t))throw new Error('SVGMorpheus > "element" query is not related to an existing DOM node');if(e&&typeof e!=typeof{})throw new Error('SVGMorpheus > "options" parameter must be an object');if(e=e||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus > "callback" parameter must be a function');var a=this;this._icons={},this._curIconId=e.iconId||"",this._toIconId="",this._curIconItems=[],this._fromIconItems=[],this._toIconItems=[],this._morphNodes=[],this._morphG,this._startTime,this._defDuration=e.duration||750,this._defEasing=e.easing||"quad-in-out",this._defRotation=e.rotation||"clock",this._defCallback=r||function(){},this._duration=this._defDuration,this._easing=this._defEasing,this._rotation=this._defRotation,this._callback=this._defCallback,this._rafid,this._fnTick=function(t){a._startTime||(a._startTime=t);var e=Math.min((t-a._startTime)/a._duration,1);a._updateAnimationProgress(e),1>e?a._rafid=h(a._fnTick):""!=a._toIconId&&a._animationEnd()},this._svgDoc="SVG"===t.nodeName.toUpperCase()?t:t.getSVGDocument(),this._svgDoc?a._init():t.addEventListener("load",function(){a._svgDoc=t.getSVGDocument(),a._init()},!1)}var c={};c["circ-in"]=function(t){return-1*(Math.sqrt(1-t*t)-1)},c["circ-out"]=function(t){return Math.sqrt(1-(t-=1)*t)},c["circ-in-out"]=function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},c["cubic-in"]=function(t){return t*t*t},c["cubic-out"]=function(t){return--t*t*t+1},c["cubic-in-out"]=function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},c["elastic-in"]=function(t){var e=1.70158,r=0,a=1;if(0==t)return 0;if(1==t)return 1;if(r||(r=.3),a<Math.abs(1)){a=1;var e=r/4}else var e=r/(2*Math.PI)*Math.asin(1/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r))},c["elastic-out"]=function(t){var e=1.70158,r=0,a=1;if(0==t)return 0;if(1==t)return 1;if(r||(r=.3),a<Math.abs(1)){a=1;var e=r/4}else var e=r/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/r)+1},c["elastic-in-out"]=function(t){var e=1.70158,r=0,a=1;if(0==t)return 0;if(2==(t/=.5))return 1;if(r||(r=.3*1.5),a<Math.abs(1)){a=1;var e=r/4}else var e=r/(2*Math.PI)*Math.asin(1/a);return 1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r):a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/r)*.5+1},c["expo-in"]=function(t){return 0==t?0:Math.pow(2,10*(t-1))},c["expo-out"]=function(t){return 1==t?1:1-Math.pow(2,-10*t)},c["expo-in-out"]=function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},c.linear=function(t){return t},c["quad-in"]=function(t){return t*t},c["quad-out"]=function(t){return t*(2-t)},c["quad-in-out"]=function(t){return.5>t?2*t*t:-1+(4-2*t)*t},c["quart-in"]=function(t){return t*t*t*t},c["quart-out"]=function(t){return 1- --t*t*t*t},c["quart-in-out"]=function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},c["quint-in"]=function(t){return t*t*t*t*t},c["quint-out"]=function(t){return 1+--t*t*t*t*t},c["quint-in-out"]=function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t},c["sine-in"]=function(t){return 1-Math.cos(t*(Math.PI/2))},c["sine-out"]=function(t){return Math.sin(t*(Math.PI/2))},c["sine-in-out"]=function(t){return.5*(1-Math.cos(Math.PI*t))};var h=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame,u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame,l="\t\n\v\f\r   ᠎             　\u2028\u2029",p=new RegExp("([a-z])["+l+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+l+"]*,?["+l+"]*)+)","ig"),f=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+l+"]*,?["+l+"]*","ig"),m=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(p,function(t,a,s){var o=[],n=a.toLowerCase();if(s.replace(f,function(t,e){e&&o.push(+e)}),"m"==n&&o.length>2&&(r.push([a].concat(o.splice(0,2))),n="l",a="m"==a?"l":"L"),"o"==n&&1==o.length&&r.push([a,o[0]]),"r"==n)r.push([a].concat(o));else for(;o.length>=e[n]&&(r.push([a].concat(o.splice(0,e[n]))),e[n]););}),r},y=function(t,e){for(var r=[],a=0,s=t.length;s-2*!e>a;a+=2){var o=[{x:+t[a-2],y:+t[a-1]},{x:+t[a],y:+t[a+1]},{x:+t[a+2],y:+t[a+3]},{x:+t[a+4],y:+t[a+5]}];e?a?s-4==a?o[3]={x:+t[0],y:+t[1]}:s-2==a&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[s-2],y:+t[s-1]}:s-4==a?o[3]=o[2]:a||(o[0]={x:+t[a],y:+t[a+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r},I=function(t,e,r,a,s){if(null==s&&null==a&&(a=r),t=+t,e=+e,r=+r,a=+a,null!=s)var o=Math.PI/180,n=t+r*Math.cos(-a*o),i=t+r*Math.cos(-s*o),c=e+r*Math.sin(-a*o),h=e+r*Math.sin(-s*o),u=[["M",n,c],["A",r,r,0,+(s-a>180),0,i,h]];else u=[["M",t,e],["m",0,-a],["a",r,a,0,1,1,0,2*a],["a",r,a,0,1,1,0,-2*a],["z"]];return u},d=function(t){if(t=m(t),!t||!t.length)return[["M",0,0]];var e,r=[],a=0,s=0,o=0,n=0,i=0;"M"==t[0][0]&&(a=+t[0][1],s=+t[0][2],o=a,n=s,i++,r[0]=["M",a,s]);for(var c,h,u=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),l=i,p=t.length;p>l;l++){if(r.push(c=[]),h=t[l],e=h[0],e!=e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+a,c[7]=+h[7]+s;break;case"V":c[1]=+h[1]+s;break;case"H":c[1]=+h[1]+a;break;case"R":for(var f=[a,s].concat(h.slice(1)),d=2,_=f.length;_>d;d++)f[d]=+f[d]+a,f[++d]=+f[d]+s;r.pop(),r=r.concat(y(f,u));break;case"O":r.pop(),f=I(a,s,h[1],h[2]),f.push(f[0]),r=r.concat(f);break;case"U":r.pop(),r=r.concat(I(a,s,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+h[1]+a,n=+h[2]+s;default:for(d=1,_=h.length;_>d;d++)c[d]=+h[d]+(d%2?a:s)}else if("R"==e)f=[a,s].concat(h.slice(1)),r.pop(),r=r.concat(y(f,u)),c=["R"].concat(h.slice(-2));else if("O"==e)r.pop(),f=I(a,s,h[1],h[2]),f.push(f[0]),r=r.concat(f);else if("U"==e)r.pop(),r=r.concat(I(a,s,h[1],h[2],h[3])),c=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,M=h.length;M>g;g++)c[g]=h[g];if(e=e.toUpperCase(),"O"!=e)switch(c[0]){case"Z":a=+o,s=+n;break;case"H":a=c[1];break;case"V":s=c[1];break;case"M":o=c[c.length-2],n=c[c.length-1];default:a=c[c.length-2],s=c[c.length-1]}}return r},_=function(t,e,r,a){return[t,e,r,a,r,a]},g=function(t,e,r,a,s,o){var n=1/3,i=2/3;return[n*t+i*r,n*e+i*a,n*s+i*r,n*o+i*a,s,o]},M=function(t,e,r,a,s,o,n,i,c,h){var u,l=120*Math.PI/180,p=Math.PI/180*(+s||0),f=[],m=function(t,e,r){var a=t*Math.cos(r)-e*Math.sin(r),s=t*Math.sin(r)+e*Math.cos(r);return{x:a,y:s}};if(h)w=h[0],k=h[1],v=h[2],x=h[3];else{u=m(t,e,-p),t=u.x,e=u.y,u=m(i,c,-p),i=u.x,c=u.y;var y=(Math.cos(Math.PI/180*s),Math.sin(Math.PI/180*s),(t-i)/2),I=(e-c)/2,d=y*y/(r*r)+I*I/(a*a);d>1&&(d=Math.sqrt(d),r*=d,a*=d);var _=r*r,g=a*a,b=(o==n?-1:1)*Math.sqrt(Math.abs((_*g-_*I*I-g*y*y)/(_*I*I+g*y*y))),v=b*r*I/a+(t+i)/2,x=b*-a*y/r+(e+c)/2,w=Math.asin(((e-x)/a).toFixed(9)),k=Math.asin(((c-x)/a).toFixed(9));w=v>t?Math.PI-w:w,k=v>i?Math.PI-k:k,0>w&&(w=2*Math.PI+w),0>k&&(k=2*Math.PI+k),n&&w>k&&(w-=2*Math.PI),!n&&k>w&&(k-=2*Math.PI)}var A=k-w;if(Math.abs(A)>l){var C=k,N=i,q=c;k=w+l*(n&&k>w?1:-1),i=v+r*Math.cos(k),c=x+a*Math.sin(k),f=M(i,c,r,a,s,0,n,N,q,[k,C,v,x])}A=k-w;var P=Math.cos(w),F=Math.sin(w),E=Math.cos(k),S=Math.sin(k),G=Math.tan(A/4),D=4/3*r*G,L=4/3*a*G,T=[t,e],V=[t+D*F,e-L*P],R=[i+D*S,c-L*E],U=[i,c];if(V[0]=2*T[0]-V[0],V[1]=2*T[1]-V[1],h)return[V,R,U].concat(f);f=[V,R,U].concat(f).join().split(",");for(var z=[],O=0,j=f.length;j>O;O++)z[O]=O%2?m(f[O-1],f[O],p).y:m(f[O],f[O+1],p).x;return z},b=function(t,e){for(var r=d(t),a=e&&d(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},n=(function(t,e,r){var a,s;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(M.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==r||"S"==r?(a=2*e.x-e.bx,s=2*e.y-e.by):(a=e.x,s=e.y),t=["C",a,s].concat(t.slice(1));break;case"T":"Q"==r||"T"==r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(g(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(g(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(_(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(_(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(_(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(_(e.x,e.y,e.X,e.Y))}return t}),i=function(t,e){if(t[e].length>7){t[e].shift();for(var s=t[e];s.length;)h[e]="A",a&&(u[e]="A"),t.splice(e++,0,["C"].concat(s.splice(0,6)));t.splice(e,1),m=Math.max(r.length,a&&a.length||0)}},c=function(t,e,s,o,n){t&&e&&"M"==t[n][0]&&"M"!=e[n][0]&&(e.splice(n,0,["M",o.x,o.y]),s.bx=0,s.by=0,s.x=t[n][1],s.y=t[n][2],m=Math.max(r.length,a&&a.length||0))},h=[],u=[],l="",p="",f=0,m=Math.max(r.length,a&&a.length||0);m>f;f++){r[f]&&(l=r[f][0]),"C"!=l&&(h[f]=l,f&&(p=h[f-1])),r[f]=n(r[f],s,p),"A"!=h[f]&&"C"==l&&(h[f]="C"),i(r,f),a&&(a[f]&&(l=a[f][0]),"C"!=l&&(u[f]=l,f&&(p=u[f-1])),a[f]=n(a[f],o,p),"A"!=u[f]&&"C"==l&&(u[f]="C"),i(a,f)),c(r,a,s,o,f),c(a,r,o,s,f);var y=r[f],I=a&&a[f],b=y.length,v=a&&I.length;s.x=y[b-2],s.y=y[b-1],s.bx=parseFloat(y[b-4])||s.x,s.by=parseFloat(y[b-3])||s.y,o.bx=a&&(parseFloat(I[v-4])||o.x),o.by=a&&(parseFloat(I[v-3])||o.y),o.x=a&&I[v-2],o.y=a&&I[v-1]}return a?[r,a]:r},v=function(t,e,r,a){return null==t&&(t=e=r=a=0),null==e&&(e=t.y,r=t.width,a=t.height,t=t.x),{x:t,y:e,w:r,h:a,cx:t+r/2,cy:e+a/2}},x=function(t,e,r,a,s,o,n,i){for(var c,h,u,l,p,f,m,y,I=[],d=[[],[]],_=0;2>_;++_)if(0==_?(h=6*t-12*r+6*s,c=-3*t+9*r-9*s+3*n,u=3*r-3*t):(h=6*e-12*a+6*o,c=-3*e+9*a-9*o+3*i,u=3*a-3*e),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;l=-u/h,l>0&&1>l&&I.push(l)}else m=h*h-4*u*c,y=Math.sqrt(m),0>m||(p=(-h+y)/(2*c),p>0&&1>p&&I.push(p),f=(-h-y)/(2*c),f>0&&1>f&&I.push(f));for(var g,M=I.length,b=M;M--;)l=I[M],g=1-l,d[0][M]=g*g*g*t+3*g*g*l*r+3*g*l*l*s+l*l*l*n,d[1][M]=g*g*g*e+3*g*g*l*a+3*g*l*l*o+l*l*l*i;return d[0][b]=t,d[1][b]=e,d[0][b+1]=n,d[1][b+1]=i,d[0].length=d[1].length=b+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},w=function(t){for(var e,r=0,a=0,s=[],o=[],n=0,i=t.length;i>n;n++)if(e=t[n],"M"==e[0])r=e[1],a=e[2],s.push(r),o.push(a);else{var c=x(r,a,e[1],e[2],e[3],e[4],e[5],e[6]);s=s.concat(c.min.x,c.max.x),o=o.concat(c.min.y,c.max.y),r=e[5],a=e[6]}var h=Math.min.apply(0,s),u=Math.min.apply(0,o),l=Math.max.apply(0,s),p=Math.max.apply(0,o),f=v(h,u,l-h,p-u);return f},k=/,?([a-z]),?/gi,A=function(t){return t.join(",").replace(k,"$1")},C={hs:1,rg:1},N="hasOwnProperty",q=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,P=new RegExp("["+l+"]*,["+l+"]*"),F=function(t){var e=Math.round;return"rgba("+[e(t.r),e(t.g),e(t.b),+t.opacity.toFixed(2)]+")"},E=function(t){var e=window.document.getElementsByTagName("head")[0]||window.document.getElementsByTagName("svg")[0],r="rgb(255, 0, 0)";return(E=function(t){if("red"==t.toLowerCase())return r;e.style.color=r,e.style.color=t;var a=window.document.defaultView.getComputedStyle(e,"").getPropertyValue("color");return a==r?null:a})(t)},S=function(t,e,r,a){t=Math.round(255*t),e=Math.round(255*e),r=Math.round(255*r);var s={r:t,g:e,b:r,opacity:isFinite(a)?a:1};return s},G=function(t,e,r,a){typeof t==typeof{}&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,e=t.s,t=t.h,a=t.o),t*=360;var s,o,n,i,c;return t=t%360/60,c=r*e,i=c*(1-Math.abs(t%2-1)),s=o=n=r-c,t=~~t,s+=[c,i,0,0,i,c][t],o+=[i,c,c,i,0,0][t],n+=[0,0,i,c,c,i][t],S(s,o,n,a)},D=function(t,e,r,a){typeof t==typeof{}&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,e=t.s,t=t.h),(t>1||e>1||r>1)&&(t/=360,e/=100,r/=100),t*=360;var s,o,n,i,c;return t=t%360/60,c=2*e*(.5>r?r:1-r),i=c*(1-Math.abs(t%2-1)),s=o=n=r-c/2,t=~~t,s+=[c,i,0,0,i,c][t],o+=[i,c,c,i,0,0][t],n+=[0,0,i,c,c,i][t],S(s,o,n,a)},L=function(t){if(!t||(t=String(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,opacity:-1,error:1};if("none"==t)return{r:-1,g:-1,b:-1,opacity:-1};if(!(C[N](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=E(t)),!t)return{r:-1,g:-1,b:-1,opacity:-1,error:1};var e,r,a,s,o,n,i=t.match(q);return i?(i[2]&&(a=parseInt(i[2].substring(5),16),r=parseInt(i[2].substring(3,5),16),e=parseInt(i[2].substring(1,3),16)),i[3]&&(a=parseInt((o=i[3].charAt(3))+o,16),r=parseInt((o=i[3].charAt(2))+o,16),e=parseInt((o=i[3].charAt(1))+o,16)),i[4]&&(n=i[4].split(P),e=parseFloat(n[0]),"%"==n[0].slice(-1)&&(e*=2.55),r=parseFloat(n[1]),"%"==n[1].slice(-1)&&(r*=2.55),a=parseFloat(n[2]),"%"==n[2].slice(-1)&&(a*=2.55),"rgba"==i[1].toLowerCase().slice(0,4)&&(s=parseFloat(n[3])),n[3]&&"%"==n[3].slice(-1)&&(s/=100)),i[5]?(n=i[5].split(P),e=parseFloat(n[0]),"%"==n[0].slice(-1)&&(e/=100),r=parseFloat(n[1]),"%"==n[1].slice(-1)&&(r/=100),a=parseFloat(n[2]),"%"==n[2].slice(-1)&&(a/=100),("deg"==n[0].slice(-3)||"°"==n[0].slice(-1))&&(e/=360),"hsba"==i[1].toLowerCase().slice(0,4)&&(s=parseFloat(n[3])),n[3]&&"%"==n[3].slice(-1)&&(s/=100),G(e,r,a,s)):i[6]?(n=i[6].split(P),e=parseFloat(n[0]),"%"==n[0].slice(-1)&&(e/=100),r=parseFloat(n[1]),"%"==n[1].slice(-1)&&(r/=100),a=parseFloat(n[2]),"%"==n[2].slice(-1)&&(a/=100),("deg"==n[0].slice(-3)||"°"==n[0].slice(-1))&&(e/=360),"hsla"==i[1].toLowerCase().slice(0,4)&&(s=parseFloat(n[3])),n[3]&&"%"==n[3].slice(-1)&&(s/=100),D(e,r,a,s)):(e=Math.min(Math.round(e),255),r=Math.min(Math.round(r),255),a=Math.min(Math.round(a),255),s=Math.min(Math.max(s,0),1),i={r:e,g:r,b:a},i.opacity=isFinite(s)?s:1,i)):{r:-1,g:-1,b:-1,opacity:-1,error:1}};return i.prototype._init=function(){if("SVG"!==this._svgDoc.nodeName.toUpperCase()&&(this._svgDoc=this._svgDoc.getElementsByTagName("svg")[0]),this._svgDoc){var t,e,r,a,s,o,n,i,c="";for(t=this._svgDoc.childNodes.length-1;t>=0;t--){var h=this._svgDoc.childNodes[t];if("G"===h.nodeName.toUpperCase()&&(r=h.getAttribute("id"))){for(a=[],o=0,n=h.childNodes.length;n>o;o++){var u=h.childNodes[o];switch(s={path:"",attrs:{},style:{}},u.nodeName.toUpperCase()){case"PATH":s.path=u.getAttribute("d");break;case"CIRCLE":var l=1*u.getAttribute("cx"),p=1*u.getAttribute("cy"),f=1*u.getAttribute("r");s.path="M"+(l-f)+","+p+"a"+f+","+f+" 0 1,0 "+2*f+",0a"+f+","+f+" 0 1,0 -"+2*f+",0z";break;case"ELLIPSE":var l=1*u.getAttribute("cx"),p=1*u.getAttribute("cy"),m=1*u.getAttribute("rx"),y=1*u.getAttribute("ry");s.path="M"+(l-m)+","+p+"a"+m+","+y+" 0 1,0 "+2*m+",0a"+m+","+y+" 0 1,0 -"+2*m+",0z";break;case"RECT":var I=1*u.getAttribute("x"),d=1*u.getAttribute("y"),_=1*u.getAttribute("width"),g=1*u.getAttribute("height"),m=1*u.getAttribute("rx"),y=1*u.getAttribute("ry");s.path=m||y?"M"+(I+m)+","+d+"l"+(_-2*m)+",0a"+m+","+y+" 0 0,1 "+m+","+y+"l0,"+(g-2*y)+"a"+m+","+y+" 0 0,1 -"+m+","+y+"l"+(2*m-_)+",0a"+m+","+y+" 0 0,1 -"+m+",-"+y+"l0,"+(2*y-g)+"a"+m+","+y+" 0 0,1 "+m+",-"+y+"z":"M"+I+","+d+"l"+_+",0l0,"+g+"l-"+_+",0z";break;case"POLYGON":for(var M=u.getAttribute("points"),b=M.split(/\s+/),v="",x=0,e=b.length;e>x;x++)v+=(x&&"L"||"M")+b[x];s.path=v+"z";break;case"LINE":var w=1*u.getAttribute("x1"),k=1*u.getAttribute("y1"),A=1*u.getAttribute("x2"),C=1*u.getAttribute("y2");s.path="M"+w+","+k+"L"+A+","+C+"z"}if(""!=s.path){for(var x=0,N=u.attributes.length;N>x;x++){var q=u.attributes[x];if(q.specified){var P=q.name.toLowerCase();switch(P){case"fill":case"fill-opacity":case"opacity":case"stroke":case"stroke-opacity":case"stroke-width":s.attrs[P]=q.value}}}for(var F=0,E=u.style.length;E>F;F++){var S=u.style[F];switch(S){case"fill":case"fill-opacity":case"opacity":case"stroke":case"stroke-opacity":case"stroke-width":s.style[S]=u.style[S]}}a.push(s)}}a.length>0&&(i={id:r,items:a},this._icons[r]=i),this._morphG?this._svgDoc.removeChild(h):(c=r,this._morphG=document.createElementNS("http://www.w3.org/2000/svg","g"),this._svgDoc.replaceChild(this._morphG,h))}}var G=this._curIconId||c;""!==G&&(this._setupAnimation(G),this._updateAnimationProgress(1),this._animationEnd())}},i.prototype._setupAnimation=function(t){if(t&&this._icons[t]){this._toIconId=t,this._startTime=void 0;var a,s;for(this._fromIconItems=n(this._curIconItems),this._toIconItems=n(this._icons[t].items),a=0,s=this._morphNodes.length;s>a;a++){var o=this._morphNodes[a];o.fromIconItemIdx=a,o.toIconItemIdx=a}var i,c=Math.max(this._fromIconItems.length,this._toIconItems.length);for(a=0;c>a;a++)if(this._fromIconItems[a]||(this._toIconItems[a]?(i=w(b(this._toIconItems[a].path)),this._fromIconItems.push({path:"M"+i.cx+","+i.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,i.cx,i.cy]}})):this._fromIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),this._toIconItems[a]||(this._fromIconItems[a]?(i=w(b(this._fromIconItems[a].path)),this._toIconItems.push({path:"M"+i.cx+","+i.cy+"l0,0",attrs:{},style:{},trans:{rotate:[0,i.cx,i.cy]}})):this._toIconItems.push({path:"M0,0l0,0",attrs:{},style:{},trans:{rotate:[0,0,0]}})),!this._morphNodes[a]){var h=document.createElementNS("http://www.w3.org/2000/svg","path");this._morphG.appendChild(h),this._morphNodes.push({node:h,fromIconItemIdx:a,toIconItemIdx:a})}for(a=0;c>a;a++){var u=this._fromIconItems[a],l=this._toIconItems[a],p=b(this._fromIconItems[a].path,this._toIconItems[a].path);u.curve=p[0],l.curve=p[1];var f=r(this._fromIconItems[a].attrs,this._toIconItems[a].attrs);u.attrsNorm=f[0],l.attrsNorm=f[1],u.attrs=e(u.attrsNorm),l.attrs=e(l.attrsNorm);var m=r(this._fromIconItems[a].style,this._toIconItems[a].style);u.styleNorm=m[0],l.styleNorm=m[1],u.style=e(u.styleNorm),l.style=e(l.styleNorm),i=w(l.curve),l.trans={rotate:[0,i.cx,i.cy]};var y,I=this._rotation;switch("random"===I&&(I=Math.random()<.5?"counterclock":"clock"),I){case"none":u.trans.rotate&&(l.trans.rotate[0]=u.trans.rotate[0]);break;case"counterclock":u.trans.rotate?(l.trans.rotate[0]=u.trans.rotate[0]-360,y=-u.trans.rotate[0]%360,l.trans.rotate[0]+=180>y?y:y-360):l.trans.rotate[0]=-360;break;default:u.trans.rotate?(l.trans.rotate[0]=u.trans.rotate[0]+360,y=u.trans.rotate[0]%360,l.trans.rotate[0]+=180>y?-y:360-y):l.trans.rotate[0]=360}}this._curIconItems=n(this._fromIconItems)}},i.prototype._updateAnimationProgress=function(r){r=c[this._easing](r);var n,i,h,u;for(n=0,u=this._curIconItems.length;u>n;n++)this._curIconItems[n].curve=o(this._fromIconItems[n].curve,this._toIconItems[n].curve,r),this._curIconItems[n].path=A(this._curIconItems[n].curve),this._curIconItems[n].attrsNorm=t(this._fromIconItems[n].attrsNorm,this._toIconItems[n].attrsNorm,r),this._curIconItems[n].attrs=e(this._curIconItems[n].attrsNorm),this._curIconItems[n].styleNorm=t(this._fromIconItems[n].styleNorm,this._toIconItems[n].styleNorm,r),this._curIconItems[n].style=e(this._curIconItems[n].styleNorm),this._curIconItems[n].trans=a(this._fromIconItems[n].trans,this._toIconItems[n].trans,r),this._curIconItems[n].transStr=s(this._curIconItems[n].trans);for(n=0,u=this._morphNodes.length;u>n;n++){var l=this._morphNodes[n];l.node.setAttribute("d",this._curIconItems[n].path);var p=this._curIconItems[n].attrs;for(i in p)l.node.setAttribute(i,p[i]);var f=this._curIconItems[n].style;for(h in f)l.node.style[h]=f[h];l.node.setAttribute("transform",this._curIconItems[n].transStr)}},i.prototype._animationEnd=function(){for(var t=this._morphNodes.length-1;t>=0;t--){var e=this._morphNodes[t];this._icons[this._toIconId].items[t]?e.node.setAttribute("d",this._icons[this._toIconId].items[t].path):(e.node.parentNode.removeChild(e.node),this._morphNodes.splice(t,1))}this._curIconId=this._toIconId,this._toIconId="",this._callback()},i.prototype.to=function(t,e,r){if(t!==this._toIconId){if(e&&typeof e!=typeof{})throw new Error('SVGMorpheus.to() > "options" parameter must be an object');if(e=e||{},r&&"function"!=typeof r)throw new Error('SVGMorpheus.to() > "callback" parameter must be a function');u(this._rafid),this._duration=e.duration||this._defDuration,this._easing=e.easing||this._defEasing,this._rotation=e.rotation||this._defRotation,this._callback=r||this._defCallback,this._setupAnimation(t),this._rafid=h(this._fnTick)}},i.prototype.registerEasing=function(t,e){c[t]=e},i})()}]);
//# sourceMappingURL=abl-sdk.vendor.min.js.map