<<<<<<< HEAD
!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,exports,e){t.exports=e(1)},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=e(2),o=n(r),i=e(54),s=n(i),u=e(57),a=n(u),c=e(62),l=n(c),f=e(63),h=n(f),p=e(64),d=(n(p),e(69)),v=n(d),m=e(75),y=n(m),b=(e(76),function(){var t=null,e=null,n=!1,r=!0,i=window.localStorage,u=[];return{setAuthStorage:function(t){i=t},setSocketOpts:function(t){e=t},useSocket:function(t){r=!!t},setEndpoint:function(e){t=e},setFeathersAuth:function(t){n=t},setServices:function(t){u=t},getSettings:function(){return t},$get:["$injector","$rootScope","$timeout","$log","$mdToast","$http",function(u,c,f,p,d,m){var c=u.get("$rootScope"),y=this;if(c.loading=!0,this.loadingTimeout=null,this.loadingTimeout=f(function(){c.loading=!1},1500),c.afterRender=function(t,e){f.cancel(this.loadingTimeout),this.loadingTimeout=f(function(){c.loading=!1},1500)},!t)return{};var b=window.Rx;return this.app=(0,o.default)().configure((0,a.default)(b)).configure(o.default.hooks()).use("cache",(0,s.default)({name:"abl",storage:window.localStorage})),r?(console.log("endpoint",t),this.socket=io(t,e),this.app.configure(o.default.socketio(this.socket))):this.app.configure(o.default.rest(t).jquery(window.jQuery)),(0,h.default)(this.app,d,c),Object.assign(this.app,(0,v.default)(this.app,m)),this.app.getSettings=function(){},n&&(this.app=(0,l.default)(this.app,y,i,c)),this.app}]}}),g=[function(){return b()}],_=[function(){return b()}];angular.module("abl-sdk-feathers",["ngMaterial","rx"]).provider("$abl",_).provider("$feathers",g).directive("capitalize",y.default).directive("formatPhone",[function(){return{require:"ngModel",restrict:"A",link:function(t,e,n,r,o){e.add(phonenumber).on("keyup",function(){var t=e.val().replace(/[^\w\s]/gi,"");if(10===t.length){var n=t.replace(/(.{3})/g,"$1-"),r=n.slice(0,-2)+n.slice(-1);jQuery("#phonenumber").val(r)}})}}}])},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(3),o=n(r),i=e(24),s=n(i),u=e(38),a=n(u),c=e(43),l=n(c),f=e(45),h=n(f),p=e(50),d=n(p);Object.assign(o.default,{socketio:a.default,primus:l.default,rest:s.default,hooks:h.default,authentication:d.default}),exports.default=o.default,t.exports=exports.default},function(t,exports,e){t.exports=e(4)},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){return(0,i.default)(u.default.apply(void 0,arguments))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var o=e(5),i=n(o),s=e(23),u=n(s);r.version="2.0.1",t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return i.default.mixin(u.default,t),t.init(),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var o=e(6),i=n(o),s=e(7),u=n(s);t.exports=exports.default},function(t,exports,e){var n,r,o;!function(e,i){r=[],n=i,o="function"==typeof n?n.apply(exports,r):n,!(void 0!==o&&(t.exports=o))}(this,function(){function t(t,e,n,r){return function(){var o=this._super;this._super="function"==typeof e?e:t[n];var i=r.apply(this,arguments);return this._super=o,i}}function e(e,n){var r,o=n||this,i=/\b_super\b/,s=Object.getPrototypeOf(o)||o.prototype;for(var u in e)r=o[u],("function"==typeof e[u]&&"function"==typeof s[u]||"function"==typeof r&&"function"==typeof e[u])&&i.test(e[u])?o[u]=t(s,r,u,e[u]):o[u]=e[u];return o}function n(e,n){var r=n||this,o=/\b_super\b/,i=Object.getPrototypeOf(r)||r.prototype,s={},u=e,a=function(t){s[t]||(s[t]=Object.getOwnPropertyDescriptor(u,t))};do Object.getOwnPropertyNames(u).forEach(a);while((u=Object.getPrototypeOf(u))&&Object.getPrototypeOf(u));return Object.keys(s).forEach(function(e){var n=s[e];"function"==typeof n.value&&o.test(n.value)&&(n.value=t(i,r[e],e,n.value)),Object.defineProperty(r,e,n)}),r}return{create:function(){var t=Object.create(this),e="string"==typeof t.__init?t.__init:"init";return"function"==typeof t[e]&&t[e].apply(t,arguments),t},mixin:"function"==typeof Object.defineProperty?n:e,extend:function(t,e){return this.mixin(t,Object.create(e||this))},proxy:function(t){var e=this[t],n=Array.prototype.slice.call(arguments,1);return n.unshift(this),e.bind.apply(e,n)}}})},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(8),o=n(r),i=e(12),s=e(6),u=n(s),a=e(16),c=n(a),l=(0,o.default)("feathers:application"),f=["find","get","create","update","patch","remove"],h=u.default.extend({create:null});exports.default={init:function(){Object.assign(this,{methods:f,mixins:(0,c.default)(),services:{},providers:[],_setup:!1})},service:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=(0,i.stripSlashes)(t),!e){var o=this.services[t];return"undefined"==typeof o&&"function"==typeof this.defaultService?this.service(t,this.defaultService(t),r):o}var s=h.extend(e);return l("Registering new service at `"+t+"`"),this.mixins.forEach(function(t){return t.call(n,s)}),"function"==typeof s._setup&&s._setup(this,t),this.providers.forEach(function(e){return e.call(n,t,s,r)}),this._isSetup&&"function"==typeof s.setup&&(l("Setting up service for `"+t+"`"),s.setup(this,t)),this.services[t]=s},use:function(t){var e=void 0,n=Array.from(arguments).slice(1).reduce(function(t,n){if("function"==typeof n)t[e?"after":"before"].push(n);else{if(e)throw new Error("invalid arg passed to app.use");e=n}return t},{before:[],after:[]}),r=function(t){return t.some(function(t){return e&&"function"==typeof e[t]})};return r(["handle","set"])||!r(this.methods.concat("setup"))?this._super.apply(this,arguments):(this.service(t,e,{middleware:n}),this)},setup:function(){var t=this;return Object.keys(this.services).forEach(function(e){var n=t.services[e];l("Setting up service for `"+e+"`"),"function"==typeof n.setup&&n.setup(t,e)}),this._isSetup=!0,this},configure:function(t){return t.call(this),this},listen:function(){var t=this._super.apply(this,arguments);return this.setup(t),l("Feathers application listening"),t}},t.exports=exports.default},function(t,exports,e){(function(n){function r(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),e){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))}),t.splice(o,0,n)}}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?exports.storage.removeItem("debug"):exports.storage.debug=t}catch(t){}}function u(){var t;try{t=exports.storage.debug}catch(t){}return!t&&"undefined"!=typeof n&&"env"in n&&(t=n.env.DEBUG),t}function a(){try{return window.localStorage}catch(t){}}exports=t.exports=e(10),exports.log=i,exports.formatArgs=o,exports.save=s,exports.load=u,exports.useColors=r,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},exports.enable(u())}).call(exports,e(9))},function(t,exports){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===e||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function i(){d&&h&&(d=!1,h.length?p=h.concat(p):v=-1,p.length&&s())}function s(){if(!d){var t=r(i);d=!0;for(var e=p.length;e;){for(h=p,p=[];++v<e;)h&&h[v].run();v=-1,e=p.length}h=null,d=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function a(){}var c,l,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:e}catch(t){c=e}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(t){l=n}}();var h,p=[],d=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||d||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=a,f.addListener=a,f.once=a,f.off=a,f.removeListener=a,f.removeAllListeners=a,f.emit=a,f.prependListener=a,f.prependOnceListener=a,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,exports,e){function n(t){var e,n=0;for(e in t)n=(n<<5)-n+t.charCodeAt(e),n|=0;return exports.colors[Math.abs(n)%exports.colors.length]}function r(t){function e(){if(e.enabled){var t=e,n=+new Date,r=n-(a||n);t.diff=r,t.prev=a,t.curr=n,a=n;for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];o[0]=exports.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;s++;var r=exports.formatters[n];if("function"==typeof r){var i=o[s];e=r.call(t,i),o.splice(s,1),s--}return e}),exports.formatArgs.call(t,o);var u=e.log||exports.log||console.log.bind(console);u.apply(t,o)}}return e.namespace=t,e.enabled=exports.enabled(t),e.useColors=exports.useColors(),e.color=n(t),"function"==typeof exports.init&&exports.init(e),e}function o(t){exports.save(t),exports.names=[],exports.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),n=e.length,r=0;r<n;r++)e[r]&&(t=e[r].replace(/\*/g,".*?"),"-"===t[0]?exports.skips.push(new RegExp("^"+t.substr(1)+"$")):exports.names.push(new RegExp("^"+t+"$")))}function i(){exports.enable("")}function s(t){var e,n;for(e=0,n=exports.skips.length;e<n;e++)if(exports.skips[e].test(t))return!1;for(e=0,n=exports.names.length;e<n;e++)if(exports.names[e].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}exports=t.exports=r.debug=r.default=r,exports.coerce=u,exports.disable=i,exports.enable=o,exports.enabled=s,exports.humanize=e(11),exports.names=[],exports.skips=[],exports.formatters={};var a},function(t,exports){function e(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function n(t){return t>=a?Math.round(t/a)+"d":t>=u?Math.round(t/u)+"h":t>=s?Math.round(t/s)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function r(t){return o(t,a,"day")||o(t,u,"hour")||o(t,s,"minute")||o(t,i,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var i=1e3,s=60*i,u=60*s,a=24*u,c=365.25*a;t.exports=function(t,o){o=o||{};var i=typeof t;if("string"===i&&t.length>0)return e(t);if("number"===i&&isNaN(t)===!1)return o.long?r(t):n(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(13),o=n(r),i=e(14),s=e(15),u=n(s);exports.default={_:i._,getArguments:o.default,stripSlashes:i.stripSlashes,hooks:u.default,matcher:i.matcher,sorter:i.sorter,select:i.select,makeUrl:i.makeUrl,each:i.each,some:i.some,every:i.every,keys:i.keys,values:i.values,isMatch:i.isMatch,isEmpty:i.isEmpty,isObject:i.isObject,extend:i.extend,omit:i.omit,pick:i.pick,merge:i.merge},t.exports=exports.default},function(t,exports){"use strict";function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function n(t,e){return a[t](e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var r=exports.noop=function(){},o=function(t){var e=t[t.length-1];return"function"==typeof e?e:r},i=function(t,n){return"object"===e(t[n])?t[n]:{}},s=function(t){return function(n){var r=n[0],s=n[1],u=o(n),a=i(n,2);if("function"==typeof r)throw new Error("First parameter for '"+t+"' can not be a function");if("object"!==("undefined"==typeof s?"undefined":e(s)))throw new Error("No data provided for '"+t+"'");if(n.length>4)throw new Error("Too many arguments for '"+t+"' service method");return[r,s,a,u]}},u=function(t){return function(e){var n=e[0],r=i(e,1),s=o(e);if(e.length>3)throw new Error("Too many arguments for '"+t+"' service method");if("function"==typeof n)throw new Error("First parameter for '"+t+"' can not be a function");return[n,r,s]}},a=exports.converters={find:function(t){var e=o(t),n=i(t,0);if(t.length>2)throw new Error("Too many arguments for 'find' service method");return[n,e]},create:function(t){var n=t[0],r=i(t,1),s=o(t);if("object"!==("undefined"==typeof n?"undefined":e(n)))throw new Error("First parameter for 'create' must be an object");if(t.length>3)throw new Error("Too many arguments for 'create' service method");return[n,r,s]},update:s("update"),patch:s("patch"),get:u("get"),remove:u("remove")}},function(t,exports,e){(function(t){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){return t.replace(/^(\/*)|(\/*)$/g,"")}function i(t,e){t&&"function"==typeof t.forEach?t.forEach(e):h(t)&&Object.keys(t).forEach(function(n){return e(t[n],n)})}function s(t,e){return Object.keys(t).map(function(e){return[t[e],e]}).some(function(t){return e.apply(void 0,r(t))})}function u(t,e){return Object.keys(t).map(function(e){return[t[e],e]}).every(function(t){return e.apply(void 0,r(t))})}function a(t){return Object.keys(t)}function c(t){return x.keys(t).map(function(e){return t[e]})}function l(t,e){return x.keys(e).every(function(n){return t[n]===e[n]})}function f(t){return 0===x.keys(t).length}function h(t){return"object"===("undefined"==typeof t?"undefined":n(t))&&!Array.isArray(t)&&null!==t}function p(){return w.apply(void 0,arguments)}function d(t){for(var e=x.extend({},t),n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach(function(t){return delete e[t]}),e}function v(t){for(var e={},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach(function(n){e[n]=t[n]}),e}function m(t,n){return h(t)&&h(n)&&Object.keys(n).forEach(function(r){h(n[r])?(t[r]||w(t,e({},r,{})),m(t[r],n[r])):w(t,e({},r,n[r]))}),t}function y(t){for(var e=t&&t.query&&t.query.$select,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];Array.isArray(e)&&o.length&&e.push.apply(e,o);var s=function(t){return Array.isArray(e)?x.pick.apply(x,[t].concat(r(e))):t};return function(t){return Array.isArray(t)?t.map(s):s(t)}}function b(t){var e=x.omit(t,"$limit","$skip","$sort","$select");return function(t){return!(!e.$or||!x.some(e.$or,function(e){return b(e)(t)}))||x.every(e,function(r,o){return null!==r&&"object"===("undefined"==typeof r?"undefined":n(r))?x.every(r,function(e,n){if(E[n]){var r=E[n](o,e);return r(t)}return!1}):"undefined"!=typeof t[o]&&t[o]===e[o]})}}function g(t){return function(e,n){var r=0;return i(t,function(t,o){t=parseInt(t,10),e[o]<n[o]&&(r-=1*t),e[o]>n[o]&&(r+=1*t)}),r}}function _(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r="function"==typeof n.get?n.get.bind(n):function(){},i=r("env")||t.env.NODE_ENV,s=r("host")||t.env.HOST_NAME||"localhost",u="development"===i||"test"===i||void 0===i?"http":"https",a=r("port")||t.env.PORT||3030,c="development"===i||"test"===i||void 0===i?":"+a:"";return e=e||"",u+"://"+s+c+"/"+o(e)}var w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.stripSlashes=o,exports.each=i,exports.some=s,exports.every=u,exports.keys=a,exports.values=c,exports.isMatch=l,exports.isEmpty=f,exports.isObject=h,exports.extend=p,exports.omit=d,exports.pick=v,exports.merge=m,exports.select=y,exports.matcher=b,exports.sorter=g,exports.makeUrl=_;var x=exports._={each:i,some:s,every:u,keys:a,values:c,isMatch:l,isEmpty:f,isObject:h,extend:p,omit:d,pick:v,merge:m},E=exports.specialFilters={$in:function(t,e){return function(n){return e.indexOf(n[t])!==-1}},$nin:function(t,e){return function(n){return e.indexOf(n[t])===-1}},$lt:function(t,e){return function(n){return n[t]<e}},$lte:function(t,e){return function(n){return n[t]<=e}},$gt:function(t,e){return function(n){return n[t]>e}},$gte:function(t,e){return function(n){return n[t]>=e}},$ne:function(t,e){return function(n){return n[t]!==e}}}}).call(exports,e(9))},function(t,exports,e){"use strict";function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function r(t){return{id:t[0],params:t[1],callback:t[2]}}function o(t){return{id:t[0],data:t[1],params:t[2],callback:t[3]}}function i(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=f[t](n);return o.method=t,o.type=e,"function"==typeof r?o.app=r:c(o,r),o}function s(t){var e=[];return"undefined"!=typeof t.id&&e.push(t.id),t.data&&e.push(t.data),e.push(t.params||{}),e.push(t.callback),e}function u(t){return"find"===t.method?[t.params,t.callback]:"get"===t.method||"remove"===t.method?[t.id,t.params,t.callback]:"update"===t.method||"patch"===t.method?[t.id,t.data,t.params,t.callback]:"create"===t.method?[t.data,t.params,t.callback]:s(t)}function a(t){var e={};return Array.isArray(t)?e={all:t}:"object"!==("undefined"==typeof t?"undefined":n(t))?e={all:[t]}:(0,l.each)(t,function(t,n){e[n]=Array.isArray(t)?t:[t]}),e}var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(exports,"__esModule",{value:!0});var l=e(14),f={find:function(t){return{params:t[0],callback:t[1]}},create:function(t){return{data:t[0],params:t[1],callback:t[2]}},get:r,remove:r,update:o,patch:o};exports.default={hookObject:i,hook:i,converters:f,defaultMakeArguments:s,makeArguments:u,convertHookData:a},t.exports=exports.default},function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=[e(17),e(18),e(22)];return t.push=function(){var t=[this.length-1,0].concat(Array.from(arguments));return this.splice.apply(this,t),this.length},t},t.exports=exports.default},function(t,exports){"use strict";function e(t){return"undefined"!=typeof t&&"function"==typeof t.then}function n(){var t=this._super.apply(this,arguments),n=arguments[arguments.length-1];return"function"==typeof n&&e(t)&&t.then(function(t){return n(null,t)},function(t){return n(t)}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var e=this;"function"==typeof t.mixin&&!function(){var r={};e.methods.forEach(function(e){"function"==typeof t[e]&&(r[e]=n)}),t.mixin(r)}()},t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.charAt(0).toUpperCase()+t.substring(1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var e=this,n="function"==typeof t.on&&"function"==typeof t.emit,o=t._rubberDuck=i.default.emitter(t);"function"!=typeof t.mixin||n||t.mixin(s.EventEmitter.prototype),t._serviceEvents=Array.isArray(t.events)?t.events.slice():[],o.on("error",function(e){t.emit("serviceError",e[0])}),Object.keys(c).forEach(function(n){var i=c[n],s=t._serviceEvents.indexOf(i)!==-1;if("function"==typeof t[n]&&!s){var u="after"+r(n);t._serviceEvents.push(i),o.punch(n,-1),o.on(u,function(r,o){r[0]?t.emit("serviceError",r[0]):!function(){var s=a(n,"after",o),u=Array.isArray(r[1])?r[1]:[r[1]];s.app=e,u.forEach(function(e){return t.emit(i,e,s)})}()})}})};var o=e(19),i=n(o),s=e(20),u=e(12),a=u.hooks.hookObject,c={create:"created",update:"updated",remove:"removed",patch:"patched"};t.exports=exports.default},function(module,exports,__webpack_require__){var events=__webpack_require__(20),utils=__webpack_require__(21),wrap=exports.wrap={fn:function(emitter,fn,strict,name,scope){var wrapped=function(){var t;utils.emitEvents(emitter,"before",name,[arguments,this,name]);try{t=fn.apply(scope||this,arguments)}catch(t){throw utils.emitEvents(emitter,"error",name,[t,arguments,this,name]),t}return utils.emitEvents(emitter,"after",name,[t,arguments,this,name]),t};return strict&&eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length)),wrapped},async:function(emitter,fn,position,strict,name,scope){var wrapped=function(){var t=position==-1?arguments.length-1:position||0,e=arguments[t],n=this,r=arguments,o=function(){try{e.apply(n,arguments)}catch(t){throw utils.emitEvents(emitter,"error",name,[t,r,n,name]),t}var t=arguments[0]instanceof Error?"error":"after";utils.emitEvents(emitter,t,name,[arguments,r,n,name])};utils.emitEvents(emitter,"before",name,[r,this,name]),r[t]=o;try{return fn.apply(scope||this,r)}catch(t){throw utils.emitEvents(emitter,"error",name,[t,r,n,name]),t}};return strict&&eval("wrapped = "+utils.addArgs(wrapped.toString(),fn.length)),wrapped}},Emitter=exports.Emitter=function(t){this.obj=t};Emitter.prototype=Object.create(events.EventEmitter.prototype),Emitter.prototype.punch=function(t,e,n){if(Array.isArray(t)){var r=this;t.forEach(function(t){r.punch(t,e,n)})}else{var o=this.obj[t];"function"==typeof o&&(this.obj[t]=e||0===e?wrap.async(this,o,e,n,t):wrap.fn(this,o,n,t))}return this},exports.emitter=function(t){return new Emitter(t)}},function(t,exports){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,r,s,u,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(r=this._events[t],i(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(o(r))for(u=Array.prototype.slice.call(arguments,1),c=r.slice(),s=c.length,a=0;a<s;a++)c[a].apply(this,u);return!0},e.prototype.addListener=function(t,r){var s;if(!n(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(r.listener)?r.listener:r),this._events[t]?o(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,o(this._events[t])&&!this._events[t].warned&&(s=i(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function r(){this.removeListener(t,r),o||(o=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var o=!1;return r.listener=e,this.on(t,r),this},e.prototype.removeListener=function(t,e){var r,i,s,u;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(u=s;u-- >0;)if(r[u]===e||r[u].listener&&r[u].listener===e){i=u;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},e.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,exports){exports.toBase26=function(t){for(var e="",n="abcdefghijklmnopqrstuvwxyz";t>25;){var r=t%26;e=n.charAt(r)+e,t=Math.floor(t/26)-1}return e=n.charAt(t)+e},exports.makeFakeArgs=function(t){for(var e=[],n=0;n<t;n++)e.push(exports.toBase26(n));return e.join(",")},exports.addArgs=function(t,e){return t.replace(/function\s*\(\)/,"function("+exports.makeFakeArgs(e)+")")},exports.emitEvents=function(t,e,n,r){var o=n?n.replace(/^\w/,function(t){return t.toUpperCase()}):null;t.emit.apply(t,[e].concat(r)),o&&t.emit.apply(t,[e+o].concat(r))}},function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var e=this;"function"==typeof t.mixin&&!function(){var r={};e.methods.forEach(function(e){"function"==typeof t[e]&&(r[e]=function(){return this._super.apply(this,(0,n.getArguments)(e,arguments))})}),t.mixin(r)}()};var n=e(12);t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t={settings:{},get:function(t){return this.settings[t]},set:function(t,e){return this.settings[t]=e,this},disable:function(t){return this.settings[t]=!1,this},disabled:function(t){return!this.settings[t]},enable:function(t){return this.settings[t]=!0,this},enabled:function(t){return!!this.settings[t]},use:function(){throw new Error("Middleware functions can not be used in the Feathers client")},listen:function(){return{}}};return i.default.mixin(r.EventEmitter.prototype,t),t};var r=e(20),o=e(6),i=n(o);t.exports=exports.default},function(t,exports,e){t.exports=e(25)},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={};return Object.keys(p).forEach(function(n){var r=p[n];e[n]=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error(n+" has to be provided to feathers-rest");var i=function(n){return new r({base:t,name:n,connection:e,options:o})},s=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.rest=e,this.defaultService=i};return s.Service=r,s.service=i,s}}),e};var r=e(26),o=n(r),i=e(34),s=n(i),u=e(35),a=n(u),c=e(36),l=n(c),f=e(37),h=n(f),p={jquery:o.default,superagent:s.default,request:a.default,fetch:l.default,axios:h.default};t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=e(27),c=n(a),l=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"request",value:function(t){var e=this,n=s({dataType:t.type||"json"},{headers:this.options.headers||{}},t);return t.body&&(n.data=JSON.stringify(t.body),n.contentType="application/json"),delete n.type,delete n.body,new Promise(function(t,r){e.connection.ajax(n).then(t,function(t){var e=t.responseText;try{e=JSON.parse(e)}catch(n){e=new Error(t.responseText)}e.xhr=e.response=t,r(e)})})}}]),e}(c.default);exports.default=l,t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){throw(0,l.convert)(t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),
e}}(),u=e(28),a=n(u),c=e(12),l=e(33),f=function(){function t(e){r(this,t),this.name=(0,c.stripSlashes)(e.name),this.options=e.options,this.connection=e.connection,this.base=e.base+"/"+this.name}return s(t,[{key:"makeUrl",value:function(t,e){t=t||{};var n=this.base;if("undefined"!=typeof e&&null!==e&&(n+="/"+e),0!==Object.keys(t).length){var r=a.default.stringify(t);n+="?"+r}return n}},{key:"find",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request({url:this.makeUrl(t.query),method:"GET",headers:i({},t.headers)}).catch(o)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"undefined"==typeof t?Promise.reject(new Error("id for 'get' can not be undefined")):this.request({url:this.makeUrl(e.query,t),method:"GET",headers:i({},e.headers)}).catch(o)}},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request({url:this.makeUrl(e.query),body:t,method:"POST",headers:i({"Content-Type":"application/json"},e.headers)}).catch(o)}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"undefined"==typeof t?Promise.reject(new Error("id for 'update' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(n.query,t),body:e,method:"PUT",headers:i({"Content-Type":"application/json"},n.headers)}).catch(o)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"undefined"==typeof t?Promise.reject(new Error("id for 'patch' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(n.query,t),body:e,method:"PATCH",headers:i({"Content-Type":"application/json"},n.headers)}).catch(o)}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"undefined"==typeof t?Promise.reject(new Error("id for 'remove' can not be undefined, only 'null' when removing multiple entries")):this.request({url:this.makeUrl(e.query,t),method:"DELETE",headers:i({},e.headers)}).catch(o)}}]),t}();exports.default=f,t.exports=exports.default},function(t,exports,e){"use strict";var n=e(29),r=e(32),o=e(31);t.exports={formats:o,parse:r,stringify:n}},function(t,exports,e){"use strict";var n=e(30),r=e(31),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},i=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(t){return i.call(t)},skipNulls:!1,strictNullHandling:!1},u=function t(e,r,o,i,s,u,a,c,l,f,h,p){var d=e;if("function"==typeof a)d=a(r,d);else if(d instanceof Date)d=f(d);else if(null===d){if(i)return u&&!p?u(r):r;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||n.isBuffer(d)){if(u){var v=p?r:u(r);return[h(v)+"="+h(u(d))]}return[h(r)+"="+h(String(d))]}var m=[];if("undefined"==typeof d)return m;var y;if(Array.isArray(a))y=a;else{var b=Object.keys(d);y=c?b.sort(c):b}for(var g=0;g<y.length;++g){var _=y[g];s&&null===d[_]||(m=Array.isArray(d)?m.concat(t(d[_],o(r,_),o,i,s,u,a,c,l,f,h,p)):m.concat(t(d[_],r+(l?"."+_:"["+_+"]"),o,i,s,u,a,c,l,f,h,p)))}return m};t.exports=function(t,e){var n=t,i=e||{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var a="undefined"==typeof i.delimiter?s.delimiter:i.delimiter,c="boolean"==typeof i.strictNullHandling?i.strictNullHandling:s.strictNullHandling,l="boolean"==typeof i.skipNulls?i.skipNulls:s.skipNulls,f="boolean"==typeof i.encode?i.encode:s.encode,h="function"==typeof i.encoder?i.encoder:s.encoder,p="function"==typeof i.sort?i.sort:null,d="undefined"!=typeof i.allowDots&&i.allowDots,v="function"==typeof i.serializeDate?i.serializeDate:s.serializeDate,m="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:s.encodeValuesOnly;if("undefined"==typeof i.format)i.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,i.format))throw new TypeError("Unknown format option provided.");var y,b,g=r.formatters[i.format];"function"==typeof i.filter?(b=i.filter,n=b("",n)):Array.isArray(i.filter)&&(b=i.filter,y=b);var _=[];if("object"!=typeof n||null===n)return"";var w;w=i.arrayFormat in o?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var x=o[w];y||(y=Object.keys(n)),p&&y.sort(p);for(var E=0;E<y.length;++E){var C=y[E];l&&null===n[C]||(_=_.concat(u(n[C],C,x,c,l,f?h:null,b,p,d,v,g,m)))}return _.join(a)}},function(t,exports){"use strict";var e=Object.prototype.hasOwnProperty,n=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();exports.arrayToObject=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)"undefined"!=typeof t[r]&&(n[r]=t[r]);return n},exports.merge=function(t,n,r){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(r.plainObjects||r.allowPrototypes||!e.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var o=t;return Array.isArray(t)&&!Array.isArray(n)&&(o=exports.arrayToObject(t,r)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,o){e.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=exports.merge(t[o],n,r):t.push(n):t[o]=n}),t):Object.keys(n).reduce(function(t,e){var o=n[e];return Object.prototype.hasOwnProperty.call(t,e)?t[e]=exports.merge(t[e],o,r):t[e]=o,t},o)},exports.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},exports.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",o=0;o<e.length;++o){var i=e.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=e.charAt(o):i<128?r+=n[i]:i<2048?r+=n[192|i>>6]+n[128|63&i]:i<55296||i>=57344?r+=n[224|i>>12]+n[128|i>>6&63]+n[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(o)),r+=n[240|i>>18]+n[128|i>>12&63]+n[128|i>>6&63]+n[128|63&i])}return r},exports.compact=function(t,e){if("object"!=typeof t||null===t)return t;var n=e||[],r=n.indexOf(t);if(r!==-1)return n[r];if(n.push(t),Array.isArray(t)){for(var o=[],i=0;i<t.length;++i)t[i]&&"object"==typeof t[i]?o.push(exports.compact(t[i],n)):"undefined"!=typeof t[i]&&o.push(t[i]);return o}var s=Object.keys(t);return s.forEach(function(e){t[e]=exports.compact(t[e],n)}),t},exports.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},exports.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},function(t,exports){"use strict";var e=String.prototype.replace,n=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return e.call(t,n,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(t,exports,e){"use strict";var n=e(30),r=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(t,e){for(var n={},o=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),i=0;i<o.length;++i){var s,u,a=o[i],c=a.indexOf("]=")===-1?a.indexOf("="):a.indexOf("]=")+1;c===-1?(s=e.decoder(a),u=e.strictNullHandling?null:""):(s=e.decoder(a.slice(0,c)),u=e.decoder(a.slice(c+1))),r.call(n,s)?n[s]=[].concat(n[s]).concat(u):n[s]=u}return n},s=function(t,e,n){if(!t.length)return e;var r,o=t.shift();if("[]"===o)r=[],r=r.concat(s(t,e,n));else{r=n.plainObjects?Object.create(null):{};var i="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,u=parseInt(i,10);!isNaN(u)&&o!==i&&String(u)===i&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(r=[],r[u]=s(t,e,n)):r[i]=s(t,e,n)}return r},u=function(t,e,n){if(t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,a=i.exec(o),c=a?o.slice(0,a.index):o,l=[];if(c){if(!n.plainObjects&&r.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var f=0;null!==(a=u.exec(o))&&f<n.depth;){if(f+=1,!n.plainObjects&&r.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+o.slice(a.index)+"]"),s(l,e,n)}};t.exports=function(t,e){var r=e||{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"==typeof r.depth?r.depth:o.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder="function"==typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===t||null===t||"undefined"==typeof t)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof t?i(t,r):t,a=r.plainObjects?Object.create(null):{},c=Object.keys(s),l=0;l<c.length;++l){var f=c[l],h=u(f,s[f],r);a=n.merge(a,h,r)}return n.compact(a)}},function(t,exports,e){"use strict";function n(t,e,n,r,o){t=t||"Error";var i=void 0,s=void 0,u=void 0;t instanceof Error?(s=t.message||"Error",t.errors&&(i=t.errors)):"object"===("undefined"==typeof t?"undefined":w(t))?(s=t.message||"Error",o=t):s=t,Error.call(this,s),o&&(u=JSON.parse(JSON.stringify(o)),u.errors?(i=u.errors,delete u.errors):o.errors&&(i=JSON.parse(JSON.stringify(o.errors)))),this.type="FeathersError",this.name=e,this.message=s,this.code=n,this.className=r,this.data=u,this.errors=i||{},x(this.name+"("+this.code+"): "+this.message),x(this.errors)}function r(t,e){n.call(this,t,"BadRequest",400,"bad-request",e)}function o(t,e){n.call(this,t,"NotAuthenticated",401,"not-authenticated",e)}function i(t,e){n.call(this,t,"PaymentError",402,"payment-error",e)}function s(t,e){n.call(this,t,"Forbidden",403,"forbidden",e)}function u(t,e){n.call(this,t,"NotFound",404,"not-found",e)}function a(t,e){n.call(this,t,"MethodNotAllowed",405,"method-not-allowed",e)}function c(t,e){n.call(this,t,"NotAcceptable",406,"not-acceptable",e)}function l(t,e){n.call(this,t,"Timeout",408,"timeout",e)}function f(t,e){n.call(this,t,"Conflict",409,"conflict",e)}function h(t,e){n.call(this,t,"LengthRequired",411,"length-required",e)}function p(t,e){n.call(this,t,"Unprocessable",422,"unprocessable",e)}function d(t,e){n.call(this,t,"TooManyRequests",429,"too-many-requests",e)}function v(t,e){n.call(this,t,"GeneralError",500,"general-error",e)}function m(t,e){n.call(this,t,"NotImplemented",501,"not-implemented",e)}function y(t,e){n.call(this,t,"BadGateway",502,"bad-gateway",e)}function b(t,e){n.call(this,t,"Unavailable",503,"unavailable",e)}function g(t){if(!t)return t;var e=E[t.name],n=e?new e(t.message,t.data):new Error(t.message||t);return"object"===("undefined"==typeof t?"undefined":w(t))&&_(n,t),n}Object.defineProperty(exports,"__esModule",{value:!0});var _=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x=e(8)("feathers-errors");n.prototype=new Error,Object.defineProperty(n.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),r.prototype=new n,o.prototype=new n,i.prototype=new n,s.prototype=new n,u.prototype=new n,a.prototype=new n,c.prototype=new n,l.prototype=new n,f.prototype=new n,h.prototype=new n,p.prototype=new n,d.prototype=new n,v.prototype=new n,m.prototype=new n,y.prototype=new n,b.prototype=new n;var E={FeathersError:n,BadRequest:r,NotAuthenticated:o,PaymentError:i,Forbidden:s,NotFound:u,MethodNotAllowed:a,NotAcceptable:c,Timeout:l,Conflict:f,LengthRequired:h,Unprocessable:p,TooManyRequests:d,GeneralError:v,NotImplemented:m,BadGateway:y,Unavailable:b,400:r,401:o,402:i,403:s,404:u,405:a,406:c,408:l,409:f,411:h,422:p,429:d,500:v,501:m,502:y,503:b};exports.default=_({convert:g,types:E,errors:E},E),t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=e(27),a=n(u),c=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),s(e,[{key:"request",value:function(t){var e=this.connection(t.method,t.url).set(this.options.headers||{}).set("Accept","application/json").set(t.headers||{}).type(t.type||"json");return new Promise(function(n,r){e.set(t.headers),t.body&&e.send(t.body),e.end(function(t,e){if(t){try{var o=t.response;t=JSON.parse(t.response.text),t.response=o}catch(t){}return r(t)}n(e&&e.body)})})}}]),e}(a.default);exports.default=c,t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=e(27),c=n(a),l=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"request",value:function(t){var e=this;return new Promise(function(n,r){e.connection(s({json:!0},t),function(t,e,o){return t?r(t):!t&&e.statusCode>=400?"string"==typeof o?r(new Error(o)):(o.response=e,r(s(new Error(o.message),o))):void n(o)})})}}]),e}(c.default);exports.default=l,t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=e(27),c=n(a),l=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"request",value:function(t){var e=s({},t);e.headers=s({Accept:"application/json"},this.options.headers,e.headers),t.body&&(e.body=JSON.stringify(t.body));var n=this.connection;return n(t.url,e).then(this.checkStatus).then(function(t){return 204===t.status?null:t.json()})}},{key:"checkStatus",value:function(t){return t.ok?t:t.json().then(function(e){throw e.response=t,e})}}]),e}(c.default);exports.default=l,t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=e(27),c=n(a),l=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"request",value:function(t){var e={url:t.url,method:t.method,data:t.body,headers:s({Accept:"application/json"},this.options.headers,t.headers)};return this.connection.request(e).then(function(t){return t.data}).catch(function(t){var e=t.response||t;throw e instanceof Error?e:e.data||e})}}]),e}(c.default);exports.default=l,t.exports=exports.default},function(t,exports,e){t.exports=e(39)},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};exports.default=function(t,e){if(!t)throw new Error("Socket.io connection needs to be provided");var n=function(n){var o=r({},e,{name:n,connection:t,method:"emit"});return new i.default(o)},o=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.io=t,this.defaultService=n};return o.Service=i.default,o.service=n,o};var o=e(40),i=n(o);t.exports=exports.default},function(t,exports,e){t.exports=e(41)},function(t,exports,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e(42),i=e(33),s=e(8)("feathers-socket-commons:client"),u=["addListener","emit","listenerCount","listeners","on","once","prependListener","prependOnceListener","removeAllListeners","removeListener"],a=["eventNames","getMaxListeners","setMaxListeners"],c=function(t){a.forEach(function(e){t[e]=function(){var t;if("function"!=typeof this.connection[e])throw new Error("Can not call '"+e+"' on the client service connection.");return(t=this.connection)[e].apply(t,arguments)}}),u.forEach(function(e){t[e]=function(t){var n;if("function"!=typeof this.connection[e])throw new Error("Can not call '"+e+"' on the client service connection.");var r=this.path+" "+t;s("Calling emitter method "+e+" with "+("namespaced event '"+r+"'"));for(var o=arguments.length,i=Array(o>1?o-1:0),u=1;u<o;u++)i[u-1]=arguments[u];var a=(n=this.connection)[e].apply(n,[r].concat(i));return a===this.connection?this:a}})},l=function(){function t(e){n(this,t),this.events=o.events,this.path=e.name,this.connection=e.connection,this.method=e.method,this.timeout=e.timeout||5e3,c(this)}return r(t,[{key:"send",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var u=null;return"function"==typeof r[r.length-1]&&(u=r.pop()),new Promise(function(n,o){var a,c=e.path+"::"+t,l=setTimeout(function(){return o(new Error("Timeout of "+e.timeout+"ms exceeded calling "+c))},e.timeout);r.unshift(c),r.push(function(t,e){return t=(0,i.convert)(t),clearTimeout(l),u&&u(t,e),t?o(t):n(e)}),s("Sending socket."+e.method,r),(a=e.connection)[e.method].apply(a,r)})}},{key:"find",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.send("find",t.query||{})}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("get",t,e.query||{})}},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("create",t,e.query||{})}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.send("update",t,e,n.query||{})}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.send("patch",t,e,n.query||{})}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("remove",t,e.query||{})}},{key:"off",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("function"==typeof this.connection.off){var o;return(o=this.connection).off.apply(o,[this.path+" "+t].concat(n))}return 0===n.length?this.removeAllListeners(t):this.removeListener.apply(this,[t].concat(n))}}]),t}();exports.default=l,t.exports=exports.default},function(t,exports,e){(function(t){"use strict";function n(t){return s.hooks.convertHookData(t)}function r(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return new Promise(function(n,o){t.apply(e,r.concat(function(t,e){return t?o(t):void n(e)}))})}function o(e){var n={};return Object.getOwnPropertyNames(e).forEach(function(t){return n[t]=e[t]}),"production"===t.env.NODE_ENV&&delete n.stack,delete n.hook,n}function i(t){var e=[];return 2===t.length&&Array.isArray(t[0])?(e=t[0],e.push(t[1]),e):t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.events=exports.eventMappings=void 0,exports.convertFilterData=n,exports.promisify=r,exports.normalizeError=o,exports.normalizeArgs=i;var s=e(12),u=exports.eventMappings={create:"created",update:"updated",patch:"patched",remove:"removed"};exports.events=Object.keys(u).map(function(t){return u[t]})}).call(exports,e(9))},function(t,exports,e){t.exports=e(44)},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e){if(!t)throw new Error("Primus connection needs to be provided");var n=function(n){return new o.default(Object.assign({},e,{name:n,connection:t,method:"send"}))},r=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.primus=t,this.defaultService=n};return r.Service=o.default,r.service=n,r};var r=e(40),o=n(r);t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){return"undefined"!=typeof t&&"function"==typeof t.then}function i(t){var e=this,n=e.methods,i={before:t.before,after:t.after},s=(0,h.baseMixin)(n,{before:function(t){return this.hooks({before:t})},after:function(t){return this.hooks({after:t})}});(0,h.addHookTypes)(t),n.forEach(function(n){"function"==typeof t[n]&&(s[n]=function(){var t=this,i=this,s=this._super.bind(this),u={app:e,service:i,get path(){return Object.keys(e.services).find(function(t){return e.services[t]===i})}},a=c.hooks.hookObject(n,"before",arguments,u),l={before:(0,h.getHooks)(e,this,"before",n),after:(0,h.getHooks)(e,this,"after",n,!0),error:(0,h.getHooks)(e,this,"error",n,!0)};return h.processHooks.call(this,l.before,a).then(function(t){return"undefined"!=typeof t.result?Promise.resolve(t):new Promise(function(e,n){var i=c.hooks.makeArguments(t),u=function(r,o){r?n(r):(t.result=o,e(t))};i.splice(i.length-1,1,u);var a=s.apply(void 0,r(i));o(a)&&a.then(function(t){return u(null,t)},u)})}).then(function(t){return Object.assign({},t,{type:"after"})}).then(h.processHooks.bind(this,l.after)).then(function(t){return t.result}).catch(function(e){var n=Object.assign({},e.hook||a,{type:"error",original:e.hook,error:e});return h.processHooks.call(t,l.error,n).then(function(t){return Promise.reject(t.error)})})})}),t.mixin(s),i.before&&t.before(i.before),i.after&&t.after(i.after)}function s(){return function(){var t=this;(0,h.addHookTypes)(t),a.default.mixin((0,h.baseMixin)(t.methods),t),this.mixins.unshift(i)}}Object.defineProperty(exports,"__esModule",{value:!0});var u=e(6),a=n(u),c=e(12),l=e(46),f=e(48),h=e(49);s.removeQuery=f.removeQuery,s.pluckQuery=f.pluckQuery,s.lowerCase=f.lowerCase,s.remove=f.remove,s.pluck=f.pluck,s.disable=f.disable,s.populate=l.populate,s.removeField=f.removeField,exports.default=s,t.exports=exports.default},function(t,exports,e){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e,n,r,o){return Array.isArray(n)?Promise.all(n.map(function(n){return s(t,e,n,r,o+1)})):s(t,e,n,r,o+1)}function s(e,n,r,i,s){var c={},l=t.hrtime();return r._include=[],Promise.all(i.map(function(o){var i=t.hrtime();return u(e,n,r,o,s).then(function(t){var n=o.nameAs||o.service;return c[n]=a(e,i,s),t})})).then(function(t){return e.profile!==!1&&(c.total=a(e,l,s),r._elapsed=c),Object.assign.apply(Object,[r].concat(o(t)))})}function u(t,e,n,o,s){if(!o.service||!o.parentField||!o.childField)throw new f.default.BadRequest("Child schema is missing a required property. (populate)");if(o.permissions&&!t.checkPermissions(e,o.service,o.permissions,s))throw new f.default.BadRequest("Permissions for "+o.service+" do not allow include. (populate)");var u=o.nameAs||o.service;n._include.push(u);var a=Promise.resolve().then(function(){return o.select?o.select(e,n,s):{}}).then(function(t){var i=(0,h.getByDot)(n,o.parentField);if(void 0===i)throw new f.default.BadRequest("ParentField "+o.parentField+" for "+u+" depth "+s+" is undefined. (populate)");var a=Object.assign({},o.query,r({},o.childField,Array.isArray(i)?{$in:i}:i),t),c=e.app.service(o.service);if(!c)throw new f.default.BadRequest("Service "+o.service+" is not configured. (populate)");return c.find({query:a,_populate:"skip"})}).then(function(t){return t=t.data||t,1!==t.length||o.asArray||(t=t[0]),t});return o.include&&(a=a.then(function(n){return i(t,e,n,o.include,s)})),a.then(function(t){return r({},u,t)})}function a(e,n,r){if(e.profile===!0){var o=t.hrtime(n);return 1e9*o[0]+o[1]}if(e.profile!==!1)return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.populate=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=e(33),f=n(l),h=e(47),p=e(48);exports.populate=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"string"==typeof t?p.legacyPopulate.apply(void 0,[t].concat(n)):function(e){var n={schema:{},checkPermissions:function(){return!0},profile:!1};return"skip"===e.params._populate?e:Promise.resolve().then(function(){var r=(0,h.getItems)(e),o=Object.assign({},n,t),s=o.schema,u=o.checkPermissions,a="function"==typeof s?s(e,o):s,l=a.permissions||null;if("function"!=typeof u)throw new f.default.BadRequest("Permissions param is not a function. (populate)");if(l&&!u(e,e.path,l,0))throw new f.default.BadRequest("Permissions do not allow this populate. (populate)");if("object"!==("undefined"==typeof a?"undefined":c(a)))throw new f.default.BadRequest("Schema does not resolve to an object. (populate)");return a.include&&Object.keys(a.include).length?i(o,e,r,a.include,0):r}).then(function(t){return(0,h.replaceItems)(e,t),e})}}}).call(exports,e(9))},function(t,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.getByDot=function(t,n){return n.indexOf(".")===-1?t[n]:n.split(".").reduce(function(t,n){return"object"===("undefined"==typeof t?"undefined":e(t))?t[n]:void 0},t)},exports.setByDot=function(t,n,r,o){if(n.indexOf(".")===-1)return t[n]=r,void(void 0===r&&o&&delete t[n]);var i=n.split("."),s=i.length-1;return i.reduce(function(t,n,i){return i!==s?(t.hasOwnProperty(n)&&"object"===e(t[n])||(t[n]={}),t[n]):(t[n]=r,void 0===r&&o&&delete t[n],t)},t)},exports.checkContext=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous";if(e&&t.type!==e)throw new Error("The '"+r+"' hook can only be used as a '"+e+"' hook.");if(n){var o=Array.isArray(n)?n:[n];if(o.length>0&&o.indexOf(t.method)===-1){var i=JSON.stringify(o);throw new Error("The '"+r+"' hook can only be used on the '"+i+"' service method(s).")}}},exports.getItems=function(t){var e="before"===t.type?t.data:t.result;return e&&"find"===t.method?e.data||e:e},exports.replaceItems=function(t,e){"before"===t.type?t.data=e:"find"===t.method&&t.result&&t.result.data?Array.isArray(e)?(t.result.data=e,t.result.total=e.length):(t.result.data=[e],t.result.total=1):t.result=e}},function(t,exports,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){var n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,a=(0,c.getByDot)(t,u);if(void 0!==a){if("string"!=typeof a&&null!==a)throw new l.BadRequest("Expected string data. (lowercase "+u+")");(0,c.setByDot)(t,u,a?a.toLowerCase():a)}}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return();
}finally{if(r)throw o}}},o=function(){return!0};return"function"==typeof e[e.length-1]&&(o=e.pop(),console.error("DEPRECATED Predicate func will be removed next version. (lowerCase)")),function(t){var e="before"===t.type?t.data:t.result,n=function(n){return e&&n&&("find"===t.method||Array.isArray(e)?(e.data||e).forEach(r):r(e)),t},i=o(t);return i&&"function"==typeof i.then?i.then(n):n(i)}}function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){var n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,a=(0,c.getByDot)(t,u);void 0!==a&&(0,c.setByDot)(t,u,void 0,!0)}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}},o=function(){return!0};return"function"==typeof e[e.length-1]&&(o=e.pop(),console.error("DEPRECATED Predicate func will be removed next version. (removeQuery)")),function(t){if("after"===t.type){var e=t.params.provider||"server";throw new l.GeneralError("Provider '"+e+"' cannot remove query params on after hook. (removeQuery)")}var n=t.params.query,i=function(e){return n&&e&&r(n),t},s=o(t);return s&&"function"==typeof s.then?s.then(i):i(s)}}function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){var n={};return e.forEach(function(e){var r=(0,c.getByDot)(t,e);void 0!==r&&(0,c.setByDot)(n,e,r)}),n},o=function(){return!0};return"function"==typeof e[e.length-1]&&(o=e.pop(),console.error("DEPRECATED Predicate func will be removed next version. (pluckQuery)")),function(t){if("after"===t.type)throw new l.GeneralError("Provider '"+t.params.provider+"' can not pluck query params on after hook. (pluckQuery)");var e=t.params.query,n=function(n){return e&&n&&(t.params.query=r(e)),t},i=o(t);return i&&"function"==typeof i.then?i.then(n):n(i)}}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){var n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,a=(0,c.getByDot)(t,u);void 0!==a&&(0,c.setByDot)(t,u,void 0,!0)}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}},o=function(t){return!!t.params.provider};return"function"==typeof e[e.length-1]&&(o=e.pop()),function(t){var e="before"===t.type?t.data:t.result,n=function(n){return e&&n&&(Array.isArray(e)?e.forEach(r):(r(e),e.data&&(Array.isArray(e.data)?e.data.forEach(r):r(e.data)))),t},i=o(t);return i&&"function"==typeof i.then?i.then(n):n(i)}}function s(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){var n={};return e.forEach(function(e){var r=(0,c.getByDot)(t,e);void 0!==r&&(0,c.setByDot)(n,e,r)}),n},o=function(t){return!!t.params.provider};return"function"==typeof e[e.length-1]&&(o=e.pop(),console.error("DEPRECATED Predicate func will be removed next version. (pluck)")),function(t){var e=function(e){if(e){var n=(0,c.getItems)(t);n&&(Array.isArray(n)?(0,c.replaceItems)(t,n.map(r)):(0,c.replaceItems)(t,r(n)))}return t},n=o(t);return n&&"function"==typeof n.then?n.then(e):e(n)}}function u(t){if(!t)return function(t){throw new l.MethodNotAllowed("Calling '"+t.method+"' not allowed. (disable)")};if("function"==typeof t)return function(e){var n=t(e),r=function(t){if(!t)throw new l.MethodNotAllowed("Calling '"+e.method+"' not allowed. (disable)")};return n&&"function"==typeof n.then?n.then(r):void r(n)};for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=[t].concat(n);return function(e){var n=e.params.provider;if("external"===t&&n||o.indexOf(n)!==-1)throw new l.MethodNotAllowed("Provider '"+e.params.provider+"' can not call '"+e.method+"'. (disable)'")}}function a(t,e){if(e=Object.assign({},e),console.error("Calling populate(target, options) is now DEPRECATED and will be removed in the future. Refer to docs.feathersjs.com for more information. (legacyPopulate)"),!e.service)throw new Error("You need to provide a service. (populate)");var n=e.field||t;return function(r){function o(o){if(!o[n])return Promise.resolve(o);var i=o[n];"function"==typeof o.toObject?o=o.toObject(e):"function"==typeof o.toJSON&&(o=o.toJSON(e));var s=Object.assign({},r.params,{query:void 0}),u=Array.isArray(i)?Promise.all(i.map(function(t){return r.app.service(e.service).get(t,s)})):r.app.service(e.service).get(i,s);return u.then(function(e){return e&&(o[t]=e),o})}if("after"!==r.type)throw new l.GeneralError("Can not populate on before hook. (populate)");var i="find"===r.method&&r.result.data,s=i?r.result.data:r.result;return Array.isArray(s)?Promise.all(s.map(o)).then(function(t){return i?r.result.data=t:r.result=t,r}):o(r.result).then(function(t){return r.result=t,r})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lowerCase=n,exports.removeQuery=r,exports.pluckQuery=o,exports.remove=i,exports.pluck=s,exports.disable=u,exports.legacyPopulate=a;var c=e(47),l=e(33).errors},function(t,exports,e){"use strict";function n(t){return"object"===("undefined"==typeof t?"undefined":u(t))&&"string"==typeof t.method&&"string"==typeof t.type}function r(t,e){var r=this,o=e,i=function(t){if(t){if(!n(t))throw new Error(o.type+" hook for '"+o.method+"' method returned invalid hook object");o=t}return o},s=Promise.resolve(o);return t.forEach(function(t){var e=t.bind(r);s=2===e.length?s.then(function(t){return new Promise(function(n,r){e(t,function(t,e){return t?r(t):n(e)})})}):s.then(e),s=s.then(i)}),s.catch(function(t){throw t.hook=o,t})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["before","after","error"];Object.defineProperty(t,"__hooks",{value:{}}),e.forEach(function(e){t.__hooks[e]={}})}function i(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=t.__hooks[n][r]||[],s=e.__hooks[n][r]||[];return o?s.concat(i):i.concat(s)}function s(t){for(var e={hooks:function(e){var n=this;return(0,a.each)(e,function(e,r){if(!n.__hooks[r])throw new Error("'"+r+"' is not a valid hook type");var o=a.hooks.convertHookData(e);(0,a.each)(o,function(e,n){if("all"!==n&&t.indexOf(n)===-1)throw new Error("'"+n+"' is not a valid hook method")}),t.forEach(function(t){if(o[t]||o.all){var e=n.__hooks[r][t]||(n.__hooks[r][t]=[]);o.all&&e.push.apply(e,o.all),o[t]&&e.push.apply(e,o[t])}})}),this}},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Object.assign.apply(Object,[e].concat(r))}Object.defineProperty(exports,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.isHookObject=n,exports.processHooks=r,exports.addHookTypes=o,exports.getHooks=i,exports.baseMixin=s;var a=e(12)},function(t,exports,e){t.exports=e(51)},function(t,exports,e){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},c,t);return function(){var t=this;t.get("storage")||t.set("storage",(0,a.getStorage)(e.storage)),t.authenticate=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.get("storage"),o=Promise.resolve(n);n.type||(o=(0,a.getJWT)(e.tokenKey,e.cookie,this.get("storage")).then(function(t){return t?{type:"token",token:t}:Promise.reject(new i.default.NotAuthenticated("Could not find stored JWT and no authentication type was given"))}));var s=function(n){return t.set("token",n.token),t.set("user",n.data),Promise.resolve(r.setItem(e.tokenKey,n.token)).then(function(){return n})};return o.then(function(n){var r=void 0;if(n.endpoint)r=n.endpoint;else if("local"===n.type)r=e.localEndpoint;else{if("token"!==n.type)throw new Error("Unsupported authentication 'type': "+n.type);r=e.tokenEndpoint}return(0,a.connected)(t).then(function(e){if(t.rest)return t.service(r).create(n).then(s);var o=t.io?"emit":"send";return(0,a.authenticateSocket)(n,e,o).then(s)})})},t.logout=function(){return t.set("user",null),t.set("token",null),(0,a.clearCookie)(e.cookie),Promise.resolve(t.get("storage").removeItem(e.tokenKey)).then(function(){if(t.io||t.primus){var e=t.io?"emit":"send",n=t.io?t.io:t.primus;return(0,a.logoutSocket)(n,e)}})},t.mixins.push(function(t){if("function"!=typeof t.before||"function"!=typeof t.after)throw new Error("It looks like feathers-hooks isn't configured. It is required before running feathers-authentication.");t.before(u.populateParams(e))}),t.rest&&t.mixins.push(function(t){t.before(u.populateHeader(e))})}};var o=e(33),i=r(o),s=e(52),u=n(s),a=e(53),c={cookie:"feathers-jwt",tokenKey:"feathers-jwt",localEndpoint:"/auth/local",tokenEndpoint:"/auth/token"};t.exports=exports.default},function(t,exports){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(){return function(t){var e=t.app;Object.assign(t.params,{user:e.get("user"),token:e.get("token")})}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n.params.token&&(n.params.headers=Object.assign({},e({},t.header||"authorization",n.params.token),n.params.headers))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.populateParams=n,exports.populateHeader=r},function(t,exports){"use strict";function e(t){return new Promise(function(e,n){if(t.rest)return e();var r=t.io||t.primus;if(!r)return n(new Error("It looks like no client connection has been configured."));if(r.once("disconnect",n),r.once("close",n),t.io&&!r.connected||t.primus&&3!==r.readyState){var o=t.primus?"open":"connect";r.once(o,function(){return e(r)})}else e(r)})}function n(t,e,n){return new Promise(function(r,o){e.once("unauthorized",o),e.once("authenticated",r),e[n]("authenticate",t)})}function r(t,e){return new Promise(function(n,r){t[e]("logout",function(t){t&&r(t),n()})})}function o(t){if("undefined"!=typeof document){var e="; "+document.cookie,n=e.split("; "+t+"=");if(2===n.length)return n.pop().split(";").shift()}return null}function i(t){return"undefined"!=typeof document&&(document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),null}function s(t,e,n){return Promise.resolve(n.getItem(t)).then(function(t){var n=o(e);return n?n:t})}function u(t){return t?t:{store:{},getItem:function(t){return this.store[t]},setItem:function(t,e){return this.store[t]=e},removeItem:function(t){return delete this.store[t],this}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.connected=e,exports.authenticateSocket=n,exports.logoutSocket=r,exports.getCookie=o,exports.clearCookie=i,exports.getJWT=s,exports.getStorage=u},function(t,exports,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){return new c(t)}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(r)};exports.default=i;var a=e(55),c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(o._storageKey=t.name||"feathers",o._storage=t.storage||"undefined"!=typeof window&&window.localStorage,o._throttle=t.throttle||200,o.store=null,!o._storage)throw new Error("The `storage` option needs to be provided");return o}return o(e,t),s(e,[{key:"ready",value:function(){var t=this;return this.store?Promise.resolve(this.store):Promise.resolve(this._storage.getItem(this._storageKey)).then(function(t){return JSON.parse(t||"{}")}).then(function(e){var n=Object.keys(e),r=e[n[n.length-1]];return t._uId=n.length&&"undefined"!=typeof r[t.id]?r[t.id]+1:0,t.store=e})}},{key:"flush",value:function(t){var e=this;return this._timeout||(this._timeout=setTimeout(function(){e._storage.setItem(e._storageKey,JSON.stringify(e.store)),delete e._timeout},this.throttle)),t}},{key:"execute",value:function(t){for(var n=this,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return this.ready().then(function(){var r;return(r=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),t,n)).call.apply(r,[n].concat(o))})}},{key:"find",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.execute.apply(this,["find"].concat(e))}},{key:"get",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.execute.apply(this,["get"].concat(e))}},{key:"create",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.execute.apply(this,["create"].concat(n)).then(function(e){return t.flush(e)})}},{key:"patch",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.execute.apply(this,["patch"].concat(n)).then(function(e){return t.flush(e)})}},{key:"update",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.execute.apply(this,["update"].concat(n)).then(function(e){return t.flush(e)})}},{key:"remove",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.execute.apply(this,["remove"].concat(n)).then(function(e){return t.flush(e)})}}]),e}(a.Service);i.Service=a.Service,t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return new v(t)}Object.defineProperty(exports,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();exports.default=s;var a=e(6),c=n(a),l=e(56),f=n(l),h=e(33),p=n(h),d=e(12),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.paginate=e.paginate||{},this._id=this.id=e.idField||e.id||"id",this._uId=e.startId||0,this.store=e.store||{},this.events=e.events||[],this._matcher=e.matcher||d.matcher,this._sorter=e.sorter||d.sorter}return u(t,[{key:"extend",value:function(t){return c.default.extend(t,this)}},{key:"_find",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.default,n=e(t.query||{}),r=n.query,i=n.filters,s=d._.values(this.store).filter(this._matcher(r)),u=s.length;return i.$sort&&s.sort(this._sorter(i.$sort)),i.$skip&&(s=s.slice(i.$skip)),"undefined"!=typeof i.$limit&&(s=s.slice(0,i.$limit)),i.$select&&(s=s.map(function(t){return d._.pick.apply(d._,[t].concat(o(i.$select)))})),Promise.resolve({total:u,limit:i.$limit,skip:i.$skip||0,data:s})}},{key:"find",value:function(t){var e="undefined"!=typeof t.paginate?t.paginate:this.paginate,n=this._find(t,function(t){return(0,f.default)(t,e)});return e&&e.default?n:n.then(function(t){return t.data})}},{key:"get",value:function(t,e){return t in this.store?Promise.resolve(this.store[t]).then((0,d.select)(e,this.id)):Promise.reject(new p.default.NotFound("No record found for id '"+t+"'"))}},{key:"_create",value:function(t,e){var n=t[this._id]||this._uId++,o=d._.extend({},t,r({},this._id,n));return Promise.resolve(this.store[n]=o).then((0,d.select)(e,this.id))}},{key:"create",value:function(t,e){var n=this;return Array.isArray(t)?Promise.all(t.map(function(t){return n._create(t)})):this._create(t,e)}},{key:"_update",value:function(t,e,n){if(t in this.store){var o=this.store[t][this._id];return t=o==t?o:t,e=d._.extend({},e,r({},this._id,t)),this.store[t]=e,Promise.resolve(this.store[t]).then((0,d.select)(n,this.id))}return Promise.reject(new p.default.NotFound("No record found for id '"+t+"'"))}},{key:"update",value:function(t,e,n){return null===t||Array.isArray(e)?Promise.reject(new p.default.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")):this._update(t,e,n)}},{key:"_patch",value:function(t,e,n){return t in this.store?(d._.extend(this.store[t],d._.omit(e,this._id)),Promise.resolve(this.store[t]).then((0,d.select)(n,this.id))):Promise.reject(new p.default.NotFound("No record found for id '"+t+"'"))}},{key:"patch",value:function(t,e,n){var r=this;return null===t?this._find(n).then(function(t){return Promise.all(t.data.map(function(t){return r._patch(t[r._id],e,n)}))}):this._patch(t,e,n)}},{key:"_remove",value:function(t,e){if(t in this.store){var n=this.store[t];return delete this.store[t],Promise.resolve(n).then((0,d.select)(e,this.id))}return Promise.reject(new p.default.NotFound("No record found for id '"+t+"'"))}},{key:"remove",value:function(t,e){var n=this;return null===t?this._find(e).then(function(t){return Promise.all(t.data.map(function(t){return n._remove(t[n._id],e)}))}):this._remove(t,e)}}]),t}();s.Service=v,t.exports=exports.default},function(t,exports,e){"use strict";function n(t){if("undefined"!=typeof t)return Math.abs(parseInt(t,10))}function r(t,e){if(e&&e.default){var n="number"==typeof t?t:e.default,r="number"==typeof e.max?e.max:Number.MAX_VALUE;return Math.min(n,r)}return t}function o(t){if("object"!==("undefined"==typeof t?"undefined":i(t)))return t;var e={};return Object.keys(t).forEach(function(n){return e[n]="object"===i(t[n])?t[n]:parseInt(t[n],10)}),e}Object.defineProperty(exports,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.default=function(t,e){var i={$sort:o(t.$sort),$limit:r(n(t.$limit),e),$skip:n(t.$skip),$select:t.$select,$populate:t.$populate};return{filters:i,query:s._.omit.apply(s._,[t].concat(u))}};var s=e(12),u=["$sort","$limit","$skip","$select","$populate"];t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new Error("You have to pass an instance of RxJS as the first paramter.");if(!t.Observable)throw new Error("The RxJS instance does not seem to provide an `Observable` type.");var n=(0,l.default)(t);e=Object.assign({idField:"id",dataField:"data",sorter:f.makeSorter,lazy:!1,matcher:o.matcher,listStrategy:"smart",listStrategies:n},e);var r=function n(r){var o=this,n={rx:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._rx=t,this}},i={created:t.Observable.fromEvent(r,"created"),updated:t.Observable.fromEvent(r,"updated"),patched:t.Observable.fromEvent(r,"patched"),removed:t.Observable.fromEvent(r,"removed")};o.methods.forEach(function(o){"function"==typeof r[o]&&(n[o]="find"===o?(0,a.default)(t,i,e):(0,s.default)(t,i,e,o))}),r.mixin(n)};return function(){h("Initializing feathers-reactive plugin"),this.mixins.push(r)}}Object.defineProperty(exports,"__esModule",{value:!0});var o=e(14),i=e(58),s=n(i),u=e(60),a=n(u),c=e(61),l=n(c),f=e(59),h=e(8)("feathers-reactive");r.strategy=l.default,exports.default=r,t.exports=exports.default},function(t,exports,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.paramsPositions=void 0,exports.default=function(t,e,i,s){return function(){var u=arguments,a="undefined"!=typeof o[s]?o[s]:1,c=arguments[a]||{};if(this._rx===!1||c.rx===!1)return this._super.apply(this,n(u));var l=(0,r.getOptions)(i,this._rx,c.rx),f=(0,r.getSource)(t,l.lazy,this._super.bind(this),u),h=f.concat(f.exhaustMap(function(n){var r=function(t){return t[l.idField]===n[l.idField]},o=e.removed.filter(r),i=t.Observable.merge(e.created,e.updated,e.patched).filter(r);return t.Observable.merge(i,o.map(function(){return null}))}));return(0,r.promisify)(h)}};var r=e(59),o=exports.paramsPositions={update:2,patch:2}},function(t,exports,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n,o){if(e===!0){var i=function(){var e=null;return{v:t.Observable.create(function(t){var i=t;if(e||(e=n.apply(void 0,r(o))),!e||"function"!=typeof e.then||"function"!=typeof e.catch)throw new Error("feathers-reactive only works with services that return a Promise");e.then(function(t){i.next(t),i.complete()}).catch(function(t){return i.error(t)})})}}();if("object"===("undefined"==typeof i?"undefined":a(i)))return i.v}return t.Observable.fromPromise(n.apply(void 0,r(o)))}function i(t){return Object.assign(t,{then:function(){var t;return(t=this.first().toPromise()).then.apply(t,arguments)},catch:function(){var t;return(t=this.first().toPromise()).catch.apply(t,arguments)}})}function s(t,e){var r=t.$sort?(0,c.sorter)(t.$sort):(0,c.sorter)(n({},e.idField,1));return function(n){var o=!!n[e.dataField],i=o?n[e.dataField]:n;r&&(i=i.sort(r));var s="number"==typeof n.limit?n.limit:parseInt(t.$limit,10);return s&&!isNaN(s)&&(i=i.slice(0,s)),o?n[e.dataField]=i:n=i,n}}function u(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=Object.assign.apply(Object,[{},t].concat(n));return"string"==typeof o.listStrategy&&(o.listStrategy=o.listStrategies[o.listStrategy]),o}Object.defineProperty(exports,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.getSource=o,exports.promisify=i,exports.makeSorter=s,exports.getOptions=u;var c=e(14)},function(t,exports,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e,o){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments;if(this._rx===!1||i.rx===!1)return this._super.apply(this,n(s));var u=(0,r.getOptions)(o,this._rx,i.rx),a=(0,r.getSource)(t,u.lazy,this._super.bind(this),arguments),c=u.listStrategy.call(this,a,e,u,s);return(0,r.promisify)(c)}};var r=e(59);t.exports=exports.default},function(t,exports){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){return{never:function(t){return t},always:function(e,r,o,i){var s=i[0]||{},u=Object.assign({},s.query),a=this._super.bind(this),c=o.matcher(u),l=o.sorter(u,o);return e.concat(e.exhaustMap(function(){return t.Observable.merge(r.created.filter(c),r.removed,r.updated,r.patched).flatMap(function(){var e=t.Observable.fromPromise(a.apply(void 0,n(i)));return e.map(l)})}))},smart:function(n,r,o,i){var s=i[0]||{},u=Object.assign({},s.query),a=o.matcher(u),c=o.sorter(u,o),l=function(t){return function(n){var r=!!n[o.dataField],i=function(e){return e.concat(t)};return r?Object.assign({},n,e({total:n.total+1},o.dataField,i(n[o.dataField]))):i(n)}},f=function(t){return function(n){var r=!!n[o.dataField],i=function(e){return e.filter(function(e){return t[o.idField]!==e[o.idField]})};return r?Object.assign({},n,e({total:a(t)?n.total-1:n.total},o.dataField,i(n[o.dataField]))):i(n)}},h=function(t){return function(n){var r=!!n[o.dataField],i=r?n[o.dataField].length:n.length,s=function(e){return e.filter(function(e){return t[o.idField]!==e[o.idField]}).concat(t).filter(a)};if(r){var u=s(n[o.dataField]);return Object.assign({},n,e({total:n.total-(i-u.length)},o.dataField,u))}return s(n)}};return n.concat(n.exhaustMap(function(e){return t.Observable.merge(r.created.filter(a).map(l),r.removed.map(f),t.Observable.merge(r.updated,r.patched).map(h)).scan(function(t,e){return c(e(t))},e)}))}}},t.exports=exports.default},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,r){return t.configure(i.default.authentication({storage:n})),t.tokenAuth=function(){return e.app.authenticate({type:"token",token:window.localStorage["feathers-jwt"]}).then(function(t){return console.info("jwt authenticated at ",Date.now()),r.user=t.data,!0}).catch(function(t){return console.error("Error authenticating!",t),e.app.logout(),!1})},t.localAuth=function(t,n){return e.app.authenticate({type:"local",username:t,password:n}).then(function(t){return console.log("Authenticated!",t),r.user=t.data,r.authenticated=!0,r.token=t.token,t}).catch(function(t){return console.error("Error authenticating!",t),that.app.tokenLogout(),t})},t.tokenLogout=function(){e.app.logout(),window.localStorage.removeItem("feathers-jwt"),r.authenticated=!1,r.user=null,r.token=null,console.log("Logged out.")},t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var o=e(2),i=n(o)},function(t,exports){"use strict";function e(t,e,n){return t.showToast=function(t,n,r){if(!n)var n="";if(!r)var r=3e3;var o=e.simple().textContent(t).action("Hide").hideDelay(r).position("bottom left").highlightAction(!1).toastClass(n);e.show(o),console.debug("showToast ",n,t)},n.showToast=function(e,n,r){t.showToast(e,n,r)},t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e},function(t,exports,e){var n=e(65);"string"==typeof n&&(n=[[t.id,n,""]]);e(67)(n,{});n.locals&&(t.exports=n.locals)},function(t,exports,e){exports=t.exports=e(66)(void 0),exports.push([t.id,'md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.activityPaymentSummaryCard{margin-bottom:8px;margin-top:8px;background:none;box-shadow:none;position:relative}.paymentSummaryCard{min-width:100%;margin-bottom:8px;margin-right:16px;margin-top:8px;background:none;box-shadow:none}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:16px;padding-left:16px}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:16px}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;outline:none}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.activityCardForm{margin:0 16px}.activityForm{padding-left:24px;padding-right:16px}.questionForm{padding-left:16px;padding-right:40px}.formHeader{padding:16px 12px 16px 0;margin:0;font-weight:500}.formHeader,.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{height:24px;width:24px;margin-left:8px}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:0 4px}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}ng-md-icon{margin:0!important}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.remove-coupon{cursor:pointer}.toUppercase{text-transform:uppercase}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.inputStatusIcon{height:24px;width:24px;margin-bottom:16px!important;margin-right:12px!important}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}',""]);
},function(t,exports){function e(t,e){var r=t[1]||"",o=t[3];if(!o)return r;if(e&&"function"==typeof btoa){var i=n(o),s=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[r].concat(s).concat([i]).join("\n")}return[r].join("\n")}function n(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+e;return"/*# "+n+" */"}t.exports=function(t){var n=[];return n.toString=function(){return this.map(function(n){var r=e(n,t);return n[2]?"@media "+n[2]+"{"+r+"}":r}).join("")},n.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&r[s[0]]||(e&&!s[2]?s[2]=e:e&&(s[2]="("+s[2]+") and ("+e+")"),n.push(s))}},n}},function(t,exports,e){function n(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],e))}else{for(var s=[],i=0;i<r.parts.length;i++)s.push(c(r.parts[i],e));p[r.id]={id:r.id,refs:1,parts:s}}}}function r(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],i=o[0],s=o[1],u=o[2],a=o[3],c={css:s,media:u,sourceMap:a};n[i]?n[i].parts.push(c):e.push(n[i]={id:i,parts:[c]})}return e}function o(t,e){var n=m(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=g[g.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function i(t){t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",a(e,t.attrs),o(t,e),e}function u(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",a(e,t.attrs),o(t,e),e}function a(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function c(t,e){var n,r,o;if(e.singleton){var a=b++;n=y||(y=s(e)),r=l.bind(null,n,a,!1),o=l.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),r=h.bind(null,n,e),o=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),r=f.bind(null,n),o=function(){i(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}function l(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function f(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function h(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=_(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),u=t.href;t.href=URL.createObjectURL(s),u&&URL.revokeObjectURL(u)}var p={},d=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},v=d(function(){return window&&document&&document.all&&!window.atob}),m=function(t){var e={};return function(n){return"undefined"==typeof e[n]&&(e[n]=t.call(this,n)),e[n]}}(function(t){return document.querySelector(t)}),y=null,b=0,g=[],_=e(68);t.exports=function(t,e){e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},"undefined"==typeof e.singleton&&(e.singleton=v()),"undefined"==typeof e.insertInto&&(e.insertInto="head"),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var o=r(t);return n(o,e),function(t){for(var i=[],s=0;s<o.length;s++){var u=o[s],a=p[u.id];a.refs--,i.push(a)}if(t){var c=r(t);n(c,e)}for(var s=0;s<i.length;s++){var a=i[s];if(0===a.refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete p[a.id]}}}};var w=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,exports){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/"),o=t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return t;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"});return o}},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t.api={getFromPromise:function(t,n,r){var o=u.default.param(r);return i.default.Observable.fromPromise(e({method:"GET",url:t+n+o})).catch(function(t){return console.log("error",t),cacheResponse(t),i.default.Observable.empty()}).select(function(t){return console.log(t),t})}};var n=t.service("cache");return n.on("created",function(t){console.log("$abl.cache.PUT",t)}),t.cache={put:function(e){t.services.cache.create(e)},find:function(e){t.services.cache.find(e)}},t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var o=e(70),i=n(o),s=e(74),u=n(s)},function(t,exports,e){var n,r;(function(t,o){!function(i,s){var u={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},i=u[typeof window]&&window||this,a=u[typeof exports]&&exports&&!exports.nodeType&&exports,c=u[typeof t]&&t&&!t.nodeType&&t,l=(c&&c.exports===a&&a,u[typeof o]&&o);!l||l.global!==l&&l.window!==l||(i=l),n=[e(72),e(73),exports],r=function(t,angular,exports){return i.Rx=s(i,exports,t,angular),i.Rx}.apply(exports,n),!(void 0!==r&&(t.exports=r))}(this,function(t,e,n,angular,r){function o(t){return function(){try{return t.apply(this,arguments)}catch(t){return u.e=t,u}}}function i(t){if(!angular.isFunction(t))throw new TypeError("fn must be a function");return o(t)}function s(){}var u={e:{}},a=angular.module("rx",[]);a.factory("rx",["$window",function(t){t.Rx||(t.Rx=n);var e=function(t){function e(e,n,r){this._self=e,this._name=n,this._fn=r,t.call(this)}function r(t,e){this._self=t,this._name=e,this.isDisposed=!1}return n.internals.inherits(e,t),e.prototype.subscribeCore=function(t){var e=this._fn;return this._self[this._name]=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(angular.isFunction(e)){var s=i(e).apply(this,r);if(s===u)return t.onError(s.e);t.onNext(s)}else 1===r.length?t.onNext(r[0]):t.onNext(r)},new r(this._self,this._name)},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,delete this._self[this._name])},e}(n.ObservableBase);return n.createObservableFunction=function(t,n,r){return new e(t,n,r).publish().refCount()},t.Rx}]),a.factory("observeOnScope",["rx",function(t){var e=function(e){function n(t,n,r){this._scope=t,this._expr=n,this._eq=r,e.call(this)}function r(t){return function(e,n){t.onNext({oldValue:n,newValue:e})}}function o(t){this._fn=t,this.isDisposed=!1}return t.internals.inherits(n,e),n.prototype.subscribeCore=function(t){return new o(this._scope.$watch(this._expr,r(t),this._eq))},o.prototype.dispose=function(){this.isDisposed||(this._fn(),this.isDisposed=!0)},n}(t.ObservableBase);return function(t,n,r){return new e(t,n,r)}}]),n.Observable.prototype.safeApply=function(t,e,n,r){return e=angular.isFunction(e)?e:s,n=angular.isFunction(n)?n:s,r=angular.isFunction(r)?r:s,this.takeWhile(function(){return!t.$$destroyed}).tap(function(n){t.$$phase||t.$root.$$phase?e(n):t.$apply(function(){e(n)})},function(e){t.$$phase||t.$root.$$phase?n(e):t.$apply(function(){n(e)})},function(){t.$$phase||t.$root.$$phase?r():t.$apply(function(){r()})})},a.config(["$provide",function(t){t.decorator("$rootScope",["$delegate","rx",function(t,e){return Object.defineProperties(t.constructor.prototype,{$toObservable:{value:function(t,n){var r=this;return e.Observable.create(function(o){function i(t,e){o.onNext({oldValue:e,newValue:t})}var s=e.Disposable.create(r.$watch(t,i,n));return r.$on("$destroy",function(){s.dispose()}),s}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$toObservableCollection:{value:function(t){var n=this;return e.Observable.create(function(r){function o(t,e){r.onNext({oldValue:e,newValue:t})}var i=e.Disposable.create(n.$watchCollection(t,o));return n.$on("$destroy",function(){i.dispose()}),i}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$toObservableGroup:{value:function(t){var n=this;return e.Observable.create(function(r){function o(t,e){r.onNext({oldValue:e,newValue:t})}var i=e.Disposable.create(n.$watchGroup(t,o));return n.$on("$destroy",function(){i.dispose()}),i}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$eventToObservable:{value:function(t,n){var r=this;return e.Observable.create(function(o){function s(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(angular.isFunction(n)){var s=i(n).apply(null,e);if(s===u)return o.onError(s.e);o.onNext(s)}else 1===e.length?o.onNext(e[0]):o.onNext(e)}var a=e.Disposable.create(r.$on(t,s));return r.$on("$destroy",function(){a.dispose()}),a}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$createObservableFunction:{value:function(t,n){return e.createObservableFunction(this,t,n)},enumerable:!1,configurable:!0,writable:!0},$digestObservables:{value:function(t){var n=this;return e.Observable.pairs(t).flatMap(function(t){return t[1].digest(n,t[0]).map(function(e){return{observable:t[1],expression:t[0],value:e}})}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0}}),t}])}]),a.run(["$parse",function(t){var e=function(e){function o(t,n,r){this.source=t,this.$scope=n,this.prop=r,e.call(this)}return n.internals.inherits(o,e),o.prototype.subscribeCore=function(e){var o=t(this.prop).assign;if(!o)return e.onError(new Error("Property or expression is not assignable."));var i=new n.SingleAssignmentDisposable;return i.setDisposable(this.source.subscribe(new r(e,this.$scope,o))),this.$scope.$on("$destroy",function(){i.dispose()}),i},o}(n.ObservableBase),r=function(t){function e(e,n,r){this.o=e,this.$scope=n,this.propSetter=r,t.call(this)}return n.internals.inherits(e,t),e.prototype.next=function(t){if(this.$scope.$$phase)this.propSetter(this.$scope,t);else{var e=this;this.$scope.$apply(function(){e.propSetter(e.$scope,t)})}this.o.onNext(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(n.internals.AbstractObserver);n.Observable.prototype.digest=function(t,n){return new e(this,t,n)}}]);n.ScopeScheduler=function(t){function e(e){this.$scope=e,t.call(this)}return n.internals.inherits(e,t),e.prototype.schedule=function(t,e){if(this.$scope.$$destroyed)return n.Disposable.empty;var r=new n.SingleAssignmentDisposable,o=this.$scope;o.$$phase||o.$root.$$phase?r.setDisposable(n.Disposable._fixup(t(e))):o.$apply.call(o,function(){r.setDisposable(n.Disposable._fixup(t(e)))})},e.prototype._scheduleFuture=function(t,e,r){if(this.$scope.$$destroyed)return n.Disposable.empty;var o=new n.SingleAssignmentDisposable,i=this.$scope,s=setTimeout(function(){return i.$$destroyed||o.isDisposed?clearTimeout(s):void(i.$$phase||i.$root.$$phase?o.setDisposable(n.Disposable._fixup(t(r))):i.$apply.call(i,function(){o.setDisposable(n.Disposable._fixup(t(r)))}))},e);return new n.BinaryDisposable(o,n.Disposable.create(function(){clearTimeout(s)}))},e.prototype.schedulePeriodic=function(t,e,r){if(this.$scope.$$destroyed)return n.Disposable.empty;e=n.Scheduler.normalize(e);var o=this.$scope,i=t,s=setInterval(function(){return o.$$destroyed?clearInterval(s):void(o.$$phase||o.$root.$$phase?i=r(i):o.$apply.call(o,function(){i=r(i)}))},e);return n.Disposable.create(function(){clearInterval(s)})},e}(n.Scheduler);return n})}).call(exports,e(71)(t),function(){return this}())},function(t,exports){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,exports,e){var n;(function(t,r,o){(function(i){function s(t){return t&&t.Object===Object?t:null}function u(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function a(t){return function(){try{return t.apply(this,arguments)}catch(t){return re.e=t,re}}}function c(t){throw t}function l(t,e){if(ie&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(ce)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+ce+"\n");t.stack=f(o)}}function f(t){for(var e=t.split("\n"),n=[],r=0,o=e.length;r<o;r++){var i=e[r];h(i)||p(i)||!i||n.push(i)}return n.join("\n")}function h(t){var e=v(t);if(!e)return!1;var n=e[0],r=e[1];return n===ue&&r>=ae&&r<=Rs}function p(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function d(){if(ie)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=v(e);if(!n)return;return ue=n[0],n[1]}}function v(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function m(t,e,n,r,o,s){var u=Xe(t),a=u.length,c=Xe(e),l=c.length;if(a!==l&&!r)return!1;for(var f,h=a;h--;)if(f=u[h],!(r?f in e:Qe.call(e,f)))return!1;for(var p=r;++h<a;){f=u[h];var d,v=t[f],m=e[f];if(!(d===i?n(v,m,r,o,s):d))return!1;p||(p="constructor"===f)}if(!p){var y=t.constructor,b=e.constructor;if(y!==b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b))return!1}return!0}function y(t,e,n){switch(n){case Ce:case ke:return+t===+e;case Se:return t.name===e.name&&t.message===e.message;case je:return t!==+t?e!==+e:t===+e;case Ne:case qe:return t===e+""}return!1}function b(t){return!!t&&"object"==typeof t}function g(t){return"number"==typeof t&&t>-1&&t%1===0&&t<=Je}function _(t){return b(t)&&g(t.length)&&!!Ve[Ge.call(t)]}function w(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t,e,n,r,o,s){var u=-1,a=t.length,c=e.length;if(a!==c&&!(r&&c>a))return!1;for(;++u<a;){var l,f=t[u],h=e[u];if(l!==i){if(l)continue;return!1}if(r){if(!w(e,function(t){return f===t||n(f,t,r,o,s)}))return!1}else if(f!==h&&!n(f,h,r,o,s))return!1}return!0}function E(t,e,n,r,o,i){var s=Ye(t),u=Ye(e),a=Ee,c=Ee;s||(a=Ge.call(t),a===xe?a=De:a!==De&&(s=_(t))),u||(c=Ge.call(e),c===xe&&(c=De));var l=a===De&&!Ke(t),f=c===De&&!Ke(e),h=a===c;if(h&&!s&&!l)return y(t,e,a);if(!r){var p=l&&Qe.call(t,"__wrapped__"),d=f&&Qe.call(e,"__wrapped__");if(p||d)return n(p?t.value():t,d?e.value():e,r,o,i)}if(!h)return!1;o||(o=[]),i||(i=[]);for(var v=o.length;v--;)if(o[v]===t)return i[v]===e;o.push(t),i.push(e);var b=(s?x:m)(t,e,n,r,o,i);return o.pop(),i.pop(),b}function C(t,e,n,r,o){return t===e||(null==t||null==e||!ut(t)&&!b(e)?t!==t&&e!==e:E(t,e,C,n,r,o))}function k(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}function S(t,e){this.id=t,this.value=e}function A(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function O(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function j(t){this._s=t,this.isDisposed=!1}function D(t){this._s=t}function N(t){this._s=t,this._l=t.length,this._i=0}function T(t){this._a=t}function q(t){this._a=t,this._l=M(t),this._i=0}function P(t){return"number"==typeof t&&Qt.isFinite(t)}function F(t){var e,n=t[me];if(!n&&"string"==typeof t)return e=new D(t),e[me]();if(!n&&t.length!==i)return e=new T(t),e[me]();if(!n)throw new TypeError("Object is not iterable");return t[me]()}function I(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}function M(t){var e=+t.length;return isNaN(e)?0:0!==e&&P(e)?(e=I(e)*Math.floor(Math.abs(e)),e<=0?0:e>br?br:e):e}function R(t,e){return xn(t)||(t=jn),new _r(e,t)}function L(t,e){this.observer=t,this.parent=e}function H(t,e){return t.amb(e)}function B(){return!1}function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function B(){return!1}function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function B(){return!1}function z(){return[]}function B(){return!1}function z(){return[]}function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function V(t){return function(e){return t.subscribe(e)}}function U(t){return t.toArray()}function Q(t){return t.length>0}function G(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function G(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function J(t,e,n){var r=_e(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return ee(o)&&(o=lr(o)),(ge(o)||be(o))&&(o=gr(o)),o}).concatAll()}function X(t,e,n){for(var r=0,o=t.length;r<o;r++)if(n(t[r],e))return r;return-1}function K(t){this.comparer=t,this.set=[]}function Y(t,e){return function(n){for(var r=n,o=0;o<e;o++){var s=r[t[o]];if("undefined"==typeof s)return i;r=s}return r}}function Z(t){if(0===t.length)throw new le;return t[0]}function tt(t,e,n,r){var o=_e(e,n,3);return new Ds(function(e){return t.subscribe(new di(e,t,o,r))},t)}function et(t){return t?Kn.isObservable(t)?t:ee(t)?Kn.fromPromise(t):st(t)||it(t)?Ei.call(this,t):ne(t)?ot.call(this,t):ge(t)||be(t)?nt.call(this,t):ut(t)?rt.call(this,t):t:t}function nt(t){return Kn.from(t).concatMap(function(t){return Kn.isObservable(t)||ut(t)?et.call(null,t):Gt.Observable.just(t)}).toArray()}function rt(t){function e(t,e){n[e]=i,o.push(t.map(function(t){n[e]=t}))}for(var n=new t.constructor,r=Object.keys(t),o=[],s=0,u=r.length;s<u;s++){var a=r[s],c=et.call(this,t[a]);c&&Kn.isObservable(c)?e(c,a):n[a]=t[a]}return Kn.forkJoin.apply(Kn,o).map(function(){return n})}function ot(t){var e=this;return new Ds(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],o=1,i=arguments.length;o<i;o++)r.push(arguments[o]);e=r}n.onNext(e),n.onCompleted()})})}function it(t){return ne(t.next)&&ne(t.throw)}function st(t){var e=t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName||it(e.prototype))}function ut(t){return Object==t.constructor}function at(t,e,n,r){var o=new Fs;return r.push(ct(o,e,n)),t.apply(e,r),o.asObservable()}function ct(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];if(ne(n)){if(o=oe(n).apply(e,o),o===re)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function lt(t,e,n,r){var o=new Fs;return r.push(ft(o,e,n)),t.apply(e,r),o.asObservable()}function ft(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var o=arguments.length,i=[],s=1;s<o;s++)i[s-1]=arguments[s];if(ne(n)){var i=oe(n).apply(e,i);if(i===re)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function ht(t){return Qt.StaticNodeList?t instanceof Qt.StaticNodeList||t instanceof Qt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function pt(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function dt(t,e,n){var r=new sn,o=Object.prototype.toString.call(t);if(ht(t)||"[object HTMLCollection]"===o)for(var i=0,s=t.length;i<s;i++)r.add(dt(t.item(i),e,n));else t&&r.add(new pt(t,e,n));return r}function vt(t,e,n){return new Ds(function(r){function o(t,e){if(c[e]=t,s[e]=!0,u||(u=s.every(Xt))){if(i)return r.onError(i);var o=oe(n).apply(null,c);if(o===re)return r.onError(o.e);r.onNext(o)}a&&c[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,a=!1,c=new Array(2);return new mn(t.subscribe(function(t){o(t,0)},function(t){c[1]?r.onError(t):i=t},function(){a=!0,c[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){a=!0,o(!0,1)}))},t)}function U(t){return t.toArray()}function mt(t,e){return t.groupJoin(this,e,mr,function(t,e){return e})}function yt(t){var e=this;return new Ds(function(n){var r=new Ps,o=new sn,i=new bn(o);return n.onNext(nn(r,i)),o.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),ee(t)&&(t=lr(t)),o.add(t.subscribe(function(t){r.onCompleted(),r=new Ps,n.onNext(nn(r,i))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),i},e)}function bt(t){var e=this;return new Ds(function(n){function r(){var e;try{e=t()}catch(t){return void n.onError(t)}ee(e)&&(e=lr(e));var i=new dn;o.setDisposable(i),i.setDisposable(e.take(1).subscribe(Jt,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new Ps,n.onNext(nn(u,s)),r()}))}var o=new vn,i=new sn(o),s=new bn(i),u=new Ps;return n.onNext(nn(u,s)),i.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function gt(t,e){return new Li(t,e)}function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function _t(t){this.patterns=t}function wt(t,e){this.expression=t,this.selector=e}function xt(t){return function(e){t.onError(e)}}function Et(t,e){return function(){var n=oe(t.selector).apply(t,arguments);return n===re?e.onError(n.e):void e.onNext(n)}}function Ct(t,e,n){var r=t.get(e);if(!r){var o=new Gi(e,n);return t.set(e,o),o}return r}function kt(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Qi;for(var r=0,o=this.joinObserverArray.length;r<o;r++){var i=this.joinObserverArray[r];this.joinObservers.set(i,i)}}function St(t,e){return new Ji(t,e)}function At(t,e,n){return new Ds(function(r){var o=t,i=wn(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function Ot(t,e,n){return t===e?new Ds(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):pr(function(){return At(new Date(n.now()+t),e,n)})}function jt(t,e,n){return new Ds(function(r){var o,i=!1,s=new vn,u=null,a=[],c=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,l;"E"===t.value.kind?(a=[],a.push(t),u=t.value.error,l=!c):(a.push({value:t.value,timestamp:t.timestamp+e}),l=!i,i=!0),l&&(null!==u?r.onError(u):(o=new dn,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,l,f;if(null===u){c=!0;do l=null,a.length>0&&a[0].timestamp-n.now()<=0&&(l=a.shift().value),null!==l&&l.accept(r);while(null!==l);f=!1,s=0,a.length>0?(f=!0,s=Math.max(0,a[0].timestamp-n.now())):i=!1,o=u,c=!1,null!==o?r.onError(o):f&&e(null,s)}}))))}),new mn(o,s)},t)}function Dt(t,e,n){return pr(function(){return jt(t,e-n.now(),n)})}function Nt(t,e,n){var r,o;return ne(e)?o=e:(r=e,o=n),new Ds(function(e){function n(){a.setDisposable(t.subscribe(function(t){var n=oe(o)(t);if(n===re)return e.onError(n.e);var r=new dn;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),i()}))},function(t){e.onError(t)},function(){u=!0,a.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new sn,u=!1,a=new vn;return r?a.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new mn(a,s)},t)}function Tt(t,e){return new Ds(function(n){var r,o=!1,i=new vn,s=0,u=t.subscribe(function(t){var u=oe(e)(t);if(u===re)return n.onError(u.e);ee(u)&&(u=lr(u)),o=!0,r=t,s++;var a=s,c=new dn;i.setDisposable(c),c.setDisposable(u.subscribe(function(){o&&s===a&&n.onNext(r),o=!1,c.dispose()},function(t){n.onError(t)},function(){o&&s===a&&n.onNext(r),o=!1,c.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new mn(u,i)},t)}function U(t){return t.toArray()}function U(t){return t.toArray()}function qt(t,e,n,r){return ne(e)&&(r=n,n=e,e=kr()),Kn.isObservable(r)||(r=Nr(new ss)),new Ds(function(o){function i(t){function e(){return f=n===l}var n=l,i=new dn;a.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&u.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&u.setDisposable(r.subscribe(o))}))}function s(){var t=!f;return t&&l++,t}var u=new vn,a=new vn,c=new dn;u.setDisposable(c);var l=0,f=!1;return i(e),c.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=oe(n)(t);if(e===re)return o.onError(e.e);i(ee(e)?lr(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new mn(u,a)},t)}function Pt(t,e,n,r){return xn(n)&&(r=n,n=Nr(new ss)),n instanceof Error&&(n=Nr(n)),xn(r)||(r=Pn),Kn.isObservable(n)||(n=Nr(new ss)),new Ds(function(o){function i(){var t=s;l.setDisposable(r.scheduleFuture(null,e,function(){c=s===t,c&&(ee(n)&&(n=lr(n)),a.setDisposable(n.subscribe(o)))}))}var s=0,u=new dn,a=new vn,c=!1,l=new vn;return a.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){c||(s++,o.onNext(t),i())},function(t){c||(s++,o.onError(t))},function(){c||(s++,o.onCompleted())})),new mn(a,l)},t)}function Ft(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}function $t(t){this.predicate=t}function It(t){this.predicate=t}function Mt(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,o=this.messages.length;r<o;r++){var i=this.messages[r],s=i.value;!function(e){t.scheduleAbsolute(null,i.time,function(){for(var t=n.observers.slice(0),r=0,o=t.length;r<o;r++)e.accept(t[r]);return ln})}(s)}}var Rt={function:!0,object:!0},Lt=Rt[typeof exports]&&exports&&!exports.nodeType?exports:null,Ht=Rt[typeof t]&&t&&!t.nodeType?t:null,Bt=s(Lt&&Ht&&"object"==typeof r&&r),Wt=s(Rt[typeof self]&&self),zt=s(Rt[typeof window]&&window),Vt=Ht&&Ht.exports===Lt?Lt:null,Ut=s(Rt[typeof this]&&this),Qt=Bt||zt!==(Ut&&Ut.window)&&zt||Wt||Ut||Function("return this")(),Gt={internals:{},config:{Promise:Qt.Promise},helpers:{}},Jt=Gt.helpers.noop=function(){},Xt=Gt.helpers.identity=function(t){return t},Kt=Gt.helpers.defaultNow=Date.now,Yt=Gt.helpers.defaultComparer=function(t,e){return Ze(t,e)},Zt=Gt.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},te=(Gt.helpers.defaultKeySerializer=function(t){return t.toString()},Gt.helpers.defaultError=function(t){throw t}),ee=Gt.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},ne=Gt.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),re={e:{}},oe=Gt.internals.tryCatch=function(t){if(!ne(t))throw new TypeError("fn must be a function");return a(t)};Gt.config.longStackSupport=!1;var ie=!1,se=oe(function(){throw new Error})();ie=!!se.e&&!!se.e.stack;var ue,ae=d(),ce="From previous event:",le=Gt.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};le.prototype=Object.create(Error.prototype),le.prototype.name="EmptyError";var fe=Gt.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};fe.prototype=Object.create(Error.prototype),fe.prototype.name="ObjectDisposedError";var he=Gt.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};he.prototype=Object.create(Error.prototype),he.prototype.name="ArgumentOutOfRangeError";var pe=Gt.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};pe.prototype=Object.create(Error.prototype),pe.prototype.name="NotSupportedError";var de=Gt.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};de.prototype=Object.create(Error.prototype),de.prototype.name="NotImplementedError";var ve=Gt.helpers.notImplemented=function(){throw new de},me=(Gt.helpers.notSupported=function(){throw new pe},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Qt.Set&&"function"==typeof(new Qt.Set)["@@iterator"]&&(me="@@iterator");var ye=Gt.doneEnumerator={done:!0,value:i},be=Gt.helpers.isIterable=function(t){return t&&t[me]!==i},ge=Gt.helpers.isArrayLike=function(t){return t&&t.length!==i};Gt.helpers.iterator=me;var _e=Gt.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},we=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],xe=(we.length,"[object Arguments]"),Ee="[object Array]",Ce="[object Boolean]",ke="[object Date]",Se="[object Error]",Ae="[object Function]",Oe="[object Map]",je="[object Number]",De="[object Object]",Ne="[object RegExp]",Te="[object Set]",qe="[object String]",Pe="[object WeakMap]",Fe="[object ArrayBuffer]",$e="[object Float32Array]",Ie="[object Float64Array]",Me="[object Int8Array]",Re="[object Int16Array]",Le="[object Int32Array]",He="[object Uint8Array]",Be="[object Uint8ClampedArray]",We="[object Uint16Array]",ze="[object Uint32Array]",Ve={};Ve[$e]=Ve[Ie]=Ve[Me]=Ve[Re]=Ve[Le]=Ve[He]=Ve[Be]=Ve[We]=Ve[ze]=!0,Ve[xe]=Ve[Ee]=Ve[Fe]=Ve[Ce]=Ve[ke]=Ve[Se]=Ve[Ae]=Ve[Oe]=Ve[je]=Ve[De]=Ve[Ne]=Ve[Te]=Ve[qe]=Ve[Pe]=!1;var Ue=Object.prototype,Qe=Ue.hasOwnProperty,Ge=Ue.toString,Je=Math.pow(2,53)-1,Xe=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;s<r;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),ut=Gt.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},Ke=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Ye=Array.isArray||function(t){return b(t)&&g(t.length)&&Ge.call(t)===Ee},Ze=Gt.internals.isEqual=function(t,e){return C(t,e)},tn=({}.hasOwnProperty,Array.prototype.slice,Gt.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),en=Gt.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var o=0,i=e.length;o<i;o++){var s=e[o];for(var u in s)t[u]=s[u]}},nn=Gt.internals.addRef=function(t,e){return new Ds(function(n){return new mn(e.getDisposable(),t.subscribe(n))})};S.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var rn=Gt.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},on=rn.prototype;on.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},on.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},on.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),
r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},on.peek=function(){return this.items[0].value},on.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=i,this.heapify()},on.dequeue=function(){var t=this.peek();return this.removeAt(0),t},on.enqueue=function(t){var e=this.length++;this.items[e]=new S(rn.count++,t),this.percolate(e)},on.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},rn.count=0;var sn=Gt.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},un=sn.prototype;un.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},un.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);n!==-1&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},un.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}};var an=Gt.Disposable=function(t){this.isDisposed=!1,this.action=t||Jt};an.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var cn=an.create=function(t){return new an(t)},ln=an.empty={dispose:Jt},fn=an.isDisposable=function(t){return t&&ne(t.dispose)},hn=an.checkDisposed=function(t){if(t.isDisposed)throw new fe},pn=an._fixup=function(t){return fn(t)?t:ln},dn=Gt.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};dn.prototype.getDisposable=function(){return this.current},dn.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},dn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var vn=Gt.SerialDisposable=function(){this.isDisposed=!1,this.current=null};vn.prototype.getDisposable=function(){return this.current},vn.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},vn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var mn=Gt.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};mn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var yn=Gt.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};yn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}};var bn=Gt.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?ln:new t(this)},e}();A.prototype.dispose=function(){this.scheduler.schedule(this,O)};var gn=Gt.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||Zt,this.disposable=new dn};gn.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},gn.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},gn.prototype.isCancelled=function(){return this.disposable.isDisposed},gn.prototype.invokeCore=function(){return pn(this.action(this.scheduler,this.state))};var _n=Gt.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new de},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new de},t.now=Kt,t.prototype.now=Kt,t.normalize=function(t){return t<0&&(t=0),t},t}(),wn=_n.normalize,xn=_n.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(a):u=!0,o(e,n),ln}var s=!1,u=!1,a=t.schedule(e,r);u||(i.add(a),s=!0)}var r=e[0],o=e[1],i=new sn;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(c):a=!0,o(e,n),ln}var u=!1,a=!1,c=t.scheduleFuture(e,r,s);a||(i.add(c),u=!0)}var r=e[0],o=e[1],i=new sn;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(_n.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof Qt.setInterval)throw new pe;e=wn(e);var r=t,o=Qt.setInterval(function(){r=n(r)},e);return cn(function(){Qt.clearInterval(o)})}}(_n.prototype),function(t){t.catchError=t.catch=function(t){return new Fn(this,t)}}(_n.prototype);var En,Cn,kn=Gt.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=oe(t._action)(t._state);r===re&&(t._cancel.dispose(),c(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new dn;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),Sn=function(t){function e(){t.call(this)}return tn(e,t),e.prototype.schedule=function(t,e){return pn(e(this,t))},e}(_n),An=_n.immediate=new Sn,On=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return tn(n,t),n.prototype.schedule=function(t,n){var o=new gn(this,t,n,this.now());if(r)r.enqueue(o);else{r=new rn(4),r.enqueue(o);var i=oe(e)();r=null,i===re&&c(i.e)}return o.disposable},n.prototype.scheduleRequired=function(){return!r},n}(_n),jn=_n.currentThread=new On,Dn=function(){var t,e=Jt;if(Qt.setTimeout)t=Qt.setTimeout,e=Qt.clearTimeout;else{if(!Qt.WScript)throw new pe;t=function(t,e){Qt.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),Nn=Dn.setTimeout,Tn=Dn.clearTimeout;!function(){function t(e){if(i)Nn(function(){t(e)},0);else{var n=r[e];if(n){i=!0;var o=oe(n)();Cn(e),i=!1,o===re&&c(o.e)}}}function e(){if(!Qt.postMessage||Qt.importScripts)return!1;var t=!1,e=Qt.onmessage;return Qt.onmessage=function(){t=!0},Qt.postMessage("","*"),Qt.onmessage=e,t}var n=1,r={},i=!1;Cn=function(t){delete r[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=Bt&&Vt&&Bt.setImmediate)&&!s.test(u)&&u;if(ne(u))En=function(e){var o=n++;return r[o]=e,u(function(){t(o)}),o};else if("undefined"!=typeof o&&"[object process]"==={}.toString.call(o))En=function(e){var i=n++;return r[i]=e,o.nextTick(function(){t(i)}),i};else if(e()){var a="ms.rx.schedule"+Math.random(),l=function(e){"string"==typeof e.data&&e.data.substring(0,a.length)===a&&t(e.data.substring(a.length))};Qt.addEventListener("message",l,!1),En=function(t){var e=n++;return r[e]=t,Qt.postMessage(a+e,"*"),e}}else if(Qt.MessageChannel){var f=new Qt.MessageChannel;f.port1.onmessage=function(e){t(e.data)},En=function(t){var e=n++;return r[e]=t,f.port2.postMessage(e),e}}else En="document"in Qt&&"onreadystatechange"in Qt.document.createElement("script")?function(e){var o=Qt.document.createElement("script"),i=n++;return r[i]=e,o.onreadystatechange=function(){t(i),o.onreadystatechange=null,o.parentNode.removeChild(o),o=null},Qt.document.documentElement.appendChild(o),i}:function(e){var o=n++;return r[o]=e,Nn(function(){t(o)},0),o}}();var qn=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(an._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}function i(t,e,n){return function(){e(t,n)}}return tn(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Cn(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Tn(this._id))},e.prototype.schedule=function(t,e){var o=new dn,i=En(n(o,e,this,t));return new mn(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new dn,s=Nn(n(i,r,this,t),e);return new mn(i,new o(s))},e.prototype.scheduleLongRunning=function(t,e){var n=cn(Jt);return En(i(t,e,n)),n},e}(_n),Pn=_n.default=_n.async=new qn,Fn=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return tn(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var o=oe(t)(e._getRecursiveWrapper(n),r);return o===re?(e._handler(o.e)||c(o.e),ln):pn(o)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,o=!1,i=new dn;return i.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(o)return null;var e=oe(n)(t);return e===re?(o=!0,r._handler(e.e)||c(e.e),i.dispose(),null):e})),i},e}(_n),$n=Gt.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new de},t.prototype._acceptObserver=function(t,e,n){throw new de},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return xn(t)||(t=An),new Ds(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),In=function(t){function e(t){this.value=t,this.kind="N"}return tn(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}($n),Mn=function(t){function e(t){this.error=t,this.kind="E"}return tn(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}($n),Rn=function(t){function e(){this.kind="C"}return tn(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}($n),Ln=$n.createOnNext=function(t){return new In(t)},Hn=$n.createOnError=function(t){return new Mn(t)},Bn=$n.createOnCompleted=function(){return new Rn},Wn=Gt.Observer=function(){};Wn.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},Wn.prototype.asObserver=function(){var t=this;return new Qn(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},Wn.prototype.checked=function(){return new Gn(this)};var zn=Wn.create=function(t,e,n){return t||(t=Jt),e||(e=te),n||(n=Jt),new Qn(t,e,n)};Wn.fromNotifier=function(t,e){var n=_e(t,e,1);return new Qn(function(t){return n(Ln(t))},function(t){return n(Hn(t))},function(){return n(Bn())})},Wn.prototype.notifyOn=function(t){return new Xn(t,this)},Wn.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var Vn,Un=Gt.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return tn(e,t),e.prototype.next=ve,e.prototype.error=ve,e.prototype.completed=ve,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(Wn),Qn=Gt.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return tn(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Un),Gn=function(t){function e(e){t.call(this),this._observer=e,this._state=0}tn(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=oe(this._observer.onNext).call(this._observer,t);this._state=0,e===re&&c(e.e)},n.onError=function(t){this.checkAccess();var e=oe(this._observer.onError).call(this._observer,t);this._state=2,e===re&&c(e.e)},n.onCompleted=function(){this.checkAccess();var t=oe(this._observer.onCompleted).call(this._observer);this._state=2,t===re&&c(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(Wn),Jn=Gt.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new vn}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function i(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=oe(n)();return r===re?(t.queue=[],t.hasFaulted=!0,c(r.e)):void e(t)}return tn(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,i))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Un),Xn=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return tn(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Jn),Kn=Gt.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){l(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(Gt.config.longStackSupport&&ie){var e=this._subscribe,n=oe(c)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return Vn=e.prototype,e.isObservable=function(t){return t&&ne(t.subscribe)},Vn.subscribe=Vn.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:zn(t,e,n))},Vn.subscribeOnNext=function(t,e){return this._subscribe(zn("undefined"!=typeof e?function(n){t.call(e,n)}:t))},Vn.subscribeOnError=function(t,e){return this._subscribe(zn(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},Vn.subscribeOnCompleted=function(t,e){return this._subscribe(zn(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),Yn=Gt.ObservableBase=function(t){function e(t){return t&&ne(t.dispose)?t:ne(t)?cn(t):ln}function n(t,n){var r=n[0],o=n[1],i=oe(o.subscribeCore).call(o,r);i!==re||r.fail(re.e)||c(re.e),r.setDisposable(e(i))}function r(){t.call(this)}return tn(r,t),r.prototype._subscribe=function(t){var e=new Ns(t),r=[e,this];return jn.scheduleRequired()?jn.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=ve,r}(Kn),Zn=Gt.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=ne(r)?r:null,this.selector=_e(ne(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},tn(n,Un),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=oe(this.selector)(t,e,this.source);return n===re?this.o.onError(n.e):(ee(n)&&(n=lr(n)),(ge(n)||be(n))&&(n=Kn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Yn),tr=Gt.internals.Enumerable=function(){};j.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var er=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=oe(t.e.next).call(t.e);if(n===re)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var o=n.value;ee(o)&&(o=lr(o));var i=new dn;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new vn,r={isDisposed:!1,o:t,subscription:e,e:this.sources[me]()},o=jn.scheduleRecursive(r,n);return new yn([e,o,new j(r)])},tn(r,Un),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Yn);tr.prototype.concat=function(){return new er(this)};var nr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=oe(t.e.next).call(t.e);if(n===re)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var o=n.value;ee(o)&&(o=lr(o));var i=new dn;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new vn,r={isDisposed:!1,e:this.sources[me](),subscription:e,lastError:null,o:t},o=jn.scheduleRecursive(r,n);return new yn([e,o,new j(r)])},tn(r,Un),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Yn);tr.prototype.catchError=function(){return new nr(this)};var rr=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return tn(e,t),e.prototype[me]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?ye:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(tr),or=tr.repeat=function(t,e){return new rr(t,e)},ir=function(t){function e(t,e,n){this.s=t,this.fn=e?_e(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return tn(e,t),e.prototype[me]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:ye},e}(tr),sr=tr.of=function(t,e,n){return new ir(t,e,n)},ur=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Xn(this._s,t))},e}(Yn);Vn.observeOn=function(t){return new ur(this,t)};var ar=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],o=e[2];r.setDisposable(new A(t,n.subscribe(o)))}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r=new vn;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Yn);Vn.subscribeOn=function(t){return new ar(this,t)};var cr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new dn,o=this,i=this._p;return ne(i)&&(i=oe(i)(),i===re)?(t.onError(i.e),e):(i.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e)},e}(Yn),lr=Kn.fromPromise=function(t,e){return e||(e=Pn),new cr(t,e)};Vn.toPromise=function(t){if(t||(t=Gt.config.Promise),!t)throw new pe("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var fr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},tn(n,Un),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Yn);Vn.toArray=function(){return new fr(this)},Kn.create=function(t,e){return new Ds(t,e)};var hr=function(t){function e(e){this._f=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=oe(this._f)();return e===re?Nr(e.e).subscribe(t):(ee(e)&&(e=lr(e)),e.subscribe(t))},e}(Yn),pr=Kn.defer=function(t){return new hr(t)},dr=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),ln}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===An?r(null,t):this.scheduler.schedule(t,r)},e}(Yn),vr=new dr(An),mr=Kn.empty=function(t){return xn(t)||(t=An),t===An?vr:new dr(t)},yr=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i=oe(e.next).call(e);if(i===re)return t.onError(i.e);if(i.done)return t.onCompleted();var s=i.value;return ne(n)&&(s=oe(n)(s,r),s===re)?t.onError(s.e):(t.onNext(s),void o(r+1))}}return tn(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=F(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Yn),br=Math.pow(2,53)-1;D.prototype[me]=function(){return new N(this._s)},N.prototype[me]=function(){return this},N.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:ye},T.prototype[me]=function(){return new q(this._a)},q.prototype[me]=function(){return this},q.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:ye};var gr=Kn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!ne(e))throw new Error("mapFn when provided must be a function");if(e)var o=_e(e,n,2);return xn(r)||(r=jn),new yr(t,o,r)},_r=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){r<n?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return tn(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Yn),wr=Kn.fromArray=function(t,e){return xn(e)||(e=jn),new _r(t,e)},xr=function(t){function e(e,n,r,o,i){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._s=i,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=oe(t.self._itrFn)(t.newState),t.newState===re)return t.o.onError(t.newState.e);var n=oe(t.self._cndFn)(t.newState);if(n===re)return t.o.onError(n.e);if(n){var r=oe(t.self._resFn)(t.newState);if(r===re)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return tn(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Yn);Kn.generate=function(t,e,n,r,o){return xn(o)||(o=jn),new xr(t,e,n,r,o)},Kn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new _r(e,jn)},Kn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new _r(n,t)},Kn.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Ds(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Kn.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Ds(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var Er=function(t){function e(){t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return ln},e}(Yn),Cr=new Er,kr=Kn.never=function(){return Cr},Sr=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return tn(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Yn);Kn.pairs=function(t,e){return e||(e=jn),new Sr(t,e)};var Ar=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){r<e?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return tn(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Yn);Kn.range=function(t,e,n){return xn(n)||(n=jn),new Ar(t,e,n)};var Or=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new L(t,this);return e.run()},e}(Yn);L.prototype.run=function(){function t(t,r){return(t===-1||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Kn.repeat=function(t,e,n){return xn(n)||(n=jn),new Or(t,e,n)};var jr=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),ln}return tn(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===An?n(null,e):this._scheduler.schedule(e,n)},e}(Yn),Dr=(Kn.return=Kn.just=function(t,e){return xn(e)||(e=An),new jr(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),ln}return tn(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===An?n(null,e):this._scheduler.schedule(e,n)},e}(Yn)),Nr=Kn.throw=function(t,e){return xn(e)||(e=An),new Dr(t,e)},Tr=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=ln,n=oe(this._resFn)();if(n===re)return new mn(Nr(n.e).subscribe(t),e);n&&(e=n);var r=oe(this._obsFn)(n);return r===re?new mn(Nr(r.e).subscribe(t),e):new mn(r.subscribe(t),e)},e}(Yn);Kn.using=function(t,e){return new Tr(t,e)},Vn.amb=function(t){var e=this;return new Ds(function(n){function r(){i||(i=s,c.dispose())}function o(){i||(i=u,a.dispose())}var i,s="L",u="R",a=new dn,c=new dn;ee(t)&&(t=lr(t));var l=zn(function(t){r(),i===s&&n.onNext(t)},function(t){r(),i===s&&n.onError(t)},function(){r(),i===s&&n.onCompleted()}),f=zn(function(t){o(),i===u&&n.onNext(t)},function(t){o(),i===u&&n.onError(t)},function(){o(),i===u&&n.onCompleted()});return a.setDisposable(e.subscribe(l)),c.setDisposable(t.subscribe(f)),new mn(a,c)})},Kn.amb=function(){var t,e=kr();if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(t);for(var r=0;r<n;r++)t[r]=arguments[r]}for(var r=0,n=t.length;r<n;r++)e=H(e,t[r]);return e};var qr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new dn,n=new vn;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Pr(t,n,this._fn))),n},e}(Yn),Pr=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=oe(this._fn)(t);if(e===re)return this._o.onError(e.e);ee(e)&&(e=lr(e));var n=new dn;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(Un);Vn.catch=function(t){return ne(t)?new qr(this,t):Fr([this,t])};var Fr=Kn.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return sr(t).catchError()};Vn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Mr.apply(this,e)};var $r=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:k(e,B),hasValueAll:!1,isDone:k(e,B),values:new Array(e)},o=0;o<e;o++){var i=this._params[o],s=new dn;n[o]=s,ee(i)&&(i=lr(i)),s.setDisposable(i.subscribe(new Ir(t,o,this._cb,r)))}return new yn(n)},e}(Yn),Ir=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return tn(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(Xt))){var e=oe(this._cb).apply(null,this._state.values);if(e===re)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(Xt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(Xt)&&this._o.onCompleted()},e}(Un),Mr=Kn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ne(e[t-1])?e.pop():W;return Array.isArray(e[0])&&(e=e[0]),new $r(e,r)};Vn.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),Hr.apply(null,t)};var Rr=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Un),Lr=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];ee(n)&&(n=lr(n));var r=new dn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Rr(t,e)))}}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new vn,r=cn(Jt),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=An.scheduleRecursive(o,n);return new yn([e,r,i])},e}(Yn),Hr=Kn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e];
}return new Lr(t)};Vn.concatAll=function(){return this.merge(1)};var Br=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new sn;return e.add(this.source.subscribe(new Wr(t,this.maxConcurrent,e))),e},e}(Yn),Wr=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return tn(e,t),e.prototype.handleSubscribe=function(t){var e=new dn;this.g.add(e),ee(t)&&(t=lr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},tn(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Un);Vn.merge=function(t){return"number"!=typeof t?zr(this,t):new Br(this,t)};var zr=Kn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(xn(arguments[0]))for(t=arguments[0],e=1;e<r;e++)n.push(arguments[e]);else for(t=An,e=0;e<r;e++)n.push(arguments[e]);else for(t=An,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),R(t,n).mergeAll()},Vr=function(t){function e(e){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new sn,n=new dn;return e.add(n),n.setDisposable(this.source.subscribe(new Ur(t,e))),e},e}(Yn),Ur=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=new dn;this.g.add(e),ee(t)&&(t=lr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},tn(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Un);Vn.mergeAll=function(){return new Vr(this)};var Qr=Gt.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Qr.prototype=Object.create(Error.prototype),Qr.prototype.name="CompositeError";var Gr=function(t){function e(e){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new sn,n=new dn,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Jr(e,r))),e},e}(Yn),Jr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Qr(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=new dn;this._group.add(e),ee(t)&&(t=lr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},tn(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Un);Kn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}var r=R(null,t);return new Gr(r)},Vn.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Yr([this,t])};var Xr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];ee(n)&&(n=lr(n));var r=new dn;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Kr(t,e)))}else t.o.onCompleted()}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new vn,r={pos:0,subscription:e,o:t,sources:this.sources},o=An.scheduleRecursive(r,n);return new mn(e,o)},e}(Yn),Kr=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(Un),Yr=Kn.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Xr(t)},Zr=function(t){function e(e,n){this._s=e,this._o=ee(n)?lr(n):n,this._open=!1,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new dn;e.setDisposable(this._s.subscribe(new to(t,this))),ee(this._o)&&(this._o=lr(this._o));var n=new dn;return n.setDisposable(this._o.subscribe(new eo(t,this,n))),new mn(e,n)},e}(Yn),to=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Un),eo=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return tn(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Un);Vn.skipUntil=function(t){return new Zr(this,t)};var no=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Un.call(this)}function r(t,e){this.parent=t,this.id=e,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new vn,r=this.source.subscribe(new n(t,e));return new mn(r,e)},tn(n,Un),n.prototype.next=function(t){var e=new dn,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),ee(t)&&(t=lr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},tn(r,Un),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Yn);Vn.switch=Vn.switchLatest=function(){return new no(this)};var ro=function(t){function e(e,n){this.source=e,this.other=ee(n)?lr(n):n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return new mn(this.source.subscribe(t),this.other.subscribe(new oo(t)))},e}(Yn),oo=function(t){function e(e){this._o=e,t.call(this)}return tn(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=Jt,e}(Un);Vn.takeUntil=function(t){return new ro(this,t)};var io=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:k(e,B),hasValueAll:!1,values:new Array(e)},r=this._ss.length,o=new Array(r+1),i=0;i<r;i++){var s=this._ss[i],u=new dn;ee(s)&&(s=lr(s)),u.setDisposable(s.subscribe(new so(t,i,n))),o[i]=u}var a=new dn;return a.setDisposable(this._s.subscribe(new uo(t,this._cb,n))),o[r]=a,new yn(o)},e}(Yn),so=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(Xt)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=Jt,e}(Un),uo=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=oe(this._cb).apply(null,e);return n===re?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ne(e[t-1])?e.pop():W;return Array.isArray(e[0])&&(e=e[0]),new io(this,e,r)};var ao=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=k(e,B),o=k(e,z),i=0;i<e;i++){var s=this._s[i],u=new dn;n[i]=u,ee(s)&&(s=lr(s)),u.setDisposable(s.subscribe(new co(t,i,this,o,r)))}return new yn(n)},e}(Yn),co=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return tn(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=oe(this._p._cb).apply(null,e);if(i===re)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(Xt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(Xt)&&this._o.onCompleted()},e}(Un);Vn.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ne(e[t-1])?e.pop():W;Array.isArray(e[0])&&(e=e[0]);var o=this;return e.unshift(o),new ao(e,r)},Kn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=ne(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var lo=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),o={q:k(n,z),done:k(n,B),cb:this._cb,o:t},i=0;i<n;i++)!function(t){var n=e[t],i=new dn;(ge(n)||be(n))&&(n=gr(n)),r[t]=i,i.setDisposable(n.subscribe(new fo(o,t)))}(i);return new yn(r)},e}(Yn),fo=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return tn(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=oe(this._s.cb).apply(null,e);if(i===re)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(Xt)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(Xt)&&this._s.o.onCompleted()},e}(Un);Vn.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ne(e[t-1])?e.pop():W,o=this;return e.unshift(o),new lo(e,r)},Vn.asObservable=function(){return new Ds(V(this),this)},Vn.bufferWithCount=Vn.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(U).filter(Q)};var ho=function(t){function e(e){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t))},e}(Yn),po=function(t){function e(e){this._o=e,t.call(this)}return tn(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.dematerialize=function(){return new ho(this)};var vo=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new mo(t,this.keyFn,this.comparer))},e}(Yn),mo=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e,n=t;return ne(this.keyFn)&&(n=oe(this.keyFn)(t),n===re)?this.o.onError(n.e):this.hasCurrentKey&&(e=oe(this.comparer)(this.currentKey,n),e===re)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Un);Vn.distinctUntilChanged=function(t,e){return e||(e=Yt),new vo(this,t,e)};var yo=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||ne(e._oN)?zn(e._oN||Jt,e._oE||Jt,e._oC||Jt):e._oN,this.isStopped=!1,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},tn(n,Un),n.prototype.next=function(t){var e=oe(this.t.onNext).call(this.t,t);e===re&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=oe(this.t.onError).call(this.t,t);return e===re?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=oe(this.t.onCompleted).call(this.t);return t===re?this.o.onError(t.e):void this.o.onCompleted()},e}(Yn);Vn.do=Vn.tap=Vn.doAction=function(t,e,n){return new yo(this,t,e,n)},Vn.doOnNext=Vn.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},Vn.doOnError=Vn.tapOnError=function(t,e){return this.tap(Jt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},Vn.doOnCompleted=Vn.tapOnCompleted=function(t,e){return this.tap(Jt,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var bo=function(t){function e(e,n,r){this.source=e,this._fn=_e(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return tn(e,t),e.prototype.subscribeCore=function(t){var e=oe(this.source.subscribe).call(this.source,t);return e===re&&(this._fn(),c(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=oe(this._s.dispose).call(this._s);this._fn(),t===re&&c(t.e)}},e}(Yn);Vn.finally=function(t,e){return new bo(this,t,e)};var go=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=Jt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Yn);Vn.ignoreElements=function(){return new go(this)};var _o=function(t){function e(e,n){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new wo(t))},e}(Yn),wo=function(t){function e(e){this._o=e,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._o.onNext(Ln(t))},e.prototype.error=function(t){this._o.onNext(Hn(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(Bn()),this._o.onCompleted()},e}(Un);Vn.materialize=function(){return new _o(this)},Vn.repeat=function(t){return or(this,t).concat()},Vn.retry=function(t){return or(this,t).catchError()};var xo=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return tn(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ps,o=new Ps,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),a={isDisposed:!1},c=new vn,l=jn.scheduleRecursive(null,function(e,i){if(!a.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var l=s.value;ee(l)&&(l=lr(l));var f=new dn,h=new dn;c.setDisposable(new mn(h,f)),f.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){h.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),f.dispose()},function(){t.onCompleted()}))}});return new yn([s,c,l,e(a)])},n}(Yn);Vn.retryWhen=function(t){return new xo(G(this),t)};var Eo=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return tn(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ps,o=new Ps,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),a={isDisposed:!1},c=new vn,l=jn.scheduleRecursive(null,function(e,i){if(!a.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var l=s.value;ee(l)&&(l=lr(l));var f=new dn,h=new dn;c.setDisposable(new mn(h,f)),f.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){h.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),f.dispose()}))}});return new yn([s,c,l,e(a)])},n}(Yn);Vn.repeatWhen=function(t){return new Eo(G(this),t)};var Co=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ko(t,this))},e}(Yn),ko=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=oe(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?oe(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===re?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Un);Vn.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Co(this,n,e,t)};var So=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ao(t,this._c))},e}(Yn),Ao=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return tn(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.skipLast=function(t){if(t<0)throw new he;return new So(this,t)},Vn.startWith=function(){var t,e=0;arguments.length&&xn(arguments[0])?(t=arguments[0],e=1):t=An;for(var n=[],r=e,o=arguments.length;r<o;r++)n.push(arguments[r]);return Hr.apply(null,[wr(n,t),this])};var Oo=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return tn(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Un);Vn.takeLast=function(t){if(t<0)throw new he;var e=this;return new Ds(function(n){return e.subscribe(new Oo(n,t))},e)};var jo=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return tn(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(Un);Vn.takeLastBuffer=function(t){if(t<0)throw new he;var e=this;return new Ds(function(n){return e.subscribe(new jo(n,t))},e)},Vn.windowWithCount=Vn.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),t<=0)throw new he;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),e<=0)throw new he;return new Ds(function(r){function o(){var t=new Ps;a.push(t),r.onNext(nn(t,s))}var i=new dn,s=new bn(i),u=0,a=[];return o(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=a.length;r<i;r++)a[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&a.shift().onCompleted(),++u%e===0&&o()},function(t){for(;a.length>0;)a.shift().onError(t);r.onError(t)},function(){for(;a.length>0;)a.shift().onCompleted();r.onCompleted()})),s},n)},Vn.selectConcat=Vn.concatMap=function(t,e,n){return ne(t)&&ne(e)?this.concatMap(function(n,r){var o=t(n,r);return ee(o)&&(o=lr(o)),(ge(o)||be(o))&&(o=gr(o)),o.map(function(t,o){return e(n,t,r,o)})}):ne(t)?J(this,t,n):J(this,function(){return t})},Vn.concatMapObserver=Vn.selectConcatObserver=function(t,e,n,r){var o=this,i=_e(t,r,2),s=_e(e,r,1),u=_e(n,r,0);return new Ds(function(t){var e=0;return o.subscribe(function(n){var r;try{r=i(n,e++)}catch(e){return void t.onError(e)}ee(r)&&(r=lr(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(e){return void t.onError(e)}ee(n)&&(n=lr(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(e){return void t.onError(e)}ee(e)&&(e=lr(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var Do=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(Un);Vn.defaultIfEmpty=function(t){var e=this;return t===i&&(t=null),new Ds(function(n){return e.subscribe(new Do(n,t))},e)},K.prototype.push=function(t){var e=X(this.set,t,this.comparer)===-1;return e&&this.set.push(t),e};var No=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new To(t,this._keyFn,this._cmpFn))},e}(Yn),To=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new K(r),t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=t;return ne(this._keyFn)&&(e=oe(this._keyFn)(t),e===re)?this._o.onError(e.e):void(this._h.push(e)&&this._o.onNext(t))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.distinct=function(t,e){return e||(e=Yt),new No(this,t,e)},Vn.groupBy=function(t,e){return this.groupByUntil(t,e,kr)},Vn.groupByUntil=function(t,e,n){var r=this;return new Ds(function(o){var s=new Qi,u=new sn,a=new bn(u),c=function(t){return function(e){e.onError(t)}};return u.add(r.subscribe(function(r){var l=oe(t)(r);if(l===re)return s.forEach(c(l.e)),o.onError(l.e);var f=!1,h=s.get(l);if(h===i&&(h=new Ps,s.set(l,h),f=!0),f){var p=new qs(l,h,a),d=new qs(l,h),v=oe(n)(d);if(v===re)return s.forEach(c(v.e)),o.onError(v.e);o.onNext(p);var m=new dn;u.add(m),m.setDisposable(v.take(1).subscribe(Jt,function(t){s.forEach(c(t)),o.onError(t)},function(){s.delete(l)&&h.onCompleted(),u.remove(m)}))}var y=r;return ne(e)&&(y=oe(e)(r),y===re)?(s.forEach(c(y.e)),o.onError(y.e)):void h.onNext(y)},function(t){s.forEach(c(t)),o.onError(t)},function(){s.forEach(function(t){t.onCompleted()}),o.onCompleted()})),a},r)};var qo=function(t){function e(e,n,r){this.source=e,this.selector=_e(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Un.call(this)}return tn(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},tn(r,Un),r.prototype.next=function(t){var e=oe(this.selector)(t,this.i++,this.source);return e===re?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Yn);Vn.map=Vn.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof qo?this.internalMap(n,e):new qo(this,n,e)},Vn.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map(Y(e,t))},Vn.flatMap=Vn.selectMany=Vn.mergeMap=function(t,e,n){return new Zn(this,t,e,n).mergeAll()},Vn.flatMapObserver=Vn.selectManyObserver=function(t,e,n,r){var o=this;return new Ds(function(i){var s=0;return o.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(t){return void i.onError(t)}ee(n)&&(n=lr(n)),i.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(t){return void i.onError(t)}ee(n)&&(n=lr(n)),i.onNext(n),i.onCompleted()},function(){var t;try{t=n.call(r)}catch(t){return void i.onError(t)}ee(t)&&(t=lr(t)),i.onNext(t),i.onCompleted()})},o).mergeAll()},Vn.flatMapLatest=Vn.switchMap=function(t,e,n){return new Zn(this,t,e,n).switchLatest()};var Po=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},tn(n,Un),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Yn);Vn.skip=function(t){if(t<0)throw new he;return new Po(this,t)};var Fo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new $o(t,this))},e}(Yn),$o=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return tn(e,t),e.prototype.next=function(t){if(!this._r){var e=oe(this._p._fn)(t,this._i++,this._p);if(e===re)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.skipWhile=function(t,e){var n=_e(t,e,3);return new Fo(this,n)};var Io=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},tn(n,Un),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Yn);Vn.take=function(t,e){if(t<0)throw new he;return 0===t?mr(e):new Io(this,t)};var Mo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ro(t,this))},e}(Yn),Ro=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return tn(e,t),e.prototype.next=function(t){return this._r&&(this._r=oe(this._p._fn)(t,this._i++,this._p),this._r===re)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.takeWhile=function(t,e){var n=_e(t,e,3);return new Mo(this,n)};var Lo=function(t){function e(e,n,r){this.source=e,this.predicate=_e(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Un.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},tn(r,Un),r.prototype.next=function(t){var e=oe(this.predicate)(t,this.i++,this.source);return e===re?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Yn);Vn.filter=Vn.where=function(t,e){return this instanceof Lo?this.internalFilter(t,e):new Lo(this,t,e)};var Ho=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Bo(t,this._k,this._c))},e}(Yn),Bo=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=oe(this._k)(t);if(e===re)return this._o.onError(e.e);var n=0;if(this._hv){if(n=oe(this._c)(e,this._v),n===re)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(Un),Wo=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new zo(t,this))},e}(Yn),zo=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=oe(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?oe(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===re?this._o.onError(this._a.e):void this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new le),this._o.onCompleted()},e}(Un);Vn.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Wo(this,n,e,t)};var Vo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Uo(t,this._fn,this.source))},e}(Yn),Uo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=oe(this._fn)(t,this._i++,this._s);return e===re?this._o.onError(e.e):void(Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Un);Vn.some=function(t,e){var n=_e(t,e,3);return new Vo(this,n)};var Qo=function(t){function e(e){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Go(t))},e}(Yn),Go=function(t){function e(e){this._o=e,t.call(this)}return tn(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Un);Vn.isEmpty=function(){return new Qo(this)};var Jo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Xo(t,this._fn,this.source))},e}(Yn),Xo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=oe(this._fn)(t,this._i++,this._s);return e===re?this._o.onError(e.e):void(Boolean(e)||(this._o.onNext(!1),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Un);Vn.every=function(t,e){var n=_e(t,e,3);return new Jo(this,n)};var Ko=function(t){function e(e,n,r){var o=+r||0;Math.abs(o)===1/0&&(o=0),this.source=e,this._elem=n,this._n=o,
t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),ln):this.source.subscribe(new Yo(t,this._elem,this._n))},e}(Yn),Yo=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}return tn(e,t),e.prototype.next=function(t){this._i++>=this._n&&n(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Un);Vn.includes=function(t,e){return new Ko(this,t,e)};var Zo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ti(t,this._fn,this.source))},e}(Yn),ti=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){if(this._fn){var e=oe(this._fn)(t,this._i++,this._s);if(e===re)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Un);Vn.count=function(t,e){var n=_e(t,e,3);return new Zo(this,n)};var ei=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),ln):this.source.subscribe(new ni(t,this._e,this._n))},e}(Yn),ni=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(Un);Vn.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new ei(this,t,n)};var ri=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new oi(t,this._fn,this.source))},e}(Yn),oi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){if(this._fn){var e=oe(this._fn)(t,this._i++,this._s);if(e===re)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Un);Vn.sum=function(t,e){var n=_e(t,e,3);return new ri(this,n)},Vn.minBy=function(t,e){return e||(e=Zt),new Ho(this,t,function(t,n){return e(t,n)*-1})},Vn.min=function(t){return this.minBy(Xt,t).map(Z)},Vn.maxBy=function(t,e){return e||(e=Zt),new Ho(this,t,e)},Vn.max=function(t){return this.maxBy(Xt,t).map(Z)};var ii=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new si(t,this._fn,this.source))},e}(Yn),si=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){if(this._fn){var e=oe(this._fn)(t,this._c++,this._s);if(e===re)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){return 0===this._c?this._o.onError(new le):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},e}(Un);Vn.average=function(t,e){var n,r=this;return ne(t)&&(n=_e(t,e,3)),new ii(r,n)},Vn.sequenceEqual=function(t,e){var n=this;return e||(e=Yt),new Ds(function(r){var o=!1,i=!1,s=[],u=[],a=n.subscribe(function(t){if(u.length>0){var n=u.shift(),o=oe(e)(n,t);if(o===re)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){o=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});(ge(t)||be(t))&&(t=gr(t)),ee(t)&&(t=lr(t));var c=t.subscribe(function(t){if(s.length>0){var n=s.shift(),i=oe(e)(n,t);if(i===re)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){i=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new mn(a,c)},n)};var ui=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ai(t,this._i,this._d))},e}(Yn),ai=function(t){function e(e,n,r){this._o=e,this._i=n,this._d=r,t.call(this)}return tn(e,t),e.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d===i?this._o.onError(new he):(this._o.onNext(this._d),this._o.onCompleted())},e}(Un);Vn.elementAt=function(t,e){if(t<0)throw new he;return new ui(this,t,e)};var ci=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=oe(this._obj.predicate)(t,this._i++,this._s);if(n===re)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new le):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Un);Vn.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ne(n.predicate)){var o=n.predicate;n.predicate=_e(o,n.thisArg,3)}return new Ds(function(t){return r.subscribe(new ci(t,n,r))},r)};var li=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new fi(t,this._obj,this.source))},e}(Yn),fi=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){if(this._obj.predicate){var e=oe(this._obj.predicate)(t,this._i++,this._s);if(e===re)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._obj.defaultValue===i?this._o.onError(new le):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Un);Vn.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ne(t.predicate)){var e=t.predicate;t.predicate=_e(e,t.thisArg,3)}return new li(this,t)};var hi=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new pi(t,this._obj,this.source))},e}(Yn),pi=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=oe(this._obj.predicate)(t,this._i++,this._s);if(n===re)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new le):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Un);Vn.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ne(t.predicate)){var e=t.predicate;t.predicate=_e(e,t.thisArg,3)}return new hi(this,t)};var di=function(t){function e(e,n,r,o){this._o=e,this._s=n,this._cb=r,this._y=o,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=oe(this._cb)(t,this._i,this._s);return e===re?this._o.onError(e.e):void(e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(Un);Vn.find=function(t,e){return tt(this,t,e,!1)},Vn.findIndex=function(t,e){return tt(this,t,e,!0)};var vi=function(t){function e(e){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new mi(t))},e}(Yn),mi=function(t){function e(e){this._o=e,this._s=new Qt.Set,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(Un);Vn.toSet=function(){if("undefined"==typeof Qt.Set)throw new TypeError;return new vi(this)};var yi=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new bi(t,this._k,this._e))},e}(Yn),bi=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new Qt.Map,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=oe(this._k)(t);if(e===re)return this._o.onError(e.e);var n=t;return this._e&&(n=oe(this._e)(t),n===re)?this._o.onError(n.e):void this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(Un);Vn.toMap=function(t,e){if("undefined"==typeof Qt.Map)throw new TypeError;return new yi(this,t,e)};var gi=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new _i(t,this._b,this._e))},e}(Yn),_i=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.slice=function(t,e){var n=t||0;if(n<0)throw new Gt.ArgumentOutOfRangeError;if("number"==typeof e&&e<n)throw new Gt.ArgumentOutOfRangeError;return new gi(this,n,e)};var wi=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),ln):this.source.subscribe(new xi(t,this._e,this._n))},e}(Yn),xi=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(Un);Vn.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new wi(this,t,n)},Kn.wrap=function(t){function e(){return Kn.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var Ei=Kn.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,o=arguments.length;r<o;r++)n.push(arguments[r]);return new Ds(function(r){function o(e){var n=oe(t.next).call(t,e);return n===re?r.onError(n.e):void s(n)}function i(e){var n=oe(t.next).call(t,e);return n===re?r.onError(n.e):void s(n)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=et.call(e,t.value),s=null,a=!1;Kn.isObservable(n)?u.add(n.subscribe(function(t){a=!0,s=t},i,function(){a&&o(s)})):i(new TypeError("type not supported"))}var u=new sn;return ne(t)&&(t=t.apply(e,n)),t&&ne(t.next)?(o(),u):(r.onNext(t),r.onCompleted())})};Kn.start=function(t,e,n){return Ci(t,e,n)()};var Ci=Kn.toAsync=function(t,e,n){return xn(n)||(n=Pn),function(){var r=arguments,o=new Fs;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(t){return void o.onError(t)}o.onNext(n),o.onCompleted()}),o.asObservable()}};Kn.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return at(t,e,n,o)}},Kn.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return lt(t,e,n,o)}},pt.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Gt.config.useNativeEvents=!1;var ki=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return ne(e)&&(n=oe(e).apply(null,arguments),n===re)?t.onError(n.e):void t.onNext(n)}}return tn(e,t),e.prototype.subscribeCore=function(t){return dt(this._el,this._n,n(t,this._fn))},e}(Yn);Kn.fromEvent=function(t,e,n){return t.addListener?Ai(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):Gt.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new ki(t,e,n).publish().refCount():Ai(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var Si=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return ne(e)&&(n=oe(e).apply(null,arguments),n===re)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return tn(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||(ne(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Yn),Ai=Kn.fromEventPattern=function(t,e,n){return new Si(t,e,n).publish().refCount()};Kn.startAsync=function(t){var e=oe(t)();return e===re?Nr(e.e):lr(e)};var Oi=function(t){function e(e,n){this.source=e,this.controller=new Ps,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return tn(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=ln,o=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=ln)});return new yn([n,r,o])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Kn);Vn.pausable=function(t){return new Oi(this,t)};var ji=function(t){function e(e,n){this.source=e,this.controller=new Ps,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return tn(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[],o=vt(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==i&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()});return o},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Kn);Vn.pausableBuffered=function(t){return new ji(this,t)};var Di=function(t){function e(e,n,r){t.call(this),this.subject=new Ni(n,r),this.source=e.multicast(this.subject).refCount()}return tn(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Kn),Ni=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Ps,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||jn}return tn(e,t),en(e.prototype,Wn,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push($n.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push($n.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push($n.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),o=e.hasCompleted||e.hasFailed;if(!o&&r>0)return e.requestedCount=r,cn(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Kn);Vn.controlled=function(t,e){return t&&xn(t)&&(e=t,t=!0),null==t&&(t=!0),new Di(this,t,e)};var Ti=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}tn(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new mn(this.subscription,Pn.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return tn(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=Pn.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Un);return e}(Kn);Di.prototype.stopAndWait=function(){return new Ti(this)};var qi=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}tn(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new mn(this.subscription,Pn.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return tn(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=Pn.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Un);return e}(Kn);Di.prototype.windowed=function(t){return new qi(this,t)},Vn.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e)&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var Pi=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new mn(this._fn2(e).subscribe(t),e.connect())},e}(Yn);Vn.multicast=function(t,e){return ne(t)?new Pi(this,t,e):new Ii(this,t)},Vn.publish=function(t){return t&&ne(t)?this.multicast(function(){return new Ps},t):this.multicast(new Ps)},Vn.share=function(){return this.publish().refCount()},Vn.publishLast=function(t){return t&&ne(t)?this.multicast(function(){return new Fs},t):this.multicast(new Fs)},Vn.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new $s(e)},t):this.multicast(new $s(t))},Vn.shareValue=function(t){return this.publishValue(t).refCount()},Vn.replay=function(t,e,n,r){return t&&ne(t)?this.multicast(function(){return new Is(e,n,r)},t):this.multicast(new Is(e,n,r))},Vn.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Fi=function(t,e){this._s=t,this._o=e};Fi.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var $i=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return tn(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(Yn),Ii=Gt.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return tn(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return ln;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new $i(this)},e}(Kn);Vn.singleInstance=function(){function t(){return r||(r=!0,e=n.finally(function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new Ds(function(e){return t().subscribe(e)})},Vn.join=function(t,e,n,r){var o=this;return new Ds(function(i){var s=new sn,u=!1,a=!1,c=0,l=0,f=new Qi,h=new Qi,p=function(t){i.onError(t)};return s.add(o.subscribe(function(t){var n=c++,o=new dn;f.set(n,t),s.add(o);var a=oe(e)(t);return a===re?i.onError(a.e):(o.setDisposable(a.take(1).subscribe(Jt,p,function(){f.delete(n)&&0===f.size&&u&&i.onCompleted(),s.remove(o)})),void h.forEach(function(e){var n=oe(r)(t,e);return n===re?i.onError(n.e):void i.onNext(n)}))},p,function(){u=!0,(a||0===f.size)&&i.onCompleted()})),s.add(t.subscribe(function(t){var e=l++,o=new dn;h.set(e,t),s.add(o);var u=oe(n)(t);return u===re?i.onError(u.e):(o.setDisposable(u.take(1).subscribe(Jt,p,function(){h.delete(e)&&0===h.size&&a&&i.onCompleted(),s.remove(o)})),void f.forEach(function(e){var n=oe(r)(e,t);return n===re?i.onError(n.e):void i.onNext(n)}))},p,function(){a=!0,(u||0===h.size)&&i.onCompleted()})),s},o)},Vn.groupJoin=function(t,e,n,r){var o=this;return new Ds(function(i){function s(t){}var u=new sn,a=new bn(u),c=new Qi,l=new Qi,f=0,h=0,s=function(t){return function(e){e.onError(t)}};return u.add(o.subscribe(function(t){var n=new Ps,o=f++;c.set(o,n);var h=oe(r)(t,nn(n,a));if(h===re)return c.forEach(s(h.e)),i.onError(h.e);i.onNext(h),l.forEach(function(t){n.onNext(t)});var p=new dn;u.add(p);var d=oe(e)(t);return d===re?(c.forEach(s(d.e)),i.onError(d.e)):void p.setDisposable(d.take(1).subscribe(Jt,function(t){c.forEach(s(t)),i.onError(t)},function(){c.delete(o)&&n.onCompleted(),u.remove(p)}))},function(t){c.forEach(s(t)),i.onError(t)},function(){i.onCompleted()})),u.add(t.subscribe(function(t){var e=h++;l.set(e,t);var r=new dn;u.add(r);var o=oe(n)(t);return o===re?(c.forEach(s(o.e)),i.onError(o.e)):(r.setDisposable(o.take(1).subscribe(Jt,function(t){c.forEach(s(t)),i.onError(t)},function(){l.delete(e),u.remove(r)})),void c.forEach(function(e){e.onNext(t)}))},function(t){c.forEach(s(t)),i.onError(t)})),a},o)},Vn.buffer=function(){return this.window.apply(this,arguments).flatMap(U)},Vn.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?yt.call(this,t):"function"==typeof t?bt.call(this,t):mt.call(this,t,e)};var Mi=function(t){function e(e){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ri(t))},e}(Yn),Ri=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.pairwise=function(){return new Mi(this)},Vn.partition=function(t,e){var n=_e(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Li=function(t){function e(t,e){this.c=t,this.s=e}return tn(e,t),e.prototype[me]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(tr);Vn.letBind=Vn.let=function(t){return t(this)},Kn.if=function(t,e,n){return pr(function(){return n||(n=mr()),ee(e)&&(e=lr(e)),ee(n)&&(n=lr(n)),"function"==typeof n.now&&(n=mr(n)),t()?e:n})},Kn.for=Kn.forIn=function(t,e,n){return sr(t,e,n).concat()};var Hi=Kn.while=Kn.whileDo=function(t,e){return ee(e)&&(e=lr(e)),gt(t,e).concat()};Vn.doWhile=function(t){return Hr([this,Hi(t,this)])},Kn.case=function(t,e,n){return pr(function(){ee(n)&&(n=lr(n)),n||(n=mr()),xn(n)&&(n=mr(n));var r=e[t()];return ee(r)&&(r=lr(r)),r||n})};var Bi=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],o=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);n=r.q.shift();var i=new dn;r.d.add(i),i.setDisposable(n.subscribe(new Wi(r,o,i))),e([r,o])}return tn(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new vn,n=new sn(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Yn),Wi=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=oe(this._p._fn)(t);return e===re?this._s.o.onError(e.e):(this._s.q.push(e),this._s.activeCount++,void this._p._ensureActive(this._s))},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(Un);Vn.expand=function(t,e){return xn(e)||(e=jn),new Bi(this,t,e)};var zi=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),ln;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new sn,o=0,i=this._sources.length;o<i;o++){var s=this._sources[o];ee(s)&&(s=lr(s)),r.add(s.subscribe(new Vi(t,n,o,this._cb,r)))}return r},e}(Yn),Vi=function(t){function e(e,n,r,o,i){this._o=e,this._s=n,this._i=r,this._cb=o,this._subs=i,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=oe(this._cb).apply(null,this._s.results);if(e===re)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(Un);Kn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ne(e[t-1])?e.pop():W;return Array.isArray(e[0])&&(e=e[0]),new zi(e,r)},Vn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Kn.forkJoin.apply(null,e)},Vn.manySelect=Vn.extend=function(t,e){xn(e)||(e=Gt.Scheduler.immediate);var n=this;return pr(function(){var r;return n.map(function(t){var e=new Ui(t);return r&&r.onNext(t),r=e,e}).tap(Jt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Ui=function(t){function e(e){t.call(this),this.head=e,this.tail=new Fs}return tn(e,t),en(e.prototype,Wn,{_subscribe:function(t){var e=new sn;return e.add(jn.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Kn.empty())},onError:function(t){this.onNext(Kn.throw(t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Kn),Qi=Qt.Map||function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.delete=function(t){var e=this._keys.indexOf(t);return e!==-1&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.get=function(t){var e=this._keys.indexOf(t);return e===-1?i:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return n===-1?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();_t.prototype.and=function(t){return new _t(this.patterns.concat(t))},_t.prototype.thenDo=function(t){return new wt(this,t)},wt.prototype.activate=function(t,e,n){for(var r=[],o=xt(e),i=0,s=this.expression.patterns.length;i<s;i++)r.push(Ct(t,this.expression.patterns[i],o));var u=new kt(r,Et(this,e),function(){for(var t=0,e=r.length;t<e;t++)r[t].removeActivePlan(u);n(u)});for(i=0,s=r.length;i<s;i++)r[i].addActivePlan(u);return u},kt.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},kt.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;t<e;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],o=!1;for(t=0,e=this.joinObserverArray.length;t<e;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(o=!0);if(o)this.onCompleted();else{this.dequeue();var i=[];for(t=0,e=r.length;t<r.length;t++)i.push(r[t].value);this.onNext.apply(this,i)}}};var Gi=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new dn,this.isDisposed=!1}tn(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;n<r;n++)e[n].match()}},n.error=Jt,n.completed=Jt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(Un);Vn.and=function(t){return new _t([this,t])},Vn.thenDo=function(t){return new _t([this]).thenDo(t)},Kn.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Ds(function(e){var n=[],r=new Qi,o=zn(function(t){e.onNext(t)},function(t){r.forEach(function(e){
e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var i=0,s=t.length;i<s;i++)n.push(t[i].activate(r,o,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(t){return Nr(t).subscribe(e)}var u=new sn;return r.forEach(function(t){t.subscribe(),u.add(t)}),u})};var Ji=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return tn(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Yn),Xi=Kn.interval=function(t,e){return Ot(t,t,xn(e)?e:Pn)};Kn.timer=function(t,e,n){var r;return xn(n)||(n=Pn),null!=e&&"number"==typeof e?r=e:xn(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===i?St(t,n):t instanceof Date&&r!==i?At(t,e,n):Ot(t,r,n)};Vn.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return xn(n)||(n=Pn),e instanceof Date?Dt(this,e,n):jt(this,e,n)}if(Kn.isObservable(t)||ne(t))return Nt(this,t,arguments[1]);throw new Error("Invalid arguments")};var Ki=function(t){function e(e,n,r){xn(r)||(r=Pn),this.source=e,this._dt=n,this._s=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new vn;return new mn(this.source.subscribe(new Yi(t,this._dt,this._s,e)),e)},e}(Yn),Yi=function(t){function e(e,n,r,o){this._o=e,this._d=n,this._scheduler=r,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new dn;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Un);Vn.debounce=function(){if(ne(arguments[0]))return Tt(this,arguments[0]);if("number"==typeof arguments[0])return new Ki(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Vn.windowWithTime=Vn.windowTime=function(t,e,n){var r,o=this;return null==e&&(r=t),xn(n)||(n=Pn),"number"==typeof e?r=e:xn(e)&&(r=t,n=e),new Ds(function(e){function i(){var t=new dn,o=!1,s=!1;f.setDisposable(t),c===a?(o=!0,s=!0):c<a?o=!0:s=!0;var p=o?c:a,d=p-h;h=p,o&&(c+=r),s&&(a+=r),t.setDisposable(n.scheduleFuture(null,d,function(){if(s){var t=new Ps;l.push(t),e.onNext(nn(t,u))}o&&l.shift().onCompleted(),i()}))}var s,u,a=r,c=t,l=[],f=new vn,h=0;return s=new sn(f),u=new bn(s),l.push(new Ps),e.onNext(nn(l[0],u)),i(),s.add(o.subscribe(function(t){for(var e=0,n=l.length;e<n;e++)l[e].onNext(t)},function(t){for(var n=0,r=l.length;n<r;n++)l[n].onError(t);e.onError(t)},function(){for(var t=0,n=l.length;t<n;t++)l[t].onCompleted();e.onCompleted()})),u},o)},Vn.windowWithTimeOrCount=Vn.windowTimeOrCount=function(t,e,n){var r=this;return xn(n)||(n=Pn),new Ds(function(o){function i(e){var r=new dn;s.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===l){c=0;var t=++l;f.onCompleted(),f=new Ps,o.onNext(nn(f,a)),i(t)}}))}var s=new vn,u=new sn(s),a=new bn(u),c=0,l=0,f=new Ps;return o.onNext(nn(f,a)),i(0),u.add(r.subscribe(function(t){var n=0,r=!1;f.onNext(t),++c===e&&(r=!0,c=0,n=++l,f.onCompleted(),f=new Ps,o.onNext(nn(f,a))),r&&i(n)},function(t){f.onError(t),o.onError(t)},function(){f.onCompleted(),o.onCompleted()})),a},r)},Vn.bufferWithTime=Vn.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(U)},Vn.bufferWithTimeOrCount=Vn.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(U)};var Zi=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ts(t,this._s))},e}(Yn),ts=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.timeInterval=function(t){return xn(t)||(t=Pn),new Zi(this,t)};var es=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ns(t,this._s))},e}(Yn),ns=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.timestamp=function(t){return xn(t)||(t=Pn),new es(this,t)};var rs=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new dn};return e.sourceSubscription.setDisposable(this.source.subscribe(new is(e))),new mn(e.sourceSubscription,this._sampler.subscribe(new os(e)))},e}(Yn),os=function(t){function e(e){this._s=e,t.call(this)}return tn(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Un),is=function(t){function e(e){this._s=e,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Un);Vn.sample=function(t,e){return xn(e)||(e=Pn),"number"==typeof t?new rs(this,Xi(t,e)):new rs(this,t)};var ss=Gt.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};ss.prototype=Object.create(Error.prototype),Vn.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return Pt(this,t,arguments[1],arguments[2]);if(Kn.isObservable(t)||ne(t))return qt(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var us=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=oe(t.self._itrFn)(t.newState),t.newState===re)return t.o.onError(t.newState.e);if(t.hasResult=oe(t.self._cndFn)(t.newState),t.hasResult===re)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=oe(t.self._resFn)(t.newState),t.result===re)return t.o.onError(t.result.e);var n=oe(t.self._timeFn)(t.newState);if(n===re)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return tn(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Yn);Kn.generateWithAbsoluteTime=function(t,e,n,r,o,i){return xn(i)||(i=Pn),new us(t,e,n,r,o,i)};var as=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=oe(t.self._itrFn)(t.newState),t.newState===re)return t.o.onError(t.newState.e);if(t.hasResult=oe(t.self._cndFn)(t.newState),t.hasResult===re)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=oe(t.self._resFn)(t.newState),t.result===re)return t.o.onError(t.result.e);var n=oe(t.self._timeFn)(t.newState);if(n===re)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return tn(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Yn);Kn.generateWithRelativeTime=function(t,e,n,r,o,i){return xn(i)||(i=Pn),new as(t,e,n,r,o,i)};var cs=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1],o=e[2];o.setDisposable(n.subscribe(r))}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new vn;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Yn);Vn.delaySubscription=function(t,e){return xn(e)||(e=Pn),new cs(this,t,e)};var ls=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new fs(t,this))},e}(Yn),fs=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(Un);Vn.skipLastWithTime=function(t,e){return xn(e)||(e=Pn),new ls(this,t,e)};var hs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ps(t,this._d,this._s))},e}(Yn),ps=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(Un);Vn.takeLastWithTime=function(t,e){return xn(e)||(e=Pn),new hs(this,t,e)},Vn.takeLastBufferWithTime=function(t,e){var n=this;return xn(e)||(e=Pn),new Ds(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),i=[];o.length>0;){var s=o.shift();n-s.interval<=t&&i.push(s.value)}r.onNext(i),r.onCompleted()})},n)};var ds=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return tn(e,t),e.prototype.subscribeCore=function(t){return new mn(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Yn);Vn.takeWithTime=function(t,e){return xn(e)||(e=Pn),new ds(this,t,e)};var vs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return tn(e,t),e.prototype.subscribeCore=function(t){return new mn(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new ms(t,this)))},e}(Yn),ms=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.skipWithTime=function(t,e){return xn(e)||(e=Pn),new vs(this,t,e)};var ys=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return tn(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new mn(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new bs(t,this)))},e}(Yn),bs=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Un);Vn.skipUntilWithTime=function(t,e){return xn(e)||(e=Pn),new ys(this,t,e)},Vn.takeUntilWithTime=function(t,e){xn(e)||(e=Pn);var n=this;return new Ds(function(r){return new mn(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},Vn.throttle=function(t,e){xn(e)||(e=Pn);var n=+t||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new Ds(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var gs=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){var e=oe(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===re&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Un);Vn.transduce=function(t){var e=this;return new Ds(function(n){var r=t(Ft(n));return e.subscribe(new gs(n,r))},e)};var _s=function(t){function e(e){this.source=e,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){var e=new dn,n=new sn,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new ws(r))),n},e}(Yn),ws=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return tn(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,ee(t)&&(t=lr(t));var e=new dn;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},tn(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(Un);Vn.switchFirst=function(){return new _s(this)},Vn.flatMapFirst=Vn.exhaustMap=function(t,e,n){return new Zn(this,t,e,n).switchFirst()},Vn.flatMapWithMaxConcurrent=Vn.flatMapMaxConcurrent=function(t,e,n,r){return new Zn(this,e,n,r).merge(t)};var xs=Gt.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new rn(1024),t.call(this)}tn(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=ve,n.toAbsoluteTime=ve,n.toRelativeTime=ve,n.schedulePeriodic=function(t,e,n){var r=new kn(this,t,e,n);return r.start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new he;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new he;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new he;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){function r(t,e){return o.queue.remove(i),n(t,e)}var o=this,i=new gn(this,t,r,e,this.comparer);return this.queue.enqueue(i),i.disposable},e}(_n);Gt.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,o=n||Zt;t.call(this,r,o)}tn(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(Gt.VirtualTimeScheduler),$t.prototype.equals=function(t){return t===this||null!=t&&("N"===t.kind&&this.predicate(t.value))},It.prototype.equals=function(t){return t===this||null!=t&&("E"===t.kind&&this.predicate(t.error))};var Es=Gt.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return"function"==typeof e?new Cs(t,new $t(e)):new Cs(t,$n.createOnNext(e))},onError:function(t,e){return"function"==typeof e?new Cs(t,new It(e)):new Cs(t,$n.createOnError(e))},onCompleted:function(t){return new Cs(t,$n.createOnCompleted())},subscribe:function(t,e){return new ks(t,e)}},Cs=Gt.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||Yt};Cs.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},Cs.prototype.toString=function(){return this.value.toString()+"@"+this.time};var ks=Gt.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};ks.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},ks.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var Ss=Gt.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)};Ss.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var As=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}tn(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new Cs(this.scheduler.clock,$n.createOnNext(t)))},n.onError=function(t){this.messages.push(new Cs(this.scheduler.clock,$n.createOnError(t)))},n.onCompleted=function(){this.messages.push(new Cs(this.scheduler.clock,$n.createOnCompleted()))},e}(Wn);Mt.prototype.then=function(t,e){var n=this;this.subscriptions.push(new ks(this.scheduler.clock));var r,o=this.subscriptions.length-1,s=Gt.Observer.create(function(e){var u=t(e);if(u&&"function"==typeof u.then)r=u;else{var a=n.scheduler.clock;r=new Mt(n.scheduler,[Gt.ReactiveTest.onNext(a,i),Gt.ReactiveTest.onCompleted(a)])}var c=n.observers.indexOf(s);n.observers.splice(c,1),n.subscriptions[o]=new ks(n.subscriptions[o].subscribe,n.scheduler.clock)},function(t){e(t);var r=n.observers.indexOf(s);n.observers.splice(r,1),n.subscriptions[o]=new ks(n.subscriptions[o].subscribe,n.scheduler.clock)});return this.observers.push(s),r||new Mt(this.scheduler,this.messages)};var Os=function(t){function e(e,n){t.call(this);var r,o,i=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var s=0,u=this.messages.length;s<u;s++)r=this.messages[s],o=r.value,function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=i.observers.slice(0),n=0,r=e.length;n<r;n++)t.accept(e[n]);return ln})}(o)}return tn(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new ks(this.scheduler.clock));var n=this.subscriptions.length-1;return cn(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new ks(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Kn),js=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return tn(e,t),e.prototype._subscribe=function(t){var e,n,r=this;this.subscriptions.push(new ks(this.scheduler.clock));for(var o=this.subscriptions.length-1,i=new sn,s=0,u=this.messages.length;s<u;s++)e=this.messages[s],n=e.value,function(n){i.add(r.scheduler.scheduleRelative(null,e.time,function(){return n.accept(t),ln}))}(n);return cn(function(){r.subscriptions[o]=new ks(r.subscriptions[o].subscribe,r.scheduler.clock),i.dispose()})},e}(Kn);Gt.TestScheduler=function(t){function e(t,e){return t>e?1:t<e?-1:0}function n(){t.call(this,0,e)}return tn(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=Es.created),null==e.subscribed&&(e.subscribed=Es.subscribed),null==e.disposed&&(e.disposed=Es.disposed);var n,r,o=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),ln}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(o),ln}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),ln}),this.start(),o},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Os(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new js(this,t)},n.prototype.createResolvedPromise=function(t,e){return new Mt(this,[Gt.ReactiveTest.onNext(t,e),Gt.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new Mt(this,[Gt.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new As(this)},n}(xs);var Ds=Gt.AnonymousObservable=function(t){function e(t){return t&&ne(t.dispose)?t:ne(t)?cn(t):ln}function n(t,n){var r=n[0],o=n[1],i=oe(o.__subscribe).call(o,r);i!==re||r.fail(re.e)||c(re.e),r.setDisposable(e(i))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return tn(r,t),r.prototype._subscribe=function(t){var e=new Ns(t),r=[e,this];return jn.scheduleRequired()?jn.schedule(r,n):n(null,r),e},r}(Kn),Ns=function(t){function e(e){t.call(this),this.observer=e,this.m=new dn}tn(e,t);var n=e.prototype;return n.next=function(t){var e=oe(this.observer.onNext).call(this.observer,t);e===re&&(this.dispose(),c(e.e))},n.error=function(t){var e=oe(this.observer.onError).call(this.observer,t);this.dispose(),e===re&&c(e.e)},n.completed=function(){var t=oe(this.observer.onCompleted).call(this.observer);this.dispose(),t===re&&c(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Un),Ts=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return tn(e,t),e.prototype.subscribeCore=function(t){return new mn(this._m.getDisposable(),this._u.subscribe(t))},e}(Yn),qs=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new Ts(r,n):n}return tn(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Kn),Ps=Gt.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return tn(e,t),en(e.prototype,Wn.prototype,{_subscribe:function(t){return hn(this),this.isStopped?this.hasError?(t.onError(this.error),ln):(t.onCompleted(),ln):(this.observers.push(t),new Fi(this,t))},hasObservers:function(){return hn(this),this.observers.length>0},onCompleted:function(){if(hn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(hn(this),!this.isStopped)for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Ms(t,e)},e}(Kn),Fs=Gt.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return tn(e,t),en(e.prototype,Wn.prototype,{_subscribe:function(t){return hn(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),ln):(this.observers.push(t),new Fi(this,t))},hasObservers:function(){return hn(this),this.observers.length>0},onCompleted:function(){var t,e;if(hn(this),!this.isStopped){this.isStopped=!0;var n=u(this.observers),e=n.length;if(this.hasValue)for(t=0;t<e;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<e;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){hn(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Kn),$s=Gt.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return tn(e,t),en(e.prototype,Wn.prototype,{_subscribe:function(t){return hn(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),ln):(this.observers.push(t),t.onNext(this.value),new Fi(this,t))},getValue:function(){return hn(this),this.hasError&&c(this.error),this.value},hasObservers:function(){return hn(this),this.observers.length>0},onCompleted:function(){if(hn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(hn(this),!this.isStopped){this.value=t;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Kn),Is=Gt.ReplaySubject=function(t){function e(t,e){return cn(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,o){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=o||jn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return tn(n,t),en(n.prototype,Wn.prototype,{_subscribe:function(t){hn(this);var n=new Jn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var o=0,i=this.q.length;o<i;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return hn(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(hn(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=u(this.observers),o=r.length;n<o;n++){var i=r[n];i.onNext(t),i.ensureActive()}}},onError:function(t){if(hn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=u(this.observers),o=r.length;n<o;n++){var i=r[n];i.onError(t),i.ensureActive()}this.observers.length=0}},onCompleted:function(){if(hn(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=u(this.observers),r=n.length;e<r;e++){var o=n[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Kn),Ms=Gt.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return tn(e,t),en(e.prototype,Wn.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Kn);Gt.Pauser=function(t){function e(){t.call(this)}return tn(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Ps),Qt.Rx=Gt,n=function(){return Gt}.call(exports,e,exports,t),!(n!==i&&(t.exports=n));var Rs=d()}).call(this)}).call(exports,e(71)(t),function(){return this}(),e(9))},function(t,exports){t.exports=angular},function(t,exports,e){var n,r;/*!
	 * jQuery JavaScript Library v3.2.1
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2017-03-20T18:59Z
	 */
!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(e,o){"use strict";function i(t,e){e=e||st;var n=e.createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function s(t){var e=!!t&&"length"in t&&t.length,n=gt.type(t);return"function"!==n&&!gt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function u(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function a(t,e,n){return gt.isFunction(e)?gt.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?gt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?gt.grep(t,function(t){return ft.call(e,t)>-1!==n}):jt.test(e)?gt.filter(e,t,n):(e=gt.filter(e,t),gt.grep(t,function(t){return ft.call(e,t)>-1!==n&&1===t.nodeType}))}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function l(t){var e={};return gt.each(t.match(Ft)||[],function(t,n){e[n]=!0}),e}function f(t){return t}function h(t){throw t}function p(t,e,n,r){var o;try{t&&gt.isFunction(o=t.promise)?o.call(t).done(e).fail(n):t&&gt.isFunction(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}function d(){st.removeEventListener("DOMContentLoaded",d),e.removeEventListener("load",d),gt.ready()}function v(){this.expando=gt.expando+v.uid++}function m(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Bt.test(t)?JSON.parse(t):t)}function y(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Wt,"-$&").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n=m(n)}catch(t){}Ht.set(t,e,n)}else n=void 0;return n}function b(t,e,n,r){var o,i=1,s=20,u=r?function(){return r.cur()}:function(){return gt.css(t,e,"")},a=u(),c=n&&n[3]||(gt.cssNumber[e]?"":"px"),l=(gt.cssNumber[e]||"px"!==c&&+a)&&Vt.exec(gt.css(t,e));if(l&&l[3]!==c){c=c||l[3],n=n||[],l=+a||1;do i=i||".5",l/=i,gt.style(t,e,l+c);while(i!==(i=u()/a)&&1!==i&&--s)}return n&&(l=+l||+a||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=o)),o}function g(t){var e,n=t.ownerDocument,r=t.nodeName,o=Jt[r];return o?o:(e=n.body.appendChild(n.createElement(r)),o=gt.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),Jt[r]=o,o)}function _(t,e){for(var n,r,o=[],i=0,s=t.length;i<s;i++)r=t[i],r.style&&(n=r.style.display,e?("none"===n&&(o[i]=Lt.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&Qt(r)&&(o[i]=g(r))):"none"!==n&&(o[i]="none",Lt.set(r,"display",n)));for(i=0;i<s;i++)null!=o[i]&&(t[i].style.display=o[i]);return t}function w(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&u(t,e)?gt.merge([t],n):n}function x(t,e){for(var n=0,r=t.length;n<r;n++)Lt.set(t[n],"globalEval",!e||Lt.get(e[n],"globalEval"))}function E(t,e,n,r,o){for(var i,s,u,a,c,l,f=e.createDocumentFragment(),h=[],p=0,d=t.length;p<d;p++)if(i=t[p],i||0===i)if("object"===gt.type(i))gt.merge(h,i.nodeType?[i]:i);else if(te.test(i)){for(s=s||f.appendChild(e.createElement("div")),u=(Kt.exec(i)||["",""])[1].toLowerCase(),a=Zt[u]||Zt._default,s.innerHTML=a[1]+gt.htmlPrefilter(i)+a[2],l=a[0];l--;)s=s.lastChild;gt.merge(h,s.childNodes),s=f.firstChild,s.textContent=""}else h.push(e.createTextNode(i));for(f.textContent="",p=0;i=h[p++];)if(r&&gt.inArray(i,r)>-1)o&&o.push(i);else if(c=gt.contains(i.ownerDocument,i),s=w(f.appendChild(i),"script"),c&&x(s),n)for(l=0;i=s[l++];)Yt.test(i.type||"")&&n.push(i);return f}function C(){return!0}function k(){return!1}function S(){try{return st.activeElement}catch(t){}}function A(t,e,n,r,o,i){var s,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=void 0);for(u in e)A(t,u,n,r,e[u],i);return t}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),o===!1)o=k;else if(!o)return t;return 1===i&&(s=o,o=function(t){return gt().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=gt.guid++)),t.each(function(){gt.event.add(this,e,o,r,n)})}function O(t,e){return u(t,"table")&&u(11!==e.nodeType?e:e.firstChild,"tr")?gt(">tbody",t)[0]||t:t}function j(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function D(t){var e=ae.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function N(t,e){var n,r,o,i,s,u,a,c;if(1===e.nodeType){if(Lt.hasData(t)&&(i=Lt.access(t),s=Lt.set(e,i),c=i.events)){delete s.handle,s.events={};for(o in c)for(n=0,r=c[o].length;n<r;n++)gt.event.add(e,o,c[o][n])}Ht.hasData(t)&&(u=Ht.access(t),a=gt.extend({},u),Ht.set(e,a))}}function T(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Xt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function q(t,e,n,r){e=ct.apply([],e);var o,s,u,a,c,l,f=0,h=t.length,p=h-1,d=e[0],v=gt.isFunction(d);if(v||h>1&&"string"==typeof d&&!yt.checkClone&&ue.test(d))return t.each(function(o){var i=t.eq(o);v&&(e[0]=d.call(this,o,i.html())),q(i,e,n,r)});if(h&&(o=E(e,t[0].ownerDocument,!1,t,r),s=o.firstChild,1===o.childNodes.length&&(o=s),s||r)){for(u=gt.map(w(o,"script"),j),a=u.length;f<h;f++)c=o,f!==p&&(c=gt.clone(c,!0,!0),a&&gt.merge(u,w(c,"script"))),n.call(t[f],c,f);if(a)for(l=u[u.length-1].ownerDocument,gt.map(u,D),f=0;f<a;f++)c=u[f],Yt.test(c.type||"")&&!Lt.access(c,"globalEval")&&gt.contains(l,c)&&(c.src?gt._evalUrl&&gt._evalUrl(c.src):i(c.textContent.replace(ce,""),l))}return t}function P(t,e,n){for(var r,o=e?gt.filter(e,t):t,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||gt.cleanData(w(r)),r.parentNode&&(n&&gt.contains(r.ownerDocument,r)&&x(w(r,"script")),r.parentNode.removeChild(r));return t}function F(t,e,n){var r,o,i,s,u=t.style;return n=n||he(t),n&&(s=n.getPropertyValue(e)||n[e],""!==s||gt.contains(t.ownerDocument,t)||(s=gt.style(t,e)),!yt.pixelMarginRight()&&fe.test(s)&&le.test(e)&&(r=u.width,o=u.minWidth,i=u.maxWidth,u.minWidth=u.maxWidth=u.width=s,s=n.width,u.width=r,u.minWidth=o,u.maxWidth=i)),void 0!==s?s+"":s}function I(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function M(t){if(t in be)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ye.length;n--;)if(t=ye[n]+e,t in be)return t}function R(t){var e=gt.cssProps[t];return e||(e=gt.cssProps[t]=M(t)||t),e}function L(t,e,n){var r=Vt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function H(t,e,n,r,o){var i,s=0;for(i=n===(r?"border":"content")?4:"width"===e?1:0;i<4;i+=2)"margin"===n&&(s+=gt.css(t,n+Ut[i],!0,o)),r?("content"===n&&(s-=gt.css(t,"padding"+Ut[i],!0,o)),"margin"!==n&&(s-=gt.css(t,"border"+Ut[i]+"Width",!0,o))):(s+=gt.css(t,"padding"+Ut[i],!0,o),"padding"!==n&&(s+=gt.css(t,"border"+Ut[i]+"Width",!0,o)));return s}function B(t,e,n){var r,o=he(t),i=F(t,e,o),s="border-box"===gt.css(t,"boxSizing",!1,o);return fe.test(i)?i:(r=s&&(yt.boxSizingReliable()||i===t.style[e]),"auto"===i&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)]),i=parseFloat(i)||0,i+H(t,e,n||(s?"border":"content"),r,o)+"px")}function W(t,e,n,r,o){return new W.prototype.init(t,e,n,r,o)}function z(){_e&&(st.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(z):e.setTimeout(z,gt.fx.interval),gt.fx.tick())}function V(){return e.setTimeout(function(){ge=void 0}),ge=gt.now()}function U(t,e){var n,r=0,o={height:t};for(e=e?1:0;r<4;r+=2-e)n=Ut[r],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function Q(t,e,n){for(var r,o=(X.tweeners[e]||[]).concat(X.tweeners["*"]),i=0,s=o.length;i<s;i++)if(r=o[i].call(n,e,t))return r}function G(t,e,n){var r,o,i,s,u,a,c,l,f="width"in e||"height"in e,h=this,p={},d=t.style,v=t.nodeType&&Qt(t),m=Lt.get(t,"fxshow");n.queue||(s=gt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,gt.queue(t,"fx").length||s.empty.fire()})}));for(r in e)if(o=e[r],we.test(o)){if(delete e[r],i=i||"toggle"===o,o===(v?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;v=!0}p[r]=m&&m[r]||gt.style(t,r)}if(a=!gt.isEmptyObject(e),a||!gt.isEmptyObject(p)){f&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=m&&m.display,null==c&&(c=Lt.get(t,"display")),l=gt.css(t,"display"),"none"===l&&(c?l=c:(_([t],!0),c=t.style.display||c,l=gt.css(t,"display"),_([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===gt.css(t,"float")&&(a||(h.done(function(){d.display=c}),null==c&&(l=d.display,c="none"===l?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),a=!1;for(r in p)a||(m?"hidden"in m&&(v=m.hidden):m=Lt.access(t,"fxshow",{display:c}),i&&(m.hidden=!v),v&&_([t],!0),h.done(function(){v||_([t]),Lt.remove(t,"fxshow");for(r in p)gt.style(t,r,p[r])})),a=Q(v?m[r]:0,r,h),r in m||(m[r]=a.start,v&&(a.end=a.start,a.start=0))}}function J(t,e){var n,r,o,i,s;for(n in t)if(r=gt.camelCase(n),o=e[r],i=t[n],Array.isArray(i)&&(o=i[1],i=t[n]=i[0]),n!==r&&(t[r]=i,delete t[n]),s=gt.cssHooks[r],s&&"expand"in s){i=s.expand(i),delete t[r];for(n in i)n in t||(t[n]=i[n],e[n]=o)}else e[r]=o}function X(t,e,n){var r,o,i=0,s=X.prefilters.length,u=gt.Deferred().always(function(){delete a.elem}),a=function(){if(o)return!1;for(var e=ge||V(),n=Math.max(0,c.startTime+c.duration-e),r=n/c.duration||0,i=1-r,s=0,a=c.tweens.length;s<a;s++)c.tweens[s].run(i);return u.notifyWith(t,[c,i,n]),i<1&&a?n:(a||u.notifyWith(t,[c,1,0]),u.resolveWith(t,[c]),!1)},c=u.promise({elem:t,props:gt.extend({},e),opts:gt.extend(!0,{specialEasing:{},easing:gt.easing._default},n),originalProperties:e,originalOptions:n,startTime:ge||V(),duration:n.duration,tweens:[],createTween:function(e,n){var r=gt.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)c.tweens[n].run(1);return e?(u.notifyWith(t,[c,1,0]),u.resolveWith(t,[c,e])):u.rejectWith(t,[c,e]),this}}),l=c.props;for(J(l,c.opts.specialEasing);i<s;i++)if(r=X.prefilters[i].call(c,t,l,c.opts))return gt.isFunction(r.stop)&&(gt._queueHooks(c.elem,c.opts.queue).stop=gt.proxy(r.stop,r)),r;return gt.map(l,Q,c),gt.isFunction(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),gt.fx.timer(gt.extend(a,{elem:t,anim:c,queue:c.opts.queue})),c}function K(t){var e=t.match(Ft)||[];return e.join(" ")}function Y(t){return t.getAttribute&&t.getAttribute("class")||""}function Z(t,e,n,r){var o;if(Array.isArray(e))gt.each(e,function(e,o){n||Te.test(t)?r(t,o):Z(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,n,r)});else if(n||"object"!==gt.type(e))r(t,e);else for(o in e)Z(t+"["+o+"]",e[o],n,r)}function tt(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,o=0,i=e.toLowerCase().match(Ft)||[];if(gt.isFunction(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function et(t,e,n,r){function o(u){var a;return i[u]=!0,gt.each(t[u]||[],function(t,u){var c=u(e,n,r);return"string"!=typeof c||s||i[c]?s?!(a=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),a}var i={},s=t===ze;return o(e.dataTypes[0])||!i["*"]&&o("*")}function nt(t,e){var n,r,o=gt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:r||(r={}))[n]=e[n]);return r&&gt.extend(!0,t,r),t}function rt(t,e,n){for(var r,o,i,s,u=t.contents,a=t.dataTypes;"*"===a[0];)a.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in u)if(u[o]&&u[o].test(r)){a.unshift(o);break}if(a[0]in n)i=a[0];else{for(o in n){if(!a[0]||t.converters[o+" "+a[0]]){i=o;break}s||(s=o)}i=i||s}if(i)return i!==a[0]&&a.unshift(i),n[i]}function ot(t,e,n,r){var o,i,s,u,a,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(i=l.shift();i;)if(t.responseFields[i]&&(n[t.responseFields[i]]=e),!a&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),a=i,i=l.shift())if("*"===i)i=a;else if("*"!==a&&a!==i){if(s=c[a+" "+i]||c["* "+i],!s)for(o in c)if(u=o.split(" "),u[1]===i&&(s=c[a+" "+u[0]]||c["* "+u[0]])){s===!0?s=c[o]:c[o]!==!0&&(i=u[0],l.unshift(u[1]));break}if(s!==!0)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+a+" to "+i}}}return{state:"success",data:e}}var it=[],st=e.document,ut=Object.getPrototypeOf,at=it.slice,ct=it.concat,lt=it.push,ft=it.indexOf,ht={},pt=ht.toString,dt=ht.hasOwnProperty,vt=dt.toString,mt=vt.call(Object),yt={},bt="3.2.1",gt=function(t,e){return new gt.fn.init(t,e)},_t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,wt=/^-ms-/,xt=/-([a-z])/g,Et=function(t,e){return e.toUpperCase()};gt.fn=gt.prototype={jquery:bt,constructor:gt,length:0,toArray:function(){return at.call(this)},get:function(t){return null==t?at.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=gt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return gt.each(this,t)},map:function(t){return this.pushStack(gt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(at.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:lt,sort:it.sort,splice:it.splice},gt.extend=gt.fn.extend=function(){var t,e,n,r,o,i,s=arguments[0]||{},u=1,a=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[u]||{},u++),"object"==typeof s||gt.isFunction(s)||(s={}),u===a&&(s=this,u--);u<a;u++)if(null!=(t=arguments[u]))for(e in t)n=s[e],r=t[e],s!==r&&(c&&r&&(gt.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,i=n&&Array.isArray(n)?n:[]):i=n&&gt.isPlainObject(n)?n:{},s[e]=gt.extend(c,i,r)):void 0!==r&&(s[e]=r));return s},gt.extend({expando:"jQuery"+(bt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===gt.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=gt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==pt.call(t))&&(!(e=ut(t))||(n=dt.call(e,"constructor")&&e.constructor,"function"==typeof n&&vt.call(n)===mt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ht[pt.call(t)]||"object":typeof t},globalEval:function(t){i(t)},camelCase:function(t){return t.replace(wt,"ms-").replace(xt,Et)},each:function(t,e){var n,r=0;if(s(t))for(n=t.length;r<n&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(_t,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?gt.merge(n,"string"==typeof t?[t]:t):lt.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ft.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,o=t.length;r<n;r++)t[o++]=e[r];return t.length=o,t},grep:function(t,e,n){for(var r,o=[],i=0,s=t.length,u=!n;i<s;i++)r=!e(t[i],i),r!==u&&o.push(t[i]);return o},map:function(t,e,n){var r,o,i=0,u=[];if(s(t))for(r=t.length;i<r;i++)o=e(t[i],i,n),null!=o&&u.push(o);else for(i in t)o=e(t[i],i,n),null!=o&&u.push(o);return ct.apply([],u)},guid:1,proxy:function(t,e){var n,r,o;if("string"==typeof e&&(n=t[e],e=t,t=n),gt.isFunction(t))return r=at.call(arguments,2),o=function(){return t.apply(e||this,r.concat(at.call(arguments)))},o.guid=t.guid=t.guid||gt.guid++,o},now:Date.now,support:yt}),"function"==typeof Symbol&&(gt.fn[Symbol.iterator]=it[Symbol.iterator]),gt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ht["[object "+e+"]"]=e.toLowerCase()});var Ct=/*!
	 * Sizzle CSS Selector Engine v2.3.3
	 * https://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-08-08
	 */
function(t){function e(t,e,n,r){var o,i,s,u,a,c,l,h=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!r&&((e?e.ownerDocument||e:B)!==q&&T(e),e=e||q,F)){if(11!==d&&(a=bt.exec(t)))if(o=a[1]){if(9===d){if(!(s=e.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(h&&(s=h.getElementById(o))&&L(e,s)&&s.id===o)return n.push(s),n}else{if(a[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((o=a[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(o)),n}if(x.qsa&&!Q[t+" "]&&(!I||!I.test(t))){if(1!==d)h=e,l=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(xt,Et):e.setAttribute("id",u=H),c=S(t),i=c.length;i--;)c[i]="#"+u+" "+p(c[i]);l=c.join(","),h=gt.test(t)&&f(e.parentNode)||e}if(l)try{return Z.apply(n,h.querySelectorAll(l)),n}catch(t){}finally{u===H&&e.removeAttribute("id")}}}return O(t.replace(at,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>E.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[H]=!0,t}function o(t){var e=q.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function i(t,e){for(var n=t.split("|"),r=n.length;r--;)E.attrHandle[n[r]]=e}function s(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function u(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function a(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return function(e){return"form"in e?e.parentNode&&e.disabled===!1?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&kt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return r(function(e){return e=+e,r(function(n,r){for(var o,i=t([],n.length,e),s=i.length;s--;)n[o=i[s]]&&(n[o]=!(r[o]=n[o]))})})}function f(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function p(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function d(t,e,n){var r=e.dir,o=e.next,i=o||r,s=n&&"parentNode"===i,u=z++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,o);return!1}:function(e,n,a){var c,l,f,h=[W,u];if(a){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(f=e[H]||(e[H]={}),l=f[e.uniqueID]||(f[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[i])&&c[0]===W&&c[1]===u)return h[2]=c[2];if(l[i]=h,h[2]=t(e,n,a))return!0}return!1}}function v(t){return t.length>1?function(e,n,r){for(var o=t.length;o--;)if(!t[o](e,n,r))return!1;return!0}:t[0]}function m(t,n,r){for(var o=0,i=n.length;o<i;o++)e(t,n[o],r);return r}function y(t,e,n,r,o){for(var i,s=[],u=0,a=t.length,c=null!=e;u<a;u++)(i=t[u])&&(n&&!n(i,r,o)||(s.push(i),c&&e.push(u)));return s}function b(t,e,n,o,i,s){return o&&!o[H]&&(o=b(o)),i&&!i[H]&&(i=b(i,s)),r(function(r,s,u,a){var c,l,f,h=[],p=[],d=s.length,v=r||m(e||"*",u.nodeType?[u]:u,[]),b=!t||!r&&e?v:y(v,h,t,u,a),g=n?i||(r?t:d||o)?[]:s:b;if(n&&n(b,g,u,a),o)for(c=y(g,p),o(c,[],u,a),l=c.length;l--;)(f=c[l])&&(g[p[l]]=!(b[p[l]]=f));if(r){if(i||t){if(i){for(c=[],l=g.length;l--;)(f=g[l])&&c.push(b[l]=f);i(null,g=[],c,a)}for(l=g.length;l--;)(f=g[l])&&(c=i?et(r,f):h[l])>-1&&(r[c]=!(s[c]=f))}}else g=y(g===s?g.splice(d,g.length):g),i?i(null,s,g,a):Z.apply(s,g)})}function g(t){for(var e,n,r,o=t.length,i=E.relative[t[0].type],s=i||E.relative[" "],u=i?1:0,a=d(function(t){return t===e},s,!0),c=d(function(t){return et(e,t)>-1},s,!0),l=[function(t,n,r){var o=!i&&(r||n!==j)||((e=n).nodeType?a(t,n,r):c(t,n,r));return e=null,o}];u<o;u++)if(n=E.relative[t[u].type])l=[d(v(l),n)];else{if(n=E.filter[t[u].type].apply(null,t[u].matches),n[H]){for(r=++u;r<o&&!E.relative[t[r].type];r++);return b(u>1&&v(l),u>1&&p(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(at,"$1"),n,u<r&&g(t.slice(u,r)),r<o&&g(t=t.slice(r)),r<o&&p(t))}l.push(n)}return v(l)}function _(t,n){var o=n.length>0,i=t.length>0,s=function(r,s,u,a,c){var l,f,h,p=0,d="0",v=r&&[],m=[],b=j,g=r||i&&E.find.TAG("*",c),_=W+=null==b?1:Math.random()||.1,w=g.length;for(c&&(j=s===q||s||c);d!==w&&null!=(l=g[d]);d++){if(i&&l){for(f=0,s||l.ownerDocument===q||(T(l),u=!F);h=t[f++];)if(h(l,s||q,u)){a.push(l);break}c&&(W=_)}o&&((l=!h&&l)&&p--,r&&v.push(l))}if(p+=d,o&&d!==p){for(f=0;h=n[f++];)h(v,m,s,u);if(r){if(p>0)for(;d--;)v[d]||m[d]||(m[d]=K.call(a));m=y(m)}Z.apply(a,m),c&&!r&&m.length>0&&p+n.length>1&&e.uniqueSort(a)}return c&&(W=_,j=b),v};return o?r(s):s}var w,x,E,C,k,S,A,O,j,D,N,T,q,P,F,I,M,R,L,H="sizzle"+1*new Date,B=t.document,W=0,z=0,V=n(),U=n(),Q=n(),G=function(t,e){return t===e&&(N=!0),0},J={}.hasOwnProperty,X=[],K=X.pop,Y=X.push,Z=X.push,tt=X.slice,et=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",it="\\["+rt+"*("+ot+")(?:"+rt+"*([*^$|!~]?=)"+rt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+rt+"*\\]",st=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",ut=new RegExp(rt+"+","g"),at=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ct=new RegExp("^"+rt+"*,"+rt+"*"),lt=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),ft=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),ht=new RegExp(st),pt=new RegExp("^"+ot+"$"),dt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},vt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,_t=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),wt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Et=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Ct=function(){T()},kt=d(function(t){return t.disabled===!0&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{Z.apply(X=tt.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(t){Z={apply:X.length?function(t,e){Y.apply(t,tt.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}x=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},T=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:B;return r!==q&&9===r.nodeType&&r.documentElement?(q=r,P=q.documentElement,F=!k(q),B!==q&&(n=q.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),x.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=o(function(t){return t.appendChild(q.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=yt.test(q.getElementsByClassName),x.getById=o(function(t){return P.appendChild(t).id=H,!q.getElementsByName||!q.getElementsByName(H).length}),x.getById?(E.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){return t.getAttribute("id")===e}},E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&F){var n=e.getElementById(t);return n?[n]:[]}}):(E.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&F){var n,r,o,i=e.getElementById(t);if(i){if(n=i.getAttributeNode("id"),n&&n.value===t)return[i];for(o=e.getElementsByName(t),r=0;i=o[r++];)if(n=i.getAttributeNode("id"),n&&n.value===t)return[i]}return[]}}),E.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],o=0,i=e.getElementsByTagName(t);if("*"===t){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},E.find.CLASS=x.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&F)return e.getElementsByClassName(t)},M=[],I=[],(x.qsa=yt.test(q.querySelectorAll))&&(o(function(t){P.appendChild(t).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+rt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+rt+"*(?:value|"+nt+")"),t.querySelectorAll("[id~="+H+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+H+"+*").length||I.push(".#.+[+~]")}),o(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=q.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+rt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),P.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=yt.test(R=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(t){x.disconnectedMatch=R.call(t,"*"),R.call(t,"[s!='']:x"),M.push("!=",st)}),I=I.length&&new RegExp(I.join("|")),M=M.length&&new RegExp(M.join("|")),e=yt.test(P.compareDocumentPosition),L=e||yt.test(P.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return N=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===q||t.ownerDocument===B&&L(B,t)?-1:e===q||e.ownerDocument===B&&L(B,e)?1:D?et(D,t)-et(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return N=!0,0;var n,r=0,o=t.parentNode,i=e.parentNode,u=[t],a=[e];if(!o||!i)return t===q?-1:e===q?1:o?-1:i?1:D?et(D,t)-et(D,e):0;if(o===i)return s(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;u[r]===a[r];)r++;return r?s(u[r],a[r]):u[r]===B?-1:a[r]===B?1:0},q):q},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==q&&T(t),n=n.replace(ft,"='$1']"),x.matchesSelector&&F&&!Q[n+" "]&&(!M||!M.test(n))&&(!I||!I.test(n)))try{var r=R.call(t,n);if(r||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return e(n,q,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==q&&T(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==q&&T(t);var n=E.attrHandle[e.toLowerCase()],r=n&&J.call(E.attrHandle,e.toLowerCase())?n(t,e,!F):void 0;return void 0!==r?r:x.attributes||!F?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.escape=function(t){return(t+"").replace(xt,Et)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,o=0;if(N=!x.detectDuplicates,D=!x.sortStable&&t.slice(0),t.sort(G),N){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)t.splice(n[r],1)}return D=null,t},C=e.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=C(e);return n},E=e.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+rt+")"+t+"("+rt+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(o){var i=e.attr(o,t);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(ut," ")+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,n,r,o){var i="nth"!==t.slice(0,3),s="last"!==t.slice(-4),u="of-type"===e;return 1===r&&0===o?function(t){return!!t.parentNode}:function(e,n,a){var c,l,f,h,p,d,v=i!==s?"nextSibling":"previousSibling",m=e.parentNode,y=u&&e.nodeName.toLowerCase(),b=!a&&!u,g=!1;if(m){if(i){for(;v;){for(h=e;h=h[v];)if(u?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;d=v="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&b){for(h=m,f=h[H]||(h[H]={}),l=f[h.uniqueID]||(f[h.uniqueID]={}),c=l[t]||[],p=c[0]===W&&c[1],g=p&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[v]||(g=p=0)||d.pop();)if(1===h.nodeType&&++g&&h===e){l[t]=[W,p,g];break}}else if(b&&(h=e,f=h[H]||(h[H]={}),l=f[h.uniqueID]||(f[h.uniqueID]={}),c=l[t]||[],p=c[0]===W&&c[1],g=p),g===!1)for(;(h=++p&&h&&h[v]||(g=p=0)||d.pop())&&((u?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++g||(b&&(f=h[H]||(h[H]={}),l=f[h.uniqueID]||(f[h.uniqueID]={}),l[t]=[W,g]),h!==e)););return g-=o,g===r||g%r===0&&g/r>=0}}},PSEUDO:function(t,n){var o,i=E.pseudos[t]||E.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[H]?i(n):i.length>1?(o=[t,t,"",n],E.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,o=i(t,n),s=o.length;s--;)r=et(t,o[s]),t[r]=!(e[r]=o[s])}):function(t){return i(t,0,o)}):i}},pseudos:{not:r(function(t){var e=[],n=[],o=A(t.replace(at,"$1"));return o[H]?r(function(t,e,n,r){for(var i,s=o(t,null,r,[]),u=t.length;u--;)(i=s[u])&&(t[u]=!(e[u]=i))}):function(t,r,i){return e[0]=t,o(e,null,i,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(_t,wt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:r(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,wt).toLowerCase(),function(e){var n;do if(n=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return vt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[n<0?n+e:n]}),even:l(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:l(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}},E.pseudos.nth=E.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[w]=u(w);for(w in{submit:!0,reset:!0})E.pseudos[w]=a(w);return h.prototype=E.filters=E.pseudos,E.setFilters=new h,S=e.tokenize=function(t,n){var r,o,i,s,u,a,c,l=U[t+" "];if(l)return n?0:l.slice(0);for(u=t,a=[],c=E.preFilter;u;){r&&!(o=ct.exec(u))||(o&&(u=u.slice(o[0].length)||u),a.push(i=[])),r=!1,(o=lt.exec(u))&&(r=o.shift(),i.push({value:r,type:o[0].replace(at," ")}),u=u.slice(r.length));for(s in E.filter)!(o=dt[s].exec(u))||c[s]&&!(o=c[s](o))||(r=o.shift(),i.push({value:r,type:s,matches:o}),u=u.slice(r.length));if(!r)break}return n?u.length:u?e.error(t):U(t,a).slice(0)},A=e.compile=function(t,e){var n,r=[],o=[],i=Q[t+" "];if(!i){for(e||(e=S(t)),n=e.length;n--;)i=g(e[n]),i[H]?r.push(i):o.push(i);i=Q(t,_(o,r)),i.selector=t}return i},O=e.select=function(t,e,n,r){var o,i,s,u,a,c="function"==typeof t&&t,l=!r&&S(t=c.selector||t);if(n=n||[],1===l.length){if(i=l[0]=l[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&9===e.nodeType&&F&&E.relative[i[1].type]){if(e=(E.find.ID(s.matches[0].replace(_t,wt),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(o=dt.needsContext.test(t)?0:i.length;o--&&(s=i[o],!E.relative[u=s.type]);)if((a=E.find[u])&&(r=a(s.matches[0].replace(_t,wt),gt.test(i[0].type)&&f(e.parentNode)||e))){if(i.splice(o,1),t=r.length&&p(i),!t)return Z.apply(n,r),n;break}}return(c||A(t,l))(r,e,!F,n,!e||gt.test(t)&&f(e.parentNode)||e),n},x.sortStable=H.split("").sort(G).join("")===H,x.detectDuplicates=!!N,T(),x.sortDetached=o(function(t){return 1&t.compareDocumentPosition(q.createElement("fieldset"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||i("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||i("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||i(nt,function(t,e,n){var r;if(!n)return t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(e);gt.find=Ct,gt.expr=Ct.selectors,gt.expr[":"]=gt.expr.pseudos,gt.uniqueSort=gt.unique=Ct.uniqueSort,gt.text=Ct.getText,gt.isXMLDoc=Ct.isXML,gt.contains=Ct.contains,gt.escapeSelector=Ct.escape;var kt=function(t,e,n){for(var r=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&gt(t).is(n))break;r.push(t)}return r},St=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},At=gt.expr.match.needsContext,Ot=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,jt=/^.[^:#\[\.,]*$/;gt.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?gt.find.matchesSelector(r,t)?[r]:[]:gt.find.matches(t,gt.grep(e,function(t){return 1===t.nodeType}))},gt.fn.extend({find:function(t){var e,n,r=this.length,o=this;if("string"!=typeof t)return this.pushStack(gt(t).filter(function(){for(e=0;e<r;e++)if(gt.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)gt.find(t,o[e],n);return r>1?gt.uniqueSort(n):n},filter:function(t){return this.pushStack(a(this,t||[],!1))},not:function(t){return this.pushStack(a(this,t||[],!0))},is:function(t){return!!a(this,"string"==typeof t&&At.test(t)?gt(t):t||[],!1).length}});var Dt,Nt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Tt=gt.fn.init=function(t,e,n){var r,o;if(!t)return this;if(n=n||Dt,"string"==typeof t){if(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Nt.exec(t),!r||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof gt?e[0]:e,gt.merge(this,gt.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:st,!0)),Ot.test(r[1])&&gt.isPlainObject(e))for(r in e)gt.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return o=st.getElementById(r[2]),o&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):gt.isFunction(t)?void 0!==n.ready?n.ready(t):t(gt):gt.makeArray(t,this)};Tt.prototype=gt.fn,Dt=gt(st);var qt=/^(?:parents|prev(?:Until|All))/,Pt={children:!0,contents:!0,next:!0,prev:!0};gt.fn.extend({has:function(t){var e=gt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(gt.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,o=this.length,i=[],s="string"!=typeof t&&gt(t);if(!At.test(t))for(;r<o;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&gt.find.matchesSelector(n,t))){i.push(n);break}return this.pushStack(i.length>1?gt.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?ft.call(gt(t),this[0]):ft.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(gt.uniqueSort(gt.merge(this.get(),gt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),gt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return kt(t,"parentNode")},parentsUntil:function(t,e,n){return kt(t,"parentNode",n)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return kt(t,"nextSibling")},prevAll:function(t){return kt(t,"previousSibling")},nextUntil:function(t,e,n){return kt(t,"nextSibling",n)},prevUntil:function(t,e,n){return kt(t,"previousSibling",n)},siblings:function(t){return St((t.parentNode||{}).firstChild,t)},children:function(t){return St(t.firstChild)},contents:function(t){return u(t,"iframe")?t.contentDocument:(u(t,"template")&&(t=t.content||t),gt.merge([],t.childNodes))}},function(t,e){gt.fn[t]=function(n,r){var o=gt.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=gt.filter(r,o)),this.length>1&&(Pt[t]||gt.uniqueSort(o),qt.test(t)&&o.reverse()),this.pushStack(o)}});var Ft=/[^\x20\t\r\n\f]+/g;gt.Callbacks=function(t){t="string"==typeof t?l(t):gt.extend({},t);var e,n,r,o,i=[],s=[],u=-1,a=function(){for(o=o||t.once,r=e=!0;s.length;u=-1)for(n=s.shift();++u<i.length;)i[u].apply(n[0],n[1])===!1&&t.stopOnFalse&&(u=i.length,n=!1);t.memory||(n=!1),e=!1,o&&(i=n?[]:"")},c={add:function(){return i&&(n&&!e&&(u=i.length-1,s.push(n)),function e(n){gt.each(n,function(n,r){gt.isFunction(r)?t.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==gt.type(r)&&e(r)})}(arguments),n&&!e&&a()),this},remove:function(){return gt.each(arguments,function(t,e){for(var n;(n=gt.inArray(e,i,n))>-1;)i.splice(n,1),n<=u&&u--}),this},has:function(t){return t?gt.inArray(t,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=s=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=s=[],n||e||(i=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||a()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},gt.extend({Deferred:function(t){var n=[["notify","progress",gt.Callbacks("memory"),gt.Callbacks("memory"),2],["resolve","done",gt.Callbacks("once memory"),gt.Callbacks("once memory"),0,"resolved"],["reject","fail",gt.Callbacks("once memory"),gt.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return gt.Deferred(function(e){gt.each(n,function(n,r){var o=gt.isFunction(t[r[4]])&&t[r[4]];i[r[1]](function(){var t=o&&o.apply(this,arguments);t&&gt.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(t,r,o){function i(t,n,r,o){return function(){var u=this,a=arguments,c=function(){var e,c;if(!(t<s)){if(e=r.apply(u,a),e===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,gt.isFunction(c)?o?c.call(e,i(s,n,f,o),i(s,n,h,o)):(s++,c.call(e,i(s,n,f,o),i(s,n,h,o),i(s,n,f,n.notifyWith))):(r!==f&&(u=void 0,a=[e]),(o||n.resolveWith)(u,a))}},l=o?c:function(){try{c()}catch(e){gt.Deferred.exceptionHook&&gt.Deferred.exceptionHook(e,l.stackTrace),t+1>=s&&(r!==h&&(u=void 0,a=[e]),n.rejectWith(u,a))}};t?l():(gt.Deferred.getStackHook&&(l.stackTrace=gt.Deferred.getStackHook()),e.setTimeout(l))}}var s=0;return gt.Deferred(function(e){n[0][3].add(i(0,e,gt.isFunction(o)?o:f,e.notifyWith)),n[1][3].add(i(0,e,gt.isFunction(t)?t:f)),n[2][3].add(i(0,e,gt.isFunction(r)?r:h))}).promise()},promise:function(t){return null!=t?gt.extend(t,o):o}},i={};return gt.each(n,function(t,e){var s=e[2],u=e[5];o[e[1]]=s.add,u&&s.add(function(){r=u},n[3-t][2].disable,n[0][2].lock),s.add(e[3].fire),i[e[0]]=function(){return i[e[0]+"With"](this===i?void 0:this,arguments),this},i[e[0]+"With"]=s.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(t){var e=arguments.length,n=e,r=Array(n),o=at.call(arguments),i=gt.Deferred(),s=function(t){return function(n){r[t]=this,o[t]=arguments.length>1?at.call(arguments):n,--e||i.resolveWith(r,o)}};if(e<=1&&(p(t,i.done(s(n)).resolve,i.reject,!e),"pending"===i.state()||gt.isFunction(o[n]&&o[n].then)))return i.then();for(;n--;)p(o[n],s(n),i.reject);return i.promise()}});var $t=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;gt.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&$t.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},gt.readyException=function(t){e.setTimeout(function(){throw t})};var It=gt.Deferred();gt.fn.ready=function(t){return It.then(t).catch(function(t){gt.readyException(t)}),this},gt.extend({isReady:!1,readyWait:1,ready:function(t){(t===!0?--gt.readyWait:gt.isReady)||(gt.isReady=!0,t!==!0&&--gt.readyWait>0||It.resolveWith(st,[gt]))}}),gt.ready.then=It.then,"complete"===st.readyState||"loading"!==st.readyState&&!st.documentElement.doScroll?e.setTimeout(gt.ready):(st.addEventListener("DOMContentLoaded",d),e.addEventListener("load",d));var Mt=function(t,e,n,r,o,i,s){var u=0,a=t.length,c=null==n;if("object"===gt.type(n)){o=!0;for(u in n)Mt(t,e,u,n[u],!0,i,s)}else if(void 0!==r&&(o=!0,gt.isFunction(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(gt(t),n)})),e))for(;u<a;u++)e(t[u],n,s?r:r.call(t[u],u,e(t[u],n)));return o?t:c?e.call(t):a?e(t[0],n):i},Rt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};v.uid=1,v.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Rt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,o=this.cache(t);if("string"==typeof e)o[gt.camelCase(e)]=n;else for(r in e)o[gt.camelCase(r)]=e[r];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][gt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){Array.isArray(e)?e=e.map(gt.camelCase):(e=gt.camelCase(e),e=e in r?[e]:e.match(Ft)||[]),n=e.length;for(;n--;)delete r[e[n]]}(void 0===e||gt.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!gt.isEmptyObject(e)}};var Lt=new v,Ht=new v,Bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Wt=/[A-Z]/g;gt.extend({hasData:function(t){return Ht.hasData(t)||Lt.hasData(t)},data:function(t,e,n){return Ht.access(t,e,n)},removeData:function(t,e){Ht.remove(t,e)},_data:function(t,e,n){return Lt.access(t,e,n)},_removeData:function(t,e){Lt.remove(t,e)}}),gt.fn.extend({data:function(t,e){var n,r,o,i=this[0],s=i&&i.attributes;if(void 0===t){if(this.length&&(o=Ht.get(i),1===i.nodeType&&!Lt.get(i,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=gt.camelCase(r.slice(5)),y(i,r,o[r])));Lt.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){Ht.set(this,t)}):Mt(this,function(e){var n;if(i&&void 0===e){if(n=Ht.get(i,t),void 0!==n)return n;if(n=y(i,t),void 0!==n)return n}else this.each(function(){Ht.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ht.remove(this,t)})}}),gt.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Lt.get(t,e),n&&(!r||Array.isArray(n)?r=Lt.access(t,e,gt.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=gt.queue(t,e),r=n.length,o=n.shift(),i=gt._queueHooks(t,e),s=function(){gt.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===e&&n.unshift("inprogress"),delete i.stop,o.call(t,s,i)),!r&&i&&i.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Lt.get(t,n)||Lt.access(t,n,{empty:gt.Callbacks("once memory").add(function(){Lt.remove(t,[e+"queue",n])})})}}),gt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?gt.queue(this[0],t):void 0===e?this:this.each(function(){var n=gt.queue(this,t,e);gt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&gt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){gt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,o=gt.Deferred(),i=this,s=this.length,u=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=Lt.get(i[s],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),o.promise(e)}});var zt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Vt=new RegExp("^(?:([+-])=|)("+zt+")([a-z%]*)$","i"),Ut=["Top","Right","Bottom","Left"],Qt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&gt.contains(t.ownerDocument,t)&&"none"===gt.css(t,"display")},Gt=function(t,e,n,r){var o,i,s={};for(i in e)s[i]=t.style[i],t.style[i]=e[i];o=n.apply(t,r||[]);for(i in e)t.style[i]=s[i];return o},Jt={};gt.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Qt(this)?gt(this).show():gt(this).hide()})}});var Xt=/^(?:checkbox|radio)$/i,Kt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Yt=/^$|\/(?:java|ecma)script/i,Zt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,
Zt.th=Zt.td;var te=/<|&#?\w+;/;!function(){var t=st.createDocumentFragment(),e=t.appendChild(st.createElement("div")),n=st.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),yt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",yt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ee=st.documentElement,ne=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oe=/^([^.]*)(?:\.(.+)|)/;gt.event={global:{},add:function(t,e,n,r,o){var i,s,u,a,c,l,f,h,p,d,v,m=Lt.get(t);if(m)for(n.handler&&(i=n,n=i.handler,o=i.selector),o&&gt.find.matchesSelector(ee,o),n.guid||(n.guid=gt.guid++),(a=m.events)||(a=m.events={}),(s=m.handle)||(s=m.handle=function(e){return"undefined"!=typeof gt&&gt.event.triggered!==e.type?gt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Ft)||[""],c=e.length;c--;)u=oe.exec(e[c])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p&&(f=gt.event.special[p]||{},p=(o?f.delegateType:f.bindType)||p,f=gt.event.special[p]||{},l=gt.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&gt.expr.match.needsContext.test(o),namespace:d.join(".")},i),(h=a[p])||(h=a[p]=[],h.delegateCount=0,f.setup&&f.setup.call(t,r,d,s)!==!1||t.addEventListener&&t.addEventListener(p,s)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,l):h.push(l),gt.event.global[p]=!0)},remove:function(t,e,n,r,o){var i,s,u,a,c,l,f,h,p,d,v,m=Lt.hasData(t)&&Lt.get(t);if(m&&(a=m.events)){for(e=(e||"").match(Ft)||[""],c=e.length;c--;)if(u=oe.exec(e[c])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){for(f=gt.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=h.length;i--;)l=h[i],!o&&v!==l.origType||n&&n.guid!==l.guid||u&&!u.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(i,1),l.selector&&h.delegateCount--,f.remove&&f.remove.call(t,l));s&&!h.length&&(f.teardown&&f.teardown.call(t,d,m.handle)!==!1||gt.removeEvent(t,p,m.handle),delete a[p])}else for(p in a)gt.event.remove(t,p+e[c],n,r,!0);gt.isEmptyObject(a)&&Lt.remove(t,"handle events")}},dispatch:function(t){var e,n,r,o,i,s,u=gt.event.fix(t),a=new Array(arguments.length),c=(Lt.get(this,"events")||{})[u.type]||[],l=gt.event.special[u.type]||{};for(a[0]=u,e=1;e<arguments.length;e++)a[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,u)!==!1){for(s=gt.event.handlers.call(this,u,c),e=0;(o=s[e++])&&!u.isPropagationStopped();)for(u.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,r=((gt.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a),void 0!==r&&(u.result=r)===!1&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,o,i,s,u=[],a=e.delegateCount,c=t.target;if(a&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||c.disabled!==!0)){for(i=[],s={},n=0;n<a;n++)r=e[n],o=r.selector+" ",void 0===s[o]&&(s[o]=r.needsContext?gt(o,this).index(c)>-1:gt.find(o,this,null,[c]).length),s[o]&&i.push(r);i.length&&u.push({elem:c,handlers:i})}return c=this,a<e.length&&u.push({elem:c,handlers:e.slice(a)}),u},addProp:function(t,e){Object.defineProperty(gt.Event.prototype,t,{enumerable:!0,configurable:!0,get:gt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[gt.expando]?t:new gt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==S()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===S()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&u(this,"input"))return this.click(),!1},_default:function(t){return u(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},gt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},gt.Event=function(t,e){return this instanceof gt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?C:k,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&gt.extend(this,e),this.timeStamp=t&&t.timeStamp||gt.now(),void(this[gt.expando]=!0)):new gt.Event(t,e)},gt.Event.prototype={constructor:gt.Event,isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=C,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=C,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=C,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},gt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&ne.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&re.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},gt.event.addProp),gt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){gt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,o=t.relatedTarget,i=t.handleObj;return o&&(o===r||gt.contains(r,o))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),gt.fn.extend({on:function(t,e,n,r){return A(this,t,e,n,r)},one:function(t,e,n,r){return A(this,t,e,n,r,1)},off:function(t,e,n){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,gt(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=k),this.each(function(){gt.event.remove(this,t,n,e)})}});var ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,se=/<script|<style|<link/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,ae=/^true\/(.*)/,ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;gt.extend({htmlPrefilter:function(t){return t.replace(ie,"<$1></$2>")},clone:function(t,e,n){var r,o,i,s,u=t.cloneNode(!0),a=gt.contains(t.ownerDocument,t);if(!(yt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||gt.isXMLDoc(t)))for(s=w(u),i=w(t),r=0,o=i.length;r<o;r++)T(i[r],s[r]);if(e)if(n)for(i=i||w(t),s=s||w(u),r=0,o=i.length;r<o;r++)N(i[r],s[r]);else N(t,u);return s=w(u,"script"),s.length>0&&x(s,!a&&w(t,"script")),u},cleanData:function(t){for(var e,n,r,o=gt.event.special,i=0;void 0!==(n=t[i]);i++)if(Rt(n)){if(e=n[Lt.expando]){if(e.events)for(r in e.events)o[r]?gt.event.remove(n,r):gt.removeEvent(n,r,e.handle);n[Lt.expando]=void 0}n[Ht.expando]&&(n[Ht.expando]=void 0)}}}),gt.fn.extend({detach:function(t){return P(this,t,!0)},remove:function(t){return P(this,t)},text:function(t){return Mt(this,function(t){return void 0===t?gt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return q(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=O(this,t);e.appendChild(t)}})},prepend:function(){return q(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=O(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return q(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return q(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(gt.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return gt.clone(this,t,e)})},html:function(t){return Mt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!se.test(t)&&!Zt[(Kt.exec(t)||["",""])[1].toLowerCase()]){t=gt.htmlPrefilter(t);try{for(;n<r;n++)e=this[n]||{},1===e.nodeType&&(gt.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return q(this,arguments,function(e){var n=this.parentNode;gt.inArray(this,t)<0&&(gt.cleanData(w(this)),n&&n.replaceChild(e,this))},t)}}),gt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){gt.fn[t]=function(t){for(var n,r=[],o=gt(t),i=o.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),gt(o[s])[e](n),lt.apply(r,n.get());return this.pushStack(r)}});var le=/^margin/,fe=new RegExp("^("+zt+")(?!px)[a-z%]+$","i"),he=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(u){u.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",u.innerHTML="",ee.appendChild(s);var t=e.getComputedStyle(u);n="1%"!==t.top,i="2px"===t.marginLeft,r="4px"===t.width,u.style.marginRight="50%",o="4px"===t.marginRight,ee.removeChild(s),u=null}}var n,r,o,i,s=st.createElement("div"),u=st.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",yt.clearCloneStyle="content-box"===u.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(u),gt.extend(yt,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),r},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),i}}))}();var pe=/^(none|table(?!-c[ea]).+)/,de=/^--/,ve={position:"absolute",visibility:"hidden",display:"block"},me={letterSpacing:"0",fontWeight:"400"},ye=["Webkit","Moz","ms"],be=st.createElement("div").style;gt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=F(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,i,s,u=gt.camelCase(e),a=de.test(e),c=t.style;return a||(e=R(u)),s=gt.cssHooks[e]||gt.cssHooks[u],void 0===n?s&&"get"in s&&void 0!==(o=s.get(t,!1,r))?o:c[e]:(i=typeof n,"string"===i&&(o=Vt.exec(n))&&o[1]&&(n=b(t,e,o),i="number"),null!=n&&n===n&&("number"===i&&(n+=o&&o[3]||(gt.cssNumber[u]?"":"px")),yt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(a?c.setProperty(e,n):c[e]=n)),void 0)}},css:function(t,e,n,r){var o,i,s,u=gt.camelCase(e),a=de.test(e);return a||(e=R(u)),s=gt.cssHooks[e]||gt.cssHooks[u],s&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=F(t,e,r)),"normal"===o&&e in me&&(o=me[e]),""===n||n?(i=parseFloat(o),n===!0||isFinite(i)?i||0:o):o}}),gt.each(["height","width"],function(t,e){gt.cssHooks[e]={get:function(t,n,r){if(n)return!pe.test(gt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?B(t,e,r):Gt(t,ve,function(){return B(t,e,r)})},set:function(t,n,r){var o,i=r&&he(t),s=r&&H(t,e,r,"border-box"===gt.css(t,"boxSizing",!1,i),i);return s&&(o=Vt.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=gt.css(t,e)),L(t,n,s)}}}),gt.cssHooks.marginLeft=I(yt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(F(t,"marginLeft"))||t.getBoundingClientRect().left-Gt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),gt.each({margin:"",padding:"",border:"Width"},function(t,e){gt.cssHooks[t+e]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[t+Ut[r]+e]=i[r]||i[r-2]||i[0];return o}},le.test(t)||(gt.cssHooks[t+e].set=L)}),gt.fn.extend({css:function(t,e){return Mt(this,function(t,e,n){var r,o,i={},s=0;if(Array.isArray(e)){for(r=he(t),o=e.length;s<o;s++)i[e[s]]=gt.css(t,e[s],!1,r);return i}return void 0!==n?gt.style(t,e,n):gt.css(t,e)},t,e,arguments.length>1)}}),gt.Tween=W,W.prototype={constructor:W,init:function(t,e,n,r,o,i){this.elem=t,this.prop=n,this.easing=o||gt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=i||(gt.cssNumber[n]?"":"px")},cur:function(){var t=W.propHooks[this.prop];return t&&t.get?t.get(this):W.propHooks._default.get(this)},run:function(t){var e,n=W.propHooks[this.prop];return this.options.duration?this.pos=e=gt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=gt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){gt.fx.step[t.prop]?gt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[gt.cssProps[t.prop]]&&!gt.cssHooks[t.prop]?t.elem[t.prop]=t.now:gt.style(t.elem,t.prop,t.now+t.unit)}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},gt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},gt.fx=W.prototype.init,gt.fx.step={};var ge,_e,we=/^(?:toggle|show|hide)$/,xe=/queueHooks$/;gt.Animation=gt.extend(X,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return b(n.elem,t,Vt.exec(e),n),n}]},tweener:function(t,e){gt.isFunction(t)?(e=t,t=["*"]):t=t.match(Ft);for(var n,r=0,o=t.length;r<o;r++)n=t[r],X.tweeners[n]=X.tweeners[n]||[],X.tweeners[n].unshift(e)},prefilters:[G],prefilter:function(t,e){e?X.prefilters.unshift(t):X.prefilters.push(t)}}),gt.speed=function(t,e,n){var r=t&&"object"==typeof t?gt.extend({},t):{complete:n||!n&&e||gt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!gt.isFunction(e)&&e};return gt.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in gt.fx.speeds?r.duration=gt.fx.speeds[r.duration]:r.duration=gt.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){gt.isFunction(r.old)&&r.old.call(this),r.queue&&gt.dequeue(this,r.queue)},r},gt.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Qt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var o=gt.isEmptyObject(t),i=gt.speed(e,n,r),s=function(){var e=X(this,gt.extend({},t),i);(o||Lt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||i.queue===!1?this.each(s):this.queue(i.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",i=gt.timers,s=Lt.get(this);if(o)s[o]&&s[o].stop&&r(s[o]);else for(o in s)s[o]&&s[o].stop&&xe.test(o)&&r(s[o]);for(o=i.length;o--;)i[o].elem!==this||null!=t&&i[o].queue!==t||(i[o].anim.stop(n),e=!1,i.splice(o,1));!e&&n||gt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=Lt.get(this),r=n[t+"queue"],o=n[t+"queueHooks"],i=gt.timers,s=r?r.length:0;for(n.finish=!0,gt.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),gt.each(["toggle","show","hide"],function(t,e){var n=gt.fn[e];gt.fn[e]=function(t,r,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(U(e,!0),t,r,o)}}),gt.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){gt.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),gt.timers=[],gt.fx.tick=function(){var t,e=0,n=gt.timers;for(ge=gt.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||gt.fx.stop(),ge=void 0},gt.fx.timer=function(t){gt.timers.push(t),gt.fx.start()},gt.fx.interval=13,gt.fx.start=function(){_e||(_e=!0,z())},gt.fx.stop=function(){_e=null},gt.fx.speeds={slow:600,fast:200,_default:400},gt.fn.delay=function(t,n){return t=gt.fx?gt.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}})},function(){var t=st.createElement("input"),e=st.createElement("select"),n=e.appendChild(st.createElement("option"));t.type="checkbox",yt.checkOn=""!==t.value,yt.optSelected=n.selected,t=st.createElement("input"),t.value="t",t.type="radio",yt.radioValue="t"===t.value}();var Ee,Ce=gt.expr.attrHandle;gt.fn.extend({attr:function(t,e){return Mt(this,gt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){gt.removeAttr(this,t)})}}),gt.extend({attr:function(t,e,n){var r,o,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return"undefined"==typeof t.getAttribute?gt.prop(t,e,n):(1===i&&gt.isXMLDoc(t)||(o=gt.attrHooks[e.toLowerCase()]||(gt.expr.match.bool.test(e)?Ee:void 0)),void 0!==n?null===n?void gt.removeAttr(t,e):o&&"set"in o&&void 0!==(r=o.set(t,n,e))?r:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(r=o.get(t,e))?r:(r=gt.find.attr(t,e),null==r?void 0:r))},attrHooks:{type:{set:function(t,e){if(!yt.radioValue&&"radio"===e&&u(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,o=e&&e.match(Ft);if(o&&1===t.nodeType)for(;n=o[r++];)t.removeAttribute(n)}}),Ee={set:function(t,e,n){return e===!1?gt.removeAttr(t,n):t.setAttribute(n,n),n}},gt.each(gt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Ce[e]||gt.find.attr;Ce[e]=function(t,e,r){var o,i,s=e.toLowerCase();return r||(i=Ce[s],Ce[s]=o,o=null!=n(t,e,r)?s:null,Ce[s]=i),o}});var ke=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;gt.fn.extend({prop:function(t,e){return Mt(this,gt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[gt.propFix[t]||t]})}}),gt.extend({prop:function(t,e,n){var r,o,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&gt.isXMLDoc(t)||(e=gt.propFix[e]||e,o=gt.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(t,n,e))?r:t[e]=n:o&&"get"in o&&null!==(r=o.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=gt.find.attr(t,"tabindex");return e?parseInt(e,10):ke.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),yt.optSelected||(gt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),gt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){gt.propFix[this.toLowerCase()]=this}),gt.fn.extend({addClass:function(t){var e,n,r,o,i,s,u,a=0;if(gt.isFunction(t))return this.each(function(e){gt(this).addClass(t.call(this,e,Y(this)))});if("string"==typeof t&&t)for(e=t.match(Ft)||[];n=this[a++];)if(o=Y(n),r=1===n.nodeType&&" "+K(o)+" "){for(s=0;i=e[s++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");u=K(r),o!==u&&n.setAttribute("class",u)}return this},removeClass:function(t){var e,n,r,o,i,s,u,a=0;if(gt.isFunction(t))return this.each(function(e){gt(this).removeClass(t.call(this,e,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Ft)||[];n=this[a++];)if(o=Y(n),r=1===n.nodeType&&" "+K(o)+" "){for(s=0;i=e[s++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");u=K(r),o!==u&&n.setAttribute("class",u)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):gt.isFunction(t)?this.each(function(n){gt(this).toggleClass(t.call(this,n,Y(this),e),e)}):this.each(function(){var e,r,o,i;if("string"===n)for(r=0,o=gt(this),i=t.match(Ft)||[];e=i[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||(e=Y(this),e&&Lt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Lt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+K(Y(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ae=/\r/g;gt.fn.extend({val:function(t){var e,n,r,o=this[0];{if(arguments.length)return r=gt.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=r?t.call(this,n,gt(this).val()):t,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=gt.map(o,function(t){return null==t?"":t+""})),e=gt.valHooks[this.type]||gt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=gt.valHooks[o.type]||gt.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Ae,""):null==n?"":n)}}}),gt.extend({valHooks:{option:{get:function(t){var e=gt.find.attr(t,"value");return null!=e?e:K(gt.text(t))}},select:{get:function(t){var e,n,r,o=t.options,i=t.selectedIndex,s="select-one"===t.type,a=s?null:[],c=s?i+1:o.length;for(r=i<0?c:s?i:0;r<c;r++)if(n=o[r],(n.selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!u(n.parentNode,"optgroup"))){if(e=gt(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,o=t.options,i=gt.makeArray(e),s=o.length;s--;)r=o[s],(r.selected=gt.inArray(gt.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(t.selectedIndex=-1),i}}}}),gt.each(["radio","checkbox"],function(){gt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=gt.inArray(gt(t).val(),e)>-1}},yt.checkOn||(gt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Oe=/^(?:focusinfocus|focusoutblur)$/;gt.extend(gt.event,{trigger:function(t,n,r,o){var i,s,u,a,c,l,f,h=[r||st],p=dt.call(t,"type")?t.type:t,d=dt.call(t,"namespace")?t.namespace.split("."):[];if(s=u=r=r||st,3!==r.nodeType&&8!==r.nodeType&&!Oe.test(p+gt.event.triggered)&&(p.indexOf(".")>-1&&(d=p.split("."),p=d.shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[gt.expando]?t:new gt.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:gt.makeArray(n,[t]),f=gt.event.special[p]||{},o||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!o&&!f.noBubble&&!gt.isWindow(r)){for(a=f.delegateType||p,Oe.test(a+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),u=s;u===(r.ownerDocument||st)&&h.push(u.defaultView||u.parentWindow||e)}for(i=0;(s=h[i++])&&!t.isPropagationStopped();)t.type=i>1?a:f.bindType||p,l=(Lt.get(s,"events")||{})[t.type]&&Lt.get(s,"handle"),l&&l.apply(s,n),l=c&&s[c],l&&l.apply&&Rt(s)&&(t.result=l.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),n)!==!1||!Rt(r)||c&&gt.isFunction(r[p])&&!gt.isWindow(r)&&(u=r[c],u&&(r[c]=null),gt.event.triggered=p,r[p](),gt.event.triggered=void 0,u&&(r[c]=u)),t.result}},simulate:function(t,e,n){var r=gt.extend(new gt.Event,n,{type:t,isSimulated:!0});gt.event.trigger(r,null,e)}}),gt.fn.extend({trigger:function(t,e){return this.each(function(){gt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return gt.event.trigger(t,e,n,!0)}}),gt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){gt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),gt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),yt.focusin="onfocusin"in e,yt.focusin||gt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){gt.event.simulate(e,t.target,gt.event.fix(t))};gt.event.special[e]={setup:function(){var r=this.ownerDocument||this,o=Lt.access(r,e);o||r.addEventListener(t,n,!0),Lt.access(r,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=Lt.access(r,e)-1;o?Lt.access(r,e,o):(r.removeEventListener(t,n,!0),Lt.remove(r,e))}}});var je=e.location,De=gt.now(),Ne=/\?/;gt.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||gt.error("Invalid XML: "+t),n};var Te=/\[\]$/,qe=/\r?\n/g,Pe=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;gt.param=function(t,e){var n,r=[],o=function(t,e){var n=gt.isFunction(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!gt.isPlainObject(t))gt.each(t,function(){o(this.name,this.value)});else for(n in t)Z(n,t[n],e,o);return r.join("&")},gt.fn.extend({serialize:function(){return gt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=gt.prop(this,"elements");return t?gt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!gt(this).is(":disabled")&&Fe.test(this.nodeName)&&!Pe.test(t)&&(this.checked||!Xt.test(t))}).map(function(t,e){var n=gt(this).val();return null==n?null:Array.isArray(n)?gt.map(n,function(t){return{name:e.name,value:t.replace(qe,"\r\n")}}):{name:e.name,value:n.replace(qe,"\r\n")}}).get()}});var $e=/%20/g,Ie=/#.*$/,Me=/([?&])_=[^&]*/,Re=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,He=/^(?:GET|HEAD)$/,Be=/^\/\//,We={},ze={},Ve="*/".concat("*"),Ue=st.createElement("a");Ue.href=je.href,gt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:je.href,type:"GET",isLocal:Le.test(je.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":gt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,gt.ajaxSettings),e):nt(gt.ajaxSettings,t)},ajaxPrefilter:tt(We),ajaxTransport:tt(ze),ajax:function(t,n){function r(t,n,r,u){var c,h,p,_,w,x=n;l||(l=!0,a&&e.clearTimeout(a),o=void 0,s=u||"",E.readyState=t>0?4:0,c=t>=200&&t<300||304===t,r&&(_=rt(d,E,r)),_=ot(d,_,E,c),c?(d.ifModified&&(w=E.getResponseHeader("Last-Modified"),w&&(gt.lastModified[i]=w),w=E.getResponseHeader("etag"),w&&(gt.etag[i]=w)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=_.state,h=_.data,p=_.error,c=!p)):(p=x,!t&&x||(x="error",t<0&&(t=0))),E.status=t,E.statusText=(n||x)+"",c?y.resolveWith(v,[h,x,E]):y.rejectWith(v,[E,x,p]),E.statusCode(g),g=void 0,f&&m.trigger(c?"ajaxSuccess":"ajaxError",[E,d,c?h:p]),b.fireWith(v,[E,x]),f&&(m.trigger("ajaxComplete",[E,d]),--gt.active||gt.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,i,s,u,a,c,l,f,h,p,d=gt.ajaxSetup({},n),v=d.context||d,m=d.context&&(v.nodeType||v.jquery)?gt(v):gt.event,y=gt.Deferred(),b=gt.Callbacks("once memory"),g=d.statusCode||{},_={},w={},x="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(l){if(!u)for(u={};e=Re.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)E.always(t[E.status]);else for(e in t)g[e]=[g[e],t[e]];return this},abort:function(t){var e=t||x;return o&&o.abort(e),r(0,e),this}};if(y.promise(E),d.url=((t||d.url||je.href)+"").replace(Be,je.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(Ft)||[""],null==d.crossDomain){c=st.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Ue.protocol+"//"+Ue.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=gt.param(d.data,d.traditional)),et(We,d,n,E),l)return E;f=gt.event&&d.global,f&&0===gt.active++&&gt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!He.test(d.type),i=d.url.replace(Ie,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace($e,"+")):(p=d.url.slice(i.length),d.data&&(i+=(Ne.test(i)?"&":"?")+d.data,delete d.data),d.cache===!1&&(i=i.replace(Me,"$1"),p=(Ne.test(i)?"&":"?")+"_="+De++ +p),d.url=i+p),d.ifModified&&(gt.lastModified[i]&&E.setRequestHeader("If-Modified-Since",gt.lastModified[i]),gt.etag[i]&&E.setRequestHeader("If-None-Match",gt.etag[i])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ve+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)E.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(v,E,d)===!1||l))return E.abort();if(x="abort",b.add(d.complete),E.done(d.success),E.fail(d.error),o=et(ze,d,n,E)){if(E.readyState=1,f&&m.trigger("ajaxSend",[E,d]),l)return E;d.async&&d.timeout>0&&(a=e.setTimeout(function(){E.abort("timeout")},d.timeout));try{l=!1,o.send(_,r)}catch(t){if(l)throw t;r(-1,t)}}else r(-1,"No Transport");return E},getJSON:function(t,e,n){return gt.get(t,e,n,"json")},getScript:function(t,e){return gt.get(t,void 0,e,"script")}}),gt.each(["get","post"],function(t,e){gt[e]=function(t,n,r,o){return gt.isFunction(n)&&(o=o||r,r=n,n=void 0),gt.ajax(gt.extend({url:t,type:e,dataType:o,data:n,success:r},gt.isPlainObject(t)&&t))}}),gt._evalUrl=function(t){return gt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},gt.fn.extend({wrapAll:function(t){var e;return this[0]&&(gt.isFunction(t)&&(t=t.call(this[0])),e=gt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return gt.isFunction(t)?this.each(function(e){gt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=gt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=gt.isFunction(t);return this.each(function(n){gt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){gt(this).replaceWith(this.childNodes)}),this}}),gt.expr.pseudos.hidden=function(t){return!gt.expr.pseudos.visible(t)},gt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length);
},gt.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Qe={0:200,1223:204},Ge=gt.ajaxSettings.xhr();yt.cors=!!Ge&&"withCredentials"in Ge,yt.ajax=Ge=!!Ge,gt.ajaxTransport(function(t){var n,r;if(yt.cors||Ge&&!t.crossDomain)return{send:function(o,i){var s,u=t.xhr();if(u.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)u[s]=t.xhrFields[s];t.mimeType&&u.overrideMimeType&&u.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)u.setRequestHeader(s,o[s]);n=function(t){return function(){n&&(n=r=u.onload=u.onerror=u.onabort=u.onreadystatechange=null,"abort"===t?u.abort():"error"===t?"number"!=typeof u.status?i(0,"error"):i(u.status,u.statusText):i(Qe[u.status]||u.status,u.statusText,"text"!==(u.responseType||"text")||"string"!=typeof u.responseText?{binary:u.response}:{text:u.responseText},u.getAllResponseHeaders()))}},u.onload=n(),r=u.onerror=n("error"),void 0!==u.onabort?u.onabort=r:u.onreadystatechange=function(){4===u.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{u.send(t.hasContent&&t.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),gt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),gt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return gt.globalEval(t),t}}}),gt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),gt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,o){e=gt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),st.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Je=[],Xe=/(=)\?(?=&|$)|\?\?/;gt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Je.pop()||gt.expando+"_"+De++;return this[t]=!0,t}}),gt.ajaxPrefilter("json jsonp",function(t,n,r){var o,i,s,u=t.jsonp!==!1&&(Xe.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xe.test(t.data)&&"data");if(u||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=gt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(Xe,"$1"+o):t.jsonp!==!1&&(t.url+=(Ne.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||gt.error(o+" was not called"),s[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){s=arguments},r.always(function(){void 0===i?gt(e).removeProp(o):e[o]=i,t[o]&&(t.jsonpCallback=n.jsonpCallback,Je.push(o)),s&&gt.isFunction(i)&&i(s[0]),s=i=void 0}),"script"}),yt.createHTMLDocument=function(){var t=st.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),gt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var r,o,i;return e||(yt.createHTMLDocument?(e=st.implementation.createHTMLDocument(""),r=e.createElement("base"),r.href=st.location.href,e.head.appendChild(r)):e=st),o=Ot.exec(t),i=!n&&[],o?[e.createElement(o[1])]:(o=E([t],e,i),i&&i.length&&gt(i).remove(),gt.merge([],o.childNodes))},gt.fn.load=function(t,e,n){var r,o,i,s=this,u=t.indexOf(" ");return u>-1&&(r=K(t.slice(u)),t=t.slice(0,u)),gt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&gt.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){i=arguments,s.html(r?gt("<div>").append(gt.parseHTML(t)).find(r):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,i||[t.responseText,e,t])})}),this},gt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){gt.fn[e]=function(t){return this.on(e,t)}}),gt.expr.pseudos.animated=function(t){return gt.grep(gt.timers,function(e){return t===e.elem}).length},gt.offset={setOffset:function(t,e,n){var r,o,i,s,u,a,c,l=gt.css(t,"position"),f=gt(t),h={};"static"===l&&(t.style.position="relative"),u=f.offset(),i=gt.css(t,"top"),a=gt.css(t,"left"),c=("absolute"===l||"fixed"===l)&&(i+a).indexOf("auto")>-1,c?(r=f.position(),s=r.top,o=r.left):(s=parseFloat(i)||0,o=parseFloat(a)||0),gt.isFunction(e)&&(e=e.call(t,n,gt.extend({},u))),null!=e.top&&(h.top=e.top-u.top+s),null!=e.left&&(h.left=e.left-u.left+o),"using"in e?e.using.call(t,h):f.css(h)}},gt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){gt.offset.setOffset(this,t,e)});var e,n,r,o,i=this[0];if(i)return i.getClientRects().length?(r=i.getBoundingClientRect(),e=i.ownerDocument,n=e.documentElement,o=e.defaultView,{top:r.top+o.pageYOffset-n.clientTop,left:r.left+o.pageXOffset-n.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===gt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),u(t[0],"html")||(r=t.offset()),r={top:r.top+gt.css(t[0],"borderTopWidth",!0),left:r.left+gt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-r.top-gt.css(n,"marginTop",!0),left:e.left-r.left-gt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===gt.css(t,"position");)t=t.offsetParent;return t||ee})}}),gt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;gt.fn[t]=function(r){return Mt(this,function(t,r,o){var i;return gt.isWindow(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===o?i?i[e]:t[r]:void(i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):t[r]=o)},t,r,arguments.length)}}),gt.each(["top","left"],function(t,e){gt.cssHooks[e]=I(yt.pixelPosition,function(t,n){if(n)return n=F(t,e),fe.test(n)?gt(t).position()[e]+"px":n})}),gt.each({Height:"height",Width:"width"},function(t,e){gt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){gt.fn[r]=function(o,i){var s=arguments.length&&(n||"boolean"!=typeof o),u=n||(o===!0||i===!0?"margin":"border");return Mt(this,function(e,n,o){var i;return gt.isWindow(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===o?gt.css(e,n,u):gt.style(e,n,o,u)},e,s?o:void 0,s)}})}),gt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),gt.holdReady=function(t){t?gt.readyWait++:gt.ready(!0)},gt.isArray=Array.isArray,gt.parseJSON=JSON.parse,gt.nodeName=u,n=[],r=function(){return gt}.apply(exports,n),!(void 0!==r&&(t.exports=r));var Ke=e.jQuery,Ye=e.$;return gt.noConflict=function(t){return e.$===gt&&(e.$=Ye),t&&e.jQuery===gt&&(e.jQuery=Ke),gt},o||(e.jQuery=e.$=gt),gt})},function(t,exports){"use strict";function e(){return{require:"ngModel",link:function(t,e,n,r){var o=function(t){void 0==t&&(t="");var e=t.toUpperCase();return e!==t&&(r.$setViewValue(e),r.$render()),e};r.$parsers.push(o),o(t[n.ngModel]),console.log("1111")}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e},function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":r(t)},i=e(77),s=n(i),u=e(78),a=n(u),c=e(79),l=n(c),f=e(80),h=n(f);exports.default=angular.module("activity-book",["ngMaterial","rx"]).run(["$templateCache",function(t){t.put("activity-forms.html",a.default),t.put("activity-book.html",l.default),t.put("activity-total.html",s.default)}]).directive("ablActivityBook",["$rootScope","$sce","$compile","$mdMedia","$mdDialog","$mdToast","$log","$window","$http","config","rx","observeOnScope","$stateParams","$state",function(t,e,n,r,i,s,u,a,c,f,p,d,v,m){return{restrict:"E",scope:{book:"="},template:l.default,link:function(t,e,n){function r(){console.log("resize"),t.$digest()}angular.element(a).on("resize",r)},controllerAs:"vm",controller:["$scope","$element","$attrs",function(t,e,n){function l(){return angular.forEach(y.attendees,function(t,e){if(g.attendees[t._id]=[],t.quantity>0)for(var e=0;e<t.quantity;e++)g.attendees[t._id].push(null)}),angular.forEach(y.addons,function(t,e){if(g.addons[t._id]=[],t.quantity>0)for(var e=0;e<t.quantity;e++)g.addons[t._id].push(null)}),console.log("pricing quote POST data",g),g}console.log("ablActivityBookController",t,n);var y=this,b=f;window.Stripe;b.apiVersion=f.FEATHERS_URL,this.formWasBlocked=!1,this.guestDetailsExpanded=!0,this.attendeesExpanded=!1,this.addonsExpanded=!1,this.questionsExpanded=!1,this.paymentExpanded=!1,this.paymentWasSent=!1,y.validStepsForPayment={guest:!1,attendees:!1,addons:!1,bookingQuestions:!1},this.couponStatus="untouched",this.appliedCoupon={},this.couponQuery="",this.occupancyRemaining=0,this.attendeeSubtotals=[],this.addonSubtotals=[],y.taxes=[],y.taxTotal=0,y.addons=[],y.questions=[],t.paymentResponse="",this.goToNextStep=function(t,e){switch(t){case"guestDetailsStep":y.toggleGuestDetails(),y.toggleAttendees();break;case"attendeesStep":console.log("goToNextStep:attendeesStep",y.attendeesAdded),y.countAttendeesAdded()>0&&(console.log("attendeesStep",y.addons.length,y.questions),y.addons.length>0?(y.toggleAttendees(),y.toggleAddons()):y.questions.length>0&&(y.toggleAttendees(),y.toggleQuestions()));break;case"addonsStep":y.addons.length>0&&y.countAttendeesAdded()&&(y.questions.length>0?(y.toggleAddons(),y.toggleQuestions()):(y.toggleAddons(),y.togglePay()))}},y.guestDetailsFormValid=!1,this.toggleGuestDetails=function(){console.log("toggle guest details"),this.guestDetailsExpanded=!this.formWasBlocked&&!this.guestDetailsExpanded},this.togglePayment=function(){console.log("toggle payment"),this.paymentExpanded=!this.paymentExpanded},this.returnToMainPage=function(){m.go("home",{merchant:v.merchant})},this.pricing={total:0},this.taxTotal,this.addonTotal,this.attendeeTotal=0,t.bookingSucceeded=!1,t.$mdMedia=r,t.screenIsBig=function(){var t=angular.element(a);return t[0].innerWidth>742},t.addBookingController=t.$parent,console.log("addBookingController",t.addBookingController),this.toggleQuestions=function(){console.log("toggle questions"),this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded},this.adjustAddon=function(t,e){"up"==e&&y.addons[t].quantity++,"down"==e&&y.addons[t].quantity>0&&y.addons[t].quantity--,console.log("adjust addons",y.addons),y.getPricingQuote()},console.log("adjustAddon:addons",y.addons),this.toggleAddons=function(){console.log("toggle addons"),y.addons.length<1?this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded:this.addonsExpanded=!this.formWasBlocked&&!this.addonsExpanded},this.togglePay=function(){this.payButtonEnabled=!this.payButtonEnabled},this.adjustAttendee=function(t,e){"up"==e&&y.countAttendees()>0&&y.attendees[t].quantity++,"down"==e&&y.attendees[t].quantity>0&&y.attendees[t].quantity--,console.log("adjust attendees",y.attendees),y.getPricingQuote(),y.countAttendees()},this.toggleAttendees=function(){console.log("toggle attendees"),this.attendeesExpanded=!this.formWasBlocked&&!this.attendeesExpanded},this.checkAdjustAttendee=function(e){y.attendees[e].quantity>y.countAttendees()&&(y.attendees[e].quantity=0,y.attendees[e].quantity=y.countAttendees()),y.attendees[e].quantity<0&&(y.attendees[e].quantity=0),t.safeApply(),console.log("attendees added",y.countAttendees(),y.attendees[e].quantity)};var g={attendees:{},addons:{}};y.getPricingQuote=function(){var t=l();c({method:"POST",url:b.apiVersion+"/pricing-quotes",data:t,headers:{"x-abl-access-key":v.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(t){y.pricing=t.data,y.pricing.couponDeduction=y.pricing.items.filter(function(t){return"coupon"==t.type});var e=t.data.items.filter(function(t){return"addon"==t.type});y.addonTotal=0,y.addonSubtotals=[];var n={};angular.forEach(e,function(t,e){var r=t.type+t.name.replace(" ","");n[r]||(n[r]={addons:[]}),n[r].addons.push(t)}),angular.forEach(n,function(t,e){var n={name:t.addons[0].name,price:t.addons[0].amount,amount:t.addons[0].amount*t.addons.length,quantity:t.addons.length};y.addonTotal+=t.addons[0].amount*t.addons.length,y.addonSubtotals.push(n)}),y.attendeeTotal=t.data.items.filter(function(t){return"aap"==t.type}).reduce(function(t,e){return t+e.amount},0);var r=t.data.items.filter(function(t){return"aap"==t.type});y.attendeeSubtotals=[];var o={};angular.forEach(r,function(t,e){var n=t.type+t.name.replace(" ","");o[n]||(o[n]={aaps:[]}),o[n].aaps.push(t)}),angular.forEach(o,function(t,e){var n={name:t.aaps[0].name,price:t.aaps[0].amount,amount:t.aaps[0].amount*t.aaps.length,quantity:t.aaps.length};y.attendeeSubtotals.push(n)}),y.taxTotal=t.data.items.filter(function(t){return"tax"==t.type||"fee"==t.type}).reduce(function(t,e){return t+e.amount},0),console.log("getPricingQuotes",t),console.log("taxTotal",y.taxTotal)},function(t){y.pricing={},y.taxTotal=0,console.log("getPricingQuotes error!",t,y.pricing)})},y.getPossibleCoupons=function(){c({method:"GET",url:b.apiVersion+"/coupons?bookingId="+y.couponQuery,headers:{"x-abl-access-key":v.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(t){y.possibleCoupons=t.data,console.log("getPossibleCoupons success",t)},function(t){y.possibleCoupons=[],y.taxTotal=0,console.log("getPossibleCoupons error!",t)})},y.checkCoupon=function(){y.checkingCoupon=!0,console.log("check coupon",y.couponQuery),c({method:"GET",url:b.apiVersion+"/coupons/"+y.couponQuery,headers:{"x-abl-access-key":v.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(t){console.log("checkCoupon success",t),g.couponId=t.data.couponId,y.appliedCoupon=t.data,console.log("applied coupon",y.appliedCoupon),y.validateCoupon(y.appliedCoupon),y.couponStatus="valid",y.getPricingQuote(),y.checkingCoupon=!1},function(t){delete g.couponId,y.couponStatus="invalid",y.appliedCoupon={},y.checkingCoupon=!1,console.log("checkCoupon error!",t)})},y.removeCoupon=function(){y.couponQuery="",delete g.couponId,y.couponStatus="untouched",y.appliedCoupon={},y.getPricingQuote()};var _=window.moment;y.validateCoupon=function(t){_();return console.log("coupon expires after today",_(t.endTime).isAfter(_())),!(!_(t.endTime).isAfter(_())||0!=t.maxRedemptions)||(!!(t.maxRedemptions>0&&_(t.endTime).isAfter(_())&&t.maxRedemptions-t.redemptions>=0)||(y.couponStatus="invalid",!1))},y.bookingQuestionsCompleted=function(){var t=0;return y.bookingQuestions?angular.forEach(y.bookingQuestions,function(e,n){e.length>0&&t++}):t=0,console.log("vm.bookingQuestions",y.bookingQuestions,t),t},d(t,"vm.couponQuery").debounce(500).select(function(t){return t}).subscribe(function(t){console.log("search value",t),y.couponQuery.length>0&&y.checkCoupon()}),(0,h.default)(y,p,c,v),t.$watch("addBookingController.activity",function(e){console.log("activity",e),angular.isDefined(t.addBookingController.activity)&&(y.questions=t.addBookingController.activity.questions,0===y.questions.length&&delete y.validStepsForPayment.bookingQuestions,console.log("booking questions",y.questions),y.addons=t.addBookingController.activity.charges.filter(function(t){return"addon"==t.type&&"active"==t.status}),0===y.addons.length&&delete y.validStepsForPayment.addons,y.addons.forEach(function(t,e){angular.isDefined(t.quantity)||(t.quantity=0)}),y.taxes=t.addBookingController.activity.charges.filter(function(t){return"tax"==t.type}),console.log("taxes",y.taxes))},!0),y.countAttendees=function(){return t.addBookingController.event&&y.attendees?(t.addBookingController.event.maxOcc||t.addBookingController.timeslot.maxOcc)-y.attendees.map(function(t){return t.quantity}).reduce(function(t,e){return t+e},0):0},y.countAttendeesAdded=function(){return t.addBookingController.event&&y.attendees?y.attendees.map(function(t){return t.quantity}).reduce(function(t,e){return t+e},0):0},y.countAddonsAdded=function(){return t.addBookingController.event&&y.addons?y.addons.map(function(t){return t.quantity}).reduce(function(t,e){return t+e},0):0},this.areGuestDetailsValid=function(t){return t?(y.guestDetailsAreValid=t.$valid,y.validStepsForPayment.guest=y.guestDetailsAreValid):y.guestDetailsAreValid=!1,y.guestDetailsAreValid},this.areAttendeesValid=function(){return console.log("areAttendeesValid",y.countAttendeesAdded()),y.validStepsForPayment.attendees=0!==y.countAttendeesAdded(),0!==y.countAttendeesAdded()},this.areAddonsValid=function(){return console.log("areAddonsValid",y.countAddonsAdded()),null!=y.validStepsForPayment.addons&&(y.validStepsForPayment.addons=!0),0!==y.countAddonsAdded()},this.areBookingQuestionsValid=function(){return console.log("areBookingQuestionsValid",y.validStepsForPayment.bookingQuestions,y.bookingQuestionsCompleted(),o(y.bookingQuestionsCompleted()),1===y.bookingQuestionsCompleted()),null!=y.validStepsForPayment.bookingQuestions&&(y.validStepsForPayment.bookingQuestions=y.bookingQuestionsCompleted()===y.questions.length,console.log("vm.validStepsForPayment.bookingQuestions",y.validStepsForPayment.bookingQuestions)),y.bookingQuestionsCompleted()/y.questions.length!==0},this.isPaymentValid=function(){var t=[];return angular.forEach(y.validStepsForPayment,function(e,n){console.log("isPaymentValid:foreach",e,n),e||t.push(e)}),console.log("isPaymentValid",t,y.validStepsForPayment),!(t.length>0)},this.isNextStepPayment=function(t){return"attendees"===t?!(!y.addons&&!y.questions)&&(y.addons.length>0||y.questions.length>0):"addons"===t?!!y.questions&&y.questions.length>0:void 0},y.goToPay=function(){y.guestDetailsExpanded=!1,y.attendeesExpanded=!1,y.addonsExpanded=!1,y.questionsExpanded=!1,y.paymentWasSent=!0,this.formWasBlocked=!0,t.makeBooking()},t.$watch("addBookingController.timeslot",function(e){console.log("timeslot",e),angular.isDefined(t.addBookingController.timeslot)&&(angular.isDefined(t.addBookingController.timeslot.charges)&&(y.attendees=t.addBookingController.timeslot.charges.filter(function(t){return"aap"==t.type&&"active"==t.status}),y.attendees.forEach(function(t,e){angular.isDefined(t.quantity)||(t.quantity=0)})),g.timeSlotId=t.addBookingController.timeslot._id,g.startTime=t.addBookingController.timeslot.startTime)},!0),y.getBookingData=function(){var e=angular.copy(g);return e.eventInstanceId=t.addBookingController.event.eventInstanceId,e.answers={},e.email=y.formData.mail,e.phoneNumber=y.formData.phoneNumber,e.fullName=y.formData.fullName,e.notes=y.formData.notes,e.skipConfirmation="false",e.operator=t.addBookingController.activity.operator,angular.forEach(y.questions,function(t,n){e.answers[t._id]=y.bookingQuestions[n]}),e.paymentMethod="credit",e.currency="default",console.log("make booking",e),e};var w;w=function(e){"https://calendar.ablist.win"==e.origin?(console.log("TRUSTED ORIGIN",e.origin),console.log("DATA",e.data),"payment_complete"==e.data&&(console.log("PAYMENT COMPLETE"),t.paymentResponse="success",window.removeEventListener("message",w),t.paymentSuccessful=!0,t.safeApply())):console.log("UNTRUSTED ORIGIN",e.origin)},console.log("Adding Payment Message Event Listener"),window.addEventListener("message",w),t.safeApply=function(t){var e=this.$root.$$phase;"$apply"==e||"$digest"==e?t&&"function"==typeof t&&t():this.$apply(t)},t.makeBooking=function(){y.paymentExpanded=!0,y.loadingIframe=!0,t.bookingResponse=c({method:"POST",url:f.FEATHERS_URL+"/bookings",data:y.getBookingData(),headers:{"x-abl-access-key":v.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(e){console.log("makeBooking success",e),y.loadingIframe=!1,t.paymentSuccessful=!1,t.bookingSuccessResponse=e.data.booking;var n=document.getElementById("payzenIframe").contentWindow.document;n.open(),n.write(e.data.iframeHtml),n.close(),t.bookingSucceeded=!0},function(e){i.hide(),y.paymentWasSent=!1,y.loadingIframe=!1,y.paymentExpanded=!1,t.bookingSucceeded=!1,s.show(s.simple().textContent(e.data.errors[0]).position("left bottom").hideDelay(3e3)),console.log("makeBooking error!",e)})};t.showPayzenDialog=function(e){u.debug("SHOW PAYZEN DIALOG"),y.paymentExpanded=!0,t.paymentSuccessful=!1},t.prefill=function(){y.formData={fullName:"fuck",mail:"adam@ralko.com",phoneNumber:7783023246}}}]}}])},function(t,exports){t.exports='<md-card class=paymentSummaryCard ng-show="paymentResponse != \'success\'"> <md-list flex> <md-list-item class=lineItemHeader ng-if="vm.base " ng-click=null> <div class=md-list-item-text layout="row " flex> <div layout="row " layout-align="start center " flex="50 "> <p class="">Base Price </p> </div> <div layout="row " layout-align="end center " flex="50 "> <p class="">{{vm.base() / 100}} CFP</p> </div> </div> </md-list-item> <md-list-item class="paymentHeader md-2-line md-primary" ng-disabled=detailsForm.$invalid> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=local_offer class=listIcon ng-if="vm.couponStatus !=\'valid\'"></ng-md-icon> <ng-md-icon icon=clear class="listIcon remove-coupon" ng-click=vm.removeCoupon(); ng-if="vm.couponStatus ==\'valid\'"></ng-md-icon> <span class="paymentSubTitle couponText" ng-if="vm.couponStatus ==\'valid\'" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCoupon.percentage ? \'\' : \'$\'}}{{vm.appliedCoupon.amount}}{{vm.appliedCoupon.percentage ? \'%\' : \'\'}} Off</span> <span class="paymentSubTitle total"> <input ng-model=vm.couponQuery type=text class=couponInput ng-if="vm.couponStatus ==\'untouched\' || vm.couponStatus ==\'invalid\'" ng-change="vm.checkingCoupon = true" placeholder="Enter Coupon" capitalize/> </span> </div> <div layout="row " layout-align="end center "> <span class="paymentSubTitle total" ng-if=vm.pricing.couponDeduction[0]>-${{(-1 * vm.pricing.couponDeduction[0].amount / 100) | number : 2}}</span> <md-progress-circular md-mode=indeterminate ng-show="vm.checkingCoupon && vm.couponQuery.length > 0" class="listItemCircularProgress easeIn" md-diameter=24px></md-progress-circular> </div> </div> </md-list-item> <md-list-item ng-show="vm.couponStatus ==\'invalid\' && vm.couponQuery.length > 0 && !vm.checkingCoupon" class="paymentHeader md-2-line md-primary easeIn"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if="vm.couponStatus !=\'valid\'" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class="paymentSubTitle total"> Invalid Coupon </span> </div> <div layout=row layout-align="end center" flex> <ng-md-icon icon=clear class=listIcon ng-click="vm.couponQuery = \'\';"></ng-md-icon> </div> </div> </md-list-item> <div ng-if="vm.attendeeTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Attendees </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class=activityTotal>${{vm.attendeeTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat="(key, value) in vm.attendeeSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{value.quantity}} x {{value.name}} @ ${{value.price/100}} each </div> <div layout=row layout-align="end center" flex=50> ${{value.amount / 100 | number:2}} </div> </div> </div> <div ng-if="vm.addonTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Add-ons </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class=activityTotal>${{vm.addonTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat="addon in vm.addonSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{addon.quantity}} x {{addon.name}} @ ${{addon.price/100}} each </div> <div layout=row layout-align="end center" flex=50> ${{addon.amount / 100 | number:2}} </div> </div> </div> <div ng-if="vm.taxTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Taxes and Fees </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class=activityTotal>${{vm.taxTotal / 100 | number:2}}</span> </div> </div> </div> <div> <div class="md-list-item-text subtotalLineItem bottomTotal" layout="row " layout-align="space-between center " flex> <div layout="row " layout-align="start center " flex="50 "> <span class="">Total </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class="">${{(vm.pricing.total || 0) / 100 | number:2}}</span> </div> </div> </div> </md-list> </md-card> '},function(t,exports){t.exports='<div ng-if="paymentResponse != \'success\'"> <md-card class=activityPaymentSummaryCard after-render> <md-list class="" flex> <md-list-item class="paymentHeader md-2-line" ng-click=vm.toggleGuestDetails() ng-init="guestDetailsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=80> <div layout=column class=formHeader> <div layout=row layout-align="start center" flex=50> <ng-md-icon class=headerIcon icon=filter_1 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Guest Details</span> </div> </div> </div> <div layout="row " layout-align="end center " flex=20> <div layout="column " layout-align="center end " flex> <ng-md-icon icon="{{vm.guestDetailsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> <ng-md-icon ng-show="!guestDetailsHover && detailsForm.$valid" icon=check class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div ng-show=vm.guestDetailsExpanded> <form name=guestDetailsForm novalidate> <div class="detailsForm slideDown" layout-padding> <md-input-container class=md-block> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.mail.$error> <div ng-message=required>This is required.</div> <div ng-message=email>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align="end center"> <md-button class=md-raised ng-disabled=!vm.areGuestDetailsValid(guestDetailsForm) ng-click="vm.goToNextStep(\'guestDetailsStep\')">Next</md-button> </div> </div> </form> </div> <md-divider></md-divider> </md-list> <md-list flex> <md-list-item class="paymentHeader md-2-line" ng-click=vm.toggleAttendees() ng-disabled=vm.areAtendeesValid()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" class=formHeader flex> <ng-md-icon class=headerIcon icon=filter_2 class=listIcon></ng-md-icon> <span class=paymentSubTitle ng-if="vm.countAttendees() > 0" flex>Attendees <span ng-show="vm.countAttendees() < 4"> | {{vm.countAttendees()}} spots remaining</span></span> <span class=paymentSubTitle ng-if="vm.countAttendees() < 1" flex>Attendees | No spots remaining</span> </div> <div layout="row " layout-align="end center"> <div layout="column " layout-align="center end "> <ng-md-icon icon="{{vm.attendeesExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class="activityForm slideDown" ng-show=vm.attendeesExpanded ng-class=vm.areAttendeesValid()> <div ng-repeat="attendee in vm.attendees"> <md-list-item class="md-2-line addOnListItem"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=80> <div layout=column class=""> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row> <span class=lineItemSubDetail>${{attendee.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout="row " layout-align="end center" flex=20> <div layout="column " class=addOnAdjusters layout-align="center end " flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAttendee($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline " class=listIconSub ng-click="vm.adjustAttendee($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end "> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align="start center" flex=80> </div> <div layout=row layout-align="end center" flex=20> <div layout="column " layout-align="center end" flex> <md-button ng-if="vm.isNextStepPayment(\'attendees\')" class=md-raised ng-disabled=!vm.areAttendeesValid() ng-click="vm.goToNextStep(\'attendeesStep\')">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> <div ng-if="vm.addons.length > 0"> <md-list-item class="paymentHeader md-2-line" ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click=vm.toggleAddons()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=80> <div layout=column class=formHeader> <div layout=row layout-align="start center" flex=50> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> </div> </div> <div layout="row " layout-align="end center" flex=20> <div layout=column layout-align="center end" flex> <ng-md-icon ng-show="vm.addOnsSelected == 1" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon="{{vm.addonsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class="activityForm slideDown" ng-show=vm.addonsExpanded ng-class=vm.areAddonsValid()> <div ng-repeat="addon in vm.addons"> <md-list-item class="md-2-line addOnListItem"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=80> <div layout=column class=""> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=""> <span class=lineItemSubDetail>${{addon.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout=row layout-align="end center" flex=20> <div layout="column " class=addOnAdjusters layout-align="center end" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAddon($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline " class=listIconSub ng-click="vm.adjustAddon($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end"> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.getPricingQuote(); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align="start center" flex=80> </div> <div layout=row layout-align="end center" flex=20> <div layout="column " layout-align="center end" flex> <md-button ng-if="vm.isNextStepPayment(\'addons\')" class=md-raised ng-click="vm.goToNextStep(\'addonsStep\')">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> </div> <div ng-if="vm.questions.length > 0"> <md-list-item class="paymentHeader md-2-line" ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click=vm.toggleQuestions()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column class=formHeader> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=filter_4 class=listIcon ng-if="vm.addons.length > 0"></ng-md-icon> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon ng-if="vm.addons.length == 0"></ng-md-icon> <span class=paymentSubTitle>Booking Questions | {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout="row " layout-align="end center"> <div layout="column " layout-align="center end" flex> <ng-md-icon icon="{{vm.questionsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class="questionForm slideDown" ng-show=vm.questionsExpanded ng-class=!vm.areBookingQuestionsValid()> <div ng-repeat="question in vm.questions"> <md-list-item class="md-2-line addOnListItem"> <div layout=row class=md-list-item-text flex> <div layout=column layout-align="center stretch" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align="start center"> <ng-md-icon icon="{{vm.bookingQuestions[$index].length > 0 ? \'done\' : \'priority_high\'}}" class=inputStatusIcon></ng-md-icon> <md-input-container flex> <textarea name=question ng-model=vm.bookingQuestions[$index] md-maxlength=300 rows=1></textarea> </md-input-container> </div> </div> </div> </md-list-item> </div> </div> <md-divider ng-if=!vm.addonsExpanded></md-divider> </div> <div layout=row> <md-button flex class="md-primary md-raised" ng-disabled="!vm.isPaymentValid() || vm.paymentWasSent" ng-click=vm.goToPay()><i class="fa fa-credit-card" aria-hidden=true></i> Pay</md-button> </div> <div class="activityForm slideDown" ng-show=vm.paymentExpanded> <div ng-if=vm.loadingIframe layout=row layout-align="space-around center" style=padding:20px> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <iframe ng-style="{\'height\': vm.loadingIframe ? \'0\' : \'100%\'}" id=payzenIframe class=payzenIframe></iframe> </div> <md-divider></md-divider> </md-list> </md-card> </div> ';
},function(t,exports){t.exports=' <div layout="{{screenIsBig() ? \'row\' : \'column\'}}" layout-align="{{screenIsBig() ? \'center start\' : \'center center\'}}" class=columnFix> <div class=paymentSummaryCardLarge> <div ng-include="\'activity-forms.html\'"></div> </div> <div class=paymentSummaryCardLarge> <div ng-include="\'activity-total.html\'"></div> </div> </div> <div> <md-card class=paymentSummaryCard ng-show="paymentResponse.length > 0"> <md-list> <div ng-show="paymentResponse == \'success\'" class=easeIn> <md-list-item class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50 md-colors="{color: \'primary\'}"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Complete</span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class="paymentSubTitle total" md-colors="{color: \'green\'}"></span> <ng-md-icon icon=check class=listIcon md-colors="{fill: \'green\'}"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=column layout-align="space-between center"> <div layout=row layout-wrap> <p class=listMessage>An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> <div layout=row layout-wrap> <p flex=none class=listMessage>For questions about your booking please contact: </p> <p flex=none class=listMessage>{{bookingSuccessResponse.operator.companyName}} (+{{bookingSuccessResponse.operator.primaryContact.phoneNumber}}) </p> <p flex=none class=listMessage>{{bookingSuccessResponse.operator.primaryContact.email}} </p> <p flex=none class=listMessage>Booking reference ID: {{bookingSuccessResponse.bookingId}} </p> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-align="end center" flex> <md-button class="md-raised md-primary" ng-click=vm.returnToMainPage()>Return</md-button> </div> </md-list-item> </div> <div ng-show="paymentResponse == \'failed\'"> <md-list-item class="paymentHeader md-2-line md-primary" md-colors="{color: \'primary\'}" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50 md-colors="{color: \'warn\'}"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Failed</span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class="paymentSubTitle total" md-colors="{color: \'warn\'}"></span> <ng-md-icon icon=error class=listIcon md-colors="{fill: \'warn\'}"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align="end center" flex> <md-button class="md-raised md-primary" ng-click=vm.payNow();>Try Again</md-button> </div> </md-list-item> </div> <div ng-show="paymentResponse == \'processing\'"> <md-list-item class="paymentHeader md-2-line md-primary" md-colors="{color: \'primary\'}" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex layout-grow md-colors="{color: \'primary\'}"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Processing</span> </div> <div layout="row " layout-align="end center "> <span class="paymentSubTitle total" md-colors="{color: \'green\'}"></span> <ng-md-icon icon=watch_later class=listIcon md-colors="{fill: \'amber\'}"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align="end center" flex> <md-button class="md-raised md-primary" ng-click="goToState(\'home\');">Return</md-button> </div> </md-list-item> </div> </md-list> </md-card> </div>'},function(t,exports){"use strict";function e(t,e,n,r){return t.searchClients=function(o){return e.Observable.fromPromise(n({method:"GET",url:t.config.apiVersion+"/clients?fullName="+text,headers:{"x-abl-access-key":r.merchant,"x-abl-date":Date.parse((new Date).toISOString())}})).select(function(t){return console.log(t),t})},t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e}]);
//# sourceMappingURL=abl-sdk.min.js.map
=======
!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=t(2),o=n(i),r=t(3),a=n(r),s=t(16),l=n(s),u=t(21),c=n(u),d=t(22),p=n(d),m=t(23),f=(n(m),t(28)),v=n(f),g=t(30),h=n(g),y=(t(31),window.Rx),b=function(e){var t=null,n=null,i=null,r=!1,s=!0,u=window.localStorage,d=[];return{setAuthStorage:function(e){u=e},setSocketOpts:function(e){i=e},useSocket:function(e){s=!!e},setEndpoint:function(e){t=e},setApiKey:function(e){n=e},setFeathersAuth:function(e){r=e},setServices:function(e){d=e},getSettings:function(){return t},$get:["$injector","$rootScope","$timeout","$log","$mdToast","$http",function(e,d,m,f,g,h){var d=e.get("$rootScope"),b=this;return d.loading=!0,this.loadingTimeout=null,this.loadingTimeout=m(function(){d.loading=!1},1500),d.afterRender=function(e,t){m.cancel(this.loadingTimeout),this.loadingTimeout=m(function(){d.loading=!1},1500)},t?(this.app=(0,o.default)().configure((0,l.default)(y)).configure(o.default.hooks()).use("cache",(0,a.default)({name:"abl-am",storage:window.localStorage})),this.app.endpoint=t,this.app.apiKey=n,s?(this.socket=io(t,i),this.app.configure(o.default.socketio(this.socket))):(this.app.configure(o.default.rest(t).jquery(window.jQuery)),this.app.rest.ajaxSetup({url:t,headers:{"X-ABL-Access-Key":this.app.apiKey,"X-ABL-Date":Date.parse((new Date).toISOString())}})),(0,p.default)(this.app,g,d),(0,v.default)(this.app,h),r&&(this.app=(0,c.default)(this.app,b,u,d)),this.app):(this.app={},this.app)}]}},x=[function(){return b("feathers")}],w=[function(){return b("abl")}];angular.module("abl-sdk-feathers",["ngMaterial","rx"]).provider("$abl",w).provider("$feathers",x).directive("capitalize",h.default).filter("startFrom",function(){return function(e,t){return t=+t,e.slice(t)}}).directive("formatPhone",[function(){return{require:"ngModel",restrict:"A",link:function(e,t,n,i,o){t.add(phonenumber).on("keyup",function(){var e=t.val().replace(/[^\w\s]/gi,"");if(10===e.length){var n=e.replace(/(.{3})/g,"$1-"),i=n.slice(0,-2)+n.slice(-1);jQuery("#phonenumber").val(i)}})}}}])},function(e,exports){e.exports=feathers},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return new u(e)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)};exports.default=r;var l=t(4),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(o._storageKey=e.name||"feathers",o._storage=e.storage||"undefined"!=typeof window&&window.localStorage,o._throttle=e.throttle||200,o.store=null,!o._storage)throw new Error("The `storage` option needs to be provided");return o}return o(t,e),a(t,[{key:"ready",value:function(){var e=this;return this.store?Promise.resolve(this.store):Promise.resolve(this._storage.getItem(this._storageKey)).then(function(e){return JSON.parse(e||"{}")}).then(function(t){var n=Object.keys(t),i=t[n[n.length-1]];return e._uId=n.length&&"undefined"!=typeof i[e.id]?i[e.id]+1:0,e.store=t})}},{key:"flush",value:function(e){var t=this;return this._timeout||(this._timeout=setTimeout(function(){t._storage.setItem(t._storageKey,JSON.stringify(t.store)),delete t._timeout},this.throttle)),e}},{key:"execute",value:function(e){for(var n=this,i=arguments.length,o=Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return this.ready().then(function(){var i;return(i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),e,n)).call.apply(i,[n].concat(o))})}},{key:"find",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.execute.apply(this,["find"].concat(t))}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.execute.apply(this,["get"].concat(t))}},{key:"create",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.execute.apply(this,["create"].concat(n)).then(function(t){return e.flush(t)})}},{key:"patch",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.execute.apply(this,["patch"].concat(n)).then(function(t){return e.flush(t)})}},{key:"update",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.execute.apply(this,["update"].concat(n)).then(function(t){return e.flush(t)})}},{key:"remove",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.execute.apply(this,["remove"].concat(n)).then(function(t){return e.flush(t)})}}]),t}(l.Service);r.Service=l.Service,e.exports=exports.default},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return new v(e)}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();exports.default=a;var l=t(5),u=n(l),c=t(6),d=n(c),p=t(12),m=n(p),f=t(7),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.paginate=t.paginate||{},this._id=this.id=t.idField||t.id||"id",this._uId=t.startId||0,this.store=t.store||{},this.events=t.events||[],this._matcher=t.matcher||f.matcher,this._sorter=t.sorter||f.sorter}return s(e,[{key:"extend",value:function(e){return u.default.extend(e,this)}},{key:"_find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default,n=t(e.query||{}),i=n.query,r=n.filters,a=f._.values(this.store).filter(this._matcher(i)),s=a.length;return r.$sort&&a.sort(this._sorter(r.$sort)),r.$skip&&(a=a.slice(r.$skip)),"undefined"!=typeof r.$limit&&(a=a.slice(0,r.$limit)),r.$select&&(a=a.map(function(e){return f._.pick.apply(f._,[e].concat(o(r.$select)))})),Promise.resolve({total:s,limit:r.$limit,skip:r.$skip||0,data:a})}},{key:"find",value:function(e){var t="undefined"!=typeof e.paginate?e.paginate:this.paginate,n=this._find(e,function(e){return(0,d.default)(e,t)});return t&&t.default?n:n.then(function(e){return e.data})}},{key:"get",value:function(e,t){return e in this.store?Promise.resolve(this.store[e]).then((0,f.select)(t,this.id)):Promise.reject(new m.default.NotFound("No record found for id '"+e+"'"))}},{key:"_create",value:function(e,t){var n=e[this._id]||this._uId++,o=f._.extend({},e,i({},this._id,n));return Promise.resolve(this.store[n]=o).then((0,f.select)(t,this.id))}},{key:"create",value:function(e,t){var n=this;return Array.isArray(e)?Promise.all(e.map(function(e){return n._create(e)})):this._create(e,t)}},{key:"_update",value:function(e,t,n){if(e in this.store){var o=this.store[e][this._id];return e=o==e?o:e,t=f._.extend({},t,i({},this._id,e)),this.store[e]=t,Promise.resolve(this.store[e]).then((0,f.select)(n,this.id))}return Promise.reject(new m.default.NotFound("No record found for id '"+e+"'"))}},{key:"update",value:function(e,t,n){return null===e||Array.isArray(t)?Promise.reject(new m.default.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")):this._update(e,t,n)}},{key:"_patch",value:function(e,t,n){return e in this.store?(f._.extend(this.store[e],f._.omit(t,this._id)),Promise.resolve(this.store[e]).then((0,f.select)(n,this.id))):Promise.reject(new m.default.NotFound("No record found for id '"+e+"'"))}},{key:"patch",value:function(e,t,n){var i=this;return null===e?this._find(n).then(function(e){return Promise.all(e.data.map(function(e){return i._patch(e[i._id],t,n)}))}):this._patch(e,t,n)}},{key:"_remove",value:function(e,t){if(e in this.store){var n=this.store[e];return delete this.store[e],Promise.resolve(n).then((0,f.select)(t,this.id))}return Promise.reject(new m.default.NotFound("No record found for id '"+e+"'"))}},{key:"remove",value:function(e,t){var n=this;return null===e?this._find(t).then(function(e){return Promise.all(e.data.map(function(e){return n._remove(e[n._id],t)}))}):this._remove(e,t)}}]),e}();a.Service=v,e.exports=exports.default},function(e,exports,t){var n,i,o;!function(t,r){i=[],n=r,o="function"==typeof n?n.apply(exports,i):n,!(void 0!==o&&(e.exports=o))}(this,function(){function e(e,t,n,i){return function(){var o=this._super;this._super="function"==typeof t?t:e[n];var r=i.apply(this,arguments);return this._super=o,r}}function t(t,n){var i,o=n||this,r=/\b_super\b/,a=Object.getPrototypeOf(o)||o.prototype;for(var s in t)i=o[s],("function"==typeof t[s]&&"function"==typeof a[s]||"function"==typeof i&&"function"==typeof t[s])&&r.test(t[s])?o[s]=e(a,i,s,t[s]):o[s]=t[s];return o}function n(t,n){var i=n||this,o=/\b_super\b/,r=Object.getPrototypeOf(i)||i.prototype,a={},s=t,l=function(e){a[e]||(a[e]=Object.getOwnPropertyDescriptor(s,e))};do Object.getOwnPropertyNames(s).forEach(l);while((s=Object.getPrototypeOf(s))&&Object.getPrototypeOf(s));return Object.keys(a).forEach(function(t){var n=a[t];"function"==typeof n.value&&o.test(n.value)&&(n.value=e(r,i[t],t,n.value)),Object.defineProperty(i,t,n)}),i}return{create:function(){var e=Object.create(this),t="string"==typeof e.__init?e.__init:"init";return"function"==typeof e[t]&&e[t].apply(e,arguments),e},mixin:"function"==typeof Object.defineProperty?n:t,extend:function(e,t){return this.mixin(e,Object.create(t||this))},proxy:function(e){var t=this[e],n=Array.prototype.slice.call(arguments,1);return n.unshift(this),t.bind.apply(t,n)}}})},function(e,exports,t){"use strict";function n(e){if("undefined"!=typeof e)return Math.abs(parseInt(e,10))}function i(e,t){if(t&&t.default){var n="number"==typeof e?e:t.default,i="number"==typeof t.max?t.max:Number.MAX_VALUE;return Math.min(n,i)}return e}function o(e){if("object"!==("undefined"==typeof e?"undefined":r(e)))return e;var t={};return Object.keys(e).forEach(function(n){return t[n]="object"===r(e[n])?e[n]:parseInt(e[n],10)}),t}Object.defineProperty(exports,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.default=function(e,t){var r={$sort:o(e.$sort),$limit:i(n(e.$limit),t),$skip:n(e.$skip),$select:e.$select,$populate:e.$populate};return{filters:r,query:a._.omit.apply(a._,[e].concat(s))}};var a=t(7),s=["$sort","$limit","$skip","$select","$populate"];e.exports=exports.default},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(8),o=n(i),r=t(9),a=t(11),s=n(a);exports.default={_:r._,getArguments:o.default,stripSlashes:r.stripSlashes,hooks:s.default,matcher:r.matcher,sorter:r.sorter,select:r.select,makeUrl:r.makeUrl,each:r.each,some:r.some,every:r.every,keys:r.keys,values:r.values,isMatch:r.isMatch,isEmpty:r.isEmpty,isObject:r.isObject,extend:r.extend,omit:r.omit,pick:r.pick,merge:r.merge},e.exports=exports.default},function(e,exports){"use strict";function t(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(e,t){return l[e](t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var i=exports.noop=function(){},o=function(e){var t=e[e.length-1];return"function"==typeof t?t:i},r=function(e,n){return"object"===t(e[n])?e[n]:{}},a=function(e){return function(n){var i=n[0],a=n[1],s=o(n),l=r(n,2);if("function"==typeof i)throw new Error("First parameter for '"+e+"' can not be a function");if("object"!==("undefined"==typeof a?"undefined":t(a)))throw new Error("No data provided for '"+e+"'");if(n.length>4)throw new Error("Too many arguments for '"+e+"' service method");return[i,a,l,s]}},s=function(e){return function(t){var n=t[0],i=r(t,1),a=o(t);if(t.length>3)throw new Error("Too many arguments for '"+e+"' service method");if("function"==typeof n)throw new Error("First parameter for '"+e+"' can not be a function");return[n,i,a]}},l=exports.converters={find:function(e){var t=o(e),n=r(e,0);if(e.length>2)throw new Error("Too many arguments for 'find' service method");return[n,t]},create:function(e){var n=e[0],i=r(e,1),a=o(e);if("object"!==("undefined"==typeof n?"undefined":t(n)))throw new Error("First parameter for 'create' must be an object");if(e.length>3)throw new Error("Too many arguments for 'create' service method");return[n,i,a]},update:a("update"),patch:a("patch"),get:s("get"),remove:s("remove")}},function(e,exports,t){(function(e){"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return e.replace(/^(\/*)|(\/*)$/g,"")}function r(e,t){e&&"function"==typeof e.forEach?e.forEach(t):p(e)&&Object.keys(e).forEach(function(n){return t(e[n],n)})}function a(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).some(function(e){return t.apply(void 0,i(e))})}function s(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).every(function(e){return t.apply(void 0,i(e))})}function l(e){return Object.keys(e)}function u(e){return k.keys(e).map(function(t){return e[t]})}function c(e,t){return k.keys(t).every(function(n){return e[n]===t[n]})}function d(e){return 0===k.keys(e).length}function p(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&!Array.isArray(e)&&null!==e}function m(){return w.apply(void 0,arguments)}function f(e){for(var t=k.extend({},e),n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.forEach(function(e){return delete t[e]}),t}function v(e){for(var t={},n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.forEach(function(n){t[n]=e[n]}),t}function g(e,n){return p(e)&&p(n)&&Object.keys(n).forEach(function(i){p(n[i])?(e[i]||w(e,t({},i,{})),g(e[i],n[i])):w(e,t({},i,n[i]))}),e}function h(e){for(var t=e&&e.query&&e.query.$select,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];Array.isArray(t)&&o.length&&t.push.apply(t,o);var a=function(e){return Array.isArray(t)?k.pick.apply(k,[e].concat(i(t))):e};return function(e){return Array.isArray(e)?e.map(a):a(e)}}function y(e){var t=k.omit(e,"$limit","$skip","$sort","$select");return function(e){return!(!t.$or||!k.some(t.$or,function(t){return y(t)(e)}))||k.every(t,function(i,o){return null!==i&&"object"===("undefined"==typeof i?"undefined":n(i))?k.every(i,function(t,n){if(S[n]){var i=S[n](o,t);return i(e)}return!1}):"undefined"!=typeof e[o]&&e[o]===t[o]})}}function b(e){return function(t,n){var i=0;return r(e,function(e,o){e=parseInt(e,10),t[o]<n[o]&&(i-=1*e),t[o]>n[o]&&(i+=1*e)}),i}}function x(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i="function"==typeof n.get?n.get.bind(n):function(){},r=i("env")||e.env.NODE_ENV,a=i("host")||e.env.HOST_NAME||"localhost",s="development"===r||"test"===r||void 0===r?"http":"https",l=i("port")||e.env.PORT||3030,u="development"===r||"test"===r||void 0===r?":"+l:"";return t=t||"",s+"://"+a+u+"/"+o(t)}var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.stripSlashes=o,exports.each=r,exports.some=a,exports.every=s,exports.keys=l,exports.values=u,exports.isMatch=c,exports.isEmpty=d,exports.isObject=p,exports.extend=m,exports.omit=f,exports.pick=v,exports.merge=g,exports.select=h,exports.matcher=y,exports.sorter=b,exports.makeUrl=x;var k=exports._={each:r,some:a,every:s,keys:l,values:u,isMatch:c,isEmpty:d,isObject:p,extend:m,omit:f,pick:v,merge:g},S=exports.specialFilters={$in:function(e,t){return function(n){return t.indexOf(n[e])!==-1}},$nin:function(e,t){return function(n){return t.indexOf(n[e])===-1}},$lt:function(e,t){return function(n){return n[e]<t}},$lte:function(e,t){return function(n){return n[e]<=t}},$gt:function(e,t){return function(n){return n[e]>t}},$gte:function(e,t){return function(n){return n[e]>=t}},$ne:function(e,t){return function(n){return n[e]!==t}}}}).call(exports,t(10))},function(e,exports){function t(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function r(){f&&p&&(f=!1,p.length?m=p.concat(m):v=-1,m.length&&a())}function a(){if(!f){var e=i(r);f=!0;for(var t=m.length;t;){for(p=m,m=[];++v<t;)p&&p[v].run();v=-1,t=m.length}p=null,f=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,c,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(e){u=t}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var p,m=[],f=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new s(e,t)),1!==m.length||f||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,exports,t){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function i(e){return{id:e[0],params:e[1],callback:e[2]}}function o(e){return{id:e[0],data:e[1],params:e[2],callback:e[3]}}function r(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=d[e](n);return o.method=e,o.type=t,"function"==typeof i?o.app=i:u(o,i),o}function a(e){var t=[];return"undefined"!=typeof e.id&&t.push(e.id),e.data&&t.push(e.data),t.push(e.params||{}),t.push(e.callback),t}function s(e){return"find"===e.method?[e.params,e.callback]:"get"===e.method||"remove"===e.method?[e.id,e.params,e.callback]:"update"===e.method||"patch"===e.method?[e.id,e.data,e.params,e.callback]:"create"===e.method?[e.data,e.params,e.callback]:a(e)}function l(e){var t={};return Array.isArray(e)?t={all:e}:"object"!==("undefined"==typeof e?"undefined":n(e))?t={all:[e]}:(0,c.each)(e,function(e,n){t[n]=Array.isArray(e)?e:[e]}),t}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};Object.defineProperty(exports,"__esModule",{value:!0});var c=t(9),d={find:function(e){return{params:e[0],callback:e[1]}},create:function(e){return{data:e[0],params:e[1],callback:e[2]}},get:i,remove:i,update:o,patch:o};exports.default={hookObject:r,hook:r,converters:d,defaultMakeArguments:a,makeArguments:s,convertHookData:l},e.exports=exports.default},function(e,exports,t){"use strict";function n(e,t,n,i,o){e=e||"Error";var r=void 0,a=void 0,s=void 0;e instanceof Error?(a=e.message||"Error",e.errors&&(r=e.errors)):"object"===("undefined"==typeof e?"undefined":w(e))?(a=e.message||"Error",o=e):a=e,Error.call(this,a),o&&(s=JSON.parse(JSON.stringify(o)),s.errors?(r=s.errors,delete s.errors):o.errors&&(r=JSON.parse(JSON.stringify(o.errors)))),this.type="FeathersError",this.name=t,this.message=a,this.code=n,this.className=i,this.data=s,this.errors=r||{},k(this.name+"("+this.code+"): "+this.message),k(this.errors)}function i(e,t){n.call(this,e,"BadRequest",400,"bad-request",t)}function o(e,t){n.call(this,e,"NotAuthenticated",401,"not-authenticated",t)}function r(e,t){n.call(this,e,"PaymentError",402,"payment-error",t)}function a(e,t){n.call(this,e,"Forbidden",403,"forbidden",t)}function s(e,t){n.call(this,e,"NotFound",404,"not-found",t)}function l(e,t){n.call(this,e,"MethodNotAllowed",405,"method-not-allowed",t)}function u(e,t){n.call(this,e,"NotAcceptable",406,"not-acceptable",t)}function c(e,t){n.call(this,e,"Timeout",408,"timeout",t)}function d(e,t){n.call(this,e,"Conflict",409,"conflict",t)}function p(e,t){n.call(this,e,"LengthRequired",411,"length-required",t)}function m(e,t){n.call(this,e,"Unprocessable",422,"unprocessable",t)}function f(e,t){n.call(this,e,"TooManyRequests",429,"too-many-requests",t)}function v(e,t){n.call(this,e,"GeneralError",500,"general-error",t)}function g(e,t){n.call(this,e,"NotImplemented",501,"not-implemented",t)}function h(e,t){n.call(this,e,"BadGateway",502,"bad-gateway",t)}function y(e,t){n.call(this,e,"Unavailable",503,"unavailable",t)}function b(e){if(!e)return e;var t=S[e.name],n=t?new t(e.message,e.data):new Error(e.message||e);return"object"===("undefined"==typeof e?"undefined":w(e))&&x(n,e),n}Object.defineProperty(exports,"__esModule",{value:!0});var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=t(13)("feathers-errors");n.prototype=new Error,Object.defineProperty(n.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),i.prototype=new n,o.prototype=new n,r.prototype=new n,a.prototype=new n,s.prototype=new n,l.prototype=new n,u.prototype=new n,c.prototype=new n,d.prototype=new n,p.prototype=new n,m.prototype=new n,f.prototype=new n,v.prototype=new n,g.prototype=new n,h.prototype=new n,y.prototype=new n;var S={FeathersError:n,BadRequest:i,NotAuthenticated:o,PaymentError:r,Forbidden:a,NotFound:s,MethodNotAllowed:l,NotAcceptable:u,Timeout:c,Conflict:d,LengthRequired:p,Unprocessable:m,TooManyRequests:f,GeneralError:v,NotImplemented:g,BadGateway:h,Unavailable:y,400:i,401:o,402:r,403:a,404:s,405:l,406:u,408:c,409:d,411:p,422:m,429:f,500:v,501:g,502:h,503:y};exports.default=x({convert:b,types:S,errors:S},S),e.exports=exports.default},function(e,exports,t){(function(n){function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+exports.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)}}function r(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(e){}}function s(){var e;try{e=exports.storage.debug}catch(e){}return!e&&"undefined"!=typeof n&&"env"in n&&(e=n.env.DEBUG),e}function l(){try{return window.localStorage}catch(e){}}exports=e.exports=t(14),exports.log=r,exports.formatArgs=o,exports.save=a,exports.load=s,exports.useColors=i,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},exports.enable(s())}).call(exports,t(10))},function(e,exports,t){function n(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return exports.colors[Math.abs(n)%exports.colors.length]}function i(e){function t(){if(t.enabled){var e=t,n=+new Date,i=n-(l||n);e.diff=i,e.prev=l,e.curr=n,l=n;for(var o=new Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];o[0]=exports.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;a++;var i=exports.formatters[n];if("function"==typeof i){var r=o[a];t=i.call(e,r),o.splice(a,1),a--}return t}),exports.formatArgs.call(e,o);var s=t.log||exports.log||void 0;s.apply(e,o)}}return t.namespace=e,t.enabled=exports.enabled(e),t.useColors=exports.useColors(),t.color=n(e),"function"==typeof exports.init&&exports.init(t),t}function o(e){exports.save(e),exports.names=[],exports.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function r(){exports.enable("")}function a(e){var t,n;for(t=0,n=exports.skips.length;t<n;t++)if(exports.skips[t].test(e))return!1;for(t=0,n=exports.names.length;t<n;t++)if(exports.names[t].test(e))return!0;return!1}function s(e){return e instanceof Error?e.stack||e.message:e}exports=e.exports=i.debug=i.default=i,exports.coerce=s,exports.disable=r,exports.enable=o,exports.enabled=a,exports.humanize=t(15),exports.names=[],exports.skips=[],exports.formatters={};var l},function(e,exports){function t(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function n(e){return e>=l?Math.round(e/l)+"d":e>=s?Math.round(e/s)+"h":e>=a?Math.round(e/a)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}function i(e){return o(e,l,"day")||o(e,s,"hour")||o(e,a,"minute")||o(e,r,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var r=1e3,a=60*r,s=60*a,l=24*s,u=365.25*l;e.exports=function(e,o){o=o||{};var r=typeof e;if("string"===r&&e.length>0)return t(e);if("number"===r&&isNaN(e)===!1)return o.long?i(e):n(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new Error("You have to pass an instance of RxJS as the first paramter.");if(!e.Observable)throw new Error("The RxJS instance does not seem to provide an `Observable` type.");var n=(0,c.default)(e);t=Object.assign({idField:"id",dataField:"data",sorter:d.makeSorter,lazy:!1,matcher:o.matcher,listStrategy:"smart",listStrategies:n},t);var i=function n(i){var o=this,n={rx:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._rx=e,this}},r={created:e.Observable.fromEvent(i,"created"),updated:e.Observable.fromEvent(i,"updated"),patched:e.Observable.fromEvent(i,"patched"),removed:e.Observable.fromEvent(i,"removed")};o.methods.forEach(function(o){"function"==typeof i[o]&&(n[o]="find"===o?(0,l.default)(e,r,t):(0,a.default)(e,r,t,o))}),i.mixin(n)};return function(){p("Initializing feathers-reactive plugin"),this.mixins.push(i)}}Object.defineProperty(exports,"__esModule",{value:!0});var o=t(9),r=t(17),a=n(r),s=t(19),l=n(s),u=t(20),c=n(u),d=t(18),p=t(13)("feathers-reactive");i.strategy=c.default,exports.default=i,e.exports=exports.default},function(e,exports,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.paramsPositions=void 0,exports.default=function(e,t,r,a){return function(){var s=arguments,l="undefined"!=typeof o[a]?o[a]:1,u=arguments[l]||{};if(this._rx===!1||u.rx===!1)return this._super.apply(this,n(s));var c=(0,i.getOptions)(r,this._rx,u.rx),d=(0,i.getSource)(e,c.lazy,this._super.bind(this),s),p=d.concat(d.exhaustMap(function(n){var i=function(e){return e[c.idField]===n[c.idField]},o=t.removed.filter(i),r=e.Observable.merge(t.created,t.updated,t.patched).filter(i);return e.Observable.merge(r,o.map(function(){return null}))}));return(0,i.promisify)(p)}};var i=t(18),o=exports.paramsPositions={update:2,patch:2}},function(e,exports,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n,o){if(t===!0){var r=function(){var t=null;return{v:e.Observable.create(function(e){var r=e;if(t||(t=n.apply(void 0,i(o))),!t||"function"!=typeof t.then||"function"!=typeof t.catch)throw new Error("feathers-reactive only works with services that return a Promise");t.then(function(e){r.next(e),r.complete()}).catch(function(e){return r.error(e)})})}}();if("object"===("undefined"==typeof r?"undefined":l(r)))return r.v}return e.Observable.fromPromise(n.apply(void 0,i(o)))}function r(e){return Object.assign(e,{then:function(){var e;return(e=this.first().toPromise()).then.apply(e,arguments)},catch:function(){var e;return(e=this.first().toPromise()).catch.apply(e,arguments)}})}function a(e,t){var i=e.$sort?(0,u.sorter)(e.$sort):(0,u.sorter)(n({},t.idField,1));return function(n){
var o=!!n[t.dataField],r=o?n[t.dataField]:n;i&&(r=r.sort(i));var a="number"==typeof n.limit?n.limit:parseInt(e.$limit,10);return a&&!isNaN(a)&&(r=r.slice(0,a)),o?n[t.dataField]=r:n=r,n}}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=Object.assign.apply(Object,[{},e].concat(n));return"string"==typeof o.listStrategy&&(o.listStrategy=o.listStrategies[o.listStrategy]),o}Object.defineProperty(exports,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.getSource=o,exports.promisify=r,exports.makeSorter=a,exports.getOptions=s;var u=t(9)},function(e,exports,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t,o){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments;if(this._rx===!1||r.rx===!1)return this._super.apply(this,n(a));var s=(0,i.getOptions)(o,this._rx,r.rx),l=(0,i.getSource)(e,s.lazy,this._super.bind(this),arguments),u=s.listStrategy.call(this,l,t,s,a);return(0,i.promisify)(u)}};var i=t(18);e.exports=exports.default},function(e,exports){"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return{never:function(e){return e},always:function(t,i,o,r){var a=r[0]||{},s=Object.assign({},a.query),l=this._super.bind(this),u=o.matcher(s),c=o.sorter(s,o);return t.concat(t.exhaustMap(function(){return e.Observable.merge(i.created.filter(u),i.removed,i.updated,i.patched).flatMap(function(){var t=e.Observable.fromPromise(l.apply(void 0,n(r)));return t.map(c)})}))},smart:function(n,i,o,r){var a=r[0]||{},s=Object.assign({},a.query),l=o.matcher(s),u=o.sorter(s,o),c=function(e){return function(n){var i=!!n[o.dataField],r=function(t){return t.concat(e)};return i?Object.assign({},n,t({total:n.total+1},o.dataField,r(n[o.dataField]))):r(n)}},d=function(e){return function(n){var i=!!n[o.dataField],r=function(t){return t.filter(function(t){return e[o.idField]!==t[o.idField]})};return i?Object.assign({},n,t({total:l(e)?n.total-1:n.total},o.dataField,r(n[o.dataField]))):r(n)}},p=function(e){return function(n){var i=!!n[o.dataField],r=i?n[o.dataField].length:n.length,a=function(t){return t.filter(function(t){return e[o.idField]!==t[o.idField]}).concat(e).filter(l)};if(i){var s=a(n[o.dataField]);return Object.assign({},n,t({total:n.total-(r-s.length)},o.dataField,s))}return a(n)}};return n.concat(n.exhaustMap(function(t){return e.Observable.merge(i.created.filter(l).map(c),i.removed.map(d),e.Observable.merge(i.updated,i.patched).map(p)).scan(function(e,t){return u(t(e))},t)}))}}},e.exports=exports.default},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,i){return e.configure(r.default.authentication({storage:n})),e.tokenAuth=function(){return t.app.authenticate({type:"token",token:window.localStorage["feathers-jwt"]}).then(function(e){return i.user=e.data,!0}).catch(function(e){return t.app.logout(),!1})},e.localAuth=function(e,n){return t.app.authenticate({type:"local",username:e,password:n}).then(function(e){return i.user=e.data,i.authenticated=!0,i.token=e.token,e}).catch(function(e){return that.app.tokenLogout(),e})},e.tokenLogout=function(){t.app.logout(),window.localStorage.removeItem("feathers-jwt"),i.authenticated=!1,i.user=null,i.token=null},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var o=t(2),r=n(o)},function(e,exports){"use strict";function t(e,t,n){return e.showToast=function(e,n,i){if(!n)var n="";if(!i)var i=3e3;var o=t.simple().textContent(e).action("Hide").hideDelay(i).position("bottom left").highlightAction(!1).toastClass(n);t.show(o)},n.showToast=function(t,n,i){e.showToast(t,n,i)},n.safeApply=function(e){if(this.$root){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)}else this.$apply(e)},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t},function(e,exports,t){var n=t(24);"string"==typeof n&&(n=[[e.id,n,""]]);t(26)(n,{});n.locals&&(e.exports=n.locals)},function(e,exports,t){exports=e.exports=t(25)(void 0),exports.push([e.id,'md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.activityPaymentSummaryCard{margin-bottom:8px;margin-top:8px;background:none;box-shadow:none;position:relative}.paymentSummaryCard{min-width:100%;margin-bottom:8px;margin-right:16px;margin-top:8px;background:none;box-shadow:none}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:16px;padding-left:16px}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:16px}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;outline:none}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.activityCardForm{margin:0 16px}.activityForm{padding-left:24px;padding-right:16px}.questionForm{padding-left:16px;padding-right:40px}.formHeader{padding:16px 12px 16px 0;margin:0;font-weight:500}.formHeader,.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{height:24px;width:24px;margin-left:8px}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:4px 0}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}ng-md-icon{margin:0!important}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.toUppercase{text-transform:uppercase}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.inputStatusIcon{height:24px;width:24px;margin-bottom:16px!important;margin-right:12px!important}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}',""])},function(e,exports){function t(e,t){var i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var r=n(o),a=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[i].concat(a).concat([r]).join("\n")}return[i].join("\n")}function n(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+n+" */"}e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var i=t(n,e);return n[2]?"@media "+n[2]+"{"+i+"}":i}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,exports,t){function n(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=m[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(u(i.parts[r],t))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(u(i.parts[r],t));m[i.id]={id:i.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],a=o[1],s=o[2],l=o[3],u={css:a,media:s,sourceMap:l};n[r]?n[r].parts.push(u):t.push(n[r]={id:r,parts:[u]})}return t}function o(e,t){var n=g(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function r(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),o(e,t),t}function s(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),o(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function u(e,t){var n,i,o;if(t.singleton){var l=y++;n=h||(h=a(t)),i=c.bind(null,n,l,!1),o=c.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),i=p.bind(null,n,t),o=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),i=d.bind(null,n),o=function(){r(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function c(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function d(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=x(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var m={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=f(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(n){return"undefined"==typeof t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),h=null,y=0,b=[],x=t(27);e.exports=function(e,t){t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertInto&&(t.insertInto="head"),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var o=i(e);return n(o,t),function(e){for(var r=[],a=0;a<o.length;a++){var s=o[a],l=m[s.id];l.refs--,r.push(l)}if(e){var u=i(e);n(u,t)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete m[l.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,exports){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/"),o=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var r;return r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"});return o}},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=window.Rx,i=window.moment;e.api={},e.api.activity={get:function(e){return n.Observable.fromPromise(r.find(e||{})).catch(function(e){return n.Observable.empty()}).select(function(e){return e.list})},find:function(e){return n.Observable.fromPromise(a.find(e||{})).catch(function(e){return n.Observable.empty()}).select(function(e){return e})}},e.api.timeslots={getRange:function(i){return n.Observable.fromPromise(t({method:"GET",url:e.endpoint+"/timeslots?",data:i,headers:{"X-ABL-Access-Key":e.apiKey,"X-ABL-Date":Date.parse((new Date).toISOString())}})).catch(function(e){return n.Observable.empty()}).select(function(e){return e.data.list})},get:function(i){return n.Observable.fromPromise(t({method:"GET",url:e.endpoint+"/timeslots?id="+i,headers:{"X-ABL-Access-Key":e.apiKey,"X-ABL-Date":Date.parse((new Date).toISOString())}})).catch(function(e){return n.Observable.empty()}).select(function(e){return e})}};var o=e.service("cache");o.get("activities").catch(function(e){o.create({id:"activities",data:{},map:[]})});var r=e.service("activities"),a=e.service("search");a.find({query:{sort:"-updatedAt"}}),e.activitySearchInterval=function(e){return setInterval(function(){a.find({query:{sort:"-updatedAt"}})},e)};var s=(e.service("timeslots"),function(e){return function(e){var t=!1;return o.get("activities").then(function(r){r.updated=[];var a=n.Observable.fromArray(e.result.data);a.map(function(e){return e}).filter(function(e){return void 0==r.data[e._id]}).subscribe(function(e){r.data[e._id]=e,t=!0,r.updated.push(e._id)}),a.map(function(e){return e}).takeWhile(function(e){return i(e.updatedAt).isAfter(i(r.data[e._id].updatedAt))}).subscribe(function(e){r.data[e._id]=e,r.updated.push(e._id),t=!0}),t&&o.update("activities",r)}),Promise.resolve(e)}});return a.after({all:[],find:[s()]}),e.cache=o,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var o=t(29);n(o)},function(e,exports){e.exports=jQuery},function(e,exports){"use strict";function t(){return{require:"ngModel",link:function(e,t,n,i){var o=function(e){void 0==e&&(e="");var t=e.toUpperCase();return t!==e&&(i.$setViewValue(t),i.$render()),t};i.$parsers.push(o),o(e[n.ngModel])}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(32),o=n(i),r=t(33),a=n(r),s=t(34),l=n(s),u=t(35),c=n(u);exports.default=angular.module("activity-book",["ngMaterial","rx"]).run(["$templateCache",function(e){e.put("activity-forms.html",a.default),e.put("activity-book.html",l.default),e.put("activity-total.html",o.default)}]).directive("ablActivityBook",["$sce","$compile","$mdMedia","$mdDialog","$log","$window","$http","config","rx","observeOnScope","$stateParams",function(e,t,n,i,o,r,a,s,u,d,p){return{restrict:"E",scope:{book:"="},template:l.default,link:function(e,t,n){function i(){e.$digest()}angular.element(r).on("resize",i)},controllerAs:"vm",controller:["$scope","$element","$attrs",function(e,t,l){function m(){return angular.forEach(v.attendees,function(e,t){if(h.attendees[e._id]=[],e.quantity>0)for(var t=0;t<e.quantity;t++)h.attendees[e._id].push(null)}),angular.forEach(v.addons,function(e,t){if(h.addons[e._id]=[],e.quantity>0)for(var t=0;t<e.quantity;t++)h.addons[e._id].push(null)}),h}function f(e){var t={};return angular.forEach(e,function(e,n){t.hasOwnProperty(e.name)?(t[e.name].amount+=e.amount,t[e.name].quantity+=1):(t[e.name]={},t[e.name].price=e.price,t[e.name].quantity=1,t[e.name].amount=e.amount)}),t}var v=this,g=s;window.Stripe;g.apiVersion=s.FEATHERS_URL,this.guestDetailsExpanded=!0,this.attendeesExpanded=!1,this.addonsExpanded=!1,this.questionsExpanded=!1,this.paymentExpanded=!1,this.couponStatus="untouched",this.appliedCoupon={},this.couponQuery="",this.occupancyRemaining=0,this.attendeeSubtotals=[],this.addonSubtotals=[],e.paymentResponse="",this.toggleGuestDetails=function(){this.guestDetailsExpanded=!this.guestDetailsExpanded},this.togglePayment=function(){this.paymentExpanded=!this.paymentExpanded},this.pricing={total:0},this.taxTotal,this.addonTotal,this.attendeeTotal=0,e.bookingSucceeded=!1,e.$mdMedia=n,e.screenIsBig=function(){var e=angular.element(r);return e[0].innerWidth>742},e.addBookingController=e.$parent,v.taxes=[],v.taxTotal=0,v.addons=[],v.questions=[],this.toggleQuestions=function(){this.questionsExpanded=!this.questionsExpanded},this.adjustAddon=function(e,t){"up"==t&&v.addons[e].quantity++,"down"==t&&v.addons[e].quantity>0&&v.addons[e].quantity--,v.getPricingQuote()},this.toggleAddons=function(){v.addons.length<1?this.questionsExpanded=!this.questionsExpanded:this.addonsExpanded=!this.addonsExpanded},this.adjustAttendee=function(e,t){"up"==t&&v.countAttendees()>0&&v.attendees[e].quantity++,"down"==t&&v.attendees[e].quantity>0&&v.attendees[e].quantity--,v.getPricingQuote(),v.countAttendees()},this.toggleAttendees=function(){this.attendeesExpanded=!this.attendeesExpanded},this.checkAdjustAttendee=function(t){v.attendees[t].quantity>v.countAttendees()&&(v.attendees[t].quantity=0,v.attendees[t].quantity=v.countAttendees()),v.attendees[t].quantity<0&&(v.attendees[t].quantity=0),e.safeApply()};var h={attendees:{},addons:{}};v.getPricingQuote=function(){var e=m();a({method:"POST",url:g.apiVersion+"/pricing-quotes",data:e,headers:{"x-abl-access-key":p.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(e){v.pricing=e.data,v.pricing.couponDeduction=v.pricing.items.filter(function(e){return"coupon"==e.type}),v.addonTotal=v.pricing.items.filter(function(e){return"addon"==e.type}).reduce(function(e,t){return e+t.price},0),v.addonSubtotals=f(v.pricing.items.filter(function(e){return"addon"==e.type})),v.attendeeTotal=e.data.items.filter(function(e){return"aap"==e.type}).reduce(function(e,t){return e+t.price},0),v.attendeeSubtotals=f(e.data.items.filter(function(e){return"aap"==e.type})),v.taxTotal=e.data.items.filter(function(e){return"tax"==e.type||"fee"==e.type}).reduce(function(e,t){return e+t.price},0)},function(e){v.pricing={},v.taxTotal=0})},v.getPossibleCoupons=function(){a({method:"GET",url:g.apiVersion+"/coupons?bookingId="+v.couponQuery,headers:{"x-abl-access-key":p.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(e){v.possibleCoupons=e.data},function(e){v.possibleCoupons=[],v.taxTotal=0})},v.checkCoupon=function(){v.checkingCoupon=!0,a({method:"GET",url:g.apiVersion+"/coupons/"+v.couponQuery,headers:{"x-abl-access-key":p.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(e){h.couponId=e.data.couponId,v.appliedCoupon=e.data,v.validateCoupon(v.appliedCoupon),v.couponStatus="valid",v.getPricingQuote(),v.checkingCoupon=!1},function(e){delete h.couponId,v.couponStatus="invalid",v.appliedCoupon={},v.checkingCoupon=!1})},v.removeCoupon=function(){v.couponQuery="",delete h.couponId,v.couponStatus="untouched",v.appliedCoupon={},v.getPricingQuote()};var y=window.moment;v.validateCoupon=function(e){y();return!(!y(e.endTime).isAfter(y())||0!=e.maxRedemptions)||(!!(e.maxRedemptions>0&&y(e.endTime).isAfter(y())&&e.maxRedemptions-e.redemptions>=0)||(v.couponStatus="invalid",!1))},v.bookingQuestionsCompleted=function(){var e=0;return v.bookingQuestions&&angular.forEach(v.bookingQuestions,function(t,n){t.length>0&&e++}),e},d(e,"vm.couponQuery").debounce(500).select(function(e){return e}).subscribe(function(e){v.couponQuery.length>0&&v.checkCoupon()}),(0,c.default)(v,u,a,p),e.$watch("addBookingController.activity",function(t){angular.isDefined(e.addBookingController.activity)&&(v.questions=e.addBookingController.activity.questions,v.addons=e.addBookingController.activity.charges.filter(function(e){return"addon"==e.type&&"active"==e.status}),v.addons.forEach(function(e,t){angular.isDefined(e.quantity)||(e.quantity=0)}),v.taxes=e.addBookingController.activity.charges.filter(function(e){return"tax"==e.type}))},!0),v.countAttendees=function(){return e.addBookingController.event&&v.attendees?(e.addBookingController.event.maxOcc||e.addBookingController.timeslot.maxOcc)-v.attendees.map(function(e){return e.quantity}).reduce(function(e,t){return e+t},0):0},v.countAttendeesAdded=function(){return e.addBookingController.event&&v.attendees?v.attendees.map(function(e){return e.quantity}).reduce(function(e,t){return e+t},0):0},v.nextStep=function(){e.makeBooking(),e.showPayzenDialog(),v.questionsExpanded&&(v.questionsExpanded=!1,v.paymentExpanded=!0)},e.$watch("addBookingController.timeslot",function(t){angular.isDefined(e.addBookingController.timeslot)&&(angular.isDefined(e.addBookingController.timeslot.charges)&&(v.attendees=e.addBookingController.timeslot.charges.filter(function(e){return"aap"==e.type&&"active"==e.status}),v.attendees.forEach(function(e,t){angular.isDefined(e.quantity)||(e.quantity=0)})),h.timeSlotId=e.addBookingController.timeslot._id,h.startTime=e.addBookingController.timeslot.startTime)},!0),v.getBookingData=function(){var t=angular.copy(h);return t.eventInstanceId=e.addBookingController.event.eventInstanceId,t.answers={},t.email=v.formData.mail,t.phoneNumber=v.formData.phoneNumber,t.fullName=v.formData.fullName,t.notes=v.formData.notes,t.skipConfirmation="false",t.operator=e.addBookingController.activity.operator,angular.forEach(v.questions,function(e,n){t.answers[e._id]=v.bookingQuestions[n]}),t.paymentMethod="credit",t.currency="default",t};var b;b=function(t){"https://calendar.ablist.win"==t.origin&&"payment_complete"==t.data&&(e.paymentResponse="success",window.removeEventListener("message",b),e.paymentSuccessful=!0,e.safeApply())},window.addEventListener("message",b),e.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)},e.makeBooking=function(){e.bookingResponse=a({method:"POST",url:s.FEATHERS_URL+"/bookings",data:v.getBookingData(),headers:{"x-abl-access-key":p.merchant,"x-abl-date":Date.parse((new Date).toISOString())}}).then(function(t){e.bookingSuccessResponse=t.data.booking;var n=document.getElementById("payzenIframe").contentWindow.document;n.open(),n.write(t.data.iframeHtml),n.close(),e.bookingSucceeded=!0},function(t){i.hide(),e.bookingSucceeded=!1})};e.showPayzenDialog=function(t){o.debug("SHOW PAYZEN DIALOG"),v.paymentExpanded=!0,e.paymentSuccessful=!1},e.prefill=function(){v.formData={fullName:"fuck",mail:"adam@ralko.com",phoneNumber:7783023246}}}]}}])},function(e,exports){e.exports='<md-card class=paymentSummaryCard ng-show="paymentResponse != \'success\'"> <md-list class="" flex> <md-list-item class=lineItemHeader ng-if="vm.base " ng-click=null> <div class=md-list-item-text layout="row " flex> <div layout="row " layout-align="start center " flex="50 "> <p class="">Base Price </p> </div> <div layout="row " layout-align="end center " flex="50 "> <p class="">{{vm.base() / 100}} CFP</p> </div> </div> </md-list-item> <md-list-item class="paymentHeader md-2-line md-primary" ng-disabled=detailsForm.$invalid> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=local_offer class=listIcon ng-if="vm.couponStatus !=\'valid\'"></ng-md-icon> <ng-md-icon icon=clear class=listIcon ng-click=vm.removeCoupon(); ng-if="vm.couponStatus ==\'valid\'"></ng-md-icon> <span class="paymentSubTitle couponText" ng-if="vm.couponStatus ==\'valid\'" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCoupon.percentage ? \'\' : \'$\'}}{{vm.appliedCoupon.amount}}{{vm.appliedCoupon.percentage ? \'%\' : \'\'}} Off</span> <span class="paymentSubTitle total"> <input ng-model=vm.couponQuery type=text class=couponInput ng-if="vm.couponStatus ==\'untouched\' || vm.couponStatus ==\'invalid\'" ng-change="vm.checkingCoupon = true" placeholder="Enter Coupon" capitalize/> </span> </div> <div layout="row " layout-align="end center "> <span class="paymentSubTitle total" ng-if=vm.pricing.couponDeduction[0]>-${{(-1 * vm.pricing.couponDeduction[0].price / 100) | number : 2}}</span> <md-progress-circular md-mode=indeterminate ng-show="vm.checkingCoupon && vm.couponQuery.length > 0" class="listItemCircularProgress easeIn" md-diameter=24px></md-progress-circular> </div> </div> </md-list-item> <md-list-item ng-show="vm.couponStatus ==\'invalid\' && vm.couponQuery.length > 0 && !vm.checkingCoupon" class="paymentHeader md-2-line md-primary easeIn"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if="vm.couponStatus !=\'valid\'" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class="paymentSubTitle total"> Invalid Coupon </span> </div> <div layout=row layout-align="end center" flex> <ng-md-icon icon=clear class=listIcon ng-click="vm.couponQuery = \'\';"></ng-md-icon> </div> </div> </md-list-item> <div ng-repeat="charge in booking.addOns " ng-show="vm.showAddons " ng-if="booking.addOns.length > 0"> <md-list-item class="list-item-48 lineItemDetail" ng-if="charge.quantity > 0"> <div class=md-list-item-text layout="row " flex> <div layout="row " layout-align="start center " flex="50 "> <div layout="row "> <p>{{ charge.label }} <span style=vertical-align:middle>x</span> {{ charge.quantity }}</p> </div> </div> <div layout="row " layout-align="end center " flex="50 "> <p class="">{{ charge.price/100 * charge.quantity}} CFP</p> </div> </div> </md-list-item> </div> <div ng-if="vm.attendeeTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Attendees </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class=activityTotal>${{vm.attendeeTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat="(key, value) in vm.attendeeSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{value.quantity}} x {{key}} @ ${{value.price/100}} each </div> <div layout=row layout-align="end center" flex=50> ${{value.amount / 100 | number:2}} </div> </div> </div> <div ng-if="vm.addonTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Add-ons </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class=activityTotal>${{vm.addonTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat="(key, value) in vm.addonSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{value.quantity}} x {{key}} @ ${{value.price/100}} each </div> <div layout=row layout-align="end center" flex=50> ${{value.amount / 100 | number:2}} </div> </div> </div> <div ng-if="vm.taxTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Taxes and Fees </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class=activityTotal>${{vm.taxTotal / 100 | number:2}}</span> </div> </div> </div> <div> <div class="md-list-item-text subtotalLineItem bottomTotal" layout="row " layout-align="space-between center " flex> <div layout="row " layout-align="start center " flex="50 "> <span class="">Total </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class="">${{(vm.pricing.total || 0) / 100 | number:2}}</span> </div> </div> </div> </md-list> </md-card> '},function(e,exports){e.exports='<div ng-if="paymentResponse != \'success\'"> <md-card class=activityPaymentSummaryCard after-render> <md-list class="" flex> <md-list-item class="paymentHeader md-2-line" ng-click=vm.toggleGuestDetails() ng-init="guestDetailsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50> <div layout=column class=formHeader> <div layout=row layout-align="start center" flex=50> <ng-md-icon class=headerIcon icon=filter_1 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Guest Details</span> </div> </div> </div> <div layout="row " layout-align="end center " flex="50 "> <div layout="column " layout-align="center end " flex> <ng-md-icon icon="{{vm.guestDetailsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> <ng-md-icon ng-show="!guestDetailsHover && detailsForm.$valid" icon=check class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div ng-show=vm.guestDetailsExpanded> <form name=guestDetailsForm novalidate> <div class="detailsForm slideDown" layout-padding> <md-input-container class=md-block> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.mail.$error> <div ng-message=required>This is required.</div> <div ng-message=email>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align="end center"> <md-button class=md-raised ng-disabled=guestDetailsForm.$invalid ng-click="vm.toggleGuestDetails(); vm.toggleAttendees();">Next</md-button> </div> </div> </form> </div> <md-divider></md-divider> </md-list> <md-list class="" flex> <md-list-item class="paymentHeader md-2-line" ng-click=vm.toggleAttendees() ng-disabled=guestDetailsForm.$invalid> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" class=formHeader flex> <ng-md-icon class=headerIcon icon=filter_2 class=listIcon></ng-md-icon> <span class=paymentSubTitle ng-if="vm.countAttendees() > 0" flex>Attendees <span ng-show="vm.countAttendees() < 4"> | {{vm.countAttendees()}} spots remaining</span></span> <span class=paymentSubTitle ng-if="vm.countAttendees() < 1" flex>Attendees | No spots remaining</span> </div> <div layout="row " layout-align="end center"> <div layout="column " layout-align="center end "> <ng-md-icon icon="{{vm.attendeesExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class="activityForm slideDown" ng-show=vm.attendeesExpanded> <div ng-repeat="attendee in vm.attendees"> <md-list-item class="md-2-line addOnListItem"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50> <div layout=column class=""> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row class=""> <span class=lineItemSubDetail>${{attendee.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout="row " layout-align="end center " flex="50 "> <div layout="column " class=addOnAdjusters layout-align="center end " flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAttendee($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline " class=listIconSub ng-click="vm.adjustAttendee($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end "> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align="start center" flex=50> </div> <div layout=row layout-align="end center" flex=50> <div layout="column " layout-align="center end" flex> <md-button class=md-raised ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click="vm.toggleAttendees(); vm.toggleAddons();">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> <div ng-if="vm.addons.length > 0"> <md-list-item class="paymentHeader md-2-line" ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click=vm.toggleAddons()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50> <div layout=column class=formHeader> <div layout=row layout-align="start center" flex=50> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> </div> </div> <div layout="row " layout-align="end center " flex="50 "> <div layout="column " layout-align="center end " flex> <ng-md-icon ng-show="vm.addOnsSelected == 1" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon="{{vm.addonsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class="activityForm slideDown" ng-show=vm.addonsExpanded> <div ng-repeat="addon in vm.addons"> <md-list-item class="md-2-line addOnListItem"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50> <div layout=column class=""> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=""> <span class=lineItemSubDetail>${{addon.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout="row " layout-align="end center " flex="50 "> <div layout="column " class=addOnAdjusters layout-align="center end " flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAddon($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline " class=listIconSub ng-click="vm.adjustAddon($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end "> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.getPricingQuote(); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align="start center" flex=50> </div> <div layout=row layout-align="end center" flex=50> <div layout="column " layout-align="center end" flex> <md-button class=md-raised ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click="vm.toggleQuestions(); vm.toggleAddons();">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> </div> <div ng-if="vm.questions.length > 0"> <md-list-item class="paymentHeader md-2-line" ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click=vm.toggleQuestions()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column class=formHeader> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=filter_4 class=listIcon ng-if="vm.addons.length > 0"></ng-md-icon> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon ng-if="vm.addons.length == 0"></ng-md-icon> <span class=paymentSubTitle>Booking Questions | {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout="row " layout-align="end center "> <div layout="column " layout-align="center end " flex> <ng-md-icon icon="{{vm.questionsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class="questionForm slideDown" ng-show=vm.questionsExpanded> <div ng-repeat="question in vm.questions"> <md-list-item class="md-2-line addOnListItem"> <div layout=row class=md-list-item-text flex> <div layout=column layout-align="center stretch" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align="start center"> <ng-md-icon icon="{{vm.bookingQuestions[$index].length > 0 ? \'done\' : \'priority_high\'}}" class=inputStatusIcon></ng-md-icon> <md-input-container flex> <textarea name=question ng-model=vm.bookingQuestions[$index] md-maxlength=300 rows=1></textarea> </md-input-container> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align="start center" flex=50> </div> <div layout=row layout-align="end center" flex=50> <div layout="column " layout-align="center end" flex> <md-button class=md-raised ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid || (vm.bookingQuestionsCompleted()/vm.questions.length) != \'1\'" ng-click=vm.nextStep();>Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider ng-if=!vm.addonsExpanded></md-divider> </div> <md-list-item class="paymentHeader md-2-line md-primary" ng-click="makeBooking(); showPayzenDialog();" ng-disabled="guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1 || bookingSucceeded"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Pay</span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class="paymentSubTitle total"></span> <ng-md-icon icon=logout class=listIcon></ng-md-icon> </div> </div> </md-list-item> <div class="activityForm slideDown" ng-show=vm.paymentExpanded> <iframe id=payzenIframe class=payzenIframe></iframe> </div> <md-divider></md-divider> </md-list> </md-card> </div> ';
},function(e,exports){e.exports=' <div layout="{{screenIsBig() ? \'row\' : \'column\'}}" layout-align="{{screenIsBig() ? \'center start\' : \'center center\'}}" class=columnFix> <div class=paymentSummaryCardLarge> <div ng-include="\'activity-forms.html\'"></div> </div> <div class=paymentSummaryCardLarge> <div ng-include="\'activity-total.html\'"></div> </div> </div> <div> <md-card class=paymentSummaryCard ng-show="paymentResponse.length > 0"> <md-list> <div ng-show="paymentResponse == \'success\'" class=easeIn> <md-list-item class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50 md-colors="{color: \'primary\'}"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Complete</span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class="paymentSubTitle total" md-colors="{color: \'green\'}"></span> <ng-md-icon icon=check class=listIcon md-colors="{fill: \'green\'}"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=column layout-align="space-between center"> <div layout=row layout-wrap> <p class=listMessage>An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> <div layout=row layout-wrap> <p class=listMessage>For questions about your booking please contact:</p> <p class=listMessage>{{bookingSuccessResponse.operator.companyName}} (+{{bookingSuccessResponse.operator.primaryContact.phoneNumber}}) </p> <p class=listMessage>{{bookingSuccessResponse.operator.primaryContact.email}} </p> <p class=listMessage>Booking reference ID: {{bookingSuccessResponse.bookingId}} </p> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-align="end center" flex> <md-button class="md-raised md-primary" ui-sref=home>Return</md-button> </div> </md-list-item> </div> <div ng-show="paymentResponse == \'failed\'"> <md-list-item class="paymentHeader md-2-line md-primary" md-colors="{color: \'primary\'}" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex=50 md-colors="{color: \'warn\'}"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Failed</span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class="paymentSubTitle total" md-colors="{color: \'warn\'}"></span> <ng-md-icon icon=error class=listIcon md-colors="{fill: \'warn\'}"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align="end center" flex> <md-button class="md-raised md-primary" ng-click=vm.payNow();>Try Again</md-button> </div> </md-list-item> </div> <div ng-show="paymentResponse == \'processing\'"> <md-list-item class="paymentHeader md-2-line md-primary" md-colors="{color: \'primary\'}" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex layout-grow md-colors="{color: \'primary\'}"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Processing</span> </div> <div layout="row " layout-align="end center "> <span class="paymentSubTitle total" md-colors="{color: \'green\'}"></span> <ng-md-icon icon=watch_later class=listIcon md-colors="{fill: \'amber\'}"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align="end center" flex> <md-button class="md-raised md-primary" ng-click="goToState(\'home\');">Return</md-button> </div> </md-list-item> </div> </md-list> </md-card> </div>'},function(e,exports){"use strict";function t(e,t,n,i){return e.searchClients=function(o){return t.Observable.fromPromise(n({method:"GET",url:e.config.apiVersion+"/clients?fullName="+text,headers:{"x-abl-access-key":i.merchant,"x-abl-date":Date.parse((new Date).toISOString())}})).select(function(e){return e})},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t}]);
>>>>>>> origin/api
