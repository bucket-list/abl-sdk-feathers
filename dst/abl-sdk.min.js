<<<<<<< HEAD
webpackJsonp([0],[function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=__webpack_require__(2),_rx2=_interopRequireDefault(_rx),_feathersClient=__webpack_require__(5),_feathersClient2=_interopRequireDefault(_feathersClient),_feathersLocalstorage=__webpack_require__(62),_feathersLocalstorage2=_interopRequireDefault(_feathersLocalstorage),_feathersReactive=__webpack_require__(76),_feathersReactive2=_interopRequireDefault(_feathersReactive),_superagent=__webpack_require__(84),_rx3=(_interopRequireDefault(_superagent),__webpack_require__(91)),_utils=(_interopRequireDefault(_rx3),__webpack_require__(93)),_utils2=_interopRequireDefault(_utils),_styles=__webpack_require__(94),_helperStyles=(_interopRequireDefault(_styles),__webpack_require__(99)),_angularMaterialIcons=(_interopRequireDefault(_helperStyles),__webpack_require__(101)),_rest=(_interopRequireDefault(_angularMaterialIcons),__webpack_require__(103)),_rest2=_interopRequireDefault(_rest),_toUppercase=__webpack_require__(104),_toUppercase2=_interopRequireDefault(_toUppercase),_formatPhone=__webpack_require__(105),_formatPhone2=_interopRequireDefault(_formatPhone),_focusParent=__webpack_require__(106),_focusParent2=_interopRequireDefault(_focusParent),_size=__webpack_require__(107),_navigator=(_interopRequireDefault(_size),__webpack_require__(108)),_navigator2=_interopRequireDefault(_navigator),_col=__webpack_require__(109),_col2=_interopRequireDefault(_col),_progressButton=__webpack_require__(111),_progressButton2=_interopRequireDefault(_progressButton),_progressButton3=__webpack_require__(113),_listItem=(_interopRequireDefault(_progressButton3),__webpack_require__(115)),_listItem2=_interopRequireDefault(_listItem),_listItemNumericControl=__webpack_require__(117),_listItemNumericControl2=_interopRequireDefault(_listItemNumericControl),_listItemAddCharge=__webpack_require__(119),_listItemAddCharge2=_interopRequireDefault(_listItemAddCharge),_listItemHeader=__webpack_require__(123),_listItemHeader2=_interopRequireDefault(_listItemHeader),sdkProvider=(__webpack_require__(125),window.jQuery,function(settings){var endpoint=null,apiKey=null,socketOpts=null,_useSocket=!0,services=[];return{useSocket:function(socketEnabled){_useSocket=!!socketEnabled},setSocketOpts:function(opts){socketOpts=opts},setEndpoint:function(newEndpoint){endpoint=newEndpoint},setApiKey:function(key){apiKey=key},setServices:function(newServices){services=newServices},getSettings:function(){return endpoint},$get:["$injector","$timeout","$log","$mdToast","$http",function($injector,$timeout,$log,$mdToast,$http){var $rootScope=$injector.get("$rootScope"),that=this;if(!endpoint)return this.app={},this.app;$log.debug("config",$rootScope.config),this.app=(0,_feathersClient2.default)().configure((0,_feathersReactive2.default)(_rx2.default)).configure(_feathersClient2.default.hooks()).use("cache",(0,_feathersLocalstorage2.default)({name:"abl"+($rootScope.config.DASHBOARD?"-dash":""),storage:window.localStorage})),this.app.endpoint=endpoint,this.app.apiKey=apiKey;var xsrfToken=(document.cookie.indexOf("XSRF-TOKEN="),"");if(this.app.headers={"Content-Type":"application/json;charset=utf-8"},apiKey&&(this.app.headers={"X-ABL-Access-Key":apiKey,"X-ABL-Date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"}),_useSocket)$log.debug("endpoint",endpoint),this.socket=io(endpoint,socketOpts),this.app.configure(_feathersClient2.default.socketio(this.socket));else{var addHeadersHook=function(hook){var x=document.cookie.split(";").map(function(s){return s.split("=")}).reduce(function(r,a){return r[a[0].trim()]=a[1],r},{});xsrfToken=x["XSRF-TOKEN"]||void 0,xsrfToken&&(that.app.headers["X-XSRF-TOKEN"]=xsrfToken),hook.params.headers=Object.assign({},that.app.headers,hook.params.headers),hook.params.withCredentials=!0},afterRequestHook=function(hook){};this.app.configure(_feathersClient2.default.rest(endpoint).jquery(window.jQuery,{headers:that.app.headers,withCredentials:!0})),this.app.mixins.push(function(service){service.before(addHeadersHook),service.after(afterRequestHook)})}return(0,_utils2.default)(this.app,$mdToast,$rootScope),(0,_rest2.default)(this.app,$http),$rootScope.loading=!0,this.app.loadingTimeout=null,this.app.loadingTimeout=$timeout(function(){$rootScope.loading=!1},1500),$rootScope.afterRender=function(current,total){$timeout.cancel(this.loadingTimeout),this.loadingTimeout=$timeout(function(){$rootScope.loading=!1},1500)},window.$abl=this.app,window.$http=$http,this.app}]}}),feathersSdk=[function(){return sdkProvider("feathers")}],ablSdk=[function(){return sdkProvider("abl")}];exports.default=angular.module("abl-sdk-feathers",["ngMaterial","rx","currency-component"]).provider("$abl",ablSdk).provider("$feathers",feathersSdk).filter("startFrom",function(){return function(input,start){return start=+start,input.slice(start)}}).service("navigatorService",_navigator2.default).directive("toUppercase",_toUppercase2.default).directive("formatPhone",_formatPhone2.default).directive("onFocus",_focusParent2.default).directive("formatPhone",_formatPhone2.default).component("colSection",_col2.default).component("progressButton",_progressButton2.default).component("listItem",_listItem2.default).component("listItemNumericControl",_listItemNumericControl2.default).component("listItemAddCharge",_listItemAddCharge2.default).component("listItemHeader",_listItemHeader2.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){function noop(){}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)pushEncodedKeyValuePair(pairs,key,obj[key]);return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(null!=val)if(Array.isArray(val))val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)});else if(isObject(val))for(var subkey in val)pushEncodedKeyValuePair(pairs,key+"["+subkey+"]",val[subkey]);else pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val));else null===val&&pairs.push(encodeURIComponent(key))}function parseString(str){for(var pair,pos,obj={},pairs=str.split("&"),i=0,len=pairs.length;i<len;++i)pair=pairs[i],pos=pair.indexOf("="),pos==-1?obj[decodeURIComponent(pair)]="":obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1));return obj}function parseHeader(str){for(var index,line,field,val,lines=str.split(/\r?\n/),fields={},i=0,len=lines.length;i<len;++i)line=lines[i],index=line.indexOf(":"),index!==-1&&(field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val);return fields}function isJSON(mime){return/[\/+]json($|[^-\w])/.test(mime)}function Response(req){this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var status=this.xhr.status;1223===status&&(status=204),this._setStatusProperties(status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&req._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function Request(method,url){var self=this;this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var err=null,res=null;try{res=new Response(self)}catch(e){return err=new Error("Parser is unable to parse the response"),err.parse=!0,err.original=e,self.xhr?(err.rawResponse="undefined"==typeof self.xhr.responseType?self.xhr.responseText:self.xhr.response,err.status=self.xhr.status?self.xhr.status:null,err.statusCode=err.status):(err.rawResponse=null,err.status=null),self.callback(err)}self.emit("response",res);var new_err;try{self._isResponseOK(res)||(new_err=new Error(res.statusText||"Unsuccessful HTTP response"))}catch(custom_err){new_err=custom_err}new_err?(new_err.original=err,new_err.response=res,new_err.status=res.status,self.callback(new_err,res)):self.callback(null,res)})}function del(url,data,fn){var req=request("DELETE",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}var root;root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var Emitter=__webpack_require__(85),RequestBase=__webpack_require__(86),isObject=__webpack_require__(87),ResponseBase=__webpack_require__(88),Agent=__webpack_require__(90),request=exports=module.exports=function(method,url){return"function"==typeof url?new exports.Request("GET",method).end(url):1==arguments.length?new exports.Request("GET",method):new exports.Request(method,url)};exports.Request=Request,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},ResponseBase(Response.prototype),Response.prototype._parseBody=function(str){var parse=request.parse[this.type];return this.req._parser?this.req._parser(this,str):(!parse&&isJSON(this.type)&&(parse=request.parse["application/json"]),parse&&str&&(str.length||str instanceof Object)?parse(str):null)},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot "+method+" "+url+" ("+this.status+")",err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype),RequestBase(Request.prototype),Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass,options){1===arguments.length&&(pass=""),"object"==typeof pass&&null!==pass&&(options=pass,pass=""),options||(options={type:"function"==typeof btoa?"basic":"auto"});var encoder=function(string){if("function"==typeof btoa)return btoa(string);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(user,pass,options,encoder)},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.attach=function(field,file,options){if(file){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(field,file,options||file.name)}return this},Request.prototype._getFormData=function(){return this._formData||(this._formData=new root.FormData),this._formData},Request.prototype.callback=function(err,res){if(this._shouldRetry(err,res))return this._retry();var fn=this._callback;this.clearTimeout(),err&&(this._maxRetries&&(err.retries=this._retries-1),this.emit("error",err)),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=!0,err.status=this.status,err.method=this.method,err.url=this.url,this.callback(err)},Request.prototype.buffer=Request.prototype.ca=Request.prototype.agent=function(){return this},Request.prototype.pipe=Request.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},Request.prototype._isHost=function(obj){return obj&&"object"==typeof obj&&!Array.isArray(obj)&&"[object Object]"!==Object.prototype.toString.call(obj)},Request.prototype.end=function(fn){return this._endCalled,this._endCalled=!0,this._callback=fn||noop,this._finalizeQueryString(),this._end()},Request.prototype._end=function(){var self=this,xhr=this.xhr=request.getXHR(),data=this._formData||this._data;this._setTimeouts(),xhr.onreadystatechange=function(){var readyState=xhr.readyState;if(readyState>=2&&self._responseTimeoutTimer&&clearTimeout(self._responseTimeoutTimer),4==readyState){var status;try{status=xhr.status}catch(e){status=0}if(!status){if(self.timedout||self._aborted)return;return self.crossDomainError()}self.emit("end")}};var handleProgress=function(direction,e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction=direction,self.emit("progress",e)};if(this.hasListeners("progress"))try{xhr.onprogress=handleProgress.bind(null,"download"),xhr.upload&&(xhr.upload.onprogress=handleProgress.bind(null,"upload"))}catch(e){}try{this.username&&this.password?xhr.open(this.method,this.url,!0,this.username,this.password):xhr.open(this.method,this.url,!0)}catch(err){return this.callback(err)}if(this._withCredentials&&(xhr.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!this._isHost(data)){var contentType=this._header["content-type"],serialize=this._serializer||request.serialize[contentType?contentType.split(";")[0]:""];!serialize&&isJSON(contentType)&&(serialize=request.serialize["application/json"]),serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&this.header.hasOwnProperty(field)&&xhr.setRequestHeader(field,this.header[field]);return this._responseType&&(xhr.responseType=this._responseType),this.emit("request",this),xhr.send("undefined"!=typeof data?data:null),this},request.agent=function(){return new Agent},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(method){Agent.prototype[method.toLowerCase()]=function(url,fn){var req=new request.Request(method,url);return this._setDefaults(req),fn&&req.end(fn),req}}),Agent.prototype.del=Agent.prototype.delete,request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.options=function(url,data,fn){var req=request("OPTIONS",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=del,request.delete=del,request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}},function(module,exports,__webpack_require__){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports,__webpack_require__){"use strict";function RequestBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in RequestBase.prototype)obj[key]=RequestBase.prototype[key];return obj}var isObject=__webpack_require__(87);module.exports=RequestBase,RequestBase.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},RequestBase.prototype.parse=function(fn){return this._parser=fn,this},RequestBase.prototype.responseType=function(val){return this._responseType=val,this},RequestBase.prototype.serialize=function(fn){return this._serializer=fn,this},RequestBase.prototype.timeout=function(options){if(!options||"object"!=typeof options)return this._timeout=options,this._responseTimeout=0,this;for(var option in options)switch(option){case"deadline":this._timeout=options.deadline;break;case"response":this._responseTimeout=options.response}return this},RequestBase.prototype.retry=function(count,fn){return 0!==arguments.length&&count!==!0||(count=1),count<=0&&(count=0),this._maxRetries=count,this._retries=0,this._retryCallback=fn,this};var ERROR_CODES=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];RequestBase.prototype._shouldRetry=function(err,res){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var override=this._retryCallback(err,res);if(override===!0)return!0;if(override===!1)return!1}catch(e){}if(res&&res.status&&res.status>=500&&501!=res.status)return!0;if(err){if(err.code&&~ERROR_CODES.indexOf(err.code))return!0;if(err.timeout&&"ECONNABORTED"==err.code)return!0;if(err.crossDomain)return!0}return!1},RequestBase.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},RequestBase.prototype.then=function(resolve,reject){if(!this._fullfilledPromise){var self=this;this._endCalled,this._fullfilledPromise=new Promise(function(innerResolve,innerReject){self.end(function(err,res){err?innerReject(err):innerResolve(res)})})}return this._fullfilledPromise.then(resolve,reject)},RequestBase.prototype.catch=function(cb){return this.then(void 0,cb)},RequestBase.prototype.use=function(fn){return fn(this),this},RequestBase.prototype.ok=function(cb){if("function"!=typeof cb)throw Error("Callback required");return this._okCallback=cb,this},RequestBase.prototype._isResponseOK=function(res){return!!res&&(this._okCallback?this._okCallback(res):res.status>=200&&res.status<300)},RequestBase.prototype.get=function(field){return this._header[field.toLowerCase()]},RequestBase.prototype.getHeader=RequestBase.prototype.get,RequestBase.prototype.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},RequestBase.prototype.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},RequestBase.prototype.field=function(name,val){if(null===name||void 0===name)throw new Error(".field(name, val) name can not be empty");if(this._data,isObject(name)){for(var key in name)this.field(key,name[key]);return this}if(Array.isArray(val)){for(var i in val)this.field(name,val[i]);return this}if(null===val||void 0===val)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof val&&(val=""+val),this._getFormData().append(name,val),this},RequestBase.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},RequestBase.prototype._auth=function(user,pass,options,base64Encoder){switch(options.type){case"basic":this.set("Authorization","Basic "+base64Encoder(user+":"+pass));break;case"auto":this.username=user,this.password=pass;break;case"bearer":this.set("Authorization","Bearer "+user)}return this},RequestBase.prototype.withCredentials=function(on){return void 0==on&&(on=!0),this._withCredentials=on,this},RequestBase.prototype.redirects=function(n){return this._maxRedirects=n,this},RequestBase.prototype.maxResponseSize=function(n){if("number"!=typeof n)throw TypeError("Invalid argument");return this._maxResponseSize=n,this},RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},RequestBase.prototype.send=function(data){var isObj=isObject(data),type=this._header["content-type"];if(this._formData,isObj&&!this._data)Array.isArray(data)?this._data=[]:this._isHost(data)||(this._data={});else if(data&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(isObj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else"string"==typeof data?(type||this.type("form"),type=this._header["content-type"],"application/x-www-form-urlencoded"==type?this._data=this._data?this._data+"&"+data:data:this._data=(this._data||"")+data):this._data=data;return!isObj||this._isHost(data)?this:(type||this.type("json"),this)},RequestBase.prototype.sortQuery=function(sort){return this._sort="undefined"==typeof sort||sort,this},RequestBase.prototype._finalizeQueryString=function(){var query=this._query.join("&");if(query&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+query),this._query.length=0,this._sort){var index=this.url.indexOf("?");if(index>=0){var queryArr=this.url.substring(index+1).split("&");"function"==typeof this._sort?queryArr.sort(this._sort):queryArr.sort(),this.url=this.url.substring(0,index)+"?"+queryArr.join("&")}}},RequestBase.prototype._appendQueryString=function(){},RequestBase.prototype._timeoutError=function(reason,timeout,errno){if(!this._aborted){var err=new Error(reason+timeout+"ms exceeded");err.timeout=timeout,err.code="ECONNABORTED",err.errno=errno,this.timedout=!0,this.abort(),this.callback(err)}},RequestBase.prototype._setTimeouts=function(){var self=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){self._timeoutError("Timeout of ",self._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){self._timeoutError("Response timeout of ",self._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(module,exports){"use strict";function isObject(obj){return null!==obj&&"object"==typeof obj}module.exports=isObject},function(module,exports,__webpack_require__){"use strict";function ResponseBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in ResponseBase.prototype)obj[key]=ResponseBase.prototype[key];return obj}var utils=__webpack_require__(89);module.exports=ResponseBase,ResponseBase.prototype.get=function(field){return this.header[field.toLowerCase()]},ResponseBase.prototype._setHeaderProperties=function(header){var ct=header["content-type"]||"";this.type=utils.type(ct);var params=utils.params(ct);for(var key in params)this[key]=params[key];this.links={};try{header.link&&(this.links=utils.parseLinks(header.link))}catch(err){}},ResponseBase.prototype._setStatusProperties=function(status){var type=status/100|0;this.status=this.statusCode=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.redirect=3==type,this.clientError=4==type,this.serverError=5==type,this.error=(4==type||5==type)&&this.toError(),this.created=201==status,this.accepted=202==status,this.noContent=204==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.forbidden=403==status,this.notFound=404==status,this.unprocessableEntity=422==status}},function(module,exports){"use strict";exports.type=function(str){return str.split(/ *; */).shift()},exports.params=function(str){return str.split(/ *; */).reduce(function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})},exports.parseLinks=function(str){return str.split(/ *, */).reduce(function(obj,str){var parts=str.split(/ *; */),url=parts[0].slice(1,-1),rel=parts[1].split(/ *= */)[1].slice(1,-1);return obj[rel]=url,obj},{})},exports.cleanHeader=function(header,changesOrigin){return delete header["content-type"],delete header["content-length"],delete header["transfer-encoding"],delete header.host,changesOrigin&&(delete header.authorization,delete header.cookie),header}},function(module,exports){function Agent(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(fn){Agent.prototype[fn]=function(){return this._defaults.push({fn:fn,arguments:arguments}),this}}),Agent.prototype._setDefaults=function(req){this._defaults.forEach(function(def){req[def.fn].apply(req,def.arguments)})},module.exports=Agent},,,function(module,exports){"use strict";function setupUtilityFunctions(app,$mdToast,$rootScope){return app.showToast=function(msg,toastClass,delay){if(!toastClass)var toastClass="";if(!delay)var delay=3e3;var toast=$mdToast.simple().toastClass(toastClass).textContent(msg).action("Hide").hideDelay(delay).position("bottom left").highlightAction(!1);$mdToast.show(toast)},app.randomInt=function(min,max){return Math.floor(Math.random()*(max-min+1)+min)},$rootScope.showToast=function(a,b,c){app.showToast(a,b,c)},$rootScope.safeApply=function(fn){if(this.$root){var phase=this.$root.$$phase;"$apply"===phase||"$digest"===phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}else this.$apply(fn)},app}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=setupUtilityFunctions},function(module,exports,__webpack_require__){var content=__webpack_require__(95);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,'md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.red{color:#dd2c00}.paymentResponseContainer{display:block;height:auto;background-color:#fff;overflow-y:auto}.activityPaymentSummaryCard{margin:8px 0}.paymentSummaryCard{min-width:100%;margin-bottom:8px;margin-right:16px;margin-top:0;background:none;box-shadow:none;height:100%;padding:20px}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:0;padding-left:0}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:0}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{padding:0}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:0 4px}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.remove-coupon{cursor:pointer}.toUppercase{text-transform:uppercase}md-list-item:hover{background:transparent}.md-button:not([disabled]):hover,md-list-item.md-button.md-default-theme:not([disabled]):hover{background-color:transparent}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 32px 8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}.confirmation{padding:20px 0;text-align:center}.confirmation h3{text-align:center;margin-bottom:20px}.confirmation .margin-top{margin-top:8px}.confirmation .booking-id{padding:15px;margin:8px auto;width:260px;opacity:.8;font-weight:700;color:#fff}body[md-theme=blue] .confirmation .booking-id{background:#2196f3}body[md-theme=teal] .confirmation .booking-id{background:#009688}body[md-theme=green] .confirmation .booking-id{background:#4caf50}body[md-theme=grey] .confirmation .booking-id{background:#9e9e9e}body[md-theme=blue-grey] .confirmation .booking-id{background:#607d8b}body[md-theme=yellow] .confirmation .booking-id{background:#ffeb3b;color:#000}body[md-theme=indigo] .confirmation .booking-id{background:#3f51b5}body[md-theme=red] .confirmation .booking-id{background:#f44336}body[md-theme=black] .confirmation .booking-id{background:#000}@media(max-width:600px){.confirmation{padding:20px;font-size:13px}.paymentSummaryCard{margin:0}}.picker-container{border-radius:2px;background:#fff}.bigDateToolbar{background:#fff!important;color:#000!important}.activity-dialog-container{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;z-index:80;overflow:hidden}.activity-dialog,md-dialog.activity-dialog{max-height:80%;max-width:90%;position:relative;overflow:auto;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12);display:-ms-flexbox;display:flex;overflow-x:hidden;overflow-y:hidden;-ms-flex-direction:column;flex-direction:column}.activity-dialog,md-dialog md-dialog-content{padding:0;overflow:hidden}.no-margin{margin:0!important}.leftCard{background:rgba(0,0,0,.025)}.activityBookDialogLarge{width:840px;min-height:600px;height:100%}.leftCardLarge{border-right:1px solid #e4e4e4!important;box-shadow:1px 0 5px 1px rgba(0,0,0,.12)!important;min-height:100%;min-width:420px;width:50%;position:absolute;height:100%;overflow-y:scroll}.leftCardSmall{border-bottom:1px solid #e4e4e4!important;box-shadow:0 1px 5px rgba(0,0,0,.08)!important}.rightCardLarge{position:absolute;right:0;min-width:420px;width:50%;display:block;height:100%}.activity-total-include{height:100%}.couponText{font-size:16px}.couponTextTotal{font-size:16px;padding-right:12px}.listItemAutocomplete{padding-left:0!important}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;margin-right:-8px;outline:none;background:transparent}.activityPaymentSummaryCard{margin-bottom:0!important;margin-top:0!important;margin-right:0;margin-left:0;background:none;box-shadow:none;position:relative;height:100%}.activityCardForm{margin:0 16px}.detailsForm{padding-left:16px;padding-right:16px}.listItemInputContainer{margin:24px 16px!important}',""]);
},function(module,exports){function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=toComment(cssMapping),sourceURLs=cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"});return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,"+base64;return"/*# "+data+" */"}module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map(function(item){var content=cssWithMappingToString(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,styleElement){var styleTarget=getElement(options.insertInto);if(!styleTarget)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?styleTarget.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling):styleTarget.appendChild(styleElement):styleTarget.insertBefore(styleElement,styleTarget.firstChild),styleElementsInsertedAtTop.push(styleElement);else{if("bottom"!==options.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");styleTarget.appendChild(styleElement)}}function removeStyleElement(styleElement){styleElement.parentNode.removeChild(styleElement);var idx=styleElementsInsertedAtTop.indexOf(styleElement);idx>=0&&styleElementsInsertedAtTop.splice(idx,1)}function createStyleElement(options){var styleElement=document.createElement("style");return options.attrs.type="text/css",attachTagAttrs(styleElement,options.attrs),insertStyleElement(options,styleElement),styleElement}function createLinkElement(options){var linkElement=document.createElement("link");return options.attrs.type="text/css",options.attrs.rel="stylesheet",attachTagAttrs(linkElement,options.attrs),insertStyleElement(options,linkElement),linkElement}function attachTagAttrs(element,attrs){Object.keys(attrs).forEach(function(key){element.setAttribute(key,attrs[key])})}function addStyle(obj,options){var styleElement,update,remove;if(options.singleton){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement(options)),update=applyToSingletonTag.bind(null,styleElement,styleIndex,!1),remove=applyToSingletonTag.bind(null,styleElement,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(styleElement=createLinkElement(options),update=updateLink.bind(null,styleElement,options),remove=function(){removeStyleElement(styleElement),styleElement.href&&URL.revokeObjectURL(styleElement.href)}):(styleElement=createStyleElement(options),update=applyToTag.bind(null,styleElement),remove=function(){removeStyleElement(styleElement)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=styleElement.childNodes;childNodes[index]&&styleElement.removeChild(childNodes[index]),childNodes.length?styleElement.insertBefore(cssNode,childNodes[index]):styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css,media=obj.media;if(media&&styleElement.setAttribute("media",media),styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}function updateLink(linkElement,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=linkElement.href;linkElement.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},memoize=function(fn){var memo;return function(){return"undefined"==typeof memo&&(memo=fn.apply(this,arguments)),memo}},isOldIE=memoize(function(){return window&&document&&document.all&&!window.atob}),getElement=function(fn){var memo={};return function(selector){return"undefined"==typeof memo[selector]&&(memo[selector]=fn.call(this,selector)),memo[selector]}}(function(styleTarget){return document.querySelector(styleTarget)}),singletonElement=null,singletonCounter=0,styleElementsInsertedAtTop=[],fixUrls=__webpack_require__(98);module.exports=function(list,options){options=options||{},options.attrs="object"==typeof options.attrs?options.attrs:{},"undefined"==typeof options.singleton&&(options.singleton=isOldIE()),"undefined"==typeof options.insertInto&&(options.insertInto="head"),"undefined"==typeof options.insertAt&&(options.insertAt="bottom");var styles=listToStyles(list);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){var newStyles=listToStyles(newList);addStylesToDom(newStyles,options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/"),fixedCss=css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl))return fullMatch;var newUrl;return newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")"});return fixedCss}},function(module,exports,__webpack_require__){var content=__webpack_require__(100);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,".no-margin-top{margin-top:0!important}.no-margin-bottom{margin-bottom:0!important}.no-margin-right{margin-right:0!important}.no-margin-left{margin-left:0!important}.margin-right-30{margin-right:30px}.no-padding{padding:0!important}.green{color:green}",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(102);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,'/*!\n * Angular Material Design\n * https://github.com/angular/material\n * @license MIT\n * v0.9.7\n */md-autocomplete button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0) scale(.9);transform:translate3d(-50%,-50%,0) scale(.9)}md-autocomplete button ng-md-icon path{stroke-width:0}.md-button.ng-md-icon{padding:0;background:none}.md-button.md-fab ng-md-icon{margin-top:0}md-checkbox .ng-md-icon{transition:.24s;position:absolute;top:0;left:0;width:18px;height:18px;border:2px solid;border-radius:2px}md-checkbox.md-checked .ng-md-icon{border:none}md-checkbox.md-checked .ng-md-icon:after{-webkit-transform:rotate(45deg);transform:rotate(45deg);position:absolute;left:6px;top:2px;display:table;width:6px;height:12px;border:2px solid;border-top:0;border-left:0;content:""}.md-chips .md-chip .md-chip-remove ng-md-icon{height:18px;width:18px;position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}ng-md-icon{background-repeat:no-repeat;display:inline-block;vertical-align:middle;fill:currentColor;height:24px;width:24px}ng-md-icon svg{pointer-events:none;display:block}ng-md-icon[md-font-icon]{line-height:1;width:auto}md-input-container>ng-md-icon{position:absolute;top:5px;left:2px}md-input-container>ng-md-icon+input{margin-left:36px}md-input-container.md-icon-float>ng-md-icon{top:26px;left:2px}md-input-container.md-icon-float>ng-md-icon+input{margin-left:36px}@media screen and (-ms-high-contrast:active){md-input-container.md-default-theme>ng-md-icon{fill:#fff}}md-list-item .md-list-item-inner>div.md-primary>ng-md-icon,md-list-item .md-list-item-inner>div.md-secondary>ng-md-icon,md-list-item .md-list-item-inner>ng-md-icon.md-secondary,md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>div.md-primary>ng-md-icon,md-list-item>div.md-secondary>ng-md-icon,md-list-item>ng-md-icon.md-secondary,md-list-item>ng-md-icon:first-child{width:24px;margin-top:16px;margin-bottom:12px;box-sizing:content-box}md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>ng-md-icon:first-child{margin-right:32px}md-list-item.md-2-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-2-line>ng-md-icon:first-child{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}md-list-item.md-3-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-3-line>ng-md-icon:first-child{margin-top:16px}md-tabs-wrapper md-next-button ng-md-icon,md-tabs-wrapper md-prev-button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}md-tabs-wrapper md-next-button ng-md-icon{-webkit-transform:translate3d(-50%,-50%,0) rotate(180deg);transform:translate3d(-50%,-50%,0) rotate(180deg)}',""])},function(module,exports){"use strict";function rest(app,$http){var Rx=window.Rx;window.moment;app.api={},app.api.activity={get:function(query){return Rx.Observable.fromPromise(activityService.find(query||{})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response.list})},find:function(query){return Rx.Observable.fromPromise(activitySearchService.find(query||{})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response})}},app.api.timeslots={getRange:function(d){return Rx.Observable.fromPromise($http({method:"GET",url:app.endpoint+"/timeslots?",data:d,headers:app.headers})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response.data.list})},get:function(id){return Rx.Observable.fromPromise($http({method:"GET",url:app.endpoint+"/timeslots?id="+id,headers:app.headers})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response})}};var activityService=app.service("activities"),activitySearchService=(app.service("events"),app.service("timeslots"),app.service("search"));app.activitySearchInterval=function(t){return setInterval(function(){activitySearchService.find({query:{sort:"-updatedAt"}})},t)};var cache=app.service("cache"),max=500;cache.get("activities").then(function(res){}).catch(function(res){cache.create({id:"activities",data:{},map:[]})});var updateCache=function(store){return function(hook){var modified=!1;cache.get("activities").then(function(activities){activities.updated=[];var acs=Rx.Observable.fromArray(hook.result.data);acs.map(function(res){return res}).filter(function(res){return void 0==activities.data[res._id]}).subscribe(function(x){modified=!0,activities.data[x._id]=x,activities.map.push(x._id),activities.updated.push(x._id)},function(err){return Promise.resolve(hook)},function(){if(modified){if(activities.map.length>max)for(var i=0;i<activities.map.length-max;i++)delete activities.data[activities.map[i]];activities.total=hook.result.total,cache.update("activities",activities).then(function(){return Promise.resolve(hook)})}})})}};return activitySearchService.after({all:[],find:[updateCache()]}),app.cache=cache,app}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=rest},function(module,exports){"use strict";function toUppercase(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var capitalize=function(inputValue){void 0==inputValue&&(inputValue="");var capitalized=inputValue.toUpperCase();return capitalized!==inputValue&&(modelCtrl.$setViewValue(capitalized),modelCtrl.$render()),capitalized};modelCtrl.$parsers.push(capitalize),capitalize(scope[attrs.ngModel])}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=toUppercase},function(module,exports){"use strict";function formatPhone(){return{require:"ngModel",restrict:"A",link:function(scope,elem,attrs,ctrl,ngModel){elem.add(phonenumber).on("keyup",function(){var origVal=elem.val().replace(/[^\w\s]/gi,"");if(10===origVal.length){var str=origVal.replace(/(.{3})/g,"$1-"),phone=str.slice(0,-2)+str.slice(-1);jQuery("#phonenumber").val(phone)}})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=formatPhone},function(module,exports){"use strict";function focusParent(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var elem=$(element[0].parentElement);element.on("focus",function(){elem.addClass(attrs.onFocus)}),element.on("blur",function(){elem.removeClass(attrs.onFocus)})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=focusParent},function(module,exports){"use strict";function size(){return{link:function(scope,element,attrs,modelCtrl){if(attrs.size){var elem=$(element[0].children[0]);elem.addClass(attrs.size)}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=size},function(module,exports){"use strict";function navigatorService($window,$q){function getCurrentPosition(){var deferred=$q.defer();return $window.navigator.geolocation?$window.navigator.geolocation.getCurrentPosition(function(position){deferred.resolve(position)},function(err){deferred.reject()}):deferred.reject("Geolocation not supported."),deferred.promise}return{getCurrentPosition:getCurrentPosition}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=navigatorService,navigatorService.$inject=["$window","$q"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _column=__webpack_require__(110),_column2=_interopRequireDefault(_column),col={bindings:{pos:"@",size:"@"},controller:function($element,$scope){this.$onInit=function(){this.pos||(this.position="start center"),"right"==this.pos?this.position="end center":this.position=this.pos},this.$onChanges=function(changesObj){},this.$postLink=function(){}},template:_column2.default,transclude:!0,controllerAs:"vm"};exports.default=col},function(module,exports){module.exports="<div layout=row layout-align={{vm.position}} ng-transclude flex></div>"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _progressButton=__webpack_require__(112),_progressButton2=_interopRequireDefault(_progressButton),progressButton={bindings:{loading:"<",class:"@",ngDisabled:"<",spinner:"<",stroke:"@",fill:"@",label:"@"},controller:function($element,$scope){var _this=this;this.$onInit=function(){this.loading},this.$onChanges=function(changesObj){_this.disabled=_this.ngDisabled},this.$postLink=function(){}},template:_progressButton2.default,transclude:!0,controllerAs:"vm"};exports.default=progressButton},function(module,exports){module.exports='<md-button layout=row layout-align="center center" class={{vm.class}} ng-disabled="vm.loading || vm.disabled"> <div layout=row layout-align="center center"> <svg ng-show="vm.loading && vm.spinner == 1" version=1.1 id=loader-1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=24px viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space=preserve> <path fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" d=M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z> <animateTransform attributeType=xml attributeName=transform type=rotate from="0 25 25" to="360 25 25" dur=0.6s repeatCount=indefinite /> </path> </svg> <svg ng-show="vm.loading && vm.spinner == 2" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox="0 0 24 30" style="enable-background:new 0 0 50 50" xml:space=preserve> <rect x=0 y=0 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}"> <animateTransform attributeType=xml attributeName=transform type=translate values="0 0; 0 20; 0 0" begin=0 dur=0.6s repeatCount=indefinite /> </rect> <rect x=10 y=0 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}"> <animateTransform attributeType=xml attributeName=transform type=translate values="0 0; 0 20; 0 0" begin=0.2s dur=0.6s repeatCount=indefinite /> </rect> <rect x=20 y=0 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}"> <animateTransform attributeType=xml attributeName=transform type=translate values="0 0; 0 20; 0 0" begin=0.4s dur=0.6s repeatCount=indefinite /> </rect> </svg> <svg ng-show="vm.loading && vm.spinner == 3" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox="0 0 24 30" style="enable-background:new 0 0 50 50" xml:space=preserve> <rect x=0 y=10 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity=0.2> <animate attributeName=opacity attributeType=XML values="0.2; 1; .2" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values="10; 20; 10" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values="10; 5; 10" begin=0s dur=0.6s repeatCount=indefinite /> </rect> <rect x=8 y=10 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity=0.2> <animate attributeName=opacity attributeType=XML values="0.2; 1; .2" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values="10; 20; 10" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values="10; 5; 10" begin=0.15s dur=0.6s repeatCount=indefinite /> </rect> <rect x=16 y=10 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity=0.2> <animate attributeName=opacity attributeType=XML values="0.2; 1; .2" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values="10; 20; 10" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values="10; 5; 10" begin=0.3s dur=0.6s repeatCount=indefinite /> </rect> </svg> </div> <span ng-show=!vm.loading>{{vm.label}}</span> </md-button>'},function(module,exports,__webpack_require__){var content=__webpack_require__(114);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,"progress-button{outline:none;margin:0!important;cursor:pointer}progress-button,progress-button md-button{pointer-events:auto}",""])},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItem=__webpack_require__(116),_listItem2=_interopRequireDefault(_listItem),listItem={bindings:{size:"@"},controller:function($element,$scope){this.$onInit=function(){},this.$onChanges=function(changesObj){},this.$postLink=function(){}},template:_listItem2.default,transclude:!0,controllerAs:"vm"};exports.default=listItem},function(module,exports){module.exports="<div layout=row class=listItem ng-class=[vm.size] flex=100 ng-transclude> </div>"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItemNumericControl=__webpack_require__(118),_listItemNumericControl2=_interopRequireDefault(_listItemNumericControl),listItemNumericControl={restrict:"E",bindings:{value:"=",label:"@",price:"@",max:"@",min:"@ ",size:"@"},template:_listItemNumericControl2.default,controller:function($element){var _this=this;this.min=0,this.$onInit=function(){this.elem=$($element[0].children[0]),this.value||(this.value=0)},this.$onChanges=function(changesObj){},this.$postLink=function(){},this.increment=function(){(void 0==this.max||this.max>this.value)&&this.value++},this.decrement=function(){this.value>this.min&&this.value--},this.checkAdjustValue=function(){_this.value>_this.max&&(_this.value=_this.max),_this.value<_this.min&&(_this.value=_this.min)}},controllerAs:"vm"};exports.default=listItemNumericControl},function(module,exports){module.exports='<div layout=row class=listItem ng-class=[vm.size] flex=100> <div layout=row layout-align="start center" flex> <div layout=column class=""> <span class=lineItemSubHeader>{{vm.label}}</span> <div layout=row> <span class=lineItemSubDetail>{{vm.price | ablCurrency: $root.currency}}</span> </div> </div> </div> <div layout=row layout-align="end center"> <div layout=column class=addOnAdjusters layout-align="center end" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub md-colors="{\'fill\': \'primary-A200\'}" ng-click=vm.increment();> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline" class=listIconSub ng-click=vm.decrement();></ng-md-icon> </div> <div layout=column layout-align="end end"> <input class=addOnQuantityText ng-model=vm.value ng-change=vm.checkAdjustValue(); type=number md-select-on-focus> </div> </div> </div>'},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItemAddCharge=__webpack_require__(120),_listItemAddCharge2=_interopRequireDefault(_listItemAddCharge);__webpack_require__(121);var listItemAddCharge={bindings:{add:"<",group:"=",buttonClass:"@"},template:_listItemAddCharge2.default,controller:function($scope){this.price=0,this.$onInit=function(){},this.$onChanges=function(changesObj){},this.$postLink=function(){}},controllerAs:"vm"};exports.default=listItemAddCharge},function(module,exports){module.exports='<md-list-item class=addOnListItem> <div layout=row layout-align="start center" flex> <md-input-container class="buttonInlineInput full-width"> <label>Name</label> <input class=buttonInlineInput ng-model=vm.label> </md-input-container> </div> <div layout=row layout-align="end center" flex=20> <md-input-container class="buttonInlineInput full-width"> <label>Price</label> <input class="full-width buttonInlineInput" md-select-on-focus ng-model=vm.price type=number min=0 step=0.01> </md-input-container> </div> <div layout=row> <md-button ng-disabled="!vm.label || !vm.price" ng-class="[vm.buttonClass.length > 0 ? vm.buttonClass : \'md-raised\']" ng-click="vm.add(vm.label, vm.price)"> Add </md-button> </div> </md-list-item>'},function(module,exports,__webpack_require__){var content=__webpack_require__(122);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,".full-width{width:100%}.text-align-left{text-align:left!important}col-section{width:100%}md-checkbox.listItemCheckbox .md-label{margin-top:26px;margin-left:38px}list-item,list-item-header,list-item-numeric-control{display:block;width:100%}.listItem{height:72px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItem md-checkbox .md-container{height:4px}.listItem.md{min-height:56px;height:56px;line-height:56px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.lg.slideDown.ng-hide{height:0!important}.lg.slideDown,.lg.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.lg.slideDown{height:72px;line-height:72px}.lg.slideDown.ng-hide-add,.lg.slideDown.ng-hide-remove{display:block!important}.lg.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.lg.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.listItem.sm{height:36px;line-height:36px;min-height:36px;padding:0 16px;font-size:12px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItem md-autocomplete input:not(.md-input){height:100%!important;line-height:100%!important;padding:0}.listItem md-autocomplete md-autocomplete-wrap{box-shadow:none!important;height:100%!important}.listItem md-autocomplete{padding:0!important}.listItemAutoCompleteAfterContainer{margin-top:-20px!important}.listItemFocus{box-shadow:0 1px 0 rgba(255,152,0,.4),0 -1px 0 rgba(255,152,0,.4),inset 0 1px 4px rgba(255,152,0,.2),inset 0 -1px 4px rgba(255,152,0,.2)!important;background:#fff}input.buttonInlineInput{padding:0;border-width:0;-ms-flex-preferred-size:36px;font-size:inherit;width:100%;border:none;outline:none;box-sizing:border-box;float:left;background:transparent}.inputStatusIcon{height:24px;width:36px;margin-bottom:42px!important;margin-right:4px!important}.listItemGreyFocus{box-shadow:0 1px 0 rgba(0,0,0,.28),0 -1px 0 rgba(0,0,0,.28),inset 0 1px 4px rgba(0,0,0,.16),inset 1px -1px 4px rgba(0,0,0,.2)!important}.listItemGreyFocus input,textarea{color:#3f51b5}.listItemGreyFocus ng-md-icon.listItemHeaderIcon{fill:#3f51b5}.listItemFocusBottomBorder{box-shadow:0 2px 0 rgba(58,171,56,.92),inset 0 -1px 3px rgba(57,73,171,.2),inset 0 1px rgba(0,0,0,.1)!important}.listItemFocusBottomBorder input,textarea{color:#000}md-input-container.buttonInlineInput{display:inline-block;position:relative;height:36px;padding:5px;margin:0;vertical-align:middle}.listItemPadding{padding:0 16px}.listItem.listItemHeader{font-size:16px;margin:auto;line-height:72px;font-weight:500;cursor:unset;color:#fff}.listItem.listItemHeader.light{color:#000;background:#fff}.listItem.listItemHeader.dark{color:#fff;background:#424242}.listItemHeaderBottomBorder{box-shadow:0 1px 2px rgba(0,0,0,.16),0 0 1px rgba(0,0,0,.3)}.listItem .strong{font-weight:600}.listItem.sm.listItemHeader{font-size:12px;margin:0;font-weight:500;cursor:unset;line-height:36px}.listItem.md.listItemHeader{font-size:16px;margin:0;font-weight:500;cursor:unset;line-height:54px}.leftIcon{margin-right:16px}ng-md-icon.listItemHeaderIcon.lg,ng-md-icon.listItemHeaderIcon.lg svg{margin:auto 0;height:32px;width:32px}ng-md-icon.listItemHeaderIcon.md,ng-md-icon.listItemHeaderIcon.md svg{margin:auto 0;height:24px;width:24px}ng-md-icon.listItemHeaderIcon.sm,ng-md-icon.listItemHeaderIcon.sm svg{margin:auto 8px auto 0;height:16px;width:16px}.lineItemSubHeader{font-size:14px;font-weight:400;padding:0 16px 0 0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.92)!important}.autocomplete-custom-template li{border-bottom:1px solid #ccc;height:auto;padding-top:8px;padding-bottom:8px;white-space:normal}.autocomplete-custom-template li:last-child{border-bottom-width:0}.autocomplete-custom-template .item-title{font-weight:600}.autocomplete-custom-template .item-metadata,.autocomplete-custom-template .item-title{display:block;line-height:2}.autocomplete-custom-template .item-title md-icon{height:18px;width:18px}",""])},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItemHeader=__webpack_require__(124),_listItemHeader2=_interopRequireDefault(_listItemHeader),listItemHeader={bindings:{action:"@",actionClick:"=",expanded:"=",title:"@",icon:"@",size:"@"},template:_listItemHeader2.default,controller:function(){this.$onInit=function(){this.expanded||(this.expanded=!1)},this.$onChanges=function(changesObj){},this.$postLink=function(){},this.click=function(){"expandable"==this.action&&(this.expanded=!this.expanded)}},controllerAs:"vm"};exports.default=listItemHeader},function(module,exports){module.exports='<div class="listItem listItemHeader" ng-class=[vm.size] ng-disabled=!vm.action ng-click=vm.click()> <div layout=row flex> <div layout=row layout-align="start center" flex=80> <ng-md-icon ng-if=vm.icon icon={{vm.icon}} class="headerIcon listIcon"></ng-md-icon> <div class=listItemHeaderText>{{vm.title}}</div> </div> <div layout=row layout-align="end center" flex=20> <div layout=column layout-align="center end" ng-if="vm.action == \'expandable\'" flex> <ng-md-icon icon="{{vm.expanded ? \'expand_less\' : \'expand_more\'}}" options=\'{"duration": 500, "rotation": "clock", "easing":"linear"}\' class=listItemHeaderIcon></ng-md-icon> </div> </div> </div> </div> '},function(module,exports,__webpack_require__){"use strict";
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(126);var _activityTotal=__webpack_require__(128),_activityTotal2=_interopRequireDefault(_activityTotal),_activityForms=__webpack_require__(129),_activityForms2=_interopRequireDefault(_activityForms),_activityBook=__webpack_require__(130),_activityBook2=_interopRequireDefault(_activityBook),_activityBookValidators=__webpack_require__(131),_activityBookValidators2=_interopRequireDefault(_activityBookValidators),_activityAdjustmentControlsComponent=__webpack_require__(132),_activityAdjustmentControlsComponent2=_interopRequireDefault(_activityAdjustmentControlsComponent);exports.default=angular.module("activity-book",["ngMaterial","rx"]).run(["$templateCache",function($templateCache){$templateCache.put("activity-forms.html",_activityForms2.default),$templateCache.put("activity-book.html",_activityBook2.default),$templateCache.put("activity-total.html",_activityTotal2.default)}]).controller("activityAdjustmentController",_activityAdjustmentControlsComponent2.default).directive("ablActivityBook",["$rootScope","$sce","$compile","$mdMedia","$mdDialog","$mdToast","$log","$window","$timeout","$http","rx","observeOnScope","$stateParams","$state","$filter",function($rootScope,$sce,$compile,$mdMedia,$mdDialog,$mdToast,$log,$window,$timeout,$http,rx,observeOnScope,$stateParams,$state,$filter){return{restrict:"E",scope:{book:"=",activity:"=",app:"="},template:_activityBook2.default,link:function($scope,element,attrs){function onResize(){$scope.$digest()}angular.element($window).on("resize",onResize)},controllerAs:"vm",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function buildQuery(){return angular.forEach(vm.attendees,function(e,i){if(data.attendees[e._id]=[],e.quantity>0)for(var i=0;i<e.quantity;i++)data.attendees[e._id].push(null)}),angular.forEach(vm.addons,function(e,i){if(data.addons[e._id]=[],e.quantity>0)for(var i=0;i<e.quantity;i++)data.addons[e._id].push(null)}),data.currency=vm.currency.toUpperCase(),data}function goToPay(){vm.guestDetailsExpanded=!1,vm.attendeesExpanded=!1,vm.addonsExpanded=!1,vm.questionsExpanded=!1,vm.showPaymentForm=!0,vm.paymentFormIsLoading=!0,vm.stripePaymentExpanded=!0,vm.paymentWasSent=!0,this.formWasBlocked=!0,$scope.bookingSuccessResponse="processing",$scope.safeApply(),$scope.makeBooking()}function submitNonCreditCardBooking(){$log.debug("submitNonCreditCardBooking",this.pricing.total);var bookingData=vm.getBookingData();bookingData.stripeToken&&delete bookingData.stripeToken,bookingData.location={},bookingData.isMobile=!1,vm.paymentWasSent=!0,$scope.bookingSuccessResponse="processing",Raven&&Raven.captureMessage("Submit Booking",{level:"info",extra:{bookingData:bookingData},tags:{step:"pay-non-cc"}}),$http({method:"POST",url:config.FEATHERS_URL+"/bookings",data:bookingData,headers:headers}).then(function(response){$log.debug("submitNonCreditCardBooking success",response),$scope.bookingSuccessResponse=response,vm.waitingForResponse=!1,$rootScope.$emit("paymentResponse"),validatePayment(response)},function(response){var errorElement=document.getElementById("card-errors");errorElement.textContent=response.data.errors[0],vm.paymentWasSent=!1,$rootScope.$emit("paymentResponse"),vm.waitingForResponse=!1})}function validatePayment(response){200===response.status&&($scope.paymentResponse="success",$scope.paymentSuccessful=!0,Raven&&Raven.captureMessage("Booking Suceeded",{level:"info",extra:{response:response},tags:{step:"pay-non-cc"}}),$scope.safeApply()),$scope.bookingSuccessResponse=response,$scope.$emit("paymentResponse",response)}var vm=this;this.formWasBlocked=!1,this.guestDetailsExpanded=!0,this.attendeesExpanded=!1,this.addonsExpanded=!1,this.questionsExpanded=!1,this.stripePaymentExpanded=!1,this.stripeCardIsValid=!1,this.paymentExpanded=!1,this.showPaymentForm=!1,this.paymentFormIsLoading=!1,this.paymentWasSent=!1,this.waitingForResponse=!1,this.validStepsForPayment={guest:!1,attendees:!1},this.couponStatus="untouched",this.appliedCoupon={},this.couponQuery="",this.occupancyRemaining=0,this.attendeeSubtotals=[],this.addonSubtotals=[],vm.taxes=[],vm.taxTotal=0,vm.addons=[],vm.questions=[],vm.goToPay=goToPay,vm.submitNonCreditCardBooking=submitNonCreditCardBooking,$scope.sendConfirmationEmail=!0;var config=$rootScope.config,headers={};config.DASHBOARD?$scope.dashboard=!0:(headers=config.MARKETPLACE?{"x-abl-access-key":config.ABL_ACCESS_KEY,"x-abl-date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"}:{"x-abl-access-key":$stateParams.merchant||"tLVVsHUlBAweKP2ZOofhRBCFFP54hX9CfmQ9EsDlyLfN6DYHY5k8VzpuiUxjNO5L","x-abl-date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"},vm.validStepsForPayment.bookingQuestions=!1),$log.debug("abl-activity-book $scope",$scope),vm.currency=$rootScope.currency,$scope.$watch(function(){return $rootScope.currency},function(n,o){n&&($log.debug("$scope.$watch:$rootScope.currency",n),vm.currency=n.toLowerCase())}),$scope.$on("currency-updated",function(event,args){$log.debug("ablActivityBook:currency-updated",args),vm.getPricingQuote(args.currency)}),Raven&&Raven.captureMessage("Add Booking",{level:"info",tags:{step:"opened"}}),$scope.formatDate=function(date,format){return window.moment(date).format(format)},$scope.paymentResponse="",$scope.paymentSuccessful=!1,this.goToNextStep=function(currentStepName,form){switch(currentStepName){case"guestDetailsStep":vm.toggleGuestDetails(),vm.toggleAttendees();break;case"attendeesStep":vm.countAttendeesAdded()>0&&(vm.addons.length>0?(vm.attendeesExpanded=!1,vm.addonsExpanded=!0):vm.questions.length>0?(vm.attendeesExpanded=!1,vm.questionsExpanded=!0):(vm.attendeesExpanded=!1,vm.stripePaymentExpanded=!0,$scope.dashboard||($log.debug("no questions, goToPay"),vm.goToPay())));break;case"addonsStep":vm.addons&&vm.addons.length>0&&vm.countAttendeesAdded()&&(vm.questions.length>0?(vm.addonsExpanded=!1,vm.questionsExpanded=!0):(vm.addonsExpanded=!1,vm.stripePaymentExpanded=!0,$scope.dashboard||($log.debug("no questions, goToPay"),vm.goToPay())));break;case"paymentStep":$log.debug("goToNextStep:paymentStep",vm.isPaymentValid()),vm.isPaymentValid()&&(vm.guestDetailsExpanded=!1,vm.attendeesExpanded=!1,vm.addonsExpanded=!1,vm.questionsExpanded=!1,vm.stripePaymentExpanded=!0,$scope.dashboard||vm.goToPay())}},vm.guestDetailsFormValid=!1,this.toggleGuestDetails=function(){this.guestDetailsExpanded=!this.formWasBlocked&&!this.guestDetailsExpanded},this.togglePayment=function(){this.paymentExpanded=!this.paymentExpanded},this.returnToMainPage=function(){$rootScope.config.DASHBOARD?($mdDialog.hide(),$state.reload()):($mdDialog.hide(),$state.go("home",{merchant:$stateParams.merchant}))},this.pricing={total:0},this.taxTotal,this.addonTotal,this.attendeeTotal=0,$scope.bookingSucceeded=!1,$scope.$mdMedia=$mdMedia,$scope.screenIsBig=function(){var w=angular.element($window);return w[0].innerWidth>742},$scope.addBookingController=$scope.$parent,vm.addBookingController=$scope.addBookingController,$log.debug("addBookingController:initialize",$scope.addBookingController),$scope.addBookingController.timeslot.charges.forEach(function(item){item.quantity=0}),this.toggleQuestions=function(){this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded},this.adjustAddon=function(i,mode){"up"==mode&&vm.addons[i].quantity++,"down"==mode&&vm.addons[i].quantity>0&&vm.addons[i].quantity--,$scope.safeApply(),$log.debug("adjust addons",vm.addons),vm.getPricingQuote()},this.toggleAddons=function(){vm.addons.length<1?this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded:this.addonsExpanded=!this.formWasBlocked&&!this.addonsExpanded},this.toggleStripePay=function(){this.paymentExpanded=!this.paymentExpanded},this.togglePay=function(){this.payButtonEnabled=!this.payButtonEnabled},this.adjustAttendee=function(i,mode){"up"==mode&&(vm.countAttendees()>0||$scope.dashboard)&&vm.attendees[i].quantity++,"down"==mode&&vm.attendees[i].quantity>0&&vm.attendees[i].quantity--,vm.getPricingQuote(),vm.countAttendees()},this.toggleAttendees=function(){this.attendeesExpanded=!this.formWasBlocked&&!this.attendeesExpanded},this.checkAdjustAttendee=function($index){!$scope.dashboard&&vm.attendees[$index].quantity>vm.countAttendees()&&(vm.attendees[$index].quantity=0,vm.attendees[$index].quantity=vm.countAttendees()),vm.attendees[$index].quantity<0&&(vm.attendees[$index].quantity=0),vm.getPricingQuote(),vm.countAttendees(),$scope.safeApply(),$log.debug("attendees added",vm.countAttendees(),vm.attendees[$index].quantity)};var data={attendees:{},addons:{}};vm.getPricingQuote=function(currency){var query=buildQuery();$http({method:"POST",url:config.FEATHERS_URL+"/pricing-quotes",data:query,headers:headers}).then(function(response){vm.pricing=response.data,vm.pricing.couponDeduction=vm.pricing.items.filter(function(item){return"coupon"==item.type});var addonsFilter=response.data.items.filter(function(item){return"addon"==item.type});vm.addonTotal=0,vm.addonSubtotals=[];var addonsArray={};angular.forEach(addonsFilter,function(addon,key){var object=addon.type+addon.name.replace(" ","");addonsArray[object]||(addonsArray[object]={addons:[]}),addonsArray[object].addons.push(addon)}),angular.forEach(addonsArray,function(addon,key){var obj={name:addon.addons[0].name,price:addon.addons[0].amount||addon.addons[0].price,amount:(addon.addons[0].amount||addon.addons[0].price)*addon.addons[0].quantity,quantity:addon.addons[0].quantity};vm.addonTotal+=(addon.addons[0].amount||addon.addons[0].price)*addon.addons[0].quantity,vm.addonSubtotals.push(obj)}),vm.attendeeTotal=response.data.items.filter(function(item){return"aap"==item.type}).reduce(function(result,att){return result+(att.amount||att.price)*att.quantity},0);var aapFilter=response.data.items.filter(function(item){return"aap"==item.type});vm.attendeeSubtotals=[];var attendeesArray={};angular.forEach(aapFilter,function(aap,key){var object=aap.type+aap.name.replace(" ","");attendeesArray[object]||(attendeesArray[object]={aaps:[]}),attendeesArray[object].aaps.push(aap)}),angular.forEach(attendeesArray,function(aap,key){var obj={name:aap.aaps[0].name,price:aap.aaps[0].amount||aap.aaps[0].price,amount:aap.aaps[0].amount*aap.aaps[0].quantity,quantity:aap.aaps[0].quantity};vm.attendeeSubtotals.push(obj)}),vm.taxTotal=response.data.items.filter(function(item){return"tax"==item.type||"fee"==item.type||"service"==item.type}).reduce(function(result,tax){return $log.debug("reduce.vm.taxTotal",tax),result+(tax.price.amount||tax.price.price)*tax.quantity},0),$log.debug("getPricingQuotes",response),$log.debug("vm.attendeeSubtotal",vm.attendeeSubtotals),$log.debug("vm.taxTotal",vm.taxTotal),0==vm.pricing.total&&"credit"==vm.paymentMethod&&(vm.paymentMethod="cash"),currency&&(vm.currency=currency)},function(response){vm.pricing={},vm.taxTotal=0,$mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position("left bottom").hideDelay(3e3))})},vm.getPossibleCoupons=function(){$http({method:"GET",url:config.FEATHERS_URL+"/coupons?bookingId="+vm.couponQuery,headers:headers}).then(function(response){vm.possibleCoupons=response.data,$log.debug("getPossibleCoupons success",response)},function(response){vm.possibleCoupons=[]})},vm.clients=[],observeOnScope($scope,"vm.formData.fullName").map(function(data){return data}).subscribe(function(change){$log.debug("clientSearchText ",change.newValue),$scope.dashboard&&(vm.clients=$http({method:"GET",url:config.FEATHERS_URL+"/clients?fullName="+change.newValue,headers:headers}).then(function(response){return $log.debug("clientSearch success",response),response.data.list},function(response){return $log.debug("clientSearch error!",response),[]}))}),vm.selectedClientChange=function(client){client&&(vm.formData.fullName=client.primaryContact.fullName||"",vm.formData.mail=client.primaryContact.email||"",vm.formData.phoneNumber=client.primaryContact.phoneNumber||"",$log.debug("selectedClientChange",client))},$scope.autocomplete={},vm.couponStatus="untouched",$scope.autocomplete.searchTextChange=function(text){text||data.couponId&&delete data.couponId},$scope.autocomplete.selectedItemChange=function(item){$log.debug("applied coupon",item),item?(vm.appliedCoupon=item,data.couponId=item.couponId,vm.validateCoupon(vm.appliedCoupon),vm.couponStatus="valid",vm.getPricingQuote(),vm.checkingCoupon=!1):(vm.appliedCoupon=void 0,vm.couponStatus="untouched",data.couponId&&delete data.couponId)};var queryDebounce=!1;vm.coupons=[],$scope.autocomplete.querySearch=function(text){if($scope.dashboard)return text=text.toUpperCase(),queryDebounce||1===text.length?this:(queryDebounce=!0,$timeout(function(){return $http({method:"GET",url:config.FEATHERS_URL+"/coupons?couponId="+text,headers:headers}).then(function(response){return queryDebounce=!1,vm.coupons=response.data.list,vm.coupons},function(response){return queryDebounce=!1,[]})},100))},vm.checkCoupon=function(){vm.checkingCoupon=!0,$http({method:"GET",url:config.FEATHERS_URL+"/coupons/"+vm.couponQuery,headers:headers}).then(function(response){$log.debug("checkCoupon success",response),data.couponId=response.data.couponId,vm.appliedCoupon=response.data,$log.debug("applied coupon",vm.appliedCoupon),vm.validateCoupon(vm.appliedCoupon),vm.couponStatus="valid",vm.getPricingQuote(),vm.checkingCoupon=!1},function(response){delete data.couponId,vm.couponStatus="invalid",vm.appliedCoupon={},vm.checkingCoupon=!1})},vm.removeCoupon=function(){vm.couponQuery="",delete data.couponId,$scope.autocomplete.selectedItem=void 0,vm.couponStatus="untouched",vm.appliedCoupon={},vm.getPricingQuote()},vm.pricingInformation=function(total){$log.debug("pricingInformation",total)};var moment=window.moment;vm.validateCoupon=function(coupon){moment();return!(!moment(coupon.endTime).isAfter(moment())||0!=coupon.maxRedemptions)||(!!(coupon.maxRedemptions>0&&moment(coupon.endTime).isAfter(moment())&&coupon.maxRedemptions-coupon.redemptions>=0)||(vm.couponStatus="invalid",!1))},vm.appliedCouponType=function(coupon){if(coupon)return coupon.percentage?coupon.amount+"%":$filter("ablCurrency")(coupon.amount,$rootScope.currency)},vm.bookingQuestionsCompleted=function(){var completed=0;return vm.bookingQuestions?angular.forEach(vm.bookingQuestions,function(e,i){e.length>0&&completed++}):completed=0,completed},observeOnScope($scope,"vm.couponQuery").debounce(500).select(function(response){return response}).subscribe(function(change){vm.couponQuery.length>0&&vm.checkCoupon()}),(0,_activityBookValidators2.default)(vm,rx,$http,$stateParams),$scope.$watch("addBookingController.activity",function(changes){$log.debug("addBookingController.activity",changes),angular.isDefined($scope.addBookingController.activity)&&(vm.questions=$scope.addBookingController.activity.questions||[],vm.questions||delete vm.validStepsForPayment.bookingQuestions,vm.addons=$scope.addBookingController.activity.charges.filter(function(charge){return"addon"==charge.type&&"active"==charge.status}),vm.addons||delete vm.validStepsForPayment.addons,vm.addons.forEach(function(e,i){angular.isDefined(e.quantity)||(e.quantity=0)}),vm.taxes=$scope.addBookingController.activity.charges.filter(function(charge){return"tax"==charge.type}),$scope.safeApply())},!0),$scope.$watch("addBookingController.timeslot",function(changes){angular.isDefined($scope.addBookingController.timeslot)&&angular.isDefined($scope.addBookingController.event)&&(angular.isDefined($scope.addBookingController.timeslot.charges)&&(vm.attendees=$scope.addBookingController.timeslot.charges.filter(function(charge){return"aap"==charge.type&&"active"==charge.status}),vm.attendees.forEach(function(e,i){angular.isDefined(e.quantity)||(e.quantity=0)})),data.timeSlotId=$scope.addBookingController.timeslot._id,data.startTime=$scope.addBookingController.event.startTime)},!0),vm.countAttendees=function(){var attendees=0;return $scope.addBookingController.event&&(attendees=vm.attendees?($scope.addBookingController.event.maxOcc?$scope.addBookingController.event.maxOcc:$scope.addBookingController.timeslot.maxOcc)-vm.attendees.map(function(att){return att.quantity}).reduce(function(a,b){return a+b},0)-$scope.addBookingController.event.attendees:0),attendees},vm.countAttendeesAdded=function(){var attendeesAdded=0;return $scope.addBookingController.event&&vm.attendees&&(attendeesAdded=vm.attendees.map(function(att){return att.quantity}).reduce(function(a,b){return a+b},0)),attendeesAdded},vm.countAddonsAdded=function(){return $scope.addBookingController.event&&vm.addons?vm.addons.map(function(add){return add.quantity}).reduce(function(a,b){return a+b},0):0},vm.addonsChanged=function(){$scope.safeApply(),$log.debug("addonsChanged"),$timeout(function(){vm.getPricingQuote()},0)},this.areGuestDetailsValid=function(form){return form?(vm.guestDetailsAreValid=form.$valid,vm.validStepsForPayment.guest=vm.guestDetailsAreValid):vm.guestDetailsAreValid=!1,vm.guestDetailsAreValid},this.areAttendeesValid=function(){return vm.validStepsForPayment.attendees=0!==vm.countAttendeesAdded(),0!==vm.countAttendeesAdded()},this.areAddonsValid=function(){return null!=vm.validStepsForPayment.addons&&(vm.validStepsForPayment.addons=!0),0!==vm.countAddonsAdded()},this.areBookingQuestionsValid=function(){return null!=vm.validStepsForPayment.bookingQuestions&&(vm.validStepsForPayment.bookingQuestions=vm.bookingQuestionsCompleted()===vm.questions.length),$log.debug("areBookingQuestionsValid ",vm.validStepsForPayment.bookingQuestions),vm.validStepsForPayment.bookingQuestions},this.isPaymentValid=function(){var isValid=[];return angular.forEach(vm.validStepsForPayment,function(step,key){step||isValid.push(step)}),!(isValid.length>0)},this.isNextStepPayment=function(step){return"attendees"===step?!(!vm.addons&&!vm.questions)&&!(!vm.addons&&!vm.questions):"addons"===step?!!vm.questions&&!!vm.questions:"payment"===step||void 0},vm.paymentMethod="credit",vm.bookingQuestions=[],vm.getBookingData=function(){var bookingData=angular.copy(data);return"reserved"==vm.paymentMethod&&(bookingData.amount=0),bookingData.eventInstanceId=$scope.addBookingController.event.eventInstanceId||$scope.addBookingController.event,bookingData.answers={},bookingData.sendConfirmationEmail=$scope.sendConfirmationEmail,bookingData.skipConfirmation=!$scope.sendConfirmationEmail,bookingData.email=vm.formData.mail,bookingData.phoneNumber=vm.formData.phoneNumber,bookingData.fullName=vm.formData.fullName,bookingData.notes=vm.formData.notes,bookingData.skipConfirmation=!1,bookingData.operator=$scope.addBookingController.event.operator||$scope.addBookingController.event.organizations[0]||$scope.addBookingController.activity.operator||$scope.addBookingController.activity.organizations[0],angular.forEach(vm.questions,function(e,i){$log.debug("vm.questions",vm.questions),$log.debug("vm.bookingQuestions",vm.bookingQuestions),bookingData.answers[e._id?e._id:e]=vm.bookingQuestions[i]}),"reserved"!=vm.paymentMethod?bookingData.paymentMethod=vm.paymentMethod:bookingData.paymentMethod="cash","reserved"==vm.paymentMethod&&(bookingData.amount=0),bookingData.currency="default",bookingData},vm.outputBookingData=function(){$log.debug(vm.getBookingData())},$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)},$scope.makeBooking=function(data){vm.paymentExpanded=!0,vm.loadingIframe=!0;var bookingData=vm.getBookingData();Raven&&Raven.captureMessage("Submit Booking",{level:"info",extra:{bookingData:bookingData},tags:{step:"pay-cc"}}),$log.debug("$scope.makeBooking",data),$scope.bookingResponse=$http({method:"POST",url:config.FEATHERS_URL+"/bookings",data:bookingData,headers:headers}).then(function(response){$log.debug("makeBooking success",response),vm.loadingIframe=!1,$scope.paymentSuccessful=!1,$scope.bookingSuccessResponse=response,vm.paymentFormIsLoading=!1;var iframe=document.getElementById("paymentIframe");iframe.style.display="block";var iframeDoc=iframe.contentWindow.document;iframeDoc.open(),iframeDoc.write(response.data.iframeHtml),iframeDoc.close(),$scope.bookingSucceeded=!0,Raven&&Raven.captureMessage("Booking Succeeded",{level:"info",extra:{response:response.data},tags:{step:"pay-cc"}})},function(response){$mdDialog.hide(),vm.loadingIframe=!1,vm.paymentFormIsLoading=!1,vm.paymentExpanded=!1,$scope.bookingSucceeded=!1,Raven&&Raven.captureMessage("Booking Error",{level:"error",extra:{response:response.data},tags:{step:"pay-cc"}}),$mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position("left bottom").hideDelay(3e3)),$log.debug("makeBooking error!",response)})};var _paymentMessageHandler;_paymentMessageHandler=function(event){$log.debug("DATA",event.data),"payment_complete"==event.data||"payment_success"==event.data.type?($log.debug("PAYMENT COMPLETE"),$scope.paymentResponse="success",$rootScope.$broadcast("paymentWithResponse",{response:event.data}),window.removeEventListener("message",_paymentMessageHandler),$scope.paymentSuccessful=!0,$scope.safeApply()):event.data.indexOf("setImmediate")===-1&&(Raven&&Raven.captureMessage("Booking Payment Error",{level:"error",extra:{paymentMessageHandler:event.data},tags:{step:"pay-non-cc"}}),$scope.paymentSuccessful=!1,$scope.paymentResponse="",vm.showPaymentForm=!0,$scope.safeApply())},$log.debug("Adding Payment Message Event Listener"),window.addEventListener("message",_paymentMessageHandler),$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}}]}}]).filter("imageService",function(){return function(value){return value.replace(/(.png|.jpg|.jpeg)/i,"-small$1")}})},function(module,exports,__webpack_require__){var content=__webpack_require__(127);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,"#paymentIframe{margin:0;padding:8px;border:none;min-height:330px;height:100%;overflow-y:hidden;width:100%;display:none}abl-activity-book md-card{box-shadow:none!important;border:none!important;background:transparent}.inputBottomMargin{margin-bottom:42px!important}.transparent{background-color:transparent!important}list-item{display:block!important}.payment-section{margin-bottom:54px}",""])},function(module,exports){module.exports='<md-card class=paymentSummaryCard ng-show="paymentResponse != \'success\'"> <md-list flex> <md-list-item ng-if=!dashboard class=lineItemHeader ng-click=null> <div class=md-list-item-text layout=column> <h4 style=margin-top:8px;line-height:1.6em>{{vm.addBookingController.timeslot.title}}</h4> <p style=white-space:normal;overflow:auto;line-height:1.6em>{{vm.addBookingController.timeslot.startTime | date : \'EEEE MMMM d, yyyy\'}} - {{vm.addBookingController.timeslot.startTime | date : \'HH:mma\'}} - {{vm.addBookingController.timeslot.endTime | date : \'HH:mma\'}}</p> </div> </md-list-item> <md-list-item class=lineItemHeader ng-if=vm.base ng-click=null> <div class=md-list-item-text layout=row flex> <div layout=row layout-align="start center" flex=50> <p class="">Base Price </p> </div> <div layout=row layout-align="end center" flex=50> <p> <abl-currency-directive price=vm.base() currency={{vm.currency}}></abl-currency-directive> {{$parent.currency | uppercase}}</p> </div> </div> </md-list-item> <md-list-item class="paymentHeader md-2-line md-primary" ng-disabled=detailsForm.$invalid ng-show="vm.couponStatus == \'valid\'"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column layout-align="center start"> <ng-md-icon icon=clear class="listIcon remove-coupon" ng-click=vm.removeCoupon(); ng-if="vm.couponStatus ==\'valid\'"></ng-md-icon> </div> <span class="couponText total" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCouponType(vm.appliedCoupon)}} Off</span> </div> <div layout=row layout-align="end center"> <span class=couponTextTotal ng-if=vm.pricing.couponDeduction[0]>-<abl-currency-directive price="(-1 * vm.pricing.couponDeduction[0].price.amount)" currency={{vm.currency}}></abl-currency-directive></span> <md-progress-circular md-mode=indeterminate ng-show="vm.checkingCoupon && vm.couponQuery.length > 0" class="listItemCircularProgress easeIn" md-diameter=24px> </md-progress-circular> </div> </div> </md-list-item> <list-item size=lg class=listItemAutocomplete ng-show="vm.couponStatus == \'untouched\' || vm.couponStatus ==\'invalid\'"> <md-autocomplete md-selected-item=autocomplete.selectedItem md-search-text-change=autocomplete.searchTextChange(autocomplete.searchText) md-search-text=autocomplete.searchText md-no-cache=true md-selected-item-change=autocomplete.selectedItemChange(item) md-items="item in autocomplete.querySearch(autocomplete.searchText)" md-item-text=item.couponId md-min-length=0 placeholder="{{dashboard ? \'Search coupons..\' : \'Enter a coupon..\'}}" class=listItem ng-if=dashboard> <md-item-template> <span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.couponId}}</span> <span>{{vm.appliedCouponType(item)}}</span> </md-item-template> <md-not-found> No coupons found{{autocomplete.searchText.length > 0 ? (\' matching"\' + autocomplete.searchText + \'".\') : \'.\'}} </md-not-found> </md-autocomplete> <span class="paymentSubTitle total"> <input id=#coupon ng-model=vm.couponQuery type=text class=couponInput ng-if="(vm.couponStatus ==\'untouched\' || vm.couponStatus ==\'invalid\') && !dashboard" ng-change="vm.checkingCoupon = true" placeholder="Enter coupon.." to-uppercase/> </span> </list-item> <md-list-item ng-show="vm.couponStatus ==\'invalid\' && vm.couponQuery.length > 0 && !vm.checkingCoupon" class="paymentHeader md-2-line md-primary easeIn" ng-if=!dashboard> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if="vm.couponStatus !=\'valid\'" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class="paymentSubTitle total"> Invalid Coupon </span> </div> <div layout=row layout-align="end center" flex> <ng-md-icon icon=clear class=listIcon ng-click="vm.couponQuery = \'\';"></ng-md-icon> </div> </div> </md-list-item> <div ng-if="vm.attendeeSubtotals.length > 0"> <div class="md-list-item-text subtotalLineItem" layout=row flex> <div layout=row layout-align="start center" flex=50> <span class=total>Attendees </span> </div> <div layout=row layout-align="end center" flex=50> <span class=activityTotal><abl-currency-directive price=vm.attendeeTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat="(key, value) in vm.attendeeSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{value.quantity}} x {{value.name}} @ <abl-currency-directive style="margin:0 4px" price=value.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align="end center" flex=50> <abl-currency-directive price=value.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if="vm.addonSubtotals.length > 0"> <div class="md-list-item-text subtotalLineItem" layout=row flex> <div layout=row layout-align="start center" flex=50> <span class=total>Add-ons </span> </div> <div layout=row layout-align="end center" flex=50> <span class=activityTotal><abl-currency-directive price=vm.addonTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat="addon in vm.addonSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{addon.quantity}} x {{addon.name}} @ <abl-currency-directive style="margin:0 4px" price=addon.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align="end center" flex=50> <abl-currency-directive price=addon.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if="vm.taxTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout=row flex> <div layout=row layout-align="start center" flex=50> <span class=total>Taxes and Fees </span> </div> <div layout=row layout-align="end center" flex=50> <span class=activityTotal><abl-currency-directive price=vm.taxTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> </div> <div> <div class="md-list-item-text subtotalLineItem bottomTotal" layout=row layout-align="space-between center" flex> <div layout=row layout-align="start center" flex=50> <span class="">Total </span> </div> <div layout=row layout-align="end center" flex=50> <span><abl-currency-directive price="(vm.pricing.total.amount || 0)" currency={{vm.currency}}></abl-currency-directive> <span class=pricing ng-if="vm.pricing.total.amount > 0"><ng-md-icon icon=information class=listIcon><md-tooltip md-direction=top>Original price: {{vm.pricing.total.originalAmount | ablCurrency : (vm.pricing.total.originalCurrency | lowercase)}}, Original currency: {{vm.pricing.total.originalCurrency}}</md-tooltip></ng-md-icon></span></span> </div> </div> </div> </md-list> </md-card> '},function(module,exports){module.exports='<div ng-if="paymentResponse != \'success\' || !vm.showPaymentForm"> <div class=activityPaymentSummaryCard layout=column after-render> <list-item size=lg class=listItemHeader ng-click=vm.toggleGuestDetails() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_1 class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon> <span class=paymentSubTitle flex>Guest Details</span> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end"> <ng-md-icon icon="{{vm.guestDetailsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.guestDetailsExpanded layout=column> <list-item ng-if=dashboard> <md-checkbox ng-model=sendConfirmationEmail class=listItemCheckbox>Send confirmation e-mail to client</md-checkbox> </list-item> <form name=guestDetailsForm novalidate> <div> <md-input-container class="md-block listItemInputContainer inputBottomMargin" ng-if=!dashboard> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-input-container> <md-autocomplete ng-if=dashboard required md-input-name=autocompleteField md-input-minlength=3 md-input-maxlength=100 md-no-cache=true md-delay=250 md-selected-item=vm.clientSearchSelectedItem md-search-text=vm.formData.fullName md-items="item in vm.clients" md-item-text=item.primaryContact.fullName md-floating-label="Full Name" md-selected-item-change=vm.selectedClientChange(item) class="md-block listItemInputContainer" md-menu-class=autocomplete-custom-template md-min-length=2> <md-item-template> <span class=item-title> <ng-md-icon icon=person class="listItemHeaderIcon sm"></ng-md-icon> <span> {{item.primaryContact.fullName}} </span> </span> <span class=item-metadata> <span> <ng-md-icon icon=email class="listItemHeaderIcon sm" md-colors="{fill: \'blue-grey-A200\'}"></ng-md-icon> {{item.primaryContact.email}} </span> </span> </md-item-template> <div ng-messages=guestDetailsForm.autocompleteField.$error ng-if=guestDetailsForm.autocompleteField.$touched> <div ng-message=required>You <b>must</b> enter a client name.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-autocomplete> <md-input-container class="md-block listItemInputContainer listItemAutoCompleteAfterContainer" ng-if=!dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.mail.$error> <div ng-message=required>This is required.</div> <div ng-message=email>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer" ng-if=!dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer listItemAutoCompleteAfterContainer" ng-if=dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail type=email md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.mail.$error> <div ng-message=email>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer" ng-if=dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber type=text /> <div ng-messages=guestDetailsForm.phone.$error> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer"> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align="end center" layout-margin> <md-button class="md-raised md-primary md-hue-2" ng-disabled=!vm.areGuestDetailsValid(guestDetailsForm) ng-click="vm.goToNextStep(\'guestDetailsStep\')">Next</md-button> </div> </div> </form> </div> <md-divider class=no-margin></md-divider> <list-item size=lg class=listItemHeader ng-click=vm.toggleAttendees() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_2 class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon> <span class=paymentSubTitle ng-if="vm.countAttendees() >= 0" flex>Attendees <span ng-show="vm.countAttendees() < 4"> {{vm.countAttendees()}} spot{{vm.countAttendees() != 1 ? \'s\' : \'\'}} remaining</span></span> <span class=paymentSubTitle ng-if="vm.countAttendees() < 0" flex>Attendees <span class=red> <strong> {{vm.countAttendees() * -1}}</strong> spot{{((vm.countAttendees() * -1) > 1 || (vm.countAttendees() * -1) == 0) ? \'s\' : \'\'}} over maximum occupancy</span></span> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end"> <ng-md-icon icon="{{vm.attendeesExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.attendeesExpanded ng-class=vm.areAttendeesValid() layout=column> <div ng-repeat="attendee in vm.attendees"> <list-item class="md-2-line addOnListItem"> <div layout=row class=list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column class=""> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row> <span class=lineItemSubDetail>{{ attendee.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align="end center"> <div layout=column class=addOnAdjusters layout-align="center end" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAttendee($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline" class=listIconSub ng-click="vm.adjustAttendee($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end"> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); type=number min=0 md-select-on-focus> </div> </div> </div> </list-item> </div> <div layout=row layout-align="end center" layout-margin> <md-button ng-if="vm.isNextStepPayment(\'attendees\')" class="md-raised md-primary md-hue-2" ng-disabled=!vm.areAttendeesValid() ng-click="vm.goToNextStep(\'attendeesStep\')">Next</md-button> </div> </div> <md-divider class=no-margin></md-divider> <div ng-if="vm.addons.length > 0"> <list-item class="paymentHeader md-2-line" ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click=vm.toggleAddons() layout=column flex> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_3 class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end"> <ng-md-icon ng-show="vm.addOnsSelected == 1" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon="{{vm.addonsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </list-item> <md-divider class=no-margin></md-divider> <div ng-show=vm.addonsExpanded ng-class=vm.areAddonsValid()> <div ng-repeat="addon in vm.addons"> <list-item class="md-2-line addOnListItem"> <div layout=row layout-align="start center" flex> <div layout=column class=""> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=""> <span class=lineItemSubDetail>{{ addon.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align="end center" flex> <div layout=column class=addOnAdjusters layout-align="center end"> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAddon($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline" class=listIconSub ng-click="vm.adjustAddon($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end"> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.addonsChanged(); md-select-on-focus type=number> </div> </div> </list-item> </div> <div layout=row layout-align="end center" layout-margin> <md-button ng-if="vm.isNextStepPayment(\'addons\')" class="md-raised md-primary md-hue-2" ng-click="vm.goToNextStep(\'addonsStep\')">Next</md-button> </div> </div> </div> <div ng-if="vm.questions.length > 0"> <list-item class="paymentHeader md-2-line" ng-disabled="guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1" ng-click=vm.toggleQuestions()> <div layout=row class=list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column class=""> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_4 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0"></ng-md-icon> <ng-md-icon icon=filter_3 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length == 0"></ng-md-icon> <span class=paymentSubTitle>Booking Questions <i class="fa fa-angle-right" aria-hidden=true></i> {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end" flex> <ng-md-icon icon="{{vm.questionsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </list-item> <div ng-show=vm.questionsExpanded ng-class=!vm.areBookingQuestionsValid()> <div class="questionForm slideDown"> <div ng-repeat="question in vm.questions" class=listItemInputContainer> <div layout=column layout-align="center stretch" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align="start center"> <ng-md-icon icon="{{vm.bookingQuestions[$index].length > 0 ? \'done\' : \'priority_high\'}}" class=inputStatusIcon></ng-md-icon> <md-input-container class=md-block flex> <textarea name=question ng-model=vm.bookingQuestions[$index] md-maxlength=300 rows=1></textarea> </md-input-container> </div> </div> </div> </div> <div layout=row layout-align="end center" layout-margin> <md-button class="md-raised md-primary md-hue-2" ng-disabled="!dashboard && !vm.areBookingQuestionsValid()" ng-click="vm.goToNextStep(\'paymentStep\')">Next</md-button> </div> </div> <md-divider class=no-margin></md-divider> </div> <div class=payment-section> <list-item class="paymentHeader md-2-line" ng-disabled=!vm.isPaymentValid()> <div layout=row layout-align="start center" flex=80> <ng-md-icon icon=filter_5 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0 && vm.questions.length > 0"></ng-md-icon> <ng-md-icon icon=filter_4 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0 && vm.questions.length == 0 || vm.addons.length == 0 && vm.questions.length > 0"></ng-md-icon> <ng-md-icon icon=filter_3 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length == 0 && vm.questions.length == 0"></ng-md-icon> <span class=paymentSubTitle>Payment Details</span> </div> <div layout=row layout-align="end center" flex=20> <div layout=column layout-align="center end" flex> </div> </div> </list-item> <md-divider class=no-margin></md-divider> <div ng-show=vm.stripePaymentExpanded> <div class="radioGroup listItemInputContainer" ng-if=dashboard> <md-radio-group ng-model=vm.paymentMethod> <md-radio-button value=credit ng-if="vm.pricing.total.amount > 0"> Credit Card (Online)</md-radio-button> <md-radio-button value=cash>Cash</md-radio-button> <md-radio-button value=debit> Office Point of Sale (POS) </md-radio-button> <md-radio-button value=gift> Gift Card </md-radio-button> <md-radio-button value=transfer> Bank Transfer </md-radio-button> <md-radio-button value=reserved> Reservation - Pay Later </md-radio-button> </md-radio-group> </div> <div layout=row layout-align="end center" layout-margin ng-if="vm.paymentMethod != \'credit\'"> <progress-button class="md-raised md-primary md-hue-2" ng-disabled="vm.countAttendeesAdded() < 1" loading="bookingSuccessResponse == \'processing\'" ng-click=vm.submitNonCreditCardBooking() spinner=3 label="{{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}"></progress-button> </div> <div layout=row layout-align="end center" layout-margin ng-if="vm.paymentMethod == \'credit\' && dashboard"> <progress-button class="md-raised md-primary md-hue-2" ng-disabled="vm.countAttendeesAdded() < 1" loading="bookingSuccessResponse == \'processing\'" ng-click=vm.goToPay() spinner=3 label="{{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}"></progress-button> </div> </div> <form method=post id=payment-form name=creditCardDetailsForm ng-show=false> <div class=form-row style="padding:0 30px 20px 20px"> <div id=card-errors></div> <div id=card-element> </div> </div> <div ng-if=vm.waitingForResponse layout=row layout-align="space-around center" style=padding:20px> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div layout=row layout-align="end center" layout-margin> <md-button type=submit class="md-raised md-primary md-hue-2" ng-class="{\'valid\': vm.isPaymentValid() && vm.stripeCardIsValid && !vm.waitingForResponse}" ng-disabled="!vm.isPaymentValid() || vm.paymentWasSent" class=submitButton><i class="fa fa-credit-card" aria-hidden=true></i> {{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }}</md-button> </div> </form> <div layout=row ng-if=false> <md-button flex class="md-raised md-primary md-hue-2" ng-disabled="!vm.isPaymentValid() || vm.paymentWasSent" ng-click=vm.goToPay()><i class="fa fa-credit-card" aria-hidden=true></i> {{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }}</md-button> </div> <div ng-if=!dashboard> <md-card class="transparent no-margin" ng-show="vm.showPaymentForm && paymentResponse.length < 1"> <div ng-if=vm.loadingIframe layout=row layout-align="space-around center" style=padding:20px> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div> </div> </div> </div>';
},function(module,exports){module.exports='<div layout="{{screenIsBig() ? \'row\' : \'column\'}}" layout-align="{{screenIsBig() ? \'start stretch\' : \'start center\'}}" layout-fill class=columnFix ng-class="screenIsBig() ? \'activityBookDialogLarge\' : \'activityBookDialogSmall\'" ng-show="(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)"> <div flex class="paymentSummaryCardLarge leftCard" ng-class="screenIsBig() ? \'leftCardLarge\' : \'leftCardSmall\'" layout-align="start stretch"> <div ng-include="\'activity-forms.html\'"></div> </div> <div flex class="paymentSummaryCardLarge rightCard" ng-class="screenIsBig() ? \'rightCardLarge\' : \'rightCardSmall\'" layout=column layout-align="start stretch"> <div flex class=activity-total-include ng-include="\'activity-total.html\'"></div> </div> </div> <div ng-if=dashboard> <md-card class="paymentSummaryCard no-margin" ng-show="vm.showPaymentForm && paymentResponse.length < 1"> <div style=min-height:310px layout=row layout-sm=column layout-align="center center" ng-if=vm.paymentFormIsLoading> <md-progress-circular md-mode=indeterminate md-diameter=40></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div> <div class=paymentResponseContainer> <div class="paymentSummaryCard no-margin" ng-show="paymentResponse.length > 0"> <div ng-if="paymentResponse == \'success\'" class=easeIn> <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align="start center" md-colors="{color: \'default-primary\'}"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">{{bookingSuccessResponse.data.booking.status == \'unpaid\' ? \'Booking\' : \'Payment\'}} Complete</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=check class=listIcon ng-style="{fill: \'green\'}"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation ng-if=dashboard> <h3>Congratulations!</h3> <p>Your {{bookingSuccessResponse.data.booking.status == \'unpaid\' ? \'reservation\' : \'booking\'}} is confirmed.</p> <p>{{vm.formData.fullName}} is attending {{bookingSuccessResponse.data.booking.title}} on {{formatDate(bookingSuccessResponse.data.booking.startTime, \'LL\')}}</p> <p>A confirmation email will be sent to {{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</p> <div class=booking-id>The reference ID is: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> <div class=confirmation ng-if=!dashboard> <h3>Congratulations!</h3> <p>Your booking is confirmed.</p> <p>You will receive a confirmation email at: <strong>{{vm.formData[\'mail\']}}</strong></p> <p class=margin-top>For questions about your booking, please contact:</p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].companyName}} ({{bookingSuccessResponse.data.booking.organizations[0].primaryContact.phoneNumber}})</strong></p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</strong></p> <div class=booking-id>Booking ID: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div style=margin-top:25px layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> </div> </div> <div ng-if="paymentResponse == \'failed\'"> <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align="start center" md-colors="{color: \'default-primary\'}"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Failed</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=error class=listIcon ng-style="{fill: \'red\'}"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> <div style=margin-top:25px layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click=vm.payNow()>Try Again</md-button> </span> </div> </div> </div> </div> <div ng-if="paymentResponse == \'processing\'"> <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align="start center" md-colors="{color: \'default-primary\'}"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Processing</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=watch_later class=listIcon ng-style="{fill: \'red\'}"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> <div style=margin-top:25px layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click="goToState(\'home\')">Return</md-button> </span> </div> </div> </div> </div> </div> </div> '},function(module,exports){"use strict";function activityBookValidator(vm,$http,$stateParams){return vm.searchClients=function(query){return Rx.Observable.fromPromise($http({method:"GET",url:vm.config.apiVersion+"/clients?fullName="+text,headers:{"x-abl-access-key":$stateParams.merchant,"x-abl-date":Date.parse((new Date).toISOString())}})).select(function(response){return response})},vm}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=activityBookValidator},function(module,exports){"use strict";function activityAdjustmentControls(){var vm=this;this.$onInit=function(){},this.$onChanges=function(changesObj){},this.$postLink=function(){},vm.addCharge=function(label,price){}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=activityAdjustmentControls}]);
//# sourceMappingURL=abl-sdk.min.js.map
=======
webpackJsonp([0],[function(e,n,t){t(1),e.exports=t(133)},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=t(2),o=i(a),s=t(5),r=i(s),d=t(62),l=i(d),c=t(76),u=i(c),m=t(84),p=(i(m),t(91)),g=(i(p),t(93)),f=i(g),h=t(94),b=(i(h),t(99)),v=(i(b),t(101)),y=(i(v),t(103)),x=i(y),w=t(104),k=i(w),T=t(105),C=i(T),I=t(106),_=i(I),A=t(107),S=(i(A),t(108)),E=i(S),D=t(109),R=i(D),O=t(111),q=i(O),P=t(113),M=(i(P),t(115)),B=i(M),$=t(117),L=i($),H=t(119),N=i(H),j=t(123),z=i(j),F=(t(125),window.jQuery,function(e){var n=null,t=null,i=null,a=!0,s=[];return{useSocket:function(e){a=!!e},setSocketOpts:function(e){i=e},setEndpoint:function(e){n=e},setApiKey:function(e){t=e},setServices:function(e){s=e},getSettings:function(){return n},$get:["$injector","$timeout","$log","$mdToast","$http",function(e,s,d,c,m){var p=e.get("$rootScope"),g=this;if(!n)return this.app={},this.app;d.debug("config",p.config),this.app=(0,r.default)().configure((0,u.default)(o.default)).configure(r.default.hooks()).use("cache",(0,l.default)({name:"abl"+(p.config.DASHBOARD?"-dash":""),storage:window.localStorage})),this.app.endpoint=n,this.app.apiKey=t;var h=(document.cookie.indexOf("XSRF-TOKEN="),"");if(console.log(document.cookie),this.app.headers={"Content-Type":"application/json;charset=utf-8"},t&&(this.app.headers={"X-ABL-Access-Key":t,"X-ABL-Date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"}),a)d.debug("endpoint",n),this.socket=io(n,i),this.app.configure(r.default.socketio(this.socket));else{var b=function(e){var n=document.cookie.split(";").map(function(e){return e.split("=")}).reduce(function(e,n){return e[n[0].trim()]=n[1],e},{});h=n["XSRF-TOKEN"]||void 0,console.log("xsrf ",h),h&&(g.app.headers["X-XSRF-TOKEN"]=h),e.params.headers=Object.assign({},g.app.headers,e.params.headers),e.params.withCredentials=!0},v=function(e){};this.app.configure(r.default.rest(n).jquery(window.jQuery,{headers:g.app.headers,withCredentials:!0})),this.app.mixins.push(function(e){e.before(b),e.after(v)})}return(0,f.default)(this.app,c,p),(0,x.default)(this.app,m),p.loading=!0,this.app.loadingTimeout=null,this.app.loadingTimeout=s(function(){p.loading=!1},1500),p.afterRender=function(e,n){s.cancel(this.loadingTimeout),this.loadingTimeout=s(function(){p.loading=!1},1500)},window.$abl=this.app,window.$http=m,this.app}]}}),Z=[function(){return F()}],Q=[function(){return F()}];n.default=angular.module("abl-sdk-feathers",["ngMaterial","rx","currency-component"]).provider("$abl",Q).provider("$feathers",Z).filter("startFrom",function(){return function(e,n){return n=+n,e.slice(n)}}).service("navigatorService",E.default).directive("toUppercase",k.default).directive("formatPhone",C.default).directive("onFocus",_.default).directive("formatPhone",C.default).component("colSection",R.default).component("progressButton",q.default).component("listItem",B.default).component("listItemNumericControl",L.default).component("listItemAddCharge",N.default).component("listItemHeader",z.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){function i(){}function a(e){if(!f(e))return e;var n=[];for(var t in e)o(n,t,e[t]);return n.join("&")}function o(e,n,t){if(null!=t)if(Array.isArray(t))t.forEach(function(t){o(e,n,t)});else if(f(t))for(var i in t)o(e,n+"["+i+"]",t[i]);else e.push(encodeURIComponent(n)+"="+encodeURIComponent(t));else null===t&&e.push(encodeURIComponent(n))}function s(e){for(var n,t,i={},a=e.split("&"),o=0,s=a.length;o<s;++o)n=a[o],t=n.indexOf("="),-1==t?i[decodeURIComponent(n)]="":i[decodeURIComponent(n.slice(0,t))]=decodeURIComponent(n.slice(t+1));return i}function r(e){for(var n,t,i,a,o=e.split(/\r?\n/),s={},r=0,d=o.length;r<d;++r)t=o[r],-1!==(n=t.indexOf(":"))&&(i=t.slice(0,n).toLowerCase(),a=y(t.slice(n+1)),s[i]=a);return s}function d(e){return/[\/+]json($|[^-\w])/.test(e)}function l(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var n=this.xhr.status;1223===n&&(n=204),this._setStatusProperties(n),this.header=this.headers=r(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function c(e,n){var t=this;this._query=this._query||[],this.method=e,this.url=n,this.header={},this._header={},this.on("end",function(){var e=null,n=null;try{n=new l(t)}catch(n){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=n,t.xhr?(e.rawResponse=void 0===t.xhr.responseType?t.xhr.responseText:t.xhr.response,e.status=t.xhr.status?t.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),t.callback(e)}t.emit("response",n);var i;try{t._isResponseOK(n)||(i=new Error(n.statusText||"Unsuccessful HTTP response"))}catch(e){i=e}i?(i.original=e,i.response=n,i.status=n.status,t.callback(i,n)):t.callback(null,n)})}function u(e,n,t){var i=v("DELETE",e);return"function"==typeof n&&(t=n,n=null),n&&i.send(n),t&&i.end(t),i}var m;"undefined"!=typeof window?m=window:"undefined"!=typeof self?m=self:(console.warn("Using browser-only version of superagent in non-browser environment"),m=this);var p=t(85),g=t(86),f=t(87),h=t(88),b=t(90),v=n=e.exports=function(e,t){return"function"==typeof t?new n.Request("GET",e).end(t):1==arguments.length?new n.Request("GET",e):new n.Request(e,t)};n.Request=c,v.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var y="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};v.serializeObject=a,v.parseString=s,v.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},v.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},h(l.prototype),l.prototype._parseBody=function(e){var n=v.parse[this.type];return this.req._parser?this.req._parser(this,e):(!n&&d(this.type)&&(n=v.parse["application/json"]),n&&e&&(e.length||e instanceof Object)?n(e):null)},l.prototype.toError=function(){var e=this.req,n=e.method,t=e.url,i="cannot "+n+" "+t+" ("+this.status+")",a=new Error(i);return a.status=this.status,a.method=n,a.url=t,a},v.Response=l,p(c.prototype),g(c.prototype),c.prototype.type=function(e){return this.set("Content-Type",v.types[e]||e),this},c.prototype.accept=function(e){return this.set("Accept",v.types[e]||e),this},c.prototype.auth=function(e,n,t){1===arguments.length&&(n=""),"object"==typeof n&&null!==n&&(t=n,n=""),t||(t={type:"function"==typeof btoa?"basic":"auto"});var i=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,n,t,i)},c.prototype.query=function(e){return"string"!=typeof e&&(e=a(e)),e&&this._query.push(e),this},c.prototype.attach=function(e,n,t){if(n){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,n,t||n.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new m.FormData),this._formData},c.prototype.callback=function(e,n){if(this._shouldRetry(e,n))return this._retry();var t=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),t(e,n)},c.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},c.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||i,this._finalizeQueryString(),this._end()},c.prototype._end=function(){var e=this,n=this.xhr=v.getXHR(),t=this._formData||this._data;this._setTimeouts(),n.onreadystatechange=function(){var t=n.readyState;if(t>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==t){var i;try{i=n.status}catch(e){i=0}if(!i){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var i=function(n,t){t.total>0&&(t.percent=t.loaded/t.total*100),t.direction=n,e.emit("progress",t)};if(this.hasListeners("progress"))try{n.onprogress=i.bind(null,"download"),n.upload&&(n.upload.onprogress=i.bind(null,"upload"))}catch(e){}try{this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(n.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof t&&!this._isHost(t)){var a=this._header["content-type"],o=this._serializer||v.serialize[a?a.split(";")[0]:""];!o&&d(a)&&(o=v.serialize["application/json"]),o&&(t=o(t))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&n.setRequestHeader(s,this.header[s]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send(void 0!==t?t:null),this},v.agent=function(){return new b},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){b.prototype[e.toLowerCase()]=function(n,t){var i=new v.Request(e,n);return this._setDefaults(i),t&&i.end(t),i}}),b.prototype.del=b.prototype.delete,v.get=function(e,n,t){var i=v("GET",e);return"function"==typeof n&&(t=n,n=null),n&&i.query(n),t&&i.end(t),i},v.head=function(e,n,t){var i=v("HEAD",e);return"function"==typeof n&&(t=n,n=null),n&&i.query(n),t&&i.end(t),i},v.options=function(e,n,t){var i=v("OPTIONS",e);return"function"==typeof n&&(t=n,n=null),n&&i.send(n),t&&i.end(t),i},v.del=u,v.delete=u,v.patch=function(e,n,t){var i=v("PATCH",e);return"function"==typeof n&&(t=n,n=null),n&&i.send(n),t&&i.end(t),i},v.post=function(e,n,t){var i=v("POST",e);return"function"==typeof n&&(t=n,n=null),n&&i.send(n),t&&i.end(t),i},v.put=function(e,n,t){var i=v("PUT",e);return"function"==typeof n&&(t=n,n=null),n&&i.send(n),t&&i.end(t),i}},function(e,n,t){function i(e){if(e)return a(e)}function a(e){for(var n in i.prototype)e[n]=i.prototype[n];return e}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(n),this},i.prototype.once=function(e,n){function t(){this.off(e,t),n.apply(this,arguments)}return t.fn=n,this.on(e,t),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var t=this._callbacks["$"+e];if(!t)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,a=0;a<t.length;a++)if((i=t[a])===n||i.fn===n){t.splice(a,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var n=[].slice.call(arguments,1),t=this._callbacks["$"+e];if(t){t=t.slice(0);for(var i=0,a=t.length;i<a;++i)t[i].apply(this,n)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,n,t){"use strict";function i(e){if(e)return a(e)}function a(e){for(var n in i.prototype)e[n]=i.prototype[n];return e}var o=t(87);e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var n in e)switch(n){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",n)}return this},i.prototype.retry=function(e,n){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=n,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(e,n){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var t=this._retryCallback(e,n);if(!0===t)return!0;if(!1===t)return!1}catch(e){console.error(e)}if(n&&n.status&&n.status>=500&&501!=n.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,n){if(!this._fullfilledPromise){var t=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,n){t.end(function(t,i){t?n(t):e(i)})})}return this._fullfilledPromise.then(e,n)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,n){if(o(e)){for(var t in e)this.set(t,e[t]);return this}return this._header[e.toLowerCase()]=n,this.header[e]=n,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,n){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),o(e)){for(var t in e)this.field(t,e[t]);return this}if(Array.isArray(n)){for(var i in n)this.field(e,n[i]);return this}if(null===n||void 0===n)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof n&&(n=""+n),this._getFormData().append(e,n),this},i.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},i.prototype._auth=function(e,n,t,i){switch(t.type){case"basic":this.set("Authorization","Basic "+i(e+":"+n));break;case"auto":this.username=e,this.password=n;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},i.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var n=o(e),t=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),n&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(n&&o(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(t||this.type("form"),t=this._header["content-type"],this._data="application/x-www-form-urlencoded"==t?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!n||this._isHost(e)?this:(t||this.type("json"),this)},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var n=this.url.indexOf("?");if(n>=0){var t=this.url.substring(n+1).split("&");"function"==typeof this._sort?t.sort(this._sort):t.sort(),this.url=this.url.substring(0,n)+"?"+t.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(e,n,t){if(!this._aborted){var i=new Error(e+n+"ms exceeded");i.timeout=n,i.code="ECONNABORTED",i.errno=t,this.timedout=!0,this.abort(),this.callback(i)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e,n){"use strict";function t(e){return null!==e&&"object"==typeof e}e.exports=t},function(e,n,t){"use strict";function i(e){if(e)return a(e)}function a(e){for(var n in i.prototype)e[n]=i.prototype[n];return e}var o=t(89);e.exports=i,i.prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var n=e["content-type"]||"";this.type=o.type(n);var t=o.params(n);for(var i in t)this[i]=t[i];this.links={};try{e.link&&(this.links=o.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var n=e/100|0;this.status=this.statusCode=e,this.statusType=n,this.info=1==n,this.ok=2==n,this.redirect=3==n,this.clientError=4==n,this.serverError=5==n,this.error=(4==n||5==n)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,n){"use strict";n.type=function(e){return e.split(/ *; */).shift()},n.params=function(e){return e.split(/ *; */).reduce(function(e,n){var t=n.split(/ *= */),i=t.shift(),a=t.shift();return i&&a&&(e[i]=a),e},{})},n.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,n){var t=n.split(/ *; */),i=t[0].slice(1,-1);return e[t[1].split(/ *= */)[1].slice(1,-1)]=i,e},{})},n.cleanHeader=function(e,n){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,n&&(delete e.authorization,delete e.cookie),e}},function(e,n){function t(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){t.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),t.prototype._setDefaults=function(e){this._defaults.forEach(function(n){e[n.fn].apply(e,n.arguments)})},e.exports=t},,,function(e,n){"use strict";function t(e,n,t){return e.showToast=function(e,t,i){if(!t)var t="";if(!i)var i=3e3;var a=n.simple().toastClass(t).textContent(e).action("Hide").hideDelay(i).position("bottom left").highlightAction(!1);n.show(a),console.debug("showToast ",t,e)},e.randomInt=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},t.showToast=function(n,t,i){e.showToast(n,t,i)},t.safeApply=function(e){if(this.$root){var n=this.$root.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():this.$apply(e)}else this.$apply(e)},e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n,t){var i=t(95);"string"==typeof i&&(i=[[e.id,i,""]]);var a=t(97)(i,{});i.locals&&(e.exports=i.locals),i.locals||e.hot.accept(95,function(){var n=t(95);"string"==typeof n&&(n=[[e.id,n,""]]),a(n)}),e.hot.dispose(function(){a()})},function(e,n,t){n=e.exports=t(96)(!1),
n.push([e.id,"md-list {\n    display: block;\n    padding: 0px 0px 0px 0px;\n}\n\n.list-item-48 {\n    height: 36px;\n    min-height: 36px;\n    font-size: 14px;\n    font-weight: 300;\n}\n\n.red {\n    color: rgb(221, 44, 0);\n}\n\n.paymentResponseContainer {\n    display: block;\n    height: auto;\n    background-color: #fff;\n    overflow-y: auto;\n}\n\n.activityPaymentSummaryCard {\n    margin-bottom: 8px;\n    margin-top: 8px;\n    margin-right: 0;\n    margin-left: 0;\n    background: none;\n    box-shadow: none;\n    position: relative;\n}\n\n.activityPaymentSummaryCardMobile {}\n\n.paymentSummaryCard {\n    min-width: 100%;\n    margin-bottom: 8px;\n    margin-right: 16px;\n    margin-top: 0;\n    background: none;\n    box-shadow: none;\n    height: 100%;\n    padding: 20px;\n}\n\n.paymentSummaryCardLarge {\n    /*min-width: 370px;*/\n    width: 100%;\n    margin-bottom: 0;\n    margin-top: 0;\n    padding-right: 0;\n    padding-left: 0;\n}\n\n.paymentHeader p {\n    color: rgba(0, 0, 0, .8) !important;\n    font-weight: 500;\n    letter-spacing: 0.012em;\n    margin: 0 0 0 0;\n    line-height: 1.6em;\n}\n\n.paymentTitle {\n    font-size: 20px !important;\n}\n\n.paymentSubTitle {\n    font-size: 14px !important;\n    font-weight: 400;\n}\n\n.lineItemIcon {\n    width: 32px;\n    height: 32px;\n    margin: 4px 4px 4px -6px;\n    background: url('https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg') no-repeat;\n    background-position: center;\n    background-size: 28px 28px;\n}\n\n.headerIcon {\n    vertical-align: middle;\n    height: 36px;\n    width: 40px;\n    padding-right: 16px;\n}\n\n.headerIconRight {\n    padding-left: 16px;\n}\n\n.headerIcon svg {\n    position: absolute;\n    top: 24px;\n    bottom: 24px;\n    height: 24px;\n    width: 24px;\n}\n\n.lineItemText {\n    font-size: 14px;\n    font-weight: 500;\n    letter-spacing: 0.010em;\n    margin: 0 0 0 0;\n    line-height: 1.6em;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    color: rgba(0, 0, 0, 0.54) !important;\n}\n\n.lineItemDetail {\n    background: rgba(255, 255, 255, .1);\n}\n\n.lineItemDetail p {\n    font-size: 12px;\n    color: rgba(0, 0, 0, .77);\n    font-weight: 400;\n}\n\n.lineItemHeader p {\n    font-size: 16px;\n    font-weight: 400;\n    letter-spacing: 0.010em;\n    margin: 0 0 0 0;\n    line-height: 50px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    color: rgba(0, 0, 0, 0.82) !important;\n}\n\n.lineItemSubHeader {\n    font-size: 16px;\n    font-weight: 400;\n    margin: 0 0 0 0;\n    line-height: 1.6em;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    color: rgba(0, 0, 0, 0.82) !important;\n}\n\n.lineItemSubDetail {\n    font-size: 12px;\n    font-weight: 500;\n    margin: 0 0 0 0;\n    line-height: 1.6em;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    color: rgba(0, 0, 0, .6);\n}\n\n.lineItemHeader {\n    background: rgba(0, 0, 0, 0);\n    color: rgba(0, 0, 0, .7) !important;\n}\n\n.addOnAdjusters {\n    width: 36px;\n    margin-right: 0;\n}\n\n.addOnQuantityText {\n    border: none;\n    width: 40px;\n    font-weight: 500;\n    text-align: center;\n    font-size: 16px;\n    outline: none;\n}\n\n.guestIcon {\n    width: 32px;\n    height: 32px;\n    margin: 4px 4px 4px -6px;\n    background: url('https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg') no-repeat;\n    background-position: center;\n    background-size: 28px 28px;\n}\n\n.lineItemIconRight {\n    width: 40px;\n    height: 40px;\n    margin: 4px -6px 4px 4px;\n    background: url('https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg') no-repeat;\n    background-position: center;\n    background-size: 28px 28px;\n}\n\n.locationHeader {\n    font-size: 14px !important;\n    letter-spacing: 0.010em;\n    line-height: 20px;\n    color: rgba(0, 0, 0, 0.66) !important;\n}\n\n.total {\n    font-size: 16px;\n    letter-spacing: 0.01em;\n    color: rgba(0, 0, 0, 0.8);\n}\n\n.activityTotal {\n    font-size: 16px;\n    letter-spacing: 0.01em;\n    color: rgba(0, 0, 0, 0.8);\n}\n\n.agentCommission {\n    font-size: 16px;\n    letter-spacing: 0.01em;\n    color: rgba(0, 0, 0, 0.8);\n}\n\n.spacer {\n    margin: 4px;\n    width: 8px;\n}\n\n.darkerDivider {\n    border-top-color: rgba(0, 0, 0, 0.12);\n}\n\n.totalDivider {\n    display: block;\n    border-top-width: 1px;\n}\n\n.lineItemDetailDivider {\n    border-top-color: rgba(0, 0, 0, 0.0);\n}\n\n.paymentSummaryImage {\n    height: 120px;\n    margin: 24px 12px 0 12px;\n    background-position: center center;\n    background-repeat: no-repeat;\n    border-radius: 2px;\n}\n\n.paymentSummaryImageBig {\n    height: 244px;\n    margin: 24px 12px 0 12px;\n    background-position: center center;\n    background-repeat: no-repeat;\n    border-radius: 2px;\n    /*box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .6);*/\n}\n\n.mobileList {\n    height: 100%;\n}\n\n.mobileBottomBar {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n\n.cardForm {\n    margin: 16px 16px 16px 16px;\n}\n\n.addonForm {\n    padding-left: 16px;\n    padding-right: 16px;\n}\n\n.activityCardForm {\n    margin: 0 16px 0 16px;\n}\n\n.paymentHeader._md-button-wrap>div.md-button:first-child {\n    font-size: 22px;\n    /*box-shadow: 0 1px rgba(0, 0, 0, .12);*/\n}\n\n.listIcon {\n    padding: 0 0px 0 0;\n}\n\n.listIconSub {\n    height: 20px;\n    width: 20px;\n    color: rgba(0, 0, 0, .5);\n    fill: rgba(0, 0, 0, .5);\n    outline: none;\n}\n\n.listIconSub svg {\n    height: 20px;\n    width: 20px;\n}\n\n.listIconSub:hover {\n    height: 20px;\n    width: 20px;\n    color: rgba(0, 0, 0, .86);\n    fill: rgba(0, 0, 0, .86);\n    outline: none;\n}\n\n.formButton {\n    margin-right: 0;\n}\n\n.stepStatusRow ng-md-icon svg {\n    height: 16px;\n    margin-top: 1px;\n    vertical-align: top;\n}\n\n\n/*md-list-item:disabled .md-list-item-text,\nmd-list-item[disabled=disabled] .md-list-item-text{\ncolor: #ccc;\n}*/\n\nmd-list-item.addOnListItem {\n    margin-right: -24px;\n    padding-left: 0;\n}\n\nmd-list-item.listItemNotButton {\n    padding: 0 8px !important;\n}\n\n.totalListItem {\n    margin-bottom: 12px;\n}\n\n.listMessage {\n    font-size: 16px;\n    line-height: 1.6em;\n    padding: 0 4px;\n}\n\n.slideDown.ng-hide {\n    height: 0;\n    transition: height 0.35s ease;\n    overflow: hidden;\n    position: relative;\n}\n\n.slideDown {\n    transition: height 0.35s ease;\n    overflow: hidden;\n    position: relative;\n}\n\n.slideDown.ng-hide-remove,\n.slideDown.ng-hide-add {\n    /* remember, the .hg-hide class is added to element\nwhen the active class is added causing it to appear\nas hidden. Therefore set the styling to display=block\nso that the hide animation is visible */\n    display: block!important;\n}\n\n.slideDown.ng-hide-add {\n    animation-name: hide;\n    -webkit-animation-name: hide;\n    animation-duration: .5s;\n    -webkit-animation-duration: .5s;\n    animation-timing-function: ease-in;\n    -webkit-animation-timing-function: ease-in;\n}\n\n.slideDown.ng-hide-remove {\n    animation-name: show;\n    -webkit-animation-name: show;\n    animation-duration: .5s;\n    -webkit-animation-duration: .5s;\n    animation-timing-function: ease-out;\n    -webkit-animation-timing-function: ease-out;\n}\n\n.couponInput {\n    width: 100%;\n    border: none;\n    /* background-color: rgba(0, 0, 0, .08); */\n    /* border-radius: 3px; */\n    padding: 12px;\n    /* width: 100%; */\n    box-shadow: none;\n    margin-left: -12px;\n    line-height: 36px;\n    outline: none;\n}\n\n.remove-coupon {\n    cursor: pointer;\n}\n\n.toUppercase {\n    text-transform: uppercase;\n}\n\n.listItemCircularProgress {\n    /*margin-right: -6px;*/\n}\n\nmd-list-item:hover {\n    background: transparent;\n}\n\nmd-list-item.md-button.md-default-theme:not([disabled]):hover,\n.md-button:not([disabled]):hover {\n    background-color: transparent;\n}\n\n.easeIn.ng-hide-add,\n.easeIn.ng-hide-remove {\n    -webkit-transition: 0.5s ease-in-out opacity;\n    -moz-transition: 0.5s ease-in-out opacity;\n    -ms-transition: 0.5s ease-in-out opacity;\n    -o-transition: 0.5s ease-in-out opacity;\n    transition: 0.5s ease-in-out opacity;\n    opacity: 1;\n}\n\n.easeIn.ng-hide {\n    -webkit-transition: 0s ease-in-out opacity;\n    -moz-transition: 0s ease-in-out opacity;\n    -ms-transition: 0s ease-in-out opacity;\n    -o-transition: 0s ease-in-out opacity;\n    transition: 0s ease-in-out opacity;\n    opacity: 0;\n}\n\n.couponText {\n    margin-left: 16px;\n}\n\n.agentInput {\n    width: 100%;\n    border: none;\n    /* background-color: rgba(0, 0, 0, .08); */\n    /* border-radius: 3px; */\n    padding: 12px;\n    /* width: 100%; */\n    box-shadow: none;\n    margin-left: -12px;\n    line-height: 36px;\n    outline: none;\n}\n\n.remove-agent-code {\n    cursor: pointer;\n}\n\n.md-button[disabled] {\n    pointer-events: none;\n}\n\n.subtotalLineItem {\n    padding: 8px 32px 8px 16px;\n}\n\n.subtotalLineItemSmall {\n    font-size: 12px;\n}\n\n.bottomTotal {\n    font-size: 16px;\n    margin-top: 8px;\n    margin-bottom: 16px;\n    font-weight: 600;\n}\n\n.payzenIframe {\n    border: none;\n    outline: none;\n    width: 100%;\n}\n\n.small-label {\n    font-size: 12px;\n    padding-left: 4px;\n}\n\n.confirmation {\n    padding: 20px 0;\n    text-align: center;\n}\n\n.confirmation h3 {\n    text-align: center;\n    margin-bottom: 20px;\n}\n\n.confirmation .margin-top {\n    margin-top: 8px;\n}\n\n.confirmation .booking-id {\n    padding: 15px;\n    margin: 8px auto;\n    width: 260px;\n    opacity: 0.8;\n    font-weight: bold;\n    color: #fff;\n}\n\nbody[md-theme=blue] .confirmation .booking-id {\n    background: #2196F3;\n}\n\nbody[md-theme=teal] .confirmation .booking-id {\n    background: #009688;\n}\n\nbody[md-theme=green] .confirmation .booking-id {\n    background: #4CAF50;\n}\n\nbody[md-theme=grey] .confirmation .booking-id {\n    background: #9E9E9E;\n}\n\nbody[md-theme=blue-grey] .confirmation .booking-id {\n    background: #607D8B;\n}\n\nbody[md-theme=yellow] .confirmation .booking-id {\n    background: #FFEB3B;\n    color: #000;\n}\n\nbody[md-theme=indigo] .confirmation .booking-id {\n    background: #3F51B5;\n}\n\nbody[md-theme=red] .confirmation .booking-id {\n    background: #F44336;\n}\n\nbody[md-theme=black] .confirmation .booking-id {\n    background: #000000;\n}\n\n@media(max-width: 600px) {\n    .confirmation {\n        padding: 20px;\n        font-size: 13px;\n    }\n    .paymentSummaryCard{\n        margin: 0px;\n    }\n}\n\n.no-margin {\n    margin: 0 !important;\n}\n\n.picker-container {\n    border-radius: 2px;\n    background: white;\n}\n\n.bigDateToolbar {\n    background: white !important;\n    color: black !important;\n}\n\n.activity-dialog-container {\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: center;\n    justify-content: center;\n    -ms-flex-align: center;\n    align-items: center;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 80;\n    overflow: hidden;\n}\n\n.activity-dialog,\nmd-dialog.activity-dialog {\n    max-height: 80%;\n    max-width: 90%;\n    position: relative;\n    overflow: auto;\n    box-shadow: 0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 13px 19px 2px rgba(0, 0, 0, 0.14), 0px 5px 24px 4px rgba(0, 0, 0, 0.12);\n    display: -ms-flexbox;\n    display: flex;\n    overflow-x: hidden;\n    overflow-y: hidden;\n    -ms-flex-direction: column;\n    flex-direction: column;\n}\n\n.activity-dialog,\nmd-dialog md-dialog-content {\n    padding: 0;\n    overflow: hidden;\n}\n\n.no-margin {\n    margin: 0 !important;\n}\n\n.leftCard {\n    background: rgba(0, 0, 0, .025);\n}\n\n.activityBookDialogLarge {\n    width: 840px;\n    min-height: 600px;\n    height: 100%;\n}\n\n.leftCardLarge {\n    border-right: 1px solid #e4e4e4 !important;\n    box-shadow: 1px 0 5px 1px rgba(0, 0, 0, 0.12) !important;\n    min-height: 100%;\n    min-width: 420px;\n    width: 50%;\n    position: absolute;\n    height: 100%;\n    overflow-y: scroll;\n}\n\n.leftCardSmall {\n    border-bottom: 1px solid #e4e4e4 !important;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08) !important;\n}\n\n.rightCardLarge {\n    position: absolute;\n    right: 0;\n    min-width: 420px;\n    width: 50%;\n    display: block;\n    height: 100%;\n}\n\n.activity-total-include {\n    height: 100%;\n}\n\n.couponText {\n    font-size: 16px;\n}\n\n.couponTextTotal {\n    font-size: 16px;\n    padding-right: 12px;\n}\n\n.listItemAutocomplete {\n    padding-left: 0 !important;\n}\n\n.addOnQuantityText {\n    border: none;\n    width: 40px;\n    font-weight: 500;\n    text-align: center;\n    font-size: 16px;\n    margin-right: -8px;\n    outline: none;\n    background: transparent;\n}\n\n.activityPaymentSummaryCard {\n    margin-bottom: 0 !important;\n    margin-top: 0 !important;\n    margin-right: 0;\n    margin-left: 0;\n    background: none;\n    box-shadow: none;\n    position: relative;\n    height: 100%;\n}\n\n.activityCardForm {\n    margin: 0 16px 0 16px;\n}\n\n.detailsForm {\n    padding-left: 16px;\n    padding-right: 16px;\n}\n\n.listItemInputContainer {\n    margin: 24px 16px !important;\n}\n",""])},function(e,n){function t(e,n){var t=e[1]||"",a=e[3];if(!a)return t;if(n&&"function"==typeof btoa){var o=i(a);return[t].concat(a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"})).concat([o]).join("\n")}return[t].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var i=t(n,e);return n[2]?"@media "+n[2]+"{"+i+"}":i}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<e.length;a++){var s=e[a];"number"==typeof s[0]&&i[s[0]]||(t&&!s[2]?s[2]=t:t&&(s[2]="("+s[2]+") and ("+t+")"),n.push(s))}},n}},function(e,n,t){function i(e,n){for(var t=0;t<e.length;t++){var i=e[t],a=g[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(c(i.parts[o],n))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(c(i.parts[o],n));g[i.id]={id:i.id,refs:1,parts:s}}}}function a(e){for(var n=[],t={},i=0;i<e.length;i++){var a=e[i],o=a[0],s=a[1],r=a[2],d=a[3],l={css:s,media:r,sourceMap:d};t[o]?t[o].parts.push(l):n.push(t[o]={id:o,parts:[l]})}return n}function o(e,n){var t=h(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=y[y.length-1];if("top"===e.insertAt)i?i.nextSibling?t.insertBefore(n,i.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),y.push(n);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");t.appendChild(n)}}function s(e){e.parentNode.removeChild(e);var n=y.indexOf(e);n>=0&&y.splice(n,1)}function r(e){var n=document.createElement("style");return e.attrs.type="text/css",l(n,e.attrs),o(e,n),n}function d(e){var n=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(n,e.attrs),o(e,n),n}function l(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function c(e,n){var t,i,a;if(n.singleton){var o=v++;t=b||(b=r(n)),i=u.bind(null,t,o,!1),a=u.bind(null,t,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=d(n),i=p.bind(null,t,n),a=function(){s(t),t.href&&URL.revokeObjectURL(t.href)}):(t=r(n),i=m.bind(null,t),a=function(){s(t)});return i(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;i(e=n)}else a()}}function u(e,n,t,i){var a=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(n,a);else{var o=document.createTextNode(a),s=e.childNodes;s[n]&&e.removeChild(s[n]),s.length?e.insertBefore(o,s[n]):e.appendChild(o)}}function m(e,n){var t=n.css,i=n.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}function p(e,n,t){var i=t.css,a=t.sourceMap,o=void 0===n.convertToAbsoluteUrls&&a;(n.convertToAbsoluteUrls||o)&&(i=x(i)),a&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var s=new Blob([i],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(s),r&&URL.revokeObjectURL(r)}var g={},f=function(e){var n;return function(){return void 0===n&&(n=e.apply(this,arguments)),n}}(function(){return window&&document&&document.all&&!window.atob}),h=function(e){var n={};return function(t){return void 0===n[t]&&(n[t]=e.call(this,t)),n[t]}}(function(e){return document.querySelector(e)}),b=null,v=0,y=[],x=t(98);e.exports=function(e,n){n=n||{},n.attrs="object"==typeof n.attrs?n.attrs:{},void 0===n.singleton&&(n.singleton=f()),void 0===n.insertInto&&(n.insertInto="head"),void 0===n.insertAt&&(n.insertAt="bottom");var t=a(e);return i(t,n),function(e){for(var o=[],s=0;s<t.length;s++){var r=t[s],d=g[r.id];d.refs--,o.push(d)}if(e){i(a(e),n)}for(var s=0;s<o.length;s++){var d=o[s];if(0===d.refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete g[d.id]}}}};var w=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}()},function(e,n){e.exports=function(e){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=n.protocol+"//"+n.host,i=t+n.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,n){var a=n.trim().replace(/^"(.*)"$/,function(e,n){return n}).replace(/^'(.*)'$/,function(e,n){return n});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a))return e;var o;return o=0===a.indexOf("//")?a:0===a.indexOf("/")?t+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(e,n,t){var i=t(100);"string"==typeof i&&(i=[[e.id,i,""]]);var a=t(97)(i,{});i.locals&&(e.exports=i.locals),i.locals||e.hot.accept(100,function(){var n=t(100);"string"==typeof n&&(n=[[e.id,n,""]]),a(n)}),e.hot.dispose(function(){a()})},function(e,n,t){n=e.exports=t(96)(!1),n.push([e.id,".no-margin-top {\n    margin-top: 0 !important;\n}\n\n.no-margin-bottom {\n    margin-bottom: 0 !important;\n}\n\n.no-margin-right {\n    margin-right: 0 !important;\n}\n\n.no-margin-left {\n    margin-left: 0 !important;\n}\n\n.margin-right-30 {\n    margin-right: 30px;\n}\n\n.no-padding {\n    padding: 0 !important;\n}\n\n.green {\n    color: green;\n}",""])},function(e,n,t){var i=t(102);"string"==typeof i&&(i=[[e.id,i,""]]);var a=t(97)(i,{});i.locals&&(e.exports=i.locals),i.locals||e.hot.accept(102,function(){var n=t(102);"string"==typeof n&&(n=[[e.id,n,""]]),a(n)}),e.hot.dispose(function(){a()})},function(e,n,t){n=e.exports=t(96)(!1),n.push([e.id,"/*!\n * Angular Material Design\n * https://github.com/angular/material\n * @license MIT\n * v0.9.7\n */\n\n\n/* mixin definition ; sets LTR and RTL within the same style call */\n\nmd-autocomplete button ng-md-icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate3d(-50%, -50%, 0) scale(0.9);\n    transform: translate3d(-50%, -50%, 0) scale(0.9);\n}\n\nmd-autocomplete button ng-md-icon path {\n    stroke-width: 0;\n}\n\n.md-button.ng-md-icon {\n    padding: 0;\n    background: none;\n}\n\n.md-button.md-fab ng-md-icon {\n    margin-top: 0;\n}\n\nmd-checkbox .ng-md-icon {\n    transition: 240ms;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 18px;\n    height: 18px;\n    border: 2px solid;\n    border-radius: 2px;\n}\n\nmd-checkbox.md-checked .ng-md-icon {\n    border: none;\n}\n\nmd-checkbox.md-checked .ng-md-icon:after {\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    position: absolute;\n    left: 6px;\n    top: 2px;\n    display: table;\n    width: 6px;\n    height: 12px;\n    border: 2px solid;\n    border-top: 0;\n    border-left: 0;\n    content: '';\n}\n\n.md-chips .md-chip .md-chip-remove ng-md-icon {\n    height: 18px;\n    width: 18px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate3d(-50%, -50%, 0);\n    transform: translate3d(-50%, -50%, 0);\n}\n\nng-md-icon {\n    background-repeat: no-repeat no-repeat;\n    display: inline-block;\n    vertical-align: middle;\n    fill: currentColor;\n    height: 24px;\n    width: 24px;\n}\n\nng-md-icon svg {\n    pointer-events: none;\n    display: block;\n}\n\nng-md-icon[md-font-icon] {\n    line-height: 1;\n    width: auto;\n}\n\nmd-input-container>ng-md-icon {\n    position: absolute;\n    top: 5px;\n    left: 2px;\n}\n\nmd-input-container>ng-md-icon+input {\n    margin-left: 36px;\n}\n\nmd-input-container.md-icon-float>ng-md-icon {\n    top: 26px;\n    left: 2px;\n}\n\nmd-input-container.md-icon-float>ng-md-icon+input {\n    margin-left: 36px;\n}\n\n@media screen and (-ms-high-contrast: active) {\n    md-input-container.md-default-theme>ng-md-icon {\n        fill: #fff;\n    }\n}\n\nmd-list-item>div.md-primary>ng-md-icon,\nmd-list-item>div.md-secondary>ng-md-icon,\nmd-list-item>ng-md-icon:first-child,\nmd-list-item>ng-md-icon.md-secondary,\nmd-list-item .md-list-item-inner>div.md-primary>ng-md-icon,\nmd-list-item .md-list-item-inner>div.md-secondary>ng-md-icon,\nmd-list-item .md-list-item-inner>ng-md-icon:first-child,\nmd-list-item .md-list-item-inner>ng-md-icon.md-secondary {\n    width: 24px;\n    margin-top: 16px;\n    margin-bottom: 12px;\n    box-sizing: content-box;\n}\n\nmd-list-item>ng-md-icon:first-child,\nmd-list-item .md-list-item-inner>ng-md-icon:first-child {\n    margin-right: 32px;\n}\n\nmd-list-item.md-2-line>ng-md-icon:first-child,\nmd-list-item.md-2-line>.md-no-style>ng-md-icon:first-child {\n    -webkit-align-self: flex-start;\n    -ms-flex-item-align: start;\n    align-self: flex-start;\n}\n\nmd-list-item.md-3-line>ng-md-icon:first-child,\nmd-list-item.md-3-line>.md-no-style>ng-md-icon:first-child {\n    margin-top: 16px;\n}\n\nmd-tabs-wrapper md-prev-button ng-md-icon,\nmd-tabs-wrapper md-next-button ng-md-icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate3d(-50%, -50%, 0);\n    transform: translate3d(-50%, -50%, 0);\n}\n\nmd-tabs-wrapper md-next-button ng-md-icon {\n    -webkit-transform: translate3d(-50%, -50%, 0) rotate(180deg);\n    transform: translate3d(-50%, -50%, 0) rotate(180deg);\n}",""])},function(e,n){"use strict";function t(e,n){var t=window.Rx;window.moment;e.api={},e.api.activity={get:function(e){return t.Observable.fromPromise(i.find(e||{})).catch(function(e){return console.log("$abl.api.GET ERROR",e),t.Observable.empty()}).select(function(e){return e.list})},find:function(e){return t.Observable.fromPromise(a.find(e||{})).catch(function(e){return console.log("$abl.api.activity.FIND ERROR",e),t.Observable.empty()}).map(function(e){return Object.keys(e).map(function(n){return e[n]})}).select(function(e){var n=new Object;return e[0].forEach(function(e,t){n[e._id]=t}),{data:e[0],total:e[1],keys:n}})}},e.api.timeslots={getRange:function(i){return t.Observable.fromPromise(n({method:"GET",url:e.endpoint+"/timeslots?",data:i,headers:e.headers})).catch(function(e){return console.log("$abl.api.timeslots.GETRANGE ERROR",e),t.Observable.empty()}).select(function(e){return console.log("$abl.api.timeslots.GETRANGE SUCCESS",e),e.data.list})},get:function(i){return t.Observable.fromPromise(n({method:"GET",url:e.endpoint+"/timeslots?id="+i,headers:e.headers})).catch(function(e){return console.log("$abl.api.timeslots.GET ERROR",e),t.Observable.empty()}).select(function(e){return console.log("$abl.api.timeslots.GET SUCCESS",e),e})}};var i=e.service("activities"),a=(e.service("events"),e.service("timeslots"),e.service("search"));e.activitySearchInterval=function(e){return setInterval(function(){a.find({query:{sort:"-updatedAt"}})},e)};var o=e.service("cache");o.get("activities").then(function(e){console.log(e)}).catch(function(e){o.create({id:"activities",data:{},map:[]})});return a.after({all:[],find:[function(e){return function(n){var i=!1;o.get("activities").then(function(a){a.updated=[],t.Observable.fromArray(n.result.data).map(function(e){return e}).filter(function(e){return void 0==a.data[e._id]}).subscribe(function(e){i=!0,a.data[e._id]=e,a.map.push(e._id),a.updated.push(e._id)},function(e){return Promise.resolve(n)},function(){if(i){if(console.log("updateCache",e,a),a.map.length>500)for(var t=0;t<a.map.length-500;t++)delete a.data[a.map[t]],console.log("deleting activity",a.data[a.map[0]]);a.total=n.result.total,o.update("activities",a).then(function(){return console.log("updateCache",e,n),Promise.resolve(n)})}})})}}()]}),e.cache=o,e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(){return{require:"ngModel",link:function(e,n,t,i){var a=function(e){void 0==e&&(e="");var n=e.toUpperCase();return n!==e&&(i.$setViewValue(n),i.$render()),n};i.$parsers.push(a),a(e[t.ngModel])}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(){return{require:"ngModel",restrict:"A",link:function(e,n,t,i,a){n.add(phonenumber).on("keyup",function(){var e=n.val().replace(/[^\w\s]/gi,"");if(10===e.length){var t=e.replace(/(.{3})/g,"$1-"),i=t.slice(0,-2)+t.slice(-1);jQuery("#phonenumber").val(i)}}),console.log("format-phone",e)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(){return{require:"ngModel",link:function(e,n,t,i){console.log(n),console.log(t);var a=$(n[0].parentElement);n.on("focus",function(){console.log(a),a.addClass(t.onFocus)}),n.on("blur",function(){a.removeClass(t.onFocus)})}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(){return{link:function(e,n,t,i){if(console.log(n),console.log(t),t.size){$(n[0].children[0]).addClass(t.size)}}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(e,n){function t(){var t=n.defer();return e.navigator.geolocation?e.navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject()}):t.reject("Geolocation not supported."),t.promise}return{getCurrentPosition:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t,t.$inject=["$window","$q"]},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(110),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o={bindings:{pos:"@",size:"@"},controller:function(e,n){this.$onInit=function(){this.pos||(this.position="start center"),"right"==this.pos?this.position="end center":this.position=this.pos},this.$onChanges=function(e){},this.$postLink=function(){}},template:a.default,transclude:!0,controllerAs:"vm"};n.default=o},function(e,n){e.exports='<div layout="row" layout-align="{{vm.position}}" ng-transclude flex></div>'},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(112),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o={bindings:{loading:"<",class:"@",ngDisabled:"<",spinner:"<",stroke:"@",fill:"@",label:"@"},controller:function(e,n){var t=this;this.$onInit=function(){this.loading&&console.log("progressButton:loading",this.loading),console.log("progressButton disabled",this.ngDisabled)},this.$onChanges=function(e){console.log("progressButton changes ",e),t.disabled=t.ngDisabled},this.$postLink=function(){}},template:a.default,transclude:!0,controllerAs:"vm"};n.default=o},function(e,n){
e.exports='<md-button layout="row" layout-align="center center" class="{{vm.class}}" ng-disabled="vm.loading || vm.disabled">\n    <div layout="row" layout-align="center center">\n        <svg ng-show="vm.loading && vm.spinner == 1" version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            x="0px" y="0px" width="24px" height="24px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n            <path fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z">\n                <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"\n                />\n            </path>\n        </svg>\n\n        <svg ng-show="vm.loading && vm.spinner == 2" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            x="0px" y="0px" width="24px" height="30px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n            <rect x="0" y="0" width="4" height="10" fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}">\n                <animateTransform attributeType="xml" attributeName="transform" type="translate" values="0 0; 0 20; 0 0" begin="0" dur="0.6s"\n                    repeatCount="indefinite" />\n            </rect>\n            <rect x="10" y="0" width="4" height="10" fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}">\n                <animateTransform attributeType="xml" attributeName="transform" type="translate" values="0 0; 0 20; 0 0" begin="0.2s" dur="0.6s"\n                    repeatCount="indefinite" />\n            </rect>\n            <rect x="20" y="0" width="4" height="10" fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}">\n                <animateTransform attributeType="xml" attributeName="transform" type="translate" values="0 0; 0 20; 0 0" begin="0.4s" dur="0.6s"\n                    repeatCount="indefinite" />\n            </rect>\n        </svg>\n\n        <svg ng-show="vm.loading && vm.spinner == 3" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            x="0px" y="0px" width="24px" height="30px" viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n            <rect x="0" y="10" width="4" height="10" fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity="0.2">\n                <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite" />\n                <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite" />\n                <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite" />\n            </rect>\n            <rect x="8" y="10" width="4" height="10" fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity="0.2">\n                <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite"\n                />\n                <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite"\n                />\n                <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" />\n            </rect>\n            <rect x="16" y="10" width="4" height="10" fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity="0.2">\n                <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite"\n                />\n                <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite"\n                />\n                <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" />\n            </rect>\n        </svg>\n\n\n    </div>\n    <span ng-show="!vm.loading">{{vm.label}}</span>\n</md-button>'},function(e,n,t){var i=t(114);"string"==typeof i&&(i=[[e.id,i,""]]);var a=t(97)(i,{});i.locals&&(e.exports=i.locals),i.locals||e.hot.accept(114,function(){var n=t(114);"string"==typeof n&&(n=[[e.id,n,""]]),a(n)}),e.hot.dispose(function(){a()})},function(e,n,t){n=e.exports=t(96)(!1),n.push([e.id,"progress-button {\n    outline: none;\n    margin: 0px 0px !important;\n    pointer-events: auto;\n    cursor: pointer;\n}\n\nprogress-button md-button {\n    pointer-events: auto;\n}",""])},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(116),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o={bindings:{size:"@"},controller:function(e,n){this.$onInit=function(){},this.$onChanges=function(e){},this.$postLink=function(){}},template:a.default,transclude:!0,controllerAs:"vm"};n.default=o},function(e,n){e.exports='<div layout="row" class="listItem" ng-class="[vm.size]" flex="100" ng-transclude>\n</div>'},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(118),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o={restrict:"E",bindings:{value:"=",label:"@",price:"@",max:"@",min:"@ ",size:"@"},template:a.default,controller:function(e){var n=this;this.min=0,this.$onInit=function(){this.elem=$(e[0].children[0]),this.value||(this.value=0)},this.$onChanges=function(e){},this.$postLink=function(){},this.increment=function(){(void 0==this.max||this.max>this.value)&&this.value++},this.decrement=function(){this.value>this.min&&this.value--,console.log("decrementer")},this.checkAdjustValue=function(){n.value>n.max&&(n.value=n.max),n.value<n.min&&(n.value=n.min)}},controllerAs:"vm"};n.default=o},function(e,n){e.exports='<div layout="row" class="listItem" ng-class="[vm.size]" flex="100">\n    <div layout="row" layout-align="start center" flex>\n        <div layout="column" class="">\n            <span class="lineItemSubHeader">{{vm.label}}</span>\n            <div layout="row">\n                <span class="lineItemSubDetail">{{vm.price | ablCurrency: $root.currency}}</span>\n            </div>\n        </div>\n    </div>\n\n    <div layout="row" layout-align="end center">\n        <div layout="column" class="addOnAdjusters" layout-align="center end" flex layout-grow>\n            <ng-md-icon icon="add_circle_outline" class="listIconSub" md-colors="{\'fill\': \'primary-A200\'}" ng-click="vm.increment();">\n            </ng-md-icon>\n            <ng-md-icon icon=" remove_circle_outline" class="listIconSub" ng-click="vm.decrement();"></ng-md-icon>\n        </div>\n        <div layout="column" layout-align="end end">\n            <input class=\'addOnQuantityText\' ng-model="vm.value" ng-change="vm.checkAdjustValue();" type="number" md-select-on-focus></input>\n        </div>\n    </div>\n</div>'},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(120),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t(121);var o={bindings:{add:"<",group:"=",buttonClass:"@"},template:a.default,controller:function(e){this.price=0,this.$onInit=function(){},this.$onChanges=function(e){},this.$postLink=function(){}},controllerAs:"vm"};n.default=o},function(e,n){e.exports='<md-list-item class="addOnListItem">\n    <div layout="row" layout-align="start center" flex>\n        <md-input-container class="buttonInlineInput full-width ">\n            <label>Name</label>\n\n            <input class=\'buttonInlineInput\' ng-model="vm.label"></input>\n        </md-input-container>\n\n    </div>\n\n    <div layout="row" layout-align="end center" flex="20">\n        <md-input-container class="buttonInlineInput full-width">\n            <label>Price</label>\n\n            <input class=\'full-width buttonInlineInput\' md-select-on-focus ng-model="vm.price" type="number" min="0" step="0.01"></input>\n        </md-input-container>\n    </div>\n    <div layout="row">\n        <md-button ng-disabled="!vm.label || !vm.price" ng-class="[vm.buttonClass.length > 0 ? vm.buttonClass : \'md-raised\']" ng-click="vm.add(vm.label, vm.price)">\n            Add\n        </md-button>\n    </div>\n\n</md-list-item>'},function(e,n,t){var i=t(122);"string"==typeof i&&(i=[[e.id,i,""]]);var a=t(97)(i,{});i.locals&&(e.exports=i.locals),i.locals||e.hot.accept(122,function(){var n=t(122);"string"==typeof n&&(n=[[e.id,n,""]]),a(n)}),e.hot.dispose(function(){a()})},function(e,n,t){n=e.exports=t(96)(!1),n.push([e.id,"    .full-width {\n        width: 100%;\n    }\n\n    .text-align-left {\n        text-align: left !important;\n    }\n\n    col-section {\n        width: 100%;\n    }\n\n    md-checkbox.listItemCheckbox .md-label {\n        margin-top: 26px;\n        margin-left: 38px;\n    }\n\n    list-item,\n    list-item-header,\n    list-item-numeric-control {\n        display: block;\n        width: 100%;\n    }\n\n    .listItem {\n        height: 72px;\n        padding: 0 16px;\n        outline: none;\n        border: none;\n        box-shadow: 0 1px 0 0 rgba(0, 0, 0, .05)\n    }\n\n    .listItem md-checkbox .md-container {\n        height: 4px;\n    }\n\n    .listItem.md {\n        min-height: 56px;\n        height: 56px;\n        line-height: 56px;\n        padding: 0 16px;\n        outline: none;\n        border: none;\n        box-shadow: 0 1px 0 0 rgba(0, 0, 0, .05);\n    }\n\n    .lg.slideDown.ng-hide {\n        height: 0 !important;\n        transition: height 0.35s ease;\n        overflow: hidden;\n        position: relative;\n    }\n\n    .lg.slideDown {\n        height: 72px;\n        line-height: 72px;\n        transition: height 0.35s ease;\n        overflow: hidden;\n        position: relative;\n    }\n\n    .lg.slideDown.ng-hide-remove,\n    .lg.slideDown.ng-hide-add {\n        /* remember, the .hg-hide class is added to element\n    when the active class is added causing it to appear\n    as hidden. Therefore set the styling to display=block\n    so that the hide animation is visible */\n        display: block!important;\n    }\n\n    .lg.slideDown.ng-hide-add {\n        animation-name: hide;\n        -webkit-animation-name: hide;\n        animation-duration: .5s;\n        -webkit-animation-duration: .5s;\n        animation-timing-function: ease-in;\n        -webkit-animation-timing-function: ease-in;\n    }\n\n    .lg.slideDown.ng-hide-remove {\n        animation-name: show;\n        -webkit-animation-name: show;\n        animation-duration: .5s;\n        -webkit-animation-duration: .5s;\n        animation-timing-function: ease-out;\n        -webkit-animation-timing-function: ease-out;\n    }\n\n    .listItem.sm {\n        min-height: 36px;\n        height: 36px;\n        line-height: 36px;\n        min-height: 36px;\n        padding: 0 16px;\n        font-size: 12px;\n        outline: none;\n        border: none;\n        box-shadow: 0 1px 0 0 rgba(0, 0, 0, .05);\n    }\n\n    .listItem md-autocomplete input:not(.md-input) {\n        height: 100% !important;\n        line-height: 100% !important;\n        padding: 0;\n    }\n\n    .listItem md-autocomplete md-autocomplete-wrap {\n        box-shadow: none !important;\n        height: 100% !important;\n    }\n\n    .listItem md-autocomplete {\n        padding: 0 !important;\n    }\n\n    .listItemAutoCompleteAfterContainer {\n        margin-top: -20px !important;\n    }\n\n    .listItemFocus {\n        box-shadow: 0 1px 0 rgba(255, 152, 0, 0.4), 0 -1px 0 rgba(255, 152, 0, 0.4), inset 0px 1px 4px rgba(255, 152, 0, 0.2), inset 0px -1px 4px rgba(255, 152, 0, 0.2) !important;\n        background: white;\n    }\n\n    input.buttonInlineInput {\n        /* margin: 0px -16px;*/\n        padding: 0 0 0 0;\n        border-width: 0;\n        -ms-flex-preferred-size: 36px;\n        font-size: inherit;\n        width: 100%;\n        border: none;\n        outline: none;\n        box-sizing: border-box;\n        float: left;\n        background: transparent;\n    }\n\n    .inputStatusIcon {\n        height: 24px;\n        width: 36px;\n        margin-bottom: 42px !important;\n        margin-right: 4px !important;\n    }\n\n    .buttonInlineInput:focus {\n        /* box-shadow: inset 0px 1px 3px rgba(33, 33, 33, 0.3), inset 0px -1px 3px rgba(33, 33, 33, 0.3); */\n    }\n\n    .listItemGreyFocus {\n        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.28), 0 -1px 0 rgba(0, 0, 0, 0.28), inset 0px 1px 4px rgba(0, 0, 0, 0.16), inset 1px -1px 4px rgba(0, 0, 0, 0.2) !important;\n    }\n\n    .listItemGreyFocus input,\n    textarea {\n        color: rgb(63, 81, 181);\n    }\n\n    .listItemGreyFocus ng-md-icon.listItemHeaderIcon {\n        fill: rgb(63, 81, 181);\n    }\n\n    .listItemFocusBottomBorder {\n        box-shadow: 0px 2px 0 rgba(58, 171, 56, 0.92), inset 0 -1px 3px rgba(57, 73, 171, .2), inset 0 1px rgba(0, 0, 0, .1) !important;\n    }\n\n    .listItemFocusBottomBorder input,\n    textarea {\n        color: rgb(0, 0, 0);\n    }\n\n    md-input-container.buttonInlineInput {\n        display: inline-block;\n        position: relative;\n        height: 36px;\n        padding: 5px;\n        margin: 0;\n        vertical-align: middle;\n    }\n\n    .listItemPadding {\n        padding: 0 16px;\n    }\n\n    .listItem.listItemHeader {\n        font-size: 16px;\n        margin: auto;\n        font-weight: 500;\n        cursor: unset;\n        line-height: 72px;\n        font-weight: 500;\n        cursor: unset;\n        color: white;\n    }\n\n    .listItem.listItemHeader.light {\n        color: black;\n        background: #fff;\n    }\n\n    .listItem.listItemHeader.dark {\n        color: white;\n        background: #424242;\n    }\n\n    .listItemHeaderBottomBorder {\n      box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.16), 0px 0px 1px rgba(0, 0, 0, .3);\n    }\n    .listItem .strong {\n        font-weight: 600;\n    }\n\n    .listItem.sm.listItemHeader {\n        font-size: 12px;\n        margin: 0;\n        font-weight: 500;\n        cursor: unset;\n        line-height: 36px;\n    }\n\n    .listItem.md.listItemHeader {\n        font-size: 16px;\n        margin: 0;\n        font-weight: 500;\n        cursor: unset;\n        line-height: 54px;\n    }\n\n    .leftIcon {\n        margin-right: 16px;\n    }\n\n    ng-md-icon.listItemHeaderIcon.lg,\n    ng-md-icon.listItemHeaderIcon.lg svg {\n        margin: auto 0 auto 0;\n        height: 32px;\n        width: 32px;\n    }\n\n    ng-md-icon.listItemHeaderIcon.md,\n    ng-md-icon.listItemHeaderIcon.md svg {\n        margin: auto 0 auto 0;\n        height: 24px;\n        width: 24px;\n    }\n\n    ng-md-icon.listItemHeaderIcon.sm,\n    ng-md-icon.listItemHeaderIcon.sm svg {\n        margin: auto 8px auto 0;\n        height: 16px;\n        width: 16px;\n    }\n\n    .lineItemSubHeader {\n        font-size: 14px;\n        font-weight: 400;\n        padding: 0 16px 0 0;\n        line-height: 1.6em;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        color: rgba(0, 0, 0, 0.92) !important;\n    }\n\n    .autocomplete-custom-template li {\n        border-bottom: 1px solid #ccc;\n        height: auto;\n        padding-top: 8px;\n        padding-bottom: 8px;\n        white-space: normal;\n    }\n\n    .autocomplete-custom-template li:last-child {\n        border-bottom-width: 0;\n    }\n\n    .autocomplete-custom-template .item-title {\n        font-weight: 600;\n    }\n\n    .autocomplete-custom-template .item-title,\n    .autocomplete-custom-template .item-metadata {\n        display: block;\n        line-height: 2;\n    }\n\n    .autocomplete-custom-template .item-title md-icon {\n        height: 18px;\n        width: 18px;\n    }\n",""])},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(124),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o={bindings:{action:"@",actionClick:"=",expanded:"=",title:"@",icon:"@",size:"@"},template:a.default,controller:function(){this.$onInit=function(){this.expanded||(this.expanded=!1)},this.$onChanges=function(e){},this.$postLink=function(){},this.click=function(){console.log("click function"),"expandable"==this.action&&(this.expanded=!this.expanded)}},controllerAs:"vm"};n.default=o},function(e,n){e.exports='<div class="listItem listItemHeader" ng-class="[vm.size]" ng-disabled="!vm.action" ng-click="vm.click()">\n    <div layout="row" flex>\n        <div layout="row" layout-align="start center" flex="80">\n            <ng-md-icon ng-if="vm.icon" icon="{{vm.icon}}" class="headerIcon listIcon"></ng-md-icon>\n            <div class="listItemHeaderText">{{vm.title}}</div>\n        </div>\n\n        <div layout="row" layout-align="end center" flex="20">\n            <div layout="column" layout-align="center end" ng-if="vm.action == \'expandable\'" flex>\n                <ng-md-icon icon="{{vm.expanded ? \'expand_less\' : \'expand_more\'}}" options=\'{"duration": 500, "rotation": "clock", "easing":"linear"}\'\n                    class="listItemHeaderIcon"></ng-md-icon>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),t(126);var a=t(128),o=i(a),s=t(129),r=i(s),d=t(130),l=i(d),c=t(131),u=i(c),m=t(132),p=i(m);n.default=angular.module("activity-book",["ngMaterial","rx"]).run(["$templateCache",function(e){e.put("activity-forms.html",r.default),e.put("activity-book.html",l.default),e.put("activity-total.html",o.default)}]).controller("activityAdjustmentController",p.default).directive("ablActivityBook",["$rootScope","$sce","$compile","$mdMedia","$mdDialog","$mdToast","$log","$window","$timeout","$http","rx","observeOnScope","$stateParams","$state","$filter",function(e,n,t,i,a,o,s,r,d,c,m,p,g,f,h){return{restrict:"E",scope:{book:"=",activity:"=",app:"="},template:l.default,link:function(e,n,t){function i(){e.$digest()}angular.element(r).on("resize",i)},controllerAs:"vm",controller:["$scope","$element","$attrs",function(n,t,l){function b(){return angular.forEach(w.attendees,function(e,n){if(C.attendees[e._id]=[],e.quantity>0)for(var n=0;n<e.quantity;n++)C.attendees[e._id].push(null)}),angular.forEach(w.addons,function(e,n){if(C.addons[e._id]=[],e.quantity>0)for(var n=0;n<e.quantity;n++)C.addons[e._id].push(null)}),C.currency=w.currency.toUpperCase(),C}function v(){w.guestDetailsExpanded=!1,w.attendeesExpanded=!1,w.addonsExpanded=!1,w.questionsExpanded=!1,w.showPaymentForm=!0,w.paymentFormIsLoading=!0,w.stripePaymentExpanded=!0,w.paymentWasSent=!0,this.formWasBlocked=!0,n.bookingSuccessResponse="processing",n.safeApply(),n.makeBooking()}function y(){s.debug("submitNonCreditCardBooking",this.pricing.total);var t=w.getBookingData();t.stripeToken&&delete t.stripeToken,t.location={},t.isMobile=!1,w.paymentWasSent=!0,n.bookingSuccessResponse="processing",Raven&&Raven.captureMessage("Submit Booking",{level:"info",extra:{bookingData:t},tags:{step:"pay-non-cc"}}),c({method:"POST",url:k.FEATHERS_URL+"/bookings",data:t,headers:T}).then(function(t){s.debug("submitNonCreditCardBooking success",t),n.bookingSuccessResponse=t,w.waitingForResponse=!1,e.$emit("paymentResponse"),x(t)},function(n){document.getElementById("card-errors").textContent=n.data.errors[0],w.paymentWasSent=!1,e.$emit("paymentResponse"),w.waitingForResponse=!1})}function x(e){200===e.status&&(n.paymentResponse="success",n.paymentSuccessful=!0,Raven&&Raven.captureMessage("Booking Suceeded",{level:"info",extra:{response:e},tags:{step:"pay-non-cc"}}),n.safeApply()),n.bookingSuccessResponse=e,n.$emit("paymentResponse",e),console.log("paymentResponse",e)}var w=this;this.formWasBlocked=!1,this.guestDetailsExpanded=!0,this.attendeesExpanded=!1,this.addonsExpanded=!1,this.questionsExpanded=!1,this.stripePaymentExpanded=!1,this.stripeCardIsValid=!1,this.paymentExpanded=!1,this.showPaymentForm=!1,this.paymentFormIsLoading=!1,this.paymentWasSent=!1,this.waitingForResponse=!1,this.validStepsForPayment={guest:!1,attendees:!1},this.couponStatus="untouched",this.appliedCoupon={},this.couponQuery="",this.occupancyRemaining=0,this.agentCodeStatus="untouched",this.appliedAgentCode={},this.agentCodeQuery="",this.attendeeSubtotals=[],this.addonSubtotals=[],w.taxes=[],w.taxTotal=0,w.addons=[],w.questions=[],w.goToPay=v,w.submitNonCreditCardBooking=y,n.sendConfirmationEmail=!0;var k=e.config,T={};k.DASHBOARD?n.dashboard=!0:(T=k.MARKETPLACE?{"x-abl-access-key":k.ABL_ACCESS_KEY,"x-abl-date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"}:{"x-abl-access-key":g.merchant||"tLVVsHUlBAweKP2ZOofhRBCFFP54hX9CfmQ9EsDlyLfN6DYHY5k8VzpuiUxjNO5L","x-abl-date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"},w.validStepsForPayment.bookingQuestions=!1),s.debug("abl-activity-book $scope",n),w.currency=e.currency,n.$watch(function(){return e.currency},function(e,n){e&&(s.debug("$scope.$watch:$rootScope.currency",e),w.currency=e.toLowerCase())}),n.$on("currency-updated",function(e,n){s.debug("ablActivityBook:currency-updated",n),w.getPricingQuote(n.currency)}),Raven&&Raven.captureMessage("Add Booking",{level:"info",tags:{step:"opened"}}),n.formatDate=function(e,n){return window.moment(e).format(n)},n.paymentResponse="",n.paymentSuccessful=!1,this.goToNextStep=function(e,t){switch(e){case"guestDetailsStep":w.toggleGuestDetails(),w.toggleAttendees();break;case"attendeesStep":w.countAttendeesAdded()>0&&(w.addons.length>0?(w.attendeesExpanded=!1,w.addonsExpanded=!0):w.questions.length>0?(w.attendeesExpanded=!1,w.questionsExpanded=!0):(w.attendeesExpanded=!1,w.stripePaymentExpanded=!0,n.dashboard||(s.debug("no questions, goToPay"),w.goToPay())));break;case"addonsStep":w.addons&&w.addons.length>0&&w.countAttendeesAdded()&&(w.questions.length>0?(w.addonsExpanded=!1,w.questionsExpanded=!0):(w.addonsExpanded=!1,w.stripePaymentExpanded=!0,n.dashboard||(s.debug("no questions, goToPay"),w.goToPay())));break;case"paymentStep":s.debug("goToNextStep:paymentStep",w.isPaymentValid()),w.isPaymentValid()&&(w.guestDetailsExpanded=!1,w.attendeesExpanded=!1,w.addonsExpanded=!1,w.questionsExpanded=!1,w.stripePaymentExpanded=!0,n.dashboard||w.goToPay())}},w.guestDetailsFormValid=!1,this.toggleGuestDetails=function(){this.guestDetailsExpanded=!this.formWasBlocked&&!this.guestDetailsExpanded},this.togglePayment=function(){this.paymentExpanded=!this.paymentExpanded},this.returnToMainPage=function(){e.config.DASHBOARD?(a.hide(),f.reload()):(a.hide(),f.go("home",{merchant:g.merchant}))},this.pricing={total:0},this.taxTotal,this.addonTotal,this.attendeeTotal=0,n.bookingSucceeded=!1,n.$mdMedia=i,n.screenIsBig=function(){return angular.element(r)[0].innerWidth>742},n.addBookingController=n.$parent,w.addBookingController=n.addBookingController,s.debug("addBookingController:initialize",n.addBookingController),n.addBookingController.timeslot.charges.forEach(function(e){e.quantity=0}),this.toggleQuestions=function(){this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded},this.adjustAddon=function(e,t){"up"==t&&w.addons[e].quantity++,"down"==t&&w.addons[e].quantity>0&&w.addons[e].quantity--,n.safeApply(),s.debug("adjust addons",w.addons),w.getPricingQuote()},this.toggleAddons=function(){w.addons.length<1?this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded:this.addonsExpanded=!this.formWasBlocked&&!this.addonsExpanded},this.toggleStripePay=function(){this.paymentExpanded=!this.paymentExpanded},this.togglePay=function(){this.payButtonEnabled=!this.payButtonEnabled},this.adjustAttendee=function(e,t){"up"==t&&(w.countAttendees()>0||n.dashboard)&&w.attendees[e].quantity++,"down"==t&&w.attendees[e].quantity>0&&w.attendees[e].quantity--,w.getPricingQuote(),w.countAttendees()},this.toggleAttendees=function(){this.attendeesExpanded=!this.formWasBlocked&&!this.attendeesExpanded},this.checkAdjustAttendee=function(e){!n.dashboard&&w.attendees[e].quantity>w.countAttendees()&&(w.attendees[e].quantity=0,w.attendees[e].quantity=w.countAttendees()),w.attendees[e].quantity<0&&(w.attendees[e].quantity=0),w.getPricingQuote(),w.countAttendees(),n.safeApply(),s.debug("attendees added",w.countAttendees(),w.attendees[e].quantity)};var C={attendees:{},addons:{}};w.getPricingQuote=function(e){var n=b();c({method:"POST",url:k.FEATHERS_URL+"/pricing-quotes",data:n,headers:T}).then(function(n){w.pricing=n.data,w.pricing.couponDeduction=w.pricing.items.filter(function(e){return"coupon"==e.type}),w.pricing.agentCommission=w.pricing.items.filter(function(e){return"agent_commission"==e.type}).reduce(function(e,n){return e+(n.price.amount||n.price.price)*n.quantity},0);var t=n.data.items.filter(function(e){return"addon"==e.type});w.addonTotal=0,w.addonSubtotals=[];var i={};angular.forEach(t,function(e,n){var t=e.type+e.name.replace(" ","");i[t]||(i[t]={addons:[]}),i[t].addons.push(e)}),angular.forEach(i,function(e,n){var t={name:e.addons[0].name,price:e.addons[0].amount||e.addons[0].price,amount:(e.addons[0].amount||e.addons[0].price)*e.addons[0].quantity,quantity:e.addons[0].quantity};w.addonTotal+=(e.addons[0].amount||e.addons[0].price)*e.addons[0].quantity,w.addonSubtotals.push(t)}),w.attendeeTotal=n.data.items.filter(function(e){return"aap"==e.type}).reduce(function(e,n){return angular.isDefined(n.amount)&&n.amount>-1?e+n.amount*n.quantity:e+n.price*n.quantity},0);var a=n.data.items.filter(function(e){return"aap"==e.type});w.attendeeSubtotals=[];var o={};angular.forEach(a,function(e,n){var t=e.type+e.name.replace(" ","");o[t]||(o[t]={aaps:[]}),o[t].aaps.push(e)}),angular.forEach(o,function(e,n){var t={name:e.aaps[0].name,amount:e.aaps[0].amount*e.aaps[0].quantity,quantity:e.aaps[0].quantity};angular.isDefined(e.aaps[0].amount)?t.price=e.aaps[0].amount:t.price=e.aaps[0].price,w.attendeeSubtotals.push(t)}),w.taxTotal=n.data.items.filter(function(e){return"tax"==e.type||"fee"==e.type||"service"==e.type}).reduce(function(e,n){return s.debug("reduce.vm.taxTotal",n),angular.isDefined(n.price.amount)?e+n.price.amount*n.quantity:e+n.price.price*n.quantity},0),s.debug("getPricingQuotes",n),s.debug("vm.attendeeSubtotal",w.attendeeSubtotals),s.debug("vm.taxTotal",w.taxTotal),0==w.pricing.total&&"credit"==w.paymentMethod&&(w.paymentMethod="cash"),e&&(w.currency=e)},function(e){w.pricing={},w.taxTotal=0,o.show(o.simple().textContent(e.data.errors[0]).position("left bottom").hideDelay(3e3))})},w.getPossibleCoupons=function(){c({method:"GET",url:k.FEATHERS_URL+"/coupons?bookingId="+w.couponQuery,headers:T}).then(function(e){w.possibleCoupons=e.data,s.debug("getPossibleCoupons success",e)},function(e){w.possibleCoupons=[]})},w.clients=[],p(n,"vm.formData.fullName").map(function(e){return e}).subscribe(function(e){s.debug("clientSearchText ",e.newValue),n.dashboard&&(w.clients=c({method:"GET",url:k.FEATHERS_URL+"/clients?fullName="+e.newValue,headers:T}).then(function(e){return s.debug("clientSearch success",e),e.data.list},function(e){return s.debug("clientSearch error!",e),[]}))}),w.selectedClientChange=function(e){e&&(w.formData.fullName=e.primaryContact.fullName||"",w.formData.mail=e.primaryContact.email||"",w.formData.phoneNumber=e.primaryContact.phoneNumber||"",s.debug("selectedClientChange",e))},n.autocomplete={},w.couponStatus="untouched",n.autocomplete.searchTextChange=function(e){e||C.couponId&&delete C.couponId},n.autocomplete.selectedItemChange=function(e){s.debug("applied coupon",e),e?(w.appliedCoupon=e,C.couponId=e.couponId,w.validateCoupon(w.appliedCoupon),w.couponStatus="valid",w.getPricingQuote(),w.checkingCoupon=!1):(w.appliedCoupon=void 0,w.couponStatus="untouched",C.couponId&&delete C.couponId)};var I=!1;w.coupons=[],n.autocomplete.querySearch=function(e){if(n.dashboard)return e=e.toUpperCase(),I||1===e.length?this:(I=!0,d(function(){return c({method:"GET",url:k.FEATHERS_URL+"/coupons?couponId="+e,headers:T}).then(function(e){return I=!1,w.coupons=e.data.list,w.coupons},function(e){return I=!1,[]})},100))},w.checkCoupon=function(){w.checkingCoupon=!0,c({method:"GET",url:k.FEATHERS_URL+"/coupons/"+w.couponQuery,headers:T}).then(function(e){s.debug("checkCoupon success",e),C.couponId=e.data.couponId,w.appliedCoupon=e.data,s.debug("applied coupon",w.appliedCoupon),w.validateCoupon(w.appliedCoupon),w.couponStatus="valid",w.getPricingQuote(),w.checkingCoupon=!1},function(e){delete C.couponId,w.couponStatus="invalid",w.appliedCoupon={},w.checkingCoupon=!1})},w.removeCoupon=function(){w.couponQuery="",delete C.couponId,n.autocomplete.selectedItem=void 0,w.couponStatus="untouched",w.appliedCoupon={},w.getPricingQuote()},w.pricingInformation=function(e){s.debug("pricingInformation",e)};var _=window.moment;w.validateCoupon=function(e){_();return!(!_(e.endTime).isAfter(_())||0!=e.maxRedemptions)||(!!(e.maxRedemptions>0&&_(e.endTime).isAfter(_())&&e.maxRedemptions-e.redemptions>=0)||(w.couponStatus="invalid",!1))},w.appliedCouponType=function(n){if(n)return n.percentage?n.amount+"%":h("ablCurrency")(n.amount,e.currency)},w.bookingQuestionsCompleted=function(){var e=0;return w.bookingQuestions?angular.forEach(w.bookingQuestions,function(n,t){n.length>0&&e++}):e=0,e},p(n,"vm.couponQuery").debounce(500).select(function(e){return e}).subscribe(function(e){w.couponQuery.length>0&&w.checkCoupon()}),n.agentAutocomplete={},w.agentCodeStatus="untouched",n.agentAutocomplete.searchTextChange=function(e){console.log("SEARCH TEXT",e)},n.agentAutocomplete.selectedItemChange=function(e){console.log("applied agent",e),e?(w.appliedAgentCode=e,C.agentCode=e.code,w.validateAgent(w.appliedAgentCode),w.agentCodeStatus="valid",w.getPricingQuote(),w.checkingAgentCode=!1):(w.appliedAgentCode=void 0,w.agentCodeStatus="untouched",C.agentCode&&delete C.agentCode)},n.agentAutocomplete.querySearch=function(e){return e=e||".",c({method:"GET",url:k.FEATHERS_URL+"/operators/"+n.orgId+"/agents?partialMatch=true&code="+e,headers:T}).then(function(e){return e.data},function(e){return[]})},w.checkAgentCode=function(){w.checkingAgentCode=!0,c({method:"GET",url:k.FEATHERS_URL+"/operators/"+n.orgId+"/agents?code="+w.agentCodeQuery,headers:T}).then(function(e){if(console.log("checkAgentCode success",e),e.data&&0==e.data.length)return delete C.agentCode,w.agentCodeStatus="invalid",w.appliedAgentCode={},void(w.checkingAgentCode=!1);C.agentCode=e.data[0].code,w.appliedAgentCode=e.data[0],console.log("applied agent code",w.appliedAgentCode),w.validateAgent(w.appliedAgentCode),w.agentCodeStatus="valid",w.getPricingQuote(),w.checkingAgentCode=!1},function(e){delete C.agentCode,w.agentCodeStatus="invalid",w.appliedAgentCode={},w.checkingAgentCode=!1})},w.removeAgentCode=function(){w.agentCodeQuery="",delete C.agentCode,n.agentAutocomplete.selectedItem=void 0,w.agentCodeStatus="untouched",w.appliedAgentCode={},w.getPricingQuote()},w.validateAgent=function(e){return e.active?(console.log("agent active"),!0):(w.agentCodeStatus="invalid",!1)},p(n,"vm.agentCodeQuery").debounce(500).select(function(e){return e}).subscribe(function(e){w.agentCodeQuery.length>0&&w.checkAgentCode()}),(0,u.default)(w,m,c,g),n.$watch("addBookingController.activity",function(e){s.debug("addBookingController.activity",e),angular.isDefined(n.addBookingController.activity)&&(n.orgId=n.addBookingController.activity.operator||n.addBookingController.activity.organizations[0],w.questions=n.addBookingController.activity.questions||[],w.questions||delete w.validStepsForPayment.bookingQuestions,w.addons=n.addBookingController.activity.charges.filter(function(e){return"addon"==e.type&&"active"==e.status}),w.addons||delete w.validStepsForPayment.addons,w.addons.forEach(function(e,n){angular.isDefined(e.quantity)||(e.quantity=0)}),
w.taxes=n.addBookingController.activity.charges.filter(function(e){return"tax"==e.type}),n.safeApply())},!0),n.$watch("addBookingController.timeslot",function(e){angular.isDefined(n.addBookingController.timeslot)&&angular.isDefined(n.addBookingController.event)&&(angular.isDefined(n.addBookingController.timeslot.charges)&&(w.attendees=n.addBookingController.timeslot.charges.filter(function(e){return"aap"==e.type&&"active"==e.status}),w.attendees.forEach(function(e,n){angular.isDefined(e.quantity)||(e.quantity=0)})),C.timeSlotId=n.addBookingController.timeslot._id,C.startTime=n.addBookingController.event.startTime)},!0),n.$watch("addBookingController.preferences",function(e){var t=n.addBookingController.preferences;n.agentsIsOn=!(!t||!t.features)&&t.features.agents},!0),w.countAttendees=function(){var e=0;return n.addBookingController.event&&(e=w.attendees?(n.addBookingController.event.maxOcc?n.addBookingController.event.maxOcc:n.addBookingController.timeslot.maxOcc)-w.attendees.map(function(e){return e.quantity}).reduce(function(e,n){return e+n},0)-n.addBookingController.event.attendees:0),e},w.countAttendeesAdded=function(){var e=0;return n.addBookingController.event&&w.attendees&&(e=w.attendees.map(function(e){return e.quantity}).reduce(function(e,n){return e+n},0)),e},w.countAddonsAdded=function(){return n.addBookingController.event&&w.addons?w.addons.map(function(e){return e.quantity}).reduce(function(e,n){return e+n},0):0},w.addonsChanged=function(){n.safeApply(),s.debug("addonsChanged"),d(function(){w.getPricingQuote()},0)},this.areGuestDetailsValid=function(e){return e?(w.guestDetailsAreValid=e.$valid,w.validStepsForPayment.guest=w.guestDetailsAreValid):w.guestDetailsAreValid=!1,w.guestDetailsAreValid},this.areAttendeesValid=function(){return w.validStepsForPayment.attendees=0!==w.countAttendeesAdded(),0!==w.countAttendeesAdded()},this.areAddonsValid=function(){return null!=w.validStepsForPayment.addons&&(w.validStepsForPayment.addons=!0),0!==w.countAddonsAdded()},this.areBookingQuestionsValid=function(){return null!=w.validStepsForPayment.bookingQuestions&&(w.validStepsForPayment.bookingQuestions=w.bookingQuestionsCompleted()===w.questions.length),s.debug("areBookingQuestionsValid ",w.validStepsForPayment.bookingQuestions),w.validStepsForPayment.bookingQuestions},this.isPaymentValid=function(){var e=[];return angular.forEach(w.validStepsForPayment,function(n,t){n||e.push(n)}),!(e.length>0)},this.isNextStepPayment=function(e){return"attendees"===e?!(!w.addons&&!w.questions)&&!(!w.addons&&!w.questions):"addons"===e?!!w.questions&&!!w.questions:"payment"===e||void 0},w.paymentMethod="credit",w.bookingQuestions=[],w.getBookingData=function(){var e=angular.copy(C);return"reserved"==w.paymentMethod&&(e.amount=0),e.eventInstanceId=n.addBookingController.event.eventInstanceId||n.addBookingController.event,e.answers={},e.sendConfirmationEmail=n.sendConfirmationEmail,e.skipConfirmation=!n.sendConfirmationEmail,e.email=w.formData.mail,e.phoneNumber=w.formData.phoneNumber,e.fullName=w.formData.fullName,e.notes=w.formData.notes,e.skipConfirmation=!1,e.operator=n.addBookingController.event.operator||n.addBookingController.event.organizations[0]||n.addBookingController.activity.operator||n.addBookingController.activity.organizations[0],angular.forEach(w.questions,function(n,t){s.debug("vm.questions",w.questions),s.debug("vm.bookingQuestions",w.bookingQuestions),e.answers[n._id?n._id:n]=w.bookingQuestions[t]}),"reserved"!=w.paymentMethod?e.paymentMethod=w.paymentMethod:e.paymentMethod="cash","reserved"==w.paymentMethod&&(e.amount=0),e.currency="default",e},w.outputBookingData=function(){s.debug(w.getBookingData())},n.safeApply=function(e){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():this.$apply(e)},n.makeBooking=function(e){w.paymentExpanded=!0,w.loadingIframe=!0;var t=w.getBookingData();Raven&&Raven.captureMessage("Submit Booking",{level:"info",extra:{bookingData:t},tags:{step:"pay-cc"}}),s.debug("$scope.makeBooking",e),n.bookingResponse=c({method:"POST",url:k.FEATHERS_URL+"/bookings",data:t,headers:T}).then(function(e){s.debug("makeBooking success",e),w.loadingIframe=!1,n.paymentSuccessful=!1,n.bookingSuccessResponse=e,w.paymentFormIsLoading=!1;var t=document.getElementById("paymentIframe");t.style.display="block";var i=t.contentWindow.document;i.open(),i.write(e.data.iframeHtml),i.close(),n.bookingSucceeded=!0,Raven&&Raven.captureMessage("Booking Succeeded",{level:"info",extra:{response:e.data},tags:{step:"pay-cc"}})},function(e){a.hide(),w.loadingIframe=!1,w.paymentFormIsLoading=!1,w.paymentExpanded=!1,n.bookingSucceeded=!1,Raven&&Raven.captureMessage("Booking Error",{level:"error",extra:{response:e.data},tags:{step:"pay-cc"}}),o.show(o.simple().textContent(e.data.errors[0]).position("left bottom").hideDelay(3e3)),s.debug("makeBooking error!",e)})};var A;A=function(t){s.debug("DATA",t.data),"payment_complete"==t.data||"payment_success"==t.data.type?(s.debug("PAYMENT COMPLETE"),n.paymentResponse="success",e.$broadcast("paymentWithResponse",{response:t.data}),window.removeEventListener("message",A),n.paymentSuccessful=!0,n.safeApply()):-1===t.data.indexOf("setImmediate")&&(Raven&&Raven.captureMessage("Booking Payment Error",{level:"error",extra:{paymentMessageHandler:t.data},tags:{step:"pay-non-cc"}}),n.paymentSuccessful=!1,n.paymentResponse="",w.showPaymentForm=!0,n.safeApply())},s.debug("Adding Payment Message Event Listener"),window.addEventListener("message",A),n.safeApply=function(e){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():this.$apply(e)}}]}}]).filter("imageService",function(){return function(e){return e.replace(/(.png|.jpg|.jpeg)/i,"-small$1")}})},function(e,n,t){var i=t(127);"string"==typeof i&&(i=[[e.id,i,""]]);var a=t(97)(i,{});i.locals&&(e.exports=i.locals),i.locals||e.hot.accept(127,function(){var n=t(127);"string"==typeof n&&(n=[[e.id,n,""]]),a(n)}),e.hot.dispose(function(){a()})},function(e,n,t){n=e.exports=t(96)(!1),n.push([e.id,"#paymentIframe {\n    margin: 0;\n    padding: 8px 8px;\n    border: none;\n    min-height: 330px;\n    height: 100%;\n    overflow-y: hidden;\n    width: 100%;\n    display: none;\n}\n\nabl-activity-book md-card {\n    box-shadow: none !important;\n    border: none !important;\n    background: transparent;\n}\n\n.inputBottomMargin {\n    margin-bottom: 42px !important;\n}\n\n.transparent {\n    background-color: transparent !important;\n}\n\nlist-item {\n    display: block !important;\n}\n\n.payment-section {\n  margin-bottom: 54px;\n}\n",""])},function(e,n){e.exports='<md-card class="paymentSummaryCard" ng-show="paymentResponse != \'success\'">\n\n  <md-list flex>\n    \n    <md-list-item ng-if="!dashboard" class="lineItemHeader" ng-click="null">\n      <div class="md-list-item-text" layout="column">\n        <h4 style="margin-top:8px;line-height:1.6em">{{vm.addBookingController.timeslot.title}}</h4>\n        <p style="white-space:normal;overflow:auto;line-height:1.6em">{{vm.addBookingController.timeslot.startTime | date : \'EEEE MMMM d, yyyy\'}} - {{vm.addBookingController.timeslot.startTime | date : \'HH:mma\'}} - {{vm.addBookingController.timeslot.endTime | date : \'HH:mma\'}}</p>\n      </div>\n    </md-list-item>\n\n    <md-list-item class="lineItemHeader" ng-if="vm.base" ng-click="null">\n      <div class="md-list-item-text " layout="row" flex>\n        <div layout="row" layout-align="start center" flex="50">\n          <p class="">Base Price </p>\n        </div>\n        <div layout="row" layout-align="end center" flex="50">\n          <p>\n            <abl-currency-directive price="vm.base()" currency="{{vm.currency}}"></abl-currency-directive> {{$parent.currency | uppercase}}</p>\n        </div>\n      </div>\n    </md-list-item>\n\n    \x3c!--Coupons--\x3e\n\n    <md-list-item class="paymentHeader md-2-line md-primary" ng-disabled="detailsForm.$invalid" ng-show="vm.couponStatus == \'valid\'">\n      <div layout="row" class="md-list-item-text" flex>\n        <div layout="row" layout-align="start center" flex>\n          \x3c!-- <ng-md-icon class="headerIcon" icon="local_offer" class="listIcon" ng-if="vm.couponStatus !=\'valid\'"></ng-md-icon> --\x3e\n          <div layout="column" layout-align="center start">\n            <ng-md-icon icon="clear" class="listIcon remove-coupon" ng-click="vm.removeCoupon();" ng-if="vm.couponStatus ==\'valid\'"></ng-md-icon>\n          </div>\n          <span class="couponText total" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCouponType(vm.appliedCoupon)}} Off</span>\n\n        </div>\n        <div layout="row" layout-align="end center">\n          <span class="couponTextTotal" ng-if="vm.pricing.couponDeduction[0]">-<abl-currency-directive price="(-1 * vm.pricing.couponDeduction[0].price.amount)" currency="{{vm.currency}}"></abl-currency-directive></span>\n          <md-progress-circular md-mode="indeterminate" ng-show="vm.checkingCoupon && vm.couponQuery.length > 0" class="listItemCircularProgress easeIn" md-diameter="24px">\n          </md-progress-circular>\n        </div>\n      </div>\n    </md-list-item>\n    <list-item size="lg" class="listItemAutocomplete" ng-show="vm.couponStatus == \'untouched\' || vm.couponStatus ==\'invalid\'">\n      <md-autocomplete md-selected-item="autocomplete.selectedItem" md-search-text-change="autocomplete.searchTextChange(autocomplete.searchText)" md-search-text="autocomplete.searchText" md-no-cache="true" md-selected-item-change="autocomplete.selectedItemChange(item)"\n        md-items="item in autocomplete.querySearch(autocomplete.searchText)" md-item-text="item.couponId" md-min-length="0" placeholder="{{dashboard ? \'Search coupons..\' : \'Enter a coupon..\'}}" class="listItem" ng-if="dashboard">\n        <md-item-template>\n          <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.couponId}}</span>\n          <span>{{vm.appliedCouponType(item)}}</span>\n        </md-item-template>\n        <md-not-found>\n          No coupons found{{autocomplete.searchText.length > 0 ? (\' matching"\' + autocomplete.searchText + \'".\') : \'.\'}}\n        </md-not-found>\n      </md-autocomplete>\n      <span class="paymentSubTitle total">\n        <input id="#coupon" ng-model="vm.couponQuery" type="text" class="couponInput" ng-if="(vm.couponStatus ==\'untouched\' || vm.couponStatus ==\'invalid\') && !dashboard" ng-change="vm.checkingCoupon = true" placeholder="Enter coupon.." to-uppercase/>\n        </span>\n    </list-item>\n    <md-list-item ng-show="vm.couponStatus ==\'invalid\' && vm.couponQuery.length > 0 && !vm.checkingCoupon" class="paymentHeader md-2-line md-primary easeIn" ng-if="!dashboard">\n      <div layout="row" class="md-list-item-text" flex>\n        <div layout="row" layout-align="start center" flex>\n          <ng-md-icon class="headerIcon" icon="error_outline" class="listIcon" ng-if="vm.couponStatus !=\'valid\'" style="fill: rgba(255,87,87,0.8)"></ng-md-icon>\n          <span class="paymentSubTitle total">\n            Invalid Coupon\n          </span>\n        </div>\n        <div layout="row" layout-align="end center" flex>\n          <ng-md-icon icon="clear" class="listIcon" ng-click="vm.couponQuery = \'\';"></ng-md-icon>\n        </div>\n      </div>\n    </md-list-item>\n\n    \x3c!-- BEGIN: Agent Code --\x3e\n\n    <md-list-item ng-if="agentsIsOn" class="paymentHeader md-2-line md-primary" ng-disabled="detailsForm.$invalid" ng-show="vm.agentCodeStatus == \'valid\'"> \n      <div layout="row" class="md-list-item-text " flex>\n        <div layout="row" layout-align="start center" flex>\n          <span class="agentCodeText total" flex> <b>Agent Code: </b> {{vm.appliedAgentCode.code}} </span>\n          <ng-md-icon icon="clear" class="listIcon remove-agent-code" ng-click="vm.removeAgentCode();" ng-if="vm.agentCodeStatus ==\'valid\'"></ng-md-icon>\n        </div>\n        <div layout="row " layout-align="end center ">\n          <md-progress-circular md-mode="indeterminate" ng-show="vm.checkingAgentCode && vm.agentCodeQuery.length > 0" class="listItemCircularProgress easeIn"\n            md-diameter="24px">\n          </md-progress-circular>\n        </div>\n      </div>\n    </md-list-item>\n\n    <list-item ng-if="agentsIsOn" size="lg" class="listItemAutocomplete" ng-show="vm.agentCodeStatus == \'untouched\' || vm.agentCodeStatus == \'invalid\'">\n      <md-autocomplete md-selected-item="agentAutocomplete.selectedItem" md-search-text-change="agentAutocomplete.searchTextChange(agentAutocomplete.searchText)"\n        md-search-text="agentAutocomplete.searchText" md-no-cache="true" md-selected-item-change="agentAutocomplete.selectedItemChange(item)"\n        md-items="item in agentAutocomplete.querySearch(agentAutocomplete.searchText)" md-item-text="item.code" md-min-length="0"\n        placeholder="Agent Code" class="listItem" ng-if="dashboard">\n        <md-item-template>\n          <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.code}}</span>\n        </md-item-template>\n        <md-not-found>\n          Agent code not found{{agentAutocomplete.searchText.length > 0 ? (\' matching "\' + agentAutocomplete.searchText + \'".\') : \'.\'}}\n        </md-not-found>\n      </md-autocomplete>\n      <span class="paymentSubTitle total">\n        <input id="#agentCode" ng-model="vm.agentCodeQuery" type="text" class="agentInput" ng-if="(vm.agentCodeStatus ==\'untouched\' || vm.agentCodeStatus == \'invalid\') && !dashboard" ng-change="vm.checkingAgentCode = true" placeholder="Enter agent code.."/>\n        </span>\n    </list-item>\n\n    <md-list-item ng-show="vm.agentCodeStatus ==\'invalid\' && vm.agentCodeQuery.length > 0 && !vm.checkingAgentCode" class="paymentHeader md-2-line md-primary easeIn" ng-if="!dashboard">\n      <div layout="row" class="md-list-item-text" flex>\n        <div layout="row" layout-align="start center" flex>\n          <ng-md-icon class="headerIcon" icon="error_outline" class="listIcon" ng-if="vm.agentCodeStatus !=\'valid\'" style="fill: rgba(255,87,87,0.8)"></ng-md-icon>\n          <span class="paymentSubTitle total">\n            Invalid agent code\n          </span>\n        </div>\n        <div layout="row" layout-align="end center" flex>\n          <ng-md-icon icon="clear" class="listIcon" ng-click="vm.agentCodeQuery = \'\';"></ng-md-icon>\n        </div>\n      </div>\n    </md-list-item>\n\n    \x3c!-- END: Agent Code --\x3e\n\n    \x3c!-- <list-item size="lg" class="listItemAutocomplete" ng-show="vm.couponStatus == \'untouched\'">\n      <md-autocomplete md-selected-item="autocomplete.selectedItem" md-search-text-change="autocomplete.searchTextChange(autocomplete.searchText)"\n        md-search-text="autocomplete.searchText" md-no-cache="true" md-selected-item-change="autocomplete.selectedItemChange(item)"\n        md-items="item in autocomplete.querySearch(autocomplete.searchText)" md-item-text="item.couponId" md-min-length="0"\n        placeholder="Search coupons.." class="listItem">\n        <md-item-template>\n          <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.couponId}}</span>\n          <span>{{item.percentage ? "" : "$"}}{{item.percentage ? item.amount : (item.amount / 100)}}{{item.percentage ? "%" : ""}}</span>\n        </md-item-template>\n        <md-not-found>\n          No coupons found{{autocomplete.searchText.length > 0 ? (\' matching "\' + autocomplete.searchText + \'".\') : \'.\'}}\n        </md-not-found>\n      </md-autocomplete>\n    </list-item> --\x3e\n\n    <div ng-if="vm.attendeeTotal > -1">\n      <div class="md-list-item-text subtotalLineItem" layout="row " flex>\n        <div layout="row" layout-align="start center " flex="50 ">\n          <span class="total">Attendees </span>\n        </div>\n        <div layout="row" layout-align="end center" flex="50">\n          <span class="activityTotal"><abl-currency-directive price="vm.attendeeTotal" currency="{{vm.currency}}"></abl-currency-directive></span>\n        </div>\n      </div>\n\n      <div ng-repeat="(key, value) in vm.attendeeSubtotals" layout="row" flex class="subtotalLineItem subtotalLineItemSmall">\n        <div layout="row" layout-align="start center" flex="50">\n          {{value.quantity}} x {{value.name}} @\n          <abl-currency-directive style="margin:0 4px" price="value.price" currency="{{vm.currency}}"></abl-currency-directive> each\n        </div>\n        <div layout="row" layout-align="end center" flex="50">\n          <abl-currency-directive price="value.amount" currency="{{vm.currency}}"></abl-currency-directive>\n        </div>\n      </div>\n    </div>\n    <div ng-if="vm.addonSubtotals.length > 0">\n      <div class="md-list-item-text subtotalLineItem" layout="row" flex>\n        <div layout="row" layout-align="start center" flex="50">\n          <span class="total">Add-ons </span>\n        </div>\n        <div layout="row" layout-align="end center" flex="50">\n          <span class="activityTotal"><abl-currency-directive price="vm.addonTotal" currency="{{vm.currency}}"></abl-currency-directive></span>\n        </div>\n      </div>\n\n      <div ng-repeat="addon in vm.addonSubtotals" layout="row" flex class="subtotalLineItem subtotalLineItemSmall">\n        <div layout="row" layout-align="start center" flex="50">\n          {{addon.quantity}} x {{addon.name}} @\n          <abl-currency-directive style="margin:0 4px" price="addon.price" currency="{{vm.currency}}"></abl-currency-directive> each\n        </div>\n        <div layout="row" layout-align="end center" flex="50">\n          <abl-currency-directive price="addon.amount" currency="{{vm.currency}}"></abl-currency-directive>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="vm.taxTotal > 0">\n      <div class="md-list-item-text subtotalLineItem" layout="row" flex>\n        <div layout="row" layout-align="start center" flex="50">\n          <span class="total">Taxes and Fees </span>\n        </div>\n        <div layout="row" layout-align="end center" flex="50">\n          <span class="activityTotal"><abl-currency-directive price="vm.taxTotal" currency="{{vm.currency}}"></abl-currency-directive></span>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="vm.pricing.agentCommission || vm.pricing.agentCommission > 0">\n      <div class="md-list-item-text subtotalLineItem" layout="row " flex>\n        <div layout="row" layout-align="start center " flex="50 ">\n          <span class="total">Agent Commission </span>\n        </div>\n        <div layout="row " layout-align="end center " flex="50 ">\n          <span class="agentCommission">${{vm.pricing.agentCommission / 100 | number:2}}</span>\n        </div>\n      </div>\n    </div>\n\n    <div>\n      <div class="md-list-item-text subtotalLineItem bottomTotal" layout="row" layout-align="space-between center" flex>\n        <div layout="row" layout-align="start center" flex="50">\n          <span class="">Total </span>\n        </div>\n        <div layout="row" layout-align="end center" flex="50">\n          <span><abl-currency-directive price="(vm.pricing.total.amount || 0)" currency="{{vm.currency}}"></abl-currency-directive> <span class="pricing" ng-if="vm.pricing.total.amount > 0"><ng-md-icon icon="information" class="listIcon"><md-tooltip md-direction="top">Original price: {{vm.pricing.total.originalAmount | ablCurrency : (vm.pricing.total.originalCurrency | lowercase)}}, Original currency: {{vm.pricing.total.originalCurrency}}</md-tooltip></ng-md-icon></span></span>\n        </div>\n      </div>\n    </div>\n  </md-list>\n</md-card>\n'},function(e,n){
e.exports='<div ng-if="paymentResponse != \'success\' || !vm.showPaymentForm">\n  <div class="activityPaymentSummaryCard" layout="column" after-render>\n    \x3c!-- Guest Details --\x3e\n    <list-item size="lg" class="listItemHeader" ng-click="vm.toggleGuestDetails()" ng-disabled="!vm.guestDetailsAreValid" layout="column">\n      <div layout="row" layout-align="start center" flex>\n        <ng-md-icon icon="filter_1" class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon>\n        <span class="paymentSubTitle" flex>Guest Details</span>\n      </div>\n      <div layout="row" layout-align="end center">\n        <div layout="column" layout-align="center end">\n          <ng-md-icon icon="{{vm.guestDetailsExpanded ? \'expand_less\' : \'expand_more\'}}" class="listIcon"></ng-md-icon>\n        </div>\n      </div>\n    </list-item>\n\n    <div ng-show="vm.guestDetailsExpanded" layout="column">\n      <list-item ng-if="dashboard">\n        <md-checkbox ng-model="sendConfirmationEmail" class="listItemCheckbox">Send confirmation e-mail to client</md-checkbox>\n      </list-item>\n      <form name="guestDetailsForm" novalidate>\n        <div>\n          <md-input-container class="md-block listItemInputContainer inputBottomMargin" ng-if="!dashboard">\n            <label>Full Name</label>\n            <input name="fullName" ng-model="vm.formData.fullName" required type="text" md-maxlength="100" ng-minlength="3" />\n            <div ng-messages="guestDetailsForm.fullName.$error">\n              <div ng-message="required">This is required.</div>\n              <div ng-message="minlength">The name must be at least 3 characters long.</div>\n              <div ng-message="md-maxlength">The name must be less than 100 characters long.</div>\n            </div>\n          </md-input-container>\n\n\n          <md-autocomplete ng-if="dashboard" required md-input-name="autocompleteField" md-input-minlength="3" md-input-maxlength="100"\n            md-no-cache="true" md-delay="250" md-selected-item="vm.clientSearchSelectedItem" md-search-text="vm.formData.fullName"\n            md-items="item in vm.clients" md-item-text="item.primaryContact.fullName" md-floating-label="Full Name" md-selected-item-change="vm.selectedClientChange(item)"\n            class="md-block listItemInputContainer" md-menu-class="autocomplete-custom-template" md-min-length="2">\n            <md-item-template>\n              <span class="item-title">\n                  <ng-md-icon icon="person" class="listItemHeaderIcon sm"></ng-md-icon>\n                  <span> {{item.primaryContact.fullName}} </span>\n              </span>\n              <span class="item-metadata">\n                  <span>\n                      <ng-md-icon icon="email" class="listItemHeaderIcon sm" md-colors="{fill: \'blue-grey-A200\'}"></ng-md-icon>\n\n                    {{item.primaryContact.email}}\n                  </span>\n              \x3c!-- <span>\n                  <ng-md-icon icon="phone" class="listItemHeaderIcon sm" md-colors="{fill: \'blue-grey-A200\'}"></ng-md-icon>\n\n                    {{item.primaryContact.phoneNumber}}\n                  </span> --\x3e\n              </span>\n            </md-item-template>\n            <div ng-messages="guestDetailsForm.autocompleteField.$error" ng-if="guestDetailsForm.autocompleteField.$touched">\n              <div ng-message="required">You <b>must</b> enter a client name.</div>\n              <div ng-message="minlength">The name must be at least 3 characters long.</div>\n              <div ng-message="md-maxlength">The name must be less than 100 characters long.</div>\n            </div>\n          </md-autocomplete>\n\n\n          <md-input-container class="md-block listItemInputContainer listItemAutoCompleteAfterContainer" ng-if="!dashboard">\n            <label>E-mail</label>\n            <input name="mail" ng-model="vm.formData.mail" required type="email" md-maxlength="100" ng-minlength="3" />\n            <div ng-messages="guestDetailsForm.mail.$error">\n              <div ng-message="required">This is required.</div>\n              <div ng-message="email">Please enter a valid e-mail address.</div>\n              <div ng-message="minlength">The e-mail must be at least 3 characters long.</div>\n              <div ng-message="md-maxlength">The e-mail must be less than 100 characters long.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block listItemInputContainer" ng-if="!dashboard">\n            <label>Phone</label>\n            <input name="phone" ng-model="vm.formData.phoneNumber" required type="text" />\n            <div ng-messages="guestDetailsForm.phone.$error">\n              <div ng-message="required">This is required.</div>\n            </div>\n          </md-input-container>\n\n          <md-input-container class="md-block listItemInputContainer listItemAutoCompleteAfterContainer" ng-if="dashboard">\n            <label>E-mail</label>\n            <input name="mail" ng-model="vm.formData.mail" type="email" md-maxlength="100" ng-minlength="3" />\n            <div ng-messages="guestDetailsForm.mail.$error">\n              <div ng-message="email">Please enter a valid e-mail address.</div>\n              <div ng-message="minlength">The e-mail must be at least 3 characters long.</div>\n              <div ng-message="md-maxlength">The e-mail must be less than 100 characters long.</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block listItemInputContainer" ng-if="dashboard">\n            <label>Phone</label>\n            <input name="phone" ng-model="vm.formData.phoneNumber" type="text" />\n            <div ng-messages="guestDetailsForm.phone.$error">\n            </div>\n          </md-input-container>\n\n          <md-input-container class="md-block listItemInputContainer">\n            <label>Notes</label>\n            <textarea ng-model="vm.formData.notes" md-maxlength="300" rows="1"></textarea>\n          </md-input-container>\n\n          <div layout="row" layout-align="end center" layout-margin>\n            <md-button class="md-raised md-primary md-hue-2" ng-disabled="!vm.areGuestDetailsValid(guestDetailsForm)" ng-click="vm.goToNextStep(\'guestDetailsStep\')">Next</md-button>\n          </div>\n        </div>\n      </form>\n    </div>\n    <md-divider class="no-margin"></md-divider>\n\n    \x3c!-- Attendees --\x3e\n    <list-item size="lg" class="listItemHeader" ng-click="vm.toggleAttendees()" ng-disabled="!vm.guestDetailsAreValid" layout="column">\n      <div layout="row" layout-align="start center" flex>\n        <ng-md-icon icon="filter_2" class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon>\n        <span class="paymentSubTitle" ng-if="vm.countAttendees() >= 0" flex>Attendees <span ng-show="vm.countAttendees() < 4"> {{vm.countAttendees()}} spot{{vm.countAttendees() != 1 ? \'s\' : \'\'}} remaining</span></span>\n        <span class="paymentSubTitle" ng-if="vm.countAttendees() < 0" flex>Attendees <span class="red"> <strong> {{vm.countAttendees() * -1}}</strong> spot{{((vm.countAttendees() * -1) > 1 || (vm.countAttendees() * -1) == 0) ? \'s\' : \'\'}} over maximum occupancy</span></span>\n      </div>\n      <div layout="row" layout-align="end center">\n        <div layout="column" layout-align="center end">\n          <ng-md-icon icon="{{vm.attendeesExpanded ? \'expand_less\' : \'expand_more\'}}" class="listIcon"></ng-md-icon>\n        </div>\n      </div>\n    </list-item>\n\n    <div ng-show="vm.attendeesExpanded" ng-class="vm.areAttendeesValid()" layout="column">\n      <div ng-repeat="attendee in vm.attendees">\n        <list-item class="md-2-line addOnListItem">\n          <div layout="row" class="list-item-text" flex>\n            <div layout="row" layout-align="start center" flex>\n              <div layout="column" class="">\n                <span class="lineItemSubHeader">{{attendee.name}}</span>\n\n                <div layout="row">\n                  <span class="lineItemSubDetail">{{ attendee.amount | ablCurrency: vm.currency }}</span>\n                </div>\n\n              </div>\n            </div>\n\n            <div layout="row" layout-align="end center">\n              <div layout="column" class="addOnAdjusters" layout-align="center end" flex layout-grow>\n                <ng-md-icon icon="add_circle_outline" class="listIconSub" ng-click="vm.adjustAttendee($index,\'up\');"> </ng-md-icon>\n                <ng-md-icon icon=" remove_circle_outline" class="listIconSub" ng-click="vm.adjustAttendee($index,\'down\');"></ng-md-icon>\n              </div>\n\n              <div layout="column" layout-align="end end">\n                <input class=\'addOnQuantityText\' ng-model="attendee.quantity" ng-change="vm.checkAdjustAttendee($index);" type="number" min="0"\n                  md-select-on-focus></input>\n              </div>\n            </div>\n          </div>\n        </list-item>\n      </div>\n      <div layout="row" layout-align="end center" layout-margin>\n        <md-button ng-if="vm.isNextStepPayment(\'attendees\')" class="md-raised md-primary md-hue-2" ng-disabled="!vm.areAttendeesValid()"\n          ng-click="vm.goToNextStep(\'attendeesStep\')">Next</md-button>\n      </div>\n    </div>\n\n\n    <md-divider class="no-margin"></md-divider>\n\n    \x3c!-- Add ons --\x3e\n    <div ng-if="vm.addons.length > 0">\n      <list-item class="paymentHeader md-2-line" ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click="vm.toggleAddons()"\n        layout="column" flex>\n        <div layout="row" layout-align="start center" flex>\n          <ng-md-icon icon="filter_3" class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon>\n          <span class="paymentSubTitle">Add-ons</span>\n        </div>\n        <div layout="row" layout-align="end center">\n          <div layout="column" layout-align="center end">\n            <ng-md-icon ng-show="vm.addOnsSelected == 1" icon="check" class="listIcon"></ng-md-icon>\n            <ng-md-icon icon="{{vm.addonsExpanded ? \'expand_less\' : \'expand_more\'}}" class="listIcon"></ng-md-icon>\n          </div>\n        </div>\n      </list-item>\n      <md-divider class="no-margin"></md-divider>\n      <div ng-show="vm.addonsExpanded" ng-class="vm.areAddonsValid()">\n        <div ng-repeat="addon in vm.addons">\n          <list-item class="md-2-line addOnListItem">\n            <div layout="row" layout-align="start center" flex>\n              <div layout="column" class="">\n                <span class="lineItemSubHeader">{{addon.name}}</span>\n                <div layout="row" class="">\n                  <span class="lineItemSubDetail">{{ addon.amount | ablCurrency: vm.currency }}</span>\n                </div>\n              </div>\n            </div>\n            <div layout="row" layout-align="end center" flex>\n              <div layout="column" class="addOnAdjusters" layout-align="center end">\n                <ng-md-icon icon="add_circle_outline" class="listIconSub" ng-click="vm.adjustAddon($index,\'up\');"> </ng-md-icon>\n                <ng-md-icon icon=" remove_circle_outline" class="listIconSub" ng-click="vm.adjustAddon($index,\'down\');"></ng-md-icon>\n              </div>\n              <div layout="column" layout-align="end end">\n                <input class=\'addOnQuantityText\' ng-model="addon.quantity" ng-change="vm.addonsChanged();" md-select-on-focus type="number"></input>\n              </div>\n            </div>\n          </list-item>\n        </div>\n\n        <div layout="row" layout-align="end center" layout-margin>\n          <md-button ng-if="vm.isNextStepPayment(\'addons\')" class="md-raised md-primary md-hue-2" ng-click="vm.goToNextStep(\'addonsStep\')">Next</md-button>\n        </div>\n      </div>\n    </div>\n\n    \x3c!--Questions--\x3e\n    <div ng-if="vm.questions.length > 0">\n      <list-item class="paymentHeader md-2-line" ng-disabled="guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1" ng-click="vm.toggleQuestions()">\n        <div layout="row" class="list-item-text" flex>\n          <div layout="row" layout-align="start center" flex>\n            <div layout="column" class="">\n              <div layout="row" layout-align="start center" flex>\n                <ng-md-icon icon="filter_4" class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0"></ng-md-icon>\n                <ng-md-icon icon="filter_3" class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length == 0"></ng-md-icon>\n                <span class="paymentSubTitle">Booking Questions <i class="fa fa-angle-right" aria-hidden="true"></i> {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span>\n              </div>\n            </div>\n          </div>\n\n          <div layout="row" layout-align="end center">\n            <div layout="column" layout-align="center end" flex>\n              <ng-md-icon icon="{{vm.questionsExpanded ? \'expand_less\' : \'expand_more\'}}" class="listIcon"></ng-md-icon>\n            </div>\n          </div>\n        </div>\n      </list-item>\n      <div ng-show="vm.questionsExpanded" ng-class="!vm.areBookingQuestionsValid()">\n        <div class="questionForm slideDown">\n          <div ng-repeat="question in vm.questions" class="listItemInputContainer">\n            <div layout="column" layout-align="center stretch" flex>\n              <label class="small-label">{{question.questionText}}</label>\n              <div layout="row" layout-align="start center">\n                <ng-md-icon icon="{{vm.bookingQuestions[$index].length > 0 ? \'done\' : \'priority_high\'}}" class="inputStatusIcon"></ng-md-icon>\n                <md-input-container class="md-block" flex>\n                  <textarea name="question" ng-model="vm.bookingQuestions[$index]" md-maxlength="300" rows="1"></textarea>\n                </md-input-container>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div layout="row" layout-align="end center" layout-margin>\n          <md-button class="md-raised md-primary md-hue-2" ng-disabled="!dashboard && !vm.areBookingQuestionsValid()" ng-click="vm.goToNextStep(\'paymentStep\')">Next</md-button>\n        </div>\n      </div>\n      <md-divider class="no-margin"></md-divider>\n    </div>\n\n    \x3c!-- Payment Stripe --\x3e\n    <div class="payment-section">\n      <list-item class="paymentHeader md-2-line" ng-disabled="!vm.isPaymentValid()">\n        <div layout="row" layout-align="start center" flex="80">\n          <ng-md-icon icon="filter_5" class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0 && vm.questions.length > 0"></ng-md-icon>\n          <ng-md-icon icon="filter_4" class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0 && vm.questions.length == 0 || vm.addons.length == 0 && vm.questions.length > 0"></ng-md-icon>\n          <ng-md-icon icon="filter_3" class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length == 0 && vm.questions.length == 0"></ng-md-icon>\n          <span class="paymentSubTitle">Payment Details</span>\n        </div>\n        <div layout="row" layout-align="end center" flex="20">\n          <div layout="column" layout-align="center end" flex>\n            \x3c!--<ng-md-icon icon="{{vm.guestDetailsExpanded ? \'expand_less\' : \'expand_more\'}}" class="listIcon"></ng-md-icon>\n                <ng-md-icon ng-show="!guestDetailsHover && detailsForm.$valid" icon="check" class="listIcon"></ng-md-icon>--\x3e\n          </div>\n        </div>\n      </list-item>\n      <md-divider class="no-margin"></md-divider>\n      \x3c!--<list-item class="activityCardForm" ng-if="app == \'dashboard\'">\n          Dashboard\n        </list-item>--\x3e\n      \x3c!-- <div ng-show="vm.stripePaymentExpanded"> --\x3e\n      <div ng-show="vm.stripePaymentExpanded">\n        <div class="radioGroup listItemInputContainer" ng-if="dashboard">\n          <md-radio-group ng-model="vm.paymentMethod">\n            <md-radio-button value="credit" ng-if="vm.pricing.total.amount > 0"> Credit Card (Online)</md-radio-button>\n            <md-radio-button value="cash">Cash</md-radio-button>\n            <md-radio-button value="debit"> Office Point of Sale (POS) </md-radio-button>\n            <md-radio-button value="gift"> Gift Card </md-radio-button>\n            <md-radio-button value="transfer"> Bank Transfer </md-radio-button>\n            <md-radio-button value="reserved"> Reservation - Pay Later </md-radio-button>\n          </md-radio-group>\n        </div>\n        <div layout="row" layout-align="end center" layout-margin ng-if="vm.paymentMethod != \'credit\'">\n          <progress-button class="md-raised md-primary md-hue-2" ng-disabled="vm.countAttendeesAdded() < 1" loading="bookingSuccessResponse == \'processing\'"\n            ng-click="vm.submitNonCreditCardBooking()" spinner="3" label="{{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}"></progress-button>\n        </div>\n        <div layout="row" layout-align="end center" layout-margin ng-if="vm.paymentMethod == \'credit\' && dashboard">\n          <progress-button class="md-raised md-primary md-hue-2" ng-disabled="vm.countAttendeesAdded() < 1" loading="bookingSuccessResponse == \'processing\'"\n            ng-click="vm.goToPay()" spinner="3" label="{{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}"></progress-button>\n        </div>\n      </div>\n      <form method="post" id="payment-form" name="creditCardDetailsForm" ng-show="false">\n        <div class="form-row" style="padding:0 30px 20px 20px">\n          <div id="card-errors"></div>\n          <div id="card-element">\n          </div>\n        </div>\n        <div ng-if="vm.waitingForResponse" layout="row" layout-align="space-around center" style="padding:20px">\n          <md-progress-circular md-mode="indeterminate"></md-progress-circular>\n        </div>\n\n\n        <div layout="row" layout-align="end center" layout-margin>\n          <md-button type="submit" class="md-raised md-primary md-hue-2" ng-class="{\'valid\': vm.isPaymentValid() && vm.stripeCardIsValid && !vm.waitingForResponse}"\n            ng-disabled="!vm.isPaymentValid() || vm.paymentWasSent" class="submitButton"><i class="fa fa-credit-card" aria-hidden="true"></i> {{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }}</md-button>\n        </div>\n      </form>\n\n      <div layout="row" ng-if="false">\n        <md-button flex class="md-raised md-primary md-hue-2" ng-disabled="!vm.isPaymentValid() || vm.paymentWasSent" ng-click="vm.goToPay()"><i class="fa fa-credit-card" aria-hidden="true"></i> {{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }}</md-button>\n      </div>\n\n      <div ng-if="!dashboard">\n        <md-card class="transparent no-margin" ng-show="vm.showPaymentForm && paymentResponse.length < 1">\n          <div ng-if="vm.loadingIframe" layout="row" layout-align="space-around center" style="padding:20px">\n            <md-progress-circular md-mode="indeterminate"></md-progress-circular>\n          </div>\n          <iframe id="paymentIframe"></iframe>\n        </md-card>\n      </div>\n\n    </div>\n  </div>\n'},function(e,n){e.exports='<div layout="{{screenIsBig() ? \'row\' : \'column\'}}" layout-align="{{screenIsBig() ? \'start stretch\' : \'start center\'}}" layout-fill class="columnFix" ng-class="screenIsBig() ? \'activityBookDialogLarge\' : \'activityBookDialogSmall\'" ng-show="(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)">\n  <div flex class="paymentSummaryCardLarge leftCard" ng-class="screenIsBig() ? \'leftCardLarge\' : \'leftCardSmall\'" layout-align="start stretch">\n    <div ng-include="\'activity-forms.html\'"></div>\n  </div>\n  <div flex class="paymentSummaryCardLarge rightCard" ng-class="screenIsBig() ? \'rightCardLarge\' : \'rightCardSmall\'" layout="column" layout-align="start stretch">\n    <div flex class="activity-total-include" ng-include="\'activity-total.html\'"></div>\n  </div>\n</div>\n\n<div ng-if="dashboard">\n  <md-card class="paymentSummaryCard no-margin" ng-show="vm.showPaymentForm && paymentResponse.length < 1">\n    <div style="min-height:310px" layout="row" layout-sm="column" layout-align="center center" ng-if="vm.paymentFormIsLoading">\n      <md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular>\n    </div>\n    <iframe id="paymentIframe"></iframe>\n  </md-card>\n</div>\n\n<div class="paymentResponseContainer">\n  <div class="paymentSummaryCard no-margin" ng-show="paymentResponse.length > 0">\n    <div ng-if="paymentResponse == \'success\'" class="easeIn">\n      <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0">\n        <div layout="row" class="md-list-item-text" flex>\n          <div flex layout="row" layout-align="start center" md-colors="{color: \'default-primary\'}">\n            <ng-md-icon class="listItemHeaderIcon" icon="payment" class="listIcon "></ng-md-icon>\n            <span class="paymentSubTitle total">{{bookingSuccessResponse.data.booking.status == \'unpaid\' ? \'Booking\' : \'Payment\'}} Complete</span>\n          </div>\n          <div layout="column" flex="none" style="width:24px">\n            <ng-md-icon flex="none" style="width:24px;height:24px;margin: inherit;" icon="check" class="listIcon" ng-style="{fill: \'green\'}"></ng-md-icon>\n          </div>\n        </div>\n      </div>\n      <div class="paymentBody">\n        <div class="confirmation" ng-if="dashboard">\n          <h3>Congratulations!</h3>\n          <p>Your {{bookingSuccessResponse.data.booking.status == \'unpaid\' ? \'reservation\' : \'booking\'}} is confirmed.</p>\n          <p>{{vm.formData.fullName}} is attending {{bookingSuccessResponse.data.booking.title}} on {{formatDate(bookingSuccessResponse.data.booking.startTime, \'LL\')}}</p>\n          <p>A confirmation email will be sent to {{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</p>\n          <div class="booking-id">The reference ID is: {{bookingSuccessResponse.data.booking.bookingId}}</div>\n          <div layout="row" layout-align="center center">\n            <span flex>\n              <md-button class="md-raised md-primary" ng-click="vm.returnToMainPage()">Return</md-button>\n            </span>\n          </div>\n        </div>\n        <div class="confirmation" ng-if="!dashboard">\n          <h3>Congratulations!</h3>\n          <p>Your booking is confirmed.</p>\n          <p>You will receive a confirmation email at: <strong>{{vm.formData[\'mail\']}}</strong></p>\n          <p class="margin-top">For questions about your booking, please contact:</p>\n          <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].companyName}} ({{bookingSuccessResponse.data.booking.organizations[0].primaryContact.phoneNumber}})</strong></p>\n          <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</strong></p>\n          <div class="booking-id">Booking ID: {{bookingSuccessResponse.data.booking.bookingId}}</div>\n          <div style="margin-top:25px" layout="row" layout-align="center center">\n            <span flex>\n              <md-button class="md-raised md-primary" ng-click="vm.returnToMainPage()">Return</md-button>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="paymentResponse == \'failed\'">\n      <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0">\n        <div layout="row" class="md-list-item-text" flex>\n          <div flex layout="row" layout-align="start center" md-colors="{color: \'default-primary\'}">\n            <ng-md-icon class="listItemHeaderIcon" icon="payment" class="listIcon "></ng-md-icon>\n            <span class="paymentSubTitle total">Payment Failed</span>\n          </div>\n          <div layout="column" flex="none" style="width:24px">\n            <ng-md-icon flex="none" style="width:24px;height:24px;margin: inherit;" icon="error" class="listIcon" ng-style="{fill: \'red\'}"></ng-md-icon>\n          </div>\n        </div>\n      </div>\n\n      <div class="paymentBody">\n        <div class="confirmation">\n          <p>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p>\n          <div style="margin-top:25px" layout="row" layout-align="center center">\n            <span flex>\n              <md-button class="md-raised md-primary" ng-click="vm.payNow()">Try Again</md-button>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n    <div ng-if="paymentResponse == \'processing\'">\n      <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0">\n        <div layout="row" class="md-list-item-text" flex>\n          <div flex layout="row" layout-align="start center" md-colors="{color: \'default-primary\'}">\n            <ng-md-icon class="listItemHeaderIcon" icon="payment" class="listIcon "></ng-md-icon>\n            <span class="paymentSubTitle total">Payment Processing</span>\n          </div>\n          <div layout="column" flex="none" style="width:24px">\n            <ng-md-icon flex="none" style="width:24px;height:24px;margin: inherit;" icon="watch_later" class="listIcon" ng-style="{fill: \'red\'}"></ng-md-icon>\n          </div>\n        </div>\n      </div>\n\n      <div class="paymentBody">\n        <div class="confirmation">\n          <p>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p>\n          <div style="margin-top:25px" layout="row" layout-align="center center">\n            <span flex>\n              <md-button class="md-raised md-primary" ng-click="goToState(\'home\')">Return</md-button>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,n){"use strict";function t(e,n,t){return e.searchClients=function(i){return Rx.Observable.fromPromise(n({method:"GET",url:e.config.apiVersion+"/clients?fullName="+text,headers:{"x-abl-access-key":t.merchant,"x-abl-date":Date.parse((new Date).toISOString())}})).select(function(e){return console.log(e),e})},e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(){var e=this;this.$onInit=function(){console.log("activityAdjustmentControls",this)},this.$onChanges=function(e){},this.$postLink=function(){},e.addCharge=function(e,n){console.log(e,n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=t(134),o=i(a),s=t(135),r=i(s),d=t(136),l=i(d),c=t(137),u=i(c),m={activity:r.default,event:l.default,timeslot:u.default,"pricing-quote":o.default};window.$ablMock=m},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={items:[{name:"Adult",type:"aap",amount:1e4,price:1e4,quantity:1},{name:"test1",type:"aap",amount:5e3,price:5e3,quantity:1},{name:"test3",type:"aap",amount:2e3,price:2e3,quantity:1},{name:"poster",type:"addon",amount:33400,price:33400,quantity:1},{name:"cakefarts",type:"addon",amount:400,price:400,quantity:1},{type:"tax",name:"GST",price:5080,quantity:1,percent:10}],total:55880,coupon:null,timeSlot:{_id:"59d58be4f75bdb4b56d4a9b2",eventId:"3hcnelv717uga5cf46m1q9g0jc",originalUntilTime:"2018-11-30T07:59:00.000Z",originalEndTime:"2017-10-04T19:00:00.000Z",originalStartTime:"2017-10-04T17:00:00.000Z",originalDescription:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",originalTitle:"eeeeeeeeeeeeeeeeeeeee",originalMaxOcc:10,originalMinOcc:2,updatedAt:"2017-10-13T01:52:29.554Z",createdAt:"2017-10-05T01:33:24.236Z",endTime:"2017-10-04T19:00:00.000Z",maxOcc:10,startTime:"2017-10-04T17:00:00.000Z",activity:"59d58bcff75bdb4b56d4a9ae",calendarId:"9lmnhmf79evas36ur4h7fuglh0@group.calendar.google.com",status:"active",description:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",title:"eeeeeeeeeeeeeeeeeeeee",minOcc:2,untilTime:"2018-11-30T07:59:00.000Z",daysRunning:[0,1,2,3,4,5,6],originalDaysRunning:[0,1,2,3,4,5,6],single:!1,timeZone:"America/Los_Angeles",discounts:[],charges:[{_id:"59d58be4f75bdb4b56d4a9af",updatedAt:"2017-10-05T01:33:24.215Z",createdAt:"2017-10-05T01:33:24.215Z",amount:1e4,name:"Adult",type:"aap",status:"active",isDefault:!0,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],operator:"5939d988fd8f030e112be7b9",id:"59d58be4f75bdb4b56d4a9af"},{_id:"59d58be4f75bdb4b56d4a9b0",updatedAt:"2017-10-05T01:33:24.216Z",createdAt:"2017-10-05T01:33:24.216Z",amount:5e3,name:"test1",type:"aap",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],operator:"5939d988fd8f030e112be7b9",id:"59d58be4f75bdb4b56d4a9b0"},{_id:"59d58be4f75bdb4b56d4a9b1",updatedAt:"2017-10-05T01:33:24.219Z",createdAt:"2017-10-05T01:33:24.219Z",amount:2e3,name:"test3",type:"aap",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],operator:"5939d988fd8f030e112be7b9",id:"59d58be4f75bdb4b56d4a9b1"}],events:["59d58c34f75bdb4b56d4a9b3","59d593e11627061ef786d421","59d59b7f6022d0510de318b6","59d6ade43f36765538bff8dd","59d7ddbfa8eaf70f7a0af216","59d821c225bded3c7fd6def7","59d823fe7f435345efcb0bd2","59d824d2a86c3748c4ac0e15","59d82f6ca86c3748c4ac0fc4","59db9f78b1903148e8599c43","59dd29fab1903148e8599c62","59dd521308ebd92d203939bd","59dd74fbb50aee61f4ee1415","59debe83b15be001d351c788","59dfd67fbdf2fa31ddfc80ba","59dfda46dcedee42c09389da","59dfdb885226ff4aa3688e5d","59dff0f5f404824fc1a66ac2","59e01b306592b63f7d553b26","59e01c5d6592b63f7d553b42"],guides:[],organizations:[{_id:"5939d988fd8f030e112be7b9",calendarId:"9lmnhmf79evas36ur4h7fuglh0@group.calendar.google.com",calendarIdOld:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",updatedAt:"2017-10-03T20:08:04.139Z",createdAt:"2017-06-08T23:11:04.184Z",domainName:"http://operator38.com",location:"5939d988fd8f030e112be7b8",role:"operator",status:"active",payments:{stripeAccount:"5994da393437054cf951846c"},addRulesToPropertiesOnCreate:!0,languages:{sp:!1,fr:!1,en:!0},language:"en",reminders:{email:!1,sms:!1,id:null},primaryContact:{email:"tyler+operator38@adventurebucketlist.com",phoneNumber:"7169488938",fullName:"Operator 38"},social:{googlePlus:"https://plus.google.com/+eeeeeeeeee",tripadvisor:"https://www.tripadvisor.com/Hotel_Review-g612353-d736372-Reviews-Tamassa_Resort-Bel_Ombre.html",twitter:"twittah1123",instagram:"insta111",facebook:"shfacebook111"},preferences:{deposits:{amount:5e3,percent:null,threshold:1e4,priorDays:30,setting:"threshold"},notifications:{booking_confirmation_customer:{terms_conditions:"",signoff:"",custom_field_3:"",custom_field_2:"",custom_field_1:""}},tripadvisorReviewEmail:{delay:{period:"day",number:3},active:!0},payment:{hideCvc:!0},widget:{display:{timeslot:{startTime:!1,price:!0,duration:!1,availability:!1},theme:"blue",event:{isSiteWide:!0,cutoff:720}}},customFields:{prior:15,notes:"Notes"},affiliate:{includeAddons:!1},features:{affiliates:!1,questions:!0,guides:!0,coupons:!0},id:null},companyImage:"https://dev-images.ablsolution.com/3338cb58-4d3c-49ad-9cde-92a18550c19f.png",companyName:"Operator 38",groups:["tahit"],applicationFee:3,organizations:["ffffffffffffffffffffffff"],bookings:null,createdDate:"2017-06-08T23:11:04.184Z",apiKeys:null,id:"5939d988fd8f030e112be7b9"}],isMinOccChanged:!1,isMaxOccChanged:!1,isTitleChanged:!1,isDescriptionChanged:!1,operator:{
_id:"5939d988fd8f030e112be7b9",calendarId:"9lmnhmf79evas36ur4h7fuglh0@group.calendar.google.com",calendarIdOld:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",updatedAt:"2017-10-03T20:08:04.139Z",createdAt:"2017-06-08T23:11:04.184Z",domainName:"http://operator38.com",location:"5939d988fd8f030e112be7b8",role:"operator",status:"active",payments:{stripeAccount:"5994da393437054cf951846c"},addRulesToPropertiesOnCreate:!0,languages:{sp:!1,fr:!1,en:!0},language:"en",reminders:{email:!1,sms:!1,id:null},primaryContact:{email:"tyler+operator38@adventurebucketlist.com",phoneNumber:"7169488938",fullName:"Operator 38"},social:{googlePlus:"https://plus.google.com/+eeeeeeeeee",tripadvisor:"https://www.tripadvisor.com/Hotel_Review-g612353-d736372-Reviews-Tamassa_Resort-Bel_Ombre.html",twitter:"twittah1123",instagram:"insta111",facebook:"shfacebook111"},preferences:{deposits:{amount:5e3,percent:null,threshold:1e4,priorDays:30,setting:"threshold"},notifications:{booking_confirmation_customer:{terms_conditions:"",signoff:"",custom_field_3:"",custom_field_2:"",custom_field_1:""}},tripadvisorReviewEmail:{delay:{period:"day",number:3},active:!0},payment:{hideCvc:!0},widget:{display:{timeslot:{startTime:!1,price:!0,duration:!1,availability:!1},theme:"blue",event:{isSiteWide:!0,cutoff:720}}},customFields:{prior:15,notes:"Notes"},affiliate:{includeAddons:!1},features:{affiliates:!1,questions:!0,guides:!0,coupons:!0},id:null},companyImage:"https://dev-images.ablsolution.com/3338cb58-4d3c-49ad-9cde-92a18550c19f.png",companyName:"Operator 38",groups:["tahit"],applicationFee:3,organizations:["ffffffffffffffffffffffff"],bookings:null,createdDate:"2017-06-08T23:11:04.184Z",apiKeys:null,id:"5939d988fd8f030e112be7b9"},isStartTimeChanged:!1,isEndTimeChanged:!1,isUntilTimeChanged:!1,isDaysRunningChanged:!1,id:"59d58be4f75bdb4b56d4a9b2"},activity:{_id:"59d58bcff75bdb4b56d4a9ae",originalTitle:"eeeeeeeeeeeeeeeeeeeee",originalDescription:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",updatedAt:"2017-10-13T01:52:49.064Z",createdAt:"2017-10-05T01:33:03.937Z",location:{_id:"59d58bcff75bdb4b56d4a9ad",updatedAt:"2017-10-13T01:52:49.004Z",createdAt:"2017-10-05T01:33:03.929Z",streetAddress:"123 Main St, Los Altos, CA 94022, USA",location:{coordinates:[0,0],type:"Point"},zoom:12,tag:"Main Location",id:"59d58bcff75bdb4b56d4a9ad"},images:["https://dev-images.ablsolution.com/5525cf21-788c-48c2-854d-e1d8612d0bc4.jpg"],title:"eeeeeeeeeeeeeeeeeeeee",description:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",status:"active",widgetOrder:1,published:!0,whatToBring:["eeeeeeeeeeeeee"],whatIncluded:["eeeeeeeeeee"],timeZone:"America/Los_Angeles",requirements:["eeeeee"],isListed:!1,cutoff:-1,color:"336633",questions:["5951a758717233012fb69692","5951a76d717233012fb69694","5951a75e717233012fb69693"],charges:[{_id:"59debe50b15be001d351c777",updatedAt:"2017-10-12T00:58:56.135Z",createdAt:"2017-10-12T00:58:56.135Z",amount:33400,name:"poster",type:"addon",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:[],id:"59debe50b15be001d351c777"},{_id:"59debe50b15be001d351c778",updatedAt:"2017-10-12T00:58:56.137Z",createdAt:"2017-10-12T00:58:56.137Z",amount:400,name:"cakefarts",type:"addon",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:[],id:"59debe50b15be001d351c778"},{_id:"59e01c71f2c4273fa1d3f2dd",updatedAt:"2017-10-13T01:52:49.042Z",createdAt:"2017-10-13T01:52:49.042Z",amount:10,name:"GST",type:"tax",status:"active",isDefault:!1,frequency:"Daily",percentage:!0,organizations:[],id:"59e01c71f2c4273fa1d3f2dd"}],timeslots:["59d58be4f75bdb4b56d4a9b2"],organizations:["5939d988fd8f030e112be7b9"],isDescriptionChanged:!1,isTitleChanged:!1,image:"https://dev-images.ablsolution.com/5525cf21-788c-48c2-854d-e1d8612d0bc4.jpg",operator:"5939d988fd8f030e112be7b9",id:"59d58bcff75bdb4b56d4a9ae"},event:{_id:"59d58be4f75bdb4b56d4a9b2",eventId:"3hcnelv717uga5cf46m1q9g0jc",originalUntilTime:"2018-11-30T07:59:00.000Z",originalEndTime:"2017-10-04T19:00:00.000Z",originalStartTime:"2017-10-04T17:00:00.000Z",originalDescription:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",originalTitle:"eeeeeeeeeeeeeeeeeeeee",originalMaxOcc:10,originalMinOcc:2,updatedAt:"2017-10-13T01:52:29.554Z",createdAt:"2017-10-05T01:33:24.236Z",endTime:"2017-10-04T19:00:00.000Z",maxOcc:10,startTime:"2017-10-04T17:00:00.000Z",activity:"59d58bcff75bdb4b56d4a9ae",calendarId:"9lmnhmf79evas36ur4h7fuglh0@group.calendar.google.com",status:"active",description:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",title:"eeeeeeeeeeeeeeeeeeeee",minOcc:2,untilTime:"2018-11-30T07:59:00.000Z",daysRunning:[0,1,2,3,4,5,6],originalDaysRunning:[0,1,2,3,4,5,6],single:!1,timeZone:"America/Los_Angeles",discounts:[],charges:[{_id:"59d58be4f75bdb4b56d4a9af",updatedAt:"2017-10-05T01:33:24.215Z",createdAt:"2017-10-05T01:33:24.215Z",amount:1e4,name:"Adult",type:"aap",status:"active",isDefault:!0,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],operator:"5939d988fd8f030e112be7b9",id:"59d58be4f75bdb4b56d4a9af"},{_id:"59d58be4f75bdb4b56d4a9b0",updatedAt:"2017-10-05T01:33:24.216Z",createdAt:"2017-10-05T01:33:24.216Z",amount:5e3,name:"test1",type:"aap",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],operator:"5939d988fd8f030e112be7b9",id:"59d58be4f75bdb4b56d4a9b0"},{_id:"59d58be4f75bdb4b56d4a9b1",updatedAt:"2017-10-05T01:33:24.219Z",createdAt:"2017-10-05T01:33:24.219Z",amount:2e3,name:"test3",type:"aap",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],operator:"5939d988fd8f030e112be7b9",id:"59d58be4f75bdb4b56d4a9b1"}],events:["59d58c34f75bdb4b56d4a9b3","59d593e11627061ef786d421","59d59b7f6022d0510de318b6","59d6ade43f36765538bff8dd","59d7ddbfa8eaf70f7a0af216","59d821c225bded3c7fd6def7","59d823fe7f435345efcb0bd2","59d824d2a86c3748c4ac0e15","59d82f6ca86c3748c4ac0fc4","59db9f78b1903148e8599c43","59dd29fab1903148e8599c62","59dd521308ebd92d203939bd","59dd74fbb50aee61f4ee1415","59debe83b15be001d351c788","59dfd67fbdf2fa31ddfc80ba","59dfda46dcedee42c09389da","59dfdb885226ff4aa3688e5d","59dff0f5f404824fc1a66ac2","59e01b306592b63f7d553b26","59e01c5d6592b63f7d553b42"],guides:[],organizations:[{_id:"5939d988fd8f030e112be7b9",calendarId:"9lmnhmf79evas36ur4h7fuglh0@group.calendar.google.com",calendarIdOld:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",updatedAt:"2017-10-03T20:08:04.139Z",createdAt:"2017-06-08T23:11:04.184Z",domainName:"http://operator38.com",location:"5939d988fd8f030e112be7b8",role:"operator",status:"active",payments:{stripeAccount:"5994da393437054cf951846c"},addRulesToPropertiesOnCreate:!0,languages:{sp:!1,fr:!1,en:!0},language:"en",reminders:{email:!1,sms:!1,id:null},primaryContact:{email:"tyler+operator38@adventurebucketlist.com",phoneNumber:"7169488938",fullName:"Operator 38"},social:{googlePlus:"https://plus.google.com/+eeeeeeeeee",tripadvisor:"https://www.tripadvisor.com/Hotel_Review-g612353-d736372-Reviews-Tamassa_Resort-Bel_Ombre.html",twitter:"twittah1123",instagram:"insta111",facebook:"shfacebook111"},preferences:{deposits:{amount:5e3,percent:null,threshold:1e4,priorDays:30,setting:"threshold"},notifications:{booking_confirmation_customer:{terms_conditions:"",signoff:"",custom_field_3:"",custom_field_2:"",custom_field_1:""}},tripadvisorReviewEmail:{delay:{period:"day",number:3},active:!0},payment:{hideCvc:!0},widget:{display:{timeslot:{startTime:!1,price:!0,duration:!1,availability:!1},theme:"blue",event:{isSiteWide:!0,cutoff:720}}},customFields:{prior:15,notes:"Notes"},affiliate:{includeAddons:!1},features:{affiliates:!1,questions:!0,guides:!0,coupons:!0},id:null},companyImage:"https://dev-images.ablsolution.com/3338cb58-4d3c-49ad-9cde-92a18550c19f.png",companyName:"Operator 38",groups:["tahit"],applicationFee:3,organizations:["ffffffffffffffffffffffff"],bookings:null,createdDate:"2017-06-08T23:11:04.184Z",apiKeys:null,id:"5939d988fd8f030e112be7b9"}],isMinOccChanged:!1,isMaxOccChanged:!1,isTitleChanged:!1,isDescriptionChanged:!1,operator:{_id:"5939d988fd8f030e112be7b9",calendarId:"9lmnhmf79evas36ur4h7fuglh0@group.calendar.google.com",calendarIdOld:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",updatedAt:"2017-10-03T20:08:04.139Z",createdAt:"2017-06-08T23:11:04.184Z",domainName:"http://operator38.com",location:"5939d988fd8f030e112be7b8",role:"operator",status:"active",payments:{stripeAccount:"5994da393437054cf951846c"},addRulesToPropertiesOnCreate:!0,languages:{sp:!1,fr:!1,en:!0},language:"en",reminders:{email:!1,sms:!1,id:null},primaryContact:{email:"tyler+operator38@adventurebucketlist.com",phoneNumber:"7169488938",fullName:"Operator 38"},social:{googlePlus:"https://plus.google.com/+eeeeeeeeee",tripadvisor:"https://www.tripadvisor.com/Hotel_Review-g612353-d736372-Reviews-Tamassa_Resort-Bel_Ombre.html",twitter:"twittah1123",instagram:"insta111",facebook:"shfacebook111"},preferences:{deposits:{amount:5e3,percent:null,threshold:1e4,priorDays:30,setting:"threshold"},notifications:{booking_confirmation_customer:{terms_conditions:"",signoff:"",custom_field_3:"",custom_field_2:"",custom_field_1:""}},tripadvisorReviewEmail:{delay:{period:"day",number:3},active:!0},payment:{hideCvc:!0},widget:{display:{timeslot:{startTime:!1,price:!0,duration:!1,availability:!1},theme:"blue",event:{isSiteWide:!0,cutoff:720}}},customFields:{prior:15,notes:"Notes"},affiliate:{includeAddons:!1},features:{affiliates:!1,questions:!0,guides:!0,coupons:!0},id:null},companyImage:"https://dev-images.ablsolution.com/3338cb58-4d3c-49ad-9cde-92a18550c19f.png",companyName:"Operator 38",groups:["tahit"],applicationFee:3,organizations:["ffffffffffffffffffffffff"],bookings:null,createdDate:"2017-06-08T23:11:04.184Z",apiKeys:null,id:"5939d988fd8f030e112be7b9"},isStartTimeChanged:!1,isEndTimeChanged:!1,isUntilTimeChanged:!1,isDaysRunningChanged:!1,id:"59d58be4f75bdb4b56d4a9b2"}}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={_id:"593ed86575634652759b1461",originalTitle:"Poop Snacks",originalDescription:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",updatedAt:"2017-07-26T03:03:57.216Z",createdAt:"2017-06-12T18:07:33.614Z",location:{_id:"593ed86575634652759b145d",updatedAt:"2017-07-26T03:03:55.631Z",createdAt:"2017-06-12T18:07:33.564Z",city:"Los Altos",country:"United States",state:"California",streetAddress:"123 Main St, Los Altos, CA 94022, USA",zipCode:"94022",location:{coordinates:[-122.114632,37.37982969999999],type:"Point"},zoom:12,tag:"Main Location",id:"593ed86575634652759b145d"},oldImages:["https://dev-images.ablsolution.com/6415504b-18fc-4ea2-ac9e-8189b394bd63.png"],images:["https://dev-images.ablsolution.com/07b4e6f0-7f08-4aa2-b43b-1a7f57bd0379.png"],title:"1111111",description:"SHIT MIDGETS in my hair SHIT MIDGETS FUCK PIDDLES!",status:"active",widgetOrder:2,published:!0,whatToBring:["Brown Pants"],whatIncluded:["Awesome Sauce"],timeZone:"America/New_York",requirements:[],isListed:!1,cutoff:-1,color:"336633",questions:[{_id:"5951a75e717233012fb69693",updatedAt:"2017-06-27T00:31:26.007Z",createdAt:"2017-06-27T00:31:26.007Z",questionText:"do you like poop snacks",organizations:["5939d988fd8f030e112be7b9"],id:"5951a75e717233012fb69693",operator:"5939d988fd8f030e112be7b9",$$hashKey:"object:502"},{_id:"5956d00a660df61df2c2d6c6",updatedAt:"2017-06-30T22:26:18.882Z",createdAt:"2017-06-30T22:26:18.882Z",questionText:'I was only nine years old I loved Lightning McQueen so much, I owned all the movies and merchandise I pray to Lightning McQueen every night, thanking him for the life I have been given "Lightning McQueen is love", I say, "Lightning McQueen is life" My dad hears me',organizations:["5939d988fd8f030e112be7b9"],id:"5956d00a660df61df2c2d6c6",operator:"5939d988fd8f030e112be7b9",$$hashKey:"object:503"}],charges:[{_id:"593ed86575634652759b145e",updatedAt:"2017-06-12T18:07:33.581Z",createdAt:"2017-06-12T18:07:33.581Z",amount:10,name:"a tax",type:"tax",status:"active",isDefault:!1,frequency:"Daily",percentage:!0,organizations:["5939d988fd8f030e112be7b9"],id:"593ed86575634652759b145e",operator:"5939d988fd8f030e112be7b9"},{_id:"593ed86575634652759b145f",updatedAt:"2017-06-12T18:07:33.588Z",createdAt:"2017-06-12T18:07:33.588Z",amount:2e3,name:"a fee",type:"fee",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],id:"593ed86575634652759b145f",operator:"5939d988fd8f030e112be7b9"},{_id:"593ed86575634652759b1460",updatedAt:"2017-06-12T18:07:33.589Z",createdAt:"2017-06-12T18:07:33.589Z",amount:7500,name:"an addon",type:"addon",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],id:"593ed86575634652759b1460",operator:"5939d988fd8f030e112be7b9",quantity:0,$$hashKey:"object:477"}],timeslots:[{_id:"593ed95375634652759b1464",eventId:"0kka3gs2pkrlt32tbvd2cemo08",originalUntilTime:"2019-06-14T06:59:00.000Z",originalEndTime:"2017-06-12T15:00:00.000Z",originalStartTime:"2017-06-12T14:00:00.000Z",originalDescription:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",originalTitle:"Poop Snacks",originalMaxOcc:8,originalMinOcc:2,updatedAt:"2017-07-27T21:40:41.803Z",createdAt:"2017-06-12T18:11:31.946Z",endTime:"2017-06-12T16:00:00.000Z",maxOcc:8,startTime:"2017-06-12T14:00:00.000Z",activity:"593ed86575634652759b1461",calendarId:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",status:"active",description:"SHIT MIDGETS in my hair SHIT MIDGETS FUCK PIDDLES!",title:"1111111",minOcc:2,untilTime:"2019-06-15T03:59:00.000Z",daysRunning:[0,1,2,3,4,5,6],originalDaysRunning:[0,1,2,3,4,5,6],single:!1,timeZone:"America/New_York",discounts:[],charges:[{_id:"593ed95375634652759b1462",updatedAt:"2017-06-12T18:11:31.933Z",createdAt:"2017-06-12T18:11:31.933Z",amount:2e4,name:"Adult",type:"aap",status:"active",isDefault:!0,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],id:"593ed95375634652759b1462",operator:"5939d988fd8f030e112be7b9"},{_id:"593ed95375634652759b1463",updatedAt:"2017-06-12T18:11:31.934Z",createdAt:"2017-06-12T18:11:31.934Z",amount:5e3,name:"Youth",type:"aap",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],id:"593ed95375634652759b1463",operator:"5939d988fd8f030e112be7b9"}],events:["5941972161cbb9537b3ac8c1","5941c0647451df3e1b7721bb","5941efe6c0a1d42d5f9196ee","594437a9a8779410db6314af","5953084d4311110b1beb2d81","59540509ad8aa062e608d9df","595426d2ad8aa062e608dd38","59542c3ead8aa062e608de46","595584a8ad8aa062e608ed83","5956d1eb32acad1e1f71f33f","59641c1f0a0ab843c08a5181","596435fa0a0ab843c08a5454","596448e7260dd02d60513a6a","59658bb656e16109a458f170","59668ea556e16109a458fa6c","5967d74c9718a2326c6bcb63","5967e73bcaa067395b72b43b","5967e854c9af3b3be865e0e8","5967ef2c05a7a040ae4094f5","596801eb86ac35026c2bf9bc","5968021786ac35026c2bf9e1","59680c155c3883227e34e5db","596811c7335c402d489abf89","596926ca7835b956a24d6237","596d0bbde3ec65054c68134a","596d0c31e3ec65054c68137c","596d8e2d414ff80d0ed33c48","596eba46414ff80d0ed34370","596ecac7e994820e921f73f6","596fb4589d76b83655e96ff6","596fb5f39d76b83655e97015","596fc1459d76b83655e97074","5970039114822271ee7cda3b","5970040b6ffbe019d53c2502","597005736ffbe019d53c2521","5971182c92511457960fa610","597133cf92511457960fa717","5971433e92511457960fa761","59779382010aa555daafc5e5","597a5dd9ccb2a23b516d1bf4"],guides:[],organizations:["5939d988fd8f030e112be7b9"],id:"593ed95375634652759b1464",isMinOccChanged:!1,isMaxOccChanged:!1,isTitleChanged:!1,isDescriptionChanged:!1,operator:"5939d988fd8f030e112be7b9",isStartTimeChanged:!1,isEndTimeChanged:!1,isUntilTimeChanged:!1,isDaysRunningChanged:!1}],organizations:[{_id:"5939d988fd8f030e112be7b9",calendarId:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",updatedAt:"2017-08-25T23:57:31.056Z",createdAt:"2017-06-08T23:11:04.184Z",domainName:"http://operator38.com",location:{_id:"5939d988fd8f030e112be7b8",updatedAt:"2017-08-25T23:57:31.047Z",createdAt:"2017-06-08T23:11:04.170Z",city:"Los Altos",country:"United States",countryCode:"US",state:"California",stateCode:"CA",streetAddress:"123 Main St, Los Altos, CA 94022, USA",zipCode:"94022",location:{coordinates:[-122.11463200000003,37.37982969999999],type:"Point"},zoom:12,tag:"Main Location",id:"5939d988fd8f030e112be7b8"},role:"operator",status:"active",payments:{stripeAccount:"5994da393437054cf951846c"},addRulesToPropertiesOnCreate:!0,languages:{sp:!1,fr:!1,en:!0},language:"en",reminders:{email:!1,sms:!1,id:null},primaryContact:{email:"tyler+operator38@adventurebucketlist.com",phoneNumber:"7169488938",fullName:"Operator 38"},social:{tripadvisor:"https://tripa111.com",twitter:"twittah111",instagram:"insta111",facebook:"shfacebook111"},preferences:{deposits:{amount:5e3,percent:null,threshold:1e4,priorDays:30,setting:"threshold"},notifications:{booking_confirmation_customer:{terms_conditions:"",signoff:"",custom_field_3:"",custom_field_2:"",custom_field_1:""}},tripadvisorReviewEmail:{delay:{period:"hour",number:3},active:!0},widget:{display:{timeslot:{startTime:!0,price:!0,duration:!0,availability:!0},theme:"blue",event:{isSiteWide:!0,cutoff:2880}}},customFields:{prior:15,notes:"Notes"},affiliate:{includeAddons:!1},features:{affiliates:!1,questions:!0,guides:!0,coupons:!0},id:null},companyImage:"https://dev-images.ablsolution.com/8642ae67-cfd1-4767-82e4-e239e7d7ca24.png",companyName:"Operator 38",groups:[],applicationFee:3,organizations:["ffffffffffffffffffffffff"],id:"5939d988fd8f030e112be7b9",bookings:null,createdDate:"2017-06-08T23:11:04.184Z",apiKeys:null}],id:"593ed86575634652759b1461",isDescriptionChanged:!1,isTitleChanged:!1,image:"https://dev-images.ablsolution.com/07b4e6f0-7f08-4aa2-b43b-1a7f57bd0379.png",operator:{_id:"5939d988fd8f030e112be7b9",calendarId:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",updatedAt:"2017-08-25T23:57:31.056Z",createdAt:"2017-06-08T23:11:04.184Z",domainName:"http://operator38.com",location:{_id:"5939d988fd8f030e112be7b8",updatedAt:"2017-08-25T23:57:31.047Z",createdAt:"2017-06-08T23:11:04.170Z",city:"Los Altos",country:"United States",countryCode:"US",state:"California",stateCode:"CA",streetAddress:"123 Main St, Los Altos, CA 94022, USA",zipCode:"94022",location:{coordinates:[-122.11463200000003,37.37982969999999],type:"Point"},zoom:12,tag:"Main Location",id:"5939d988fd8f030e112be7b8"},role:"operator",status:"active",payments:{stripeAccount:"5994da393437054cf951846c"},addRulesToPropertiesOnCreate:!0,languages:{sp:!1,fr:!1,en:!0},language:"en",reminders:{email:!1,sms:!1,id:null},primaryContact:{email:"tyler+operator38@adventurebucketlist.com",phoneNumber:"7169488938",fullName:"Operator 38"},social:{tripadvisor:"https://tripa111.com",twitter:"twittah111",instagram:"insta111",facebook:"shfacebook111"},preferences:{deposits:{amount:5e3,percent:null,threshold:1e4,priorDays:30,setting:"threshold"},notifications:{booking_confirmation_customer:{terms_conditions:"",signoff:"",custom_field_3:"",custom_field_2:"",custom_field_1:""}},tripadvisorReviewEmail:{delay:{period:"hour",number:3},active:!0},widget:{display:{timeslot:{startTime:!0,price:!0,duration:!0,availability:!0},theme:"blue",event:{isSiteWide:!0,cutoff:2880}}},customFields:{prior:15,notes:"Notes"},affiliate:{includeAddons:!1},features:{affiliates:!1,questions:!0,guides:!0,coupons:!0},id:null},companyImage:"https://dev-images.ablsolution.com/8642ae67-cfd1-4767-82e4-e239e7d7ca24.png",companyName:"Operator 38",groups:[],applicationFee:3,organizations:["ffffffffffffffffffffffff"],id:"5939d988fd8f030e112be7b9",bookings:null,createdDate:"2017-06-08T23:11:04.184Z",apiKeys:null}}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={attendees:1,bookings:["597a5dd9ccb2a23b516d1c01","59a49eeaf91c53477f5362f3"],calendarId:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",description:"SHIT MIDGETS in my hair SHIT MIDGETS FUCK PIDDLES!",endTime:"2017-09-01T16:00:00.000Z",eventInstanceId:"0kka3gs2pkrlt32tbvd2cemo08_20170901T140000Z",guides:[],maxOcc:8,minOcc:2,organizations:["5939d988fd8f030e112be7b9"],startTime:"2017-09-01T14:00:00.000Z",status:"active",timeslot:"593ed95375634652759b1464",timeZone:"America/New_York",title:"1111111",_id:"597a5dd9ccb2a23b516d1bf4",originalEndTime:"2017-09-01T16:00:00.000Z",originalStartTime:"2017-09-01T14:00:00.000Z",originalDescription:"SHIT MIDGETS in my hair SHIT MIDGETS FUCK PIDDLES!",originalTitle:"1111111",originalMaxOcc:8,originalMinOcc:2,updatedAt:"2017-08-28T22:53:30.852Z",createdAt:"2017-07-27T21:40:41.774Z",id:"597a5dd9ccb2a23b516d1bf4",isMinOccChanged:!1,isMaxOccChanged:!1,isTitleChanged:!1,isDescriptionChanged:!1,operator:"5939d988fd8f030e112be7b9",isStartTimeChanged:!1,isEndTimeChanged:!1,details:{aap:{Adult:2},addon:{"an addon":5},tax:{"a tax":2},fee:{"a fee":2},"one_time-credit":{Refund:1," (eeeee)":1,"Refund (qqqqq)":1},coupon:{NACHOCHEESE:1},service:{"Service Fee":1}}}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={_id:"593ed95375634652759b1464",eventId:"0kka3gs2pkrlt32tbvd2cemo08",originalUntilTime:"2019-06-14T06:59:00.000Z",originalEndTime:"2017-06-12T15:00:00.000Z",originalStartTime:"2017-06-12T14:00:00.000Z",originalDescription:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",originalTitle:"Poop Snacks",originalMaxOcc:8,originalMinOcc:2,updatedAt:"2017-07-27T21:40:41.803Z",createdAt:"2017-06-12T18:11:31.946Z",endTime:"2017-06-12T16:00:00.000Z",maxOcc:8,startTime:"2017-06-12T14:00:00.000Z",activity:"593ed86575634652759b1461",calendarId:"37hpr1e9jfocmmlqsd8cmjgbts@group.calendar.google.com",status:"active",description:"SHIT MIDGETS in my hair SHIT MIDGETS FUCK PIDDLES!",title:"1111111",minOcc:2,untilTime:"2019-06-15T03:59:00.000Z",daysRunning:[0,1,2,3,4,5,6],originalDaysRunning:[0,1,2,3,4,5,6],single:!1,timeZone:"America/New_York",discounts:[],charges:[{_id:"593ed95375634652759b1462",updatedAt:"2017-06-12T18:11:31.933Z",createdAt:"2017-06-12T18:11:31.933Z",amount:2e4,name:"Adult",type:"aap",status:"active",isDefault:!0,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],id:"593ed95375634652759b1462",operator:"5939d988fd8f030e112be7b9",quantity:0,$$hashKey:"object:429"},{_id:"593ed95375634652759b1463",updatedAt:"2017-06-12T18:11:31.934Z",createdAt:"2017-06-12T18:11:31.934Z",amount:5e3,name:"Youth",type:"aap",status:"active",isDefault:!1,frequency:"Daily",percentage:!1,organizations:["5939d988fd8f030e112be7b9"],id:"593ed95375634652759b1463",operator:"5939d988fd8f030e112be7b9",quantity:0,$$hashKey:"object:430"}],events:["5941972161cbb9537b3ac8c1","5941c0647451df3e1b7721bb","5941efe6c0a1d42d5f9196ee","594437a9a8779410db6314af","5953084d4311110b1beb2d81","59540509ad8aa062e608d9df","595426d2ad8aa062e608dd38","59542c3ead8aa062e608de46","595584a8ad8aa062e608ed83","5956d1eb32acad1e1f71f33f","59641c1f0a0ab843c08a5181","596435fa0a0ab843c08a5454","596448e7260dd02d60513a6a","59658bb656e16109a458f170","59668ea556e16109a458fa6c","5967d74c9718a2326c6bcb63","5967e73bcaa067395b72b43b","5967e854c9af3b3be865e0e8","5967ef2c05a7a040ae4094f5","596801eb86ac35026c2bf9bc","5968021786ac35026c2bf9e1","59680c155c3883227e34e5db","596811c7335c402d489abf89","596926ca7835b956a24d6237","596d0bbde3ec65054c68134a","596d0c31e3ec65054c68137c","596d8e2d414ff80d0ed33c48","596eba46414ff80d0ed34370","596ecac7e994820e921f73f6","596fb4589d76b83655e96ff6","596fb5f39d76b83655e97015","596fc1459d76b83655e97074","5970039114822271ee7cda3b","5970040b6ffbe019d53c2502","597005736ffbe019d53c2521","5971182c92511457960fa610","597133cf92511457960fa717","5971433e92511457960fa761","59779382010aa555daafc5e5","597a5dd9ccb2a23b516d1bf4"],guides:[],organizations:["5939d988fd8f030e112be7b9"],id:"593ed95375634652759b1464",isMinOccChanged:!1,isMaxOccChanged:!1,isTitleChanged:!1,isDescriptionChanged:!1,operator:"5939d988fd8f030e112be7b9",isStartTimeChanged:!1,isEndTimeChanged:!1,isUntilTimeChanged:!1,isDaysRunningChanged:!1}}]);
//# sourceMappingURL=./dst/abl-sdk.min.js.map
>>>>>>> b42eb22... Fix issue with attendees pricing zero
