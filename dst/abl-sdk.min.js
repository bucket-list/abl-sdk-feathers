webpackJsonp([0],[function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _rx=__webpack_require__(2),_rx2=_interopRequireDefault(_rx),_feathersClient=__webpack_require__(5),_feathersClient2=_interopRequireDefault(_feathersClient),_feathersLocalstorage=__webpack_require__(62),_feathersLocalstorage2=_interopRequireDefault(_feathersLocalstorage),_feathersReactive=__webpack_require__(76),_feathersReactive2=_interopRequireDefault(_feathersReactive),_superagent=__webpack_require__(84),_rx3=(_interopRequireDefault(_superagent),__webpack_require__(91)),_utils=(_interopRequireDefault(_rx3),__webpack_require__(93)),_utils2=_interopRequireDefault(_utils),_styles=__webpack_require__(94),_helperStyles=(_interopRequireDefault(_styles),__webpack_require__(99)),_angularMaterialIcons=(_interopRequireDefault(_helperStyles),__webpack_require__(101)),_rest=(_interopRequireDefault(_angularMaterialIcons),__webpack_require__(103)),_rest2=_interopRequireDefault(_rest),_toUppercase=__webpack_require__(104),_toUppercase2=_interopRequireDefault(_toUppercase),_formatPhone=__webpack_require__(105),_formatPhone2=_interopRequireDefault(_formatPhone),_focusParent=__webpack_require__(106),_focusParent2=_interopRequireDefault(_focusParent),_size=__webpack_require__(107),_navigator=(_interopRequireDefault(_size),__webpack_require__(108)),_navigator2=_interopRequireDefault(_navigator),_col=__webpack_require__(109),_col2=_interopRequireDefault(_col),_progressButton=__webpack_require__(111),_progressButton2=_interopRequireDefault(_progressButton),_progressButton3=__webpack_require__(113),_listItem=(_interopRequireDefault(_progressButton3),__webpack_require__(115)),_listItem2=_interopRequireDefault(_listItem),_listItemNumericControl=__webpack_require__(117),_listItemNumericControl2=_interopRequireDefault(_listItemNumericControl),_listItemAddCharge=__webpack_require__(119),_listItemAddCharge2=_interopRequireDefault(_listItemAddCharge),_listItemHeader=__webpack_require__(123),_listItemHeader2=_interopRequireDefault(_listItemHeader),sdkProvider=(__webpack_require__(125),window.jQuery,function(settings){var endpoint=null,apiKey=null,socketOpts=null,_useSocket=!0,services=[];return{useSocket:function(socketEnabled){_useSocket=!!socketEnabled},setSocketOpts:function(opts){socketOpts=opts},setEndpoint:function(newEndpoint){endpoint=newEndpoint},setApiKey:function(key){apiKey=key},setServices:function(newServices){services=newServices},getSettings:function(){return endpoint},$get:["$injector","$timeout","$log","$mdToast","$http",function($injector,$timeout,$log,$mdToast,$http){var $rootScope=$injector.get("$rootScope"),that=this;if(!endpoint)return this.app={},this.app;$log.debug("config",$rootScope.config),this.app=(0,_feathersClient2.default)().configure((0,_feathersReactive2.default)(_rx2.default)).configure(_feathersClient2.default.hooks()).use("cache",(0,_feathersLocalstorage2.default)({name:"abl"+($rootScope.config.DASHBOARD?"-dash":""),storage:window.localStorage})),this.app.endpoint=endpoint,this.app.apiKey=apiKey;var xsrfToken=(document.cookie.indexOf("XSRF-TOKEN="),"");if(this.app.headers={"Content-Type":"application/json;charset=utf-8"},apiKey&&(this.app.headers={"X-ABL-Access-Key":apiKey,"X-ABL-Date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"}),_useSocket)$log.debug("endpoint",endpoint),this.socket=io(endpoint,socketOpts),this.app.configure(_feathersClient2.default.socketio(this.socket));else{var addHeadersHook=function(hook){var x=document.cookie.split(";").map(function(s){return s.split("=")}).reduce(function(r,a){return r[a[0].trim()]=a[1],r},{});xsrfToken=x["XSRF-TOKEN"]||void 0,xsrfToken&&(that.app.headers["X-XSRF-TOKEN"]=xsrfToken),hook.params.headers=Object.assign({},that.app.headers,hook.params.headers),hook.params.withCredentials=!0},afterRequestHook=function(hook){};this.app.configure(_feathersClient2.default.rest(endpoint).jquery(window.jQuery,{headers:that.app.headers,withCredentials:!0})),this.app.mixins.push(function(service){service.before(addHeadersHook),service.after(afterRequestHook)})}return(0,_utils2.default)(this.app,$mdToast,$rootScope),(0,_rest2.default)(this.app,$http),$rootScope.loading=!0,this.app.loadingTimeout=null,this.app.loadingTimeout=$timeout(function(){$rootScope.loading=!1},1500),$rootScope.afterRender=function(current,total){$timeout.cancel(this.loadingTimeout),this.loadingTimeout=$timeout(function(){$rootScope.loading=!1},1500)},window.$abl=this.app,window.$http=$http,this.app}]}}),feathersSdk=[function(){return sdkProvider("feathers")}],ablSdk=[function(){return sdkProvider("abl")}];exports.default=angular.module("abl-sdk-feathers",["ngMaterial","rx","currency-component"]).provider("$abl",ablSdk).provider("$feathers",feathersSdk).filter("startFrom",function(){return function(input,start){return start=+start,input.slice(start)}}).service("navigatorService",_navigator2.default).directive("toUppercase",_toUppercase2.default).directive("formatPhone",_formatPhone2.default).directive("onFocus",_focusParent2.default).directive("formatPhone",_formatPhone2.default).component("colSection",_col2.default).component("progressButton",_progressButton2.default).component("listItem",_listItem2.default).component("listItemNumericControl",_listItemNumericControl2.default).component("listItemAddCharge",_listItemAddCharge2.default).component("listItemHeader",_listItemHeader2.default)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){function noop(){}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)pushEncodedKeyValuePair(pairs,key,obj[key]);return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(null!=val)if(Array.isArray(val))val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)});else if(isObject(val))for(var subkey in val)pushEncodedKeyValuePair(pairs,key+"["+subkey+"]",val[subkey]);else pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val));else null===val&&pairs.push(encodeURIComponent(key))}function parseString(str){for(var pair,pos,obj={},pairs=str.split("&"),i=0,len=pairs.length;i<len;++i)pair=pairs[i],pos=pair.indexOf("="),pos==-1?obj[decodeURIComponent(pair)]="":obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1));return obj}function parseHeader(str){for(var index,line,field,val,lines=str.split(/\r?\n/),fields={},i=0,len=lines.length;i<len;++i)line=lines[i],index=line.indexOf(":"),index!==-1&&(field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val);return fields}function isJSON(mime){return/[\/+]json($|[^-\w])/.test(mime)}function Response(req){this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var status=this.xhr.status;1223===status&&(status=204),this._setStatusProperties(status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&req._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function Request(method,url){var self=this;this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var err=null,res=null;try{res=new Response(self)}catch(e){return err=new Error("Parser is unable to parse the response"),err.parse=!0,err.original=e,self.xhr?(err.rawResponse="undefined"==typeof self.xhr.responseType?self.xhr.responseText:self.xhr.response,err.status=self.xhr.status?self.xhr.status:null,err.statusCode=err.status):(err.rawResponse=null,err.status=null),self.callback(err)}self.emit("response",res);var new_err;try{self._isResponseOK(res)||(new_err=new Error(res.statusText||"Unsuccessful HTTP response"))}catch(custom_err){new_err=custom_err}new_err?(new_err.original=err,new_err.response=res,new_err.status=res.status,self.callback(new_err,res)):self.callback(null,res)})}function del(url,data,fn){var req=request("DELETE",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}var root;root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var Emitter=__webpack_require__(85),RequestBase=__webpack_require__(86),isObject=__webpack_require__(87),ResponseBase=__webpack_require__(88),Agent=__webpack_require__(90),request=exports=module.exports=function(method,url){return"function"==typeof url?new exports.Request("GET",method).end(url):1==arguments.length?new exports.Request("GET",method):new exports.Request(method,url)};exports.Request=Request,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},ResponseBase(Response.prototype),Response.prototype._parseBody=function(str){var parse=request.parse[this.type];return this.req._parser?this.req._parser(this,str):(!parse&&isJSON(this.type)&&(parse=request.parse["application/json"]),parse&&str&&(str.length||str instanceof Object)?parse(str):null)},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot "+method+" "+url+" ("+this.status+")",err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype),RequestBase(Request.prototype),Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass,options){1===arguments.length&&(pass=""),"object"==typeof pass&&null!==pass&&(options=pass,pass=""),options||(options={type:"function"==typeof btoa?"basic":"auto"});var encoder=function(string){if("function"==typeof btoa)return btoa(string);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(user,pass,options,encoder)},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.attach=function(field,file,options){if(file){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(field,file,options||file.name)}return this},Request.prototype._getFormData=function(){return this._formData||(this._formData=new root.FormData),this._formData},Request.prototype.callback=function(err,res){if(this._shouldRetry(err,res))return this._retry();var fn=this._callback;this.clearTimeout(),err&&(this._maxRetries&&(err.retries=this._retries-1),this.emit("error",err)),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=!0,err.status=this.status,err.method=this.method,err.url=this.url,this.callback(err)},Request.prototype.buffer=Request.prototype.ca=Request.prototype.agent=function(){return this},Request.prototype.pipe=Request.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},Request.prototype._isHost=function(obj){return obj&&"object"==typeof obj&&!Array.isArray(obj)&&"[object Object]"!==Object.prototype.toString.call(obj)},Request.prototype.end=function(fn){return this._endCalled,this._endCalled=!0,this._callback=fn||noop,this._finalizeQueryString(),this._end()},Request.prototype._end=function(){var self=this,xhr=this.xhr=request.getXHR(),data=this._formData||this._data;this._setTimeouts(),xhr.onreadystatechange=function(){var readyState=xhr.readyState;if(readyState>=2&&self._responseTimeoutTimer&&clearTimeout(self._responseTimeoutTimer),4==readyState){var status;try{status=xhr.status}catch(e){status=0}if(!status){if(self.timedout||self._aborted)return;return self.crossDomainError()}self.emit("end")}};var handleProgress=function(direction,e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction=direction,self.emit("progress",e)};if(this.hasListeners("progress"))try{xhr.onprogress=handleProgress.bind(null,"download"),xhr.upload&&(xhr.upload.onprogress=handleProgress.bind(null,"upload"))}catch(e){}try{this.username&&this.password?xhr.open(this.method,this.url,!0,this.username,this.password):xhr.open(this.method,this.url,!0)}catch(err){return this.callback(err)}if(this._withCredentials&&(xhr.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!this._isHost(data)){var contentType=this._header["content-type"],serialize=this._serializer||request.serialize[contentType?contentType.split(";")[0]:""];!serialize&&isJSON(contentType)&&(serialize=request.serialize["application/json"]),serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&this.header.hasOwnProperty(field)&&xhr.setRequestHeader(field,this.header[field]);return this._responseType&&(xhr.responseType=this._responseType),this.emit("request",this),xhr.send("undefined"!=typeof data?data:null),this},request.agent=function(){return new Agent},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(method){Agent.prototype[method.toLowerCase()]=function(url,fn){var req=new request.Request(method,url);return this._setDefaults(req),fn&&req.end(fn),req}}),Agent.prototype.del=Agent.prototype.delete,request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.options=function(url,data,fn){var req=request("OPTIONS",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=del,request.delete=del,request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}},function(module,exports,__webpack_require__){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports,__webpack_require__){"use strict";function RequestBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in RequestBase.prototype)obj[key]=RequestBase.prototype[key];return obj}var isObject=__webpack_require__(87);module.exports=RequestBase,RequestBase.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},RequestBase.prototype.parse=function(fn){return this._parser=fn,this},RequestBase.prototype.responseType=function(val){return this._responseType=val,this},RequestBase.prototype.serialize=function(fn){return this._serializer=fn,this},RequestBase.prototype.timeout=function(options){if(!options||"object"!=typeof options)return this._timeout=options,this._responseTimeout=0,this;for(var option in options)switch(option){case"deadline":this._timeout=options.deadline;break;case"response":this._responseTimeout=options.response}return this},RequestBase.prototype.retry=function(count,fn){return 0!==arguments.length&&count!==!0||(count=1),count<=0&&(count=0),this._maxRetries=count,this._retries=0,this._retryCallback=fn,this};var ERROR_CODES=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];RequestBase.prototype._shouldRetry=function(err,res){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var override=this._retryCallback(err,res);if(override===!0)return!0;if(override===!1)return!1}catch(e){}if(res&&res.status&&res.status>=500&&501!=res.status)return!0;if(err){if(err.code&&~ERROR_CODES.indexOf(err.code))return!0;if(err.timeout&&"ECONNABORTED"==err.code)return!0;if(err.crossDomain)return!0}return!1},RequestBase.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},RequestBase.prototype.then=function(resolve,reject){if(!this._fullfilledPromise){var self=this;this._endCalled,this._fullfilledPromise=new Promise(function(innerResolve,innerReject){self.end(function(err,res){err?innerReject(err):innerResolve(res)})})}return this._fullfilledPromise.then(resolve,reject)},RequestBase.prototype.catch=function(cb){return this.then(void 0,cb)},RequestBase.prototype.use=function(fn){return fn(this),this},RequestBase.prototype.ok=function(cb){if("function"!=typeof cb)throw Error("Callback required");return this._okCallback=cb,this},RequestBase.prototype._isResponseOK=function(res){return!!res&&(this._okCallback?this._okCallback(res):res.status>=200&&res.status<300)},RequestBase.prototype.get=function(field){return this._header[field.toLowerCase()]},RequestBase.prototype.getHeader=RequestBase.prototype.get,RequestBase.prototype.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},RequestBase.prototype.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},RequestBase.prototype.field=function(name,val){if(null===name||void 0===name)throw new Error(".field(name, val) name can not be empty");if(this._data,isObject(name)){for(var key in name)this.field(key,name[key]);return this}if(Array.isArray(val)){for(var i in val)this.field(name,val[i]);return this}if(null===val||void 0===val)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof val&&(val=""+val),this._getFormData().append(name,val),this},RequestBase.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},RequestBase.prototype._auth=function(user,pass,options,base64Encoder){switch(options.type){case"basic":this.set("Authorization","Basic "+base64Encoder(user+":"+pass));break;case"auto":this.username=user,this.password=pass;break;case"bearer":this.set("Authorization","Bearer "+user)}return this},RequestBase.prototype.withCredentials=function(on){return void 0==on&&(on=!0),this._withCredentials=on,this},RequestBase.prototype.redirects=function(n){return this._maxRedirects=n,this},RequestBase.prototype.maxResponseSize=function(n){if("number"!=typeof n)throw TypeError("Invalid argument");return this._maxResponseSize=n,this},RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},RequestBase.prototype.send=function(data){var isObj=isObject(data),type=this._header["content-type"];if(this._formData,isObj&&!this._data)Array.isArray(data)?this._data=[]:this._isHost(data)||(this._data={});else if(data&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(isObj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else"string"==typeof data?(type||this.type("form"),type=this._header["content-type"],"application/x-www-form-urlencoded"==type?this._data=this._data?this._data+"&"+data:data:this._data=(this._data||"")+data):this._data=data;return!isObj||this._isHost(data)?this:(type||this.type("json"),this)},RequestBase.prototype.sortQuery=function(sort){return this._sort="undefined"==typeof sort||sort,this},RequestBase.prototype._finalizeQueryString=function(){var query=this._query.join("&");if(query&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+query),this._query.length=0,this._sort){var index=this.url.indexOf("?");if(index>=0){var queryArr=this.url.substring(index+1).split("&");"function"==typeof this._sort?queryArr.sort(this._sort):queryArr.sort(),this.url=this.url.substring(0,index)+"?"+queryArr.join("&")}}},RequestBase.prototype._appendQueryString=function(){},RequestBase.prototype._timeoutError=function(reason,timeout,errno){if(!this._aborted){var err=new Error(reason+timeout+"ms exceeded");err.timeout=timeout,err.code="ECONNABORTED",err.errno=errno,this.timedout=!0,this.abort(),this.callback(err)}},RequestBase.prototype._setTimeouts=function(){var self=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){self._timeoutError("Timeout of ",self._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){self._timeoutError("Response timeout of ",self._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(module,exports){"use strict";function isObject(obj){return null!==obj&&"object"==typeof obj}module.exports=isObject},function(module,exports,__webpack_require__){"use strict";function ResponseBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in ResponseBase.prototype)obj[key]=ResponseBase.prototype[key];return obj}var utils=__webpack_require__(89);module.exports=ResponseBase,ResponseBase.prototype.get=function(field){return this.header[field.toLowerCase()]},ResponseBase.prototype._setHeaderProperties=function(header){var ct=header["content-type"]||"";this.type=utils.type(ct);var params=utils.params(ct);for(var key in params)this[key]=params[key];this.links={};try{header.link&&(this.links=utils.parseLinks(header.link))}catch(err){}},ResponseBase.prototype._setStatusProperties=function(status){var type=status/100|0;this.status=this.statusCode=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.redirect=3==type,this.clientError=4==type,this.serverError=5==type,this.error=(4==type||5==type)&&this.toError(),this.created=201==status,this.accepted=202==status,this.noContent=204==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.forbidden=403==status,this.notFound=404==status,this.unprocessableEntity=422==status}},function(module,exports){"use strict";exports.type=function(str){return str.split(/ *; */).shift()},exports.params=function(str){return str.split(/ *; */).reduce(function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})},exports.parseLinks=function(str){return str.split(/ *, */).reduce(function(obj,str){var parts=str.split(/ *; */),url=parts[0].slice(1,-1),rel=parts[1].split(/ *= */)[1].slice(1,-1);return obj[rel]=url,obj},{})},exports.cleanHeader=function(header,changesOrigin){return delete header["content-type"],delete header["content-length"],delete header["transfer-encoding"],delete header.host,changesOrigin&&(delete header.authorization,delete header.cookie),header}},function(module,exports){function Agent(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(fn){Agent.prototype[fn]=function(){return this._defaults.push({fn:fn,arguments:arguments}),this}}),Agent.prototype._setDefaults=function(req){this._defaults.forEach(function(def){req[def.fn].apply(req,def.arguments)})},module.exports=Agent},,,function(module,exports){"use strict";function setupUtilityFunctions(app,$mdToast,$rootScope){return app.showToast=function(msg,toastClass,delay){if(!toastClass)var toastClass="";if(!delay)var delay=3e3;var toast=$mdToast.simple().toastClass(toastClass).textContent(msg).action("Hide").hideDelay(delay).position("bottom left").highlightAction(!1);$mdToast.show(toast)},app.randomInt=function(min,max){return Math.floor(Math.random()*(max-min+1)+min)},$rootScope.showToast=function(a,b,c){app.showToast(a,b,c)},$rootScope.safeApply=function(fn){if(this.$root){var phase=this.$root.$$phase;"$apply"===phase||"$digest"===phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}else this.$apply(fn)},app}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=setupUtilityFunctions},function(module,exports,__webpack_require__){var content=__webpack_require__(95);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,'md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.red{color:#dd2c00}.paymentResponseContainer{display:block;height:auto;background-color:#fff;overflow-y:auto}.activityPaymentSummaryCard{margin:8px 0}.paymentSummaryCard{min-width:100%;margin-bottom:0!important;margin-top:0!important;margin-right:16px;background:none;box-shadow:none;height:100%;padding:20px}.paymentSummaryCardNewContent{background-color:#fff}.paymentSummaryCardResponse{padding:8px}.rightCheckoutPanel{background-color:#fff!important}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:0;padding-left:0}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:0}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url("https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.agentCommission,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{padding:0}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:0 4px}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.remove-coupon{cursor:pointer}.toUppercase{text-transform:uppercase}md-list-item:hover{background:transparent}.md-button:not([disabled]):hover,md-list-item.md-button.md-default-theme:not([disabled]):hover{background-color:transparent}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.agentInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none;margin-top:1px}.remove-agent-code{cursor:pointer}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 32px 8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}.confirmation{padding:20px 0;text-align:center}.confirmation h3{text-align:center;margin-bottom:20px}.confirmation .margin-top{margin-top:8px}.confirmation .booking-id{padding:15px;margin:8px auto;width:260px;opacity:.8;font-weight:700;color:#fff}body[md-theme=blue] .confirmation .booking-id{background:#2196f3}body[md-theme=teal] .confirmation .booking-id{background:#009688}body[md-theme=green] .confirmation .booking-id{background:#4caf50}body[md-theme=grey] .confirmation .booking-id{background:#9e9e9e}body[md-theme=blue_grey] .confirmation .booking-id{background:#607d8b}body[md-theme=yellow] .confirmation .booking-id{background:#ffeb3b;color:#000}body[md-theme=indigo] .confirmation .booking-id{background:#3f51b5}body[md-theme=red] .confirmation .booking-id{background:#f44336}body[md-theme=black] .confirmation .booking-id{background:#000}body[md-theme=pink] .confirmation .booking-id{background:#e07bb5}body[md-theme=white] .confirmation .booking-id{background:#eee;color:#000}body[md-theme=dark_blue] .confirmation .booking-id{background:#1e88e5}body[md-theme=purple] .confirmation .booking-id{background:#9c27b0}body[md-theme=orange] .confirmation .booking-id{background:#ff6d00}@media(max-width:600px){.confirmation{padding:20px;font-size:13px}.paymentSummaryCard{margin:0}}@media(min-width:743px) and (max-width:1024px){.paymentSummaryCard{margin-left:0}}.picker-container{border-radius:2px;background:#fff}.bigDateToolbar{background:#fff!important;color:#000!important}.activity-dialog-container{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;z-index:80;overflow:hidden}.activity-dialog,md-dialog.activity-dialog{max-height:80%;max-width:90%;position:relative;overflow:auto;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12);display:-ms-flexbox;display:flex;overflow-x:hidden;overflow-y:hidden;-ms-flex-direction:column;flex-direction:column}.activity-dialog,md-dialog md-dialog-content{padding:0;overflow:hidden}.no-margin{margin:0!important}.leftCard{background:rgba(0,0,0,.025)}.activityBookDialogLarge{width:100%;min-height:500px;height:100%;background-color:#fff}.leftCardLarge{border-right:1px solid #e4e4e4!important;box-shadow:1px 0 5px 1px rgba(0,0,0,.12)!important;min-height:100%;min-width:420px;width:50%;position:absolute;height:100%;overflow-y:scroll}.leftCardSmall{border-bottom:1px solid #e4e4e4!important;box-shadow:0 1px 5px rgba(0,0,0,.08)!important}.rightCardLarge{position:absolute;right:0;min-width:420px;width:50%;display:block;height:100%}.activity-total-include{height:100%}.couponText{font-size:16px}.couponTextTotal{font-size:16px;padding-right:12px}.listItemAutocomplete{padding-left:0!important}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;margin-right:-8px;outline:none;background:transparent}.activityPaymentSummaryCard{margin-bottom:0!important;margin-top:0!important;margin-right:0;margin-left:0;background:none;box-shadow:none;position:relative;height:100%}.activityCardForm{margin:0 16px}.detailsForm{padding-left:16px;padding-right:16px}.listItemInputContainer{margin:10px 0!important;position:relative;padding:2px;vertical-align:middle;display:inline-block!important;margin-top:-10px!important;width:100%!important}.listItemInputContainerNoMargin{margin-top:0!important;margin-bottom:0!important}.formContainer{padding:16px!important;padding-top:42px!important}md-input-container{margin:18px 0}md-input-container .md-input-messages-animation{text-align:right}',""]);
},function(module,exports){function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=toComment(cssMapping),sourceURLs=cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"});return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,"+base64;return"/*# "+data+" */"}module.exports=function(useSourceMap){var list=[];return list.toString=function(){return this.map(function(item){var content=cssWithMappingToString(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,styleElement){var styleTarget=getElement(options.insertInto);if(!styleTarget)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?styleTarget.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling):styleTarget.appendChild(styleElement):styleTarget.insertBefore(styleElement,styleTarget.firstChild),styleElementsInsertedAtTop.push(styleElement);else{if("bottom"!==options.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");styleTarget.appendChild(styleElement)}}function removeStyleElement(styleElement){styleElement.parentNode.removeChild(styleElement);var idx=styleElementsInsertedAtTop.indexOf(styleElement);idx>=0&&styleElementsInsertedAtTop.splice(idx,1)}function createStyleElement(options){var styleElement=document.createElement("style");return options.attrs.type="text/css",attachTagAttrs(styleElement,options.attrs),insertStyleElement(options,styleElement),styleElement}function createLinkElement(options){var linkElement=document.createElement("link");return options.attrs.type="text/css",options.attrs.rel="stylesheet",attachTagAttrs(linkElement,options.attrs),insertStyleElement(options,linkElement),linkElement}function attachTagAttrs(element,attrs){Object.keys(attrs).forEach(function(key){element.setAttribute(key,attrs[key])})}function addStyle(obj,options){var styleElement,update,remove;if(options.singleton){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement(options)),update=applyToSingletonTag.bind(null,styleElement,styleIndex,!1),remove=applyToSingletonTag.bind(null,styleElement,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(styleElement=createLinkElement(options),update=updateLink.bind(null,styleElement,options),remove=function(){removeStyleElement(styleElement),styleElement.href&&URL.revokeObjectURL(styleElement.href)}):(styleElement=createStyleElement(options),update=applyToTag.bind(null,styleElement),remove=function(){removeStyleElement(styleElement)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=styleElement.childNodes;childNodes[index]&&styleElement.removeChild(childNodes[index]),childNodes.length?styleElement.insertBefore(cssNode,childNodes[index]):styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css,media=obj.media;if(media&&styleElement.setAttribute("media",media),styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}function updateLink(linkElement,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=linkElement.href;linkElement.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},memoize=function(fn){var memo;return function(){return"undefined"==typeof memo&&(memo=fn.apply(this,arguments)),memo}},isOldIE=memoize(function(){return window&&document&&document.all&&!window.atob}),getElement=function(fn){var memo={};return function(selector){return"undefined"==typeof memo[selector]&&(memo[selector]=fn.call(this,selector)),memo[selector]}}(function(styleTarget){return document.querySelector(styleTarget)}),singletonElement=null,singletonCounter=0,styleElementsInsertedAtTop=[],fixUrls=__webpack_require__(98);module.exports=function(list,options){options=options||{},options.attrs="object"==typeof options.attrs?options.attrs:{},"undefined"==typeof options.singleton&&(options.singleton=isOldIE()),"undefined"==typeof options.insertInto&&(options.insertInto="head"),"undefined"==typeof options.insertAt&&(options.insertAt="bottom");var styles=listToStyles(list);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){var newStyles=listToStyles(newList);addStylesToDom(newStyles,options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/"),fixedCss=css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl))return fullMatch;var newUrl;return newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")"});return fixedCss}},function(module,exports,__webpack_require__){var content=__webpack_require__(100);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,".no-margin-top{margin-top:0!important}.no-margin-bottom{margin-bottom:0!important}.no-margin-right{margin-right:0!important}.no-margin-left{margin-left:0!important}.margin-right-30{margin-right:30px}.no-padding{padding:0!important}.green{color:green}",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(102);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,'/*!\n * Angular Material Design\n * https://github.com/angular/material\n * @license MIT\n * v0.9.7\n */md-autocomplete button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0) scale(.9);transform:translate3d(-50%,-50%,0) scale(.9)}md-autocomplete button ng-md-icon path{stroke-width:0}.md-button.ng-md-icon{padding:0;background:none}.md-button.md-fab ng-md-icon{margin-top:0}md-checkbox .ng-md-icon{transition:.24s;position:absolute;top:0;left:0;width:18px;height:18px;border:2px solid;border-radius:2px}md-checkbox.md-checked .ng-md-icon{border:none}md-checkbox.md-checked .ng-md-icon:after{-webkit-transform:rotate(45deg);transform:rotate(45deg);position:absolute;left:6px;top:2px;display:table;width:6px;height:12px;border:2px solid;border-top:0;border-left:0;content:""}.md-chips .md-chip .md-chip-remove ng-md-icon{height:18px;width:18px;position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}ng-md-icon{background-repeat:no-repeat;display:inline-block;vertical-align:middle;fill:currentColor;height:24px;width:24px}ng-md-icon svg{pointer-events:none;display:block}ng-md-icon[md-font-icon]{line-height:1;width:auto}md-input-container>ng-md-icon{position:absolute;top:5px;left:2px}md-input-container>ng-md-icon+input{margin-left:36px}md-input-container.md-icon-float>ng-md-icon{top:26px;left:2px}md-input-container.md-icon-float>ng-md-icon+input{margin-left:36px}@media screen and (-ms-high-contrast:active){md-input-container.md-default-theme>ng-md-icon{fill:#fff}}md-list-item .md-list-item-inner>div.md-primary>ng-md-icon,md-list-item .md-list-item-inner>div.md-secondary>ng-md-icon,md-list-item .md-list-item-inner>ng-md-icon.md-secondary,md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>div.md-primary>ng-md-icon,md-list-item>div.md-secondary>ng-md-icon,md-list-item>ng-md-icon.md-secondary,md-list-item>ng-md-icon:first-child{width:24px;margin-top:16px;margin-bottom:12px;box-sizing:content-box}md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>ng-md-icon:first-child{margin-right:32px}md-list-item.md-2-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-2-line>ng-md-icon:first-child{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}md-list-item.md-3-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-3-line>ng-md-icon:first-child{margin-top:16px}md-tabs-wrapper md-next-button ng-md-icon,md-tabs-wrapper md-prev-button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}md-tabs-wrapper md-next-button ng-md-icon{-webkit-transform:translate3d(-50%,-50%,0) rotate(180deg);transform:translate3d(-50%,-50%,0) rotate(180deg)}',""])},function(module,exports){"use strict";function rest(app,$http){var Rx=window.Rx;window.moment;app.api={},app.api.activity={get:function(query){return Rx.Observable.fromPromise(activityService.find(query||{})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response.list})},find:function(query){return Rx.Observable.fromPromise(activitySearchService.find(query||{})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response})}},app.api.timeslots={getRange:function(d){return Rx.Observable.fromPromise($http({method:"GET",url:app.endpoint+"/timeslots?",data:d,headers:app.headers})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response.data.list})},get:function(id){return Rx.Observable.fromPromise($http({method:"GET",url:app.endpoint+"/timeslots?id="+id,headers:app.headers})).catch(function(response){return Rx.Observable.empty()}).select(function(response){return response})}};var activityService=app.service("activities"),activitySearchService=(app.service("events"),app.service("timeslots"),app.service("search"));app.activitySearchInterval=function(t){return setInterval(function(){activitySearchService.find({query:{sort:"-updatedAt"}})},t)};var cache=app.service("cache"),max=500;cache.get("activities").then(function(res){}).catch(function(res){cache.create({id:"activities",data:{},map:[]})});var updateCache=function(store){return function(hook){var modified=!1;cache.get("activities").then(function(activities){activities.updated=[];var acs=Rx.Observable.fromArray(hook.result.data);acs.map(function(res){return res}).filter(function(res){return void 0==activities.data[res._id]}).subscribe(function(x){modified=!0,activities.data[x._id]=x,activities.map.push(x._id),activities.updated.push(x._id)},function(err){return Promise.resolve(hook)},function(){if(modified){if(activities.map.length>max)for(var i=0;i<activities.map.length-max;i++)delete activities.data[activities.map[i]];activities.total=hook.result.total,cache.update("activities",activities).then(function(){return Promise.resolve(hook)})}})})}};return activitySearchService.after({all:[],find:[updateCache()]}),app.cache=cache,app}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=rest},function(module,exports){"use strict";function toUppercase(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var capitalize=function(inputValue){void 0==inputValue&&(inputValue="");var capitalized=inputValue.toUpperCase();return capitalized!==inputValue&&(modelCtrl.$setViewValue(capitalized),modelCtrl.$render()),capitalized};modelCtrl.$parsers.push(capitalize),capitalize(scope[attrs.ngModel])}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=toUppercase},function(module,exports){"use strict";function formatPhone(){return{require:"ngModel",restrict:"A",link:function(scope,elem,attrs,ctrl,ngModel){elem.add(phonenumber).on("keyup",function(){var origVal=elem.val().replace(/[^\w\s]/gi,"");if(10===origVal.length){var str=origVal.replace(/(.{3})/g,"$1-"),phone=str.slice(0,-2)+str.slice(-1);jQuery("#phonenumber").val(phone)}})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=formatPhone},function(module,exports){"use strict";function focusParent(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var elem=$(element[0].parentElement);element.on("focus",function(){elem.addClass(attrs.onFocus)}),element.on("blur",function(){elem.removeClass(attrs.onFocus)})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=focusParent},function(module,exports){"use strict";function size(){return{link:function(scope,element,attrs,modelCtrl){if(attrs.size){var elem=$(element[0].children[0]);elem.addClass(attrs.size)}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=size},function(module,exports){"use strict";function navigatorService($window,$q){function getCurrentPosition(){var deferred=$q.defer();return $window.navigator.geolocation?$window.navigator.geolocation.getCurrentPosition(function(position){deferred.resolve(position)},function(err){deferred.reject()}):deferred.reject("Geolocation not supported."),deferred.promise}return{getCurrentPosition:getCurrentPosition}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=navigatorService,navigatorService.$inject=["$window","$q"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _column=__webpack_require__(110),_column2=_interopRequireDefault(_column),col={bindings:{pos:"@",size:"@"},controller:function($element,$scope){this.$onInit=function(){this.pos||(this.position="start center"),"right"==this.pos?this.position="end center":this.position=this.pos},this.$onChanges=function(changesObj){},this.$postLink=function(){}},template:_column2.default,transclude:!0,controllerAs:"vm"};exports.default=col},function(module,exports){module.exports="<div layout=row layout-align={{vm.position}} ng-transclude flex></div>"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _progressButton=__webpack_require__(112),_progressButton2=_interopRequireDefault(_progressButton),progressButton={bindings:{loading:"<",class:"@",ngDisabled:"<",spinner:"<",stroke:"@",fill:"@",label:"@",onClick:"&"},controller:function($element,$scope,$log){var _this=this;this.$onInit=function(){$log.debug("progressButton",this),this.loading&&$log.debug("progressButton:loading",this.loading),$log.debug("progressButton disabled",this.ngDisabled)},this.$onChanges=function(changesObj){$log.debug("progressButton changes ",changesObj),_this.disabled=_this.ngDisabled},this.$postLink=function(){}},template:_progressButton2.default,transclude:!0,controllerAs:"vm"};exports.default=progressButton},function(module,exports){module.exports='<md-button layout=row layout-align="center center" class={{vm.class}} ng-disabled="vm.loading || vm.disabled" ng-click=vm.onClick()> <div layout=row layout-align="center center"> <svg ng-show="vm.loading && vm.spinner == 1" version=1.1 id=loader-1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=24px viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space=preserve> <path fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" d=M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z> <animateTransform attributeType=xml attributeName=transform type=rotate from="0 25 25" to="360 25 25" dur=0.6s repeatCount=indefinite /> </path> </svg> <svg ng-show="vm.loading && vm.spinner == 2" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox="0 0 24 30" style="enable-background:new 0 0 50 50" xml:space=preserve> <rect x=0 y=0 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}"> <animateTransform attributeType=xml attributeName=transform type=translate values="0 0; 0 20; 0 0" begin=0 dur=0.6s repeatCount=indefinite /> </rect> <rect x=10 y=0 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}"> <animateTransform attributeType=xml attributeName=transform type=translate values="0 0; 0 20; 0 0" begin=0.2s dur=0.6s repeatCount=indefinite /> </rect> <rect x=20 y=0 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}"> <animateTransform attributeType=xml attributeName=transform type=translate values="0 0; 0 20; 0 0" begin=0.4s dur=0.6s repeatCount=indefinite /> </rect> </svg> <svg ng-show="vm.loading && vm.spinner == 3" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox="0 0 24 30" style="enable-background:new 0 0 50 50" xml:space=preserve> <rect x=0 y=10 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity=0.2> <animate attributeName=opacity attributeType=XML values="0.2; 1; .2" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values="10; 20; 10" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values="10; 5; 10" begin=0s dur=0.6s repeatCount=indefinite /> </rect> <rect x=8 y=10 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity=0.2> <animate attributeName=opacity attributeType=XML values="0.2; 1; .2" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values="10; 20; 10" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values="10; 5; 10" begin=0.15s dur=0.6s repeatCount=indefinite /> </rect> <rect x=16 y=10 width=4 height=10 fill="{{vm.fill || \'#fff\'}}" stroke="{{vm.stroke || \'\'}}" opacity=0.2> <animate attributeName=opacity attributeType=XML values="0.2; 1; .2" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values="10; 20; 10" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values="10; 5; 10" begin=0.3s dur=0.6s repeatCount=indefinite /> </rect> </svg> </div> <span ng-show=!vm.loading>{{vm.label}}</span> </md-button>'},function(module,exports,__webpack_require__){var content=__webpack_require__(114);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,"progress-button{outline:none;margin:0!important}progress-button,progress-button md-button{pointer-events:auto}",""])},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItem=__webpack_require__(116),_listItem2=_interopRequireDefault(_listItem),listItem={bindings:{size:"@"},controller:function($element,$scope){this.$onInit=function(){},this.$onChanges=function(changesObj){},this.$postLink=function(){}},template:_listItem2.default,transclude:!0,controllerAs:"vm"};exports.default=listItem},function(module,exports){module.exports="<div layout=row class=listItem ng-class=[vm.size] flex=100 ng-transclude> </div>"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItemNumericControl=__webpack_require__(118),_listItemNumericControl2=_interopRequireDefault(_listItemNumericControl),listItemNumericControl={restrict:"E",bindings:{value:"=",label:"@",price:"@",max:"@",min:"@ ",size:"@"},template:_listItemNumericControl2.default,controller:function($element){var _this=this;this.min=0,this.$onInit=function(){this.elem=$($element[0].children[0]),this.value||(this.value=0)},this.$onChanges=function(changesObj){},this.$postLink=function(){},this.increment=function(){(void 0==this.max||this.max>this.value)&&this.value++},this.decrement=function(){this.value>this.min&&this.value--},this.checkAdjustValue=function(){_this.value>_this.max&&(_this.value=_this.max),_this.value<_this.min&&(_this.value=_this.min)}},controllerAs:"vm"};exports.default=listItemNumericControl},function(module,exports){module.exports='<div layout=row class=listItem ng-class=[vm.size] flex=100> <div layout=row layout-align="start center" flex> <div layout=column class=""> <span class=lineItemSubHeader>{{vm.label}}</span> <div layout=row> <span class=lineItemSubDetail>{{vm.price | ablCurrency: $root.currency}}</span> </div> </div> </div> <div layout=row layout-align="end center"> <div layout=column class=addOnAdjusters layout-align="center end" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub md-colors="{\'fill\': \'primary-A200\'}" ng-click=vm.increment();> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline" class=listIconSub ng-click=vm.decrement();></ng-md-icon> </div> <div layout=column layout-align="end end"> <input class=addOnQuantityText ng-model=vm.value ng-change=vm.checkAdjustValue(); type=number md-select-on-focus> </div> </div> </div>'},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItemAddCharge=__webpack_require__(120),_listItemAddCharge2=_interopRequireDefault(_listItemAddCharge);__webpack_require__(121);var listItemAddCharge={bindings:{add:"<",group:"=",buttonClass:"@"},template:_listItemAddCharge2.default,controller:function($scope){this.price=0,this.$onInit=function(){},this.$onChanges=function(changesObj){},this.$postLink=function(){}},controllerAs:"vm"};exports.default=listItemAddCharge},function(module,exports){module.exports='<md-list-item class=addOnListItem> <div layout=row layout-align="start center" flex> <md-input-container class="buttonInlineInput full-width"> <label>Name</label> <input class=buttonInlineInput ng-model=vm.label> </md-input-container> </div> <div layout=row layout-align="end center" flex=20> <md-input-container class="buttonInlineInput full-width"> <label>Price</label> <input class="full-width buttonInlineInput" md-select-on-focus ng-model=vm.price type=number min=0 step=0.01> </md-input-container> </div> <div layout=row> <md-button ng-disabled="!vm.label || !vm.price" ng-class="[vm.buttonClass.length > 0 ? vm.buttonClass : \'md-raised\']" ng-click="vm.add(vm.label, vm.price)"> Add </md-button> </div> </md-list-item>'},function(module,exports,__webpack_require__){var content=__webpack_require__(122);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,".full-width{width:100%}.text-align-left{text-align:left!important}col-section{width:100%}md-checkbox.listItemCheckbox .md-label{margin-top:26px;margin-left:38px}list-item,list-item-header,list-item-numeric-control{display:block;width:100%}.listItem{height:72px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItem md-checkbox .md-container{height:4px}.listItem.md{min-height:56px;height:56px;line-height:56px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.lg.slideDown.ng-hide{height:0!important}.lg.slideDown,.lg.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.lg.slideDown{height:72px;line-height:72px}.lg.slideDown.ng-hide-add,.lg.slideDown.ng-hide-remove{display:block!important}.lg.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.lg.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.listItem.sm{height:36px;line-height:36px;min-height:36px;padding:0 16px;font-size:12px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItem md-autocomplete input:not(.md-input){height:100%!important;line-height:100%!important;padding:0}.listItem md-autocomplete md-autocomplete-wrap{box-shadow:none!important;height:100%!important}.listItem md-autocomplete{padding:0!important}.listItemAutoCompleteAfterContainer{margin-top:-20px!important}.listItemFocus{box-shadow:0 1px 0 rgba(255,152,0,.4),0 -1px 0 rgba(255,152,0,.4),inset 0 1px 4px rgba(255,152,0,.2),inset 0 -1px 4px rgba(255,152,0,.2)!important;background:#fff}input.buttonInlineInput{padding:0;border-width:0;-ms-flex-preferred-size:36px;font-size:inherit;width:100%;border:none;outline:none;box-sizing:border-box;float:left;background:transparent}.inputStatusIcon{height:24px;width:36px;margin-bottom:42px!important;margin-right:4px!important}.listItemGreyFocus{box-shadow:0 1px 0 rgba(0,0,0,.28),0 -1px 0 rgba(0,0,0,.28),inset 0 1px 4px rgba(0,0,0,.16),inset 1px -1px 4px rgba(0,0,0,.2)!important}.listItemGreyFocus input,textarea{color:#3f51b5}.listItemGreyFocus ng-md-icon.listItemHeaderIcon{fill:#3f51b5}.listItemFocusBottomBorder{box-shadow:0 2px 0 rgba(58,171,56,.92),inset 0 -1px 3px rgba(57,73,171,.2),inset 0 1px rgba(0,0,0,.1)!important}.listItemFocusBottomBorder input,textarea{color:#000}md-input-container.buttonInlineInput{display:inline-block;position:relative;height:36px;padding:5px;margin:0;vertical-align:middle}.listItemPadding{padding:0 16px}.listItem.listItemHeader{font-size:16px;margin:auto;line-height:72px;font-weight:500;cursor:unset;color:#fff}.listItem.listItemHeader.light{color:#000;background:#fff}.listItem.listItemHeader.dark{color:#fff;background:#424242}.listItemHeaderBottomBorder{box-shadow:0 1px 2px rgba(0,0,0,.16),0 0 1px rgba(0,0,0,.3)}.listItem .strong{font-weight:600}.listItem.sm.listItemHeader{font-size:12px;margin:0;font-weight:500;cursor:unset;line-height:36px}.listItem.md.listItemHeader{font-size:16px;margin:0;font-weight:500;cursor:unset;line-height:54px}.leftIcon{margin-right:16px}ng-md-icon.listItemHeaderIcon.lg,ng-md-icon.listItemHeaderIcon.lg svg{margin:auto 0;height:32px;width:32px}ng-md-icon.listItemHeaderIcon.md,ng-md-icon.listItemHeaderIcon.md svg{margin:auto 0;height:24px;width:24px}ng-md-icon.listItemHeaderIcon.sm,ng-md-icon.listItemHeaderIcon.sm svg{margin:auto 8px auto 0;height:16px;width:16px}.lineItemSubHeader{font-size:14px;font-weight:400;padding:0 16px 0 0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.92)!important}.autocomplete-custom-template li{border-bottom:1px solid #ccc;height:auto;padding-top:8px;padding-bottom:8px;white-space:normal}.autocomplete-custom-template li:last-child{border-bottom-width:0}.autocomplete-custom-template .item-title{font-weight:600}.autocomplete-custom-template .item-metadata,.autocomplete-custom-template .item-title{display:block;line-height:2}.autocomplete-custom-template .item-title md-icon{height:18px;width:18px}",""])},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _listItemHeader=__webpack_require__(124),_listItemHeader2=_interopRequireDefault(_listItemHeader),listItemHeader={bindings:{action:"@",actionClick:"=",expanded:"=",title:"@",icon:"@",size:"@"},template:_listItemHeader2.default,controller:function(){this.$onInit=function(){this.expanded||(this.expanded=!1)},this.$onChanges=function(changesObj){},this.$postLink=function(){},this.click=function(){"expandable"==this.action&&(this.expanded=!this.expanded)}},controllerAs:"vm"};exports.default=listItemHeader},function(module,exports){module.exports='<div class="listItem listItemHeader" ng-class=[vm.size] ng-disabled=!vm.action ng-click=vm.click()> <div layout=row flex> <div layout=row layout-align="start center" flex=80> <ng-md-icon ng-if=vm.icon icon={{vm.icon}} class="headerIcon listIcon"></ng-md-icon> <div class=listItemHeaderText>{{vm.title}}</div> </div> <div layout=row layout-align="end center" flex=20> <div layout=column layout-align="center end" ng-if="vm.action == \'expandable\'" flex> <ng-md-icon icon="{{vm.expanded ? \'expand_less\' : \'expand_more\'}}" options=\'{"duration": 500, "rotation": "clock", "easing":"linear"}\' class=listItemHeaderIcon></ng-md-icon> </div> </div> </div> </div> ';
},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(126);var _activityTotal=__webpack_require__(128),_activityTotal2=_interopRequireDefault(_activityTotal),_activityForms=__webpack_require__(129),_activityForms2=_interopRequireDefault(_activityForms),_activityBook=__webpack_require__(130),_activityBook2=_interopRequireDefault(_activityBook),_dashboard=__webpack_require__(131),_dashboard2=_interopRequireDefault(_dashboard),_noDashboard=__webpack_require__(132),_noDashboard2=_interopRequireDefault(_noDashboard),_activityBookValidators=__webpack_require__(133),_activityBookValidators2=_interopRequireDefault(_activityBookValidators),_activityAdjustmentControlsComponent=__webpack_require__(134),_activityAdjustmentControlsComponent2=_interopRequireDefault(_activityAdjustmentControlsComponent);exports.default=angular.module("activity-book",["ngMaterial","rx"]).run(["$templateCache",function($templateCache){$templateCache.put("activity-forms.html",_activityForms2.default),$templateCache.put("activity-book.html",_activityBook2.default),$templateCache.put("activity-total.html",_activityTotal2.default),$templateCache.put("dashboard.html",_dashboard2.default),$templateCache.put("no-dashboard.html",_noDashboard2.default)}]).factory("httpInterceptor",["$q","$rootScope",function($q,$rootScope){var loadingCount=0;return{request:function(config){return 1===++loadingCount&&$rootScope.$broadcast("loading:progress",{request:config}),config||$q.when(config)},response:function(_response){return 0===--loadingCount&&$rootScope.$broadcast("loading:finish",{response:_response}),_response||$q.when(_response)},responseError:function(response){return 0===--loadingCount&&$rootScope.$broadcast("loading:finish",{response:response}),$q.reject(response)}}}]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("httpInterceptor")}]).controller("activityAdjustmentController",_activityAdjustmentControlsComponent2.default).directive("ablActivityBook",["$rootScope","$sce","$compile","$mdMedia","$mdDialog","$mdToast","$log","$window","$timeout","$http","rx","observeOnScope","$stateParams","$state","$filter",function($rootScope,$sce,$compile,$mdMedia,$mdDialog,$mdToast,$log,$window,$timeout,$http,rx,observeOnScope,$stateParams,$state,$filter){return{restrict:"E",scope:{book:"=",activity:"=",app:"="},template:_activityBook2.default,link:function($scope,element,attrs){function onResize(){$scope.$digest()}angular.element($window).on("resize",onResize)},controllerAs:"vm",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function buildQuery(){return angular.forEach(vm.attendees,function(e,i){if(data.attendees[e._id]=[],e.quantity>0)for(var i=0;i<e.quantity;i++)data.attendees[e._id].push(null)}),angular.forEach(vm.addons,function(e,i){if(data.addons[e._id]=[],e.quantity>0)for(var i=0;i<e.quantity;i++)data.addons[e._id].push(null)}),data.currency=vm.currency.toUpperCase(),data}function goToPay(){vm.guestDetailsExpanded=!1,vm.attendeesExpanded=!1,vm.addonsExpanded=!1,vm.questionsExpanded=!1,vm.showPaymentForm=!0,vm.paymentFormIsLoading=!0,vm.stripePaymentExpanded=!0,vm.paymentWasSent=!0,this.formWasBlocked=!0,$scope.bookingSuccessResponse="processing",$scope.safeApply(),$scope.makeBooking()}function submitNonCreditCardBooking(){$log.debug("submitNonCreditCardBooking",this.pricing.total);var bookingData=vm.getBookingData();bookingData.stripeToken&&delete bookingData.stripeToken,bookingData.location={},bookingData.isMobile=!1,vm.paymentWasSent=!0,$scope.bookingSuccessResponse="processing",Raven&&Raven.captureMessage("Submit Booking",{level:"info",extra:{bookingData:bookingData},tags:{step:"pay-non-cc"}}),$http({method:"POST",url:config.FEATHERS_URL+"/bookings",data:bookingData,headers:headers}).then(function(response){$log.debug("submitNonCreditCardBooking success",response),$scope.bookingSuccessResponse=response,vm.waitingForResponse=!1,$rootScope.$emit("paymentResponse"),validatePayment(response)},function(response){var errorElement=document.getElementById("card-errors");errorElement.textContent=response.data.errors[0],vm.paymentWasSent=!1,$rootScope.$emit("paymentResponse"),vm.waitingForResponse=!1})}function validatePayment(response){200===response.status&&($scope.paymentResponse="success",$scope.paymentSuccessful=!0,Raven&&Raven.captureMessage("Booking Suceeded",{level:"info",extra:{response:response},tags:{step:"pay-non-cc"}}),$scope.safeApply()),$scope.bookingSuccessResponse=response,$scope.$emit("paymentResponse",response)}var vm=this;vm.theme=$rootScope.theme,this.formWasBlocked=!1,this.guestDetailsExpanded=!0,this.attendeesExpanded=!1,this.addonsExpanded=!1,this.questionsExpanded=!1,this.stripePaymentExpanded=!1,this.stripeCardIsValid=!1,this.paymentExpanded=!1,this.showPaymentForm=!1,this.answerAllQuestionsChecked=!1,this.paymentFormIsLoading=!1,this.paymentWasSent=!1,this.waitingForResponse=!1,this.validStepsForPayment={guest:!1,attendees:!1},this.couponStatus="untouched",this.appliedCoupon={},this.couponQuery="",this.occupancyRemaining=0,this.agentCodeStatus="untouched",this.appliedAgentCode={},this.agentCodeQuery="",this.attendeeSubtotals=[],this.addonSubtotals=[],vm.taxes=[],vm.taxTotal=0,vm.addons=[],vm.questions=[],vm.goToPay=goToPay,vm.submitNonCreditCardBooking=submitNonCreditCardBooking,vm.isFinishButtonValid=!1,$scope.sendConfirmationEmail=!0;var config=$rootScope.config,headers={};config.DASHBOARD?$scope.dashboard=!0:(headers=config.MARKETPLACE?{"x-abl-access-key":config.ABL_ACCESS_KEY,"x-abl-date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"}:{"x-abl-access-key":$stateParams.merchant||"tLVVsHUlBAweKP2ZOofhRBCFFP54hX9CfmQ9EsDlyLfN6DYHY5k8VzpuiUxjNO5L","x-abl-date":Date.parse((new Date).toISOString()),"Content-Type":"application/json;charset=utf-8"},vm.validStepsForPayment.bookingQuestions=!1),$log.debug("abl-activity-book $scope",$scope),vm.currency=$rootScope.currency,vm.eventDate=$rootScope.eventDate,vm.activityImage=$rootScope.activityImage||null,vm.activityLocation=$rootScope.activityLocation||null,vm.eventTime=$rootScope.eventTime,$scope.$watch(function(){return $rootScope.currency},function(n,o){n&&($log.debug("$scope.$watch:$rootScope.currency",n),vm.currency=n.toLowerCase())}),$scope.$on("currency-updated",function(event,args){$log.debug("ablActivityBook:currency-updated",args),vm.getPricingQuote(args.currency)}),Raven&&Raven.captureMessage("Add Booking",{level:"info",tags:{step:"opened"}}),$scope.formatDate=function(date,format){return window.moment(date).format(format)},$scope.paymentResponse="",$scope.paymentSuccessful=!1,this.goToNextStep=function(currentStepName,form){switch(currentStepName){case"guestDetailsStep":vm.toggleGuestDetails(),vm.toggleAttendees();break;case"attendeesStep":vm.countAttendeesAdded()>0&&(vm.addons.length>0?(vm.attendeesExpanded=!1,vm.addonsExpanded=!0):vm.questions.length>0?(vm.attendeesExpanded=!1,vm.questionsExpanded=!0):(vm.attendeesExpanded=!1,vm.stripePaymentExpanded=!0,$scope.dashboard||($log.debug("no questions, goToPay"),vm.goToNextStep("paymentStep"))));break;case"addonsStep":vm.addons&&vm.addons.length>0&&vm.countAttendeesAdded()&&(vm.questions.length>0?(vm.addonsExpanded=!1,vm.questionsExpanded=!0):(vm.addonsExpanded=!1,vm.stripePaymentExpanded=!0,$scope.dashboard||($log.debug("no questions, goToPay"),vm.goToNextStep("paymentStep"))));break;case"paymentStep":$log.debug("goToNextStep:paymentStep",vm.isPaymentValid()),vm.isPaymentValid()&&!vm.pricingQuoteStarted&&(vm.guestDetailsExpanded=!1,vm.attendeesExpanded=!1,vm.addonsExpanded=!1,vm.questionsExpanded=!1,vm.stripePaymentExpanded=!0,$scope.dashboard||vm.goToPay())}},vm.guestDetailsFormValid=!1,this.toggleGuestDetails=function(){this.guestDetailsExpanded=!this.formWasBlocked&&!this.guestDetailsExpanded},this.togglePayment=function(){this.paymentExpanded=!this.paymentExpanded},this.returnToMainPage=function(){$rootScope.config.DASHBOARD?($mdDialog.hide(),$state.reload()):($mdDialog.hide(),$state.go("home",{merchant:$stateParams.merchant}))},this.pricing={total:0},this.taxTotal,this.addonTotal,this.attendeeTotal=0,$scope.bookingSucceeded=!1,$scope.$mdMedia=$mdMedia,$scope.screenIsBig=function(){var w=angular.element($window);return w[0].innerWidth>742},$scope.addBookingController=$scope.$parent,vm.addBookingController=$scope.addBookingController,$log.debug("addBookingController:initialize",$scope.addBookingController),$scope.addBookingController.timeslot.charges.forEach(function(item){item.quantity=0}),this.toggleQuestions=function(){this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded};var timerAdjustingAddons=0;this.adjustAddon=function(i,mode){"progress"!==vm.pricingQuoteRequestState&&(vm.pricingQuoteStarted=!0,$timeout.cancel(timerAdjustingAddons),"up"==mode&&vm.addons[i].quantity++,"down"==mode&&vm.addons[i].quantity>0&&vm.addons[i].quantity--,timerAdjustingAddons=$timeout(function(){vm.getPricingQuote()},400))},this.toggleAddons=function(){vm.addons.length<1?this.questionsExpanded=!this.formWasBlocked&&!this.questionsExpanded:this.addonsExpanded=!this.formWasBlocked&&!this.addonsExpanded},this.toggleStripePay=function(){this.paymentExpanded=!this.paymentExpanded},this.togglePay=function(){this.payButtonEnabled=!this.payButtonEnabled};var timerAdjustingAttendee=0;this.adjustAttendee=function(i,mode){"progress"!==vm.pricingQuoteRequestState&&(vm.pricingQuoteStarted=!0,$timeout.cancel(timerAdjustingAttendee),"up"==mode&&(vm.countAttendees()>0||$scope.dashboard)&&vm.attendees[i].quantity++,"down"==mode&&vm.attendees[i].quantity>0&&vm.attendees[i].quantity--,timerAdjustingAttendee=$timeout(function(){vm.getPricingQuote(),vm.countAttendees()},400))},vm.pricingQuoteRequestState=null,$rootScope.$on("loading:progress",function(event,args){args.request.url.indexOf("pricing-quotes")!==-1&&(vm.pricingQuoteRequestState="progress")}),$rootScope.$on("loading:finish",function(event,args){args.response.config.url.indexOf("pricing-quotes")!==-1&&(vm.pricingQuoteRequestState="finished")}),this.toggleAttendees=function(){this.attendeesExpanded=!this.formWasBlocked&&!this.attendeesExpanded},this.checkAdjustAttendee=function($index){!$scope.dashboard&&vm.attendees[$index].quantity>vm.countAttendees()&&(vm.attendees[$index].quantity=0,vm.attendees[$index].quantity=vm.countAttendees()),vm.attendees[$index].quantity<0&&(vm.attendees[$index].quantity=0),vm.getPricingQuote(),vm.countAttendees(),$scope.safeApply(),$log.debug("attendees added",vm.countAttendees(),vm.attendees[$index].quantity)};var data={attendees:{},addons:{}};vm.pricingQuoteStarted=!1,vm.getPricingQuote=function(currency){var query=buildQuery();$http({method:"POST",url:config.FEATHERS_URL+"/pricing-quotes",data:query,headers:headers}).then(function(response){vm.pricing=response.data,vm.pricing.couponDeduction=vm.pricing.items.filter(function(item){return"coupon"==item.type}),vm.pricing.agentCommission=vm.pricing.items.filter(function(item){return"agent_commission"==item.type}).reduce(function(result,agentCommission){return result+(agentCommission.price.amount||agentCommission.price.price)*agentCommission.quantity},0);var addonsFilter=response.data.items.filter(function(item){return"addon"==item.type});vm.addonTotal=0,vm.addonSubtotals=[];var addonsArray={};angular.forEach(addonsFilter,function(addon,key){var object=addon.type+addon.name.replace(" ","");addonsArray[object]||(addonsArray[object]={addons:[]}),addonsArray[object].addons.push(addon)}),angular.forEach(addonsArray,function(addon,key){var obj={name:addon.addons[0].name,price:addon.addons[0].amount||addon.addons[0].price,amount:(addon.addons[0].amount||addon.addons[0].price)*addon.addons[0].quantity,quantity:addon.addons[0].quantity};vm.addonTotal+=(addon.addons[0].amount||addon.addons[0].price)*addon.addons[0].quantity,vm.addonSubtotals.push(obj)}),vm.attendeeTotal=response.data.items.filter(function(item){return"aap"==item.type}).reduce(function(result,att){return angular.isDefined(att.amount)&&att.amount>-1?result+att.amount*att.quantity:result+att.price*att.quantity},0);var aapFilter=response.data.items.filter(function(item){return"aap"==item.type});vm.attendeeSubtotals=[];var attendeesArray={};angular.forEach(aapFilter,function(aap,key){var object=aap.type+aap.name.replace(" ","");attendeesArray[object]||(attendeesArray[object]={aaps:[]}),attendeesArray[object].aaps.push(aap)}),angular.forEach(attendeesArray,function(aap,key){var obj={name:aap.aaps[0].name,amount:aap.aaps[0].amount*aap.aaps[0].quantity,quantity:aap.aaps[0].quantity};angular.isDefined(aap.aaps[0].amount)?obj.price=aap.aaps[0].amount:obj.price=aap.aaps[0].price,vm.attendeeSubtotals.push(obj)}),vm.taxTotal=response.data.items.filter(function(item){return"tax"==item.type||"fee"==item.type||"service"==item.type}).reduce(function(result,tax){return $log.debug("reduce.vm.taxTotal",tax),angular.isDefined(tax.price.amount)?result+tax.price.amount*tax.quantity:result+tax.price.price*tax.quantity},0),vm.taxTotal=vm.taxTotal+vm.pricing.agentCommission,$log.debug("getPricingQuotes",response),$log.debug("vm.attendeeSubtotal",vm.attendeeSubtotals),$log.debug("vm.taxTotal",vm.taxTotal,vm.taxTotal+vm.pricing.agentCommission),vm.showPaymentForm||(vm.paymentMethod="credit"),0==vm.pricing.total&&"credit"==vm.paymentMethod&&(vm.paymentMethod="cash"),0!==vm.attendeeTotal&&0!==vm.pricing.total.amount||(vm.paymentMethod="gift"),(vm.pricing.total>0||vm.pricing.total.amount>0)&&(vm.paymentMethod="credit"),currency&&(vm.currency=currency),vm.pricingQuoteStarted=!1,$scope.safeApply(),$log.debug("finalPricingQuote",vm.pricingQuoteStarted,vm.pricing,vm.paymentMethod,vm.attendeeTotal)},function(response){vm.pricing={},vm.taxTotal=0,vm.pricingQuoteStarted=!1,$mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position("left bottom").hideDelay(3e3)),$scope.safeApply()})},vm.getPossibleCoupons=function(){vm.pricingQuoteStarted=!0,$http({method:"GET",url:config.FEATHERS_URL+"/coupons?bookingId="+vm.couponQuery,headers:headers}).then(function(response){vm.possibleCoupons=response.data,$log.debug("getPossibleCoupons success",response),vm.pricingQuoteStarted=!1},function(response){vm.possibleCoupons=[],vm.pricingQuoteStarted=!1})},vm.clients=[],observeOnScope($scope,"vm.formData.fullName").map(function(data){return data}).subscribe(function(change){$log.debug("clientSearchText ",change.newValue),$scope.dashboard&&(vm.clients=$http({method:"GET",url:config.FEATHERS_URL+"/clients?fullName="+change.newValue,headers:headers}).then(function(response){return $log.debug("clientSearch success",response),response.data.list},function(response){return $log.debug("clientSearch error!",response),[]}))}),vm.selectedClientChange=function(client){client&&(vm.formData.fullName=client.primaryContact.fullName||"",vm.formData.mail=client.primaryContact.email||"",vm.formData.phoneNumber=client.primaryContact.phoneNumber||"",$log.debug("selectedClientChange",client))},$scope.autocomplete={},vm.couponStatus="untouched",$scope.autocomplete.searchTextChange=function(text){text||data.couponId&&delete data.couponId},$scope.autocomplete.selectedItemChange=function(item){$log.debug("applied coupon",item),item?(vm.appliedCoupon=item,data.couponId=item.couponId,vm.validateCoupon(vm.appliedCoupon),vm.couponStatus="valid",vm.getPricingQuote(),vm.checkingCoupon=!1):(vm.appliedCoupon=void 0,vm.couponStatus="untouched",data.couponId&&delete data.couponId)};var queryDebounce=!1;vm.coupons=[],$scope.autocomplete.querySearch=function(text){if($scope.dashboard)return text=text.toUpperCase(),queryDebounce||1===text.length?this:(queryDebounce=!0,$timeout(function(){return $http({method:"GET",url:config.FEATHERS_URL+"/coupons?couponId="+text,headers:headers}).then(function(response){return queryDebounce=!1,vm.coupons=response.data.list.filter(function(item){return $log.debug("vm.coupons",item,$scope.addBookingController,$scope.addBookingController.activity),0===item.activities.length||item.activities.length>0&&item.activities[0]===$scope.addBookingController.activity._id}),vm.coupons},function(response){return queryDebounce=!1,[]})},100))},vm.checkCoupon=function(){vm.checkingCoupon=!0,$http({method:"GET",url:config.FEATHERS_URL+"/coupons/"+vm.couponQuery,headers:headers}).then(function(response){$log.debug("checkCoupon success",response),data.couponId=response.data.couponId,vm.appliedCoupon=response.data,$log.debug("applied coupon",vm.appliedCoupon),vm.validateCoupon(vm.appliedCoupon),vm.couponStatus="valid",vm.getPricingQuote(),vm.checkingCoupon=!1},function(response){delete data.couponId,vm.couponStatus="invalid",vm.appliedCoupon={},vm.checkingCoupon=!1})},vm.removeCoupon=function(){vm.couponQuery="",delete data.couponId,$scope.autocomplete.selectedItem=void 0,vm.couponStatus="untouched",vm.appliedCoupon={},vm.getPricingQuote(),$scope.safeApply()},vm.pricingInformation=function(total){$log.debug("pricingInformation",total)};var moment=window.moment;vm.validateCoupon=function(coupon){moment();return!(!moment(coupon.endTime).isAfter(moment())||0!=coupon.maxRedemptions)||(!!(coupon.maxRedemptions>0&&moment(coupon.endTime).isAfter(moment())&&coupon.maxRedemptions-coupon.redemptions>=0)||(vm.couponStatus="invalid",!1))},vm.appliedCouponType=function(coupon){if(coupon)return coupon.percentage?coupon.amount+"%":$filter("ablCurrency")(coupon.amount,$rootScope.currency)},vm.bookingQuestionsCompleted=function(){var completed=0;return vm.bookingQuestions?angular.forEach(vm.bookingQuestions,function(e,i){e&&e.length>0&&completed++}):completed=0,completed},observeOnScope($scope,"vm.couponQuery").debounce(500).select(function(response){return response}).subscribe(function(change){vm.couponQuery.length>0&&vm.checkCoupon()}),$scope.agentAutocomplete={},vm.agentCodeStatus="untouched",$scope.agentAutocomplete.searchTextChange=function(text){},$scope.agentAutocomplete.selectedItemChange=function(item){item?(vm.appliedAgentCode=item,data.agentCode=item.code,vm.validateAgent(vm.appliedAgentCode),vm.agentCodeStatus="valid",vm.getPricingQuote(),vm.checkingAgentCode=!1):(vm.appliedAgentCode=void 0,vm.agentCodeStatus="untouched",data.agentCode&&delete data.agentCode)},$scope.agentAutocomplete.querySearch=function(text){return text=text?text:".",$http({method:"GET",url:config.FEATHERS_URL+"/operators/"+$scope.orgId+"/agents?partialMatch=true&code="+text,headers:headers}).then(function(response){return response.data},function(response){return[]})},vm.checkAgentCode=function(){vm.checkingAgentCode=!0,$http({method:"GET",url:config.FEATHERS_URL+"/operators/"+$scope.orgId+"/agents?code="+vm.agentCodeQuery,headers:headers}).then(function(response){return response.data&&0==response.data.length?(delete data.agentCode,vm.agentCodeStatus="invalid",vm.appliedAgentCode={},void(vm.checkingAgentCode=!1)):(data.agentCode=response.data[0].code,vm.appliedAgentCode=response.data[0],vm.validateAgent(vm.appliedAgentCode),vm.agentCodeStatus="valid",vm.getPricingQuote(),void(vm.checkingAgentCode=!1))},function(response){delete data.agentCode,vm.agentCodeStatus="invalid",vm.appliedAgentCode={},vm.checkingAgentCode=!1})},vm.removeAgentCode=function(){vm.agentCodeQuery="",delete data.agentCode,$scope.agentAutocomplete.selectedItem=void 0,vm.agentCodeStatus="untouched",vm.appliedAgentCode={},vm.getPricingQuote()},vm.validateAgent=function(agent){return!!agent.active||(vm.agentCodeStatus="invalid",!1)},observeOnScope($scope,"vm.agentCodeQuery").debounce(500).select(function(response){return response}).subscribe(function(change){vm.agentCodeQuery.length>0&&vm.checkAgentCode()}),(0,_activityBookValidators2.default)(vm,rx,$http,$stateParams),$scope.$watch("addBookingController.activity",function(changes){$log.debug("addBookingController.activity",changes),angular.isDefined($scope.addBookingController.activity)&&($scope.orgId=$scope.addBookingController.activity.operator||$scope.addBookingController.activity.organizations[0],vm.questions=$scope.addBookingController.activity.questions||[],vm.questions||delete vm.validStepsForPayment.bookingQuestions,vm.addons=$scope.addBookingController.activity.charges.filter(function(charge){return"addon"==charge.type&&"active"==charge.status}),vm.addons||delete vm.validStepsForPayment.addons,vm.addons.forEach(function(e,i){angular.isDefined(e.quantity)||(e.quantity=0)}),vm.taxes=$scope.addBookingController.activity.charges.filter(function(charge){return"tax"==charge.type}),$scope.safeApply())},!0),$scope.$watch("addBookingController.timeslot",function(changes){angular.isDefined($scope.addBookingController.timeslot)&&angular.isDefined($scope.addBookingController.event)&&(angular.isDefined($scope.addBookingController.timeslot.charges)&&(vm.attendees=$scope.addBookingController.timeslot.charges.filter(function(charge){return"aap"==charge.type&&"active"==charge.status}),vm.attendees.forEach(function(e,i){angular.isDefined(e.quantity)||(e.quantity=0)})),data.timeSlotId=$scope.addBookingController.timeslot._id,data.startTime=$scope.addBookingController.event.startTime)},!0),$scope.$watch("addBookingController.preferences",function(changes){var preferences=$scope.addBookingController.preferences;$scope.agentsIsOn=!(!preferences||!preferences.features)&&preferences.features.agents},!0),vm.countAttendees=function(){var attendees=0;return $scope.addBookingController.event&&(attendees=vm.attendees?($scope.addBookingController.event.maxOcc?$scope.addBookingController.event.maxOcc:$scope.addBookingController.timeslot.maxOcc)-vm.attendees.map(function(att){return att.quantity}).reduce(function(a,b){return a+b},0)-$scope.addBookingController.event.attendees:0),attendees},vm.countAttendeesAdded=function(){var attendeesAdded=0;return $scope.addBookingController.event&&vm.attendees&&(attendeesAdded=vm.attendees.map(function(att){return att.quantity}).reduce(function(a,b){return a+b},0)),attendeesAdded},vm.countAddonsAdded=function(){return $scope.addBookingController.event&&vm.addons?vm.addons.map(function(add){return add.quantity}).reduce(function(a,b){return a+b},0):0},vm.addonsChanged=function(){$scope.safeApply(),$log.debug("addonsChanged"),$timeout(function(){vm.getPricingQuote()},0)},this.areGuestDetailsValid=function(form){return form?(vm.guestDetailsAreValid=form.$valid,vm.validStepsForPayment.guest=vm.guestDetailsAreValid):vm.guestDetailsAreValid=!1,vm.guestDetailsAreValid},this.areAttendeesValid=function(){return vm.validStepsForPayment.attendees=0!==vm.countAttendeesAdded(),0!==vm.countAttendeesAdded()},this.areAddonsValid=function(){return null!=vm.validStepsForPayment.addons&&(vm.validStepsForPayment.addons=!0),0!==vm.countAddonsAdded()},this.areBookingQuestionsValid=function(){return null!=vm.validStepsForPayment.bookingQuestions&&(vm.validStepsForPayment.bookingQuestions=vm.bookingQuestionsCompleted()===vm.questions.length),vm.validStepsForPayment.bookingQuestions},this.answerAllQuestions=function(){if($log.debug("answerAllQuestions",vm.answerAllQuestionsChecked,vm.bookingQuestions),vm.answerAllQuestionsChecked){for(var i=0;i<vm.bookingQuestions.length;i++)vm.bookingQuestions[i]="";vm.answerAllQuestionsChecked=!1}else{for(var i=0;i<vm.bookingQuestions.length;i++)vm.bookingQuestions[i]="No answer";vm.answerAllQuestionsChecked=!0}},this.isPaymentValid=function(){var isValid=[];return angular.forEach(vm.validStepsForPayment,function(step,key){step||isValid.push(step)}),vm.isFinishButtonValid=0===isValid.length&&vm.pricingQuoteStarted===!1,!(isValid.length>0&&vm.pricingQuoteStarted===!0)},this.isNextStepPayment=function(step){return"attendees"===step?!(!vm.addons&&!vm.questions)&&!(!vm.addons&&!vm.questions):"addons"===step?!!vm.questions&&!!vm.questions:"payment"===step||void 0},this.nextButtonLabel=function(step){var statusObj={step:step};return!$scope.dashboard&&0===vm.pricing.total.amount&&vm.countAttendeesAdded()>0?("guest"===step&&(statusObj.label="Next"),"attendees"===step&&(vm.addons||vm.questions?vm.addons.length>0||vm.questions.length>0?statusObj.label="Next":statusObj.label="Finish":statusObj.label="Next"),"addons"===step&&(vm.questions?vm.questions.length>0?statusObj.label="Next":statusObj.label="Finish":statusObj.label="Next"),"questions"===step&&(statusObj.label="Finish")):statusObj.label="Next",statusObj},vm.paymentMethod="credit",vm.bookingQuestions=[],vm.getBookingData=function(){var bookingData=angular.copy(data);return"reserved"==vm.paymentMethod&&(bookingData.amount=0),bookingData.eventInstanceId=$scope.addBookingController.event.eventInstanceId||$scope.addBookingController.event,bookingData.answers={},bookingData.sendConfirmationEmail=$scope.sendConfirmationEmail,bookingData.skipConfirmation=!$scope.sendConfirmationEmail,bookingData.email=vm.formData.mail,bookingData.phoneNumber=vm.formData.phoneNumber,bookingData.fullName=vm.formData.fullName,bookingData.notes=vm.formData.notes,bookingData.skipConfirmation=!1,bookingData.operator=$scope.addBookingController.event.operator||$scope.addBookingController.event.organizations[0]||$scope.addBookingController.activity.operator||$scope.addBookingController.activity.organizations[0],angular.forEach(vm.questions,function(e,i){$log.debug("vm.questions",vm.questions),$log.debug("vm.bookingQuestions",vm.bookingQuestions),bookingData.answers[e._id?e._id:e]=vm.bookingQuestions[i]}),"reserved"!=vm.paymentMethod?bookingData.paymentMethod=vm.paymentMethod:bookingData.paymentMethod="cash","reserved"==vm.paymentMethod&&(bookingData.amount=0),bookingData.currency="default",bookingData},vm.outputBookingData=function(){$log.debug(vm.getBookingData())},$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)},$scope.$on("reloadPaymentForm",function(event,args){var iframe=document.getElementById("paymentIframe"),iframeDoc=iframe.contentWindow.document;iframeDoc.open(),iframeDoc.write(""),iframeDoc.close(),$scope.makeBooking()}),$scope.makeBooking=function(data){vm.paymentExpanded=!0,vm.loadingIframe=!0;var bookingData=vm.getBookingData();Raven&&Raven.captureMessage("Submit Booking",{level:"info",extra:{bookingData:bookingData},tags:{step:"pay-cc"}}),$log.debug("$scope.makeBooking",data),$scope.bookingResponse=$http({method:"POST",url:config.FEATHERS_URL+"/bookings",data:bookingData,headers:headers}).then(function(response){if($log.debug("makeBooking success",response),response.data.iframeHtml){vm.loadingIframe=!1,$scope.paymentSuccessful=!1,$scope.bookingSuccessResponse=response,vm.paymentFormIsLoading=!1;var iframe=document.getElementById("paymentIframe");iframe.style.display="block";var iframeDoc=iframe.contentWindow.document;iframeDoc.open(),iframeDoc.write(response.data.iframeHtml),iframeDoc.close(),$scope.bookingSucceeded=!0,Raven&&Raven.captureMessage("Booking Succeeded",{level:"info",extra:{response:response.data},tags:{step:"pay-cc"}})}else if("paid"===response.data.booking.status){$log.debug("makeBooking success $0",response),$scope.paymentSuccessful=!0,$scope.bookingSuccessResponse=response,$scope.bookingSucceeded=!0;var event={data:{type:"payment_success"}};_paymentMessageHandler(event)}},function(response){$mdDialog.hide(),vm.loadingIframe=!1,vm.paymentFormIsLoading=!1,vm.paymentExpanded=!1,$scope.bookingSucceeded=!1,Raven&&Raven.captureMessage("Booking Error",{level:"error",extra:{response:response.data},tags:{step:"pay-cc"}}),$mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position("left bottom").hideDelay(3e3)),$log.debug("makeBooking error!",response)})};var _paymentMessageHandler;_paymentMessageHandler=function(event){if($log.debug("DATA",event.data),"payment_complete"==event.data||"payment_success"==event.data.type)$log.debug("PAYMENT COMPLETE"),$scope.paymentResponse="success",$rootScope.$broadcast("paymentWithResponse",{response:event.data}),window.removeEventListener("message",_paymentMessageHandler),$scope.paymentSuccessful=!0,$scope.safeApply();else{if("Your card was declined."===event.data.message)if($log.debug("$scope.addBookingController.preferences",$scope.addBookingController.preferences.payment.cards),$scope.addBookingController.preferences.payment.cards){var cards=[],cardsKeys={amex:"American Express",discover:"Discover",mastercard:"Mastercard",visa:"Visa"};angular.forEach($scope.addBookingController.preferences.payment.cards,function(value,key){value===!0&&cards.push(cardsKeys[key])}),$mdToast.show($mdToast.simple().textContent("Card Declined, please try one of the following cards: "+cards.join(", ")).position("left bottom").hideDelay(5e3))}else $mdToast.show($mdToast.simple().textContent("Card Declined, please try one of the cards listed above").position("left bottom").hideDelay(5e3));event.data.type&&event.data.type.indexOf("setImmediate")===-1&&(Raven&&Raven.captureMessage("Booking Payment Error",{level:"error",extra:{paymentMessageHandler:event.data},tags:{step:"pay-non-cc"}}),$scope.paymentSuccessful=!1,$scope.paymentResponse="",vm.showPaymentForm=!0,$scope.safeApply()),$rootScope.$broadcast("paymentWithErrorResponse",{response:event.data})}},$log.debug("Adding Payment Message Event Listener"),window.addEventListener("message",_paymentMessageHandler),$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}}]}}]).filter("imageService",function(){return function(value){return value.replace(/(.png|.jpg|.jpeg)/i,"-small$1")}})},function(module,exports,__webpack_require__){var content=__webpack_require__(127);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(97)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(96)(!1),exports.push([module.id,"#paymentIframe{margin:0;padding:8px;border:none;min-height:330px;height:100%;overflow-y:hidden;width:100%;display:none}abl-activity-book md-card{box-shadow:none!important;border:none!important;background:transparent}.transparent{background-color:transparent!important}list-item{display:block!important}.payment-section{margin-bottom:54px}md-input-container.md-white-theme:not(.md-input-invalid).md-input-focused label{color:#666!important}.paymentSummaryCardNewContent .paymentSummaryCardNew{margin:0!important}.payment-icons-bar{padding-top:8px;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,.1);background:#ccc}.payment-icons-bar img.payment-icons-bar-left{height:40px;padding-left:16px;vertical-align:middle}.payment-icons-bar img.payment-icons-bar-right{height:30px;padding-right:12px;vertical-align:middle}.left-panel{border-right:1px solid #ddd}.left-panel,.left-panel-no-dashboard{background-color:#f2f2f2}.left-panel-no-dashboard>md-content,.left-panel>md-content{background-color:transparent!important}.paymentSummaryCardNewContent .gradient{background:#000;background:-webkit-linear-gradient(left,rgba(0,0,0,.15),hsla(0,0%,96%,.2049194677871149));background:-moz-linear-gradient(left,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149) 100%);background:-o-linear-gradient(left,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149) 100%);background:linear-gradient(90deg,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149));width:5px}.paymentSummaryCardNewContent .paymentSummaryCardNew{overflow-y:auto!important}@media(max-width:599px){.left-panel{border-right:none}.payment-icons-bar img.payment-icons-bar-left{height:30px;padding-left:8px}.payment-icons-bar img.payment-icons-bar-right{height:24px;padding-right:8px}}",""])},function(module,exports){module.exports='<md-content flex class=paymentSummaryCardNewContent layout=row layout-align="space-between stretch"> <div hide-xs flex=none class=gradient></div> <md-card flex class=paymentSummaryCardNew ng-show="paymentResponse != \'success\'"> <md-list> <div ng-if="!dashboard && vm.eventDate"> <div layout-padding layout-xs=column layout-gt-sm=row ng-if=vm.activityLocation> <div flex-gt-sm=30 flex ng-if=vm.activityImage style=max-height:250px;overflow:hidden;margin-bottom:8px> <img style=width:100% ng-src={{vm.activityImage}} /> </div> <div flex=none hide-sm style=width:16px></div> <div flex flex-gt-sm=60> <h2 style=font-size:17px;margin-bottom:8px>{{vm.addBookingController.timeslot.title}}</h2> <p style=font-size:14px ng-if=vm.activityLocation><ng-md-icon icon=place class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.activityLocation}}</p> <p style=font-size:14px><ng-md-icon icon=date_range class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.eventDate}}</p> <p style=font-size:14px ng-if=vm.eventTime><ng-md-icon icon=access_time class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.eventTime}} </p></div> </div> <div ng-if=!vm.activityLocation> <md-list-item class=lineItemHeader ng-if=vm.base ng-click=null> <div class=md-list-item-text layout=row flex> <div layout=row layout-align="start center" flex=50> <p class="">Base Price </p> </div> <div layout=row layout-align="end center" flex=50> <p> <abl-currency-directive price=vm.base() currency={{vm.currency}}></abl-currency-directive> {{$parent.currency | uppercase}}</p> </div> </div> </md-list-item> </div> </div> <md-list-item class=lineItemHeader ng-if=vm.base ng-click=null> <div class=md-list-item-text layout=row flex> <div layout=row layout-align="start center" flex=50> <p class="">Base Price </p> </div> <div layout=row layout-align="end center" flex=50> <p> <abl-currency-directive price=vm.base() currency={{vm.currency}}></abl-currency-directive> {{$parent.currency | uppercase}}</p> </div> </div> </md-list-item> <md-list-item class="paymentHeader md-2-line md-primary" ng-disabled=detailsForm.$invalid ng-show="vm.couponStatus == \'valid\'"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column layout-align="center start"> <ng-md-icon icon=clear class="listIcon remove-coupon" ng-click=vm.removeCoupon(); ng-if="vm.couponStatus ==\'valid\'" ng-hide="!dashboard && vm.formWasBlocked"></ng-md-icon> </div> <span class="couponText total" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCouponType(vm.appliedCoupon)}} Off</span> </div> <div layout=row layout-align="end center"> <span class=couponTextTotal ng-if=vm.pricing.couponDeduction[0]>-<abl-currency-directive price="(-1 * vm.pricing.couponDeduction[0].price.amount)" currency={{vm.currency}}></abl-currency-directive></span> <md-progress-circular md-mode=indeterminate ng-show="vm.checkingCoupon && vm.couponQuery.length > 0" class="listItemCircularProgress easeIn" md-diameter=24px> </md-progress-circular> </div> </div> </md-list-item> <list-item ng-if="!vm.showPaymentForm && paymentResponse.length <= 1" style=margin-bottom:1px size=lg class=listItemAutocomplete ng-show="vm.couponStatus == \'untouched\' || vm.couponStatus ==\'invalid\'"> <md-autocomplete md-selected-item=autocomplete.selectedItem md-search-text-change=autocomplete.searchTextChange(autocomplete.searchText) md-search-text=autocomplete.searchText md-no-cache=true md-selected-item-change=autocomplete.selectedItemChange(item) md-items="item in autocomplete.querySearch(autocomplete.searchText)" md-item-text=item.couponId md-min-length=0 placeholder="{{dashboard ? \'Search coupons..\' : \'Enter a coupon..\'}}" class=listItem ng-if=dashboard> <md-item-template> <span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.couponId}}</span> <span>{{vm.appliedCouponType(item)}}</span> </md-item-template> <md-not-found> No coupons found{{autocomplete.searchText.length > 0 ? (\' matching"\' + autocomplete.searchText + \'".\') : \'.\'}} </md-not-found> </md-autocomplete> <span class="paymentSubTitle total"> <input id=#coupon ng-model=vm.couponQuery type=text class=couponInput ng-if="(vm.couponStatus ==\'untouched\' || vm.couponStatus ==\'invalid\') && !dashboard" ng-change="vm.checkingCoupon = true" placeholder="Enter coupon.." ng-hide=vm.formWasBlocked to-uppercase/> </span> </list-item> <md-list-item ng-show="vm.couponStatus ==\'invalid\' && vm.couponQuery.length > 0 && !vm.checkingCoupon" class="paymentHeader md-2-line md-primary easeIn" ng-if=!dashboard> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if="vm.couponStatus !=\'valid\'" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class="paymentSubTitle total"> Invalid Coupon </span> </div> <div layout=row layout-align="end center" flex> <ng-md-icon icon=clear class=listIcon ng-click="vm.couponQuery = \'\';"></ng-md-icon> </div> </div> </md-list-item> <md-list-item ng-if=agentsIsOn class="paymentHeader md-2-line md-primary" ng-disabled=detailsForm.$invalid ng-show="vm.agentCodeStatus == \'valid\'"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <span class="agentCodeText total" flex> <b>Agent Code: </b> {{vm.appliedAgentCode.code}} </span> <ng-md-icon icon=clear class="listIcon remove-agent-code" ng-click=vm.removeAgentCode(); ng-if="vm.agentCodeStatus ==\'valid\'" ng-hide="!dashboard && vm.formWasBlocked"></ng-md-icon> </div> <div layout="row " layout-align="end center "> <md-progress-circular md-mode=indeterminate ng-show="vm.checkingAgentCode && vm.agentCodeQuery.length > 0" class="listItemCircularProgress easeIn" md-diameter=24px> </md-progress-circular> </div> </div> </md-list-item> <list-item ng-if="agentsIsOn && !vm.showPaymentForm && paymentResponse.length <= 1" size=lg class=listItemAutocomplete ng-show="vm.agentCodeStatus == \'untouched\' || vm.agentCodeStatus == \'invalid\'"> <md-autocomplete md-selected-item=agentAutocomplete.selectedItem md-search-text-change=agentAutocomplete.searchTextChange(agentAutocomplete.searchText) md-search-text=agentAutocomplete.searchText md-no-cache=true md-selected-item-change=agentAutocomplete.selectedItemChange(item) md-items="item in agentAutocomplete.querySearch(agentAutocomplete.searchText)" md-item-text=item.code md-min-length=0 placeholder="Agent Code" class=listItem ng-if=dashboard> <md-item-template> <span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.code}}</span> </md-item-template> <md-not-found> Agent code not found{{agentAutocomplete.searchText.length > 0 ? (\' matching "\' + agentAutocomplete.searchText + \'".\') : \'.\'}} </md-not-found> </md-autocomplete> <span class="paymentSubTitle total"> <input id=#agentCode ng-model=vm.agentCodeQuery type=text class=agentInput ng-if="(vm.agentCodeStatus ==\'untouched\' || vm.agentCodeStatus == \'invalid\') && !dashboard" ng-change="vm.checkingAgentCode = true" placeholder="Enter agent code.." ng-hide=vm.formWasBlocked to-uppercase/> </span> </list-item> <md-list-item ng-show="vm.agentCodeStatus ==\'invalid\' && vm.agentCodeQuery.length > 0 && !vm.checkingAgentCode" class="paymentHeader md-2-line md-primary easeIn" ng-if=!dashboard> <div layout=row class=md-list-item-text flex> <div layout=row layout-align="start center" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if="vm.agentCodeStatus !=\'valid\'" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class="paymentSubTitle total"> Invalid agent code </span> </div> <div layout=row layout-align="end center" flex> <ng-md-icon icon=clear class=listIcon ng-click="vm.agentCodeQuery = \'\';"></ng-md-icon> </div> </div> </md-list-item> <div ng-if="vm.attendeeSubtotals.length > 0"> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Attendees </span> </div> <div layout=row layout-align="end center" flex=50> <span class=activityTotal><abl-currency-directive price=vm.attendeeTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat="(key, value) in vm.attendeeSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{value.quantity}} x {{value.name}} @ <abl-currency-directive style="margin:0 4px" price=value.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align="end center" flex=50> <abl-currency-directive price=value.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if="vm.addonSubtotals.length > 0"> <div class="md-list-item-text subtotalLineItem" layout=row flex> <div layout=row layout-align="start center" flex=50> <span class=total>Add-ons </span> </div> <div layout=row layout-align="end center" flex=50> <span class=activityTotal><abl-currency-directive price=vm.addonTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat="addon in vm.addonSubtotals" layout=row flex class="subtotalLineItem subtotalLineItemSmall"> <div layout=row layout-align="start center" flex=50> {{addon.quantity}} x {{addon.name}} @ <abl-currency-directive style="margin:0 4px" price=addon.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align="end center" flex=50> <abl-currency-directive price=addon.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if="vm.taxTotal > 0"> <div class="md-list-item-text subtotalLineItem" layout=row flex> <div layout=row layout-align="start center" flex=50> <span class=total>Taxes and Fees </span> </div> <div layout=row layout-align="end center" flex=50> <span class=activityTotal><abl-currency-directive price=vm.taxTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> </div> <div ng-if=false> <div class="md-list-item-text subtotalLineItem" layout="row " flex> <div layout=row layout-align="start center " flex="50 "> <span class=total>Agent Commission </span> </div> <div layout="row " layout-align="end center " flex="50 "> <span class=agentCommission>${{vm.pricing.agentCommission / 100 | number:2}}</span> </div> </div> </div> <div> <div class="md-list-item-text subtotalLineItem bottomTotal" layout=row layout-align="space-between center" flex> <div layout=row layout-align="start center" flex=50> <span class="">Total </span> </div> <div layout=row layout-align="end center" flex=50> <span><abl-currency-directive price="(vm.pricing.total.amount || 0)" currency={{vm.currency}}></abl-currency-directive> <span class=pricing ng-if="vm.pricing.total.amount > 0"><ng-md-icon icon=information class=listIcon><md-tooltip md-direction=top>Original price: {{vm.pricing.total.originalAmount | ablCurrency : (vm.pricing.total.originalCurrency | lowercase)}}, Original currency: {{vm.pricing.total.originalCurrency}}</md-tooltip></ng-md-icon></span></span> </div> </div> </div> </md-list> </md-card> </md-content> ';
},function(module,exports){module.exports='<md-content> <div ng-if="paymentResponse != \'success\' || !vm.showPaymentForm"> <div class=activityPaymentSummaryCard> <list-item size=lg class=listItemHeader ng-click=vm.toggleGuestDetails() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_1 class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon> <span class=paymentSubTitle flex>Guest Details</span> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end"> <ng-md-icon icon="{{vm.guestDetailsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.guestDetailsExpanded layout=column> <list-item ng-if=dashboard> <md-checkbox ng-model=sendConfirmationEmail class=listItemCheckbox>Send confirmation e-mail to client</md-checkbox> </list-item> <form name=guestDetailsForm novalidate> <div class=formContainer> <md-input-container class="md-block listItemInputContainer inputBottomMargin" ng-if=!dashboard> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.fullName.$error ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be at least 3 chars.</div> <div ng-message=md-maxlength>Must be less than 100 chars.</div> </div> </md-input-container> <md-autocomplete ng-if=dashboard required md-input-name=autocompleteField md-input-minlength=3 md-input-maxlength=100 md-no-cache=true md-delay=250 md-selected-item=vm.clientSearchSelectedItem md-search-text=vm.formData.fullName md-items="item in vm.clients" md-item-text=item.primaryContact.fullName md-floating-label="Full Name" md-selected-item-change=vm.selectedClientChange(item) class="md-block listItemInputContainer" md-menu-class=autocomplete-custom-template md-min-length=2> <md-item-template> <span class=item-title> <ng-md-icon icon=person class="listItemHeaderIcon sm"></ng-md-icon> <span> {{item.primaryContact.fullName}} </span> </span> <span class=item-metadata> <span> <ng-md-icon icon=email class="listItemHeaderIcon sm" md-colors="{fill: \'blue-grey-A200\'}"></ng-md-icon> {{item.primaryContact.email}} </span> </span> </md-item-template> <div ng-messages=guestDetailsForm.autocompleteField.$error ng-if=guestDetailsForm.autocompleteField.$touched> <div ng-message=required>You <b>must</b> enter a client name.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-autocomplete> <md-input-container class="md-block listItemInputContainer" ng-if=!dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 ng-pattern=/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/ /> <div ng-messages=guestDetailsForm.mail.$error ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=pattern>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.mail.$error ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=pattern>Invalid e-mail address</div> <div ng-message=minlength>Must be at least 3 chars</div> <div ng-message=md-maxlength>Must be less than 100 chars</div> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer" ng-if=!dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer listItemAutoCompleteAfterContainer" ng-if=dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail type=email md-maxlength=100 ng-minlength=3 ng-pattern=/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/ /> <div ng-messages=guestDetailsForm.mail.$error ng-if=screenIsBig()> <div ng-message=pattern>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.mail.$error ng-if=!screenIsBig()> <div ng-message=pattern>Invalid e-mail address.</div> <div ng-message=minlength>Must be at least 3 chars</div> <div ng-message=md-maxlength>Must be less than 100 chars</div> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer" ng-if=dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber type=text /> <div ng-messages=guestDetailsForm.phone.$error> </div> </md-input-container> <md-input-container class="md-block listItemInputContainer"> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align="end center"> <md-button class="md-raised md-primary md-hue-2" ng-disabled=!vm.areGuestDetailsValid(guestDetailsForm) ng-click="vm.goToNextStep(\'guestDetailsStep\')">{{vm.nextButtonLabel(\'guest\').label}}</md-button> </div> </div> </form> </div> <md-divider class=no-margin></md-divider> <list-item size=lg class=listItemHeader ng-click=vm.toggleAttendees() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_2 class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon> <span class=paymentSubTitle ng-if="vm.countAttendees() >= 0" flex>Attendees <span ng-show="vm.countAttendees() < 4"> {{vm.countAttendees()}} spot{{vm.countAttendees() != 1 ? \'s\' : \'\'}} remaining</span></span> <span class=paymentSubTitle ng-if="vm.countAttendees() < 0" flex>Attendees <span class=red> <strong> {{vm.countAttendees() * -1}}</strong> spot{{((vm.countAttendees() * -1) > 1 || (vm.countAttendees() * -1) == 0) ? \'s\' : \'\'}} over maximum occupancy</span></span> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end"> <ng-md-icon icon="{{vm.attendeesExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.attendeesExpanded ng-class=vm.areAttendeesValid() layout=column> <div ng-repeat="attendee in vm.attendees"> <list-item class="md-2-line addOnListItem"> <div layout=row class=list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column class=""> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row> <span class=lineItemSubDetail>{{ attendee.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align="end center"> <div layout=column class=addOnAdjusters layout-align="center end" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAttendee($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline" class=listIconSub ng-click="vm.adjustAttendee($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end"> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); type=number min=0 md-select-on-focus> </div> </div> </div> </list-item> </div> <div layout=row layout-align="end center" layout-margin> <progress-button class="md-raised md-primary md-hue-2 md-{{vm.theme}}-theme" ng-disabled="!vm.areAttendeesValid() || vm.pricingQuoteStarted" loading=vm.pricingQuoteStarted on-click="vm.goToNextStep(\'attendeesStep\')" spinner=3 label="{{vm.nextButtonLabel(\'attendees\').label}}"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> <div ng-if="vm.addons.length > 0"> <list-item class="paymentHeader md-2-line" ng-disabled="vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid" ng-click=vm.toggleAddons() layout=column flex> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_3 class="listIcon listItemHeaderIcon leftIcon"></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end"> <ng-md-icon ng-show="vm.addOnsSelected == 1" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon="{{vm.addonsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </list-item> <md-divider class=no-margin></md-divider> <div ng-show=vm.addonsExpanded ng-class=vm.areAddonsValid()> <div ng-repeat="addon in vm.addons"> <list-item class="md-2-line addOnListItem"> <div layout=row layout-align="start center" flex> <div layout=column class=""> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=""> <span class=lineItemSubDetail>{{ addon.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align="end center" flex> <div layout=column class=addOnAdjusters layout-align="center end"> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click="vm.adjustAddon($index,\'up\');"> </ng-md-icon> <ng-md-icon icon=" remove_circle_outline" class=listIconSub ng-click="vm.adjustAddon($index,\'down\');"></ng-md-icon> </div> <div layout=column layout-align="end end"> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.addonsChanged(); md-select-on-focus type=number> </div> </div> </list-item> </div> <div layout=row layout-align="end center" layout-margin> <progress-button ng-if="vm.isNextStepPayment(\'addons\')" class="md-raised md-primary md-hue-2 md-{{vm.theme}}-theme" ng-disabled=vm.pricingQuoteStarted loading=vm.pricingQuoteStarted on-click="vm.goToNextStep(\'addonsStep\')" spinner=3 label="{{vm.nextButtonLabel(\'addons\').label}}"></progress-button> </div> </div> </div> <div ng-if="vm.questions.length > 0"> <list-item class="paymentHeader md-2-line" ng-disabled="guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1" ng-click=vm.toggleQuestions()> <div layout=row class=list-item-text flex> <div layout=row layout-align="start center" flex> <div layout=column class=""> <div layout=row layout-align="start center" flex> <ng-md-icon icon=filter_4 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0"></ng-md-icon> <ng-md-icon icon=filter_3 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length == 0"></ng-md-icon> <span class=paymentSubTitle>Booking Questions <i class="fa fa-angle-right" aria-hidden=true></i> {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout=row layout-align="end center"> <div layout=column layout-align="center end" flex> <ng-md-icon icon="{{vm.questionsExpanded ? \'expand_less\' : \'expand_more\'}}" class=listIcon></ng-md-icon> </div> </div> </div> </list-item> <div ng-show=vm.questionsExpanded ng-class=!vm.areBookingQuestionsValid()> <div class="questionForm slideDown"> <form name=questionForm class=formContainer> <div ng-repeat="question in vm.questions" class="listItemInputContainer listItemInputContainerNoMargin"> <div layout=column layout-align="center stretch" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align="start center"> <ng-md-icon icon="{{vm.bookingQuestions[$index].length > 0 ? \'done\' : \'priority_high\'}}" class=inputStatusIcon></ng-md-icon> <md-input-container class=md-block flex> <textarea name=question{{$index}} ng-model=vm.bookingQuestions[$index] minlength=2 maxlength=300 rows=1 required></textarea> <div class=errors ng-messages="questionForm[\'question\' + $index].$error" ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be 2 or more characters long.</div> <div ng-message=maxlength>Must be 300 or fewer characters long.</div> </div> <div class=errors ng-messages="questionForm[\'question\' + $index].$error" ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be 2 or more chars.</div> <div ng-message=maxlength>Must be 300 or fewer chars</div> </div> </md-input-container> </div> </div> </div> </form> </div> <div layout=row layout-align="end center" layout-margin> <span flex style=text-align:right;color:red;font-size:12px ng-if="!dashboard && !vm.areBookingQuestionsValid()"> Please answer all questions before proceeding to payment. Write N/A if a question does not apply <md-checkbox ng-if=false ng-model=vm.answerAllQuestionsChecked ng-true-value="\'yes\'" ng-false-value="\'no\'" aria-label=""> Answer all question ? </md-checkbox> </span> <progress-button class="md-raised md-primary md-hue-2 md-{{vm.theme}}-theme" ng-disabled="!dashboard && !vm.isFinishButtonValid" loading=vm.pricingQuoteStarted on-click="vm.goToNextStep(\'paymentStep\')" spinner=3 label="{{vm.nextButtonLabel(\'questions\').label}}"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> </div> <div class=payment-section-new> <list-item class="paymentHeader md-2-line" ng-disabled=!vm.isPaymentValid()> <div layout=row layout-align="start center" flex=80> <ng-md-icon icon=filter_5 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0 && vm.questions.length > 0"></ng-md-icon> <ng-md-icon icon=filter_4 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length > 0 && vm.questions.length == 0 || vm.addons.length == 0 && vm.questions.length > 0"></ng-md-icon> <ng-md-icon icon=filter_3 class="listIcon listItemHeaderIcon leftIcon" ng-if="vm.addons.length == 0 && vm.questions.length == 0"></ng-md-icon> <span class=paymentSubTitle>Payment Details</span> </div> <div layout=row layout-align="end center" flex=20> <div layout=column layout-align="center end" flex> </div> </div> </list-item> <md-divider class=no-margin></md-divider> <div class=formContainer ng-show=vm.stripePaymentExpanded> <div class="radioGroup listItemInputContainer listItemInputContainerNoMargin" ng-if=dashboard> <md-radio-group ng-model=vm.paymentMethod> <md-radio-button value=credit ng-if="vm.pricing.total.amount > 0"> Credit Card (Online)</md-radio-button> <md-radio-button value=cash>Cash</md-radio-button> <md-radio-button value=debit> Office Point of Sale (POS) </md-radio-button> <md-radio-button value=gift> Gift Card </md-radio-button> <md-radio-button value=transfer> Bank Transfer </md-radio-button> <md-radio-button value=reserved> Reservation - Pay Later </md-radio-button> </md-radio-group> </div> <div layout=row layout-align="end center" layout-margin ng-if="vm.paymentMethod != \'credit\' && dashboard"> <progress-button class="md-raised md-primary md-hue-2" ng-disabled="vm.countAttendeesAdded() < 1" loading="bookingSuccessResponse == \'processing\'" on-click=vm.submitNonCreditCardBooking() spinner=3 label="{{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}"></progress-button> </div> <div layout=row layout-align="end center" layout-margin ng-if="vm.paymentMethod == \'credit\' && dashboard"> <progress-button class="md-raised md-primary md-hue-2" ng-disabled="vm.countAttendeesAdded() < 1" loading="bookingSuccessResponse == \'processing\'" on-click=vm.goToPay() spinner=3 label="{{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}"></progress-button> </div> </div> <form method=post id=payment-form name=creditCardDetailsForm ng-show=false> <div class=form-row style="padding:0 30px 20px 20px"> <div id=card-errors></div> <div id=card-element> </div> </div> <div ng-if=vm.waitingForResponse layout=row layout-align="space-around center" style=padding:20px> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div layout=row layout-align="end center" layout-margin> <md-button type=submit class="md-raised md-primary md-hue-2" ng-class="{\'valid\': vm.isPaymentValid() && vm.stripeCardIsValid && !vm.waitingForResponse}" ng-disabled="!vm.isPaymentValid() || vm.paymentWasSent" class=submitButton><i class="fa fa-credit-card" aria-hidden=true></i> {{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }}</md-button> </div> </form> <div layout=row ng-if=false> <md-button flex class="md-raised md-primary md-hue-2" ng-disabled="!vm.isPaymentValid() || vm.paymentWasSent" ng-click=vm.goToPay()><i class="fa fa-credit-card" aria-hidden=true></i> {{vm.paymentMethod == \'reserved\' ? \'Reserve\' : \'Pay\' }}</md-button> </div> <div ng-if=!dashboard> <md-card class="transparent no-margin" ng-show="vm.showPaymentForm && paymentResponse.length < 1"> <div ng-if=vm.loadingIframe layout=row layout-align="space-around center" style=padding:20px> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div> </div> </div> </div></md-content> '},function(module,exports){module.exports='<div flex layout=column> <div ng-if="dashboard && paymentResponse.length == 0" flex ng-include="\'dashboard.html\'" layout=column></div> <div ng-if="!dashboard && paymentResponse.length == 0" flex ng-include="\'no-dashboard.html\'" layout=column></div> <div flex ng-show="paymentResponse.length > 0" class=paymentResponseContainer layout=column> <div flex layout=column class=paymentSummaryCardResponse> <div flex ng-if="paymentResponse == \'success\'" class=easeIn> <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align="start center" md-colors="{color: \'default-primary\'}"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">{{bookingSuccessResponse.data.booking.status == \'unpaid\' ? \'Booking\' : \'Payment\'}} Complete</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=check class=listIcon ng-style="{fill: \'green\'}"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation ng-if=dashboard> <h3>Congratulations!</h3> <p>Your {{bookingSuccessResponse.data.booking.status == \'unpaid\' ? \'reservation\' : \'booking\'}} is confirmed.</p> <p>{{vm.formData.fullName}} is attending {{bookingSuccessResponse.data.booking.title}} on {{formatDate(bookingSuccessResponse.data.booking.startTime, \'LL\')}}</p> <p>A confirmation email will be sent to {{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</p> <div class=booking-id>The reference ID is: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> <div class=confirmation ng-if=!dashboard> <h3>Congratulations!</h3> <p>Your booking is confirmed.</p> <p>You will receive a confirmation email at: <strong>{{vm.formData[\'mail\']}}</strong></p> <p class=margin-top>For questions about your booking, please contact:</p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].companyName}} ({{bookingSuccessResponse.data.booking.organizations[0].primaryContact.phoneNumber}})</strong></p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</strong></p> <div class=booking-id>Booking ID: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div style=margin-top:25px layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> </div> </div> <div flex ng-if="paymentResponse == \'failed\'"> <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align="start center" md-colors="{color: \'default-primary\'}"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Failed</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=error class=listIcon ng-style="{fill: \'red\'}"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> <div style=margin-top:25px layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click=vm.payNow()>Try Again</md-button> </span> </div> </div> </div> </div> <div flex ng-if="paymentResponse == \'processing\'"> <div class="paymentHeader md-2-line md-primary" ng-mouseleave="addOnsHover = 0" ng-mouseenter="addOnsHover = 1" ng-init="addOnsHover=0"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align="start center" md-colors="{color: \'default-primary\'}"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class="paymentSubTitle total">Payment Processing</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=watch_later class=listIcon ng-style="{fill: \'red\'}"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> <div style=margin-top:25px layout=row layout-align="center center"> <span flex> <md-button class="md-raised md-primary" ng-click="goToState(\'home\')">Return</md-button> </span> </div> </div> </div> </div> </div> </div> </div>'},function(module,exports){module.exports='<div flex layout=column> <div flex ng-if=screenIsBig() layout=row class=activityBookDialogLargeNew ng-show="(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)"> <div flex layout=column> <div class=left-panel flex ng-include="\'activity-forms.html\'" layout=column></div> </div> <div flex layout=column> <div flex ng-include="\'activity-total.html\'" layout=column></div> </div> </div> <div flex ng-if=!screenIsBig() class=activityBookDialogLargeNew ng-show="(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)"> <div layout=column> <div flex ng-include="\'activity-forms.html\'" layout=column></div> </div> <div layout=column> <div flex ng-include="\'activity-total.html\'" layout=column></div> </div> </div> <md-card flex layout=column style=min-height:350px ng-show="vm.showPaymentForm && paymentResponse.length < 1"> <div flex layout=column layout-align="center center" ng-if=vm.paymentFormIsLoading> <md-progress-circular md-mode=indeterminate md-diameter=40></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div>'},function(module,exports){module.exports='<div flex layout=column> <div class=payment-icons-bar flex=none layout=row layout-align="center center"> <div flex> <img class=payment-icons-bar-left src=https://s3.amazonaws.com/assets.ablsolution.com/Dashboard/ablpay2.png /> </div> <div flex style=text-align:right> <img class=payment-icons-bar-right src=https://s3.amazonaws.com/assets.ablsolution.com/Dashboard/paylock.png /> </div> </div> <div flex ng-if=screenIsBig() layout=row class=activityBookDialogLargeNew ng-show="(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)"> <div flex layout=column> <div class=left-panel-no-dashboard flex ng-include="\'activity-forms.html\'" layout=column></div> </div> <div flex layout=column class=rightCheckoutPanel> <div flex ng-include="\'activity-total.html\'" layout=column></div> </div> </div> <div flex ng-if=!screenIsBig() class=activityBookDialogLargeNew ng-show="(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)"> <div> <div class=left-panel-no-dashboard flex ng-include="\'activity-forms.html\'" layout=column></div> </div> <div class=rightCheckoutPanel> <div flex ng-include="\'activity-total.html\'" layout=column></div> </div> </div> </div>'},function(module,exports){"use strict";function activityBookValidator(vm,$http,$stateParams){return vm.searchClients=function(query){return Rx.Observable.fromPromise($http({method:"GET",url:vm.config.apiVersion+"/clients?fullName="+text,headers:{"x-abl-access-key":$stateParams.merchant,"x-abl-date":Date.parse((new Date).toISOString())}})).select(function(response){return response})},vm}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=activityBookValidator},function(module,exports){"use strict";function activityAdjustmentControls(){var vm=this;this.$onInit=function(){},this.$onChanges=function(changesObj){},this.$postLink=function(){},vm.addCharge=function(label,price){}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=activityAdjustmentControls}]);
//# sourceMappingURL=abl-sdk.min.js.map