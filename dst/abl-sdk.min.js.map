{"version":3,"sources":["webpack:///abl-sdk.min.js","webpack:///webpack/bootstrap 50798df6db90d435e704","webpack:///./src/abl-sdk.js","webpack:///external \"feathers\"","webpack:///./~/feathers-localstorage/lib/index.js","webpack:///./~/feathers-memory/lib/index.js","webpack:///./~/uberproto/lib/proto.js","webpack:///./~/feathers-query-filters/lib/index.js","webpack:///./~/feathers-commons/lib/commons.js","webpack:///./~/feathers-commons/lib/arguments.js","webpack:///./~/feathers-commons/lib/utils.js","webpack:///./~/process/browser.js","webpack:///./~/feathers-commons/lib/hooks.js","webpack:///./~/feathers-errors/lib/index.js","webpack:///./~/debug/src/browser.js","webpack:///./~/debug/src/debug.js","webpack:///./~/ms/index.js","webpack:///./~/feathers-reactive/lib/index.js","webpack:///./~/feathers-reactive/lib/resource.js","webpack:///./~/feathers-reactive/lib/utils.js","webpack:///./~/feathers-reactive/lib/list.js","webpack:///./~/feathers-reactive/lib/strategies.js","webpack:///./src/auth.js","webpack:///./src/utils.js","webpack:///./src/styles.css?f492","webpack:///./src/styles.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./~/style-loader/fixUrls.js","webpack:///./src/rest.js","webpack:///external \"jQuery\"","webpack:///./src/helpers/text-transforms.js","webpack:///./src/activity/activity-book.js","webpack:///./src/activity/activity-total.html","webpack:///./src/activity/activity-forms.html","webpack:///./src/activity/activity-book.html","webpack:///./src/activity/activity-book-validators.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_feathers","_feathers2","_feathersLocalstorage","_feathersLocalstorage2","_feathersReactive","_feathersReactive2","_auth","_auth2","_utils","_utils2","_styles","_rest","_rest2","_textTransforms","_textTransforms2","sdkProvider","settings","endpoint","socketOpts","feathersAuth","_useSocket","authStorage","window","localStorage","services","setAuthStorage","newAuthStorage","setSocketOpts","opts","useSocket","socketEnabled","setEndpoint","newEndpoint","setFeathersAuth","isFeathersAuth","setServices","newServices","getSettings","$get","$injector","$rootScope","$timeout","$log","$mdToast","$http","get","that","this","loading","loadingTimeout","afterRender","current","total","cancel","console","log","app","RxJS","Rx","configure","hooks","use","name","storage","socket","io","socketio","rest","jquery","jQuery","apiKey","feathersSdk","ablSdk","angular","provider","directive","require","restrict","link","scope","elem","attrs","ctrl","ngModel","add","phonenumber","on","origVal","val","replace","length","str","phone","slice","feathers","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","init","options","LocalStorage","defineProperty","_createClass","defineProperties","target","props","i","descriptor","key","protoProps","staticProps","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","_feathersMemory","_Service","arguments","_this","_storageKey","_storage","_throttle","throttle","store","Error","_this2","Promise","resolve","getItem","then","JSON","parse","keys","last","_uId","data","_this3","_timeout","setTimeout","setItem","stringify","method","_this4","_len","args","Array","_key","ready","_get2","apply","concat","_len2","_key2","execute","_len3","_key3","_this5","_len4","_key4","flush","_this6","_len5","_key5","_this7","_len6","_key6","_this8","_len7","_key7","Service","_defineProperty","_toConsumableArray","arr","isArray","arr2","from","_uberproto","_uberproto2","_feathersQueryFilters","_feathersQueryFilters2","_feathersErrors","_feathersErrors2","_feathersCommons","paginate","_id","idField","startId","events","_matcher","matcher","_sorter","sorter","extend","params","getFilter","_getFilter","query","filters","values","_","filter","$sort","sort","$skip","$limit","$select","map","pick","limit","skip","result","_find","page","select","reject","NotFound","all","_create","oldId","BadRequest","_update","omit","_patch","deleted","_remove","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","root","factory","makeSuper","_super","old","fn","tmp","ret","legacyMixin","prop","_old","fnTest","test","es5Mixin","descriptors","proto","processProperty","getOwnPropertyNames","forEach","__init","mixin","proxy","unshift","bind","number","Math","abs","parseInt","getLimit","lower","upper","max","Number","MAX_VALUE","min","convertSort","_typeof","Symbol","iterator","$populate","PROPERTIES","_arguments","_arguments2","_hooks","_hooks2","getArguments","stripSlashes","makeUrl","each","some","every","isMatch","isEmpty","isObject","merge","converters","noop","getCallback","getParams","position","updateOrPatch","callback","getOrRemove","find","update","patch","remove","process","item","_extends","source","fields","otherFields","push","convert","originalQuery","$or","or","filterType","specialFilters","first","second","comparator","modifier","path","env","NODE_ENV","host","HOST_NAME","protocol","PORT","port","assign","hasOwnProperty","$in","ins","indexOf","$nin","nins","$lt","$lte","$gt","$gte","$ne","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","e","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","len","run","Item","array","nextTick","title","browser","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","hookObject","type","hook","defaultMakeArguments","makeArguments","convertHookData","FeathersError","msg","code","className","errors","message","newData","debug","NotAuthenticated","PaymentError","Forbidden","MethodNotAllowed","NotAcceptable","Timeout","Conflict","LengthRequired","Unprocessable","TooManyRequests","GeneralError","NotImplemented","BadGateway","Unavailable","error","400","401","402","403","404","405","406","408","409","411","422","429","500","501","502","503","types","useColors","document","documentElement","style","WebkitAppearance","firebug","exception","table","navigator","userAgent","toLowerCase","match","RegExp","$1","formatArgs","namespace","humanize","diff","color","splice","index","lastC","save","namespaces","removeItem","load","r","DEBUG","localstorage","chrome","local","colors","formatters","j","v","err","enable","selectColor","hash","charCodeAt","createDebug","enabled","curr","Date","ms","prevTime","prev","coerce","format","formatter","logFn","names","skips","split","substr","disable","stack","String","exec","n","parseFloat","y","d","h","s","fmtShort","round","fmtLong","plural","floor","ceil","isNaN","long","FeathersRx","Observable","listStrategies","_strategies2","dataField","makeSorter","lazy","listStrategy","service","rx","_rx","created","fromEvent","updated","patched","removed","methods","_list2","_resource2","mixins","_resource","_list","_strategies","strategy","paramsPositions","getOptions","getSource","stream","exhaustMap","filteredRemoves","filteredEvents","promisify","__super","_ret","observer","_observer","catch","res","next","complete","fromPromise","_first$toPromise","toPromise","_first$toPromise2","isPaginated","base","others","never","always","matches","sortAndTrim","flatMap","smart","onCreated","eventData","onRemoved","onUpdated","processed","scan","authentication","tokenAuth","authenticate","token","info","now","user","logout","localAuth","pass","username","password","authenticated","tokenLogout","setupUtilityFunctions","showToast","toastClass","delay","toast","simple","textContent","action","hideDelay","highlightAction","show","a","b","content","locals","cssWithMappingToString","useSourceMap","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","sourceRoot","join","sourceMap","base64","unescape","encodeURIComponent","list","toString","mediaQuery","alreadyImportedModules","addStylesToDom","styles","domStyle","stylesInDom","refs","parts","addStyle","listToStyles","newStyles","css","media","part","insertStyleElement","styleElement","styleTarget","getElement","insertInto","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","removeStyleElement","parentNode","removeChild","idx","createStyleElement","createElement","attachTagAttrs","createLinkElement","linkElement","rel","element","setAttribute","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","fixUrls","blob","oldSrc","memoize","memo","isOldIE","atob","selector","querySelector","newList","mayRemove","textStore","replacement","Boolean","location","baseUrl","currentDir","pathname","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","o","newUrl","api","endPoint","url","searchString","_jquery2","param","headers","X-ABL-Access-Key","X-ABL-Date","toISOString","response","empty","cache","put","_jquery","toUpper","modelCtrl","capitalize","inputValue","capitalized","toUpperCase","$setViewValue","$render","$parsers","_activityTotal","_activityTotal2","_activityForms","_activityForms2","_activityBook","_activityBook2","_activityBookValidators","_activityBookValidators2","$templateCache","$sce","$compile","$mdMedia","$mdDialog","$window","config","observeOnScope","$stateParams","book","template","$scope","onResize","$digest","controllerAs","controller","$element","$attrs","buildQuery","vm","attendees","quantity","addons","mergeIdenticalArrayItemsIntoObject","seen","ENV","Stripe","apiVersion","FEATHERS_URL","guestDetailsExpanded","attendeesExpanded","addonsExpanded","questionsExpanded","paymentExpanded","couponStatus","appliedCoupon","couponQuery","occupancyRemaining","attendeeSubtotals","addonSubtotals","paymentResponse","toggleGuestDetails","togglePayment","pricing","taxTotal","addonTotal","attendeeTotal","bookingSucceeded","screenIsBig","w","innerWidth","addBookingController","$parent","taxes","questions","toggleQuestions","adjustAddon","mode","getPricingQuote","toggleAddons","adjustAttendee","countAttendees","toggleAttendees","checkAdjustAttendee","$index","safeApply","x-abl-access-key","merchant","x-abl-date","couponDeduction","items","reduce","addon","price","att","tax","getPossibleCoupons","possibleCoupons","checkCoupon","checkingCoupon","validateCoupon","removeCoupon","moment","coupon","endTime","isAfter","maxRedemptions","redemptions","bookingQuestionsCompleted","completed","bookingQuestions","debounce","subscribe","change","$watch","changes","isDefined","activity","charges","charge","status","event","maxOcc","timeslot","countAttendeesAdded","nextStep","makeBooking","showPayzenDialog","startTime","getBookingData","bookingData","copy","formData","operator","_paymentMessageHandler","origin","removeEventListener","paymentSuccessful","addEventListener","phase","$root","$$phase","$apply","bookingResponse","bookingSuccessResponse","booking","iframeDoc","getElementById","contentWindow","open","write","iframeHtml","close","hide","ev","prefill","fullName","mail","phoneNumber","activityBookValidator","searchClients","text"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMM,SAAUI,EAAQD,QAASH,GAEhCI,EAAOD,QAAUH,EAAoB,IAKhC,SAAUI,EAAQD,QAASH,GAEhC,YAkCA,SAASW,GAAuBC,GAC9B,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GEtFnD,GAAAG,GAAAf,EAAA,GFuDKgB,EAAaL,EAAuBI,GEtDzCE,EAAAjB,EAAA,GF0DKkB,EAAyBP,EAAuBM,GEzDrDE,EAAAnB,EAAA,IF6DKoB,EAAqBT,EAAuBQ,GE1DjDE,EAAArB,EAAA,IF8DKsB,EAASX,EAAuBU,GE7DrCE,EAAAvB,EAAA,IFiEKwB,EAAUb,EAAuBY,GE/DtCE,EAAAzB,EAAA,IACA0B,GFkEgBf,EAAuBc,GElEvCzB,EAAA,KFsEK2B,EAAShB,EAAuBe,GEkDrCE,EAAA5B,EAAA,IF9CK6B,EAAmBlB,EAAuBiB,GExE3CE,GAZY9B,EAAQ,IAYN,SAAU+B,GFmFzB,GEjFGC,GACJ,KAAIC,EAEJ,KAAIC,GACJ,EAAIC,GACJ,EAAIC,EAAcC,OAClBC,aAAIC,IFmFH,QACEC,eEjFe,SAAUC,GFkFvBL,EEhFFK,GFmFAC,cEhFc,SAAUC,GFiFtBV,EE/EFU,GFiFAC,UEhFU,SAAUC,GFiFlBV,IE/EFU,GFiFAC,YEhFY,SAAUC,GFiFpBf,EE/EFe,GFiFAC,gBEhFgB,SAAUC,GFiFxBf,EE/EFe,GFiFAC,YEhFY,SAAUC,GFiFpBZ,EE/EFY,GFiFAC,YEhFY,WFiFV,ME/EFpB,IFiFAqB,MEhFM,YAAa,aAAc,WAAY,OAAQ,WAAY,QAChE,SAAUC,EAAWC,EAAYC,EAAUC,EAAMC,EAAUC,GFgF1D,GE/EKJ,GAAaD,EAAUM,IAC3B,cAAIC,EAEJC,IF8FD,IAfAP,EE/EYQ,SACX,EF+EDD,KE/EME,eAEL,KF+EDF,KE/EME,eAAAR,EAA0B,WFgF9BD,EE/EYQ,SACZ,GAED,MFgFDR,EE/EYU,YAAc,SAAUC,EAASC,GFgF3CX,EE/EUY,OAAON,KAChBE,gBF+EDF,KE/EME,eAAAR,EAA0B,WFgF9BD,EE/EYQ,SACZ,GACF,QAEI/B,EFkFJ,MAFAqC,SE/ESC,IACR,SF+EDR,KE/EMS,OACET,KAERS,GFgFF,IE9EOC,GAAOnC,OAKboC,EFqGD,OA1BAX,ME3EMS,KAAA,EAAAvD,EAAAF,WACF4D,WAAU,EAAAtD,EAAAN,SAAW0D,IACrBE,UAAU1D,EAAAF,QAAS6D,SACnBC,IAAI,WAAA1D,EAAAJ,UF0EN+D,KExEG,MFyEHC,QEzEYzC,OAIbC,gBAAIH,GFyEHkC,QExESC,IAAI,WACZtC,GFwED8B,KExEMiB,OAASC,GAAGhD,EACjBC,GFwED6B,KExEMS,IAAIG,UAAU1D,EAAAF,QAASmE,SAASnB,KACtCiB,UFyEAjB,KExEMS,IAAIG,UAAU1D,EAAAF,QAASoE,KAAKlD,GAAUmD,OAAO9C,OACnD+C,UF0EF,EAAI5D,EAAQV,SExEQgD,KAAKS,IAAKb,EAC7BH,GFwEDO,KExEMS,IAAIvC,SACTA,EFwED8B,KExEMS,IAAIc,OAET,oEFwED,EAAI1D,EAAOb,SExELgD,KAAKS,IAEVZ,GFwEDG,KExEMS,IAAInB,YAAc,aAInBlB,IFuEH4B,KEtEMS,KAAM,EAAAjD,EAAAR,SAAuBgD,KAAKS,IAAKV,EAAMzB,EACnDmB,IAEMO,KACRS,SAOHe,GACF,WFoEC,MEnEQxD,GACR,cAGCyD,GACF,WFkEC,MEjEQzD,GACR,QAMH0D,SAAQpF,OAAO,oBACX,aACA,OACCqF,SAAS,OAAQF,GACnBE,SAAS,YAAaH,GACtBI,UAAU,aAAA7D,EAAAf,SACV4E,UAAU,eACT,WFuDD,OACEC,QErDG,UFsDHC,SErDG,IFsDHC,KEtDS,SAAUC,EAAOC,EAAMC,EAAOC,EAAMC,GFuD3CH,EEtDQI,IAAIC,aAAaC,GAAG,QAAS,WFuDnC,GEtDOC,GAAUP,EAAKQ,MAAMC,QAAQ,YACjC,GFsDH,IEtD0B,KAAnBF,EAAQG,OACV,CFsDH,GEtDOC,GAAMJ,EAAQE,QAAQ,UAC1B,OAAIG,EAAQD,EAAIE,MAAM,GAAG,GAAMF,EAAIE,OAAM,EFuD5CxB,QEtDU,gBAAgBmB,IACxBI,YF8DP,SAAUvG,EAAQD,SGrNxBC,EAAAD,QAAA0G,UH2NM,SAAUzG,EAAQD,QAASH,GI3NjC,YAcA,SAAA8G,GAAAC,EAAAC,GAAiD,KAAAD,YAAAC,IAA0C,SAAAC,WAAA,qCAE3F,QAAAC,GAAAC,EAAA5G,GAAiD,IAAA4G,EAAa,SAAAC,gBAAA,4DAAyF,QAAA7G,GAAA,gBAAAA,IAAA,kBAAAA,GAAA4G,EAAA5G,EAEvJ,QAAA8G,GAAAC,EAAAC,GAA0C,qBAAAA,IAAA,OAAAA,EAA+D,SAAAN,WAAA,iEAAAM,GAAuGD,GAAAE,UAAAC,OAAAC,OAAAH,KAAAC,WAAyEG,aAAeC,MAAAN,EAAAO,YAAA,EAAAC,UAAA,EAAAC,cAAA,KAA6ER,IAAAE,OAAAO,eAAAP,OAAAO,eAAAV,EAAAC,GAAAD,EAAAW,UAAAV,GAoJrX,QAAAW,GAAAC,GACA,UAAAC,GAAAD,GArKAV,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAAU,GAAA,WAAgC,QAAAC,GAAAC,EAAAC,GAA2C,OAAAC,GAAA,EAAgBA,EAAAD,EAAAhC,OAAkBiC,IAAA,CAAO,GAAAC,GAAAF,EAAAC,EAA2BC,GAAAd,WAAAc,EAAAd,aAAA,EAAwDc,EAAAZ,cAAA,EAAgC,SAAAY,OAAAb,UAAA,GAAuDL,OAAAY,eAAAG,EAAAG,EAAAC,IAAAD,IAA+D,gBAAA3B,EAAA6B,EAAAC,GAA2L,MAAlID,IAAAN,EAAAvB,EAAAQ,UAAAqB,GAAqEC,GAAAP,EAAAvB,EAAA8B,GAA6D9B,MAExhB+B,EAAA,QAAAnF,GAAAoF,EAAAC,EAAAC,GAAqD,OAAAF,MAAAG,SAAA3B,UAAkD,IAAA4B,GAAA3B,OAAA4B,yBAAAL,EAAAC,EAA8D,IAAAK,SAAAF,EAAA,CAA0B,GAAAG,GAAA9B,OAAA+B,eAAAR,EAA4C,eAAAO,EAAuB,OAA2B3F,EAAA2F,EAAAN,EAAAC,GAA4C,YAAAE,GAA4B,MAAAA,GAAAxB,KAA4B,IAAA6B,GAAAL,EAAAxF,GAAuB,IAAA0F,SAAAG,EAAgD,MAAAA,GAAAlJ,KAAA2I,GAExc/I,SAAAW,QAAAoH,CAEA,IAAAwB,GAAA1J,EAAA,GAQAoI,EAAA,SAAAuB,GAGA,QAAAvB,KACA,GAAAD,GAAAyB,UAAAnD,OAAA,GAAA6C,SAAAM,UAAA,GAAAA,UAAA,KAEA9C,GAAAhD,KAAAsE,EAEA,IAAAyB,GAAA3C,EAAApD,MAAAsE,EAAAH,WAAAR,OAAA+B,eAAApB,IAAA7H,KAAAuD,KAAAqE,GAOA,IALA0B,EAAAC,YAAA3B,EAAAtD,MAAA,WACAgF,EAAAE,SAAA5B,EAAArD,SAAA,mBAAAzC,gBAAAC,aACAuH,EAAAG,UAAA7B,EAAA8B,UAAA,IACAJ,EAAAK,MAAA,MAEAL,EAAAE,SACA,SAAAI,OAAA,4CAEA,OAAAN,GA6HA,MA9IAxC,GAAAe,EAAAuB,GAoBArB,EAAAF,IACAQ,IAAA,QACAhB,MAAA,WACA,GAAAwC,GAAAtG,IAEA,OAAAA,MAAAoG,MAcAG,QAAAC,QAAAxG,KAAAoG,OAbAG,QAAAC,QAAAxG,KAAAiG,SAAAQ,QAAAzG,KAAAgG,cAAAU,KAAA,SAAA9D,GACA,MAAA+D,MAAAC,MAAAhE,GAAA,QACS8D,KAAA,SAAAN,GACT,GAAAS,GAAAlD,OAAAkD,KAAAT,GACAU,EAAAV,EAAAS,IAAAlE,OAAA,GAKA,OAFA2D,GAAAS,KAAAF,EAAAlE,QAAA,mBAAAmE,GAAAR,EAAA/J,IAAAuK,EAAAR,EAAA/J,IAAA,IAEA+J,EAAAF,aAOAtB,IAAA,QACAhB,MAAA,SAAAkD,GACA,GAAAC,GAAAjH,IASA,OAPAA,MAAAkH,WACAlH,KAAAkH,SAAAC,WAAA,WACAF,EAAAhB,SAAAmB,QAAAH,EAAAjB,YAAAW,KAAAU,UAAAJ,EAAAb,cACAa,GAAAC,UACSlH,KAAAmG,WAGTa,KAGAlC,IAAA,UACAhB,MAAA,SAAAwD,GAGA,OAFAC,GAAAvH,KAEAwH,EAAA1B,UAAAnD,OAAA8E,EAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAwFA,EAAAH,EAAaG,IACrGF,EAAAE,EAAA,GAAA7B,UAAA6B,EAGA,OAAA3H,MAAA4H,QAAAlB,KAAA,WACA,GAAAmB,EAEA,QAAAA,EAAA5C,EAAAX,EAAAZ,UAAAS,WAAAR,OAAA+B,eAAApB,EAAAZ,WAAA4D,EAAAC,IAAA9K,KAAAqL,MAAAD,GAAAN,GAAAQ,OAAAN,SAIA3C,IAAA,OACAhB,MAAA,WACA,OAAAkE,GAAAlC,UAAAnD,OAAA8E,EAAAC,MAAAM,GAAAC,EAAA,EAAwEA,EAAAD,EAAeC,IACvFR,EAAAQ,GAAAnC,UAAAmC,EAGA,OAAAjI,MAAAkI,QAAAJ,MAAA9H,MAAA,QAAA+H,OAAAN,OAGA3C,IAAA,MACAhB,MAAA,WACA,OAAAqE,GAAArC,UAAAnD,OAAA8E,EAAAC,MAAAS,GAAAC,EAAA,EAAwEA,EAAAD,EAAeC,IACvFX,EAAAW,GAAAtC,UAAAsC,EAGA,OAAApI,MAAAkI,QAAAJ,MAAA9H,MAAA,OAAA+H,OAAAN,OAGA3C,IAAA,SACAhB,MAAA,WAGA,OAFAuE,GAAArI,KAEAsI,EAAAxC,UAAAnD,OAAA8E,EAAAC,MAAAY,GAAAC,EAAA,EAAwEA,EAAAD,EAAeC,IACvFd,EAAAc,GAAAzC,UAAAyC,EAGA,OAAAvI,MAAAkI,QAAAJ,MAAA9H,MAAA,UAAA+H,OAAAN,IAAAf,KAAA,SAAAM,GACA,MAAAqB,GAAAG,MAAAxB,QAIAlC,IAAA,QACAhB,MAAA,WAGA,OAFA2E,GAAAzI,KAEA0I,EAAA5C,UAAAnD,OAAA8E,EAAAC,MAAAgB,GAAAC,EAAA,EAAwEA,EAAAD,EAAeC,IACvFlB,EAAAkB,GAAA7C,UAAA6C,EAGA,OAAA3I,MAAAkI,QAAAJ,MAAA9H,MAAA,SAAA+H,OAAAN,IAAAf,KAAA,SAAAM,GACA,MAAAyB,GAAAD,MAAAxB,QAIAlC,IAAA,SACAhB,MAAA,WAGA,OAFA8E,GAAA5I,KAEA6I,EAAA/C,UAAAnD,OAAA8E,EAAAC,MAAAmB,GAAAC,EAAA,EAAwEA,EAAAD,EAAeC,IACvFrB,EAAAqB,GAAAhD,UAAAgD,EAGA,OAAA9I,MAAAkI,QAAAJ,MAAA9H,MAAA,UAAA+H,OAAAN,IAAAf,KAAA,SAAAM,GACA,MAAA4B,GAAAJ,MAAAxB,QAIAlC,IAAA,SACAhB,MAAA,WAGA,OAFAiF,GAAA/I,KAEAgJ,EAAAlD,UAAAnD,OAAA8E,EAAAC,MAAAsB,GAAAC,EAAA,EAAwEA,EAAAD,EAAeC,IACvFxB,EAAAwB,GAAAnD,UAAAmD,EAGA,OAAAjJ,MAAAkI,QAAAJ,MAAA9H,MAAA,UAAA+H,OAAAN,IAAAf,KAAA,SAAAM,GACA,MAAA+B,GAAAP,MAAAxB,SAKA1C,GACCsB,EAAAsD,QAMD9E,GAAA8E,QAAAtD,EAAAsD,QACA5M,EAAAD,gBAAA,SJiOM,SAAUC,EAAQD,QAASH,GK5YjC,YAwBA,SAAAW,GAAAC,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCE,QAAAF,GAE7E,QAAAqM,GAAArM,EAAAgI,EAAAhB,GAAmM,MAAxJgB,KAAAhI,GAAkB6G,OAAAY,eAAAzH,EAAAgI,GAAkChB,QAAAC,YAAA,EAAAE,cAAA,EAAAD,UAAA,IAAgFlH,EAAAgI,GAAAhB,EAAoBhH,EAEnM,QAAAsM,GAAAC,GAAkC,GAAA3B,MAAA4B,QAAAD,GAAA,CAA0B,OAAAzE,GAAA,EAAA2E,EAAA7B,MAAA2B,EAAA1G,QAA0CiC,EAAAyE,EAAA1G,OAAgBiC,IAAO2E,EAAA3E,GAAAyE,EAAAzE,EAAoB,OAAA2E,GAAsB,MAAA7B,OAAA8B,KAAAH,GAEvK,QAAArG,GAAAC,EAAAC,GAAiD,KAAAD,YAAAC,IAA0C,SAAAC,WAAA,qCA+M3F,QAAAiB,GAAAC,GACA,UAAA6E,GAAA7E,GA5OAV,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAAU,GAAA,WAAgC,QAAAC,GAAAC,EAAAC,GAA2C,OAAAC,GAAA,EAAgBA,EAAAD,EAAAhC,OAAkBiC,IAAA,CAAO,GAAAC,GAAAF,EAAAC,EAA2BC,GAAAd,WAAAc,EAAAd,aAAA,EAAwDc,EAAAZ,cAAA,EAAgC,SAAAY,OAAAb,UAAA,GAAuDL,OAAAY,eAAAG,EAAAG,EAAAC,IAAAD,IAA+D,gBAAA3B,EAAA6B,EAAAC,GAA2L,MAAlID,IAAAN,EAAAvB,EAAAQ,UAAAqB,GAAqEC,GAAAP,EAAAvB,EAAA8B,GAA6D9B,KAExhB7G,SAAAW,QAAAoH,CAEA,IAAAqF,GAAAvN,EAAA,GAEAwN,EAAA7M,EAAA4M,GAEAE,EAAAzN,EAAA,GAEA0N,EAAA/M,EAAA8M,GAEAE,EAAA3N,EAAA,IAEA4N,EAAAjN,EAAAgN,GAEAE,EAAA7N,EAAA,GAUAgN,EAAA,WACA,QAAAA,KACA,GAAA7E,GAAAyB,UAAAnD,OAAA,GAAA6C,SAAAM,UAAA,GAAAA,UAAA,KAEA9C,GAAAhD,KAAAkJ,GAEAlJ,KAAAgK,SAAA3F,EAAA2F,aACAhK,KAAAiK,IAAAjK,KAAAzD,GAAA8H,EAAA6F,SAAA7F,EAAA9H,IAAA,KACAyD,KAAA+G,KAAA1C,EAAA8F,SAAA,EACAnK,KAAAoG,MAAA/B,EAAA+B,UACApG,KAAAoK,OAAA/F,EAAA+F,WACApK,KAAAqK,SAAAhG,EAAAiG,SAAAP,EAAAO,QACAtK,KAAAuK,QAAAlG,EAAAmG,QAAAT,EAAAS,OA8LA,MA3LAhG,GAAA0E,IACApE,IAAA,SACAhB,MAAA,SAAAhH,GACA,MAAA4M,GAAA1M,QAAAyN,OAAA3N,EAAAkD,SAOA8E,IAAA,QACAhB,MAAA,SAAA4G,GACA,GAAAC,GAAA7E,UAAAnD,OAAA,GAAA6C,SAAAM,UAAA,GAAAA,UAAA,GAAA8D,EAAA5M,QAEA4N,EAAAD,EAAAD,EAAAG,WACAA,EAAAD,EAAAC,MACAC,EAAAF,EAAAE,QAEAC,EAAAhB,EAAAiB,EAAAD,OAAA/K,KAAAoG,OAAA6E,OAAAjL,KAAAqK,SAAAQ,IAEAxK,EAAA0K,EAAApI,MAoBA,OAlBAmI,GAAAI,OACAH,EAAAI,KAAAnL,KAAAuK,QAAAO,EAAAI,QAGAJ,EAAAM,QACAL,IAAAjI,MAAAgI,EAAAM,QAGA,mBAAAN,GAAAO,SACAN,IAAAjI,MAAA,EAAAgI,EAAAO,SAGAP,EAAAQ,UACAP,IAAAQ,IAAA,SAAAzH,GACA,MAAAiG,GAAAiB,EAAAQ,KAAA1D,MAAAiC,EAAAiB,GAAAlH,GAAAiE,OAAAqB,EAAA0B,EAAAQ,cAIA/E,QAAAC,SACAnG,QACAoL,MAAAX,EAAAO,OACAK,KAAAZ,EAAAM,OAAA,EACApE,KAAA+D,OAIAjG,IAAA,OACAhB,MAAA,SAAA4G,GACA,GAAAV,GAAA,mBAAAU,GAAAV,SAAAU,EAAAV,SAAAhK,KAAAgK,SAEA2B,EAAA3L,KAAA4L,MAAAlB,EAAA,SAAAG,GACA,SAAAjB,EAAA5M,SAAA6N,EAAAb,IAGA,OAAAA,MAAAhN,QAMA2O,EALAA,EAAAjF,KAAA,SAAAmF,GACA,MAAAA,GAAA7E,UAOAlC,IAAA,MACAhB,MAAA,SAAAvH,EAAAmO,GACA,MAAAnO,KAAAyD,MAAAoG,MACAG,QAAAC,QAAAxG,KAAAoG,MAAA7J,IAAAmK,MAAA,EAAAqD,EAAA+B,QAAApB,EAAA1K,KAAAzD,KAGAgK,QAAAwF,OAAA,GAAAjC,GAAA9M,QAAAgP,SAAA,2BAAAzP,EAAA,SAMAuI,IAAA,UACAhB,MAAA,SAAAkD,EAAA0D,GACA,GAAAnO,GAAAyK,EAAAhH,KAAAiK,MAAAjK,KAAA+G,OACA3G,EAAA2J,EAAAiB,EAAAP,UAAgDzD,EAAAmC,KAA0BnJ,KAAAiK,IAAA1N,GAE1E,OAAAgK,SAAAC,QAAAxG,KAAAoG,MAAA7J,GAAA6D,GAAAsG,MAAA,EAAAqD,EAAA+B,QAAApB,EAAA1K,KAAAzD,QAGAuI,IAAA,SACAhB,MAAA,SAAAkD,EAAA0D,GACA,GAAA3E,GAAA/F,IAEA,OAAA0H,OAAA4B,QAAAtC,GACAT,QAAA0F,IAAAjF,EAAAuE,IAAA,SAAAnL,GACA,MAAA2F,GAAAmG,QAAA9L,MAIAJ,KAAAkM,QAAAlF,EAAA0D,MAMA5F,IAAA,UACAhB,MAAA,SAAAvH,EAAAyK,EAAA0D,GACA,GAAAnO,IAAAyD,MAAAoG,MAAA,CAEA,GAAA+F,GAAAnM,KAAAoG,MAAA7J,GAAAyD,KAAAiK,IAOA,OALA1N,GAAA4P,GAAA5P,EAAA4P,EAAA5P,EAEAyK,EAAA+C,EAAAiB,EAAAP,UAA2CzD,EAAAmC,KAA0BnJ,KAAAiK,IAAA1N,IACrEyD,KAAAoG,MAAA7J,GAAAyK,EAEAT,QAAAC,QAAAxG,KAAAoG,MAAA7J,IAAAmK,MAAA,EAAAqD,EAAA+B,QAAApB,EAAA1K,KAAAzD,KAGA,MAAAgK,SAAAwF,OAAA,GAAAjC,GAAA9M,QAAAgP,SAAA,2BAAAzP,EAAA,SAGAuI,IAAA,SACAhB,MAAA,SAAAvH,EAAAyK,EAAA0D,GACA,cAAAnO,GAAAmL,MAAA4B,QAAAtC,GACAT,QAAAwF,OAAA,GAAAjC,GAAA9M,QAAAoP,WAAA,kEAGApM,KAAAqM,QAAA9P,EAAAyK,EAAA0D,MAMA5F,IAAA,SACAhB,MAAA,SAAAvH,EAAAyK,EAAA0D,GACA,MAAAnO,KAAAyD,MAAAoG,OACA2D,EAAAiB,EAAAP,OAAAzK,KAAAoG,MAAA7J,GAAAwN,EAAAiB,EAAAsB,KAAAtF,EAAAhH,KAAAiK,MAEA1D,QAAAC,QAAAxG,KAAAoG,MAAA7J,IAAAmK,MAAA,EAAAqD,EAAA+B,QAAApB,EAAA1K,KAAAzD,MAGAgK,QAAAwF,OAAA,GAAAjC,GAAA9M,QAAAgP,SAAA,2BAAAzP,EAAA,SAGAuI,IAAA,QACAhB,MAAA,SAAAvH,EAAAyK,EAAA0D,GACA,GAAApE,GAAAtG,IAEA,eAAAzD,EACAyD,KAAA4L,MAAAlB,GAAAhE,KAAA,SAAAmF,GACA,MAAAtF,SAAA0F,IAAAJ,EAAA7E,KAAAuE,IAAA,SAAAnL,GACA,MAAAkG,GAAAiG,OAAAnM,EAAAkG,EAAA2D,KAAAjD,EAAA0D,QAKA1K,KAAAuM,OAAAhQ,EAAAyK,EAAA0D,MAMA5F,IAAA,UACAhB,MAAA,SAAAvH,EAAAmO,GACA,GAAAnO,IAAAyD,MAAAoG,MAAA,CACA,GAAAoG,GAAAxM,KAAAoG,MAAA7J,EAGA,cAFAyD,MAAAoG,MAAA7J,GAEAgK,QAAAC,QAAAgG,GAAA9F,MAAA,EAAAqD,EAAA+B,QAAApB,EAAA1K,KAAAzD,KAGA,MAAAgK,SAAAwF,OAAA,GAAAjC,GAAA9M,QAAAgP,SAAA,2BAAAzP,EAAA,SAGAuI,IAAA,SACAhB,MAAA,SAAAvH,EAAAmO,GACA,GAAAzD,GAAAjH,IAEA,eAAAzD,EACAyD,KAAA4L,MAAAlB,GAAAhE,KAAA,SAAAmF,GACA,MAAAtF,SAAA0F,IAAAJ,EAAA7E,KAAAuE,IAAA,SAAAnL,GACA,MAAA6G,GAAAwF,QAAArM,EAAA6G,EAAAgD,KAAAS,QAKA1K,KAAAyM,QAAAlQ,EAAAmO,OAIAxB,IAOA9E,GAAA8E,UACA5M,EAAAD,gBAAA,SLkZM,SAAUC,EAAQD,QAASH,GMpoBjC,GAAAwQ,GAAAC,EAAAC,GAQA,SAAAC,EAAAC,GAEAH,KAAAD,EAAA,EAAAE,EAAA,kBAAAF,KAAA5E,MAAAzL,QAAAsQ,GAAAD,IAAAlH,SAAAoH,IAAAtQ,EAAAD,QAAAuQ,KAMC5M,KAAA,WAED,QAAA+M,GAAAC,EAAAC,EAAAlM,EAAAmM,GACA,kBACA,GAAAC,GAAAnN,KAAAgN,MAKAhN,MAAAgN,OAAA,kBAAAC,KAAAD,EAAAjM,EAIA,IAAAqM,GAAAF,EAAApF,MAAA9H,KAAA8F,UAGA,OAFA9F,MAAAgN,OAAAG,EAEAC,GAIA,QAAAC,GAAAC,EAAAxQ,GACA,GAGAyQ,GAHAlK,EAAAvG,GAAAkD,KACAwN,EAAA,aACAR,EAAArJ,OAAA+B,eAAArC,MAAAK,SAIA,QAAA3C,KAAAuM,GAEAC,EAAAlK,EAAAtC,IAKA,kBAAAuM,GAAAvM,IACA,kBAAAiM,GAAAjM,IAEA,kBAAAwM,IACA,kBAAAD,GAAAvM,KACAyM,EAAAC,KAAAH,EAAAvM,IAEAsC,EAAAtC,GAAAgM,EAAAC,EAAAO,EAAAxM,EAAAuM,EAAAvM,IAEAsC,EAAAtC,GAAAuM,EAAAvM,EAIA,OAAAsC,GAGA,QAAAqK,GAAAJ,EAAAxQ,GACA,GAAAuG,GAAAvG,GAAAkD,KACAwN,EAAA,aACAR,EAAArJ,OAAA+B,eAAArC,MAAAK,UACAiK,KACAC,EAAAN,EACAO,EAAA,SAAA9M,GACA4M,EAAA5M,KACA4M,EAAA5M,GAAA4C,OAAA4B,yBAAAqI,EAAA7M,IAKA,GACA4C,QAAAmK,oBAAAF,GAAAG,QAAAF,UACKD,EAAAjK,OAAA+B,eAAAkI,KAAAjK,OAAA+B,eAAAkI,GAYL,OAVAjK,QAAAkD,KAAA8G,GAAAI,QAAA,SAAAhN,GACA,GAAA8D,GAAA8I,EAAA5M,EAEA,mBAAA8D,GAAAf,OAAA0J,EAAAC,KAAA5I,EAAAf,SACAe,EAAAf,MAAAiJ,EAAAC,EAAA3J,EAAAtC,KAAA8D,EAAAf,QAGAH,OAAAY,eAAAlB,EAAAtC,EAAA8D,KAGAxB,EAGA,OAMAO,OAAA,WACA,GAAAX,GAAAU,OAAAC,OAAA5D,MACAoE,EAAA,gBAAAnB,GAAA+K,OAAA/K,EAAA+K,OAAA,MAKA,OAHA,kBAAA/K,GAAAmB,IACAnB,EAAAmB,GAAA0D,MAAA7E,EAAA6C,WAEA7C,GAOAgL,MAAA,kBAAAtK,QAAAY,eAAAmJ,EAAAL,EAQA5C,OAAA,SAAA6C,EAAAxQ,GACA,MAAAkD,MAAAiO,MAAAX,EAAA3J,OAAAC,OAAA9G,GAAAkD,QAOAkO,MAAA,SAAAnN,GACA,GAAAmM,GAAAlN,KAAAe,GACA0G,EAAAC,MAAAhE,UAAAZ,MAAArG,KAAAqJ,UAAA,EAGA,OADA2B,GAAA0G,QAAAnO,MACAkN,EAAAkB,KAAAtG,MAAAoF,EAAAzF,QN+oBM,SAAUnL,EAAQD,QAASH,GOxxBjC,YAwBA,SAAA0K,GAAAyH,GACA,sBAAAA,GACA,MAAAC,MAAAC,IAAAC,SAAAH,EAAA,KAIA,QAAAI,GAAAhD,EAAAzB,GACA,GAAAA,KAAAhN,QAAA,CACA,GAAA0R,GAAA,gBAAAjD,KAAAzB,EAAAhN,QACA2R,EAAA,gBAAA3E,GAAA4E,IAAA5E,EAAA4E,IAAAC,OAAAC,SAEA,OAAAR,MAAAS,IAAAL,EAAAC,GAGA,MAAAlD,GAGA,QAAAuD,GAAA7D,GACA,kCAAAA,GAAA,YAAA8D,EAAA9D,IACA,MAAAA,EAGA,IAAAQ,KAMA,OAJAhI,QAAAkD,KAAAsE,GAAA4C,QAAA,SAAAjJ,GACA,MAAA6G,GAAA7G,GAAA,WAAAmK,EAAA9D,EAAArG,IAAAqG,EAAArG,GAAA0J,SAAArD,EAAArG,GAAA,MAGA6G,EAlDAhI,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAAmL,GAAA,kBAAAC,SAAA,gBAAAA,QAAAC,SAAA,SAAArS,GAAoG,aAAAA,IAAqB,SAAAA,GAAmB,MAAAA,IAAA,kBAAAoS,SAAApS,EAAA+G,cAAAqL,QAAApS,IAAAoS,OAAAxL,UAAA,eAAA5G,GAE5IT,SAAAW,QAAA,SAAA6N,EAAAb,GACA,GAAAc,IACAI,MAAA8D,EAAAnE,EAAAK,OACAG,OAAAoD,EAAA7H,EAAAiE,EAAAQ,QAAArB,GACAoB,MAAAxE,EAAAiE,EAAAO,OACAE,QAAAT,EAAAS,QACA8D,UAAAvE,EAAAuE,UAGA,QAAUtE,UAAAD,MAAAd,EAAAiB,EAAAsB,KAAAxE,MAAAiC,EAAAiB,GAAAH,GAAA9C,OAAAsH,KAGV,IAAAtF,GAAA7N,EAAA,GAEAmT,GAAA,+CAiCA/S,GAAAD,gBAAA,SP8xBM,SAAUC,EAAQD,QAASH,GQr1BjC,YAgBA,SAAAW,GAAAC,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCE,QAAAF,GAd7E6G,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAAwL,GAAApT,EAAA,GAEAqT,EAAA1S,EAAAyS,GAEA7R,EAAAvB,EAAA,GAEAsT,EAAAtT,EAAA,IAEAuT,EAAA5S,EAAA2S,EAIAnT,SAAAW,SACAgO,EAAAvN,EAAAuN,EACA0E,aAAAH,EAAAvS,QACA2S,aAAAlS,EAAAkS,aACA9O,MAAA4O,EAAAzS,QACAsN,QAAA7M,EAAA6M,QACAE,OAAA/M,EAAA+M,OACAsB,OAAArO,EAAAqO,OACA8D,QAAAnS,EAAAmS,QAEAC,KAAApS,EAAAoS,KACAC,KAAArS,EAAAqS,KACAC,MAAAtS,EAAAsS,MACAlJ,KAAApJ,EAAAoJ,KACAkE,OAAAtN,EAAAsN,OACAiF,QAAAvS,EAAAuS,QACAC,QAAAxS,EAAAwS,QACAC,SAAAzS,EAAAyS,SACAzF,OAAAhN,EAAAgN,OACA6B,KAAA7O,EAAA6O,KACAd,KAAA/N,EAAA+N,KACA2E,MAAA1S,EAAA0S,OAEA7T,EAAAD,gBAAA,SR21BM,SAAUC,EAAQD,SSp4BxB,YAOA,SAAA4S,GAAAnS,GAAuB,MAAAA,IAAA,mBAAAoS,SAAApS,EAAA+G,cAAAqL,OAAA,eAAApS,GAwFvB,QAAA4S,GAAApI,EAAAG,GACA,MAAA2I,GAAA9I,GAAAG,GA9FA9D,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,IAEAzH,QAAAW,QAAA0S,CAIA,IAAAW,GAAAhU,QAAAgU,KAAA,aACAC,EAAA,SAAA7I,GACA,GAAAX,GAAAW,IAAA9E,OAAA,EACA,yBAAAmE,KAAAuJ,GAEAE,EAAA,SAAA9I,EAAA+I,GACA,iBAAAvB,EAAAxH,EAAA+I,IAAA/I,EAAA+I,OAGAC,EAAA,SAAA1P,GACA,gBAAA0G,GACA,GAAAlL,GAAAkL,EAAA,GACAT,EAAAS,EAAA,GACAiJ,EAAAJ,EAAA7I,GACAiD,EAAA6F,EAAA9I,EAAA,EAEA,sBAAAlL,GACA,SAAA8J,OAAA,wBAAAtF,EAAA,0BAGA,mCAAAiG,GAAA,YAAAiI,EAAAjI,IACA,SAAAX,OAAA,yBAAAtF,EAAA,IAGA,IAAA0G,EAAA9E,OAAA,EACA,SAAA0D,OAAA,2BAAAtF,EAAA,mBAGA,QAAAxE,EAAAyK,EAAA0D,EAAAgG,KAIAC,EAAA,SAAA5P,GACA,gBAAA0G,GACA,GAAAlL,GAAAkL,EAAA,GACAiD,EAAA6F,EAAA9I,EAAA,GACAiJ,EAAAJ,EAAA7I,EAEA,IAAAA,EAAA9E,OAAA,EACA,SAAA0D,OAAA,2BAAAtF,EAAA,mBAGA,sBAAAxE,GACA,SAAA8J,OAAA,wBAAAtF,EAAA,0BAGA,QAAAxE,EAAAmO,EAAAgG,KAIAN,EAAA/T,QAAA+T,YACAQ,KAAA,SAAAnJ,GACA,GAAAiJ,GAAAJ,EAAA7I,GACAiD,EAAA6F,EAAA9I,EAAA,EAEA,IAAAA,EAAA9E,OAAA,EACA,SAAA0D,OAAA,+CAGA,QAAAqE,EAAAgG,IAEA9M,OAAA,SAAA6D,GACA,GAAAT,GAAAS,EAAA,GACAiD,EAAA6F,EAAA9I,EAAA,GACAiJ,EAAAJ,EAAA7I,EAEA,mCAAAT,GAAA,YAAAiI,EAAAjI,IACA,SAAAX,OAAA,iDAGA,IAAAoB,EAAA9E,OAAA,EACA,SAAA0D,OAAA,iDAGA,QAAAW,EAAA0D,EAAAgG,IAGAG,OAAAJ,EAAA,UAEAK,MAAAL,EAAA,SAEA3Q,IAAA6Q,EAAA,OAEAI,OAAAJ,EAAA,YT+4BM,SAAUrU,EAAQD,QAASH,IU3+BjC,SAAA8U,GAAA,YAyBA,SAAA7H,GAAArM,EAAAgI,EAAAhB,GAAmM,MAAxJgB,KAAAhI,GAAkB6G,OAAAY,eAAAzH,EAAAgI,GAAkChB,QAAAC,YAAA,EAAAE,cAAA,EAAAD,UAAA,IAAgFlH,EAAAgI,GAAAhB,EAAoBhH,EAEnM,QAAAmS,GAAAnS,GAAuB,MAAAA,IAAA,mBAAAoS,SAAApS,EAAA+G,cAAAqL,OAAA,eAAApS,GAEvB,QAAAsM,GAAAC,GAAkC,GAAA3B,MAAA4B,QAAAD,GAAA,CAA0B,OAAAzE,GAAA,EAAA2E,EAAA7B,MAAA2B,EAAA1G,QAA0CiC,EAAAyE,EAAA1G,OAAgBiC,IAAO2E,EAAA3E,GAAAyE,EAAAzE,EAAoB,OAAA2E,GAAsB,MAAA7B,OAAA8B,KAAAH,GAEvK,QAAAsG,GAAA5O,GACA,MAAAA,GAAA2B,QAAA,qBAGA,QAAAmN,GAAA/S,EAAA4T,GACA5T,GAAA,kBAAAA,GAAAiR,QACAjR,EAAAiR,QAAA2C,GACGR,EAAApT,IACH6G,OAAAkD,KAAA/J,GAAAiR,QAAA,SAAAjJ,GACA,MAAA4L,GAAA5T,EAAAgI,QAKA,QAAAgL,GAAAhM,EAAA4M,GACA,MAAA/M,QAAAkD,KAAA/C,GAAAyH,IAAA,SAAAzG,GACA,OAAAhB,EAAAgB,QACGgL,KAAA,SAAA1P,GACH,MAAAsQ,GAAA5I,MAAAtC,OAAA4D,EAAAhJ,MAIA,QAAA2P,GAAAjM,EAAA4M,GACA,MAAA/M,QAAAkD,KAAA/C,GAAAyH,IAAA,SAAAzG,GACA,OAAAhB,EAAAgB,QACGiL,MAAA,SAAA3P,GACH,MAAAsQ,GAAA5I,MAAAtC,OAAA4D,EAAAhJ,MAIA,QAAAyG,GAAA/J,GACA,MAAA6G,QAAAkD,KAAA/J,GAGA,QAAAiO,GAAAjO,GACA,MAAAkO,GAAAnE,KAAA/J,GAAAyO,IAAA,SAAAzG,GACA,MAAAhI,GAAAgI,KAIA,QAAAkL,GAAAlT,EAAAmU,GACA,MAAAjG,GAAAnE,KAAAoK,GAAAlB,MAAA,SAAAjL,GACA,MAAAhI,GAAAgI,KAAAmM,EAAAnM,KAIA,QAAAmL,GAAAnT,GACA,WAAAkO,EAAAnE,KAAA/J,GAAA6F,OAGA,QAAAuN,GAAAe,GACA,qCAAAA,GAAA,YAAAhC,EAAAgC,MAAAvJ,MAAA4B,QAAA2H,IAAA,OAAAA,EAGA,QAAAxG,KACA,MAAAyG,GAAApJ,MAAAtC,OAAAM,WAGA,QAAAwG,GAAAxP,GAGA,OAFA6O,GAAAX,EAAAP,UAA0B3N,GAE1B0K,EAAA1B,UAAAnD,OAAAkE,EAAAa,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAoFA,EAAAH,EAAaG,IACjGd,EAAAc,EAAA,GAAA7B,UAAA6B,EAMA,OAHAd,GAAAkH,QAAA,SAAAjJ,GACA,aAAA6G,GAAA7G,KAEA6G,EAGA,QAAAH,GAAA2F,GAGA,OAFAxF,MAEA3D,EAAAlC,UAAAnD,OAAAkE,EAAAa,MAAAM,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAwFA,EAAAD,EAAeC,IACvGpB,EAAAoB,EAAA,GAAAnC,UAAAmC,EAMA,OAHApB,GAAAkH,QAAA,SAAAjJ,GACA6G,EAAA7G,GAAAqM,EAAArM,KAEA6G,EAGA,QAAAwE,GAAAzL,EAAAyM,GAWA,MAVAjB,GAAAxL,IAAAwL,EAAAiB,IACAxN,OAAAkD,KAAAsK,GAAApD,QAAA,SAAAjJ,GACAoL,EAAAiB,EAAArM,KACAJ,EAAAI,IAAAoM,EAAAxM,EAAAyE,KAA6DrE,OAC7DqL,EAAAzL,EAAAI,GAAAqM,EAAArM,KAEAoM,EAAAxM,EAAAyE,KAA2CrE,EAAAqM,EAAArM,OAI3CJ,EAwDA,QAAAoH,GAAApB,GAGA,OAFA0G,GAAA1G,KAAAG,OAAAH,EAAAG,MAAAS,QAEAnD,EAAArC,UAAAnD,OAAA0O,EAAA3J,MAAAS,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAA+FA,EAAAD,EAAeC,IAC9GiJ,EAAAjJ,EAAA,GAAAtC,UAAAsC,EAGAV,OAAA4B,QAAA8H,IAAAC,EAAA1O,QACAyO,EAAAE,KAAAxJ,MAAAsJ,EAAAC,EAGA,IAAAE,GAAA,SAAA5F,GACA,MAAAjE,OAAA4B,QAAA8H,GAIApG,EAAAQ,KAAA1D,MAAAkD,GAAAW,GAAA5D,OAAAqB,EAAAgI,KAHAzF,EAMA,iBAAAA,GACA,MAAAjE,OAAA4B,QAAAqC,GACAA,EAAAJ,IAAAgG,GAGAA,EAAA5F,IAIA,QAAArB,GAAAkH,GACA,GAAA3G,GAAAG,EAAAsB,KAAAkF,EAAA,mCAEA,iBAAAP,GACA,SAAApG,EAAA4G,MAAAzG,EAAA8E,KAAAjF,EAAA4G,IAAA,SAAAC,GACA,MAAApH,GAAAoH,GAAAT,OAKAjG,EAAA+E,MAAAlF,EAAA,SAAA/G,EAAAgB,GACA,cAAAhB,GAAA,+BAAAA,GAAA,YAAAmL,EAAAnL,IACAkH,EAAA+E,MAAAjM,EAAA,SAAAY,EAAAiN,GACA,GAAAC,EAAAD,GAAA,CACA,GAAA1G,GAAA2G,EAAAD,GAAA7M,EAAAJ,EACA,OAAAuG,GAAAgG,GAGA,WAEO,mBAAAA,GAAAnM,IACPmM,EAAAnM,KAAA+F,EAAA/F,MAQA,QAAA0F,GAAAU,GACA,gBAAA2G,EAAAC,GACA,GAAAC,GAAA,CAYA,OAXAlC,GAAA3E,EAAA,SAAA8G,EAAAlN,GACAkN,EAAAxD,SAAAwD,EAAA,IAEAH,EAAA/M,GAAAgN,EAAAhN,KACAiN,GAAA,EAAAC,GAGAH,EAAA/M,GAAAgN,EAAAhN,KACAiN,GAAA,EAAAC,KAGAD,GAIA,QAAAnC,GAAAqC,GACA,GAAAxR,GAAAqF,UAAAnD,QAAA,GAAA6C,SAAAM,UAAA,MAAoEA,UAAA,GAEpEhG,EAAA,kBAAAW,GAAAX,IAAAW,EAAAX,IAAAsO,KAAA3N,GAAA,aACAyR,EAAApS,EAAA,QAAAkR,EAAAkB,IAAAC,SACAC,EAAAtS,EAAA,SAAAkR,EAAAkB,IAAAG,WAAA,YACAC,EAAA,gBAAAJ,GAAA,SAAAA,GAAA1M,SAAA0M,EAAA,eACAK,EAAAzS,EAAA,SAAAkR,EAAAkB,IAAAK,MAAA,KACAC,EAAA,gBAAAN,GAAA,SAAAA,GAAA1M,SAAA0M,EAAA,IAAAK,EAAA,EAIA,OAFAN,MAAA,GAEAK,EAAA,MAAAF,EAAAI,EAAA,IAAA7C,EAAAsC,GA3QA,GAAAf,GAAAvN,OAAA8O,QAAA,SAAA/N,GAAmD,OAAAE,GAAA,EAAgBA,EAAAkB,UAAAnD,OAAsBiC,IAAA,CAAO,GAAAuM,GAAArL,UAAAlB,EAA2B,QAAAE,KAAAqM,GAA0BxN,OAAAD,UAAAgP,eAAAjW,KAAA0U,EAAArM,KAAyDJ,EAAAI,GAAAqM,EAAArM,IAAiC,MAAAJ,GAE/Of,QAAAY,eAAAlI,QAAA,cACAyH,OAAA,IAEAzH,QAAAsT,eACAtT,QAAAwT,OACAxT,QAAAyT,OACAzT,QAAA0T,QACA1T,QAAAwK,OACAxK,QAAA0O,SACA1O,QAAA2T,UACA3T,QAAA4T,UACA5T,QAAA6T,WACA7T,QAAAoO,SACApO,QAAAiQ,OACAjQ,QAAAmP,OACAnP,QAAA8T,QACA9T,QAAAyP,SACAzP,QAAAiO,UACAjO,QAAAmO,SACAnO,QAAAuT,SA0GA,IAAA5E,GAAA3O,QAAA2O,GACA6E,OACAC,OACAC,QACAlJ,OACAkE,SACAiF,UACAC,UACAC,WACAzF,SACA6B,OACAd,OACA2E,SAGAyB,EAAAvV,QAAAuV,gBACAe,IAAA,SAAA7N,EAAA8N,GACA,gBAAAxS,GACA,MAAAwS,GAAAC,QAAAzS,EAAA0E,OAAA,IAGAgO,KAAA,SAAAhO,EAAAiO,GACA,gBAAA3S,GACA,MAAA2S,GAAAF,QAAAzS,EAAA0E,OAAA,IAGAkO,IAAA,SAAAlO,EAAAhB,GACA,gBAAA1D,GACA,MAAAA,GAAA0E,GAAAhB,IAGAmP,KAAA,SAAAnO,EAAAhB,GACA,gBAAA1D,GACA,MAAAA,GAAA0E,IAAAhB,IAGAoP,IAAA,SAAApO,EAAAhB,GACA,gBAAA1D,GACA,MAAAA,GAAA0E,GAAAhB,IAGAqP,KAAA,SAAArO,EAAAhB,GACA,gBAAA1D,GACA,MAAAA,GAAA0E,IAAAhB,IAGAsP,IAAA,SAAAtO,EAAAhB,GACA,gBAAA1D,GACA,MAAAA,GAAA0E,KAAAhB,OV2kC8BrH,KAAKJ,QAASH,EAAoB,MAI1D,SAAUI,EAAQD,SWrvCxB,QAAAgX,KACA,SAAAhN,OAAA,mCAEA,QAAAiN,KACA,SAAAjN,OAAA,qCAsBA,QAAAkN,GAAAC,GACA,GAAAC,IAAAtM,WAEA,MAAAA,YAAAqM,EAAA,EAGA,KAAAC,IAAAJ,IAAAI,IAAAtM,WAEA,MADAsM,GAAAtM,WACAA,WAAAqM,EAAA,EAEA,KAEA,MAAAC,GAAAD,EAAA,GACK,MAAAE,GACL,IAEA,MAAAD,GAAAhX,KAAA,KAAA+W,EAAA,GACS,MAAAE,GAET,MAAAD,GAAAhX,KAAAuD,KAAAwT,EAAA,KAMA,QAAAG,GAAAC,GACA,GAAAC,IAAAC,aAEA,MAAAA,cAAAF,EAGA,KAAAC,IAAAP,IAAAO,IAAAC,aAEA,MADAD,GAAAC,aACAA,aAAAF,EAEA,KAEA,MAAAC,GAAAD,GACK,MAAAF,GACL,IAEA,MAAAG,GAAApX,KAAA,KAAAmX,GACS,MAAAF,GAGT,MAAAG,GAAApX,KAAAuD,KAAA4T,KAYA,QAAAG,KACAC,GAAAC,IAGAD,GAAA,EACAC,EAAAtR,OACAuR,EAAAD,EAAAlM,OAAAmM,GAEAC,GAAA,EAEAD,EAAAvR,QACAyR,KAIA,QAAAA,KACA,IAAAJ,EAAA,CAGA,GAAAK,GAAAd,EAAAQ,EACAC,IAAA,CAGA,KADA,GAAAM,GAAAJ,EAAAvR,OACA2R,GAAA,CAGA,IAFAL,EAAAC,EACAA,OACAC,EAAAG,GACAL,GACAA,EAAAE,GAAAI,KAGAJ,IAAA,EACAG,EAAAJ,EAAAvR,OAEAsR,EAAA,KACAD,GAAA,EACAL,EAAAU,IAiBA,QAAAG,GAAAhB,EAAAiB,GACAzU,KAAAwT,MACAxT,KAAAyU,QAYA,QAAApE,MAhKA,GAOAoD,GACAI,EARA7C,EAAA1U,EAAAD,YAgBA,WACA,IAEAoX,EADA,kBAAAtM,YACAA,WAEAkM,EAEK,MAAAK,GACLD,EAAAJ,EAEA,IAEAQ,EADA,kBAAAC,cACAA,aAEAR,EAEK,MAAAI,GACLG,EAAAP,KAuDA,IAEAW,GAFAC,KACAF,GAAA,EAEAG,GAAA,CAyCAnD,GAAA0D,SAAA,SAAAlB,GACA,GAAA/L,GAAA,GAAAC,OAAA5B,UAAAnD,OAAA,EACA,IAAAmD,UAAAnD,OAAA,EACA,OAAAiC,GAAA,EAAuBA,EAAAkB,UAAAnD,OAAsBiC,IAC7C6C,EAAA7C,EAAA,GAAAkB,UAAAlB,EAGAsP,GAAA5C,KAAA,GAAAkD,GAAAhB,EAAA/L,IACA,IAAAyM,EAAAvR,QAAAqR,GACAT,EAAAa,IASAI,EAAA9Q,UAAA6Q,IAAA,WACAvU,KAAAwT,IAAA1L,MAAA,KAAA9H,KAAAyU,QAEAzD,EAAA2D,MAAA,UACA3D,EAAA4D,SAAA,EACA5D,EAAAkB,OACAlB,EAAA6D,QACA7D,EAAA8D,QAAA,GACA9D,EAAA+D,YAIA/D,EAAAzO,GAAA8N,EACAW,EAAAgE,YAAA3E,EACAW,EAAAiE,KAAA5E,EACAW,EAAAkE,IAAA7E,EACAW,EAAAmE,eAAA9E,EACAW,EAAAoE,mBAAA/E,EACAW,EAAAqE,KAAAhF,EACAW,EAAAsE,gBAAAjF,EACAW,EAAAuE,oBAAAlF,EAEAW,EAAAwE,UAAA,SAAAzU,GAAqC,UAErCiQ,EAAAyE,QAAA,SAAA1U,GACA,SAAAsF,OAAA,qCAGA2K,EAAA0E,IAAA,WAA2B,WAC3B1E,EAAA2E,MAAA,SAAAC,GACA,SAAAvP,OAAA,mCAEA2K,EAAA6E,MAAA,WAA4B,WXuwCtB,SAAUvZ,EAAQD,QAASH,GY97CjC,YAUA,SAAA+S,GAAAnS,GAAuB,MAAAA,IAAA,mBAAAoS,SAAApS,EAAA+G,cAAAqL,OAAA,eAAApS,GAEvB,QAAA6T,GAAAlJ,GACA,OACAlL,GAAAkL,EAAA,GACAiD,OAAAjD,EAAA,GACAiJ,SAAAjJ,EAAA,IAIA,QAAAgJ,GAAAhJ,GACA,OACAlL,GAAAkL,EAAA,GACAT,KAAAS,EAAA,GACAiD,OAAAjD,EAAA,GACAiJ,SAAAjJ,EAAA,IAwBA,QAAAqO,GAAAxO,EAAAyO,EAAAtO,GACA,GAAAhH,GAAAqF,UAAAnD,QAAA,GAAA6C,SAAAM,UAAA,MAAoEA,UAAA,GAEpEkQ,EAAA5F,EAAA9I,GAAAG,EAWA,OATAuO,GAAA1O,SACA0O,EAAAD,OAEA,kBAAAtV,GACAuV,EAAAvV,MAEAyQ,EAAA8E,EAAAvV,GAGAuV,EAGA,QAAAC,GAAAD,GACA,GAAArK,KAYA,OAXA,mBAAAqK,GAAAzZ,IACAoP,EAAA2F,KAAA0E,EAAAzZ,IAGAyZ,EAAAhP,MACA2E,EAAA2F,KAAA0E,EAAAhP,MAGA2E,EAAA2F,KAAA0E,EAAAtL,YACAiB,EAAA2F,KAAA0E,EAAAtF,UAEA/E,EAGA,QAAAuK,GAAAF,GACA,eAAAA,EAAA1O,QACA0O,EAAAtL,OAAAsL,EAAAtF,UAGA,QAAAsF,EAAA1O,QAAA,WAAA0O,EAAA1O,QACA0O,EAAAzZ,GAAAyZ,EAAAtL,OAAAsL,EAAAtF,UAGA,WAAAsF,EAAA1O,QAAA,UAAA0O,EAAA1O,QACA0O,EAAAzZ,GAAAyZ,EAAAhP,KAAAgP,EAAAtL,OAAAsL,EAAAtF,UAGA,WAAAsF,EAAA1O,QACA0O,EAAAhP,KAAAgP,EAAAtL,OAAAsL,EAAAtF,UAGAuF,EAAAD,GAGA,QAAAG,GAAArZ,GACA,GAAAkZ,KAYA,OAVAtO,OAAA4B,QAAAxM,GACAkZ,GAAY/J,IAAAnP,GACT,+BAAAA,GAAA,YAAAmS,EAAAnS,IACHkZ,GAAY/J,KAAAnP,KAEZ,EAAAW,EAAAoS,MAAA/S,EAAA,SAAAgH,EAAAgB,GACAkR,EAAAlR,GAAA4C,MAAA4B,QAAAxF,WAIAkS,EAjHA,GAAA9E,GAAAvN,OAAA8O,QAAA,SAAA/N,GAAmD,OAAAE,GAAA,EAAgBA,EAAAkB,UAAAnD,OAAsBiC,IAAA,CAAO,GAAAuM,GAAArL,UAAAlB,EAA2B,QAAAE,KAAAqM,GAA0BxN,OAAAD,UAAAgP,eAAAjW,KAAA0U,EAAArM,KAAyDJ,EAAAI,GAAAqM,EAAArM,IAAiC,MAAAJ,GAE/Of,QAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAArG,GAAAvB,EAAA,GAqBAkU,GACAQ,KAAA,SAAAnJ,GACA,OACAiD,OAAAjD,EAAA,GACAiJ,SAAAjJ,EAAA,KAGA7D,OAAA,SAAA6D,GACA,OACAT,KAAAS,EAAA,GACAiD,OAAAjD,EAAA,GACAiJ,SAAAjJ,EAAA,KAGA3H,IAAA6Q,EACAI,OAAAJ,EACAE,OAAAJ,EACAK,MAAAL,EAwEApU,SAAAW,SACA8Y,aACAE,KAAAF,EACA1F,aACA6F,uBACAC,gBACAC,mBAEA7Z,EAAAD,gBAAA,SZo8CM,SAAUC,EAAQD,QAASH,GalkDjC,YAYA,SAAAka,GAAAC,EAAAtV,EAAAuV,EAAAC,EAAAvP,GACAqP,KAAA,OAEA,IAAAG,GAAA,OACAC,EAAA,OACAC,EAAA,MAEAL,aAAAhQ,QACAoQ,EAAAJ,EAAAI,SAAA,QAGAJ,EAAAG,SACAA,EAAAH,EAAAG,SAEG,+BAAAH,GAAA,YAAApH,EAAAoH,KAEHI,EAAAJ,EAAAI,SAAA,QACAzP,EAAAqP,GAGAI,EAAAJ,EAGAhQ,MAAA5J,KAAAuD,KAAAyW,GAEAzP,IAIA0P,EAAA/P,KAAAC,MAAAD,KAAAU,UAAAL,IAEA0P,EAAAF,QACAA,EAAAE,EAAAF,aACAE,GAAAF,QACKxP,EAAAwP,SAILA,EAAA7P,KAAAC,MAAAD,KAAAU,UAAAL,EAAAwP,WAOAxW,KAAA+V,KAAA,gBACA/V,KAAAe,OACAf,KAAAyW,UACAzW,KAAAsW,OACAtW,KAAAuW,YACAvW,KAAAgH,KAAA0P,EACA1W,KAAAwW,aAEAG,EAAA3W,KAAAe,KAAA,IAAAf,KAAAsW,KAAA,MAAAtW,KAAAyW,SACAE,EAAA3W,KAAAwW,QAqBA,QAAApK,GAAAqK,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,+BAAAzP,GAMA,QAAA4P,GAAAH,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,2CAAAzP,GAMA,QAAA6P,GAAAJ,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,mCAAAzP,GAMA,QAAA8P,GAAAL,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,4BAAAzP,GAMA,QAAAgF,GAAAyK,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,2BAAAzP,GAMA,QAAA+P,GAAAN,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,4CAAAzP,GAMA,QAAAgQ,GAAAP,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,qCAAAzP,GAMA,QAAAiQ,GAAAR,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,wBAAAzP,GAMA,QAAAkQ,GAAAT,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,0BAAAzP,GAMA,QAAAmQ,GAAAV,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,uCAAAzP,GAMA,QAAAoQ,GAAAX,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,oCAAAzP,GAMA,QAAAqQ,GAAAZ,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,0CAAAzP,GAMA,QAAAsQ,GAAAb,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,mCAAAzP,GAMA,QAAAuQ,GAAAd,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,uCAAAzP,GAMA,QAAAwQ,GAAAf,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,+BAAAzP,GAMA,QAAAyQ,GAAAhB,EAAAzP,GACAoP,EAAA3Z,KAAAuD,KAAAyW,EAAA,gCAAAzP,GAyCA,QAAAuK,GAAAmG,GACA,IAAAA,EACA,MAAAA,EAGA,IAAAtB,GAAAI,EAAAkB,EAAA3W,MACA4K,EAAAyK,EAAA,GAAAA,GAAAsB,EAAAjB,QAAAiB,EAAA1Q,MAAA,GAAAX,OAAAqR,EAAAjB,SAAAiB,EAMA,OAJA,+BAAAA,GAAA,YAAAzI,EAAAyI,KACAxG,EAAAvF,EAAA+L,GAGA/L,EApPAhI,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAAoN,GAAAvN,OAAA8O,QAAA,SAAA/N,GAAmD,OAAAE,GAAA,EAAgBA,EAAAkB,UAAAnD,OAAsBiC,IAAA,CAAO,GAAAuM,GAAArL,UAAAlB,EAA2B,QAAAE,KAAAqM,GAA0BxN,OAAAD,UAAAgP,eAAAjW,KAAA0U,EAAArM,KAAyDJ,EAAAI,GAAAqM,EAAArM,IAAiC,MAAAJ,IAE/OuK,EAAA,kBAAAC,SAAA,gBAAAA,QAAAC,SAAA,SAAArS,GAAoG,aAAAA,IAAqB,SAAAA,GAAmB,MAAAA,IAAA,kBAAAoS,SAAApS,EAAA+G,cAAAqL,QAAApS,IAAAoS,OAAAxL,UAAA,eAAA5G,IAE5I6Z,EAAAza,EAAA,sBA2DAka,GAAA1S,UAAA,GAAA2C,OAIA1C,OAAAY,eAAA6R,EAAA1S,UAAA,UACAI,MAAA,WACA,OACA/C,KAAAf,KAAAe,KACA0V,QAAAzW,KAAAyW,QACAH,KAAAtW,KAAAsW,KACAC,UAAAvW,KAAAuW,UACAvP,KAAAhH,KAAAgH,KACAwP,OAAAxW,KAAAwW,WAUApK,EAAA1I,UAAA,GAAA0S,GAOAQ,EAAAlT,UAAA,GAAA0S,GAOAS,EAAAnT,UAAA,GAAA0S,GAOAU,EAAApT,UAAA,GAAA0S,GAOApK,EAAAtI,UAAA,GAAA0S,GAOAW,EAAArT,UAAA,GAAA0S,GAOAY,EAAAtT,UAAA,GAAA0S,GAOAa,EAAAvT,UAAA,GAAA0S,GAOAc,EAAAxT,UAAA,GAAA0S,GAOAe,EAAAzT,UAAA,GAAA0S,GAOAgB,EAAA1T,UAAA,GAAA0S,GAOAiB,EAAA3T,UAAA,GAAA0S,GAOAkB,EAAA5T,UAAA,GAAA0S,GAOAmB,EAAA7T,UAAA,GAAA0S,GAOAoB,EAAA9T,UAAA,GAAA0S,GAOAqB,EAAA/T,UAAA,GAAA0S,EAEA,IAAAI,IACAJ,gBACAhK,aACAwK,mBACAC,eACAC,YACA9K,WACA+K,mBACAC,gBACAC,UACAC,WACAC,iBACAC,gBACAC,kBACAC,eACAC,iBACAC,aACAC,cACAE,IAAAvL,EACAwL,IAAAhB,EACAiB,IAAAhB,EACAiB,IAAAhB,EACAiB,IAAA/L,EACAgM,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EACAkB,IAAAjB,EAkBApb,SAAAW,QAAAkU,GACAK,UACAoH,MAAAnC,EACAA,UACCA,GACDla,EAAAD,gBAAA,SbwkDM,SAAUC,EAAQD,QAASH,Ict0DjC,SAAA8U,GAsCA,QAAA4H,KAIA,2BAAAra,iBAAAyS,SAAA,aAAAzS,OAAAyS,QAAA+E,QAMA,mBAAA8C,oBAAAC,iBAAAD,SAAAC,gBAAAC,OAAAF,SAAAC,gBAAAC,MAAAC,kBAEA,mBAAAza,gBAAAgC,UAAAhC,OAAAgC,QAAA0Y,SAAA1a,OAAAgC,QAAA2Y,WAAA3a,OAAAgC,QAAA4Y,QAGA,mBAAAC,sBAAAC,WAAAD,UAAAC,UAAAC,cAAAC,MAAA,mBAAA/K,SAAAgL,OAAAC,GAAA,SAEA,mBAAAL,sBAAAC,WAAAD,UAAAC,UAAAC,cAAAC,MAAA,uBAsBA,QAAAG,GAAAjS,GACA,GAAAmR,GAAA5Y,KAAA4Y,SASA,IAPAnR,EAAA,IAAAmR,EAAA,SACA5Y,KAAA2Z,WACAf,EAAA,WACAnR,EAAA,IACAmR,EAAA,WACA,IAAAvc,QAAAud,SAAA5Z,KAAA6Z,MAEAjB,EAAA,CAEA,GAAAjc,GAAA,UAAAqD,KAAA8Z,KACArS,GAAAsS,OAAA,IAAApd,EAAA,iBAKA,IAAAqd,GAAA,EACAC,EAAA,CACAxS,GAAA,GAAA/E,QAAA,uBAAA6W,GACA,OAAAA,IACAS,IACA,OAAAT,IAGAU,EAAAD,MAIAvS,EAAAsS,OAAAE,EAAA,EAAAtd,IAUA,QAAA6D,KAGA,sBAAAD,UACAA,QAAAC,KACA6E,SAAA3B,UAAAoE,MAAArL,KAAA8D,QAAAC,IAAAD,QAAAuF,WAUA,QAAAoU,GAAAC,GACA,IACA,MAAAA,EACA9d,QAAA2E,QAAAoZ,WAAA,SAEA/d,QAAA2E,QAAA2V,MAAAwD,EAEG,MAAAzG,KAUH,QAAA2G,KACA,GAAAC,EACA,KACAA,EAAAje,QAAA2E,QAAA2V,MACG,MAAAjD,IAOH,OAJA4G,GAAA,mBAAAtJ,IAAA,OAAAA,KACAsJ,EAAAtJ,EAAAkB,IAAAqI,OAGAD,EAoBA,QAAAE,KACA,IACA,MAAAjc,QAAAC,aACG,MAAAkV,KAjLHrX,QAAAC,EAAAD,QAAAH,EAAA,IACAG,QAAAmE,MACAnE,QAAAqd,aACArd,QAAA6d,OACA7d,QAAAge,OACAhe,QAAAuc,YACAvc,QAAA2E,QAAA,mBAAAyZ,SACA,mBAAAA,QAAAzZ,QACAyZ,OAAAzZ,QAAA0Z,MACAF,IAMAne,QAAAse,QACA,gBACA,cACA,YACA,aACA,aACA,WAmCAte,QAAAue,WAAAC,EAAA,SAAAC,GACA,IACA,MAAAnU,MAAAU,UAAAyT,GACG,MAAAC,GACH,qCAAAA,EAAAtE,UAqGApa,QAAA2e,OAAAX,Od21D8B5d,KAAKJ,QAASH,EAAoB,MAI1D,SAAUI,EAAQD,QAASH,Ge39DjC,QAAA+e,GAAAtB,GACA,GAAA/U,GAAAsW,EAAA,CAEA,KAAAtW,IAAA+U,GACAuB,MAAA,GAAAA,EAAAvB,EAAAwB,WAAAvW,GACAsW,GAAA,CAGA,OAAA7e,SAAAse,OAAArM,KAAAC,IAAA2M,GAAA7e,QAAAse,OAAAhY,QAWA,QAAAyY,GAAAzB,GAEA,QAAAhD,KAEA,GAAAA,EAAA0E,QAAA,CAEA,GAAAhY,GAAAsT,EAGA2E,GAAA,GAAAC,MACAC,EAAAF,GAAAG,GAAAH,EACAjY,GAAAwW,KAAA2B,EACAnY,EAAAqY,KAAAD,EACApY,EAAAiY,OACAG,EAAAH,CAIA,QADA7T,GAAA,GAAAC,OAAA5B,UAAAnD,QACAiC,EAAA,EAAmBA,EAAA6C,EAAA9E,OAAiBiC,IACpC6C,EAAA7C,GAAAkB,UAAAlB,EAGA6C,GAAA,GAAApL,QAAAsf,OAAAlU,EAAA,IAEA,gBAAAA,GAAA,IAEAA,EAAA0G,QAAA,KAIA,IAAA6L,GAAA,CACAvS,GAAA,GAAAA,EAAA,GAAA/E,QAAA,yBAAA6W,EAAAqC,GAEA,UAAArC,EAAA,MAAAA,EACAS,IACA,IAAA6B,GAAAxf,QAAAue,WAAAgB,EACA,sBAAAC,GAAA,CACA,GAAApZ,GAAAgF,EAAAuS,EACAT,GAAAsC,EAAApf,KAAA4G,EAAAZ,GAGAgF,EAAAsS,OAAAC,EAAA,GACAA,IAEA,MAAAT,KAIAld,QAAAqd,WAAAjd,KAAA4G,EAAAoE,EAEA,IAAAqU,GAAAnF,EAAAnW,KAAAnE,QAAAmE,KAAAD,QAAAC,IAAA4N,KAAA7N,QACAub,GAAAhU,MAAAzE,EAAAoE,IAaA,MAVAkP,GAAAgD,YACAhD,EAAA0E,QAAAhf,QAAAgf,QAAA1B,GACAhD,EAAAiC,UAAAvc,QAAAuc,YACAjC,EAAAmD,MAAAmB,EAAAtB,GAGA,kBAAAtd,SAAA+H,MACA/H,QAAA+H,KAAAuS,GAGAA,EAWA,QAAAqE,GAAAb,GACA9d,QAAA6d,KAAAC,GAEA9d,QAAA0f,SACA1f,QAAA2f,QAKA,QAHAC,IAAA,gBAAA9B,KAAA,IAAA8B,MAAA,UACA3H,EAAA2H,EAAAtZ,OAEAiC,EAAA,EAAiBA,EAAA0P,EAAS1P,IAC1BqX,EAAArX,KACAuV,EAAA8B,EAAArX,GAAAlC,QAAA,aACA,MAAAyX,EAAA,GACA9d,QAAA2f,MAAA1K,KAAA,GAAAkI,QAAA,IAAAW,EAAA+B,OAAA,SAEA7f,QAAA0f,MAAAzK,KAAA,GAAAkI,QAAA,IAAAW,EAAA,OAWA,QAAAgC,KACA9f,QAAA2e,OAAA,IAWA,QAAAK,GAAAta,GACA,GAAA6D,GAAA0P,CACA,KAAA1P,EAAA,EAAA0P,EAAAjY,QAAA2f,MAAArZ,OAAyCiC,EAAA0P,EAAS1P,IAClD,GAAAvI,QAAA2f,MAAApX,GAAA6I,KAAA1M,GACA,QAGA,KAAA6D,EAAA,EAAA0P,EAAAjY,QAAA0f,MAAApZ,OAAyCiC,EAAA0P,EAAS1P,IAClD,GAAAvI,QAAA0f,MAAAnX,GAAA6I,KAAA1M,GACA,QAGA,UAWA,QAAA4a,GAAAlZ,GACA,MAAAA,aAAA4D,OAAA5D,EAAA2Z,OAAA3Z,EAAAgU,QACAhU,EAhMApG,QAAAC,EAAAD,QAAA+e,EAAAzE,MAAAyE,EAAA,QAAAA,EACA/e,QAAAsf,SACAtf,QAAA8f,UACA9f,QAAA2e,SACA3e,QAAAgf,UACAhf,QAAAud,SAAA1d,EAAA,IAMAG,QAAA0f,SACA1f,QAAA2f,SAQA3f,QAAAue,aAMA,IAAAa,IforEM,SAAUnf,EAAQD,SgBxqExB,QAAAuK,GAAAhE,GAEA,GADAA,EAAAyZ,OAAAzZ,KACAA,EAAAD,OAAA,MAGA,GAAA4W,GAAA,wHAAA+C,KACA1Z,EAEA,IAAA2W,EAAA,CAGA,GAAAgD,GAAAC,WAAAjD,EAAA,IACAxD,GAAAwD,EAAA,UAAAD,aACA,QAAAvD,GACA,YACA,WACA,UACA,SACA,QACA,MAAAwG,GAAAE,CACA,YACA,UACA,QACA,MAAAF,GAAAG,CACA,aACA,WACA,UACA,SACA,QACA,MAAAH,GAAAI,CACA,eACA,aACA,WACA,UACA,QACA,MAAAJ,GAAA7f,CACA,eACA,aACA,WACA,UACA,QACA,MAAA6f,GAAAK,CACA,oBACA,kBACA,YACA,WACA,SACA,MAAAL,EACA,SACA,UAYA,QAAAM,GAAArB,GACA,MAAAA,IAAAkB,EACApO,KAAAwO,MAAAtB,EAAAkB,GAAA,IAEAlB,GAAAmB,EACArO,KAAAwO,MAAAtB,EAAAmB,GAAA,IAEAnB,GAAA9e,EACA4R,KAAAwO,MAAAtB,EAAA9e,GAAA,IAEA8e,GAAAoB,EACAtO,KAAAwO,MAAAtB,EAAAoB,GAAA,IAEApB,EAAA,KAWA,QAAAuB,GAAAvB,GACA,MAAAwB,GAAAxB,EAAAkB,EAAA,QACAM,EAAAxB,EAAAmB,EAAA,SACAK,EAAAxB,EAAA9e,EAAA,WACAsgB,EAAAxB,EAAAoB,EAAA,WACApB,EAAA,MAOA,QAAAwB,GAAAxB,EAAAe,EAAAxb,GACA,KAAAya,EAAAe,GAGA,MAAAf,GAAA,IAAAe,EACAjO,KAAA2O,MAAAzB,EAAAe,GAAA,IAAAxb,EAEAuN,KAAA4O,KAAA1B,EAAAe,GAAA,IAAAxb,EAAA,IAlJA,GAAA6b,GAAA,IACAlgB,EAAA,GAAAkgB,EACAD,EAAA,GAAAjgB,EACAggB,EAAA,GAAAC,EACAF,EAAA,OAAAC,CAgBApgB,GAAAD,QAAA,SAAAoG,EAAA4B,GACAA,OACA,IAAA0R,SAAAtT,EACA,eAAAsT,GAAAtT,EAAAE,OAAA,EACA,MAAAiE,GAAAnE,EACG,eAAAsT,GAAAoH,MAAA1a,MAAA,EACH,MAAA4B,GAAA+Y,KAAAL,EAAAta,GAAAoa,EAAApa,EAEA,UAAA4D,OACA,wDACAM,KAAAU,UAAA5E,MhBk1EM,SAAUnG,EAAQD,QAASH,GiBp3EjC,YAsBA,SAAAW,GAAAC,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCE,QAAAF,GAI7E,QAAAugB,GAAA1c,EAAA0D,GACA,IAAA1D,EACA,SAAA0F,OAAA,8DAGA,KAAA1F,EAAA2c,WACA,SAAAjX,OAAA,mEAGA,IAAAkX,IAAA,EAAAC,EAAAxgB,SAAA2D,EAEA0D,GAAAV,OAAA8O,QACAvI,QAAA,KACAuT,UAAA,OACAjT,OAAA9M,EAAAggB,WACAC,MAAA,EACArT,QAAA7M,EAAA6M,QAEAsT,aAAA,QACAL,kBACGlZ,EAEH,IAAA4J,GAAA,QAAAA,GAAA4P,GACA,GAAApd,GAAAT,KACAiO,GACA6P,GAAA,WACA,GAAAzZ,GAAAyB,UAAAnD,OAAA,GAAA6C,SAAAM,UAAA,GAAAA,UAAA,KAGA,OADA9F,MAAA+d,IAAA1Z,EACArE,OAGAoK,GACA4T,QAAArd,EAAA2c,WAAAW,UAAAJ,EAAA,WACAK,QAAAvd,EAAA2c,WAAAW,UAAAJ,EAAA,WACAM,QAAAxd,EAAA2c,WAAAW,UAAAJ,EAAA,WACAO,QAAAzd,EAAA2c,WAAAW,UAAAJ,EAAA,WAGApd,GAAA4d,QAAAtQ,QAAA,SAAAzG,GACA,kBAAAuW,GAAAvW,KACA2G,EAAA3G,GAAA,SAAAA,GAAA,EAAAgX,EAAAthB,SAAA2D,EAAAyJ,EAAA/F,IAAA,EAAAka,EAAAvhB,SAAA2D,EAAAyJ,EAAA/F,EAAAiD,MAIAuW,EAAA5P,SAGA,mBACA0I,EAAA,yCAEA3W,KAAAwe,OAAAlN,KAAArD,IA3EAtK,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAArG,GAAAvB,EAAA,GAEAuiB,EAAAviB,EAAA,IAEAqiB,EAAA1hB,EAAA4hB,GAEAC,EAAAxiB,EAAA,IAEAoiB,EAAAzhB,EAAA6hB,GAEAC,EAAAziB,EAAA,IAEAshB,EAAA3gB,EAAA8hB,GAEAjhB,EAAAxB,EAAA,IAIAya,EAAAza,EAAA,wBAyDAmhB,GAAAuB,SAAApB,EAAAxgB,QAEAX,QAAAW,QAAAqgB,EACA/gB,EAAAD,gBAAA,SjB03EM,SAAUC,EAAQD,QAASH,GkB98EjC,YA4CA,SAAAkN,GAAAC,GAAkC,GAAA3B,MAAA4B,QAAAD,GAAA,CAA0B,OAAAzE,GAAA,EAAA2E,EAAA7B,MAAA2B,EAAA1G,QAA0CiC,EAAAyE,EAAA1G,OAAgBiC,IAAO2E,EAAA3E,GAAAyE,EAAAzE,EAAoB,OAAA2E,GAAsB,MAAA7B,OAAA8B,KAAAH,GA1CvK1F,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,IAEAzH,QAAAwiB,gBAAArZ,OAEAnJ,QAAAW,QAAA,SAAA2D,EAAAyJ,EAAAnM,EAAAqJ,GACA,kBACA,GAAAG,GAAA3B,UACA0K,EAAA,mBAAAqO,GAAAvX,GAAAuX,EAAAvX,GAAA,EACAoD,EAAA5E,UAAA0K,MAEA,IAAAxQ,KAAA+d,OAAA,GAAArT,EAAAoT,MAAA,EACA,MAAA9d,MAAAgN,OAAAlF,MAAA9H,KAAAoJ,EAAA3B,GAGA,IAAApD,IAAA,EAAA5G,EAAAqhB,YAAA7gB,EAAA+B,KAAA+d,IAAArT,EAAAoT,IACA3M,GAAA,EAAA1T,EAAAshB,WAAApe,EAAA0D,EAAAsZ,KAAA3d,KAAAgN,OAAAoB,KAAApO,MAAAyH,GACAuX,EAAA7N,EAAApJ,OAAAoJ,EAAA8N,WAAA,SAAAjY,GAEA,GAAAiE,GAAA,SAAA7K,GACA,MAAAA,GAAAiE,EAAA6F,WAAAlD,EAAA3C,EAAA6F,UAGAgV,EAAA9U,EAAAgU,QAAAnT,UAEAkU,EAAAxe,EAAA2c,WAAAnN,MAAA/F,EAAA4T,QAAA5T,EAAA8T,QAAA9T,EAAA+T,SAAAlT,SAEA,OAAAtK,GAAA2c,WAAAnN,MAEAgP,EAEAD,EAAA3T,IAAA,WACA,iBAIA,UAAA9N,EAAA2hB,WAAAJ,IAIA,IAAAvhB,GAAAvB,EAAA,IAMA2iB,EAAAxiB,QAAAwiB,iBACAhO,OAAA,EACAC,MAAA,IlBq9EM,SAAUxU,EAAQD,QAASH,GmBvgFjC,YAeA,SAAAiN,GAAArM,EAAAgI,EAAAhB,GAAmM,MAAxJgB,KAAAhI,GAAkB6G,OAAAY,eAAAzH,EAAAgI,GAAkChB,QAAAC,YAAA,EAAAE,cAAA,EAAAD,UAAA,IAAgFlH,EAAAgI,GAAAhB,EAAoBhH,EAEnM,QAAAsM,GAAAC,GAAkC,GAAA3B,MAAA4B,QAAAD,GAAA,CAA0B,OAAAzE,GAAA,EAAA2E,EAAA7B,MAAA2B,EAAA1G,QAA0CiC,EAAAyE,EAAA1G,OAAgBiC,IAAO2E,EAAA3E,GAAAyE,EAAAzE,EAAoB,OAAA2E,GAAsB,MAAA7B,OAAA8B,KAAAH,GAEvK,QAAA0V,GAAApe,EAAAgd,EAAA0B,EAAA5X,GACA,GAAAkW,KAAA,GACA,GAAA2B,GAAA,WACA,GAAA3T,GAAA,IAEA,QACAmP,EAAAna,EAAA2c,WAAA1Z,OAAA,SAAA2b,GACA,GAAAC,GAAAD,CAMA,IAJA5T,IACAA,EAAA0T,EAAAvX,MAAAtC,OAAA4D,EAAA3B,MAGAkE,GAAA,kBAAAA,GAAAjF,MAAA,kBAAAiF,GAAA8T,MACA,SAAApZ,OAAA,mEAGAsF,GAAAjF,KAAA,SAAAgZ,GACAF,EAAAG,KAAAD,GACAF,EAAAI,aACWH,MAAA,SAAA/L,GACX,MAAA8L,GAAA9H,MAAAhE,UAMA,mCAAA4L,GAAA,YAAArQ,EAAAqQ,IAAA,MAAAA,GAAAxE,EAGA,MAAAna,GAAA2c,WAAAuC,YAAAR,EAAAvX,MAAAtC,OAAA4D,EAAA3B,KAGA,QAAA2X,GAAAJ,GACA,MAAArb,QAAA8O,OAAAuM,GACAtY,KAAA,WACA,GAAAoZ,EAEA,QAAAA,EAAA9f,KAAA6R,QAAAkO,aAAArZ,KAAAoB,MAAAgY,EAAAha,YAEA2Z,MAAA,WACA,GAAAO,EAEA,QAAAA,EAAAhgB,KAAA6R,QAAAkO,aAAAN,MAAA3X,MAAAkY,EAAAla,cAKA,QAAA4X,GAAA7S,EAAAxG,GAEA,GAAAmG,GAAAK,EAAAK,OAAA,EAAAzN,EAAA+M,QAAAK,EAAAK,QAAA,EAAAzN,EAAA+M,QAAArB,KAAoG9E,EAAA6F,QAAA,GAEpG,iBAAAyB,GACA,GAAAsU,KAAAtU,EAAAtH,EAAAoZ,WACAzW,EAAAiZ,EAAAtU,EAAAtH,EAAAoZ,WAAA9R,CAEAnB,KACAxD,IAAAmE,KAAAX,GAGA,IAAAiB,GAAA,gBAAAE,GAAAF,MAAAE,EAAAF,MAAA+C,SAAA3D,EAAAQ,OAAA;AAYA,MAVAI,KAAA0R,MAAA1R,KACAzE,IAAAlE,MAAA,EAAA2I,IAGAwU,EACAtU,EAAAtH,EAAAoZ,WAAAzW,EAEA2E,EAAA3E,EAGA2E,GAIA,QAAAmT,GAAAoB,GACA,OAAA1Y,GAAA1B,UAAAnD,OAAAwd,EAAAzY,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAsFA,EAAAH,EAAaG,IACnGwY,EAAAxY,EAAA,GAAA7B,UAAA6B,EAGA,IAAAtD,GAAAV,OAAA8O,OAAA3K,MAAAnE,WAA+Cuc,GAAAnY,OAAAoY,GAM/C,OAJA,gBAAA9b,GAAAuZ,eACAvZ,EAAAuZ,aAAAvZ,EAAAkZ,eAAAlZ,EAAAuZ,eAGAvZ,EAxGAV,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,GAGA,IAAAmL,GAAA,kBAAAC,SAAA,gBAAAA,QAAAC,SAAA,SAAArS,GAAoG,aAAAA,IAAqB,SAAAA,GAAmB,MAAAA,IAAA,kBAAAoS,SAAApS,EAAA+G,cAAAqL,QAAApS,IAAAoS,OAAAxL,UAAA,eAAA5G,GAE5IT,SAAA0iB,YACA1iB,QAAA+iB,YACA/iB,QAAAqhB,aACArhB,QAAAyiB,YAEA,IAAArhB,GAAAvB,EAAA,InB2mFM,SAAUI,EAAQD,QAASH,GoBxnFjC,YA0BA,SAAAkN,GAAAC,GAAkC,GAAA3B,MAAA4B,QAAAD,GAAA,CAA0B,OAAAzE,GAAA,EAAA2E,EAAA7B,MAAA2B,EAAA1G,QAA0CiC,EAAAyE,EAAA1G,OAAgBiC,IAAO2E,EAAA3E,GAAAyE,EAAAzE,EAAoB,OAAA2E,GAAsB,MAAA7B,OAAA8B,KAAAH,GAxBvK1F,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,IAGAzH,QAAAW,QAAA,SAAA2D,EAAAyJ,EAAAnM,GACA,kBACA,GAAAyM,GAAA5E,UAAAnD,OAAA,GAAA6C,SAAAM,UAAA,GAAAA,UAAA,MAEA2B,EAAA3B,SAEA,IAAA9F,KAAA+d,OAAA,GAAArT,EAAAoT,MAAA,EACA,MAAA9d,MAAAgN,OAAAlF,MAAA9H,KAAAoJ,EAAA3B,GAGA,IAAApD,IAAA,EAAA5G,EAAAqhB,YAAA7gB,EAAA+B,KAAA+d,IAAArT,EAAAoT,IACA3M,GAAA,EAAA1T,EAAAshB,WAAApe,EAAA0D,EAAAsZ,KAAA3d,KAAAgN,OAAAoB,KAAApO,MAAA8F,WACAkZ,EAAA3a,EAAAuZ,aAAAnhB,KAAAuD,KAAAmR,EAAA/G,EAAA/F,EAAAoD,EAEA,UAAAhK,EAAA2hB,WAAAJ,IAIA,IAAAvhB,GAAAvB,EAAA,GAIAI,GAAAD,gBAAA,SpB8nFM,SAAUC,EAAQD,SqB1pFxB,YAsGA,SAAA8M,GAAArM,EAAAgI,EAAAhB,GAAmM,MAAxJgB,KAAAhI,GAAkB6G,OAAAY,eAAAzH,EAAAgI,GAAkChB,QAAAC,YAAA,EAAAE,cAAA,EAAAD,UAAA,IAAgFlH,EAAAgI,GAAAhB,EAAoBhH,EAEnM,QAAAsM,GAAAC,GAAkC,GAAA3B,MAAA4B,QAAAD,GAAA,CAA0B,OAAAzE,GAAA,EAAA2E,EAAA7B,MAAA2B,EAAA1G,QAA0CiC,EAAAyE,EAAA1G,OAAgBiC,IAAO2E,EAAA3E,GAAAyE,EAAAzE,EAAoB,OAAA2E,GAAsB,MAAA7B,OAAA8B,KAAAH,GAtGvK1F,OAAAY,eAAAlI,QAAA,cACAyH,OAAA,IAGAzH,QAAAW,QAAA,SAAA2D,GACA,OACAyf,MAAA,SAAAjP,GACA,MAAAA,IAEAkP,OAAA,SAAAlP,EAAA/G,EAAA/F,EAAAoD,GACA,GAAAiD,GAAAjD,EAAA,OACAoD,EAAAlH,OAAA8O,UAAkC/H,EAAAG,OAClCmC,EAAAhN,KAAAgN,OAAAoB,KAAApO,MAGAsgB,EAAAjc,EAAAiG,QAAAO,GAEA0V,EAAAlc,EAAAmG,OAAAK,EAAAxG,EAEA,OAAA8M,GAAApJ,OAAAoJ,EAAA8N,WAAA,WACA,MAAAte,GAAA2c,WAAAnN,MAAA/F,EAAA4T,QAAA/S,OAAAqV,GAAAlW,EAAAgU,QAAAhU,EAAA8T,QAAA9T,EAAA+T,SAAAqC,QAAA,WACA,GAAArP,GAAAxQ,EAAA2c,WAAAuC,YAAA7S,EAAAlF,MAAAtC,OAAA4D,EAAA3B,IAEA,OAAA0J,GAAA5F,IAAAgV,SAIAE,MAAA,SAAAtP,EAAA/G,EAAA/F,EAAAoD,GACA,GAAAiD,GAAAjD,EAAA,OACAoD,EAAAlH,OAAA8O,UAAkC/H,EAAAG,OAElCyV,EAAAjc,EAAAiG,QAAAO,GAEA0V,EAAAlc,EAAAmG,OAAAK,EAAAxG,GACAqc,EAAA,SAAAC,GACA,gBAAA9U,GACA,GAAAoU,KAAApU,EAAAxH,EAAAoZ,WACAzM,EAAA,SAAAhK,GACA,MAAAA,GAAAe,OAAA4Y,GAGA,OAAAV,GACAtc,OAAA8O,UAAmC5G,EAAA1C,GACnC9I,MAAAwL,EAAAxL,MAAA,GACagE,EAAAoZ,UAAAzM,EAAAnF,EAAAxH,EAAAoZ,cAGbzM,EAAAnF,KAGA+U,EAAA,SAAAD,GACA,gBAAA9U,GACA,GAAAoU,KAAApU,EAAAxH,EAAAoZ,WACAzM,EAAA,SAAAhK,GACA,MAAAA,GAAAiE,OAAA,SAAA7K,GACA,MAAAugB,GAAAtc,EAAA6F,WAAA9J,EAAAiE,EAAA6F,WAIA,OAAA+V,GACAtc,OAAA8O,UAAmC5G,EAAA1C,GACnC9I,MAAAigB,EAAAK,GAAA9U,EAAAxL,MAAA,EAAAwL,EAAAxL,OACagE,EAAAoZ,UAAAzM,EAAAnF,EAAAxH,EAAAoZ,cAGbzM,EAAAnF,KAGAgV,EAAA,SAAAF,GACA,gBAAA9U,GACA,GAAAoU,KAAApU,EAAAxH,EAAAoZ,WACA9a,EAAAsd,EAAApU,EAAAxH,EAAAoZ,WAAA9a,OAAAkJ,EAAAlJ,OACAqO,EAAA,SAAAhK,GACA,MAAAA,GAAAiE,OAAA,SAAA7K,GACA,MAAAugB,GAAAtc,EAAA6F,WAAA9J,EAAAiE,EAAA6F,WACanC,OAAA4Y,GAAA1V,OAAAqV,GAGb,IAAAL,EAAA,CACA,GAAAa,GAAA9P,EAAAnF,EAAAxH,EAAAoZ,WACA,OAAA9Z,QAAA8O,UAAmC5G,EAAA1C,GAGnC9I,MAAAwL,EAAAxL,OAAAsC,EAAAme,EAAAne,SACa0B,EAAAoZ,UAAAqD,IAGb,MAAA9P,GAAAnF,IAIA,OAAAsF,GAAApJ,OAAAoJ,EAAA8N,WAAA,SAAAjY,GACA,MAAArG,GAAA2c,WAAAnN,MAAA/F,EAAA4T,QAAA/S,OAAAqV,GAAA/U,IAAAmV,GAAAtW,EAAAgU,QAAA7S,IAAAqV,GAAAjgB,EAAA2c,WAAAnN,MAAA/F,EAAA8T,QAAA9T,EAAA+T,SAAA5S,IAAAsV,IAAAE,KAAA,SAAA3gB,EAAAsQ,GACA,MAAA6P,GAAA7P,EAAAtQ,KACS4G,SAUT1K,EAAAD,gBAAA,SrBgqFM,SAAUC,EAAQD,QAASH,GAEhC,YAWA,SAASW,GAAuBC,GAC5B,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GsBtxFtC,QAASsB,GAAaqC,EAAKkB,EAAUrD,EAAamB,GtBw0F5D,MA9CAgB,GsBzxFGG,UAAA1D,EAAAF,QAAmBgkB,gBtB0xFlBhgB,QsBtxFL1C,KtByxFCmC,EsBzxFGwgB,UAAY,WtB0xFX,MAAOtf,GsBzxFQlB,IAAIygB,ctB0xFfnL,KsBxxFD,QtByxFCoL,MsBzxFQ5iB,OAAOC,aAAa,kBAC9BkI,KAAK,SAAUiF,GtB4xFb,MAFApL,SsBzxFO6gB,KAAK,wBAAyB7F,KACtC8F,OtByxFC5hB,EsBzxFU6hB,KAAO3V,EAClB3E,MACH,IAAEyY,MAAM,SAAU/H,GtB4xFd,MAFAnX,SsBzxFOmX,MAAM,wBACdA,GtByxFC/V,EsBzxFQlB,IACT8gB,UACH,KtB4xFJ9gB,EsBzxFG+gB,UAAY,SAAUF,EAAMG,GtB0xF3B,MAAO9f,GsBzxFQlB,IAAIygB,ctB0xFfnL,KsBxxFD,QtByxFC2L,SsBxxFDJ,EtByxFCK,SsBzxFWF,IACb/a,KAAK,SAAUiF,GtB8xFb,MAJApL,SsBzxFOC,IAAI,iBACZmL,GtByxFClM,EsBzxFU6hB,KAAO3V,EAClB3E,KtByxFCvH,EsBzxFUmiB,eACX,EtByxFCniB,EsBzxFU0hB,MAAQxV,EACnB,MACHA,IAAE8T,MAAM,SAAU/H,GtB4xFd,MAFAnX,SsBzxFOmX,MAAM,wBACdA,GtByxFC3X,KsBzxFIU,IACLohB,cACHnK,KtB4xFJjX,EsBzxFGohB,YAAc,WtB0xFblgB,EsBzxFQlB,IACT8gB,StByxFChjB,OsBzxFMC,aAAa4b,WACpB,gBtByxFC3a,EsBzxFUmiB,eACX,EtByxFCniB,EsBzxFU6hB,KACX,KtByxFC7hB,EsBzxFU0hB,MACX,KtByxFC5gB,QsBzxFOC,IACX,gBAGJC,EtB4tFAkD,OAAOY,eAAelI,QAAS,cAC3ByH,OAAO,IAEXzH,QAAQW,QsB/wFeoB,CAFxB,IAAAnB,GAAAf,EAAA,GtBqxFKgB,EAAaL,EAAuBI,IA0DnC,SAAUX,EAAQD,SAEvB,YuBj1Fc,SAASylB,GAAsBrhB,EAAKb,EAAUH,GvBs2FxD,MAbAgB,GuBv1FGshB,UAAY,SAAU1L,EAAK2L,EAAYC,GvBw1FtC,IuBv1FID,EACD,GAAIA,GACR,EvBs1FC,KuBt1FIC,EACD,GAAIA,GAER,GvBq1FC,IuBr1FGC,GAAQtiB,EAASuiB,SAChBC,YAAY/L,GACZgM,OAAO,QACPC,UAAUL,GACVzR,SAAS,eACT+R,iBAAgB,GAChBP,WACLA,EvB+0FCpiB,GuB/0FQ4iB,KACTN,GvB+0FC3hB,QuB/0FOoW,MAAM,aAAcqL,EAC/B3L,IvBi1FA5W,EuB90FUsiB,UAAY,SAAUU,EAAGC,EAAG/lB,GvB+0FlC8D,EuB90FGshB,UAAUU,EAAGC,EAAG/lB,IAM3B8D,EvBwzFAkD,OAAOY,eAAelI,QAAS,cAC3ByH,OAAO,IAEXzH,QAAQW,QuBt1Fe8kB,GvB22FlB,SAAUxlB,EAAQD,QAASH,GwBx2FjC,GAAAymB,GAAAzmB,EAAA,GACA,iBAAAymB,SAAArmB,EAAAC,GAAAomB,EAAA,KAEAzmB,GAAA,IAAAymB,KACAA,GAAAC,SAAAtmB,EAAAD,QAAAsmB,EAAAC,SxB83FM,SAAUtmB,EAAQD,QAASH,GyBr4FjCG,QAAAC,EAAAD,QAAAH,EAAA,IAAAsJ,QAKAnJ,QAAAiV,MAAAhV,EAAAC,GAAA,+/KAA4hL,MzB84FthL,SAAUD,EAAQD,S0Bl2FxB,QAAAwmB,GAAA5R,EAAA6R,GACA,GAAAH,GAAA1R,EAAA,OACA8R,EAAA9R,EAAA,EACA,KAAA8R,EACA,MAAAJ,EAGA,IAAAG,GAAA,kBAAAE,MAAA,CACA,GAAAC,GAAAC,EAAAH,GACAI,EAAAJ,EAAAK,QAAA7X,IAAA,SAAA4F,GACA,uBAAA4R,EAAAM,WAAAlS,EAAA,OAGA,QAAAwR,GAAA5a,OAAAob,GAAApb,QAAAkb,IAAAK,KAAA,MAGA,OAAAX,GAAAW,KAAA,MAIA,QAAAJ,GAAAK,GAEA,GAAAC,GAAAR,KAAAS,SAAAC,mBAAA/c,KAAAU,UAAAkc,MACAvc,EAAA,+DAAkEwc,CAElE,cAAAxc,EAAA,MArEA1K,EAAAD,QAAA,SAAAymB,GACA,GAAAa,KAwCA,OArCAA,GAAAC,SAAA,WACA,MAAA5jB,MAAAuL,IAAA,SAAA0F,GACA,GAAA0R,GAAAE,EAAA5R,EAAA6R,EACA,OAAA7R,GAAA,GACA,UAAAA,EAAA,OAAmC0R,EAAA,IAEnCA,IAEGW,KAAA,KAIHK,EAAA/e,EAAA,SAAA3I,EAAA4nB,GACA,gBAAA5nB,KACAA,IAAA,KAAAA,EAAA,KAEA,QADA6nB,MACAlf,EAAA,EAAgBA,EAAA5E,KAAA2C,OAAiBiC,IAAA,CACjC,GAAArI,GAAAyD,KAAA4E,GAAA,EACA,iBAAArI,KACAunB,EAAAvnB,IAAA,GAEA,IAAAqI,EAAA,EAAYA,EAAA3I,EAAA0G,OAAoBiC,IAAA,CAChC,GAAAqM,GAAAhV,EAAA2I,EAKA,iBAAAqM,GAAA,IAAA6S,EAAA7S,EAAA,MACA4S,IAAA5S,EAAA,GACAA,EAAA,GAAA4S,EACKA,IACL5S,EAAA,OAAAA,EAAA,aAAA4S,EAAA,KAEAF,EAAArS,KAAAL,MAIA0S,I1Bu7FM,SAAUrnB,EAAQD,QAASH,G2Br5FjC,QAAA6nB,GAAAC,EAAA3f,GACA,OAAAO,GAAA,EAAeA,EAAAof,EAAArhB,OAAmBiC,IAAA,CAClC,GAAAqM,GAAA+S,EAAApf,GACAqf,EAAAC,EAAAjT,EAAA1U,GACA,IAAA0nB,EAAA,CACAA,EAAAE,MACA,QAAAtJ,GAAA,EAAiBA,EAAAoJ,EAAAG,MAAAzhB,OAA2BkY,IAC5CoJ,EAAAG,MAAAvJ,GAAA5J,EAAAmT,MAAAvJ,GAEA,MAAQA,EAAA5J,EAAAmT,MAAAzhB,OAAuBkY,IAC/BoJ,EAAAG,MAAA9S,KAAA+S,EAAApT,EAAAmT,MAAAvJ,GAAAxW,QAEG,CAEH,OADA+f,MACAvJ,EAAA,EAAiBA,EAAA5J,EAAAmT,MAAAzhB,OAAuBkY,IACxCuJ,EAAA9S,KAAA+S,EAAApT,EAAAmT,MAAAvJ,GAAAxW,GAEA6f,GAAAjT,EAAA1U,KAA2BA,GAAA0U,EAAA1U,GAAA4nB,KAAA,EAAAC,WAK3B,QAAAE,GAAAX,GAGA,OAFAK,MACAO,KACA3f,EAAA,EAAeA,EAAA+e,EAAAhhB,OAAiBiC,IAAA,CAChC,GAAAqM,GAAA0S,EAAA/e,GACArI,EAAA0U,EAAA,GACAuT,EAAAvT,EAAA,GACAwT,EAAAxT,EAAA,GACAsS,EAAAtS,EAAA,GACAyT,GAAcF,MAAAC,QAAAlB,YACdgB,GAAAhoB,GAGAgoB,EAAAhoB,GAAA6nB,MAAA9S,KAAAoT,GAFAV,EAAA1S,KAAAiT,EAAAhoB,IAAgCA,KAAA6nB,OAAAM,KAIhC,MAAAV,GAGA,QAAAW,GAAAtgB,EAAAugB,GACA,GAAAC,GAAAC,EAAAzgB,EAAA0gB,WACA,KAAAF,EACA,SAAAxe,OAAA,8GAEA,IAAA2e,GAAAC,IAAAtiB,OAAA,EACA,YAAA0B,EAAA6gB,SACAF,EAEGA,EAAAG,YACHN,EAAAO,aAAAR,EAAAI,EAAAG,aAEAN,EAAAQ,YAAAT,GAJAC,EAAAO,aAAAR,EAAAC,EAAAS,YAMAL,EAAA3T,KAAAsT,OACE,eAAAvgB,EAAA6gB,SAGF,SAAA7e,OAAA,qEAFAwe,GAAAQ,YAAAT,IAMA,QAAAW,GAAAX,GACAA,EAAAY,WAAAC,YAAAb,EACA,IAAAc,GAAAT,EAAApS,QAAA+R,EACAc,IAAA,GACAT,EAAAlL,OAAA2L,EAAA,GAIA,QAAAC,GAAAthB,GACA,GAAAugB,GAAA/L,SAAA+M,cAAA,QAKA,OAJAvhB,GAAAnC,MAAA6T,KAAA,WAEA8P,EAAAjB,EAAAvgB,EAAAnC,OACAyiB,EAAAtgB,EAAAugB,GACAA,EAGA,QAAAkB,GAAAzhB,GACA,GAAA0hB,GAAAlN,SAAA+M,cAAA,OAMA,OALAvhB,GAAAnC,MAAA6T,KAAA,WACA1R,EAAAnC,MAAA8jB,IAAA,aAEAH,EAAAE,EAAA1hB,EAAAnC,OACAyiB,EAAAtgB,EAAA0hB,GACAA,EAGA,QAAAF,GAAAI,EAAA/jB,GACAyB,OAAAkD,KAAA3E,GAAA6L,QAAA,SAAAjJ,GACAmhB,EAAAC,aAAAphB,EAAA5C,EAAA4C,MAIA,QAAAuf,GAAAvnB,EAAAuH,GACA,GAAAugB,GAAA/T,EAAAE,CAEA,IAAA1M,EAAA8hB,UAAA,CACA,GAAAC,GAAAC,GACAzB,GAAA0B,MAAAX,EAAAthB,IACAwM,EAAA0V,EAAAnY,KAAA,KAAAwW,EAAAwB,GAAA,GACArV,EAAAwV,EAAAnY,KAAA,KAAAwW,EAAAwB,GAAA,OACEtpB,GAAAymB,WACF,kBAAAiD,MACA,kBAAAA,KAAAC,iBACA,kBAAAD,KAAAE,iBACA,kBAAAC,OACA,kBAAA3D,OACA4B,EAAAkB,EAAAzhB,GACAwM,EAAA+V,EAAAxY,KAAA,KAAAwW,EAAAvgB,GACA0M,EAAA,WACAwU,EAAAX,GACAA,EAAAiC,MACAL,IAAAE,gBAAA9B,EAAAiC,SAGAjC,EAAAe,EAAAthB,GACAwM,EAAAiW,EAAA1Y,KAAA,KAAAwW,GACA7T,EAAA,WACAwU,EAAAX,IAMA,OAFA/T,GAAA/T,GAEA,SAAAiqB,GACA,GAAAA,EAAA,CACA,GAAAA,EAAAvC,MAAA1nB,EAAA0nB,KAAAuC,EAAAtC,QAAA3nB,EAAA2nB,OAAAsC,EAAAxD,YAAAzmB,EAAAymB,UACA,MACA1S,GAAA/T,EAAAiqB,OAEAhW,MAcA,QAAAwV,GAAA3B,EAAA5K,EAAAjJ,EAAAjU,GACA,GAAA0nB,GAAAzT,EAAA,GAAAjU,EAAA0nB,GAEA,IAAAI,EAAAoC,WACApC,EAAAoC,WAAAC,QAAAC,EAAAlN,EAAAwK,OACE,CACF,GAAA2C,GAAAtO,SAAAuO,eAAA5C,GACA6C,EAAAzC,EAAAyC,UACAA,GAAArN,IAAA4K,EAAAa,YAAA4B,EAAArN,IACAqN,EAAA1kB,OACAiiB,EAAAQ,aAAA+B,EAAAE,EAAArN,IAEA4K,EAAAS,YAAA8B,IAKA,QAAAL,GAAAlC,EAAA9nB,GACA,GAAA0nB,GAAA1nB,EAAA0nB,IACAC,EAAA3nB,EAAA2nB,KAMA,IAJAA,GACAG,EAAAsB,aAAA,QAAAzB,GAGAG,EAAAoC,WACApC,EAAAoC,WAAAC,QAAAzC,MACE,CACF,KAAAI,EAAAU,YACAV,EAAAa,YAAAb,EAAAU,WAEAV,GAAAS,YAAAxM,SAAAuO,eAAA5C,KAIA,QAAAoC,GAAAb,EAAA1hB,EAAAvH,GACA,GAAA0nB,GAAA1nB,EAAA0nB,IACAjB,EAAAzmB,EAAAymB,UAOA+D,EAAA9hB,SAAAnB,EAAAkjB,uBAAAhE,GAEAlf,EAAAkjB,uBAAAD,KACA9C,EAAAgD,EAAAhD,IAGAjB,IAEAiB,GAAA,uDAAuDxB,KAAAS,SAAAC,mBAAA/c,KAAAU,UAAAkc,MAAA,MAGvD,IAAAkE,GAAA,GAAAd,OAAAnC,IAA6BzO,KAAA,aAE7B2R,EAAA3B,EAAAc,IAEAd,GAAAc,KAAAL,IAAAC,gBAAAgB,GAEAC,GACAlB,IAAAE,gBAAAgB,GA5RA,GAAAxD,MACAyD,EAAA,SAAAza,GACA,GAAA0a,EACA,mBAEA,MADA,mBAAAA,OAAA1a,EAAApF,MAAA9H,KAAA8F,YACA8hB,IAGAC,EAAAF,EAAA,WAMA,MAAAppB,SAAAsa,mBAAA5M,MAAA1N,OAAAupB,OAEAhD,EAAA,SAAA5X,GACA,GAAA0a,KACA,iBAAAG,GAIA,MAHA,mBAAAH,GAAAG,KACAH,EAAAG,GAAA7a,EAAAzQ,KAAAuD,KAAA+nB,IAEAH,EAAAG,KAEE,SAAAlD,GACF,MAAAhM,UAAAmP,cAAAnD,KAEAyB,EAAA,KACAD,EAAA,EACApB,KACAuC,EAAAtrB,EAAA,GAEAI,GAAAD,QAAA,SAAAsnB,EAAAtf,GAKAA,QACAA,EAAAnC,MAAA,gBAAAmC,GAAAnC,MAAAmC,EAAAnC,SAIA,mBAAAmC,GAAA8hB,YAAA9hB,EAAA8hB,UAAA0B,KAGA,mBAAAxjB,GAAA0gB,aAAA1gB,EAAA0gB,WAAA,QAGA,mBAAA1gB,GAAA6gB,WAAA7gB,EAAA6gB,SAAA,SAEA,IAAAlB,GAAAM,EAAAX,EAGA,OAFAI,GAAAC,EAAA3f,GAEA,SAAA4jB,GAEA,OADAC,MACAtjB,EAAA,EAAgBA,EAAAof,EAAArhB,OAAmBiC,IAAA,CACnC,GAAAqM,GAAA+S,EAAApf,GACAqf,EAAAC,EAAAjT,EAAA1U,GACA0nB,GAAAE,OACA+D,EAAA5W,KAAA2S,GAEA,GAAAgE,EAAA,CACA,GAAA1D,GAAAD,EAAA2D,EACAlE,GAAAQ,EAAAlgB,GAEA,OAAAO,GAAA,EAAgBA,EAAAsjB,EAAAvlB,OAAsBiC,IAAA,CACtC,GAAAqf,GAAAiE,EAAAtjB,EACA,QAAAqf,EAAAE,KAAA,CACA,OAAAtJ,GAAA,EAAkBA,EAAAoJ,EAAAG,MAAAzhB,OAA2BkY,IAC7CoJ,EAAAG,MAAAvJ,WACAqJ,GAAAD,EAAA1nB,OA+IA,IAAA2qB,GAAA,WACA,GAAAiB,KAEA,iBAAAnO,EAAAoO,GAEA,MADAD,GAAAnO,GAAAoO,EACAD,EAAAld,OAAAod,SAAA/E,KAAA,W3B+iGM,SAAUhnB,EAAQD,S4B/vGxBC,EAAAD,QAAA,SAAAmoB,GAEA,GAAA8D,GAAA,mBAAA/pB,gBAAA+pB,QAEA,KAAAA,EACA,SAAAjiB,OAAA,mCAIA,KAAAme,GAAA,gBAAAA,GACA,MAAAA,EAGA,IAAA+D,GAAAD,EAAAhW,SAAA,KAAAgW,EAAAlW,KACAoW,EAAAD,EAAAD,EAAAG,SAAA/lB,QAAA,iBA4BAgmB,EAAAlE,EAAA9hB,QAAA,+DAAAimB,EAAAC,GAEA,GAAAC,GAAAD,EACAE,OACApmB,QAAA,oBAAAqmB,EAAAtP,GAAwC,MAAAA,KACxC/W,QAAA,oBAAAqmB,EAAAtP,GAAwC,MAAAA,IAGxC,mDAAAhM,KAAAob,GACA,MAAAF,EAIA,IAAAK,EAcA,OAVAA,GAFA,IAAAH,EAAAhW,QAAA,MAEAgW,EACG,IAAAA,EAAAhW,QAAA,KAEH0V,EAAAM,EAGAL,EAAAK,EAAAnmB,QAAA,YAIA,OAAAiE,KAAAU,UAAA2hB,GAAA,KAIA,OAAAN,K5BqxGM,SAAUpsB,EAAQD,QAASH,GAEhC,YAWA,SAASW,GAAuBC,GAC5B,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,G6Bx3GlC,QAASsE,GAAKX,EAAKZ,G7B43GjC,G6Bz3GSc,GAAKpC,OACXoC,E7B23GHF,G6B33GOwoB,K7B43GHnpB,I6B33GQ,SAAUopB,EAAUre,EAAOse,EAAKrkB,G7B43GpC,G6B33GOskB,GAAeC,EAAArsB,QAAGssB,MACtBze,E7B43GH,OAAOlK,G6B33GM2c,WACLuC,YAAAhgB,G7B23GJyH,O6Bz3GO,M7B03GP6hB,I6B13GYA,GAAO1oB,EAAIvC,SAAWgrB,EAC3BE,E7B03GPG,SACIC,mB6B13G2B1kB,GAAOrE,EAC3Bc,O7B03GPkoB,a6B13GqBlO,KAAK3U,OAAM,GAAI2U,OAAOmO,mBAG3CjK,MAAM,SAACkK,G7B63GX,MAHAppB,S6Bz3GeC,IAAI,qBAEZmpB,GACOhpB,EAAG2c,WACbsM,UACA9d,OAAO,SAAU6d,G7B03GrB,MADAppB,S6Bx3GeC,IAAI,uBAAwBmpB,EAAS3iB,KAC7C2c,MAAOgG,EAAS3iB,KACnB2c,QAKb,IAAMkG,GAAQppB,EAAIod,QAGlB,Q7Bs5GH,OAhCAgM,G6Bt3GStnB,GAAG,UAAW,SAAUkU,G7Bu3G7BlW,Q6Bt3GWC,IAAI,iBACfiW,K7Bu3GJhW,E6Bt3GOopB,MACJA,E7Bs3GHppB,E6Bt3GOopB,MAAMC,IAAM,SAAUpN,G7Bu3GzBmN,E6Bt3GSjmB,OACT8Y,IA6BJjc,E7ByyGJkD,OAAOY,eAAelI,QAAS,cAC3ByH,OAAO,IAEXzH,QAAQW,Q6Bj3GmBoE,CAFxB,IAAA2oB,GAAA7tB,EAAA,I7Bu3GCmtB,EAAWxsB,EAAuBktB,IAwEjC,SAAUztB,EAAQD,S8B/7GxBC,EAAAD,QAAAiF,Q9Bq8GM,SAAUhF,EAAQD,SAEvB,Y+Bv8Gc,SAAS2tB,K/B88GnB,OACInoB,Q+B58GD,U/B68GCE,K+B78GK,SAAUC,EAAOikB,EAAS/jB,EAAO+nB,G/B88GlC,G+B78GGC,GAAa,SAAUC,GACL3kB,QAAd2kB,IAAyBA,EAC7B,G/B68GC,I+B78GGC,GAAcD,EAClBE,a/Bi9GC,O+Bj9GGD,KAAgBD,I/B88GfF,E+B78GSK,cACVF,G/B68GCH,E+B58GJM,WAEJH,E/B+8GAH,G+B38GSO,SAASlZ,KACnB4Y,G/B28GCA,E+B38GUloB,EAAME,EAAME,Y/Bw7GlCuB,OAAOY,eAAelI,QAAS,cAC3ByH,OAAO,IAEXzH,QAAQW,Q+B58GegtB,G/Bm+GlB,SAAU1tB,EAAQD,QAASH,GAEhC,YAsBA,SAASW,GAAuBC,GAC5B,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GArBpD6G,OAAOY,eAAelI,QAAS,cAC3ByH,OAAO,GgCx+GZ,IAAA2mB,GAAAvuB,EAAA,IhC6+GKwuB,EAAkB7tB,EAAuB4tB,GgC5+G9CE,EAAAzuB,EAAA,IhCg/GK0uB,EAAkB/tB,EAAuB8tB,GgC/+G9CE,EAAA3uB,EAAA,IhCm/GK4uB,EAAiBjuB,EAAuBguB,GgCj/G7CE,EAAA7uB,EAAA,IhCq/GK8uB,EAA2BnuB,EAAuBkuB,EAMtD1uB,SAAQW,QAAU0E,QgCz/GIpF,OAAO,iBAAkB,aAAc,OACzDiY,KAAI,iBAAU,SACX0W,GhCw/GHA,EgCx/GkBnB,IAAI,sBAAAc,EACnB5tB,ShCw/GHiuB,EgCx/GkBnB,IAAI,qBAAAgB,EACnB9tB,ShCw/GHiuB,EgCx/GkBnB,IAAI,sBAAAY,EAKtB1tB,YACA4E,UAAU,mBAAoB,OAAQ,WAAY,WAAY,YAAa,OAAQ,UAAW,QAAS,SAAU,KAAM,iBAAkB,eAAgB,SAAUspB,EAAMC,EAAUC,EAAUC,EAAW1rB,EAAM2rB,EAASzrB,EAAO0rB,EAAQzN,EAAI0N,EAAgBC,GhCo/G1P,OACI3pB,SgCl/GG,IhCm/GHE,OACI0pB,KgCj/GD,KhCm/GHC,SAAUb,EgCl/GP9tB,QhCm/GH+E,KgCn/GS,SAAU6pB,EAAQ3F,EAAS/jB,GhCq/GhC,QgCn/GY2pB,KhCo/GRtrB,QgCn/GWC,IAER,UhCm/GHorB,EgCl/GAE,UhCq/GJpqB,QgCn/GWukB,QAAQqF,GAAS/oB,GAAG,SAC/BspB,IhCo/GJE,agCl/GG,KhCm/GHC,YgCn/Ge,oBAAU,SAAQ,SAC1BJ,EAAAK,EAAAC,GhC+lHH,QgCx+GYC,KhCggHR,MArBAzqB,SgCx+GWqM,QAAQqe,EAAGC,UAAW,SAAU3Y,EAAG9O,GhC0+G1C,GADAoC,EgCx+GQ,UAAa0M,EAAEzJ,QAChByJ,EAAE4Y,SAAW,EhCy+GhB,IgCx+GQ,GAAI1nB,GAAI,EAAGA,EAAI8O,EAAE4Y,SAAU1nB,IhCy+G/BoC,EgCx+GQ,UAAa0M,EAAEzJ,KAAKqH,KAC5B,QhC6+GZ5P,QgCx+GWqM,QAAQqe,EAAGG,OAAQ,SAAU7Y,EAAG9O,GhC0+GvC,GADAoC,EgCx+GQ,OAAU0M,EAAEzJ,QACbyJ,EAAE4Y,SAAW,EhCy+GhB,IgCx+GQ,GAAI1nB,GAAI,EAAGA,EAAI8O,EAAE4Y,SAAU1nB,IhCy+G/BoC,EgCx+GQ,OAAU0M,EAAEzJ,KAAKqH,KACzB,QhC4+GZ/Q,QgCx+GWC,IAAI,0BACZwG,GAEHA,EhCm3HJ,QgCv9GMwlB,GAAmCxlB,GhCw9GrC,GgCv9GDylB,KhCu+GC,OAdA/qB,SgCv9GGqM,QAAQ/G,EAAM,SAAS0M,EAAE9O,GAEzB6nB,EAAK/Z,eAAegB,EAAE3S,OhCw9GjB0rB,EgCv9GA/Y,EAAE,MAAS,QAAeA,EAAE,OhCw9G5B+Y,EgCv9GA/Y,EAAE,MAAS,UAAe,IhCy9G1B+Y,EgCt9GA/Y,EAAE,ShCu9GF+Y,EgCt9GA/Y,EAAE,MAAS,MAAcA,EAC9B,MhCs9GK+Y,EgCt9GA/Y,EAAE,MAAS,SAChB,EhCs9GK+Y,EgCt9GA/Y,EAAE,MAAS,OAAcA,EACjC,UhCy9GAnT,QgCt9GGC,IAAI,2BACZisB,GACDA,EhCo7FElsB,QgCn/GWC,IAAI,4BAA6BorB,EACzCM,EhCm/GH,IgCn/GOE,GAEJpsB,KAAM0sB,EACNnB,CAAehtB,QAEfouB,MhCm/GHD,GgCn/GOE,WAAarB,EAEjBsB,ahCm/GH7sB,KgCn/GQ8sB,sBACL,EhCm/GH9sB,KgCn/GQ+sB,mBACL,EhCm/GH/sB,KgCn/GQgtB,gBACL,EhCm/GHhtB,KgCn/GQitB,mBACL,EhCm/GHjtB,KgCn/GQktB,iBACL,EhCm/GHltB,KgCn/GQmtB,aACL,YhCm/GHntB,KgCn/GQotB,iBhCo/GRptB,KgCn/GQqtB,YACL,GhCm/GHrtB,KgCn/GQstB,mBAEL,EhCm/GHttB,KgCn/GQutB,qBhCo/GRvtB,KgCn/GQwtB,kBhCo/GR5B,EgCn/GU6B,gBAGP,GhCk/GHztB,KgCl/GQ0tB,mBAAqB,WhCm/GzBntB,QgCl/GWC,IACR,wBhCk/GHR,KgCl/GQ8sB,sBAAwB9sB,KAChC8sB,sBhCo/GJ9sB,KgCl/GQ2tB,cAAgB,WhCm/GpBptB,QgCl/GWC,IACR,kBhCk/GHR,KgCl/GQktB,iBAAmBltB,KAC3BktB,iBhCo/GJltB,KgCl/GQ4tB,ShCm/GJvtB,MgCh/GD,GhCk/GHL,KgCl/GQ6tB,SAAU7tB,KAAK8tB,WAAY9tB,KAAK+tB,cAGrC,EhCi/GHnC,EgCj/GUoC,kBACP,EhCi/GHpC,EgCj/GUR,SACPA,EhCi/GHQ,EgC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","file":"abl-sdk.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _feathers = __webpack_require__(2);\n\n\tvar _feathers2 = _interopRequireDefault(_feathers);\n\n\tvar _feathersLocalstorage = __webpack_require__(3);\n\n\tvar _feathersLocalstorage2 = _interopRequireDefault(_feathersLocalstorage);\n\n\tvar _feathersReactive = __webpack_require__(16);\n\n\tvar _feathersReactive2 = _interopRequireDefault(_feathersReactive);\n\n\tvar _auth = __webpack_require__(21);\n\n\tvar _auth2 = _interopRequireDefault(_auth);\n\n\tvar _utils = __webpack_require__(22);\n\n\tvar _utils2 = _interopRequireDefault(_utils);\n\n\tvar _styles = __webpack_require__(23);\n\n\tvar _styles2 = _interopRequireDefault(_styles);\n\n\tvar _rest = __webpack_require__(28);\n\n\tvar _rest2 = _interopRequireDefault(_rest);\n\n\tvar _textTransforms = __webpack_require__(30);\n\n\tvar _textTransforms2 = _interopRequireDefault(_textTransforms);\n\n\tfunction _interopRequireDefault(obj) {\n\t  return obj && obj.__esModule ? obj : { default: obj };\n\t}\n\n\t//Including independent module source code for packaging\n\tvar ablBook = __webpack_require__(31);\n\n\tvar sdkProvider = function sdkProvider(settings) {\n\n\t  var endpoint = null;\n\t  var socketOpts = null;\n\n\t  var feathersAuth = false;\n\t  var _useSocket = true;\n\t  var authStorage = window.localStorage;\n\t  var services = [];\n\t  //Configuration\n\t  return {\n\t    setAuthStorage: function setAuthStorage(newAuthStorage) {\n\t      authStorage = newAuthStorage;\n\t    },\n\n\t    setSocketOpts: function setSocketOpts(opts) {\n\t      socketOpts = opts;\n\t    },\n\t    useSocket: function useSocket(socketEnabled) {\n\t      _useSocket = !!socketEnabled;\n\t    },\n\t    setEndpoint: function setEndpoint(newEndpoint) {\n\t      endpoint = newEndpoint;\n\t    },\n\t    setFeathersAuth: function setFeathersAuth(isFeathersAuth) {\n\t      feathersAuth = isFeathersAuth;\n\t    },\n\t    setServices: function setServices(newServices) {\n\t      services = newServices;\n\t    },\n\t    getSettings: function getSettings() {\n\t      return endpoint;\n\t    },\n\t    $get: ['$injector', '$rootScope', '$timeout', '$log', '$mdToast', '$http', function ($injector, $rootScope, $timeout, $log, $mdToast, $http) {\n\t      var $rootScope = $injector.get('$rootScope');\n\t      var that = this;\n\n\t      $rootScope.loading = true;\n\t      this.loadingTimeout = null;\n\n\t      this.loadingTimeout = $timeout(function () {\n\t        $rootScope.loading = false;\n\t      }, 1500);\n\n\t      //Add timeout\n\t      $rootScope.afterRender = function (current, total) {\n\t        $timeout.cancel(this.loadingTimeout);\n\t        this.loadingTimeout = $timeout(function () {\n\t          $rootScope.loading = false;\n\t        }, 1500);\n\t      };\n\n\t      if (!endpoint) {\n\t        console.log('no ep');\n\t        this.app = {};\n\t        return this.app;\n\t      }\n\n\t      var RxJS = window.Rx;\n\n\t      this.app = (0, _feathers2.default)().configure((0, _feathersReactive2.default)(RxJS)) //feathers-reactive\n\t      .configure(_feathers2.default.hooks()).use('cache', (0, _feathersLocalstorage2.default)({\n\t        name: 'abl',\n\t        storage: window.localStorage\n\t      }));\n\n\t      if (_useSocket) {\n\t        console.log('endpoint', endpoint);\n\t        this.socket = io(endpoint, socketOpts);\n\t        this.app.configure(_feathers2.default.socketio(this.socket));\n\t      } else {\n\t        this.app.configure(_feathers2.default.rest(endpoint).jquery(window.jQuery));\n\t      }\n\n\t      (0, _utils2.default)(this.app, $mdToast, $rootScope);\n\t      this.app.endpoint = endpoint;\n\t      this.app.apiKey = 'zxxz6RcLlAsd28z62JP2pbZYt72iOqC4uj2cPcZbTDzEXOrMzp25PuNEB2SOsJbe';\n\n\t      (0, _rest2.default)(this.app, $http);\n\n\t      this.app.getSettings = function () {};\n\n\t      if (feathersAuth) {\n\t        this.app = (0, _auth2.default)(this.app, that, authStorage, $rootScope);\n\t      }\n\n\t      return this.app;\n\t    }]\n\t  };\n\t};\n\n\t//Old naming convention, left for backwards compatibility\n\tvar feathersSdk = [function $feathersProvider() {\n\t  return sdkProvider('feathers');\n\t}];\n\n\tvar ablSdk = [function $ablProvider() {\n\t  return sdkProvider('abl');\n\t}];\n\n\tangular.module('abl-sdk-feathers', ['ngMaterial', 'rx']).provider('$abl', ablSdk).provider('$feathers', feathersSdk).directive('capitalize', _textTransforms2.default).directive('formatPhone', [function () {\n\t  return {\n\t    require: 'ngModel',\n\t    restrict: 'A',\n\t    link: function link(scope, elem, attrs, ctrl, ngModel) {\n\t      elem.add(phonenumber).on('keyup', function () {\n\t        var origVal = elem.val().replace(/[^\\w\\s]/gi, '');\n\t        if (origVal.length === 10) {\n\t          var str = origVal.replace(/(.{3})/g, \"$1-\");\n\t          var phone = str.slice(0, -2) + str.slice(-1);\n\t          jQuery(\"#phonenumber\").val(phone);\n\t        }\n\t      });\n\t    }\n\t  };\n\t}]);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = feathers;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\n\texports.default = init;\n\n\tvar _feathersMemory = __webpack_require__(4);\n\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\tvar LocalStorage = function (_Service) {\n\t  _inherits(LocalStorage, _Service);\n\n\t  function LocalStorage() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t    _classCallCheck(this, LocalStorage);\n\n\t    var _this = _possibleConstructorReturn(this, (LocalStorage.__proto__ || Object.getPrototypeOf(LocalStorage)).call(this, options));\n\n\t    _this._storageKey = options.name || 'feathers';\n\t    _this._storage = options.storage || typeof window !== 'undefined' && window.localStorage;\n\t    _this._throttle = options.throttle || 200;\n\t    _this.store = null;\n\n\t    if (!_this._storage) {\n\t      throw new Error('The `storage` option needs to be provided');\n\t    }\n\t    return _this;\n\t  }\n\n\t  _createClass(LocalStorage, [{\n\t    key: 'ready',\n\t    value: function ready() {\n\t      var _this2 = this;\n\n\t      if (!this.store) {\n\t        return Promise.resolve(this._storage.getItem(this._storageKey)).then(function (str) {\n\t          return JSON.parse(str || '{}');\n\t        }).then(function (store) {\n\t          var keys = Object.keys(store);\n\t          var last = store[keys[keys.length - 1]];\n\n\t          // Current id is the id of the last item\n\t          _this2._uId = keys.length && typeof last[_this2.id] !== 'undefined' ? last[_this2.id] + 1 : 0;\n\n\t          return _this2.store = store;\n\t        });\n\t      }\n\n\t      return Promise.resolve(this.store);\n\t    }\n\t  }, {\n\t    key: 'flush',\n\t    value: function flush(data) {\n\t      var _this3 = this;\n\n\t      if (!this._timeout) {\n\t        this._timeout = setTimeout(function () {\n\t          _this3._storage.setItem(_this3._storageKey, JSON.stringify(_this3.store));\n\t          delete _this3._timeout;\n\t        }, this.throttle);\n\t      }\n\n\t      return data;\n\t    }\n\t  }, {\n\t    key: 'execute',\n\t    value: function execute(method) {\n\t      var _this4 = this;\n\n\t      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t        args[_key - 1] = arguments[_key];\n\t      }\n\n\t      return this.ready().then(function () {\n\t        var _get2;\n\n\t        return (_get2 = _get(LocalStorage.prototype.__proto__ || Object.getPrototypeOf(LocalStorage.prototype), method, _this4)).call.apply(_get2, [_this4].concat(args));\n\t      });\n\t    }\n\t  }, {\n\t    key: 'find',\n\t    value: function find() {\n\t      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t        args[_key2] = arguments[_key2];\n\t      }\n\n\t      return this.execute.apply(this, ['find'].concat(args));\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t        args[_key3] = arguments[_key3];\n\t      }\n\n\t      return this.execute.apply(this, ['get'].concat(args));\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create() {\n\t      var _this5 = this;\n\n\t      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n\t        args[_key4] = arguments[_key4];\n\t      }\n\n\t      return this.execute.apply(this, ['create'].concat(args)).then(function (data) {\n\t        return _this5.flush(data);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'patch',\n\t    value: function patch() {\n\t      var _this6 = this;\n\n\t      for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n\t        args[_key5] = arguments[_key5];\n\t      }\n\n\t      return this.execute.apply(this, ['patch'].concat(args)).then(function (data) {\n\t        return _this6.flush(data);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      var _this7 = this;\n\n\t      for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n\t        args[_key6] = arguments[_key6];\n\t      }\n\n\t      return this.execute.apply(this, ['update'].concat(args)).then(function (data) {\n\t        return _this7.flush(data);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove() {\n\t      var _this8 = this;\n\n\t      for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n\t        args[_key7] = arguments[_key7];\n\t      }\n\n\t      return this.execute.apply(this, ['remove'].concat(args)).then(function (data) {\n\t        return _this8.flush(data);\n\t      });\n\t    }\n\t  }]);\n\n\t  return LocalStorage;\n\t}(_feathersMemory.Service);\n\n\tfunction init(options) {\n\t  return new LocalStorage(options);\n\t}\n\n\tinit.Service = _feathersMemory.Service;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n\texports.default = init;\n\n\tvar _uberproto = __webpack_require__(5);\n\n\tvar _uberproto2 = _interopRequireDefault(_uberproto);\n\n\tvar _feathersQueryFilters = __webpack_require__(6);\n\n\tvar _feathersQueryFilters2 = _interopRequireDefault(_feathersQueryFilters);\n\n\tvar _feathersErrors = __webpack_require__(12);\n\n\tvar _feathersErrors2 = _interopRequireDefault(_feathersErrors);\n\n\tvar _feathersCommons = __webpack_require__(7);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\tvar Service = function () {\n\t  function Service() {\n\t    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t    _classCallCheck(this, Service);\n\n\t    this.paginate = options.paginate || {};\n\t    this._id = this.id = options.idField || options.id || 'id';\n\t    this._uId = options.startId || 0;\n\t    this.store = options.store || {};\n\t    this.events = options.events || [];\n\t    this._matcher = options.matcher || _feathersCommons.matcher;\n\t    this._sorter = options.sorter || _feathersCommons.sorter;\n\t  }\n\n\t  _createClass(Service, [{\n\t    key: 'extend',\n\t    value: function extend(obj) {\n\t      return _uberproto2.default.extend(obj, this);\n\t    }\n\n\t    // Find without hooks and mixins that can be used internally and always returns\n\t    // a pagination object\n\n\t  }, {\n\t    key: '_find',\n\t    value: function _find(params) {\n\t      var getFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _feathersQueryFilters2.default;\n\n\t      var _getFilter = getFilter(params.query || {}),\n\t          query = _getFilter.query,\n\t          filters = _getFilter.filters;\n\n\t      var values = _feathersCommons._.values(this.store).filter(this._matcher(query));\n\n\t      var total = values.length;\n\n\t      if (filters.$sort) {\n\t        values.sort(this._sorter(filters.$sort));\n\t      }\n\n\t      if (filters.$skip) {\n\t        values = values.slice(filters.$skip);\n\t      }\n\n\t      if (typeof filters.$limit !== 'undefined') {\n\t        values = values.slice(0, filters.$limit);\n\t      }\n\n\t      if (filters.$select) {\n\t        values = values.map(function (value) {\n\t          return _feathersCommons._.pick.apply(_feathersCommons._, [value].concat(_toConsumableArray(filters.$select)));\n\t        });\n\t      }\n\n\t      return Promise.resolve({\n\t        total: total,\n\t        limit: filters.$limit,\n\t        skip: filters.$skip || 0,\n\t        data: values\n\t      });\n\t    }\n\t  }, {\n\t    key: 'find',\n\t    value: function find(params) {\n\t      var paginate = typeof params.paginate !== 'undefined' ? params.paginate : this.paginate;\n\t      // Call the internal find with query parameter that include pagination\n\t      var result = this._find(params, function (query) {\n\t        return (0, _feathersQueryFilters2.default)(query, paginate);\n\t      });\n\n\t      if (!(paginate && paginate.default)) {\n\t        return result.then(function (page) {\n\t          return page.data;\n\t        });\n\t      }\n\n\t      return result;\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(id, params) {\n\t      if (id in this.store) {\n\t        return Promise.resolve(this.store[id]).then((0, _feathersCommons.select)(params, this.id));\n\t      }\n\n\t      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n\t    }\n\n\t    // Create without hooks and mixins that can be used internally\n\n\t  }, {\n\t    key: '_create',\n\t    value: function _create(data, params) {\n\t      var id = data[this._id] || this._uId++;\n\t      var current = _feathersCommons._.extend({}, data, _defineProperty({}, this._id, id));\n\n\t      return Promise.resolve(this.store[id] = current).then((0, _feathersCommons.select)(params, this.id));\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create(data, params) {\n\t      var _this = this;\n\n\t      if (Array.isArray(data)) {\n\t        return Promise.all(data.map(function (current) {\n\t          return _this._create(current);\n\t        }));\n\t      }\n\n\t      return this._create(data, params);\n\t    }\n\n\t    // Update without hooks and mixins that can be used internally\n\n\t  }, {\n\t    key: '_update',\n\t    value: function _update(id, data, params) {\n\t      if (id in this.store) {\n\t        // We don't want our id to change type if it can be coerced\n\t        var oldId = this.store[id][this._id];\n\n\t        id = oldId == id ? oldId : id; // eslint-disable-line\n\n\t        data = _feathersCommons._.extend({}, data, _defineProperty({}, this._id, id));\n\t        this.store[id] = data;\n\n\t        return Promise.resolve(this.store[id]).then((0, _feathersCommons.select)(params, this.id));\n\t      }\n\n\t      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update(id, data, params) {\n\t      if (id === null || Array.isArray(data)) {\n\t        return Promise.reject(new _feathersErrors2.default.BadRequest('You can not replace multiple instances. Did you mean \\'patch\\'?'));\n\t      }\n\n\t      return this._update(id, data, params);\n\t    }\n\n\t    // Patch without hooks and mixins that can be used internally\n\n\t  }, {\n\t    key: '_patch',\n\t    value: function _patch(id, data, params) {\n\t      if (id in this.store) {\n\t        _feathersCommons._.extend(this.store[id], _feathersCommons._.omit(data, this._id));\n\n\t        return Promise.resolve(this.store[id]).then((0, _feathersCommons.select)(params, this.id));\n\t      }\n\n\t      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n\t    }\n\t  }, {\n\t    key: 'patch',\n\t    value: function patch(id, data, params) {\n\t      var _this2 = this;\n\n\t      if (id === null) {\n\t        return this._find(params).then(function (page) {\n\t          return Promise.all(page.data.map(function (current) {\n\t            return _this2._patch(current[_this2._id], data, params);\n\t          }));\n\t        });\n\t      }\n\n\t      return this._patch(id, data, params);\n\t    }\n\n\t    // Remove without hooks and mixins that can be used internally\n\n\t  }, {\n\t    key: '_remove',\n\t    value: function _remove(id, params) {\n\t      if (id in this.store) {\n\t        var deleted = this.store[id];\n\t        delete this.store[id];\n\n\t        return Promise.resolve(deleted).then((0, _feathersCommons.select)(params, this.id));\n\t      }\n\n\t      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n\t    }\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(id, params) {\n\t      var _this3 = this;\n\n\t      if (id === null) {\n\t        return this._find(params).then(function (page) {\n\t          return Promise.all(page.data.map(function (current) {\n\t            return _this3._remove(current[_this3._id], params);\n\t          }));\n\t        });\n\t      }\n\n\t      return this._remove(id, params);\n\t    }\n\t  }]);\n\n\t  return Service;\n\t}();\n\n\tfunction init(options) {\n\t  return new Service(options);\n\t}\n\n\tinit.Service = Service;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global define */\n\t/**\n\t * A base object for ECMAScript 5 style prototypal inheritance.\n\t *\n\t * @see https://github.com/rauschma/proto-js/\n\t * @see http://ejohn.org/blog/simple-javascript-inheritance/\n\t * @see http://uxebu.com/blog/2011/02/23/object-based-inheritance-for-ecmascript-5/\n\t */\n\t(function (root, factory) {\n\t\tif (true) {\n\t\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\t} else if (typeof exports === 'object') {\n\t\t\tmodule.exports = factory();\n\t\t} else {\n\t\t\troot.Proto = factory();\n\t\t}\n\t}(this, function () {\n\n\t\tfunction makeSuper(_super, old, name, fn) {\n\t\t\treturn function () {\n\t\t\t\tvar tmp = this._super;\n\n\t\t\t\t// Add a new ._super() method that is the same method\n\t\t\t\t// but either pointing to the prototype method\n\t\t\t\t// or to the overwritten method\n\t\t\t\tthis._super = (typeof old === 'function') ? old : _super[name];\n\n\t\t\t\t// The method only need to be bound temporarily, so we\n\t\t\t\t// remove it when we're done executing\n\t\t\t\tvar ret = fn.apply(this, arguments);\n\t\t\t\tthis._super = tmp;\n\n\t\t\t\treturn ret;\n\t\t\t};\n\t\t}\n\n\t\tfunction legacyMixin(prop, obj) {\n\t\t\tvar self = obj || this;\n\t\t\tvar fnTest = /\\b_super\\b/;\n\t\t\tvar _super = Object.getPrototypeOf(self) || self.prototype;\n\t\t\tvar _old;\n\n\t\t\t// Copy the properties over\n\t\t\tfor (var name in prop) {\n\t\t\t\t// store the old function which would be overwritten\n\t\t\t\t_old = self[name];\n\n\t\t\t\t// Check if we're overwriting an existing function\n\t\t\t\tif(\n\t\t\t\t\t\t((\n\t\t\t\t\t\t\ttypeof prop[name] === 'function' &&\n\t\t\t\t\t\t\ttypeof _super[name] === 'function'\n\t\t\t\t\t\t) || (\n\t\t\t\t\t\t\ttypeof _old === 'function' &&\n\t\t\t\t\t\t\ttypeof prop[name] === 'function'\n\t\t\t\t\t\t)) && fnTest.test(prop[name])\n\t\t\t\t) {\n\t\t\t\t\tself[name] = makeSuper(_super, _old, name, prop[name]);\n\t\t\t\t} else {\n\t\t\t\t\tself[name] = prop[name];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction es5Mixin(prop, obj) {\n\t\t\tvar self = obj || this;\n\t\t\tvar fnTest = /\\b_super\\b/;\n\t\t\tvar _super = Object.getPrototypeOf(self) || self.prototype;\n\t\t\tvar descriptors = {};\n\t\t\tvar proto = prop;\n\t\t\tvar processProperty = function(name) {\n\t\t\t\tif(!descriptors[name]) {\n\t\t\t\t\tdescriptors[name] = Object.getOwnPropertyDescriptor(proto, name);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Collect all property descriptors\n\t\t\tdo {\n\t\t\t\tObject.getOwnPropertyNames(proto).forEach(processProperty);\n\t    } while((proto = Object.getPrototypeOf(proto)) && Object.getPrototypeOf(proto));\n\t\t\t\n\t\t\tObject.keys(descriptors).forEach(function(name) {\n\t\t\t\tvar descriptor = descriptors[name];\n\n\t\t\t\tif(typeof descriptor.value === 'function' && fnTest.test(descriptor.value)) {\n\t\t\t\t\tdescriptor.value = makeSuper(_super, self[name], name, descriptor.value);\n\t\t\t\t}\n\n\t\t\t\tObject.defineProperty(self, name, descriptor);\n\t\t\t});\n\n\t\t\treturn self;\n\t\t}\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Create a new object using Object.create. The arguments will be\n\t\t\t * passed to the new instances init method or to a method name set in\n\t\t\t * __init.\n\t\t\t */\n\t\t\tcreate: function () {\n\t\t\t\tvar instance = Object.create(this);\n\t\t\t\tvar init = typeof instance.__init === 'string' ? instance.__init : 'init';\n\n\t\t\t\tif (typeof instance[init] === 'function') {\n\t\t\t\t\tinstance[init].apply(instance, arguments);\n\t\t\t\t}\n\t\t\t\treturn instance;\n\t\t\t},\n\t\t\t/**\n\t\t\t * Mixin a given set of properties\n\t\t\t * @param prop The properties to mix in\n\t\t\t * @param obj [optional] The object to add the mixin\n\t\t\t */\n\t\t\tmixin: typeof Object.defineProperty === 'function' ? es5Mixin : legacyMixin,\n\t\t\t/**\n\t\t\t * Extend the current or a given object with the given property\n\t\t\t * and return the extended object.\n\t\t\t * @param prop The properties to extend with\n\t\t\t * @param obj [optional] The object to extend from\n\t\t\t * @returns The extended object\n\t\t\t */\n\t\t\textend: function (prop, obj) {\n\t\t\t\treturn this.mixin(prop, Object.create(obj || this));\n\t\t\t},\n\t\t\t/**\n\t\t\t * Return a callback function with this set to the current or a given context object.\n\t\t\t * @param name Name of the method to proxy\n\t\t\t * @param args... [optional] Arguments to use for partial application\n\t\t\t */\n\t\t\tproxy: function (name) {\n\t\t\t\tvar fn = this[name];\n\t\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\t\t\targs.unshift(this);\n\t\t\t\treturn fn.bind.apply(fn, args);\n\t\t\t}\n\t\t};\n\n\t}));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\texports.default = function (query, paginate) {\n\t  var filters = {\n\t    $sort: convertSort(query.$sort),\n\t    $limit: getLimit(parse(query.$limit), paginate),\n\t    $skip: parse(query.$skip),\n\t    $select: query.$select,\n\t    $populate: query.$populate\n\t  };\n\n\t  return { filters: filters, query: _feathersCommons._.omit.apply(_feathersCommons._, [query].concat(PROPERTIES)) };\n\t};\n\n\tvar _feathersCommons = __webpack_require__(7);\n\n\tvar PROPERTIES = ['$sort', '$limit', '$skip', '$select', '$populate'];\n\n\tfunction parse(number) {\n\t  if (typeof number !== 'undefined') {\n\t    return Math.abs(parseInt(number, 10));\n\t  }\n\t}\n\n\tfunction getLimit(limit, paginate) {\n\t  if (paginate && paginate.default) {\n\t    var lower = typeof limit === 'number' ? limit : paginate.default;\n\t    var upper = typeof paginate.max === 'number' ? paginate.max : Number.MAX_VALUE;\n\n\t    return Math.min(lower, upper);\n\t  }\n\n\t  return limit;\n\t}\n\n\tfunction convertSort(sort) {\n\t  if ((typeof sort === 'undefined' ? 'undefined' : _typeof(sort)) !== 'object') {\n\t    return sort;\n\t  }\n\n\t  var result = {};\n\n\t  Object.keys(sort).forEach(function (key) {\n\t    return result[key] = _typeof(sort[key]) === 'object' ? sort[key] : parseInt(sort[key], 10);\n\t  });\n\n\t  return result;\n\t}\n\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _arguments = __webpack_require__(8);\n\n\tvar _arguments2 = _interopRequireDefault(_arguments);\n\n\tvar _utils = __webpack_require__(9);\n\n\tvar _hooks = __webpack_require__(11);\n\n\tvar _hooks2 = _interopRequireDefault(_hooks);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\texports.default = {\n\t  _: _utils._,\n\t  getArguments: _arguments2.default,\n\t  stripSlashes: _utils.stripSlashes,\n\t  hooks: _hooks2.default,\n\t  matcher: _utils.matcher,\n\t  sorter: _utils.sorter,\n\t  select: _utils.select,\n\t  makeUrl: _utils.makeUrl,\n\t  // lodash functions\n\t  each: _utils.each,\n\t  some: _utils.some,\n\t  every: _utils.every,\n\t  keys: _utils.keys,\n\t  values: _utils.values,\n\t  isMatch: _utils.isMatch,\n\t  isEmpty: _utils.isEmpty,\n\t  isObject: _utils.isObject,\n\t  extend: _utils.extend,\n\t  omit: _utils.omit,\n\t  pick: _utils.pick,\n\t  merge: _utils.merge\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getArguments;\n\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\n\tvar noop = exports.noop = function noop() {};\n\tvar getCallback = function getCallback(args) {\n\t  var last = args[args.length - 1];\n\t  return typeof last === 'function' ? last : noop;\n\t};\n\tvar getParams = function getParams(args, position) {\n\t  return _typeof(args[position]) === 'object' ? args[position] : {};\n\t};\n\n\tvar updateOrPatch = function updateOrPatch(name) {\n\t  return function (args) {\n\t    var id = args[0];\n\t    var data = args[1];\n\t    var callback = getCallback(args);\n\t    var params = getParams(args, 2);\n\n\t    if (typeof id === 'function') {\n\t      throw new Error('First parameter for \\'' + name + '\\' can not be a function');\n\t    }\n\n\t    if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) !== 'object') {\n\t      throw new Error('No data provided for \\'' + name + '\\'');\n\t    }\n\n\t    if (args.length > 4) {\n\t      throw new Error('Too many arguments for \\'' + name + '\\' service method');\n\t    }\n\n\t    return [id, data, params, callback];\n\t  };\n\t};\n\n\tvar getOrRemove = function getOrRemove(name) {\n\t  return function (args) {\n\t    var id = args[0];\n\t    var params = getParams(args, 1);\n\t    var callback = getCallback(args);\n\n\t    if (args.length > 3) {\n\t      throw new Error('Too many arguments for \\'' + name + '\\' service method');\n\t    }\n\n\t    if (typeof id === 'function') {\n\t      throw new Error('First parameter for \\'' + name + '\\' can not be a function');\n\t    }\n\n\t    return [id, params, callback];\n\t  };\n\t};\n\n\tvar converters = exports.converters = {\n\t  find: function find(args) {\n\t    var callback = getCallback(args);\n\t    var params = getParams(args, 0);\n\n\t    if (args.length > 2) {\n\t      throw new Error('Too many arguments for \\'find\\' service method');\n\t    }\n\n\t    return [params, callback];\n\t  },\n\t  create: function create(args) {\n\t    var data = args[0];\n\t    var params = getParams(args, 1);\n\t    var callback = getCallback(args);\n\n\t    if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) !== 'object') {\n\t      throw new Error('First parameter for \\'create\\' must be an object');\n\t    }\n\n\t    if (args.length > 3) {\n\t      throw new Error('Too many arguments for \\'create\\' service method');\n\t    }\n\n\t    return [data, params, callback];\n\t  },\n\n\t  update: updateOrPatch('update'),\n\n\t  patch: updateOrPatch('patch'),\n\n\t  get: getOrRemove('get'),\n\n\t  remove: getOrRemove('remove')\n\t};\n\n\tfunction getArguments(method, args) {\n\t  return converters[method](args);\n\t}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.stripSlashes = stripSlashes;\n\texports.each = each;\n\texports.some = some;\n\texports.every = every;\n\texports.keys = keys;\n\texports.values = values;\n\texports.isMatch = isMatch;\n\texports.isEmpty = isEmpty;\n\texports.isObject = isObject;\n\texports.extend = extend;\n\texports.omit = omit;\n\texports.pick = pick;\n\texports.merge = merge;\n\texports.select = select;\n\texports.matcher = matcher;\n\texports.sorter = sorter;\n\texports.makeUrl = makeUrl;\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\tfunction stripSlashes(name) {\n\t  return name.replace(/^(\\/*)|(\\/*)$/g, '');\n\t}\n\n\tfunction each(obj, callback) {\n\t  if (obj && typeof obj.forEach === 'function') {\n\t    obj.forEach(callback);\n\t  } else if (isObject(obj)) {\n\t    Object.keys(obj).forEach(function (key) {\n\t      return callback(obj[key], key);\n\t    });\n\t  }\n\t}\n\n\tfunction some(value, callback) {\n\t  return Object.keys(value).map(function (key) {\n\t    return [value[key], key];\n\t  }).some(function (current) {\n\t    return callback.apply(undefined, _toConsumableArray(current));\n\t  });\n\t}\n\n\tfunction every(value, callback) {\n\t  return Object.keys(value).map(function (key) {\n\t    return [value[key], key];\n\t  }).every(function (current) {\n\t    return callback.apply(undefined, _toConsumableArray(current));\n\t  });\n\t}\n\n\tfunction keys(obj) {\n\t  return Object.keys(obj);\n\t}\n\n\tfunction values(obj) {\n\t  return _.keys(obj).map(function (key) {\n\t    return obj[key];\n\t  });\n\t}\n\n\tfunction isMatch(obj, item) {\n\t  return _.keys(item).every(function (key) {\n\t    return obj[key] === item[key];\n\t  });\n\t}\n\n\tfunction isEmpty(obj) {\n\t  return _.keys(obj).length === 0;\n\t}\n\n\tfunction isObject(item) {\n\t  return (typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && !Array.isArray(item) && item !== null;\n\t}\n\n\tfunction extend() {\n\t  return _extends.apply(undefined, arguments);\n\t}\n\n\tfunction omit(obj) {\n\t  var result = _.extend({}, obj);\n\n\t  for (var _len = arguments.length, keys = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t    keys[_key - 1] = arguments[_key];\n\t  }\n\n\t  keys.forEach(function (key) {\n\t    return delete result[key];\n\t  });\n\t  return result;\n\t}\n\n\tfunction pick(source) {\n\t  var result = {};\n\n\t  for (var _len2 = arguments.length, keys = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n\t    keys[_key2 - 1] = arguments[_key2];\n\t  }\n\n\t  keys.forEach(function (key) {\n\t    result[key] = source[key];\n\t  });\n\t  return result;\n\t}\n\n\tfunction merge(target, source) {\n\t  if (isObject(target) && isObject(source)) {\n\t    Object.keys(source).forEach(function (key) {\n\t      if (isObject(source[key])) {\n\t        if (!target[key]) _extends(target, _defineProperty({}, key, {}));\n\t        merge(target[key], source[key]);\n\t      } else {\n\t        _extends(target, _defineProperty({}, key, source[key]));\n\t      }\n\t    });\n\t  }\n\t  return target;\n\t}\n\n\tvar _ = exports._ = {\n\t  each: each,\n\t  some: some,\n\t  every: every,\n\t  keys: keys,\n\t  values: values,\n\t  isMatch: isMatch,\n\t  isEmpty: isEmpty,\n\t  isObject: isObject,\n\t  extend: extend,\n\t  omit: omit,\n\t  pick: pick,\n\t  merge: merge\n\t};\n\n\tvar specialFilters = exports.specialFilters = {\n\t  $in: function $in(key, ins) {\n\t    return function (current) {\n\t      return ins.indexOf(current[key]) !== -1;\n\t    };\n\t  },\n\t  $nin: function $nin(key, nins) {\n\t    return function (current) {\n\t      return nins.indexOf(current[key]) === -1;\n\t    };\n\t  },\n\t  $lt: function $lt(key, value) {\n\t    return function (current) {\n\t      return current[key] < value;\n\t    };\n\t  },\n\t  $lte: function $lte(key, value) {\n\t    return function (current) {\n\t      return current[key] <= value;\n\t    };\n\t  },\n\t  $gt: function $gt(key, value) {\n\t    return function (current) {\n\t      return current[key] > value;\n\t    };\n\t  },\n\t  $gte: function $gte(key, value) {\n\t    return function (current) {\n\t      return current[key] >= value;\n\t    };\n\t  },\n\t  $ne: function $ne(key, value) {\n\t    return function (current) {\n\t      return current[key] !== value;\n\t    };\n\t  }\n\t};\n\n\tfunction select(params) {\n\t  var fields = params && params.query && params.query.$select;\n\n\t  for (var _len3 = arguments.length, otherFields = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n\t    otherFields[_key3 - 1] = arguments[_key3];\n\t  }\n\n\t  if (Array.isArray(fields) && otherFields.length) {\n\t    fields.push.apply(fields, otherFields);\n\t  }\n\n\t  var convert = function convert(result) {\n\t    if (!Array.isArray(fields)) {\n\t      return result;\n\t    }\n\n\t    return _.pick.apply(_, [result].concat(_toConsumableArray(fields)));\n\t  };\n\n\t  return function (result) {\n\t    if (Array.isArray(result)) {\n\t      return result.map(convert);\n\t    }\n\n\t    return convert(result);\n\t  };\n\t}\n\n\tfunction matcher(originalQuery) {\n\t  var query = _.omit(originalQuery, '$limit', '$skip', '$sort', '$select');\n\n\t  return function (item) {\n\t    if (query.$or && _.some(query.$or, function (or) {\n\t      return matcher(or)(item);\n\t    })) {\n\t      return true;\n\t    }\n\n\t    return _.every(query, function (value, key) {\n\t      if (value !== null && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n\t        return _.every(value, function (target, filterType) {\n\t          if (specialFilters[filterType]) {\n\t            var filter = specialFilters[filterType](key, target);\n\t            return filter(item);\n\t          }\n\n\t          return false;\n\t        });\n\t      } else if (typeof item[key] !== 'undefined') {\n\t        return item[key] === query[key];\n\t      }\n\n\t      return false;\n\t    });\n\t  };\n\t}\n\n\tfunction sorter($sort) {\n\t  return function (first, second) {\n\t    var comparator = 0;\n\t    each($sort, function (modifier, key) {\n\t      modifier = parseInt(modifier, 10);\n\n\t      if (first[key] < second[key]) {\n\t        comparator -= 1 * modifier;\n\t      }\n\n\t      if (first[key] > second[key]) {\n\t        comparator += 1 * modifier;\n\t      }\n\t    });\n\t    return comparator;\n\t  };\n\t}\n\n\tfunction makeUrl(path) {\n\t  var app = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\t  var get = typeof app.get === 'function' ? app.get.bind(app) : function () {};\n\t  var env = get('env') || process.env.NODE_ENV;\n\t  var host = get('host') || process.env.HOST_NAME || 'localhost';\n\t  var protocol = env === 'development' || env === 'test' || env === undefined ? 'http' : 'https';\n\t  var PORT = get('port') || process.env.PORT || 3030;\n\t  var port = env === 'development' || env === 'test' || env === undefined ? ':' + PORT : '';\n\n\t  path = path || '';\n\n\t  return protocol + '://' + host + port + '/' + stripSlashes(path);\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\n\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\n\n\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\n\tfunction noop() {}\n\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\n\tprocess.listeners = function (name) { return [] }\n\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _utils = __webpack_require__(9);\n\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\n\tfunction getOrRemove(args) {\n\t  return {\n\t    id: args[0],\n\t    params: args[1],\n\t    callback: args[2]\n\t  };\n\t}\n\n\tfunction updateOrPatch(args) {\n\t  return {\n\t    id: args[0],\n\t    data: args[1],\n\t    params: args[2],\n\t    callback: args[3]\n\t  };\n\t}\n\n\tvar converters = {\n\t  find: function find(args) {\n\t    return {\n\t      params: args[0],\n\t      callback: args[1]\n\t    };\n\t  },\n\t  create: function create(args) {\n\t    return {\n\t      data: args[0],\n\t      params: args[1],\n\t      callback: args[2]\n\t    };\n\t  },\n\t  get: getOrRemove,\n\t  remove: getOrRemove,\n\t  update: updateOrPatch,\n\t  patch: updateOrPatch\n\t};\n\n\tfunction hookObject(method, type, args) {\n\t  var app = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n\t  var hook = converters[method](args);\n\n\t  hook.method = method;\n\t  hook.type = type;\n\n\t  if (typeof app === 'function') {\n\t    hook.app = app;\n\t  } else {\n\t    _extends(hook, app);\n\t  }\n\n\t  return hook;\n\t}\n\n\tfunction defaultMakeArguments(hook) {\n\t  var result = [];\n\t  if (typeof hook.id !== 'undefined') {\n\t    result.push(hook.id);\n\t  }\n\n\t  if (hook.data) {\n\t    result.push(hook.data);\n\t  }\n\n\t  result.push(hook.params || {});\n\t  result.push(hook.callback);\n\n\t  return result;\n\t}\n\n\tfunction makeArguments(hook) {\n\t  if (hook.method === 'find') {\n\t    return [hook.params, hook.callback];\n\t  }\n\n\t  if (hook.method === 'get' || hook.method === 'remove') {\n\t    return [hook.id, hook.params, hook.callback];\n\t  }\n\n\t  if (hook.method === 'update' || hook.method === 'patch') {\n\t    return [hook.id, hook.data, hook.params, hook.callback];\n\t  }\n\n\t  if (hook.method === 'create') {\n\t    return [hook.data, hook.params, hook.callback];\n\t  }\n\n\t  return defaultMakeArguments(hook);\n\t}\n\n\tfunction convertHookData(obj) {\n\t  var hook = {};\n\n\t  if (Array.isArray(obj)) {\n\t    hook = { all: obj };\n\t  } else if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') {\n\t    hook = { all: [obj] };\n\t  } else {\n\t    (0, _utils.each)(obj, function (value, key) {\n\t      hook[key] = !Array.isArray(value) ? [value] : value;\n\t    });\n\t  }\n\n\t  return hook;\n\t}\n\n\texports.default = {\n\t  hookObject: hookObject,\n\t  hook: hookObject,\n\t  converters: converters,\n\t  defaultMakeArguments: defaultMakeArguments,\n\t  makeArguments: makeArguments,\n\t  convertHookData: convertHookData\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tvar debug = __webpack_require__(13)('feathers-errors');\n\n\tfunction FeathersError(msg, name, code, className, data) {\n\t  msg = msg || 'Error';\n\n\t  var errors = void 0;\n\t  var message = void 0;\n\t  var newData = void 0;\n\n\t  if (msg instanceof Error) {\n\t    message = msg.message || 'Error';\n\n\t    // NOTE (EK): This is typically to handle validation errors\n\t    if (msg.errors) {\n\t      errors = msg.errors;\n\t    }\n\t  } else if ((typeof msg === 'undefined' ? 'undefined' : _typeof(msg)) === 'object') {\n\t    // Support plain old objects\n\t    message = msg.message || 'Error';\n\t    data = msg;\n\t  } else {\n\t    // message is just a string\n\t    message = msg;\n\t  }\n\n\t  Error.call(this, message);\n\n\t  if (data) {\n\t    // NOTE(EK): To make sure that we are not messing\n\t    // with immutable data, just make a copy.\n\t    // https://github.com/feathersjs/feathers-errors/issues/19\n\t    newData = JSON.parse(JSON.stringify(data));\n\n\t    if (newData.errors) {\n\t      errors = newData.errors;\n\t      delete newData.errors;\n\t    } else if (data.errors) {\n\t      // The errors property from data could be\n\t      // stripped away while cloning resulting newData not to have it\n\t      // For example: when cloning arrays this property\n\t      errors = JSON.parse(JSON.stringify(data.errors));\n\t    }\n\t  }\n\n\t  // NOTE (EK): Babel doesn't support this so\n\t  // we have to pass in the class name manually.\n\t  // this.name = this.constructor.name;\n\t  this.type = 'FeathersError';\n\t  this.name = name;\n\t  this.message = message;\n\t  this.code = code;\n\t  this.className = className;\n\t  this.data = newData;\n\t  this.errors = errors || {};\n\n\t  debug(this.name + '(' + this.code + '): ' + this.message);\n\t  debug(this.errors);\n\t}\n\n\tFeathersError.prototype = new Error();\n\n\t// NOTE (EK): A little hack to get around `message` not\n\t// being included in the default toJSON call.\n\tObject.defineProperty(FeathersError.prototype, 'toJSON', {\n\t  value: function value() {\n\t    return {\n\t      name: this.name,\n\t      message: this.message,\n\t      code: this.code,\n\t      className: this.className,\n\t      data: this.data,\n\t      errors: this.errors\n\t    };\n\t  }\n\t});\n\n\t// 400 - Bad Request\n\tfunction BadRequest(message, data) {\n\t  FeathersError.call(this, message, 'BadRequest', 400, 'bad-request', data);\n\t}\n\n\tBadRequest.prototype = new FeathersError();\n\n\t// 401 - Not Authenticated\n\tfunction NotAuthenticated(message, data) {\n\t  FeathersError.call(this, message, 'NotAuthenticated', 401, 'not-authenticated', data);\n\t}\n\n\tNotAuthenticated.prototype = new FeathersError();\n\n\t// 402 - Payment Error\n\tfunction PaymentError(message, data) {\n\t  FeathersError.call(this, message, 'PaymentError', 402, 'payment-error', data);\n\t}\n\n\tPaymentError.prototype = new FeathersError();\n\n\t// 403 - Forbidden\n\tfunction Forbidden(message, data) {\n\t  FeathersError.call(this, message, 'Forbidden', 403, 'forbidden', data);\n\t}\n\n\tForbidden.prototype = new FeathersError();\n\n\t// 404 - Not Found\n\tfunction NotFound(message, data) {\n\t  FeathersError.call(this, message, 'NotFound', 404, 'not-found', data);\n\t}\n\n\tNotFound.prototype = new FeathersError();\n\n\t// 405 - Method Not Allowed\n\tfunction MethodNotAllowed(message, data) {\n\t  FeathersError.call(this, message, 'MethodNotAllowed', 405, 'method-not-allowed', data);\n\t}\n\n\tMethodNotAllowed.prototype = new FeathersError();\n\n\t// 406 - Not Acceptable\n\tfunction NotAcceptable(message, data) {\n\t  FeathersError.call(this, message, 'NotAcceptable', 406, 'not-acceptable', data);\n\t}\n\n\tNotAcceptable.prototype = new FeathersError();\n\n\t// 408 - Timeout\n\tfunction Timeout(message, data) {\n\t  FeathersError.call(this, message, 'Timeout', 408, 'timeout', data);\n\t}\n\n\tTimeout.prototype = new FeathersError();\n\n\t// 409 - Conflict\n\tfunction Conflict(message, data) {\n\t  FeathersError.call(this, message, 'Conflict', 409, 'conflict', data);\n\t}\n\n\tConflict.prototype = new FeathersError();\n\n\t// 411 - Length Required\n\tfunction LengthRequired(message, data) {\n\t  FeathersError.call(this, message, 'LengthRequired', 411, 'length-required', data);\n\t}\n\n\tLengthRequired.prototype = new FeathersError();\n\n\t// 422 Unprocessable\n\tfunction Unprocessable(message, data) {\n\t  FeathersError.call(this, message, 'Unprocessable', 422, 'unprocessable', data);\n\t}\n\n\tUnprocessable.prototype = new FeathersError();\n\n\t// 429 Too Many Requests\n\tfunction TooManyRequests(message, data) {\n\t  FeathersError.call(this, message, 'TooManyRequests', 429, 'too-many-requests', data);\n\t}\n\n\tTooManyRequests.prototype = new FeathersError();\n\n\t// 500 - General Error\n\tfunction GeneralError(message, data) {\n\t  FeathersError.call(this, message, 'GeneralError', 500, 'general-error', data);\n\t}\n\n\tGeneralError.prototype = new FeathersError();\n\n\t// 501 - Not Implemented\n\tfunction NotImplemented(message, data) {\n\t  FeathersError.call(this, message, 'NotImplemented', 501, 'not-implemented', data);\n\t}\n\n\tNotImplemented.prototype = new FeathersError();\n\n\t// 502 - Bad Gateway\n\tfunction BadGateway(message, data) {\n\t  FeathersError.call(this, message, 'BadGateway', 502, 'bad-gateway', data);\n\t}\n\n\tBadGateway.prototype = new FeathersError();\n\n\t// 503 - Unavailable\n\tfunction Unavailable(message, data) {\n\t  FeathersError.call(this, message, 'Unavailable', 503, 'unavailable', data);\n\t}\n\n\tUnavailable.prototype = new FeathersError();\n\n\tvar errors = {\n\t  FeathersError: FeathersError,\n\t  BadRequest: BadRequest,\n\t  NotAuthenticated: NotAuthenticated,\n\t  PaymentError: PaymentError,\n\t  Forbidden: Forbidden,\n\t  NotFound: NotFound,\n\t  MethodNotAllowed: MethodNotAllowed,\n\t  NotAcceptable: NotAcceptable,\n\t  Timeout: Timeout,\n\t  Conflict: Conflict,\n\t  LengthRequired: LengthRequired,\n\t  Unprocessable: Unprocessable,\n\t  TooManyRequests: TooManyRequests,\n\t  GeneralError: GeneralError,\n\t  NotImplemented: NotImplemented,\n\t  BadGateway: BadGateway,\n\t  Unavailable: Unavailable,\n\t  400: BadRequest,\n\t  401: NotAuthenticated,\n\t  402: PaymentError,\n\t  403: Forbidden,\n\t  404: NotFound,\n\t  405: MethodNotAllowed,\n\t  406: NotAcceptable,\n\t  408: Timeout,\n\t  409: Conflict,\n\t  411: LengthRequired,\n\t  422: Unprocessable,\n\t  429: TooManyRequests,\n\t  500: GeneralError,\n\t  501: NotImplemented,\n\t  502: BadGateway,\n\t  503: Unavailable\n\t};\n\n\tfunction convert(error) {\n\t  if (!error) {\n\t    return error;\n\t  }\n\n\t  var FeathersError = errors[error.name];\n\t  var result = FeathersError ? new FeathersError(error.message, error.data) : new Error(error.message || error);\n\n\t  if ((typeof error === 'undefined' ? 'undefined' : _typeof(error)) === 'object') {\n\t    _extends(result, error);\n\t  }\n\n\t  return result;\n\t}\n\n\texports.default = _extends({\n\t  convert: convert,\n\t  types: errors,\n\t  errors: errors\n\t}, errors);\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * This is the web browser implementation of `debug()`.\n\t *\n\t * Expose `debug()` as the module.\n\t */\n\n\texports = module.exports = __webpack_require__(14);\n\texports.log = log;\n\texports.formatArgs = formatArgs;\n\texports.save = save;\n\texports.load = load;\n\texports.useColors = useColors;\n\texports.storage = 'undefined' != typeof chrome\n\t               && 'undefined' != typeof chrome.storage\n\t                  ? chrome.storage.local\n\t                  : localstorage();\n\n\t/**\n\t * Colors.\n\t */\n\n\texports.colors = [\n\t  'lightseagreen',\n\t  'forestgreen',\n\t  'goldenrod',\n\t  'dodgerblue',\n\t  'darkorchid',\n\t  'crimson'\n\t];\n\n\t/**\n\t * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n\t * and the Firebug extension (any Firefox version) are known\n\t * to support \"%c\" CSS customizations.\n\t *\n\t * TODO: add a `localStorage` variable to explicitly enable/disable colors\n\t */\n\n\tfunction useColors() {\n\t  // NB: In an Electron preload script, document will be defined but not fully\n\t  // initialized. Since we know we're in Chrome, we'll just detect this case\n\t  // explicitly\n\t  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n\t    return true;\n\t  }\n\n\t  // is webkit? http://stackoverflow.com/a/16459606/376773\n\t  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\t  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t    // is firebug? http://stackoverflow.com/a/398120/376773\n\t    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t    // is firefox >= v31?\n\t    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t    // double check webkit in userAgent just in case we are in a worker\n\t    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n\t}\n\n\t/**\n\t * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n\t */\n\n\texports.formatters.j = function(v) {\n\t  try {\n\t    return JSON.stringify(v);\n\t  } catch (err) {\n\t    return '[UnexpectedJSONParseError]: ' + err.message;\n\t  }\n\t};\n\n\n\t/**\n\t * Colorize log arguments if enabled.\n\t *\n\t * @api public\n\t */\n\n\tfunction formatArgs(args) {\n\t  var useColors = this.useColors;\n\n\t  args[0] = (useColors ? '%c' : '')\n\t    + this.namespace\n\t    + (useColors ? ' %c' : ' ')\n\t    + args[0]\n\t    + (useColors ? '%c ' : ' ')\n\t    + '+' + exports.humanize(this.diff);\n\n\t  if (!useColors) return;\n\n\t  var c = 'color: ' + this.color;\n\t  args.splice(1, 0, c, 'color: inherit')\n\n\t  // the final \"%c\" is somewhat tricky, because there could be other\n\t  // arguments passed either before or after the %c, so we need to\n\t  // figure out the correct index to insert the CSS into\n\t  var index = 0;\n\t  var lastC = 0;\n\t  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n\t    if ('%%' === match) return;\n\t    index++;\n\t    if ('%c' === match) {\n\t      // we only are interested in the *last* %c\n\t      // (the user may have provided their own)\n\t      lastC = index;\n\t    }\n\t  });\n\n\t  args.splice(lastC, 0, c);\n\t}\n\n\t/**\n\t * Invokes `console.log()` when available.\n\t * No-op when `console.log` is not a \"function\".\n\t *\n\t * @api public\n\t */\n\n\tfunction log() {\n\t  // this hackery is required for IE8/9, where\n\t  // the `console.log` function doesn't have 'apply'\n\t  return 'object' === typeof console\n\t    && console.log\n\t    && Function.prototype.apply.call(console.log, console, arguments);\n\t}\n\n\t/**\n\t * Save `namespaces`.\n\t *\n\t * @param {String} namespaces\n\t * @api private\n\t */\n\n\tfunction save(namespaces) {\n\t  try {\n\t    if (null == namespaces) {\n\t      exports.storage.removeItem('debug');\n\t    } else {\n\t      exports.storage.debug = namespaces;\n\t    }\n\t  } catch(e) {}\n\t}\n\n\t/**\n\t * Load `namespaces`.\n\t *\n\t * @return {String} returns the previously persisted debug modes\n\t * @api private\n\t */\n\n\tfunction load() {\n\t  var r;\n\t  try {\n\t    r = exports.storage.debug;\n\t  } catch(e) {}\n\n\t  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\t  if (!r && typeof process !== 'undefined' && 'env' in process) {\n\t    r = process.env.DEBUG;\n\t  }\n\n\t  return r;\n\t}\n\n\t/**\n\t * Enable namespaces listed in `localStorage.debug` initially.\n\t */\n\n\texports.enable(load());\n\n\t/**\n\t * Localstorage attempts to return the localstorage.\n\t *\n\t * This is necessary because safari throws\n\t * when a user disables cookies/localstorage\n\t * and you attempt to access it.\n\t *\n\t * @return {LocalStorage}\n\t * @api private\n\t */\n\n\tfunction localstorage() {\n\t  try {\n\t    return window.localStorage;\n\t  } catch (e) {}\n\t}\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)))\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/**\n\t * This is the common logic for both the Node.js and web browser\n\t * implementations of `debug()`.\n\t *\n\t * Expose `debug()` as the module.\n\t */\n\n\texports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\n\texports.coerce = coerce;\n\texports.disable = disable;\n\texports.enable = enable;\n\texports.enabled = enabled;\n\texports.humanize = __webpack_require__(15);\n\n\t/**\n\t * The currently active debug mode names, and names to skip.\n\t */\n\n\texports.names = [];\n\texports.skips = [];\n\n\t/**\n\t * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t *\n\t * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t */\n\n\texports.formatters = {};\n\n\t/**\n\t * Previous log timestamp.\n\t */\n\n\tvar prevTime;\n\n\t/**\n\t * Select a color.\n\t * @param {String} namespace\n\t * @return {Number}\n\t * @api private\n\t */\n\n\tfunction selectColor(namespace) {\n\t  var hash = 0, i;\n\n\t  for (i in namespace) {\n\t    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t    hash |= 0; // Convert to 32bit integer\n\t  }\n\n\t  return exports.colors[Math.abs(hash) % exports.colors.length];\n\t}\n\n\t/**\n\t * Create a debugger with the given `namespace`.\n\t *\n\t * @param {String} namespace\n\t * @return {Function}\n\t * @api public\n\t */\n\n\tfunction createDebug(namespace) {\n\n\t  function debug() {\n\t    // disabled?\n\t    if (!debug.enabled) return;\n\n\t    var self = debug;\n\n\t    // set `diff` timestamp\n\t    var curr = +new Date();\n\t    var ms = curr - (prevTime || curr);\n\t    self.diff = ms;\n\t    self.prev = prevTime;\n\t    self.curr = curr;\n\t    prevTime = curr;\n\n\t    // turn the `arguments` into a proper Array\n\t    var args = new Array(arguments.length);\n\t    for (var i = 0; i < args.length; i++) {\n\t      args[i] = arguments[i];\n\t    }\n\n\t    args[0] = exports.coerce(args[0]);\n\n\t    if ('string' !== typeof args[0]) {\n\t      // anything else let's inspect with %O\n\t      args.unshift('%O');\n\t    }\n\n\t    // apply any `formatters` transformations\n\t    var index = 0;\n\t    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n\t      // if we encounter an escaped % then don't increase the array index\n\t      if (match === '%%') return match;\n\t      index++;\n\t      var formatter = exports.formatters[format];\n\t      if ('function' === typeof formatter) {\n\t        var val = args[index];\n\t        match = formatter.call(self, val);\n\n\t        // now we need to remove `args[index]` since it's inlined in the `format`\n\t        args.splice(index, 1);\n\t        index--;\n\t      }\n\t      return match;\n\t    });\n\n\t    // apply env-specific formatting (colors, etc.)\n\t    exports.formatArgs.call(self, args);\n\n\t    var logFn = debug.log || exports.log || console.log.bind(console);\n\t    logFn.apply(self, args);\n\t  }\n\n\t  debug.namespace = namespace;\n\t  debug.enabled = exports.enabled(namespace);\n\t  debug.useColors = exports.useColors();\n\t  debug.color = selectColor(namespace);\n\n\t  // env-specific initialization logic for debug instances\n\t  if ('function' === typeof exports.init) {\n\t    exports.init(debug);\n\t  }\n\n\t  return debug;\n\t}\n\n\t/**\n\t * Enables a debug mode by namespaces. This can include modes\n\t * separated by a colon and wildcards.\n\t *\n\t * @param {String} namespaces\n\t * @api public\n\t */\n\n\tfunction enable(namespaces) {\n\t  exports.save(namespaces);\n\n\t  exports.names = [];\n\t  exports.skips = [];\n\n\t  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t  var len = split.length;\n\n\t  for (var i = 0; i < len; i++) {\n\t    if (!split[i]) continue; // ignore empty strings\n\t    namespaces = split[i].replace(/\\*/g, '.*?');\n\t    if (namespaces[0] === '-') {\n\t      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t    } else {\n\t      exports.names.push(new RegExp('^' + namespaces + '$'));\n\t    }\n\t  }\n\t}\n\n\t/**\n\t * Disable debug output.\n\t *\n\t * @api public\n\t */\n\n\tfunction disable() {\n\t  exports.enable('');\n\t}\n\n\t/**\n\t * Returns true if the given mode name is enabled, false otherwise.\n\t *\n\t * @param {String} name\n\t * @return {Boolean}\n\t * @api public\n\t */\n\n\tfunction enabled(name) {\n\t  var i, len;\n\t  for (i = 0, len = exports.skips.length; i < len; i++) {\n\t    if (exports.skips[i].test(name)) {\n\t      return false;\n\t    }\n\t  }\n\t  for (i = 0, len = exports.names.length; i < len; i++) {\n\t    if (exports.names[i].test(name)) {\n\t      return true;\n\t    }\n\t  }\n\t  return false;\n\t}\n\n\t/**\n\t * Coerce `val`.\n\t *\n\t * @param {Mixed} val\n\t * @return {Mixed}\n\t * @api private\n\t */\n\n\tfunction coerce(val) {\n\t  if (val instanceof Error) return val.stack || val.message;\n\t  return val;\n\t}\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Helpers.\n\t */\n\n\tvar s = 1000;\n\tvar m = s * 60;\n\tvar h = m * 60;\n\tvar d = h * 24;\n\tvar y = d * 365.25;\n\n\t/**\n\t * Parse or format the given `val`.\n\t *\n\t * Options:\n\t *\n\t *  - `long` verbose formatting [false]\n\t *\n\t * @param {String|Number} val\n\t * @param {Object} [options]\n\t * @throws {Error} throw an error if val is not a non-empty string or a number\n\t * @return {String|Number}\n\t * @api public\n\t */\n\n\tmodule.exports = function(val, options) {\n\t  options = options || {};\n\t  var type = typeof val;\n\t  if (type === 'string' && val.length > 0) {\n\t    return parse(val);\n\t  } else if (type === 'number' && isNaN(val) === false) {\n\t    return options.long ? fmtLong(val) : fmtShort(val);\n\t  }\n\t  throw new Error(\n\t    'val is not a non-empty string or a valid number. val=' +\n\t      JSON.stringify(val)\n\t  );\n\t};\n\n\t/**\n\t * Parse the given `str` and return milliseconds.\n\t *\n\t * @param {String} str\n\t * @return {Number}\n\t * @api private\n\t */\n\n\tfunction parse(str) {\n\t  str = String(str);\n\t  if (str.length > 100) {\n\t    return;\n\t  }\n\t  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n\t    str\n\t  );\n\t  if (!match) {\n\t    return;\n\t  }\n\t  var n = parseFloat(match[1]);\n\t  var type = (match[2] || 'ms').toLowerCase();\n\t  switch (type) {\n\t    case 'years':\n\t    case 'year':\n\t    case 'yrs':\n\t    case 'yr':\n\t    case 'y':\n\t      return n * y;\n\t    case 'days':\n\t    case 'day':\n\t    case 'd':\n\t      return n * d;\n\t    case 'hours':\n\t    case 'hour':\n\t    case 'hrs':\n\t    case 'hr':\n\t    case 'h':\n\t      return n * h;\n\t    case 'minutes':\n\t    case 'minute':\n\t    case 'mins':\n\t    case 'min':\n\t    case 'm':\n\t      return n * m;\n\t    case 'seconds':\n\t    case 'second':\n\t    case 'secs':\n\t    case 'sec':\n\t    case 's':\n\t      return n * s;\n\t    case 'milliseconds':\n\t    case 'millisecond':\n\t    case 'msecs':\n\t    case 'msec':\n\t    case 'ms':\n\t      return n;\n\t    default:\n\t      return undefined;\n\t  }\n\t}\n\n\t/**\n\t * Short format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\tfunction fmtShort(ms) {\n\t  if (ms >= d) {\n\t    return Math.round(ms / d) + 'd';\n\t  }\n\t  if (ms >= h) {\n\t    return Math.round(ms / h) + 'h';\n\t  }\n\t  if (ms >= m) {\n\t    return Math.round(ms / m) + 'm';\n\t  }\n\t  if (ms >= s) {\n\t    return Math.round(ms / s) + 's';\n\t  }\n\t  return ms + 'ms';\n\t}\n\n\t/**\n\t * Long format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\tfunction fmtLong(ms) {\n\t  return plural(ms, d, 'day') ||\n\t    plural(ms, h, 'hour') ||\n\t    plural(ms, m, 'minute') ||\n\t    plural(ms, s, 'second') ||\n\t    ms + ' ms';\n\t}\n\n\t/**\n\t * Pluralization helper.\n\t */\n\n\tfunction plural(ms, n, name) {\n\t  if (ms < n) {\n\t    return;\n\t  }\n\t  if (ms < n * 1.5) {\n\t    return Math.floor(ms / n) + ' ' + name;\n\t  }\n\t  return Math.ceil(ms / n) + ' ' + name + 's';\n\t}\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _utils = __webpack_require__(9);\n\n\tvar _resource = __webpack_require__(17);\n\n\tvar _resource2 = _interopRequireDefault(_resource);\n\n\tvar _list = __webpack_require__(19);\n\n\tvar _list2 = _interopRequireDefault(_list);\n\n\tvar _strategies = __webpack_require__(20);\n\n\tvar _strategies2 = _interopRequireDefault(_strategies);\n\n\tvar _utils2 = __webpack_require__(18);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar debug = __webpack_require__(13)('feathers-reactive');\n\n\tfunction FeathersRx(Rx, options) {\n\t  if (!Rx) {\n\t    throw new Error('You have to pass an instance of RxJS as the first paramter.');\n\t  }\n\n\t  if (!Rx.Observable) {\n\t    throw new Error('The RxJS instance does not seem to provide an `Observable` type.');\n\t  }\n\n\t  var listStrategies = (0, _strategies2.default)(Rx);\n\n\t  options = Object.assign({\n\t    idField: 'id',\n\t    dataField: 'data',\n\t    sorter: _utils2.makeSorter,\n\t    lazy: false,\n\t    matcher: _utils.matcher,\n\t    // Whether to requery service when a change is detected\n\t    listStrategy: 'smart',\n\t    listStrategies: listStrategies\n\t  }, options);\n\n\t  var mixin = function mixin(service) {\n\t    var app = this;\n\t    var mixin = {\n\t      rx: function rx() {\n\t        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t        this._rx = options;\n\t        return this;\n\t      }\n\t    };\n\t    var events = {\n\t      created: Rx.Observable.fromEvent(service, 'created'),\n\t      updated: Rx.Observable.fromEvent(service, 'updated'),\n\t      patched: Rx.Observable.fromEvent(service, 'patched'),\n\t      removed: Rx.Observable.fromEvent(service, 'removed')\n\t    };\n\n\t    app.methods.forEach(function (method) {\n\t      if (typeof service[method] === 'function') {\n\t        mixin[method] = method === 'find' ? (0, _list2.default)(Rx, events, options) : (0, _resource2.default)(Rx, events, options, method);\n\t      }\n\t    });\n\n\t    service.mixin(mixin);\n\t  };\n\n\t  return function () {\n\t    debug('Initializing feathers-reactive plugin');\n\n\t    this.mixins.push(mixin);\n\t  };\n\t}\n\n\tFeathersRx.strategy = _strategies2.default;\n\n\texports.default = FeathersRx;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.paramsPositions = undefined;\n\n\texports.default = function (Rx, events, settings, method) {\n\t  return function () {\n\t    var args = arguments;\n\t    var position = typeof paramsPositions[method] !== 'undefined' ? paramsPositions[method] : 1;\n\t    var params = arguments[position] || {};\n\n\t    if (this._rx === false || params.rx === false) {\n\t      return this._super.apply(this, _toConsumableArray(args));\n\t    }\n\n\t    var options = (0, _utils.getOptions)(settings, this._rx, params.rx);\n\t    var source = (0, _utils.getSource)(Rx, options.lazy, this._super.bind(this), args);\n\t    var stream = source.concat(source.exhaustMap(function (data) {\n\t      // Filter only data with the same id\n\t      var filter = function filter(current) {\n\t        return current[options.idField] === data[options.idField];\n\t      };\n\t      // `removed` events get special treatment\n\t      var filteredRemoves = events.removed.filter(filter);\n\t      // `created`, `updated` and `patched`\n\t      var filteredEvents = Rx.Observable.merge(events.created, events.updated, events.patched).filter(filter);\n\n\t      return Rx.Observable.merge(\n\t      // Map to a callback that merges old and new data\n\t      filteredEvents,\n\t      // filtered `removed` events always map to a function that returns `null`\n\t      filteredRemoves.map(function () {\n\t        return null;\n\t      }));\n\t    }));\n\n\t    return (0, _utils.promisify)(stream);\n\t  };\n\t};\n\n\tvar _utils = __webpack_require__(18);\n\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\t// The position of the params parameters for a service method so that we can extend them\n\t// default is 1\n\tvar paramsPositions = exports.paramsPositions = {\n\t  update: 2,\n\t  patch: 2\n\t};\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\texports.getSource = getSource;\n\texports.promisify = promisify;\n\texports.makeSorter = makeSorter;\n\texports.getOptions = getOptions;\n\n\tvar _utils = __webpack_require__(9);\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\tfunction getSource(Rx, lazy, __super, args) {\n\t  if (lazy === true) {\n\t    var _ret = function () {\n\t      var result = null;\n\n\t      return {\n\t        v: Rx.Observable.create(function (observer) {\n\t          var _observer = observer;\n\n\t          if (!result) {\n\t            result = __super.apply(undefined, _toConsumableArray(args));\n\t          }\n\n\t          if (!result || typeof result.then !== 'function' || typeof result.catch !== 'function') {\n\t            throw new Error('feathers-reactive only works with services that return a Promise');\n\t          }\n\n\t          result.then(function (res) {\n\t            _observer.next(res);\n\t            _observer.complete();\n\t          }).catch(function (e) {\n\t            return _observer.error(e);\n\t          });\n\t        })\n\t      };\n\t    }();\n\n\t    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t  }\n\n\t  return Rx.Observable.fromPromise(__super.apply(undefined, _toConsumableArray(args)));\n\t}\n\n\tfunction promisify(stream) {\n\t  return Object.assign(stream, {\n\t    then: function then() {\n\t      var _first$toPromise;\n\n\t      return (_first$toPromise = this.first().toPromise()).then.apply(_first$toPromise, arguments);\n\t    },\n\t    catch: function _catch() {\n\t      var _first$toPromise2;\n\n\t      return (_first$toPromise2 = this.first().toPromise()).catch.apply(_first$toPromise2, arguments);\n\t    }\n\t  });\n\t}\n\n\tfunction makeSorter(query, options) {\n\t  // The sort function (if $sort is set)\n\t  var sorter = query.$sort ? (0, _utils.sorter)(query.$sort) : (0, _utils.sorter)(_defineProperty({}, options.idField, 1));\n\n\t  return function (result) {\n\t    var isPaginated = !!result[options.dataField];\n\t    var data = isPaginated ? result[options.dataField] : result;\n\n\t    if (sorter) {\n\t      data = data.sort(sorter);\n\t    }\n\n\t    var limit = typeof result.limit === 'number' ? result.limit : parseInt(query.$limit, 10);\n\n\t    if (limit && !isNaN(limit)) {\n\t      data = data.slice(0, limit);\n\t    }\n\n\t    if (isPaginated) {\n\t      result[options.dataField] = data;\n\t    } else {\n\t      result = data;\n\t    }\n\n\t    return result;\n\t  };\n\t}\n\n\tfunction getOptions(base) {\n\t  for (var _len = arguments.length, others = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t    others[_key - 1] = arguments[_key];\n\t  }\n\n\t  var options = Object.assign.apply(Object, [{}, base].concat(others));\n\n\t  if (typeof options.listStrategy === 'string') {\n\t    options.listStrategy = options.listStrategies[options.listStrategy];\n\t  }\n\n\t  return options;\n\t}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\texports.default = function (Rx, events, settings) {\n\t  return function () {\n\t    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t    var args = arguments;\n\n\t    if (this._rx === false || params.rx === false) {\n\t      return this._super.apply(this, _toConsumableArray(args));\n\t    }\n\n\t    var options = (0, _utils.getOptions)(settings, this._rx, params.rx);\n\t    var source = (0, _utils.getSource)(Rx, options.lazy, this._super.bind(this), arguments);\n\t    var stream = options.listStrategy.call(this, source, events, options, args);\n\n\t    return (0, _utils.promisify)(stream);\n\t  };\n\t};\n\n\tvar _utils = __webpack_require__(18);\n\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\texports.default = function (Rx) {\n\t  return {\n\t    never: function never(source) {\n\t      return source;\n\t    },\n\t    always: function always(source, events, options, args) {\n\t      var params = args[0] || {};\n\t      var query = Object.assign({}, params.query);\n\t      var _super = this._super.bind(this);\n\n\t      // A function that returns if an item matches the query\n\t      var matches = options.matcher(query);\n\t      // A function that sorts a limits a result (paginated or not)\n\t      var sortAndTrim = options.sorter(query, options);\n\n\t      return source.concat(source.exhaustMap(function () {\n\t        return Rx.Observable.merge(events.created.filter(matches), events.removed, events.updated, events.patched).flatMap(function () {\n\t          var source = Rx.Observable.fromPromise(_super.apply(undefined, _toConsumableArray(args)));\n\n\t          return source.map(sortAndTrim);\n\t        });\n\t      }));\n\t    },\n\t    smart: function smart(source, events, options, args) {\n\t      var params = args[0] || {};\n\t      var query = Object.assign({}, params.query);\n\t      // A function that returns if an item matches the query\n\t      var matches = options.matcher(query);\n\t      // A function that sorts a limits a result (paginated or not)\n\t      var sortAndTrim = options.sorter(query, options);\n\t      var onCreated = function onCreated(eventData) {\n\t        return function (page) {\n\t          var isPaginated = !!page[options.dataField];\n\t          var process = function process(data) {\n\t            return data.concat(eventData);\n\t          };\n\n\t          if (isPaginated) {\n\t            return Object.assign({}, page, _defineProperty({\n\t              total: page.total + 1\n\t            }, options.dataField, process(page[options.dataField])));\n\t          }\n\n\t          return process(page);\n\t        };\n\t      };\n\t      var onRemoved = function onRemoved(eventData) {\n\t        return function (page) {\n\t          var isPaginated = !!page[options.dataField];\n\t          var process = function process(data) {\n\t            return data.filter(function (current) {\n\t              return eventData[options.idField] !== current[options.idField];\n\t            });\n\t          };\n\n\t          if (isPaginated) {\n\t            return Object.assign({}, page, _defineProperty({\n\t              total: matches(eventData) ? page.total - 1 : page.total\n\t            }, options.dataField, process(page[options.dataField])));\n\t          }\n\n\t          return process(page);\n\t        };\n\t      };\n\t      var onUpdated = function onUpdated(eventData) {\n\t        return function (page) {\n\t          var isPaginated = !!page[options.dataField];\n\t          var length = isPaginated ? page[options.dataField].length : page.length;\n\t          var process = function process(data) {\n\t            return data.filter(function (current) {\n\t              return eventData[options.idField] !== current[options.idField];\n\t            }).concat(eventData).filter(matches);\n\t          };\n\n\t          if (isPaginated) {\n\t            var processed = process(page[options.dataField]);\n\t            return Object.assign({}, page, _defineProperty({\n\t              // Total can be either decreased or increased based\n\t              // on if the update removed or added the item to the list\n\t              total: page.total - (length - processed.length)\n\t            }, options.dataField, processed));\n\t          }\n\n\t          return process(page);\n\t        };\n\t      };\n\n\t      return source.concat(source.exhaustMap(function (data) {\n\t        return Rx.Observable.merge(events.created.filter(matches).map(onCreated), events.removed.map(onRemoved), Rx.Observable.merge(events.updated, events.patched).map(onUpdated)).scan(function (current, callback) {\n\t          return sortAndTrim(callback(current));\n\t        }, data);\n\t      }));\n\t    }\n\t  };\n\t};\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = feathersAuth;\n\n\tvar _feathers = __webpack_require__(2);\n\n\tvar _feathers2 = _interopRequireDefault(_feathers);\n\n\tfunction _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : { default: obj };\n\t}\n\n\tfunction feathersAuth(app, provider, authStorage, $rootScope) {\n\t    app.configure(_feathers2.default.authentication({\n\t        storage: authStorage\n\t    }));\n\n\t    app.tokenAuth = function () {\n\t        return provider.app.authenticate({\n\t            type: 'token',\n\t            'token': window.localStorage['feathers-jwt']\n\t        }).then(function (result) {\n\t            console.info('jwt authenticated at ', Date.now());\n\t            $rootScope.user = result.data;\n\t            return true;\n\t        }).catch(function (error) {\n\t            console.error('Error authenticating!', error);\n\t            provider.app.logout();\n\t            return false;\n\t        });\n\t    };\n\n\t    app.localAuth = function (user, pass) {\n\t        return provider.app.authenticate({\n\t            type: 'local',\n\t            'username': user,\n\t            'password': pass\n\t        }).then(function (result) {\n\t            console.log('Authenticated!', result);\n\t            $rootScope.user = result.data;\n\t            $rootScope.authenticated = true;\n\t            $rootScope.token = result['token'];\n\t            return result;\n\t        }).catch(function (error) {\n\t            console.error('Error authenticating!', error);\n\t            that.app.tokenLogout();\n\t            return error;\n\t        });\n\t    };\n\n\t    app.tokenLogout = function () {\n\t        provider.app.logout();\n\t        window.localStorage.removeItem('feathers-jwt');\n\t        $rootScope.authenticated = false;\n\t        $rootScope.user = null;\n\t        $rootScope.token = null;\n\t        console.log('Logged out.');\n\t    };\n\n\t    return app;\n\t}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = setupUtilityFunctions;\n\tfunction setupUtilityFunctions(app, $mdToast, $rootScope) {\n\n\t    app.showToast = function (msg, toastClass, delay) {\n\t        if (!toastClass) var toastClass = '';\n\t        if (!delay) var delay = 3000;\n\n\t        var toast = $mdToast.simple().textContent(msg).action('Hide').hideDelay(delay).position('bottom left').highlightAction(false).toastClass(toastClass);\n\t        $mdToast.show(toast);\n\t        console.debug('showToast ', toastClass, msg);\n\t    };\n\n\t    $rootScope.showToast = function (a, b, c) {\n\t        app.showToast(a, b, c); //Legacy support\n\t    };\n\n\t    return app;\n\t}\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\n\t// load the styles\n\tvar content = __webpack_require__(24);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(26)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./styles.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(25)(undefined);\n\t// imports\n\n\n\t// module\n\texports.push([module.id, \"md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.activityPaymentSummaryCard{margin-bottom:8px;margin-top:8px;background:none;box-shadow:none;position:relative}.paymentSummaryCard{min-width:100%;margin-bottom:8px;margin-right:16px;margin-top:8px;background:none;box-shadow:none}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:16px;padding-left:16px}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:16px}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;outline:none}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.activityCardForm{margin:0 16px}.activityForm{padding-left:24px;padding-right:16px}.questionForm{padding-left:16px;padding-right:40px}.formHeader{padding:16px 12px 16px 0;margin:0;font-weight:500}.formHeader,.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{height:24px;width:24px;margin-left:8px}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:4px 0}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}ng-md-icon{margin:0!important}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.toUppercase{text-transform:uppercase}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.inputStatusIcon{height:24px;width:24px;margin-bottom:16px!important;margin-right:12px!important}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}\", \"\"]);\n\n\t// exports\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\n\t/*\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\n\t\tAuthor Tobias Koppers @sokra\n\t*/\n\t// css base code, injected by the css-loader\n\tmodule.exports = function(useSourceMap) {\n\t\tvar list = [];\n\n\t\t// return the list of modules as css string\n\t\tlist.toString = function toString() {\n\t\t\treturn this.map(function (item) {\n\t\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\t\tif(item[2]) {\n\t\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t\t} else {\n\t\t\t\t\treturn content;\n\t\t\t\t}\n\t\t\t}).join(\"\");\n\t\t};\n\n\t\t// import a list of modules into the list\n\t\tlist.i = function(modules, mediaQuery) {\n\t\t\tif(typeof modules === \"string\")\n\t\t\t\tmodules = [[null, modules, \"\"]];\n\t\t\tvar alreadyImportedModules = {};\n\t\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\t\tvar id = this[i][0];\n\t\t\t\tif(typeof id === \"number\")\n\t\t\t\t\talreadyImportedModules[id] = true;\n\t\t\t}\n\t\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\t\tvar item = modules[i];\n\t\t\t\t// skip already imported module\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tlist.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn list;\n\t};\n\n\tfunction cssWithMappingToString(item, useSourceMap) {\n\t\tvar content = item[1] || '';\n\t\tvar cssMapping = item[3];\n\t\tif (!cssMapping) {\n\t\t\treturn content;\n\t\t}\n\n\t\tif (useSourceMap && typeof btoa === 'function') {\n\t\t\tvar sourceMapping = toComment(cssMapping);\n\t\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t\t});\n\n\t\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t\t}\n\n\t\treturn [content].join('\\n');\n\t}\n\n\t// Adapted from convert-source-map (MIT)\n\tfunction toComment(sourceMap) {\n\t\t// eslint-disable-next-line no-undef\n\t\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\t\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\t\treturn '/*# ' + data + ' */';\n\t}\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\n\t\tAuthor Tobias Koppers @sokra\n\t*/\n\tvar stylesInDom = {},\n\t\tmemoize = function(fn) {\n\t\t\tvar memo;\n\t\t\treturn function () {\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\t\treturn memo;\n\t\t\t};\n\t\t},\n\t\tisOldIE = memoize(function() {\n\t\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t\t// to operate correctly into non-standard environments\n\t\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\t\treturn window && document && document.all && !window.atob;\n\t\t}),\n\t\tgetElement = (function(fn) {\n\t\t\tvar memo = {};\n\t\t\treturn function(selector) {\n\t\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t\t}\n\t\t\t\treturn memo[selector]\n\t\t\t};\n\t\t})(function (styleTarget) {\n\t\t\treturn document.querySelector(styleTarget)\n\t\t}),\n\t\tsingletonElement = null,\n\t\tsingletonCounter = 0,\n\t\tstyleElementsInsertedAtTop = [],\n\t\tfixUrls = __webpack_require__(27);\n\n\tmodule.exports = function(list, options) {\n\t\tif(false) {\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t\t}\n\n\t\toptions = options || {};\n\t\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t\t// tags it will allow on a page\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t\t// By default, add <style> tags to the <head> element\n\t\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t\t// By default, add <style> tags to the bottom of the target\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\t\tvar styles = listToStyles(list);\n\t\taddStylesToDom(styles, options);\n\n\t\treturn function update(newList) {\n\t\t\tvar mayRemove = [];\n\t\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\t\tvar item = styles[i];\n\t\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\t\tdomStyle.refs--;\n\t\t\t\tmayRemove.push(domStyle);\n\t\t\t}\n\t\t\tif(newList) {\n\t\t\t\tvar newStyles = listToStyles(newList);\n\t\t\t\taddStylesToDom(newStyles, options);\n\t\t\t}\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\t\tvar domStyle = mayRemove[i];\n\t\t\t\tif(domStyle.refs === 0) {\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n\tfunction addStylesToDom(styles, options) {\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tif(domStyle) {\n\t\t\t\tdomStyle.refs++;\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t\t}\n\t\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar parts = [];\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t\t}\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction listToStyles(list) {\n\t\tvar styles = [];\n\t\tvar newStyles = {};\n\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i];\n\t\t\tvar id = item[0];\n\t\t\tvar css = item[1];\n\t\t\tvar media = item[2];\n\t\t\tvar sourceMap = item[3];\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\t\tif(!newStyles[id])\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\t\telse\n\t\t\t\tnewStyles[id].parts.push(part);\n\t\t}\n\t\treturn styles;\n\t}\n\n\tfunction insertStyleElement(options, styleElement) {\n\t\tvar styleTarget = getElement(options.insertInto)\n\t\tif (!styleTarget) {\n\t\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t\t}\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\t\tif (options.insertAt === \"top\") {\n\t\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t\t} else {\n\t\t\t\tstyleTarget.appendChild(styleElement);\n\t\t\t}\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t\t} else if (options.insertAt === \"bottom\") {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t} else {\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t\t}\n\t}\n\n\tfunction removeStyleElement(styleElement) {\n\t\tstyleElement.parentNode.removeChild(styleElement);\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\t\tif(idx >= 0) {\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t\t}\n\t}\n\n\tfunction createStyleElement(options) {\n\t\tvar styleElement = document.createElement(\"style\");\n\t\toptions.attrs.type = \"text/css\";\n\n\t\tattachTagAttrs(styleElement, options.attrs);\n\t\tinsertStyleElement(options, styleElement);\n\t\treturn styleElement;\n\t}\n\n\tfunction createLinkElement(options) {\n\t\tvar linkElement = document.createElement(\"link\");\n\t\toptions.attrs.type = \"text/css\";\n\t\toptions.attrs.rel = \"stylesheet\";\n\n\t\tattachTagAttrs(linkElement, options.attrs);\n\t\tinsertStyleElement(options, linkElement);\n\t\treturn linkElement;\n\t}\n\n\tfunction attachTagAttrs(element, attrs) {\n\t\tObject.keys(attrs).forEach(function (key) {\n\t\t\telement.setAttribute(key, attrs[key]);\n\t\t});\n\t}\n\n\tfunction addStyle(obj, options) {\n\t\tvar styleElement, update, remove;\n\n\t\tif (options.singleton) {\n\t\t\tvar styleIndex = singletonCounter++;\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t\t} else if(obj.sourceMap &&\n\t\t\ttypeof URL === \"function\" &&\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\t\ttypeof Blob === \"function\" &&\n\t\t\ttypeof btoa === \"function\") {\n\t\t\tstyleElement = createLinkElement(options);\n\t\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\t\tremove = function() {\n\t\t\t\tremoveStyleElement(styleElement);\n\t\t\t\tif(styleElement.href)\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t\t};\n\t\t} else {\n\t\t\tstyleElement = createStyleElement(options);\n\t\t\tupdate = applyToTag.bind(null, styleElement);\n\t\t\tremove = function() {\n\t\t\t\tremoveStyleElement(styleElement);\n\t\t\t};\n\t\t}\n\n\t\tupdate(obj);\n\n\t\treturn function updateStyle(newObj) {\n\t\t\tif(newObj) {\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\t\treturn;\n\t\t\t\tupdate(obj = newObj);\n\t\t\t} else {\n\t\t\t\tremove();\n\t\t\t}\n\t\t};\n\t}\n\n\tvar replaceText = (function () {\n\t\tvar textStore = [];\n\n\t\treturn function (index, replacement) {\n\t\t\ttextStore[index] = replacement;\n\t\t\treturn textStore.filter(Boolean).join('\\n');\n\t\t};\n\t})();\n\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\t\tvar css = remove ? \"\" : obj.css;\n\n\t\tif (styleElement.styleSheet) {\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t\t} else {\n\t\t\tvar cssNode = document.createTextNode(css);\n\t\t\tvar childNodes = styleElement.childNodes;\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\t\tif (childNodes.length) {\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t\t} else {\n\t\t\t\tstyleElement.appendChild(cssNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction applyToTag(styleElement, obj) {\n\t\tvar css = obj.css;\n\t\tvar media = obj.media;\n\n\t\tif(media) {\n\t\t\tstyleElement.setAttribute(\"media\", media)\n\t\t}\n\n\t\tif(styleElement.styleSheet) {\n\t\t\tstyleElement.styleSheet.cssText = css;\n\t\t} else {\n\t\t\twhile(styleElement.firstChild) {\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t\t}\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\n\t\t}\n\t}\n\n\tfunction updateLink(linkElement, options, obj) {\n\t\tvar css = obj.css;\n\t\tvar sourceMap = obj.sourceMap;\n\n\t\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t\t*/\n\t\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\t\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\t\tcss = fixUrls(css);\n\t\t}\n\n\t\tif(sourceMap) {\n\t\t\t// http://stackoverflow.com/a/26603875\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t\t}\n\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\t\tvar oldSrc = linkElement.href;\n\n\t\tlinkElement.href = URL.createObjectURL(blob);\n\n\t\tif(oldSrc)\n\t\t\tURL.revokeObjectURL(oldSrc);\n\t}\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n\t\n\t/**\n\t * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n\t * embed the css on the page. This breaks all relative urls because now they are relative to a\n\t * bundle instead of the current page.\n\t *\n\t * One solution is to only use full urls, but that may be impossible.\n\t *\n\t * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n\t *\n\t * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n\t *\n\t */\n\n\tmodule.exports = function (css) {\n\t  // get current location\n\t  var location = typeof window !== \"undefined\" && window.location;\n\n\t  if (!location) {\n\t    throw new Error(\"fixUrls requires window.location\");\n\t  }\n\n\t\t// blank or null?\n\t\tif (!css || typeof css !== \"string\") {\n\t\t  return css;\n\t  }\n\n\t  var baseUrl = location.protocol + \"//\" + location.host;\n\t  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t\t// convert each url(...)\n\t\t/*\n\t\tThis regular expression is just a way to recursively match brackets within\n\t\ta string.\n\n\t\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t\t   (  = Start a capturing group\n\t\t     (?:  = Start a non-capturing group\n\t\t         [^)(]  = Match anything that isn't a parentheses\n\t\t         |  = OR\n\t\t         \\(  = Match a start parentheses\n\t\t             (?:  = Start another non-capturing groups\n\t\t                 [^)(]+  = Match anything that isn't a parentheses\n\t\t                 |  = OR\n\t\t                 \\(  = Match a start parentheses\n\t\t                     [^)(]*  = Match anything that isn't a parentheses\n\t\t                 \\)  = Match a end parentheses\n\t\t             )  = End Group\n\t              *\\) = Match anything and then a close parens\n\t          )  = Close non-capturing group\n\t          *  = Match anything\n\t       )  = Close capturing group\n\t\t \\)  = Match a close parens\n\n\t\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t\t */\n\t\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t\t// strip quotes (if they exist)\n\t\t\tvar unquotedOrigUrl = origUrl\n\t\t\t\t.trim()\n\t\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t\t// already a full url? no change\n\t\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t\t  return fullMatch;\n\t\t\t}\n\n\t\t\t// convert the url to a full url\n\t\t\tvar newUrl;\n\n\t\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t\t  \t//TODO: should we add protocol?\n\t\t\t\tnewUrl = unquotedOrigUrl;\n\t\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t\t// path should be relative to the base url\n\t\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t\t} else {\n\t\t\t\t// path should be relative to current directory\n\t\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t\t}\n\n\t\t\t// send back the fixed url(...)\n\t\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t\t});\n\n\t\t// send back the fixed css\n\t\treturn fixedCss;\n\t};\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = rest;\n\n\tvar _jquery = __webpack_require__(29);\n\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\n\tfunction _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : { default: obj };\n\t}\n\n\tfunction rest(app, $http) {\n\t    var that = {};\n\t    //('/api/v1/', '?clients', p);\n\t    var Rx = window.Rx;\n\t    app.api = {\n\t        get: function get(endPoint, query, url, key) {\n\t            var searchString = _jquery2.default.param(query);\n\t            // console.log(url || app.endpoint + endPoint + searchString);\n\t            return Rx.Observable.fromPromise($http({\n\t                method: 'GET',\n\t                url: url || app.endpoint + endPoint + searchString,\n\t                headers: {\n\t                    'X-ABL-Access-Key': key || app.apiKey,\n\t                    'X-ABL-Date': Date.parse(new Date().toISOString())\n\t                }\n\t            })).catch(function (response) {\n\t                console.log('$abl.api:GET ERROR', response);\n\n\t                //cacheResponse(response);\n\t                return Rx.Observable.empty();\n\t            }).select(function (response) {\n\t                console.log('$abl.api:GET SUCCESS', response.data.list);\n\t                return response.data.list;\n\t            });\n\t        }\n\n\t        //Feathers localstorage cache service\n\t    };var cache = app.service('cache');\n\n\t    cache.on('created', function (message) {\n\t        console.log('$abl.cache:PUT', message);\n\t    });\n\t    app.cache = cache;\n\t    app.cache.put = function (d) {\n\t        cache.create(d);\n\t    };\n\t    //     find: function (q) {\n\t    //         return Rx.Observable\n\t    //             .fromPromise(cache.find(q))\n\t    //             .map(function (response) {\n\t    //                 console.log('$abl.cache:FIND', q, response);\n\t    //                 return response;\n\t    //             });\n\t    //     },\n\t    //     get: cache.get\n\t    // }\n\n\n\t    //         var query = {\n\t    //   clients: {\n\t    //     $in: ['ddddddd']\n\t    //   }\n\t    // }\n\n\t    // $abl.services.cache.find({\n\t    //   query\n\t    // }).then(function (result) {\n\t    //   console.log(result);\n\t    // });\n\n\n\t    return app;\n\t}\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = jQuery;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = toUpper;\n\tfunction toUpper() {\n\t    return {\n\t        require: 'ngModel',\n\t        link: function link(scope, element, attrs, modelCtrl) {\n\t            var capitalize = function capitalize(inputValue) {\n\t                if (inputValue == undefined) inputValue = '';\n\t                var capitalized = inputValue.toUpperCase();\n\t                if (capitalized !== inputValue) {\n\t                    modelCtrl.$setViewValue(capitalized);\n\t                    modelCtrl.$render();\n\t                }\n\t                return capitalized;\n\t            };\n\n\t            modelCtrl.$parsers.push(capitalize);\n\t            capitalize(scope[attrs.ngModel]); // capitalize initial value\n\t        }\n\t    };\n\t}\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _activityTotal = __webpack_require__(32);\n\n\tvar _activityTotal2 = _interopRequireDefault(_activityTotal);\n\n\tvar _activityForms = __webpack_require__(33);\n\n\tvar _activityForms2 = _interopRequireDefault(_activityForms);\n\n\tvar _activityBook = __webpack_require__(34);\n\n\tvar _activityBook2 = _interopRequireDefault(_activityBook);\n\n\tvar _activityBookValidators = __webpack_require__(35);\n\n\tvar _activityBookValidators2 = _interopRequireDefault(_activityBookValidators);\n\n\tfunction _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : { default: obj };\n\t}\n\n\texports.default = angular.module('activity-book', ['ngMaterial', 'rx']).run([\"$templateCache\", function ($templateCache) {\n\t    $templateCache.put('activity-forms.html', _activityForms2.default);\n\t    $templateCache.put('activity-book.html', _activityBook2.default);\n\t    $templateCache.put('activity-total.html', _activityTotal2.default);\n\t}]).directive('ablActivityBook', ['$sce', '$compile', '$mdMedia', '$mdDialog', '$log', '$window', '$http', 'config', 'rx', 'observeOnScope', '$stateParams', function ($sce, $compile, $mdMedia, $mdDialog, $log, $window, $http, config, rx, observeOnScope, $stateParams) {\n\t    return {\n\t        restrict: 'E',\n\t        scope: {\n\t            book: '='\n\t        },\n\t        template: _activityBook2.default,\n\t        link: function link($scope, element, attrs) {\n\t            // Digest on resize to recalculate $mdMedia window size\n\t            function onResize() {\n\t                console.log('resize');\n\n\t                $scope.$digest();\n\t            };\n\n\t            angular.element($window).on('resize', onResize);\n\t        },\n\t        controllerAs: 'vm',\n\t        controller: [\"$scope\", \"$element\", \"$attrs\", function controller($scope, $element, $attrs) {\n\t            console.log('ablActivityBookController', $scope, $attrs);\n\t            var vm = this;\n\n\t            var ENV = config;\n\t            var stripe = window.Stripe;\n\n\t            ENV.apiVersion = config.FEATHERS_URL;\n\n\t            this.guestDetailsExpanded = true;\n\t            this.attendeesExpanded = false;\n\t            this.addonsExpanded = false;\n\t            this.questionsExpanded = false;\n\t            this.paymentExpanded = false;\n\t            this.couponStatus = 'untouched';\n\t            this.appliedCoupon = {};\n\t            this.couponQuery = '';\n\t            this.occupancyRemaining = 0;\n\n\t            this.attendeeSubtotals = [];\n\t            this.addonSubtotals = [];\n\t            $scope.paymentResponse = '';\n\n\t            this.toggleGuestDetails = function () {\n\t                console.log('toggle guest details');\n\t                this.guestDetailsExpanded = !this.guestDetailsExpanded;\n\t            };\n\n\t            this.togglePayment = function () {\n\t                console.log('toggle payment');\n\t                this.paymentExpanded = !this.paymentExpanded;\n\t            };\n\n\t            this.pricing = {\n\t                total: 0\n\t            };\n\t            this.taxTotal, this.addonTotal, this.attendeeTotal = 0;\n\n\t            $scope.bookingSucceeded = false;\n\t            $scope.$mdMedia = $mdMedia;\n\t            $scope.screenIsBig = function () {\n\t                var w = angular.element($window);\n\t                return w[0].innerWidth > 742;\n\t            };\n\n\t            $scope.addBookingController = $scope.$parent;\n\t            console.log('addBookingController', $scope.addBookingController);\n\t            // var timeslot = $scope.addBookingController.parent.timeslot;\n\n\t            // $scope.eventInfo = $scope.$parent.parent;\n\n\t            //Get taxes\n\t            vm.taxes = [];\n\t            vm.taxTotal = 0;\n\t            //Get addons\n\t            vm.addons = [];\n\t            vm.questions = [];\n\n\t            this.toggleQuestions = function () {\n\t                console.log('toggle questions');\n\t                this.questionsExpanded = !this.questionsExpanded;\n\t            };\n\n\t            this.adjustAddon = function (i, mode) {\n\t                if (mode == 'up') vm.addons[i].quantity++;\n\t                if (mode == 'down' && vm.addons[i].quantity > 0) vm.addons[i].quantity--;\n\n\t                console.log('adjust addons', vm.addons);\n\t                vm.getPricingQuote();\n\t            };\n\t            console.log('addons', vm.addons);\n\n\t            this.toggleAddons = function () {\n\t                console.log('toggle addons');\n\t                if (vm.addons.length < 1) this.questionsExpanded = !this.questionsExpanded;else this.addonsExpanded = !this.addonsExpanded;\n\t            };\n\n\t            this.adjustAttendee = function (i, mode) {\n\t                if (mode == 'up' && vm.countAttendees() > 0) vm.attendees[i].quantity++;\n\t                if (mode == 'down' && vm.attendees[i].quantity > 0) vm.attendees[i].quantity--;\n\n\t                console.log('adjust attendees', vm.attendees);\n\t                vm.getPricingQuote();\n\n\t                vm.countAttendees();\n\t            };\n\n\t            this.toggleAttendees = function () {\n\t                console.log('toggle attendees');\n\t                this.attendeesExpanded = !this.attendeesExpanded;\n\t            };\n\n\t            this.checkAdjustAttendee = function ($index) {\n\t                if (vm.attendees[$index].quantity > vm.countAttendees()) {\n\t                    vm.attendees[$index].quantity = 0;\n\t                    vm.attendees[$index].quantity = vm.countAttendees();\n\t                }\n\t                if (vm.attendees[$index].quantity < 0) vm.attendees[$index].quantity = 0;\n\n\t                $scope.safeApply();\n\t                console.log('attendees added', vm.countAttendees(), vm.attendees[$index].quantity);\n\t            };\n\n\t            var data = {\n\t                \"attendees\": {},\n\t                \"addons\": {}\n\n\t            };\n\n\t            function buildQuery() {\n\n\t                // Parse attendees\n\t                angular.forEach(vm.attendees, function (e, i) {\n\t                    data[\"attendees\"][e._id] = [];\n\t                    if (e.quantity > 0) {\n\t                        for (var i = 0; i < e.quantity; i++) {\n\t                            data[\"attendees\"][e._id].push(null);\n\t                        }\n\t                    }\n\t                });\n\n\t                // Parse addons\n\t                angular.forEach(vm.addons, function (e, i) {\n\t                    data[\"addons\"][e._id] = [];\n\t                    if (e.quantity > 0) {\n\t                        for (var i = 0; i < e.quantity; i++) {\n\t                            data[\"addons\"][e._id].push(null);\n\t                        }\n\t                    }\n\t                });\n\n\t                console.log('pricing quote POST data', data);\n\t                //return url;\n\t                return data;\n\t            }\n\n\t            // Query for pricing data based on the data object used to make a booking request\n\t            vm.getPricingQuote = function () {\n\t                var query = buildQuery();\n\t                $http({\n\t                    method: 'POST',\n\t                    url: ENV.apiVersion + '/pricing-quotes',\n\t                    data: query,\n\t                    headers: {\n\t                        'x-abl-access-key': $stateParams.merchant,\n\t                        'x-abl-date': Date.parse(new Date().toISOString())\n\t                    }\n\t                }).then(function successCallback(response) {\n\t                    vm.pricing = response.data;\n\t                    vm.pricing.couponDeduction = vm.pricing.items.filter(function (item) {\n\t                        return item.type == 'coupon';\n\t                    });\n\n\t                    vm.addonTotal = vm.pricing.items.filter(function (item) {\n\t                        return item.type == 'addon';\n\t                    }).reduce(function (result, addon) {\n\t                        return result + addon.price;\n\t                    }, 0);\n\n\t                    vm.addonSubtotals = mergeIdenticalArrayItemsIntoObject(vm.pricing.items.filter(function (item) {\n\t                        return item.type == 'addon';\n\t                    }));\n\n\t                    vm.attendeeTotal = response.data.items.filter(function (item) {\n\t                        return item.type == \"aap\";\n\t                    }).reduce(function (result, att) {\n\t                        return result + att.price;\n\t                    }, 0);\n\n\t                    vm.attendeeSubtotals = mergeIdenticalArrayItemsIntoObject(response.data.items.filter(function (item) {\n\t                        return item.type == 'aap';\n\t                    }));\n\n\t                    vm.taxTotal = response.data.items.filter(function (item) {\n\t                        return item.type == \"tax\" || item.type == \"fee\";\n\t                    }).reduce(function (result, tax) {\n\t                        return result + tax.price;\n\t                    }, 0);\n\n\t                    console.log('getPricingQuotes', response);\n\t                    console.log('taxTotal', vm.taxTotal);\n\t                }, function errorCallback(response) {\n\t                    vm.pricing = {};\n\t                    vm.taxTotal = 0;\n\t                    console.log('getPricingQuotes error!', response, vm.pricing);\n\t                });\n\t            };\n\n\t            //Query for possible coupons partially matching the vm.couponQuery search string\n\t            vm.getPossibleCoupons = function () {\n\t                $http({\n\t                    method: 'GET',\n\t                    url: ENV.apiVersion + '/coupons?bookingId=' + vm.couponQuery,\n\t                    headers: {\n\t                        'x-abl-access-key': $stateParams.merchant,\n\t                        'x-abl-date': Date.parse(new Date().toISOString())\n\t                    }\n\t                }).then(function successCallback(response) {\n\t                    vm.possibleCoupons = response.data;\n\t                    console.log('getPossibleCoupons success', response);\n\t                }, function errorCallback(response) {\n\t                    vm.possibleCoupons = [];\n\t                    vm.taxTotal = 0;\n\t                    console.log('getPossibleCoupons error!', response);\n\t                });\n\t            };\n\n\t            // Check whether the vm.couponQuery search string exists as a coupon, if successful,\n\t            // add the coupon id to the make booking request object as the 'coupon' property\n\t            vm.checkCoupon = function () {\n\t                vm.checkingCoupon = true;\n\t                console.log('check coupon', vm.couponQuery);\n\t                $http({\n\t                    method: 'GET',\n\t                    url: ENV.apiVersion + '/coupons/' + vm.couponQuery,\n\t                    headers: {\n\t                        'x-abl-access-key': $stateParams.merchant,\n\t                        'x-abl-date': Date.parse(new Date().toISOString())\n\t                    }\n\t                }).then(function successCallback(response) {\n\t                    console.log('checkCoupon success', response);\n\t                    data['couponId'] = response.data['couponId'];\n\t                    vm.appliedCoupon = response.data;\n\t                    console.log('applied coupon', vm.appliedCoupon);\n\t                    vm.validateCoupon(vm.appliedCoupon);\n\t                    vm.couponStatus = 'valid';\n\t                    vm.getPricingQuote();\n\t                    vm.checkingCoupon = false;\n\t                }, function errorCallback(response) {\n\t                    delete data['couponId'];\n\t                    vm.couponStatus = 'invalid';\n\t                    vm.appliedCoupon = {};\n\t                    vm.checkingCoupon = false;\n\n\t                    console.log('checkCoupon error!', response);\n\t                });\n\t            };\n\n\t            vm.removeCoupon = function () {\n\t                vm.couponQuery = '';\n\t                delete data['couponId'];\n\t                vm.couponStatus = 'untouched';\n\t                vm.appliedCoupon = {};\n\t                vm.getPricingQuote();\n\t            };\n\n\t            var moment = window.moment;\n\n\t            vm.validateCoupon = function (coupon) {\n\t                var today = moment();\n\t                console.log('coupon expires after today', moment(coupon.endTime).isAfter(moment()));\n\t                //Coupon is not expired and is infinitely redeemable\n\t                if (moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions == 0) return true;\n\t                //Coupon is not expired and has been redeemed less than the maximum allowable redemptions\n\t                if (coupon.maxRedemptions > 0 && moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions - coupon.redemptions >= 0) return true;\n\t                //Coupon is expired or has been redeemed too many times \n\t                vm.couponStatus = 'invalid';\n\t                return false;\n\t            };\n\n\t            vm.bookingQuestionsCompleted = function () {\n\t                var completed = 0;\n\t                if (vm.bookingQuestions) {\n\t                    angular.forEach(vm.bookingQuestions, function (e, i) {\n\t                        // console.log(e);\n\t                        if (e.length > 0) completed++;\n\t                    });\n\t                }\n\t                return completed;\n\t            };\n\t            //Observe and debounce an object on the $scope, can be used on \n\t            //a search input for example to wait before auto-sending the value\n\t            observeOnScope($scope, 'vm.couponQuery').debounce(500).select(function (response) {\n\t                return response;\n\t            }).subscribe(function (change) {\n\t                console.log('search value', change);\n\t                if (vm.couponQuery.length > 0) vm.checkCoupon();\n\t            });\n\n\t            (0, _activityBookValidators2.default)(vm, rx, $http, $stateParams);\n\t            //Observe and debounce an object on the $scope, can be used on \n\t            //a search input for example to wait before auto-sending the value\n\t            // observeOnScope($scope, 'vm.formData.fullName')\n\t            //     .debounce(500)\n\t            //     .select(function (response) {\n\t            //         return response;\n\t            //     })\n\t            //     .subscribe(function (change) {\n\t            //         console.log('client name search value', change);\n\t            //         if (change['newValue'])\n\t            //             vm.searchClients(change.newValue).subscribe(function (results) {\n\t            //                 $scope.results = results;\n\t            //                 console.log(results);\n\t            //             });\n\t            //     });\n\n\n\t            $scope.$watch('addBookingController.activity', function (changes) {\n\t                console.log('activity', changes);\n\t                if (angular.isDefined($scope.addBookingController.activity)) {\n\t                    //Get booking questions\n\t                    vm.questions = $scope.addBookingController.activity.questions;\n\t                    console.log('booking questions', vm.questions);\n\n\t                    vm.addons = $scope.addBookingController.activity.charges.filter(function (charge) {\n\t                        return charge.type == 'addon' && charge.status == 'active';\n\t                    });\n\t                    vm.addons.forEach(function (e, i) {\n\t                        if (!angular.isDefined(e.quantity)) e.quantity = 0;\n\t                    });\n\n\t                    vm.taxes = $scope.addBookingController.activity.charges.filter(function (charge) {\n\t                        return charge.type == 'tax';\n\t                    });\n\t                    console.log('taxes', vm.taxes);\n\t                }\n\t            }, true);\n\n\t            vm.countAttendees = function () {\n\t                // console.log('count attendees', $scope.addBookingController.event.maxOcc, attendeesAdded);\n\t                if ($scope.addBookingController.event) {\n\t                    if (vm.attendees) {\n\t                        return ($scope.addBookingController.event.maxOcc || $scope.addBookingController.timeslot.maxOcc) - vm.attendees.map(function (att) {\n\t                            return att.quantity;\n\t                        }).reduce(function (a, b) {\n\t                            return a + b;\n\t                        }, 0);\n\t                    } else {\n\t                        return 0;\n\t                    }\n\t                }\n\t                return 0;\n\t            };\n\n\t            vm.countAttendeesAdded = function () {\n\t                // console.log('count attendees', $scope.addBookingController.event.maxOcc, attendeesAdded);\n\t                if ($scope.addBookingController.event) {\n\t                    if (vm.attendees) {\n\t                        return vm.attendees.map(function (att) {\n\t                            return att.quantity;\n\t                        }).reduce(function (a, b) {\n\t                            return a + b;\n\t                        }, 0);\n\t                    } else {\n\t                        return 0;\n\t                    }\n\t                }\n\t                return 0;\n\t            };\n\n\t            vm.nextStep = function () {\n\t                // if(vm.guestDetailsExpanded) {\n\t                //     vm.guestDetailsExpanded = false;\n\t                //     vm.attendeesExpanded    = true;\n\t                // }\n\t                // if(vm.attendeesExpanded) {\n\t                //     vm.attendeesExpanded = false;\n\t                //     vm.addonsExpanded    = true;\n\t                // }\n\t                // if(vm.addonsExpanded) {\n\t                //     vm.addonsExpanded    = false;\n\t                //     vm.questionsExpanded = true;\n\t                // }\n\t                $scope.makeBooking();\n\t                $scope.showPayzenDialog();\n\n\t                if (vm.questionsExpanded) {\n\t                    vm.questionsExpanded = false;\n\t                    vm.paymentExpanded = true;\n\t                }\n\t            };\n\n\t            // $scope.$watch('addBookingController.event', function (changes) {\n\t            //     console.log('event', changes);\n\n\t            //     //vm.attendeesRemaining = changes.maxOcc -\n\t            // }, true);\n\n\t            // $scope.$watch('vm.bookingQuestions', function (changes) {\n\t            //     console.log('vm.bookingQuestions', changes);\n\t            //     console.log($scope);\n\t            //     //vm.attendeesRemaining = changes.maxOcc -\n\t            // }, true);\n\n\t            $scope.$watch('addBookingController.timeslot', function (changes) {\n\t                console.log('timeslot', changes);\n\t                if (angular.isDefined($scope.addBookingController.timeslot)) {\n\n\t                    if (angular.isDefined($scope.addBookingController.timeslot.charges)) {\n\t                        vm.attendees = $scope.addBookingController.timeslot.charges.filter(function (charge) {\n\t                            return charge.type == 'aap' && charge.status == 'active';\n\t                        });\n\t                        vm.attendees.forEach(function (e, i) {\n\t                            if (!angular.isDefined(e.quantity)) e.quantity = 0;\n\t                        });\n\t                        // console.log('attendees', vm.attendees);\n\t                    }\n\n\t                    //Get the timeslot id and start time for the pricing quote endpoint request\n\t                    data['timeSlotId'] = $scope.addBookingController.timeslot._id;\n\t                    data['startTime'] = $scope.addBookingController.timeslot.startTime;\n\t                }\n\t            }, true);\n\n\t            vm.getBookingData = function () {\n\t                var bookingData = angular.copy(data);\n\t                bookingData['eventInstanceId'] = $scope.addBookingController.event['eventInstanceId'];\n\t                bookingData['answers'] = {};\n\t                bookingData['email'] = vm.formData['mail'];\n\t                bookingData['phoneNumber'] = vm.formData['phoneNumber'];\n\t                bookingData['fullName'] = vm.formData['fullName'];\n\t                bookingData['notes'] = vm.formData['notes'];\n\t                bookingData['skipConfirmation'] = 'false';\n\t                bookingData['operator'] = $scope.addBookingController.activity.operator;\n\n\t                angular.forEach(vm.questions, function (e, i) {\n\t                    bookingData['answers'][e._id] = vm.bookingQuestions[i];\n\t                });\n\n\t                bookingData['paymentMethod'] = 'credit';\n\t                bookingData['currency'] = 'default';\n\n\t                console.log('make booking', bookingData);\n\n\t                return bookingData;\n\t                // console.log(vm.bookingQuestions);\n\t                // console.log(vm.questions);\n\t            };\n\n\t            var _paymentMessageHandler;\n\t            _paymentMessageHandler = function paymentMessageHandler(event) {\n\t                if (event.origin == \"https://calendar.ablist.win\") {\n\t                    // TODO add to config\n\t                    console.log(\"TRUSTED ORIGIN\", event.origin);\n\t                    console.log(\"DATA\", event.data);\n\t                    if (event.data == \"payment_complete\") {\n\t                        console.log(\"PAYMENT COMPLETE\");\n\t                        $scope.paymentResponse = 'success'; //processing, failed\n\t                        //   $rootScope.showToast('Payment processed successfully.');\n\n\t                        window.removeEventListener(\"message\", _paymentMessageHandler);\n\t                        $scope.paymentSuccessful = true;\n\t                        //   $scope.changeState('bookings'); //Go to bookings view if successful\n\t                        $scope.safeApply();\n\t                        //$mdDialog.hide();\n\t                    }\n\t                } else {\n\t                    console.log(\"UNTRUSTED ORIGIN\", event.origin);\n\t                }\n\t            };\n\n\t            console.log(\"Adding Payment Message Event Listener\");\n\t            window.addEventListener(\"message\", _paymentMessageHandler);\n\n\t            $scope.safeApply = function (fn) {\n\t                var phase = this.$root.$$phase;\n\t                if (phase == '$apply' || phase == '$digest') {\n\t                    if (fn && typeof fn === 'function') {\n\t                        fn();\n\t                    }\n\t                } else {\n\t                    this.$apply(fn);\n\t                }\n\t            };\n\n\t            $scope.makeBooking = function () {\n\t                $scope.bookingResponse = $http({\n\t                    method: 'POST',\n\t                    url: config.FEATHERS_URL + '/bookings',\n\t                    data: vm.getBookingData(),\n\t                    headers: {\n\t                        'x-abl-access-key': $stateParams.merchant,\n\t                        'x-abl-date': Date.parse(new Date().toISOString())\n\t                    }\n\t                }).then(function successCallback(response) {\n\t                    console.log('makeBooking success', response);\n\t                    $scope.bookingSuccessResponse = response.data.booking;\n\t                    var iframeDoc = document.getElementById(\"payzenIframe\").contentWindow.document;\n\t                    iframeDoc.open();\n\t                    iframeDoc.write(response.data.iframeHtml);\n\t                    iframeDoc.close();\n\t                    $scope.bookingSucceeded = true;\n\t                }, function errorCallback(response) {\n\t                    $mdDialog.hide();\n\t                    $scope.bookingSucceeded = false;\n\t                    console.log('makeBooking error!', response);\n\t                });\n\t            };\n\n\t            // function postToIframe(data,url,target){\n\t            //   $('body')\n\t            //     .append('<form action=\"'+url+'\" method=\"post\" target=\"'+target+'\" id=\"postToIframe\"></form>');\n\t            //   $.each(data,function(n,v){\n\t            //     $('#postToIframe').append('<input type=\"hidden\" name=\"'+n+'\" value=\"'+v+'\" />');\n\t            //   });\n\t            //   $('#postToIframe').submit().remove();\n\t            // }\n\n\t            var lpad = function lpad(numberStr, padString, length) {\n\t                while (numberStr.length < length) {\n\t                    numberStr = padString + numberStr;\n\t                }\n\t                return numberStr;\n\t            };\n\n\t            $scope.showPayzenDialog = function (ev) {\n\t                $log.debug(\"SHOW PAYZEN DIALOG\");\n\t                vm.paymentExpanded = true;\n\t                $scope.paymentSuccessful = false;\n\n\t                // $scope.$mdDialog = $mdDialog;\n\t                // $mdDialog.show({\n\t                //   contentElement: '#payzenDialog',\n\t                //   parent: angular.element(document.body),\n\t                //   targetEvent: ev,\n\t                //   clickOutsideToClose: false\n\t                // });\n\t            };\n\n\t            $scope.prefill = function () {\n\t                vm.formData = {\n\t                    fullName: 'fuck',\n\t                    mail: 'adam@ralko.com',\n\t                    phoneNumber: 7783023246\n\t                };\n\t            };\n\n\t            //Merge identical items from an array into nested objects, \n\t            //summing their amount properties and keeping track of quantities\n\t            function mergeIdenticalArrayItemsIntoObject(data) {\n\t                var seen = {};\n\n\t                angular.forEach(data, function (e, i) {\n\t                    // Have we seen this item before?\n\t                    if (seen.hasOwnProperty(e.name)) {\n\t                        seen[e['name']]['amount'] += e['amount']; //Sum their prices\n\t                        seen[e['name']]['quantity'] += 1; //Increment their quantity\n\t                    } else {\n\t                        seen[e['name']] = {};\n\t                        seen[e['name']]['price'] = e['price'];\n\t                        seen[e['name']]['quantity'] = 1;\n\t                        seen[e['name']]['amount'] = e['amount'];\n\t                    }\n\t                });\n\n\t                console.log('mergeIdenticalArrayItems', seen);\n\t                return seen;\n\t            }\n\t        }]\n\t    };\n\t}]);\n\n\t// {\"paymentMethod\":\"cash\",\"answers\":{\"57336d1a3e6f0f447119989a\":\"100\",\"57336d2a3e6f0f447119989b\":\"phone call\"},\"attendees\":{\"58eea948565d3d3aa4fae370\":[null]},\"addons\":{\"57336b293e6f0f447119987b\":[null],\"58252f9e98087f1c06cc15eb\":[null],\"57336b293e6f0f447119987c\":[]},\"adjustments\":[],\"couponId\":\"AIRMILES\",\"skipConfirmation\":false,\"email\":\"kevin+test@adventurebucketlist.com\",\"fullName\":\"Kevin Test\",\"phoneNumber\":\"6506129331\",\"eventInstanceId\":\"p836o5rvsg72nm69ia120bbdns_20170623T210000Z\",\"currency\":\"default\"}\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<md-card class=paymentSummaryCard ng-show=\\\"paymentResponse != 'success'\\\"> <md-list class=\\\"\\\" flex> <md-list-item class=lineItemHeader ng-if=\\\"vm.base \\\" ng-click=null> <div class=md-list-item-text layout=\\\"row \\\" flex> <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <p class=\\\"\\\">Base Price </p> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <p class=\\\"\\\">{{vm.base() / 100}} CFP</p> </div> </div> </md-list-item> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-disabled=detailsForm.$invalid> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=local_offer class=listIcon ng-if=\\\"vm.couponStatus !='valid'\\\"></ng-md-icon> <ng-md-icon icon=clear class=listIcon ng-click=vm.removeCoupon(); ng-if=\\\"vm.couponStatus =='valid'\\\"></ng-md-icon> <span class=\\\"paymentSubTitle couponText\\\" ng-if=\\\"vm.couponStatus =='valid'\\\" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCoupon.percentage ? '' : '$'}}{{vm.appliedCoupon.amount}}{{vm.appliedCoupon.percentage ? '%' : ''}} Off</span> <span class=\\\"paymentSubTitle total\\\"> <input ng-model=vm.couponQuery type=text class=couponInput ng-if=\\\"vm.couponStatus =='untouched' || vm.couponStatus =='invalid'\\\" ng-change=\\\"vm.checkingCoupon = true\\\" placeholder=\\\"Enter Coupon\\\" capitalize/> </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <span class=\\\"paymentSubTitle total\\\" ng-if=vm.pricing.couponDeduction[0]>-${{(-1 * vm.pricing.couponDeduction[0].price / 100) | number : 2}}</span> <md-progress-circular md-mode=indeterminate ng-show=\\\"vm.checkingCoupon && vm.couponQuery.length > 0\\\" class=\\\"listItemCircularProgress easeIn\\\" md-diameter=24px></md-progress-circular> </div> </div> </md-list-item> <md-list-item ng-show=\\\"vm.couponStatus =='invalid' && vm.couponQuery.length > 0 && !vm.checkingCoupon\\\" class=\\\"paymentHeader md-2-line md-primary easeIn\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if=\\\"vm.couponStatus !='valid'\\\" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class=\\\"paymentSubTitle total\\\"> Invalid Coupon </span> </div> <div layout=row layout-align=\\\"end center\\\" flex> <ng-md-icon icon=clear class=listIcon ng-click=\\\"vm.couponQuery = '';\\\"></ng-md-icon> </div> </div> </md-list-item> <div ng-repeat=\\\"charge in booking.addOns \\\" ng-show=\\\"vm.showAddons \\\" ng-if=\\\"booking.addOns.length > 0\\\"> <md-list-item class=\\\"list-item-48 lineItemDetail\\\" ng-if=\\\"charge.quantity > 0\\\"> <div class=md-list-item-text layout=\\\"row \\\" flex> <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <div layout=\\\"row \\\"> <p>{{ charge.label }} <span style=vertical-align:middle>x</span> {{ charge.quantity }}</p> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <p class=\\\"\\\">{{ charge.price/100 * charge.quantity}} CFP</p> </div> </div> </md-list-item> </div> <div ng-if=\\\"vm.attendeeTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Attendees </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=activityTotal>${{vm.attendeeTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat=\\\"(key, value) in vm.attendeeSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{value.quantity}} x {{key}} @ ${{value.price/100}} each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> ${{value.amount / 100 | number:2}} </div> </div> </div> <div ng-if=\\\"vm.addonTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Add-ons </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=activityTotal>${{vm.addonTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat=\\\"(key, value) in vm.addonSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{value.quantity}} x {{key}} @ ${{value.price/100}} each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> ${{value.amount / 100 | number:2}} </div> </div> </div> <div ng-if=\\\"vm.taxTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Taxes and Fees </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=activityTotal>${{vm.taxTotal / 100 | number:2}}</span> </div> </div> </div> <div> <div class=\\\"md-list-item-text subtotalLineItem bottomTotal\\\" layout=\\\"row \\\" layout-align=\\\"space-between center \\\" flex> <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=\\\"\\\">Total </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"\\\">${{(vm.pricing.total || 0) / 100 | number:2}}</span> </div> </div> </div> </md-list> </md-card> \";\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div ng-if=\\\"paymentResponse != 'success'\\\"> <md-card class=activityPaymentSummaryCard after-render> <md-list class=\\\"\\\" flex> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-click=vm.toggleGuestDetails() ng-init=\\\"guestDetailsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=formHeader> <div layout=row layout-align=\\\"start center\\\" flex=50> <ng-md-icon class=headerIcon icon=filter_1 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Guest Details</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\" flex> <ng-md-icon icon=\\\"{{vm.guestDetailsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> <ng-md-icon ng-show=\\\"!guestDetailsHover && detailsForm.$valid\\\" icon=check class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div ng-show=vm.guestDetailsExpanded> <form name=guestDetailsForm novalidate> <div class=\\\"detailsForm slideDown\\\" layout-padding> <md-input-container class=md-block> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.mail.$error> <div ng-message=required>This is required.</div> <div ng-message=email>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align=\\\"end center\\\"> <md-button class=md-raised ng-disabled=guestDetailsForm.$invalid ng-click=\\\"vm.toggleGuestDetails(); vm.toggleAttendees();\\\">Next</md-button> </div> </div> </form> </div> <md-divider></md-divider> </md-list> <md-list class=\\\"\\\" flex> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-click=vm.toggleAttendees() ng-disabled=guestDetailsForm.$invalid> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" class=formHeader flex> <ng-md-icon class=headerIcon icon=filter_2 class=listIcon></ng-md-icon> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() > 0\\\" flex>Attendees <span ng-show=\\\"vm.countAttendees() < 4\\\"> | {{vm.countAttendees()}} spots remaining</span></span> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() < 1\\\" flex>Attendees | No spots remaining</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center\\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\"> <ng-md-icon icon=\\\"{{vm.attendeesExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class=\\\"activityForm slideDown\\\" ng-show=vm.attendeesExpanded> <div ng-repeat=\\\"attendee in vm.attendees\\\"> <md-list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row class=\\\"\\\"> <span class=lineItemSubDetail>${{attendee.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" class=addOnAdjusters layout-align=\\\"center end \\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline \\\" class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end \\\"> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align=\\\"start center\\\" flex=50> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <div layout=\\\"column \\\" layout-align=\\\"center end\\\" flex> <md-button class=md-raised ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=\\\"vm.toggleAttendees(); vm.toggleAddons();\\\">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> <div ng-if=\\\"vm.addons.length > 0\\\"> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=vm.toggleAddons()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=formHeader> <div layout=row layout-align=\\\"start center\\\" flex=50> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\" flex> <ng-md-icon ng-show=\\\"vm.addOnsSelected == 1\\\" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon=\\\"{{vm.addonsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class=\\\"activityForm slideDown\\\" ng-show=vm.addonsExpanded> <div ng-repeat=\\\"addon in vm.addons\\\"> <md-list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=\\\"\\\"> <span class=lineItemSubDetail>${{addon.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" class=addOnAdjusters layout-align=\\\"center end \\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAddon($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline \\\" class=listIconSub ng-click=\\\"vm.adjustAddon($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end \\\"> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.getPricingQuote(); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align=\\\"start center\\\" flex=50> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <div layout=\\\"column \\\" layout-align=\\\"center end\\\" flex> <md-button class=md-raised ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=\\\"vm.toggleQuestions(); vm.toggleAddons();\\\">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> </div> <div ng-if=\\\"vm.questions.length > 0\\\"> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=vm.toggleQuestions()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=formHeader> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=filter_4 class=listIcon ng-if=\\\"vm.addons.length > 0\\\"></ng-md-icon> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon ng-if=\\\"vm.addons.length == 0\\\"></ng-md-icon> <span class=paymentSubTitle>Booking Questions | {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\" flex> <ng-md-icon icon=\\\"{{vm.questionsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class=\\\"questionForm slideDown\\\" ng-show=vm.questionsExpanded> <div ng-repeat=\\\"question in vm.questions\\\"> <md-list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=md-list-item-text flex> <div layout=column layout-align=\\\"center stretch\\\" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align=\\\"start center\\\"> <ng-md-icon icon=\\\"{{vm.bookingQuestions[$index].length > 0 ? 'done' : 'priority_high'}}\\\" class=inputStatusIcon></ng-md-icon> <md-input-container flex> <textarea name=question ng-model=vm.bookingQuestions[$index] md-maxlength=300 rows=1></textarea> </md-input-container> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align=\\\"start center\\\" flex=50> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <div layout=\\\"column \\\" layout-align=\\\"center end\\\" flex> <md-button class=md-raised ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid || (vm.bookingQuestionsCompleted()/vm.questions.length) != '1'\\\" ng-click=vm.nextStep();>Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider ng-if=!vm.addonsExpanded></md-divider> </div> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-click=\\\"makeBooking(); showPayzenDialog();\\\" ng-disabled=\\\"guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1 || bookingSucceeded\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Pay</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"paymentSubTitle total\\\"></span> <ng-md-icon icon=logout class=listIcon></ng-md-icon> </div> </div> </md-list-item> <div class=\\\"activityForm slideDown\\\" ng-show=vm.paymentExpanded> <iframe id=payzenIframe class=payzenIframe></iframe> </div> <md-divider></md-divider> </md-list> </md-card> </div> \";\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \" <div layout=\\\"{{screenIsBig() ? 'row' : 'column'}}\\\" layout-align=\\\"{{screenIsBig() ? 'center start' : 'center center'}}\\\" class=columnFix> <div class=paymentSummaryCardLarge> <div ng-include=\\\"'activity-forms.html'\\\"></div> </div> <div class=paymentSummaryCardLarge> <div ng-include=\\\"'activity-total.html'\\\"></div> </div> </div> <div> <md-card class=paymentSummaryCard ng-show=\\\"paymentResponse.length > 0\\\"> <md-list> <div ng-show=\\\"paymentResponse == 'success'\\\" class=easeIn> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50 md-colors=\\\"{color: 'primary'}\\\"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Complete</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"paymentSubTitle total\\\" md-colors=\\\"{color: 'green'}\\\"></span> <ng-md-icon icon=check class=listIcon md-colors=\\\"{fill: 'green'}\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=column layout-align=\\\"space-between center\\\"> <div layout=row layout-wrap> <p class=listMessage>An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> <div layout=row layout-wrap> <p class=listMessage>For questions about your booking please contact:</p> <p class=listMessage>{{bookingSuccessResponse.operator.companyName}} (+{{bookingSuccessResponse.operator.primaryContact.phoneNumber}}) </p> <p class=listMessage>{{bookingSuccessResponse.operator.primaryContact.email}} </p> <p class=listMessage>Booking reference ID: {{bookingSuccessResponse.bookingId}} </p> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-align=\\\"end center\\\" flex> <md-button class=\\\"md-raised md-primary\\\" ui-sref=home>Return</md-button> </div> </md-list-item> </div> <div ng-show=\\\"paymentResponse == 'failed'\\\"> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" md-colors=\\\"{color: 'primary'}\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50 md-colors=\\\"{color: 'warn'}\\\"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Failed</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"paymentSubTitle total\\\" md-colors=\\\"{color: 'warn'}\\\"></span> <ng-md-icon icon=error class=listIcon md-colors=\\\"{fill: 'warn'}\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align=\\\"end center\\\" flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.payNow();>Try Again</md-button> </div> </md-list-item> </div> <div ng-show=\\\"paymentResponse == 'processing'\\\"> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" md-colors=\\\"{color: 'primary'}\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex layout-grow md-colors=\\\"{color: 'primary'}\\\"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Processing</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <span class=\\\"paymentSubTitle total\\\" md-colors=\\\"{color: 'green'}\\\"></span> <ng-md-icon icon=watch_later class=listIcon md-colors=\\\"{fill: 'amber'}\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align=\\\"end center\\\" flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"goToState('home');\\\">Return</md-button> </div> </md-list-item> </div> </md-list> </md-card> </div>\";\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = activityBookValidator;\n\tfunction activityBookValidator(vm, rx, $http, $stateParams) {\n\n\t    vm.searchClients = function (query) {\n\n\t        return rx.Observable.fromPromise($http({\n\t            method: 'GET',\n\t            url: vm.config.apiVersion + \"/clients?fullName=\" + text,\n\t            headers: {\n\t                'x-abl-access-key': $stateParams.merchant,\n\t                'x-abl-date': Date.parse(new Date().toISOString())\n\t            }\n\t        })).select(function (response) {\n\t            console.log(response);\n\t            return response;\n\t        });\n\t    };\n\n\t    return vm;\n\t}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// abl-sdk.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 50798df6db90d435e704","//Including independent module source code for packaging\nconst ablBook = require('./activity/activity-book.js');\nimport feathers from 'feathers';\nimport localstorage from 'feathers-localstorage';\nimport feathersRx from 'feathers-reactive';\n\n\nimport feathersAuthentication from './auth';\nimport setupUtilFunctions from './utils';\n\nimport styles from './styles.css';\nimport rest from './rest';\n\nvar sdkProvider = function (settings) {\n\n  var endpoint = null\n  var socketOpts = null\n\n  var feathersAuth = false\n  var useSocket = true\n  var authStorage = window.localStorage\n  var services = [];\n  //Configuration\n  return {\n    setAuthStorage: function (newAuthStorage) {\n      authStorage = newAuthStorage\n    },\n\n\n    setSocketOpts: function (opts) {\n      socketOpts = opts\n    },\n    useSocket: function (socketEnabled) {\n      useSocket = !!socketEnabled\n    },\n    setEndpoint: function (newEndpoint) {\n      endpoint = newEndpoint\n    },\n    setFeathersAuth: function (isFeathersAuth) {\n      feathersAuth = isFeathersAuth\n    },\n    setServices: function (newServices) {\n      services = newServices\n    },\n    getSettings: function () {\n      return endpoint;\n    },\n    $get: ['$injector', '$rootScope', '$timeout', '$log', '$mdToast', '$http',\n      function ($injector, $rootScope, $timeout, $log, $mdToast, $http) {\n        var $rootScope = $injector.get('$rootScope');\n        var that = this;\n\n        $rootScope.loading = true;\n        this.loadingTimeout = null;\n\n        this.loadingTimeout = $timeout(function () {\n          $rootScope.loading = false;\n        }, 1500);\n\n        //Add timeout\n        $rootScope.afterRender = function (current, total) {\n          $timeout.cancel(this.loadingTimeout);\n          this.loadingTimeout = $timeout(function () {\n            $rootScope.loading = false;\n          }, 1500);\n        };\n\n        if (!endpoint) {\n          console.log('no ep')\n          this.app = {};\n          return this.app;\n\n        }\n\n        const RxJS = window.Rx;\n\n\n\n\n        this.app = feathers()\n          .configure(feathersRx(RxJS)) //feathers-reactive\n          .configure(feathers.hooks())\n          .use('cache', localstorage({\n            name: 'abl',\n            storage: window.localStorage\n          }));\n\n\n        if (useSocket) {\n          console.log('endpoint', endpoint)\n          this.socket = io(endpoint, socketOpts)\n          this.app.configure(feathers.socketio(this.socket))\n        } else {\n          this.app.configure(feathers.rest(endpoint).jquery(window.jQuery))\n        }\n\n        setupUtilFunctions(this.app, $mdToast, $rootScope);\n        this.app.endpoint = endpoint;\n        this.app.apiKey = 'zxxz6RcLlAsd28z62JP2pbZYt72iOqC4uj2cPcZbTDzEXOrMzp25PuNEB2SOsJbe';\n\n        rest(this.app, $http);\n\n        this.app.getSettings = function () {\n\n        };\n\n        if (feathersAuth) {\n          this.app = feathersAuthentication(this.app, that, authStorage, $rootScope);\n        }\n\n        return this.app\n      }\n    ]\n  }\n};\n\n\n//Old naming convention, left for backwards compatibility\nvar feathersSdk = [\n  function $feathersProvider() {\n    return sdkProvider('feathers');\n  }\n];\n\nvar ablSdk = [\n  function $ablProvider() {\n    return sdkProvider('abl');\n  }\n];\n\n\nimport toUpper from './helpers/text-transforms';\n\nangular.module('abl-sdk-feathers', [\n    'ngMaterial',\n    'rx'\n  ]).provider('$abl', ablSdk)\n  .provider('$feathers', feathersSdk)\n  .directive('capitalize', toUpper)\n  .directive('formatPhone', [\n    function () {\n      return {\n        require: 'ngModel',\n        restrict: 'A',\n        link: function (scope, elem, attrs, ctrl, ngModel) {\n          elem.add(phonenumber).on('keyup', function () {\n            var origVal = elem.val().replace(/[^\\w\\s]/gi, '');\n            if (origVal.length === 10) {\n              var str = origVal.replace(/(.{3})/g, \"$1-\");\n              var phone = str.slice(0, -2) + str.slice(-1);\n              jQuery(\"#phonenumber\").val(phone);\n            }\n\n          });\n        }\n      };\n    }\n  ]);\n\n\n// WEBPACK FOOTER //\n// ./src/abl-sdk.js","module.exports = feathers;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"feathers\"\n// module id = 2\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nexports.default = init;\n\nvar _feathersMemory = require('feathers-memory');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar LocalStorage = function (_Service) {\n  _inherits(LocalStorage, _Service);\n\n  function LocalStorage() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, LocalStorage);\n\n    var _this = _possibleConstructorReturn(this, (LocalStorage.__proto__ || Object.getPrototypeOf(LocalStorage)).call(this, options));\n\n    _this._storageKey = options.name || 'feathers';\n    _this._storage = options.storage || typeof window !== 'undefined' && window.localStorage;\n    _this._throttle = options.throttle || 200;\n    _this.store = null;\n\n    if (!_this._storage) {\n      throw new Error('The `storage` option needs to be provided');\n    }\n    return _this;\n  }\n\n  _createClass(LocalStorage, [{\n    key: 'ready',\n    value: function ready() {\n      var _this2 = this;\n\n      if (!this.store) {\n        return Promise.resolve(this._storage.getItem(this._storageKey)).then(function (str) {\n          return JSON.parse(str || '{}');\n        }).then(function (store) {\n          var keys = Object.keys(store);\n          var last = store[keys[keys.length - 1]];\n\n          // Current id is the id of the last item\n          _this2._uId = keys.length && typeof last[_this2.id] !== 'undefined' ? last[_this2.id] + 1 : 0;\n\n          return _this2.store = store;\n        });\n      }\n\n      return Promise.resolve(this.store);\n    }\n  }, {\n    key: 'flush',\n    value: function flush(data) {\n      var _this3 = this;\n\n      if (!this._timeout) {\n        this._timeout = setTimeout(function () {\n          _this3._storage.setItem(_this3._storageKey, JSON.stringify(_this3.store));\n          delete _this3._timeout;\n        }, this.throttle);\n      }\n\n      return data;\n    }\n  }, {\n    key: 'execute',\n    value: function execute(method) {\n      var _this4 = this;\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return this.ready().then(function () {\n        var _get2;\n\n        return (_get2 = _get(LocalStorage.prototype.__proto__ || Object.getPrototypeOf(LocalStorage.prototype), method, _this4)).call.apply(_get2, [_this4].concat(args));\n      });\n    }\n  }, {\n    key: 'find',\n    value: function find() {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.execute.apply(this, ['find'].concat(args));\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.execute.apply(this, ['get'].concat(args));\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      var _this5 = this;\n\n      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.execute.apply(this, ['create'].concat(args)).then(function (data) {\n        return _this5.flush(data);\n      });\n    }\n  }, {\n    key: 'patch',\n    value: function patch() {\n      var _this6 = this;\n\n      for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      return this.execute.apply(this, ['patch'].concat(args)).then(function (data) {\n        return _this6.flush(data);\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this7 = this;\n\n      for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n\n      return this.execute.apply(this, ['update'].concat(args)).then(function (data) {\n        return _this7.flush(data);\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      var _this8 = this;\n\n      for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n\n      return this.execute.apply(this, ['remove'].concat(args)).then(function (data) {\n        return _this8.flush(data);\n      });\n    }\n  }]);\n\n  return LocalStorage;\n}(_feathersMemory.Service);\n\nfunction init(options) {\n  return new LocalStorage(options);\n}\n\ninit.Service = _feathersMemory.Service;\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-localstorage/lib/index.js\n// module id = 3\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = init;\n\nvar _uberproto = require('uberproto');\n\nvar _uberproto2 = _interopRequireDefault(_uberproto);\n\nvar _feathersQueryFilters = require('feathers-query-filters');\n\nvar _feathersQueryFilters2 = _interopRequireDefault(_feathersQueryFilters);\n\nvar _feathersErrors = require('feathers-errors');\n\nvar _feathersErrors2 = _interopRequireDefault(_feathersErrors);\n\nvar _feathersCommons = require('feathers-commons');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Service = function () {\n  function Service() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Service);\n\n    this.paginate = options.paginate || {};\n    this._id = this.id = options.idField || options.id || 'id';\n    this._uId = options.startId || 0;\n    this.store = options.store || {};\n    this.events = options.events || [];\n    this._matcher = options.matcher || _feathersCommons.matcher;\n    this._sorter = options.sorter || _feathersCommons.sorter;\n  }\n\n  _createClass(Service, [{\n    key: 'extend',\n    value: function extend(obj) {\n      return _uberproto2.default.extend(obj, this);\n    }\n\n    // Find without hooks and mixins that can be used internally and always returns\n    // a pagination object\n\n  }, {\n    key: '_find',\n    value: function _find(params) {\n      var getFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _feathersQueryFilters2.default;\n\n      var _getFilter = getFilter(params.query || {}),\n          query = _getFilter.query,\n          filters = _getFilter.filters;\n\n      var values = _feathersCommons._.values(this.store).filter(this._matcher(query));\n\n      var total = values.length;\n\n      if (filters.$sort) {\n        values.sort(this._sorter(filters.$sort));\n      }\n\n      if (filters.$skip) {\n        values = values.slice(filters.$skip);\n      }\n\n      if (typeof filters.$limit !== 'undefined') {\n        values = values.slice(0, filters.$limit);\n      }\n\n      if (filters.$select) {\n        values = values.map(function (value) {\n          return _feathersCommons._.pick.apply(_feathersCommons._, [value].concat(_toConsumableArray(filters.$select)));\n        });\n      }\n\n      return Promise.resolve({\n        total: total,\n        limit: filters.$limit,\n        skip: filters.$skip || 0,\n        data: values\n      });\n    }\n  }, {\n    key: 'find',\n    value: function find(params) {\n      var paginate = typeof params.paginate !== 'undefined' ? params.paginate : this.paginate;\n      // Call the internal find with query parameter that include pagination\n      var result = this._find(params, function (query) {\n        return (0, _feathersQueryFilters2.default)(query, paginate);\n      });\n\n      if (!(paginate && paginate.default)) {\n        return result.then(function (page) {\n          return page.data;\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: 'get',\n    value: function get(id, params) {\n      if (id in this.store) {\n        return Promise.resolve(this.store[id]).then((0, _feathersCommons.select)(params, this.id));\n      }\n\n      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n    }\n\n    // Create without hooks and mixins that can be used internally\n\n  }, {\n    key: '_create',\n    value: function _create(data, params) {\n      var id = data[this._id] || this._uId++;\n      var current = _feathersCommons._.extend({}, data, _defineProperty({}, this._id, id));\n\n      return Promise.resolve(this.store[id] = current).then((0, _feathersCommons.select)(params, this.id));\n    }\n  }, {\n    key: 'create',\n    value: function create(data, params) {\n      var _this = this;\n\n      if (Array.isArray(data)) {\n        return Promise.all(data.map(function (current) {\n          return _this._create(current);\n        }));\n      }\n\n      return this._create(data, params);\n    }\n\n    // Update without hooks and mixins that can be used internally\n\n  }, {\n    key: '_update',\n    value: function _update(id, data, params) {\n      if (id in this.store) {\n        // We don't want our id to change type if it can be coerced\n        var oldId = this.store[id][this._id];\n\n        id = oldId == id ? oldId : id; // eslint-disable-line\n\n        data = _feathersCommons._.extend({}, data, _defineProperty({}, this._id, id));\n        this.store[id] = data;\n\n        return Promise.resolve(this.store[id]).then((0, _feathersCommons.select)(params, this.id));\n      }\n\n      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n    }\n  }, {\n    key: 'update',\n    value: function update(id, data, params) {\n      if (id === null || Array.isArray(data)) {\n        return Promise.reject(new _feathersErrors2.default.BadRequest('You can not replace multiple instances. Did you mean \\'patch\\'?'));\n      }\n\n      return this._update(id, data, params);\n    }\n\n    // Patch without hooks and mixins that can be used internally\n\n  }, {\n    key: '_patch',\n    value: function _patch(id, data, params) {\n      if (id in this.store) {\n        _feathersCommons._.extend(this.store[id], _feathersCommons._.omit(data, this._id));\n\n        return Promise.resolve(this.store[id]).then((0, _feathersCommons.select)(params, this.id));\n      }\n\n      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n    }\n  }, {\n    key: 'patch',\n    value: function patch(id, data, params) {\n      var _this2 = this;\n\n      if (id === null) {\n        return this._find(params).then(function (page) {\n          return Promise.all(page.data.map(function (current) {\n            return _this2._patch(current[_this2._id], data, params);\n          }));\n        });\n      }\n\n      return this._patch(id, data, params);\n    }\n\n    // Remove without hooks and mixins that can be used internally\n\n  }, {\n    key: '_remove',\n    value: function _remove(id, params) {\n      if (id in this.store) {\n        var deleted = this.store[id];\n        delete this.store[id];\n\n        return Promise.resolve(deleted).then((0, _feathersCommons.select)(params, this.id));\n      }\n\n      return Promise.reject(new _feathersErrors2.default.NotFound('No record found for id \\'' + id + '\\''));\n    }\n  }, {\n    key: 'remove',\n    value: function remove(id, params) {\n      var _this3 = this;\n\n      if (id === null) {\n        return this._find(params).then(function (page) {\n          return Promise.all(page.data.map(function (current) {\n            return _this3._remove(current[_this3._id], params);\n          }));\n        });\n      }\n\n      return this._remove(id, params);\n    }\n  }]);\n\n  return Service;\n}();\n\nfunction init(options) {\n  return new Service(options);\n}\n\ninit.Service = Service;\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-memory/lib/index.js\n// module id = 4\n// module chunks = 0","/* global define */\n/**\n * A base object for ECMAScript 5 style prototypal inheritance.\n *\n * @see https://github.com/rauschma/proto-js/\n * @see http://ejohn.org/blog/simple-javascript-inheritance/\n * @see http://uxebu.com/blog/2011/02/23/object-based-inheritance-for-ecmascript-5/\n */\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.Proto = factory();\n\t}\n}(this, function () {\n\n\tfunction makeSuper(_super, old, name, fn) {\n\t\treturn function () {\n\t\t\tvar tmp = this._super;\n\n\t\t\t// Add a new ._super() method that is the same method\n\t\t\t// but either pointing to the prototype method\n\t\t\t// or to the overwritten method\n\t\t\tthis._super = (typeof old === 'function') ? old : _super[name];\n\n\t\t\t// The method only need to be bound temporarily, so we\n\t\t\t// remove it when we're done executing\n\t\t\tvar ret = fn.apply(this, arguments);\n\t\t\tthis._super = tmp;\n\n\t\t\treturn ret;\n\t\t};\n\t}\n\n\tfunction legacyMixin(prop, obj) {\n\t\tvar self = obj || this;\n\t\tvar fnTest = /\\b_super\\b/;\n\t\tvar _super = Object.getPrototypeOf(self) || self.prototype;\n\t\tvar _old;\n\n\t\t// Copy the properties over\n\t\tfor (var name in prop) {\n\t\t\t// store the old function which would be overwritten\n\t\t\t_old = self[name];\n\n\t\t\t// Check if we're overwriting an existing function\n\t\t\tif(\n\t\t\t\t\t((\n\t\t\t\t\t\ttypeof prop[name] === 'function' &&\n\t\t\t\t\t\ttypeof _super[name] === 'function'\n\t\t\t\t\t) || (\n\t\t\t\t\t\ttypeof _old === 'function' &&\n\t\t\t\t\t\ttypeof prop[name] === 'function'\n\t\t\t\t\t)) && fnTest.test(prop[name])\n\t\t\t) {\n\t\t\t\tself[name] = makeSuper(_super, _old, name, prop[name]);\n\t\t\t} else {\n\t\t\t\tself[name] = prop[name];\n\t\t\t}\n\t\t}\n\n\t\treturn self;\n\t}\n\n\tfunction es5Mixin(prop, obj) {\n\t\tvar self = obj || this;\n\t\tvar fnTest = /\\b_super\\b/;\n\t\tvar _super = Object.getPrototypeOf(self) || self.prototype;\n\t\tvar descriptors = {};\n\t\tvar proto = prop;\n\t\tvar processProperty = function(name) {\n\t\t\tif(!descriptors[name]) {\n\t\t\t\tdescriptors[name] = Object.getOwnPropertyDescriptor(proto, name);\n\t\t\t}\n\t\t};\n\n\t\t// Collect all property descriptors\n\t\tdo {\n\t\t\tObject.getOwnPropertyNames(proto).forEach(processProperty);\n    } while((proto = Object.getPrototypeOf(proto)) && Object.getPrototypeOf(proto));\n\t\t\n\t\tObject.keys(descriptors).forEach(function(name) {\n\t\t\tvar descriptor = descriptors[name];\n\n\t\t\tif(typeof descriptor.value === 'function' && fnTest.test(descriptor.value)) {\n\t\t\t\tdescriptor.value = makeSuper(_super, self[name], name, descriptor.value);\n\t\t\t}\n\n\t\t\tObject.defineProperty(self, name, descriptor);\n\t\t});\n\n\t\treturn self;\n\t}\n\n\treturn {\n\t\t/**\n\t\t * Create a new object using Object.create. The arguments will be\n\t\t * passed to the new instances init method or to a method name set in\n\t\t * __init.\n\t\t */\n\t\tcreate: function () {\n\t\t\tvar instance = Object.create(this);\n\t\t\tvar init = typeof instance.__init === 'string' ? instance.__init : 'init';\n\n\t\t\tif (typeof instance[init] === 'function') {\n\t\t\t\tinstance[init].apply(instance, arguments);\n\t\t\t}\n\t\t\treturn instance;\n\t\t},\n\t\t/**\n\t\t * Mixin a given set of properties\n\t\t * @param prop The properties to mix in\n\t\t * @param obj [optional] The object to add the mixin\n\t\t */\n\t\tmixin: typeof Object.defineProperty === 'function' ? es5Mixin : legacyMixin,\n\t\t/**\n\t\t * Extend the current or a given object with the given property\n\t\t * and return the extended object.\n\t\t * @param prop The properties to extend with\n\t\t * @param obj [optional] The object to extend from\n\t\t * @returns The extended object\n\t\t */\n\t\textend: function (prop, obj) {\n\t\t\treturn this.mixin(prop, Object.create(obj || this));\n\t\t},\n\t\t/**\n\t\t * Return a callback function with this set to the current or a given context object.\n\t\t * @param name Name of the method to proxy\n\t\t * @param args... [optional] Arguments to use for partial application\n\t\t */\n\t\tproxy: function (name) {\n\t\t\tvar fn = this[name];\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\t\targs.unshift(this);\n\t\t\treturn fn.bind.apply(fn, args);\n\t\t}\n\t};\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uberproto/lib/proto.js\n// module id = 5\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = function (query, paginate) {\n  var filters = {\n    $sort: convertSort(query.$sort),\n    $limit: getLimit(parse(query.$limit), paginate),\n    $skip: parse(query.$skip),\n    $select: query.$select,\n    $populate: query.$populate\n  };\n\n  return { filters: filters, query: _feathersCommons._.omit.apply(_feathersCommons._, [query].concat(PROPERTIES)) };\n};\n\nvar _feathersCommons = require('feathers-commons');\n\nvar PROPERTIES = ['$sort', '$limit', '$skip', '$select', '$populate'];\n\nfunction parse(number) {\n  if (typeof number !== 'undefined') {\n    return Math.abs(parseInt(number, 10));\n  }\n}\n\nfunction getLimit(limit, paginate) {\n  if (paginate && paginate.default) {\n    var lower = typeof limit === 'number' ? limit : paginate.default;\n    var upper = typeof paginate.max === 'number' ? paginate.max : Number.MAX_VALUE;\n\n    return Math.min(lower, upper);\n  }\n\n  return limit;\n}\n\nfunction convertSort(sort) {\n  if ((typeof sort === 'undefined' ? 'undefined' : _typeof(sort)) !== 'object') {\n    return sort;\n  }\n\n  var result = {};\n\n  Object.keys(sort).forEach(function (key) {\n    return result[key] = _typeof(sort[key]) === 'object' ? sort[key] : parseInt(sort[key], 10);\n  });\n\n  return result;\n}\n\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-query-filters/lib/index.js\n// module id = 6\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _arguments = require('./arguments');\n\nvar _arguments2 = _interopRequireDefault(_arguments);\n\nvar _utils = require('./utils');\n\nvar _hooks = require('./hooks');\n\nvar _hooks2 = _interopRequireDefault(_hooks);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  _: _utils._,\n  getArguments: _arguments2.default,\n  stripSlashes: _utils.stripSlashes,\n  hooks: _hooks2.default,\n  matcher: _utils.matcher,\n  sorter: _utils.sorter,\n  select: _utils.select,\n  makeUrl: _utils.makeUrl,\n  // lodash functions\n  each: _utils.each,\n  some: _utils.some,\n  every: _utils.every,\n  keys: _utils.keys,\n  values: _utils.values,\n  isMatch: _utils.isMatch,\n  isEmpty: _utils.isEmpty,\n  isObject: _utils.isObject,\n  extend: _utils.extend,\n  omit: _utils.omit,\n  pick: _utils.pick,\n  merge: _utils.merge\n};\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-commons/lib/commons.js\n// module id = 7\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getArguments;\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nvar noop = exports.noop = function noop() {};\nvar getCallback = function getCallback(args) {\n  var last = args[args.length - 1];\n  return typeof last === 'function' ? last : noop;\n};\nvar getParams = function getParams(args, position) {\n  return _typeof(args[position]) === 'object' ? args[position] : {};\n};\n\nvar updateOrPatch = function updateOrPatch(name) {\n  return function (args) {\n    var id = args[0];\n    var data = args[1];\n    var callback = getCallback(args);\n    var params = getParams(args, 2);\n\n    if (typeof id === 'function') {\n      throw new Error('First parameter for \\'' + name + '\\' can not be a function');\n    }\n\n    if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) !== 'object') {\n      throw new Error('No data provided for \\'' + name + '\\'');\n    }\n\n    if (args.length > 4) {\n      throw new Error('Too many arguments for \\'' + name + '\\' service method');\n    }\n\n    return [id, data, params, callback];\n  };\n};\n\nvar getOrRemove = function getOrRemove(name) {\n  return function (args) {\n    var id = args[0];\n    var params = getParams(args, 1);\n    var callback = getCallback(args);\n\n    if (args.length > 3) {\n      throw new Error('Too many arguments for \\'' + name + '\\' service method');\n    }\n\n    if (typeof id === 'function') {\n      throw new Error('First parameter for \\'' + name + '\\' can not be a function');\n    }\n\n    return [id, params, callback];\n  };\n};\n\nvar converters = exports.converters = {\n  find: function find(args) {\n    var callback = getCallback(args);\n    var params = getParams(args, 0);\n\n    if (args.length > 2) {\n      throw new Error('Too many arguments for \\'find\\' service method');\n    }\n\n    return [params, callback];\n  },\n  create: function create(args) {\n    var data = args[0];\n    var params = getParams(args, 1);\n    var callback = getCallback(args);\n\n    if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) !== 'object') {\n      throw new Error('First parameter for \\'create\\' must be an object');\n    }\n\n    if (args.length > 3) {\n      throw new Error('Too many arguments for \\'create\\' service method');\n    }\n\n    return [data, params, callback];\n  },\n\n  update: updateOrPatch('update'),\n\n  patch: updateOrPatch('patch'),\n\n  get: getOrRemove('get'),\n\n  remove: getOrRemove('remove')\n};\n\nfunction getArguments(method, args) {\n  return converters[method](args);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-commons/lib/arguments.js\n// module id = 8\n// module chunks = 0","'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.stripSlashes = stripSlashes;\nexports.each = each;\nexports.some = some;\nexports.every = every;\nexports.keys = keys;\nexports.values = values;\nexports.isMatch = isMatch;\nexports.isEmpty = isEmpty;\nexports.isObject = isObject;\nexports.extend = extend;\nexports.omit = omit;\nexports.pick = pick;\nexports.merge = merge;\nexports.select = select;\nexports.matcher = matcher;\nexports.sorter = sorter;\nexports.makeUrl = makeUrl;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction stripSlashes(name) {\n  return name.replace(/^(\\/*)|(\\/*)$/g, '');\n}\n\nfunction each(obj, callback) {\n  if (obj && typeof obj.forEach === 'function') {\n    obj.forEach(callback);\n  } else if (isObject(obj)) {\n    Object.keys(obj).forEach(function (key) {\n      return callback(obj[key], key);\n    });\n  }\n}\n\nfunction some(value, callback) {\n  return Object.keys(value).map(function (key) {\n    return [value[key], key];\n  }).some(function (current) {\n    return callback.apply(undefined, _toConsumableArray(current));\n  });\n}\n\nfunction every(value, callback) {\n  return Object.keys(value).map(function (key) {\n    return [value[key], key];\n  }).every(function (current) {\n    return callback.apply(undefined, _toConsumableArray(current));\n  });\n}\n\nfunction keys(obj) {\n  return Object.keys(obj);\n}\n\nfunction values(obj) {\n  return _.keys(obj).map(function (key) {\n    return obj[key];\n  });\n}\n\nfunction isMatch(obj, item) {\n  return _.keys(item).every(function (key) {\n    return obj[key] === item[key];\n  });\n}\n\nfunction isEmpty(obj) {\n  return _.keys(obj).length === 0;\n}\n\nfunction isObject(item) {\n  return (typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && !Array.isArray(item) && item !== null;\n}\n\nfunction extend() {\n  return _extends.apply(undefined, arguments);\n}\n\nfunction omit(obj) {\n  var result = _.extend({}, obj);\n\n  for (var _len = arguments.length, keys = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    keys[_key - 1] = arguments[_key];\n  }\n\n  keys.forEach(function (key) {\n    return delete result[key];\n  });\n  return result;\n}\n\nfunction pick(source) {\n  var result = {};\n\n  for (var _len2 = arguments.length, keys = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    keys[_key2 - 1] = arguments[_key2];\n  }\n\n  keys.forEach(function (key) {\n    result[key] = source[key];\n  });\n  return result;\n}\n\nfunction merge(target, source) {\n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach(function (key) {\n      if (isObject(source[key])) {\n        if (!target[key]) _extends(target, _defineProperty({}, key, {}));\n        merge(target[key], source[key]);\n      } else {\n        _extends(target, _defineProperty({}, key, source[key]));\n      }\n    });\n  }\n  return target;\n}\n\nvar _ = exports._ = {\n  each: each,\n  some: some,\n  every: every,\n  keys: keys,\n  values: values,\n  isMatch: isMatch,\n  isEmpty: isEmpty,\n  isObject: isObject,\n  extend: extend,\n  omit: omit,\n  pick: pick,\n  merge: merge\n};\n\nvar specialFilters = exports.specialFilters = {\n  $in: function $in(key, ins) {\n    return function (current) {\n      return ins.indexOf(current[key]) !== -1;\n    };\n  },\n  $nin: function $nin(key, nins) {\n    return function (current) {\n      return nins.indexOf(current[key]) === -1;\n    };\n  },\n  $lt: function $lt(key, value) {\n    return function (current) {\n      return current[key] < value;\n    };\n  },\n  $lte: function $lte(key, value) {\n    return function (current) {\n      return current[key] <= value;\n    };\n  },\n  $gt: function $gt(key, value) {\n    return function (current) {\n      return current[key] > value;\n    };\n  },\n  $gte: function $gte(key, value) {\n    return function (current) {\n      return current[key] >= value;\n    };\n  },\n  $ne: function $ne(key, value) {\n    return function (current) {\n      return current[key] !== value;\n    };\n  }\n};\n\nfunction select(params) {\n  var fields = params && params.query && params.query.$select;\n\n  for (var _len3 = arguments.length, otherFields = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    otherFields[_key3 - 1] = arguments[_key3];\n  }\n\n  if (Array.isArray(fields) && otherFields.length) {\n    fields.push.apply(fields, otherFields);\n  }\n\n  var convert = function convert(result) {\n    if (!Array.isArray(fields)) {\n      return result;\n    }\n\n    return _.pick.apply(_, [result].concat(_toConsumableArray(fields)));\n  };\n\n  return function (result) {\n    if (Array.isArray(result)) {\n      return result.map(convert);\n    }\n\n    return convert(result);\n  };\n}\n\nfunction matcher(originalQuery) {\n  var query = _.omit(originalQuery, '$limit', '$skip', '$sort', '$select');\n\n  return function (item) {\n    if (query.$or && _.some(query.$or, function (or) {\n      return matcher(or)(item);\n    })) {\n      return true;\n    }\n\n    return _.every(query, function (value, key) {\n      if (value !== null && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n        return _.every(value, function (target, filterType) {\n          if (specialFilters[filterType]) {\n            var filter = specialFilters[filterType](key, target);\n            return filter(item);\n          }\n\n          return false;\n        });\n      } else if (typeof item[key] !== 'undefined') {\n        return item[key] === query[key];\n      }\n\n      return false;\n    });\n  };\n}\n\nfunction sorter($sort) {\n  return function (first, second) {\n    var comparator = 0;\n    each($sort, function (modifier, key) {\n      modifier = parseInt(modifier, 10);\n\n      if (first[key] < second[key]) {\n        comparator -= 1 * modifier;\n      }\n\n      if (first[key] > second[key]) {\n        comparator += 1 * modifier;\n      }\n    });\n    return comparator;\n  };\n}\n\nfunction makeUrl(path) {\n  var app = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  var get = typeof app.get === 'function' ? app.get.bind(app) : function () {};\n  var env = get('env') || process.env.NODE_ENV;\n  var host = get('host') || process.env.HOST_NAME || 'localhost';\n  var protocol = env === 'development' || env === 'test' || env === undefined ? 'http' : 'https';\n  var PORT = get('port') || process.env.PORT || 3030;\n  var port = env === 'development' || env === 'test' || env === undefined ? ':' + PORT : '';\n\n  path = path || '';\n\n  return protocol + '://' + host + port + '/' + stripSlashes(path);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-commons/lib/utils.js\n// module id = 9\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 10\n// module chunks = 0","'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require('./utils');\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction getOrRemove(args) {\n  return {\n    id: args[0],\n    params: args[1],\n    callback: args[2]\n  };\n}\n\nfunction updateOrPatch(args) {\n  return {\n    id: args[0],\n    data: args[1],\n    params: args[2],\n    callback: args[3]\n  };\n}\n\nvar converters = {\n  find: function find(args) {\n    return {\n      params: args[0],\n      callback: args[1]\n    };\n  },\n  create: function create(args) {\n    return {\n      data: args[0],\n      params: args[1],\n      callback: args[2]\n    };\n  },\n  get: getOrRemove,\n  remove: getOrRemove,\n  update: updateOrPatch,\n  patch: updateOrPatch\n};\n\nfunction hookObject(method, type, args) {\n  var app = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n  var hook = converters[method](args);\n\n  hook.method = method;\n  hook.type = type;\n\n  if (typeof app === 'function') {\n    hook.app = app;\n  } else {\n    _extends(hook, app);\n  }\n\n  return hook;\n}\n\nfunction defaultMakeArguments(hook) {\n  var result = [];\n  if (typeof hook.id !== 'undefined') {\n    result.push(hook.id);\n  }\n\n  if (hook.data) {\n    result.push(hook.data);\n  }\n\n  result.push(hook.params || {});\n  result.push(hook.callback);\n\n  return result;\n}\n\nfunction makeArguments(hook) {\n  if (hook.method === 'find') {\n    return [hook.params, hook.callback];\n  }\n\n  if (hook.method === 'get' || hook.method === 'remove') {\n    return [hook.id, hook.params, hook.callback];\n  }\n\n  if (hook.method === 'update' || hook.method === 'patch') {\n    return [hook.id, hook.data, hook.params, hook.callback];\n  }\n\n  if (hook.method === 'create') {\n    return [hook.data, hook.params, hook.callback];\n  }\n\n  return defaultMakeArguments(hook);\n}\n\nfunction convertHookData(obj) {\n  var hook = {};\n\n  if (Array.isArray(obj)) {\n    hook = { all: obj };\n  } else if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') {\n    hook = { all: [obj] };\n  } else {\n    (0, _utils.each)(obj, function (value, key) {\n      hook[key] = !Array.isArray(value) ? [value] : value;\n    });\n  }\n\n  return hook;\n}\n\nexports.default = {\n  hookObject: hookObject,\n  hook: hookObject,\n  converters: converters,\n  defaultMakeArguments: defaultMakeArguments,\n  makeArguments: makeArguments,\n  convertHookData: convertHookData\n};\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-commons/lib/hooks.js\n// module id = 11\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar debug = require('debug')('feathers-errors');\n\nfunction FeathersError(msg, name, code, className, data) {\n  msg = msg || 'Error';\n\n  var errors = void 0;\n  var message = void 0;\n  var newData = void 0;\n\n  if (msg instanceof Error) {\n    message = msg.message || 'Error';\n\n    // NOTE (EK): This is typically to handle validation errors\n    if (msg.errors) {\n      errors = msg.errors;\n    }\n  } else if ((typeof msg === 'undefined' ? 'undefined' : _typeof(msg)) === 'object') {\n    // Support plain old objects\n    message = msg.message || 'Error';\n    data = msg;\n  } else {\n    // message is just a string\n    message = msg;\n  }\n\n  Error.call(this, message);\n\n  if (data) {\n    // NOTE(EK): To make sure that we are not messing\n    // with immutable data, just make a copy.\n    // https://github.com/feathersjs/feathers-errors/issues/19\n    newData = JSON.parse(JSON.stringify(data));\n\n    if (newData.errors) {\n      errors = newData.errors;\n      delete newData.errors;\n    } else if (data.errors) {\n      // The errors property from data could be\n      // stripped away while cloning resulting newData not to have it\n      // For example: when cloning arrays this property\n      errors = JSON.parse(JSON.stringify(data.errors));\n    }\n  }\n\n  // NOTE (EK): Babel doesn't support this so\n  // we have to pass in the class name manually.\n  // this.name = this.constructor.name;\n  this.type = 'FeathersError';\n  this.name = name;\n  this.message = message;\n  this.code = code;\n  this.className = className;\n  this.data = newData;\n  this.errors = errors || {};\n\n  debug(this.name + '(' + this.code + '): ' + this.message);\n  debug(this.errors);\n}\n\nFeathersError.prototype = new Error();\n\n// NOTE (EK): A little hack to get around `message` not\n// being included in the default toJSON call.\nObject.defineProperty(FeathersError.prototype, 'toJSON', {\n  value: function value() {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      className: this.className,\n      data: this.data,\n      errors: this.errors\n    };\n  }\n});\n\n// 400 - Bad Request\nfunction BadRequest(message, data) {\n  FeathersError.call(this, message, 'BadRequest', 400, 'bad-request', data);\n}\n\nBadRequest.prototype = new FeathersError();\n\n// 401 - Not Authenticated\nfunction NotAuthenticated(message, data) {\n  FeathersError.call(this, message, 'NotAuthenticated', 401, 'not-authenticated', data);\n}\n\nNotAuthenticated.prototype = new FeathersError();\n\n// 402 - Payment Error\nfunction PaymentError(message, data) {\n  FeathersError.call(this, message, 'PaymentError', 402, 'payment-error', data);\n}\n\nPaymentError.prototype = new FeathersError();\n\n// 403 - Forbidden\nfunction Forbidden(message, data) {\n  FeathersError.call(this, message, 'Forbidden', 403, 'forbidden', data);\n}\n\nForbidden.prototype = new FeathersError();\n\n// 404 - Not Found\nfunction NotFound(message, data) {\n  FeathersError.call(this, message, 'NotFound', 404, 'not-found', data);\n}\n\nNotFound.prototype = new FeathersError();\n\n// 405 - Method Not Allowed\nfunction MethodNotAllowed(message, data) {\n  FeathersError.call(this, message, 'MethodNotAllowed', 405, 'method-not-allowed', data);\n}\n\nMethodNotAllowed.prototype = new FeathersError();\n\n// 406 - Not Acceptable\nfunction NotAcceptable(message, data) {\n  FeathersError.call(this, message, 'NotAcceptable', 406, 'not-acceptable', data);\n}\n\nNotAcceptable.prototype = new FeathersError();\n\n// 408 - Timeout\nfunction Timeout(message, data) {\n  FeathersError.call(this, message, 'Timeout', 408, 'timeout', data);\n}\n\nTimeout.prototype = new FeathersError();\n\n// 409 - Conflict\nfunction Conflict(message, data) {\n  FeathersError.call(this, message, 'Conflict', 409, 'conflict', data);\n}\n\nConflict.prototype = new FeathersError();\n\n// 411 - Length Required\nfunction LengthRequired(message, data) {\n  FeathersError.call(this, message, 'LengthRequired', 411, 'length-required', data);\n}\n\nLengthRequired.prototype = new FeathersError();\n\n// 422 Unprocessable\nfunction Unprocessable(message, data) {\n  FeathersError.call(this, message, 'Unprocessable', 422, 'unprocessable', data);\n}\n\nUnprocessable.prototype = new FeathersError();\n\n// 429 Too Many Requests\nfunction TooManyRequests(message, data) {\n  FeathersError.call(this, message, 'TooManyRequests', 429, 'too-many-requests', data);\n}\n\nTooManyRequests.prototype = new FeathersError();\n\n// 500 - General Error\nfunction GeneralError(message, data) {\n  FeathersError.call(this, message, 'GeneralError', 500, 'general-error', data);\n}\n\nGeneralError.prototype = new FeathersError();\n\n// 501 - Not Implemented\nfunction NotImplemented(message, data) {\n  FeathersError.call(this, message, 'NotImplemented', 501, 'not-implemented', data);\n}\n\nNotImplemented.prototype = new FeathersError();\n\n// 502 - Bad Gateway\nfunction BadGateway(message, data) {\n  FeathersError.call(this, message, 'BadGateway', 502, 'bad-gateway', data);\n}\n\nBadGateway.prototype = new FeathersError();\n\n// 503 - Unavailable\nfunction Unavailable(message, data) {\n  FeathersError.call(this, message, 'Unavailable', 503, 'unavailable', data);\n}\n\nUnavailable.prototype = new FeathersError();\n\nvar errors = {\n  FeathersError: FeathersError,\n  BadRequest: BadRequest,\n  NotAuthenticated: NotAuthenticated,\n  PaymentError: PaymentError,\n  Forbidden: Forbidden,\n  NotFound: NotFound,\n  MethodNotAllowed: MethodNotAllowed,\n  NotAcceptable: NotAcceptable,\n  Timeout: Timeout,\n  Conflict: Conflict,\n  LengthRequired: LengthRequired,\n  Unprocessable: Unprocessable,\n  TooManyRequests: TooManyRequests,\n  GeneralError: GeneralError,\n  NotImplemented: NotImplemented,\n  BadGateway: BadGateway,\n  Unavailable: Unavailable,\n  400: BadRequest,\n  401: NotAuthenticated,\n  402: PaymentError,\n  403: Forbidden,\n  404: NotFound,\n  405: MethodNotAllowed,\n  406: NotAcceptable,\n  408: Timeout,\n  409: Conflict,\n  411: LengthRequired,\n  422: Unprocessable,\n  429: TooManyRequests,\n  500: GeneralError,\n  501: NotImplemented,\n  502: BadGateway,\n  503: Unavailable\n};\n\nfunction convert(error) {\n  if (!error) {\n    return error;\n  }\n\n  var FeathersError = errors[error.name];\n  var result = FeathersError ? new FeathersError(error.message, error.data) : new Error(error.message || error);\n\n  if ((typeof error === 'undefined' ? 'undefined' : _typeof(error)) === 'object') {\n    _extends(result, error);\n  }\n\n  return result;\n}\n\nexports.default = _extends({\n  convert: convert,\n  types: errors,\n  errors: errors\n}, errors);\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-errors/lib/index.js\n// module id = 12\n// module chunks = 0","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/debug/src/browser.js\n// module id = 13\n// module chunks = 0","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/debug/src/debug.js\n// module id = 14\n// module chunks = 0","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ms/index.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = require('feathers-commons/lib/utils');\n\nvar _resource = require('./resource');\n\nvar _resource2 = _interopRequireDefault(_resource);\n\nvar _list = require('./list');\n\nvar _list2 = _interopRequireDefault(_list);\n\nvar _strategies = require('./strategies');\n\nvar _strategies2 = _interopRequireDefault(_strategies);\n\nvar _utils2 = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar debug = require('debug')('feathers-reactive');\n\nfunction FeathersRx(Rx, options) {\n  if (!Rx) {\n    throw new Error('You have to pass an instance of RxJS as the first paramter.');\n  }\n\n  if (!Rx.Observable) {\n    throw new Error('The RxJS instance does not seem to provide an `Observable` type.');\n  }\n\n  var listStrategies = (0, _strategies2.default)(Rx);\n\n  options = Object.assign({\n    idField: 'id',\n    dataField: 'data',\n    sorter: _utils2.makeSorter,\n    lazy: false,\n    matcher: _utils.matcher,\n    // Whether to requery service when a change is detected\n    listStrategy: 'smart',\n    listStrategies: listStrategies\n  }, options);\n\n  var mixin = function mixin(service) {\n    var app = this;\n    var mixin = {\n      rx: function rx() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        this._rx = options;\n        return this;\n      }\n    };\n    var events = {\n      created: Rx.Observable.fromEvent(service, 'created'),\n      updated: Rx.Observable.fromEvent(service, 'updated'),\n      patched: Rx.Observable.fromEvent(service, 'patched'),\n      removed: Rx.Observable.fromEvent(service, 'removed')\n    };\n\n    app.methods.forEach(function (method) {\n      if (typeof service[method] === 'function') {\n        mixin[method] = method === 'find' ? (0, _list2.default)(Rx, events, options) : (0, _resource2.default)(Rx, events, options, method);\n      }\n    });\n\n    service.mixin(mixin);\n  };\n\n  return function () {\n    debug('Initializing feathers-reactive plugin');\n\n    this.mixins.push(mixin);\n  };\n}\n\nFeathersRx.strategy = _strategies2.default;\n\nexports.default = FeathersRx;\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-reactive/lib/index.js\n// module id = 16\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.paramsPositions = undefined;\n\nexports.default = function (Rx, events, settings, method) {\n  return function () {\n    var args = arguments;\n    var position = typeof paramsPositions[method] !== 'undefined' ? paramsPositions[method] : 1;\n    var params = arguments[position] || {};\n\n    if (this._rx === false || params.rx === false) {\n      return this._super.apply(this, _toConsumableArray(args));\n    }\n\n    var options = (0, _utils.getOptions)(settings, this._rx, params.rx);\n    var source = (0, _utils.getSource)(Rx, options.lazy, this._super.bind(this), args);\n    var stream = source.concat(source.exhaustMap(function (data) {\n      // Filter only data with the same id\n      var filter = function filter(current) {\n        return current[options.idField] === data[options.idField];\n      };\n      // `removed` events get special treatment\n      var filteredRemoves = events.removed.filter(filter);\n      // `created`, `updated` and `patched`\n      var filteredEvents = Rx.Observable.merge(events.created, events.updated, events.patched).filter(filter);\n\n      return Rx.Observable.merge(\n      // Map to a callback that merges old and new data\n      filteredEvents,\n      // filtered `removed` events always map to a function that returns `null`\n      filteredRemoves.map(function () {\n        return null;\n      }));\n    }));\n\n    return (0, _utils.promisify)(stream);\n  };\n};\n\nvar _utils = require('./utils');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// The position of the params parameters for a service method so that we can extend them\n// default is 1\nvar paramsPositions = exports.paramsPositions = {\n  update: 2,\n  patch: 2\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-reactive/lib/resource.js\n// module id = 17\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.getSource = getSource;\nexports.promisify = promisify;\nexports.makeSorter = makeSorter;\nexports.getOptions = getOptions;\n\nvar _utils = require('feathers-commons/lib/utils');\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction getSource(Rx, lazy, __super, args) {\n  if (lazy === true) {\n    var _ret = function () {\n      var result = null;\n\n      return {\n        v: Rx.Observable.create(function (observer) {\n          var _observer = observer;\n\n          if (!result) {\n            result = __super.apply(undefined, _toConsumableArray(args));\n          }\n\n          if (!result || typeof result.then !== 'function' || typeof result.catch !== 'function') {\n            throw new Error('feathers-reactive only works with services that return a Promise');\n          }\n\n          result.then(function (res) {\n            _observer.next(res);\n            _observer.complete();\n          }).catch(function (e) {\n            return _observer.error(e);\n          });\n        })\n      };\n    }();\n\n    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n  }\n\n  return Rx.Observable.fromPromise(__super.apply(undefined, _toConsumableArray(args)));\n}\n\nfunction promisify(stream) {\n  return Object.assign(stream, {\n    then: function then() {\n      var _first$toPromise;\n\n      return (_first$toPromise = this.first().toPromise()).then.apply(_first$toPromise, arguments);\n    },\n    catch: function _catch() {\n      var _first$toPromise2;\n\n      return (_first$toPromise2 = this.first().toPromise()).catch.apply(_first$toPromise2, arguments);\n    }\n  });\n}\n\nfunction makeSorter(query, options) {\n  // The sort function (if $sort is set)\n  var sorter = query.$sort ? (0, _utils.sorter)(query.$sort) : (0, _utils.sorter)(_defineProperty({}, options.idField, 1));\n\n  return function (result) {\n    var isPaginated = !!result[options.dataField];\n    var data = isPaginated ? result[options.dataField] : result;\n\n    if (sorter) {\n      data = data.sort(sorter);\n    }\n\n    var limit = typeof result.limit === 'number' ? result.limit : parseInt(query.$limit, 10);\n\n    if (limit && !isNaN(limit)) {\n      data = data.slice(0, limit);\n    }\n\n    if (isPaginated) {\n      result[options.dataField] = data;\n    } else {\n      result = data;\n    }\n\n    return result;\n  };\n}\n\nfunction getOptions(base) {\n  for (var _len = arguments.length, others = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    others[_key - 1] = arguments[_key];\n  }\n\n  var options = Object.assign.apply(Object, [{}, base].concat(others));\n\n  if (typeof options.listStrategy === 'string') {\n    options.listStrategy = options.listStrategies[options.listStrategy];\n  }\n\n  return options;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-reactive/lib/utils.js\n// module id = 18\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (Rx, events, settings) {\n  return function () {\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var args = arguments;\n\n    if (this._rx === false || params.rx === false) {\n      return this._super.apply(this, _toConsumableArray(args));\n    }\n\n    var options = (0, _utils.getOptions)(settings, this._rx, params.rx);\n    var source = (0, _utils.getSource)(Rx, options.lazy, this._super.bind(this), arguments);\n    var stream = options.listStrategy.call(this, source, events, options, args);\n\n    return (0, _utils.promisify)(stream);\n  };\n};\n\nvar _utils = require('./utils');\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-reactive/lib/list.js\n// module id = 19\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (Rx) {\n  return {\n    never: function never(source) {\n      return source;\n    },\n    always: function always(source, events, options, args) {\n      var params = args[0] || {};\n      var query = Object.assign({}, params.query);\n      var _super = this._super.bind(this);\n\n      // A function that returns if an item matches the query\n      var matches = options.matcher(query);\n      // A function that sorts a limits a result (paginated or not)\n      var sortAndTrim = options.sorter(query, options);\n\n      return source.concat(source.exhaustMap(function () {\n        return Rx.Observable.merge(events.created.filter(matches), events.removed, events.updated, events.patched).flatMap(function () {\n          var source = Rx.Observable.fromPromise(_super.apply(undefined, _toConsumableArray(args)));\n\n          return source.map(sortAndTrim);\n        });\n      }));\n    },\n    smart: function smart(source, events, options, args) {\n      var params = args[0] || {};\n      var query = Object.assign({}, params.query);\n      // A function that returns if an item matches the query\n      var matches = options.matcher(query);\n      // A function that sorts a limits a result (paginated or not)\n      var sortAndTrim = options.sorter(query, options);\n      var onCreated = function onCreated(eventData) {\n        return function (page) {\n          var isPaginated = !!page[options.dataField];\n          var process = function process(data) {\n            return data.concat(eventData);\n          };\n\n          if (isPaginated) {\n            return Object.assign({}, page, _defineProperty({\n              total: page.total + 1\n            }, options.dataField, process(page[options.dataField])));\n          }\n\n          return process(page);\n        };\n      };\n      var onRemoved = function onRemoved(eventData) {\n        return function (page) {\n          var isPaginated = !!page[options.dataField];\n          var process = function process(data) {\n            return data.filter(function (current) {\n              return eventData[options.idField] !== current[options.idField];\n            });\n          };\n\n          if (isPaginated) {\n            return Object.assign({}, page, _defineProperty({\n              total: matches(eventData) ? page.total - 1 : page.total\n            }, options.dataField, process(page[options.dataField])));\n          }\n\n          return process(page);\n        };\n      };\n      var onUpdated = function onUpdated(eventData) {\n        return function (page) {\n          var isPaginated = !!page[options.dataField];\n          var length = isPaginated ? page[options.dataField].length : page.length;\n          var process = function process(data) {\n            return data.filter(function (current) {\n              return eventData[options.idField] !== current[options.idField];\n            }).concat(eventData).filter(matches);\n          };\n\n          if (isPaginated) {\n            var processed = process(page[options.dataField]);\n            return Object.assign({}, page, _defineProperty({\n              // Total can be either decreased or increased based\n              // on if the update removed or added the item to the list\n              total: page.total - (length - processed.length)\n            }, options.dataField, processed));\n          }\n\n          return process(page);\n        };\n      };\n\n      return source.concat(source.exhaustMap(function (data) {\n        return Rx.Observable.merge(events.created.filter(matches).map(onCreated), events.removed.map(onRemoved), Rx.Observable.merge(events.updated, events.patched).map(onUpdated)).scan(function (current, callback) {\n          return sortAndTrim(callback(current));\n        }, data);\n      }));\n    }\n  };\n};\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.exports = exports[\"default\"];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/feathers-reactive/lib/strategies.js\n// module id = 20\n// module chunks = 0","import feathers from 'feathers';\n\nexport default function feathersAuth(app, provider, authStorage, $rootScope) {\n    app.configure(feathers.authentication({\n        storage: authStorage\n    }));\n\n    app.tokenAuth = function () {\n        return provider.app.authenticate({\n            type: 'token',\n            'token': window.localStorage['feathers-jwt']\n        }).then(function (result) {\n            console.info('jwt authenticated at ', Date.now());\n            $rootScope.user = result.data;\n            return true;\n        }).catch(function (error) {\n            console.error('Error authenticating!', error);\n            provider.app.logout();\n            return false;\n        });\n    }\n\n    app.localAuth = function (user, pass) {\n        return provider.app.authenticate({\n            type: 'local',\n            'username': user,\n            'password': pass\n        }).then(function (result) {\n            console.log('Authenticated!', result);\n            $rootScope.user = result.data;\n            $rootScope.authenticated = true;\n            $rootScope.token = result['token'];\n            return result;\n        }).catch(function (error) {\n            console.error('Error authenticating!', error);\n            that.app.tokenLogout();\n            return error;\n        });\n    };\n\n    app.tokenLogout = function () {\n        provider.app.logout();\n        window.localStorage.removeItem('feathers-jwt');\n        $rootScope.authenticated = false;\n        $rootScope.user = null;\n        $rootScope.token = null;\n        console.log('Logged out.');\n    };\n\n    return app;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/auth.js","export default function setupUtilityFunctions(app, $mdToast, $rootScope) {\n\n    app.showToast = function (msg, toastClass, delay) {\n        if (!toastClass)\n            var toastClass = '';\n        if (!delay)\n            var delay = 3000;\n\n        var toast = $mdToast.simple()\n            .textContent(msg)\n            .action('Hide')\n            .hideDelay(delay)\n            .position('bottom left')\n            .highlightAction(false)\n            .toastClass(toastClass);\n        $mdToast.show(toast);\n        console.debug('showToast ', toastClass, msg);\n    };\n\n\n    $rootScope.showToast = function (a, b, c) {\n        app.showToast(a, b, c); //Legacy support\n    };\n\n\n    return app;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./styles.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles.css\n// module id = 23\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.activityPaymentSummaryCard{margin-bottom:8px;margin-top:8px;background:none;box-shadow:none;position:relative}.paymentSummaryCard{min-width:100%;margin-bottom:8px;margin-right:16px;margin-top:8px;background:none;box-shadow:none}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:16px;padding-left:16px}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:16px}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;outline:none}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.activityCardForm{margin:0 16px}.activityForm{padding-left:24px;padding-right:16px}.questionForm{padding-left:16px;padding-right:40px}.formHeader{padding:16px 12px 16px 0;margin:0;font-weight:500}.formHeader,.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{height:24px;width:24px;margin-left:8px}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:4px 0}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}ng-md-icon{margin:0!important}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.toUppercase{text-transform:uppercase}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.inputStatusIcon{height:24px;width:24px;margin-bottom:16px!important;margin-right:12px!important}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/styles.css\n// module id = 24\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 25\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = require(\"./fixUrls\");\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 26\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/fixUrls.js\n// module id = 27\n// module chunks = 0","    import jq from 'jquery';\n\n    export default function rest(app, $http) {\n        const that = {};\n        //('/api/v1/', '?clients', p);\n        const Rx = window.Rx;\n        app.api = {\n            get: function (endPoint, query, url, key) {\n                var searchString = jq.param(query);\n                // console.log(url || app.endpoint + endPoint + searchString);\n                return Rx.Observable\n                    .fromPromise($http({\n                        method: 'GET',\n                        url: url || app.endpoint + endPoint + searchString,\n                        headers: {\n                            'X-ABL-Access-Key': key || app.apiKey,\n                            'X-ABL-Date': Date.parse(new Date().toISOString())\n                        }\n                    }))\n                    .catch((response) => {\n                        console.log('$abl.api:GET ERROR', response);\n\n                        //cacheResponse(response);\n                        return Rx.Observable.empty();\n                    })\n                    .select(function (response) {\n                        console.log('$abl.api:GET SUCCESS', response.data.list);\n                        return response.data.list;\n                    });\n            }\n        }\n\n        //Feathers localstorage cache service\n        const cache = app.service('cache');\n\n\n        cache.on('created', function (message) {\n            console.log('$abl.cache:PUT', message);\n        });\n        app.cache = cache;\n        app.cache.put = function (d) {\n            cache.create(d)\n        }\n        //     find: function (q) {\n        //         return Rx.Observable\n        //             .fromPromise(cache.find(q))\n        //             .map(function (response) {\n        //                 console.log('$abl.cache:FIND', q, response);\n        //                 return response;\n        //             });\n        //     },\n        //     get: cache.get\n        // }\n\n\n        //         var query = {\n        //   clients: {\n        //     $in: ['ddddddd']\n        //   }\n        // }\n\n        // $abl.services.cache.find({\n        //   query\n        // }).then(function (result) {\n        //   console.log(result);\n        // });\n\n\n        return app;\n\n\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/rest.js","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 29\n// module chunks = 0","export default function toUpper() {\n    return {\n        require: 'ngModel',\n        link: function (scope, element, attrs, modelCtrl) {\n            var capitalize = function (inputValue) {\n                if (inputValue == undefined) inputValue = '';\n                var capitalized = inputValue.toUpperCase();\n                if (capitalized !== inputValue) {\n                    modelCtrl.$setViewValue(capitalized);\n                    modelCtrl.$render();\n                }\n                return capitalized;\n            }\n\n\n\n            modelCtrl.$parsers.push(capitalize);\n            capitalize(scope[attrs.ngModel]); // capitalize initial value\n        }\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/text-transforms.js","import activityTotalTemplate from './activity-total.html';\nimport activityFormsTemplate from './activity-forms.html';\nimport activityBookingTemplate from './activity-book.html';\n\nimport activityBookValidators from './activity-book-validators';\n\nexport default angular.module('activity-book', ['ngMaterial', 'rx'])\n    .run(function ($templateCache) {\n        $templateCache.put('activity-forms.html', activityFormsTemplate);\n        $templateCache.put('activity-book.html', activityBookingTemplate);\n        $templateCache.put('activity-total.html', activityTotalTemplate);\n\n\n\n\n    })\n    .directive('ablActivityBook', ['$sce', '$compile', '$mdMedia', '$mdDialog', '$log', '$window', '$http', 'config', 'rx', 'observeOnScope', '$stateParams', function ($sce, $compile, $mdMedia, $mdDialog, $log, $window, $http, config, rx, observeOnScope, $stateParams) {\n        return {\n            restrict: 'E',\n            scope: {\n                book: '='\n            },\n            template: activityBookingTemplate,\n            link: function ($scope, element, attrs) {\n                // Digest on resize to recalculate $mdMedia window size\n                function onResize() {\n                    console.log('resize');\n\n                    $scope.$digest();\n                };\n\n                angular.element($window).on('resize', onResize);\n            },\n            controllerAs: 'vm',\n            controller: function ($scope, $element, $attrs) {\n                console.log('ablActivityBookController', $scope, $attrs);\n                var vm = this;\n\n                const ENV = config;\n                const stripe = window.Stripe;\n                \n                ENV.apiVersion = config.FEATHERS_URL;\n                \n                this.guestDetailsExpanded = true;\n                this.attendeesExpanded = false;\n                this.addonsExpanded = false;\n                this.questionsExpanded = false;\n                this.paymentExpanded = false;\n                this.couponStatus = 'untouched';\n                this.appliedCoupon = {};\n                this.couponQuery = '';\n                this.occupancyRemaining = 0;\n                \n                this.attendeeSubtotals = [];\n                this.addonSubtotals    = [];\n                $scope.paymentResponse = '';\n                \n                \n                this.toggleGuestDetails = function () {\n                    console.log('toggle guest details');\n                    this.guestDetailsExpanded = !this.guestDetailsExpanded;\n                }\n\n                this.togglePayment = function () {\n                    console.log('toggle payment');\n                    this.paymentExpanded = !this.paymentExpanded;\n                }\n                \n                this.pricing = {\n                    total: 0\n                };\n                this.taxTotal, this.addonTotal, this.attendeeTotal = 0;\n                \n                \n                $scope.bookingSucceeded = false;\n                $scope.$mdMedia = $mdMedia;\n                $scope.screenIsBig = function () {\n                    var w = angular.element($window);\n                    return w[0].innerWidth > 742;\n                }\n\n                $scope.addBookingController = $scope.$parent;\n                console.log('addBookingController', $scope.addBookingController);\n                // var timeslot = $scope.addBookingController.parent.timeslot;\n\n                // $scope.eventInfo = $scope.$parent.parent;\n                \n                //Get taxes\n                vm.taxes = [];\n                vm.taxTotal = 0;\n                //Get addons\n                vm.addons = [];\n                vm.questions = [];\n\n                this.toggleQuestions = function () {\n                    console.log('toggle questions');\n                    this.questionsExpanded = !this.questionsExpanded;\n                }\n\n                this.adjustAddon = function (i, mode) {\n                    if (mode == 'up')\n                        vm.addons[i].quantity++;\n                    if (mode == 'down' && vm.addons[i].quantity > 0)\n                        vm.addons[i].quantity--;\n\n                    console.log('adjust addons', vm.addons);\n                    vm.getPricingQuote();\n                }\n                console.log('addons', vm.addons);\n\n                this.toggleAddons = function () {\n                    console.log('toggle addons');\n                    if(vm.addons.length < 1)\n                        this.questionsExpanded = !this.questionsExpanded;\n                    else\n                        this.addonsExpanded = !this.addonsExpanded;\n                }\n\n                this.adjustAttendee = function (i, mode) {\n                    if (mode == 'up' && vm.countAttendees() > 0)\n                        vm.attendees[i].quantity++;\n                    if (mode == 'down' && vm.attendees[i].quantity > 0)\n                        vm.attendees[i].quantity--;\n\n                    console.log('adjust attendees', vm.attendees);\n                    vm.getPricingQuote();\n                    \n                    vm.countAttendees();\n                }\n\n                this.toggleAttendees = function () {\n                    console.log('toggle attendees');\n                    this.attendeesExpanded = !this.attendeesExpanded;\n                }\n                \n                this.checkAdjustAttendee = function($index) {\n                    if(vm.attendees[$index].quantity > vm.countAttendees()) {\n                        vm.attendees[$index].quantity = 0;\n                        vm.attendees[$index].quantity = vm.countAttendees();\n                    }\n                    if(vm.attendees[$index].quantity < 0)\n                        vm.attendees[$index].quantity = 0;\n                    \n                    $scope.safeApply();\n                    console.log('attendees added', vm.countAttendees(), vm.attendees[$index].quantity);\n                }\n\n                var data = {\n                    \"attendees\": {},\n                    \"addons\": {}                \n                    \n                }\n\n\n                function buildQuery() {\n\n                    // Parse attendees\n                    angular.forEach(vm.attendees, function (e, i) {\n                        data[\"attendees\"][e._id] = [];\n                        if (e.quantity > 0) {\n                            for (var i = 0; i < e.quantity; i++) {\n                                data[\"attendees\"][e._id].push(null);\n                            }\n                        }\n                    });\n\n                    // Parse addons\n                    angular.forEach(vm.addons, function (e, i) {\n                        data[\"addons\"][e._id] = [];\n                        if (e.quantity > 0) {\n                            for (var i = 0; i < e.quantity; i++) {\n                                data[\"addons\"][e._id].push(null);\n                            }\n                        }\n                    });\n\n                    console.log('pricing quote POST data', data);\n                    //return url;\n                    return data;\n                }\n\n                // Query for pricing data based on the data object used to make a booking request\n                vm.getPricingQuote = function () {\n                    var query = buildQuery();\n                    $http({\n                        method: 'POST',\n                        url: ENV.apiVersion + '/pricing-quotes',\n                        data: query,\n                        headers: {\n                        'x-abl-access-key': $stateParams.merchant,\n                        'x-abl-date': Date.parse(new Date().toISOString())\n                        }\n                    }).then(function successCallback(response) {\n                        vm.pricing = response.data;\n                        vm.pricing.couponDeduction = vm.pricing.items.filter(function(item) {\n                            return item.type == 'coupon';\n                        });\n                        \n                        vm.addonTotal = vm.pricing.items.filter(function(item) {\n                            return item.type == 'addon';\n                        }).reduce(function(result, addon) {\n                            return result + addon.price\n                        }, 0);\n                        \n                        vm.addonSubtotals = mergeIdenticalArrayItemsIntoObject(vm.pricing.items.filter(function(item) {\n                            return item.type == 'addon';\n                        }));\n                        \n                        vm.attendeeTotal = response.data.items.filter(function (item) {\n                            return item.type == \"aap\"\n                        }).reduce(function (result, att) {\n                            return result + att.price\n                        }, 0);\n                        \n                        vm.attendeeSubtotals = mergeIdenticalArrayItemsIntoObject(response.data.items.filter(function(item) {\n                            return item.type == 'aap';\n                        }));\n                        \n                        vm.taxTotal = response.data.items.filter(function (item) {\n                            return item.type == \"tax\" || item.type == \"fee\"\n                        }).reduce(function (result, tax) {\n                            return result + tax.price\n                        }, 0);\n                        \n                        console.log('getPricingQuotes', response);\n                        console.log('taxTotal', vm.taxTotal);\n\n                    }, function errorCallback(response) {\n                        vm.pricing = {};\n                        vm.taxTotal = 0;\n                        console.log('getPricingQuotes error!', response, vm.pricing);\n\n                    });\n                }\n\n                //Query for possible coupons partially matching the vm.couponQuery search string\n                vm.getPossibleCoupons = function () {\n                    $http({\n                        method: 'GET',\n                        url: ENV.apiVersion + '/coupons?bookingId=' + vm.couponQuery,\n                        headers: {\n                        'x-abl-access-key': $stateParams.merchant,\n                        'x-abl-date': Date.parse(new Date().toISOString())\n                    }\n                    }).then(function successCallback(response) {\n                        vm.possibleCoupons = response.data;\n                        console.log('getPossibleCoupons success', response);\n\n                    }, function errorCallback(response) {\n                        vm.possibleCoupons = [];\n                        vm.taxTotal = 0;\n                        console.log('getPossibleCoupons error!', response);\n                    });\n                }\n\n                // Check whether the vm.couponQuery search string exists as a coupon, if successful,\n                // add the coupon id to the make booking request object as the 'coupon' property\n                vm.checkCoupon = function () {\n                    vm.checkingCoupon = true;\n                    console.log('check coupon', vm.couponQuery);\n                    $http({\n                        method: 'GET',\n                        url: ENV.apiVersion + '/coupons/' + vm.couponQuery,\n                        headers: {\n                        'x-abl-access-key': $stateParams.merchant,\n                        'x-abl-date': Date.parse(new Date().toISOString())\n                    }\n                    }).then(function successCallback(response) {\n                        console.log('checkCoupon success', response);\n                        data['couponId'] = response.data['couponId'];\n                        vm.appliedCoupon = response.data;\n                        console.log('applied coupon', vm.appliedCoupon);\n                        vm.validateCoupon(vm.appliedCoupon);\n                        vm.couponStatus = 'valid';\n                        vm.getPricingQuote();\n                        vm.checkingCoupon = false;\n\n                    }, function errorCallback(response) {\n                        delete data['couponId'];\n                        vm.couponStatus = 'invalid';\n                        vm.appliedCoupon = {};\n                        vm.checkingCoupon = false;\n\n                        console.log('checkCoupon error!', response);\n                    });\n                }\n\n                vm.removeCoupon = function () {\n                    vm.couponQuery = '';\n                    delete data['couponId'];\n                    vm.couponStatus = 'untouched';\n                    vm.appliedCoupon = {};\n                    vm.getPricingQuote();\n                }\n                \n                const moment = window.moment;\n                \n                vm.validateCoupon = function(coupon) {\n                    const today = moment();\n                    console.log('coupon expires after today', moment(coupon.endTime).isAfter(moment()));\n                    //Coupon is not expired and is infinitely redeemable\n                    if(moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions == 0)\n                        return true;\n                    //Coupon is not expired and has been redeemed less than the maximum allowable redemptions\n                    if(coupon.maxRedemptions > 0 && moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions - coupon.redemptions >= 0)\n                        return true;\n                    //Coupon is expired or has been redeemed too many times \n                    vm.couponStatus = 'invalid';\n                    return false;\n                }\n\n                vm.bookingQuestionsCompleted = function() {\n                    var completed = 0;\n                    if(vm.bookingQuestions) {\n                        angular.forEach(vm.bookingQuestions, function(e,i) {\n                            // console.log(e);\n                            if(e.length > 0)\n                                completed++;\n                        });\n                    }\n                    return completed;\n                }\n                //Observe and debounce an object on the $scope, can be used on \n                //a search input for example to wait before auto-sending the value\n                observeOnScope($scope, 'vm.couponQuery')\n                    .debounce(500)\n                    .select(function (response) {\n                        return response;\n                    })\n                    .subscribe(function (change) {\n                        console.log('search value', change);\n                        if (vm.couponQuery.length > 0)\n                            vm.checkCoupon();\n                    });\n\n                activityBookValidators(vm, rx, $http, $stateParams);\n                //Observe and debounce an object on the $scope, can be used on \n                //a search input for example to wait before auto-sending the value\n                // observeOnScope($scope, 'vm.formData.fullName')\n                //     .debounce(500)\n                //     .select(function (response) {\n                //         return response;\n                //     })\n                //     .subscribe(function (change) {\n                //         console.log('client name search value', change);\n                //         if (change['newValue'])\n                //             vm.searchClients(change.newValue).subscribe(function (results) {\n                //                 $scope.results = results;\n                //                 console.log(results);\n                //             });\n                //     });\n\n\n\n                $scope.$watch('addBookingController.activity', function (changes) {\n                    console.log('activity', changes);\n                    if(angular.isDefined($scope.addBookingController.activity)) {\n                        //Get booking questions\n                        vm.questions = $scope.addBookingController.activity.questions;\n                        console.log('booking questions', vm.questions);\n    \n                        vm.addons = $scope.addBookingController.activity.charges.filter(function (charge) {\n                            return charge.type == 'addon' && charge.status == 'active';\n                        })\n                        vm.addons.forEach(function (e, i) {\n                            if(!angular.isDefined(e.quantity))\n                                e.quantity = 0;\n                        });\n                        \n                        vm.taxes = $scope.addBookingController.activity.charges.filter(function (charge) {\n                            return charge.type == 'tax';\n                        });\n                        console.log('taxes', vm.taxes);\n                \n                    }\n                }, true);\n\n                vm.countAttendees = function() {\n                    // console.log('count attendees', $scope.addBookingController.event.maxOcc, attendeesAdded);\n                    if($scope.addBookingController.event) {\n                        if(vm.attendees) {\n                           return ($scope.addBookingController.event.maxOcc || $scope.addBookingController.timeslot.maxOcc) - vm.attendees.map(function(att) {\n                                return att.quantity;\n                            }).reduce((a,b) => a + b, 0); \n                        }\n                        else {\n                            return 0;\n                        }\n                    }\n                    return 0;\n\n                }\n                \n                vm.countAttendeesAdded = function() {\n                    // console.log('count attendees', $scope.addBookingController.event.maxOcc, attendeesAdded);\n                    if($scope.addBookingController.event) {\n                        if(vm.attendees) {\n                           return vm.attendees.map(function(att) {\n                                return att.quantity;\n                            }).reduce((a,b) => a + b, 0); \n                        }\n                        else {\n                            return 0;\n                        }\n                    }\n                    return 0;\n                }\n                \n                vm.nextStep = function() {\n                    // if(vm.guestDetailsExpanded) {\n                    //     vm.guestDetailsExpanded = false;\n                    //     vm.attendeesExpanded    = true;\n                    // }\n                    // if(vm.attendeesExpanded) {\n                    //     vm.attendeesExpanded = false;\n                    //     vm.addonsExpanded    = true;\n                    // }\n                    // if(vm.addonsExpanded) {\n                    //     vm.addonsExpanded    = false;\n                    //     vm.questionsExpanded = true;\n                    // }\n                    $scope.makeBooking()\n                    $scope.showPayzenDialog();\n                    \n                    if(vm.questionsExpanded) {\n                        vm.questionsExpanded = false;\n                        vm.paymentExpanded   = true;\n                    }\n                }\n                \n                // $scope.$watch('addBookingController.event', function (changes) {\n                //     console.log('event', changes);\n\n                //     //vm.attendeesRemaining = changes.maxOcc -\n                // }, true);\n                \n                // $scope.$watch('vm.bookingQuestions', function (changes) {\n                //     console.log('vm.bookingQuestions', changes);\n                //     console.log($scope);\n                //     //vm.attendeesRemaining = changes.maxOcc -\n                // }, true);\n                \n                $scope.$watch('addBookingController.timeslot', function (changes) {\n                    console.log('timeslot', changes);\n                    if(angular.isDefined($scope.addBookingController.timeslot)) {\n                        \n                        if(angular.isDefined($scope.addBookingController.timeslot.charges)) {\n                        vm.attendees = $scope.addBookingController.timeslot.charges.filter(function (charge) {\n                            return charge.type == 'aap' && charge.status == 'active';\n                        });\n                        vm.attendees.forEach(function (e, i) {\n                            if(!angular.isDefined(e.quantity))\n                                e.quantity = 0;\n                        });\n                        // console.log('attendees', vm.attendees);\n                        }\n                        \n                        //Get the timeslot id and start time for the pricing quote endpoint request\n                        data['timeSlotId'] = $scope.addBookingController.timeslot._id;\n                        data['startTime']  = $scope.addBookingController.timeslot.startTime;\n                        \n                    }\n                }, true);\n                \n                vm.getBookingData = function() {\n                    const bookingData = angular.copy(data);\n                    bookingData['eventInstanceId']  = $scope.addBookingController.event['eventInstanceId'];\n                    bookingData['answers']          = {};\n                    bookingData['email']            = vm.formData['mail'];\n                    bookingData['phoneNumber']      = vm.formData['phoneNumber'];\n                    bookingData['fullName']         = vm.formData['fullName'];\n                    bookingData['notes']            = vm.formData['notes'];\n                    bookingData['skipConfirmation'] = 'false';\n                    bookingData['operator']         = $scope.addBookingController.activity.operator;\n                    \n                    angular.forEach(vm.questions, function(e,i) {\n                        bookingData['answers'][e._id] = vm.bookingQuestions[i];\n                    });\n                    \n                    bookingData['paymentMethod']    = 'credit';\n                    bookingData['currency']         = 'default';\n                    \n                    console.log('make booking', bookingData);\n                    \n                    return bookingData;\n                    // console.log(vm.bookingQuestions);\n                    // console.log(vm.questions);\n                }\n                \n        var paymentMessageHandler;\n        paymentMessageHandler = function(event) {\n         if (event.origin == \"https://calendar.ablist.win\") { // TODO add to config\n            console.log(\"TRUSTED ORIGIN\", event.origin);\n            console.log(\"DATA\", event.data);\n            if (event.data == \"payment_complete\") {\n              console.log(\"PAYMENT COMPLETE\");\n              $scope.paymentResponse = 'success'; //processing, failed\n            //   $rootScope.showToast('Payment processed successfully.');\n    \n              window.removeEventListener(\"message\", paymentMessageHandler);\n              $scope.paymentSuccessful = true;\n            //   $scope.changeState('bookings'); //Go to bookings view if successful\n              $scope.safeApply();\n              //$mdDialog.hide();\n            }\n         }\n          else {\n            console.log(\"UNTRUSTED ORIGIN\", event.origin);\n          }\n        };\n        \n        console.log(\"Adding Payment Message Event Listener\");\n        window.addEventListener(\"message\", paymentMessageHandler);\n    \n        $scope.safeApply = function(fn) {\n          var phase = this.$root.$$phase;\n          if(phase == '$apply' || phase == '$digest') {\n            if(fn && (typeof(fn) === 'function')) {\n              fn();\n            }\n          } else {\n            this.$apply(fn);\n          }\n        };\n                \n                \n        $scope.makeBooking = function() {\n            $scope.bookingResponse = $http({\n                method: 'POST',\n                url: config.FEATHERS_URL + '/bookings',\n                data: vm.getBookingData(),\n                headers: {\n                    'x-abl-access-key': $stateParams.merchant,\n                    'x-abl-date': Date.parse(new Date().toISOString())\n                }\n            }).then(function successCallback(response) {\n                console.log('makeBooking success', response);\n                $scope.bookingSuccessResponse = response.data.booking;\n                var iframeDoc = document.getElementById(\"payzenIframe\").contentWindow.document;\n                iframeDoc.open();\n                iframeDoc.write(response.data.iframeHtml);\n                iframeDoc.close();\n                $scope.bookingSucceeded = true;\n              \n            }, function errorCallback(response) {\n                $mdDialog.hide();\n                $scope.bookingSucceeded = false;\n                console.log('makeBooking error!', response);\n            }); \n        }\n    \n        // function postToIframe(data,url,target){\n        //   $('body')\n        //     .append('<form action=\"'+url+'\" method=\"post\" target=\"'+target+'\" id=\"postToIframe\"></form>');\n        //   $.each(data,function(n,v){\n        //     $('#postToIframe').append('<input type=\"hidden\" name=\"'+n+'\" value=\"'+v+'\" />');\n        //   });\n        //   $('#postToIframe').submit().remove();\n        // }\n\n        var lpad = function (numberStr, padString, length) {\n        \t\twhile (numberStr.length < length) {\n        \t\t\tnumberStr = padString + numberStr;\n        \t\t}\n        \t\treturn numberStr;\n        };\n\t\t\n          $scope.showPayzenDialog = function(ev) {\n            $log.debug(\"SHOW PAYZEN DIALOG\");\n            vm.paymentExpanded = true;\n            $scope.paymentSuccessful = false;\n\n            // $scope.$mdDialog = $mdDialog;\n            // $mdDialog.show({\n            //   contentElement: '#payzenDialog',\n            //   parent: angular.element(document.body),\n            //   targetEvent: ev,\n            //   clickOutsideToClose: false\n            // });\n          };\n          \n          $scope.prefill = function() {\n              vm.formData = {\n                  fullName: 'fuck',\n                  mail: 'adam@ralko.com',\n                  phoneNumber: 7783023246\n              }\n          };\n\n          //Merge identical items from an array into nested objects, \n          //summing their amount properties and keeping track of quantities\n          function mergeIdenticalArrayItemsIntoObject(data) {\n            var seen = {};\n            \n            angular.forEach(data, function(e,i) {\n                // Have we seen this item before?\n                if (seen.hasOwnProperty(e.name)) {\n                    seen[e['name']]['amount']   += e['amount']; //Sum their prices\n                    seen[e['name']]['quantity'] += 1;           //Increment their quantity\n                }\n                else {\n                    seen[e['name']] = {};\n                    seen[e['name']]['price']    = e['price'];\n                    seen[e['name']]['quantity'] = 1;\n                    seen[e['name']]['amount']   = e['amount'];\n                }\n            });\n            \n            console.log('mergeIdenticalArrayItems', seen);\n            return seen;\n          }\n          \n            }\n        };\n        \n    }]);\n\n// {\"paymentMethod\":\"cash\",\"answers\":{\"57336d1a3e6f0f447119989a\":\"100\",\"57336d2a3e6f0f447119989b\":\"phone call\"},\"attendees\":{\"58eea948565d3d3aa4fae370\":[null]},\"addons\":{\"57336b293e6f0f447119987b\":[null],\"58252f9e98087f1c06cc15eb\":[null],\"57336b293e6f0f447119987c\":[]},\"adjustments\":[],\"couponId\":\"AIRMILES\",\"skipConfirmation\":false,\"email\":\"kevin+test@adventurebucketlist.com\",\"fullName\":\"Kevin Test\",\"phoneNumber\":\"6506129331\",\"eventInstanceId\":\"p836o5rvsg72nm69ia120bbdns_20170623T210000Z\",\"currency\":\"default\"}\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity-book.js","module.exports = \"<md-card class=paymentSummaryCard ng-show=\\\"paymentResponse != 'success'\\\"> <md-list class=\\\"\\\" flex> <md-list-item class=lineItemHeader ng-if=\\\"vm.base \\\" ng-click=null> <div class=md-list-item-text layout=\\\"row \\\" flex> <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <p class=\\\"\\\">Base Price </p> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <p class=\\\"\\\">{{vm.base() / 100}} CFP</p> </div> </div> </md-list-item> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-disabled=detailsForm.$invalid> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=local_offer class=listIcon ng-if=\\\"vm.couponStatus !='valid'\\\"></ng-md-icon> <ng-md-icon icon=clear class=listIcon ng-click=vm.removeCoupon(); ng-if=\\\"vm.couponStatus =='valid'\\\"></ng-md-icon> <span class=\\\"paymentSubTitle couponText\\\" ng-if=\\\"vm.couponStatus =='valid'\\\" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCoupon.percentage ? '' : '$'}}{{vm.appliedCoupon.amount}}{{vm.appliedCoupon.percentage ? '%' : ''}} Off</span> <span class=\\\"paymentSubTitle total\\\"> <input ng-model=vm.couponQuery type=text class=couponInput ng-if=\\\"vm.couponStatus =='untouched' || vm.couponStatus =='invalid'\\\" ng-change=\\\"vm.checkingCoupon = true\\\" placeholder=\\\"Enter Coupon\\\" capitalize/> </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <span class=\\\"paymentSubTitle total\\\" ng-if=vm.pricing.couponDeduction[0]>-${{(-1 * vm.pricing.couponDeduction[0].price / 100) | number : 2}}</span> <md-progress-circular md-mode=indeterminate ng-show=\\\"vm.checkingCoupon && vm.couponQuery.length > 0\\\" class=\\\"listItemCircularProgress easeIn\\\" md-diameter=24px></md-progress-circular> </div> </div> </md-list-item> <md-list-item ng-show=\\\"vm.couponStatus =='invalid' && vm.couponQuery.length > 0 && !vm.checkingCoupon\\\" class=\\\"paymentHeader md-2-line md-primary easeIn\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if=\\\"vm.couponStatus !='valid'\\\" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class=\\\"paymentSubTitle total\\\"> Invalid Coupon </span> </div> <div layout=row layout-align=\\\"end center\\\" flex> <ng-md-icon icon=clear class=listIcon ng-click=\\\"vm.couponQuery = '';\\\"></ng-md-icon> </div> </div> </md-list-item> <div ng-repeat=\\\"charge in booking.addOns \\\" ng-show=\\\"vm.showAddons \\\" ng-if=\\\"booking.addOns.length > 0\\\"> <md-list-item class=\\\"list-item-48 lineItemDetail\\\" ng-if=\\\"charge.quantity > 0\\\"> <div class=md-list-item-text layout=\\\"row \\\" flex> <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <div layout=\\\"row \\\"> <p>{{ charge.label }} <span style=vertical-align:middle>x</span> {{ charge.quantity }}</p> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <p class=\\\"\\\">{{ charge.price/100 * charge.quantity}} CFP</p> </div> </div> </md-list-item> </div> <div ng-if=\\\"vm.attendeeTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Attendees </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=activityTotal>${{vm.attendeeTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat=\\\"(key, value) in vm.attendeeSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{value.quantity}} x {{key}} @ ${{value.price/100}} each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> ${{value.amount / 100 | number:2}} </div> </div> </div> <div ng-if=\\\"vm.addonTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Add-ons </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=activityTotal>${{vm.addonTotal / 100 | number:2}}</span> </div> </div> <div ng-repeat=\\\"(key, value) in vm.addonSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{value.quantity}} x {{key}} @ ${{value.price/100}} each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> ${{value.amount / 100 | number:2}} </div> </div> </div> <div ng-if=\\\"vm.taxTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Taxes and Fees </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=activityTotal>${{vm.taxTotal / 100 | number:2}}</span> </div> </div> </div> <div> <div class=\\\"md-list-item-text subtotalLineItem bottomTotal\\\" layout=\\\"row \\\" layout-align=\\\"space-between center \\\" flex> <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=\\\"\\\">Total </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"\\\">${{(vm.pricing.total || 0) / 100 | number:2}}</span> </div> </div> </div> </md-list> </md-card> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-total.html\n// module id = 32\n// module chunks = 0","module.exports = \"<div ng-if=\\\"paymentResponse != 'success'\\\"> <md-card class=activityPaymentSummaryCard after-render> <md-list class=\\\"\\\" flex> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-click=vm.toggleGuestDetails() ng-init=\\\"guestDetailsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=formHeader> <div layout=row layout-align=\\\"start center\\\" flex=50> <ng-md-icon class=headerIcon icon=filter_1 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Guest Details</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\" flex> <ng-md-icon icon=\\\"{{vm.guestDetailsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> <ng-md-icon ng-show=\\\"!guestDetailsHover && detailsForm.$valid\\\" icon=check class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div ng-show=vm.guestDetailsExpanded> <form name=guestDetailsForm novalidate> <div class=\\\"detailsForm slideDown\\\" layout-padding> <md-input-container class=md-block> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.mail.$error> <div ng-message=required>This is required.</div> <div ng-message=email>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class=md-block> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align=\\\"end center\\\"> <md-button class=md-raised ng-disabled=guestDetailsForm.$invalid ng-click=\\\"vm.toggleGuestDetails(); vm.toggleAttendees();\\\">Next</md-button> </div> </div> </form> </div> <md-divider></md-divider> </md-list> <md-list class=\\\"\\\" flex> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-click=vm.toggleAttendees() ng-disabled=guestDetailsForm.$invalid> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" class=formHeader flex> <ng-md-icon class=headerIcon icon=filter_2 class=listIcon></ng-md-icon> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() > 0\\\" flex>Attendees <span ng-show=\\\"vm.countAttendees() < 4\\\"> | {{vm.countAttendees()}} spots remaining</span></span> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() < 1\\\" flex>Attendees | No spots remaining</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center\\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\"> <ng-md-icon icon=\\\"{{vm.attendeesExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class=\\\"activityForm slideDown\\\" ng-show=vm.attendeesExpanded> <div ng-repeat=\\\"attendee in vm.attendees\\\"> <md-list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row class=\\\"\\\"> <span class=lineItemSubDetail>${{attendee.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" class=addOnAdjusters layout-align=\\\"center end \\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline \\\" class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end \\\"> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align=\\\"start center\\\" flex=50> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <div layout=\\\"column \\\" layout-align=\\\"center end\\\" flex> <md-button class=md-raised ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=\\\"vm.toggleAttendees(); vm.toggleAddons();\\\">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> <div ng-if=\\\"vm.addons.length > 0\\\"> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=vm.toggleAddons()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=formHeader> <div layout=row layout-align=\\\"start center\\\" flex=50> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\" flex> <ng-md-icon ng-show=\\\"vm.addOnsSelected == 1\\\" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon=\\\"{{vm.addonsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class=\\\"activityForm slideDown\\\" ng-show=vm.addonsExpanded> <div ng-repeat=\\\"addon in vm.addons\\\"> <md-list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=\\\"\\\"> <span class=lineItemSubDetail>${{addon.amount/ 100 | number:2}}</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <div layout=\\\"column \\\" class=addOnAdjusters layout-align=\\\"center end \\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAddon($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline \\\" class=listIconSub ng-click=\\\"vm.adjustAddon($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end \\\"> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.getPricingQuote(); md-select-on-focus> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align=\\\"start center\\\" flex=50> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <div layout=\\\"column \\\" layout-align=\\\"center end\\\" flex> <md-button class=md-raised ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=\\\"vm.toggleQuestions(); vm.toggleAddons();\\\">Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider></md-divider> </div> <div ng-if=\\\"vm.questions.length > 0\\\"> <md-list-item class=\\\"paymentHeader md-2-line\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=vm.toggleQuestions()> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=formHeader> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=filter_4 class=listIcon ng-if=\\\"vm.addons.length > 0\\\"></ng-md-icon> <ng-md-icon class=headerIcon icon=filter_3 class=listIcon ng-if=\\\"vm.addons.length == 0\\\"></ng-md-icon> <span class=paymentSubTitle>Booking Questions | {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <div layout=\\\"column \\\" layout-align=\\\"center end \\\" flex> <ng-md-icon icon=\\\"{{vm.questionsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </md-list-item> <div class=\\\"questionForm slideDown\\\" ng-show=vm.questionsExpanded> <div ng-repeat=\\\"question in vm.questions\\\"> <md-list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=md-list-item-text flex> <div layout=column layout-align=\\\"center stretch\\\" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align=\\\"start center\\\"> <ng-md-icon icon=\\\"{{vm.bookingQuestions[$index].length > 0 ? 'done' : 'priority_high'}}\\\" class=inputStatusIcon></ng-md-icon> <md-input-container flex> <textarea name=question ng-model=vm.bookingQuestions[$index] md-maxlength=300 rows=1></textarea> </md-input-container> </div> </div> </div> </md-list-item> </div> <md-list-item> <div layout=row flex layout-padding> <div layout=row layout-align=\\\"start center\\\" flex=50> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <div layout=\\\"column \\\" layout-align=\\\"center end\\\" flex> <md-button class=md-raised ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid || (vm.bookingQuestionsCompleted()/vm.questions.length) != '1'\\\" ng-click=vm.nextStep();>Next</md-button> </div> </div> </div> </md-list-item> </div> <md-divider ng-if=!vm.addonsExpanded></md-divider> </div> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-click=\\\"makeBooking(); showPayzenDialog();\\\" ng-disabled=\\\"guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1 || bookingSucceeded\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Pay</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"paymentSubTitle total\\\"></span> <ng-md-icon icon=logout class=listIcon></ng-md-icon> </div> </div> </md-list-item> <div class=\\\"activityForm slideDown\\\" ng-show=vm.paymentExpanded> <iframe id=payzenIframe class=payzenIframe></iframe> </div> <md-divider></md-divider> </md-list> </md-card> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-forms.html\n// module id = 33\n// module chunks = 0","module.exports = \" <div layout=\\\"{{screenIsBig() ? 'row' : 'column'}}\\\" layout-align=\\\"{{screenIsBig() ? 'center start' : 'center center'}}\\\" class=columnFix> <div class=paymentSummaryCardLarge> <div ng-include=\\\"'activity-forms.html'\\\"></div> </div> <div class=paymentSummaryCardLarge> <div ng-include=\\\"'activity-total.html'\\\"></div> </div> </div> <div> <md-card class=paymentSummaryCard ng-show=\\\"paymentResponse.length > 0\\\"> <md-list> <div ng-show=\\\"paymentResponse == 'success'\\\" class=easeIn> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50 md-colors=\\\"{color: 'primary'}\\\"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Complete</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"paymentSubTitle total\\\" md-colors=\\\"{color: 'green'}\\\"></span> <ng-md-icon icon=check class=listIcon md-colors=\\\"{fill: 'green'}\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=column layout-align=\\\"space-between center\\\"> <div layout=row layout-wrap> <p class=listMessage>An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> <div layout=row layout-wrap> <p class=listMessage>For questions about your booking please contact:</p> <p class=listMessage>{{bookingSuccessResponse.operator.companyName}} (+{{bookingSuccessResponse.operator.primaryContact.phoneNumber}}) </p> <p class=listMessage>{{bookingSuccessResponse.operator.primaryContact.email}} </p> <p class=listMessage>Booking reference ID: {{bookingSuccessResponse.bookingId}} </p> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-align=\\\"end center\\\" flex> <md-button class=\\\"md-raised md-primary\\\" ui-sref=home>Return</md-button> </div> </md-list-item> </div> <div ng-show=\\\"paymentResponse == 'failed'\\\"> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" md-colors=\\\"{color: 'primary'}\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex=50 md-colors=\\\"{color: 'warn'}\\\"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Failed</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=\\\"paymentSubTitle total\\\" md-colors=\\\"{color: 'warn'}\\\"></span> <ng-md-icon icon=error class=listIcon md-colors=\\\"{fill: 'warn'}\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align=\\\"end center\\\" flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.payNow();>Try Again</md-button> </div> </md-list-item> </div> <div ng-show=\\\"paymentResponse == 'processing'\\\"> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" md-colors=\\\"{color: 'primary'}\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex layout-grow md-colors=\\\"{color: 'primary'}\\\"> <ng-md-icon class=headerIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Processing</span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <span class=\\\"paymentSubTitle total\\\" md-colors=\\\"{color: 'green'}\\\"></span> <ng-md-icon icon=watch_later class=listIcon md-colors=\\\"{fill: 'amber'}\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item> <div layout=row layout-wrap> <p class=listMessage>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> </div> </md-list-item> <md-list-item> <div layout=row layout-align=\\\"end center\\\" flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"goToState('home');\\\">Return</md-button> </div> </md-list-item> </div> </md-list> </md-card> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-book.html\n// module id = 34\n// module chunks = 0","export default function activityBookValidator(vm, rx, $http, $stateParams) {\n\n\n    vm.searchClients = function (query) {\n\n        return rx.Observable\n            .fromPromise($http({\n                method: 'GET',\n                url: vm.config.apiVersion + \"/clients?fullName=\" + text,\n                headers: {\n                    'x-abl-access-key': $stateParams.merchant,\n                    'x-abl-date': Date.parse(new Date().toISOString())\n                }\n            }))\n            .select(function (response) {\n                console.log(response);\n                return response;\n            });\n\n    }\n\n    return vm;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity-book-validators.js"],"sourceRoot":""}