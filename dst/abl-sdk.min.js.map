{"version":3,"sources":["webpack:///./src/abl-sdk.js","webpack:///./~/superagent/lib/client.js","webpack:///./~/superagent/~/component-emitter/index.js","webpack:///./~/superagent/lib/request-base.js","webpack:///./~/superagent/lib/is-object.js","webpack:///./~/superagent/lib/response-base.js","webpack:///./~/superagent/lib/utils.js","webpack:///./~/superagent/lib/agent-base.js","webpack:///./src/utils.js","webpack:///./src/styles.css?f492","webpack:///./src/styles.css","webpack:///./src/lib/helper-styles.css?200c","webpack:///./src/lib/helper-styles.css","webpack:///./src/rest.js","webpack:///./src/lib/directives/toUppercase.directive.js","webpack:///./src/lib/directives/formatPhone.directive.js","webpack:///./src/lib/directives/focusParent.directive.js","webpack:///./src/lib/directives/size.directive.js","webpack:///./src/lib/services/navigator.service.js","webpack:///./src/lib/components/col.component.js","webpack:///./src/lib/components/column.html","webpack:///./src/lib/components/progressButton.component.js","webpack:///./src/lib/components/progressButton.html","webpack:///./src/lib/components/progressButton.css?4c0b","webpack:///./src/lib/components/progressButton.css","webpack:///./src/lib/components/listItem.component.js","webpack:///./src/lib/components/listItem.html","webpack:///./src/lib/components/listItemNumericControl.component.js","webpack:///./src/lib/components/listItemNumericControl.html","webpack:///./src/lib/components/listItemAddCharge.component.js","webpack:///./src/lib/components/listItemAddCharge.html","webpack:///./src/lib/components/listItem.css?7895","webpack:///./src/lib/components/listItem.css","webpack:///./src/lib/components/listItemHeader.component.js","webpack:///./src/lib/components/listItemHeader.html","webpack:///./src/activity/activity-book.js","webpack:///./src/activity/activity-book.css?9fca","webpack:///./src/activity/activity-book.css","webpack:///./src/activity/activity-total.html","webpack:///./src/activity/activity-forms.html","webpack:///./src/activity/activity-book.html","webpack:///./src/activity/activity-book-validators.js","webpack:///./src/activity/activity.adjustment.controls.component.js"],"names":["ablBook","require","jQuery","window","sdkProvider","settings","endpoint","apiKey","socketOpts","useSocket","services","socketEnabled","setSocketOpts","opts","setEndpoint","newEndpoint","setApiKey","key","setServices","newServices","getSettings","$get","$injector","$timeout","$log","$mdToast","$http","$rootScope","get","that","app","console","log","config","configure","hooks","use","name","DASHBOARD","storage","localStorage","xsrfCookieIndex","document","cookie","indexOf","xsrfToken","headers","Date","parse","toISOString","socket","io","socketio","addHeadersHook","hook","x","split","map","s","reduce","r","a","trim","undefined","params","Object","assign","withCredentials","afterRequestHook","rest","jquery","mixins","push","service","before","after","loading","loadingTimeout","afterRender","current","total","cancel","$abl","feathersSdk","$feathersProvider","ablSdk","$ablProvider","angular","module","provider","filter","input","start","slice","directive","component","setupUtilityFunctions","showToast","msg","toastClass","delay","toast","simple","textContent","action","hideDelay","position","highlightAction","show","debug","randomInt","min","max","Math","floor","random","b","c","safeApply","fn","$root","phase","$$phase","$apply","Rx","moment","api","activity","query","Observable","fromPromise","activityService","find","catch","response","empty","select","list","activitySearchService","timeslots","getRange","d","method","url","data","id","eventService","timeslotService","activitySearchInterval","t","setInterval","cache","cacheQuery","page","pageSize","then","res","create","updateCache","modified","activities","updated","acs","fromArray","result","_id","subscribe","err","Promise","resolve","store","length","i","update","getObjectIndex","arr","all","toUppercase","link","scope","element","attrs","modelCtrl","capitalize","inputValue","capitalized","toUpperCase","$setViewValue","$render","$parsers","ngModel","formatPhone","restrict","elem","ctrl","add","phonenumber","on","origVal","val","replace","str","phone","focusParent","$","parentElement","addClass","onFocus","removeClass","size","children","navigatorService","$inject","$window","$q","getCurrentPosition","deferred","defer","navigator","geolocation","reject","promise","col","bindings","pos","controller","$element","$scope","$onInit","$onChanges","changesObj","$postLink","template","transclude","controllerAs","progressButton","class","ngDisabled","spinner","stroke","fill","label","disabled","listItem","listItemNumericControl","value","price","increment","decrement","checkAdjustValue","listItemAddCharge","group","buttonClass","listItemHeader","actionClick","expanded","title","icon","click","run","$templateCache","put","$sce","$compile","$mdMedia","$mdDialog","rx","observeOnScope","$stateParams","$state","book","onResize","$digest","$attrs","vm","formWasBlocked","guestDetailsExpanded","attendeesExpanded","addonsExpanded","questionsExpanded","stripePaymentExpanded","stripeCardIsValid","paymentExpanded","showPaymentForm","paymentFormIsLoading","paymentWasSent","waitingForResponse","validStepsForPayment","couponStatus","appliedCoupon","couponQuery","occupancyRemaining","attendeeSubtotals","addonSubtotals","taxes","taxTotal","addons","questions","goToPay","submitNonCreditCardBooking","sendConfirmationEmail","merchant","dashboard","Raven","captureMessage","level","tags","step","formatDate","date","format","paymentResponse","paymentSuccessful","goToNextStep","currentStepName","form","toggleGuestDetails","toggleAttendees","countAttendeesAdded","isPaymentValid","guestDetailsFormValid","togglePayment","returnToMainPage","hide","reload","go","pricing","addonTotal","attendeeTotal","bookingSucceeded","screenIsBig","w","innerWidth","addBookingController","$parent","toggleQuestions","adjustAddon","mode","quantity","getPricingQuote","toggleAddons","toggleStripePay","togglePay","payButtonEnabled","adjustAttendee","countAttendees","attendees","checkAdjustAttendee","$index","buildQuery","forEach","e","FEATHERS_URL","successCallback","couponDeduction","items","item","type","addonsFilter","addonsArray","addon","object","obj","amount","att","aapFilter","attendeesArray","aap","aaps","tax","paymentMethod","errorCallback","errors","getPossibleCoupons","possibleCoupons","clients","change","newValue","selectedClientChange","client","formData","fullName","primaryContact","mail","email","phoneNumber","autocomplete","searchTextChange","text","selectedItemChange","validateCoupon","checkingCoupon","queryDebounce","coupons","querySearch","checkCoupon","removeCoupon","selectedItem","coupon","today","endTime","isAfter","maxRedemptions","redemptions","bookingQuestionsCompleted","completed","bookingQuestions","debounce","$watch","changes","isDefined","charges","charge","status","timeslot","event","startTime","maxOcc","attendeesAdded","countAddonsAdded","addonsChanged","areGuestDetailsValid","guestDetailsAreValid","$valid","guest","areAttendeesValid","areAddonsValid","areBookingQuestionsValid","isValid","isNextStepPayment","getBookingData","bookingData","copy","operator","organizations","outputBookingData","bookingSuccessResponse","makeBooking","stripeToken","location","isMobile","extra","$emit","validatePayment","errorElement","getElementById","loadingIframe","bookingResponse","iframe","style","display","iframeDoc","contentWindow","open","write","iframeHtml","close","lpad","numberStr","padString","paymentMessageHandler","$broadcast","removeEventListener","addEventListener","mergeIdenticalArrayItemsIntoObject","oldObject","seen","hasOwnProperty","activityBookValidator","searchClients","apiVersion","activityAdjustmentControls","addCharge"],"mappings":"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AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,UAAS,+CAA+C,EAAE;AAC1D,UAAS,gDAAgD,EAAE;AAC3D,UAAS,gDAAgD,EAAE;AAC3D,UAAS,4CAA4C,EAAE;AACvD;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA,kBAAiB,iBAAiB;AAClC,kBAAiB,sCAAsC;;AAEvD;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAqC,SAAS;AAC9C;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA4C;AAC5C,yCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA,kBAAiB,aAAa;AAC9B,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,kBAAiB,aAAa,iBAAiB;AAC/C;AACA;AACA;AACA;AACA,2BAA0B,aAAa;AACvC,+BAA8B;AAC9B;AACA;AACA;AACA;AACA,2BAA0B,aAAa,iBAAiB;AACxD;AACA,YAAW,eAAe;AAC1B,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB,qBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC;AACpC,QAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,4BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,gBAAgB;AAC/B;AACA,YAAW,cAAc;AACzB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE,mBAAmB;AAC3F;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,UAAU;AACrB,YAAW,cAAc;AACzB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS,sBAAsB,WAAW,YAAY;;AAEtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,6FAA4F;AAC5F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,eAAe;AAC1B,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,eAAe;AAC1B,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,eAAe;AAC1B,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,eAAe;AAC1B,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACp5BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,aAAY;AACZ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA2C,SAAS;AACpD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;;;;;;AClKA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,cAAc,QAAQ;AACjC,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,QAAQ;AACpB;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,aAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,oDAAoD;AACpE;AACA;AACA,YAAW,cAAc;AACzB,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,yBAAyB;AACtC;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,sCAAsC;AACjD,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B,gCAA+B;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAAyD,iBAAiB;AAC1E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA,mBAAkB,aAAa;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,aAAa;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,cAAc;AACzB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA,YAAW,SAAS;AACpB,aAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wDAAuD;;AAEvD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;;;;;;ACrrBA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACdA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA2C;AAC3C;AACA;AACA,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrIA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA,wBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA,IAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA,IAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"abl-sdk.min.js","sourcesContent":["//Including independent module source code for packaging\nconst ablBook = require('./activity/activity-book.js');\nimport RxJS from 'rx';\n\nconst jQuery = window.jQuery;\n\nimport feathers from 'feathers-client';\nimport localstorage from 'feathers-localstorage';\nimport feathersRx from 'feathers-reactive';\nimport superagent from 'superagent';\n\nimport rxa from 'rx-angular/dist/rx.angular';\n\n// import feathersAuthentication from './auth';\nimport setupUtilFunctions from './utils';\n\nimport styles from './styles.css';\nimport helperStyles from './lib/helper-styles.css';\n// import pStyles from './datePicker/picker.css';\n\nimport rest from './rest';\n\nvar sdkProvider = function (settings) {\n\n  var endpoint = null\n  var apiKey = null\n  var socketOpts = null\n  var useSocket = true\n  var services = [];\n\n  //Configuration\n  return {\n    useSocket: function (socketEnabled) {\n      useSocket = !!socketEnabled\n    },\n    setSocketOpts: function (opts) {\n      socketOpts = opts\n    },\n    setEndpoint: function (newEndpoint) {\n      endpoint = newEndpoint\n    },\n    setApiKey: function (key) {\n      apiKey = key\n    },\n    setServices: function (newServices) {\n      services = newServices\n    },\n    getSettings: function () {\n      return endpoint;\n    },\n    $get: [\n      '$injector',\n      '$timeout',\n      '$log',\n      '$mdToast',\n      '$http',\n      function ($injector, $timeout, $log, $mdToast, $http) {\n        var $rootScope = $injector.get('$rootScope');\n        var that = this;\n\n        if (!endpoint) {\n          this.app = {};\n          return this.app;\n        }\n\n        console.log('config', $rootScope.config);\n\n        this.app = feathers().configure(feathersRx(RxJS)) //feathers-reactive\n          .configure(feathers.hooks())\n          .use('cache', localstorage({\n            name: 'abl' + ($rootScope.config.DASHBOARD\n              ? '-dash'\n              : ''),\n            storage: window.localStorage\n          }));\n\n        this.app.endpoint = endpoint;\n        this.app.apiKey = apiKey;\n\n        var xsrfCookieIndex = document\n          .cookie\n          .indexOf('XSRF-TOKEN=');\n\n        var xsrfToken = '';\n\n        console.log(document.cookie);\n\n        this.app.headers = {\n          \"Content-Type\": \"application/json;charset=utf-8\"\n        };\n\n        if (apiKey) {\n          this.app.headers = {\n            'X-ABL-Access-Key': apiKey,\n            'X-ABL-Date': Date.parse(new Date().toISOString()),\n            \"Content-Type\": \"application/json;charset=utf-8\"\n          }\n        }\n\n        // if (xsrfCookieIndex > -1) {   var nextCharacter = xsrfCookieIndex + 12;   for\n        // (var i = xsrfCookieIndex + 11; i < document.cookie.length; i++) {     if\n        // (document.cookie.substring(i, i + 1) == ' ' || document.cookie.substring(i, i\n        // + 1) == ';')       i = document.cookie.length;     else       xsrfToken +=\n        // document         .cookie         .substring(i, i + 1);     }\n        // console.log('xsrf cookie', xsrfToken); }\n\n        if (useSocket) {\n          console.log('endpoint', endpoint)\n          this.socket = io(endpoint, socketOpts)\n          this\n            .app\n            .configure(feathers.socketio(this.socket))\n        } else {\n          this\n            .app\n            .configure(feathers.rest(endpoint).jquery(window.jQuery, {\n              headers: that.app.headers,\n              withCredentials: true\n            }))\n          // .configure(feathers.rest(endpoint).superagent(superagent, {   headers:\n          // that.app.headers,   withCredentials: true })) Hook for adding headers to all\n          // service calls\n          function addHeadersHook(hook) {\n            var x = document\n              .cookie\n              .split(\";\")\n              .map(function (s) {\n                return s.split(\"=\")\n              })\n              .reduce(function (r, a) {\n                r[a[0].trim()] = a[1];\n                return r\n              }, {});\n\n            xsrfToken = x[\"XSRF-TOKEN\"] || undefined\n            console.log('xsrf ', xsrfToken);\n\n            if (xsrfToken) \n              that.app.headers['X-XSRF-TOKEN'] = xsrfToken\n\n            hook.params.headers = Object.assign({}, that.app.headers, hook.params.headers);\n            hook.params.withCredentials = true;\n          }\n\n          function afterRequestHook(hook) {\n            // console.log('afterRequestHook ', hook);\n          }\n\n          // Mixin automatically adds hook to all services\n          this\n            .app\n            .mixins\n            .push(function (service) {\n              service.before(addHeadersHook);\n              service.after(afterRequestHook);\n            });\n\n        }\n\n        setupUtilFunctions(this.app, $mdToast, $rootScope);\n\n        rest(this.app, $http);\n\n        $rootScope.loading = true;\n        this.app.loadingTimeout = null;\n\n        this.app.loadingTimeout = $timeout(function () {\n          $rootScope.loading = false;\n        }, 1500);\n\n        //Add timeout\n        $rootScope.afterRender = function (current, total) {\n          $timeout.cancel(this.loadingTimeout);\n          this.loadingTimeout = $timeout(function () {\n            $rootScope.loading = false;\n          }, 1500);\n        };\n\n        window.$abl = this.app;\n        window.$http = $http;\n\n        return this.app\n      }\n    ]\n  }\n};\n\n//Old naming convention, left for backwards compatibility\nvar feathersSdk = [function $feathersProvider() {\n    return sdkProvider('feathers');\n  }\n];\n\nvar ablSdk = [function $ablProvider() {\n    return sdkProvider('abl');\n  }\n];\n\nimport toUppercase from './lib/directives/toUppercase.directive';\nimport formatPhone from './lib/directives/formatPhone.directive';\nimport onFocus from './lib/directives/focusParent.directive';\nimport size from './lib/directives/size.directive';\n\nimport navigatorService from './lib/services/navigator.service';\n\nimport col from './lib/components/col.component';\n\nimport progressButton from './lib/components/progressButton.component';\nimport progressButtonStyles from './lib/components/progressButton.css';\n\nimport listItem from './lib/components/listItem.component';\nimport listItemNumericControl from './lib/components/listItemNumericControl.component';\nimport listItemAddCharge from './lib/components/listItemAddCharge.component';\nimport listItemHeader from './lib/components/listItemHeader.component';\n\n/**\n * @namespace abl-sdk-feathers\n * @requires feathers\n * @requires RxJS\n * @requires rx-angular\n * @requires socket.io-client\n\n */\nexport default angular.module('abl-sdk-feathers', ['ngMaterial', 'rx'])\n/**\n   * @class abl-sdk-feathers.$abl\n   */\n  .provider('$abl', ablSdk)\n  .provider('$feathers', feathersSdk)\n  .filter('startFrom', function () {\n    return function (input, start) {\n      start = +start; //parse to int\n      return input.slice(start);\n    }\n  })\n  .service('navigatorService', navigatorService)\n  .directive('toUppercase', toUppercase)\n  .directive('formatPhone', formatPhone)\n  .directive('onFocus', onFocus)\n  // .directive('size', size)\n  .directive('formatPhone', formatPhone)\n  .component('colSection', col)\n  .component('progressButton', progressButton)\n  .component('listItem', listItem)\n  .component('listItemNumericControl', listItemNumericControl)\n  .component('listItemAddCharge', listItemAddCharge)\n  .component('listItemHeader', listItemHeader);\n\n\n// WEBPACK FOOTER //\n// ./src/abl-sdk.js","/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('component-emitter');\nvar RequestBase = require('./request-base');\nvar isObject = require('./is-object');\nvar ResponseBase = require('./response-base');\nvar Agent = require('./agent-base');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = exports = module.exports = function(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new exports.Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new exports.Request('GET', method);\n  }\n\n  return new exports.Request(method, url);\n}\n\nexports.Request = Request;\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only version of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    pushEncodedKeyValuePair(pairs, key, obj[key]);\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (val != null) {\n    if (Array.isArray(val)) {\n      val.forEach(function(v) {\n        pushEncodedKeyValuePair(pairs, key, v);\n      });\n    } else if (isObject(val)) {\n      for(var subkey in val) {\n        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n      }\n    } else {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(val));\n    }\n  } else if (val === null) {\n    pairs.push(encodeURIComponent(key));\n  }\n}\n\n/**\n * Expose serialization method.\n */\n\nrequest.serializeObject = serialize;\n\n/**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'text/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\nrequest.serialize = {\n  'application/x-www-form-urlencoded': serialize,\n  'application/json': JSON.stringify,\n};\n\n/**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse,\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    if (index === -1) { // could be empty line, just skip it\n      continue;\n    }\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req) {\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  var status = this.xhr.status;\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n  this._setStatusProperties(status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n\n  if (null === this.text && req._responseType) {\n    this.body = this.xhr.response;\n  } else {\n    this.body = this.req.method != 'HEAD'\n      ? this._parseBody(this.text ? this.text : this.xhr.response)\n      : null;\n  }\n}\n\nResponseBase(Response.prototype);\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str) {\n  var parse = request.parse[this.type];\n  if (this.req._parser) {\n    return this.req._parser(this, str);\n  }\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      if (self.xhr) {\n        // ie9 doesn't have 'response' property\n        err.rawResponse = typeof self.xhr.responseType == 'undefined' ? self.xhr.responseText : self.xhr.response;\n        // issue #876: return the http status code if the response parsing fails\n        err.status = self.xhr.status ? self.xhr.status : null;\n        err.statusCode = err.status; // backwards-compat only\n      } else {\n        err.rawResponse = null;\n        err.status = null;\n      }\n\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (!self._isResponseOK(res)) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n      }\n    } catch(custom_err) {\n      new_err = custom_err; // ok() callback can throw\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      new_err.original = err;\n      new_err.response = res;\n      new_err.status = res.status;\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `RequestBase`.\n */\n\nEmitter(Request.prototype);\nRequestBase(Request.prototype);\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} [pass] optional in case of using 'bearer' as type\n * @param {Object} options with 'type' property 'auto', 'basic' or 'bearer' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (1 === arguments.length) pass = '';\n  if (typeof pass === 'object' && pass !== null) { // pass is optional and can be replaced with options\n    options = pass;\n    pass = '';\n  }\n  if (!options) {\n    options = {\n      type: 'function' === typeof btoa ? 'basic' : 'auto',\n    };\n  }\n\n  var encoder = function(string) {\n    if ('function' === typeof btoa) {\n      return btoa(string);\n    }\n    throw new Error('Cannot use basic auth, btoa is not a function');\n  };\n\n  return this._auth(user, pass, options, encoder);\n};\n\n/**\n * Add query-string `val`.\n *\n * Examples:\n *\n *   request.get('/shoes')\n *     .query('size=10')\n *     .query({ color: 'blue' })\n *\n * @param {Object|String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `options` (or filename).\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String|Object} options\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, options){\n  if (file) {\n    if (this._data) {\n      throw Error(\"superagent can't mix .send() and .attach()\");\n    }\n\n    this._getFormData().append(field, file, options || file.name);\n  }\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  if (this._shouldRetry(err, res)) {\n    return this._retry();\n  }\n\n  var fn = this._callback;\n  this.clearTimeout();\n\n  if (err) {\n    if (this._maxRetries) err.retries = this._retries - 1;\n    this.emit('error', err);\n  }\n\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n// This only warns, because the request is still likely to work\nRequest.prototype.buffer = Request.prototype.ca = Request.prototype.agent = function(){\n  console.warn(\"This is not supported in browser version of superagent\");\n  return this;\n};\n\n// This throws, because it can't send/receive data as expected\nRequest.prototype.pipe = Request.prototype.write = function(){\n  throw Error(\"Streaming is not supported in browser version of superagent\");\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\nRequest.prototype._isHost = function _isHost(obj) {\n  // Native objects stringify to [object File], [object Blob], [object FormData], etc.\n  return obj && 'object' === typeof obj && !Array.isArray(obj) && Object.prototype.toString.call(obj) !== '[object Object]';\n}\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  if (this._endCalled) {\n    console.warn(\"Warning: .end() was called twice. This is not supported in superagent\");\n  }\n  this._endCalled = true;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // querystring\n  this._finalizeQueryString();\n\n  return this._end();\n};\n\nRequest.prototype._end = function() {\n  var self = this;\n  var xhr = (this.xhr = request.getXHR());\n  var data = this._formData || this._data;\n\n  this._setTimeouts();\n\n  // state change\n  xhr.onreadystatechange = function(){\n    var readyState = xhr.readyState;\n    if (readyState >= 2 && self._responseTimeoutTimer) {\n      clearTimeout(self._responseTimeoutTimer);\n    }\n    if (4 != readyState) {\n      return;\n    }\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (!status) {\n      if (self.timedout || self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(direction, e) {\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = direction;\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    try {\n      xhr.onprogress = handleProgress.bind(null, 'download');\n      if (xhr.upload) {\n        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n      }\n    } catch(e) {\n      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n      // Reported here:\n      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n    }\n  }\n\n  // initiate request\n  try {\n    if (this.username && this.password) {\n      xhr.open(this.method, this.url, true, this.username, this.password);\n    } else {\n      xhr.open(this.method, this.url, true);\n    }\n  } catch (err) {\n    // see #1149\n    return this.callback(err);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if (!this._formData && 'GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) {\n      serialize = request.serialize['application/json'];\n    }\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n\n    if (this.header.hasOwnProperty(field))\n      xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\nrequest.agent = function() {\n  return new Agent();\n};\n\n[\"GET\", \"POST\", \"OPTIONS\", \"PATCH\", \"PUT\", \"DELETE\"].forEach(function(method) {\n  Agent.prototype[method.toLowerCase()] = function(url, fn) {\n    var req = new request.Request(method, url);\n    this._setDefaults(req);\n    if (fn) {\n      req.end(fn);\n    }\n    return req;\n  };\n});\n\nAgent.prototype.del = Agent.prototype['delete'];\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn) {\n  var req = request('GET', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn) {\n  var req = request('HEAD', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn) {\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, data, fn) {\n  var req = request('DELETE', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n}\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn) {\n  var req = request('PATCH', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn) {\n  var req = request('POST', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn) {\n  var req = request('PUT', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/client.js\n// module id = 81\n// module chunks = 0","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/~/component-emitter/index.js\n// module id = 82\n// module chunks = 0","'use strict';\n\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Expose `RequestBase`.\n */\n\nmodule.exports = RequestBase;\n\n/**\n * Initialize a new `RequestBase`.\n *\n * @api public\n */\n\nfunction RequestBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in RequestBase.prototype) {\n    obj[key] = RequestBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.clearTimeout = function _clearTimeout(){\n  clearTimeout(this._timer);\n  clearTimeout(this._responseTimeoutTimer);\n  delete this._timer;\n  delete this._responseTimeoutTimer;\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Set format of binary response body.\n * In browser valid formats are 'blob' and 'arraybuffer',\n * which return Blob and ArrayBuffer, respectively.\n *\n * In Node all values result in Buffer.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeouts.\n *\n * - response timeout is time between sending request and receiving the first byte of the response. Includes DNS and connection time.\n * - deadline is the time from start of the request to receiving response body in full. If the deadline is too short large files may not load at all on slow connections.\n *\n * Value of 0 or false means no timeout.\n *\n * @param {Number|Object} ms or {response, deadline}\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.timeout = function timeout(options){\n  if (!options || 'object' !== typeof options) {\n    this._timeout = options;\n    this._responseTimeout = 0;\n    return this;\n  }\n\n  for(var option in options) {\n    switch(option) {\n      case 'deadline':\n        this._timeout = options.deadline;\n        break;\n      case 'response':\n        this._responseTimeout = options.response;\n        break;\n      default:\n        console.warn(\"Unknown timeout option\", option);\n    }\n  }\n  return this;\n};\n\n/**\n * Set number of retry attempts on error.\n *\n * Failed requests will be retried 'count' times if timeout or err.code >= 500.\n *\n * @param {Number} count\n * @param {Function} [fn]\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.retry = function retry(count, fn){\n  // Default to 1 if no count passed or true\n  if (arguments.length === 0 || count === true) count = 1;\n  if (count <= 0) count = 0;\n  this._maxRetries = count;\n  this._retries = 0;\n  this._retryCallback = fn;\n  return this;\n};\n\nvar ERROR_CODES = [\n  'ECONNRESET',\n  'ETIMEDOUT',\n  'EADDRINFO',\n  'ESOCKETTIMEDOUT'\n];\n\n/**\n * Determine if a request should be retried.\n * (Borrowed from segmentio/superagent-retry)\n *\n * @param {Error} err\n * @param {Response} [res]\n * @returns {Boolean}\n */\nRequestBase.prototype._shouldRetry = function(err, res) {\n  if (!this._maxRetries || this._retries++ >= this._maxRetries) {\n    return false;\n  }\n  if (this._retryCallback) {\n    try {\n      var override = this._retryCallback(err, res);\n      if (override === true) return true;\n      if (override === false) return false;\n      // undefined falls back to defaults\n    } catch(e) {\n      console.error(e);\n    }\n  }\n  if (res && res.status && res.status >= 500 && res.status != 501) return true;\n  if (err) {\n    if (err.code && ~ERROR_CODES.indexOf(err.code)) return true;\n    // Superagent timeout\n    if (err.timeout && err.code == 'ECONNABORTED') return true;\n    if (err.crossDomain) return true;\n  }\n  return false;\n};\n\n/**\n * Retry request\n *\n * @return {Request} for chaining\n * @api private\n */\n\nRequestBase.prototype._retry = function() {\n\n  this.clearTimeout();\n\n  // node\n  if (this.req) {\n    this.req = null;\n    this.req = this.request();\n  }\n\n  this._aborted = false;\n  this.timedout = false;\n\n  return this._end();\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} [reject]\n * @return {Request}\n */\n\nRequestBase.prototype.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    if (this._endCalled) {\n      console.warn(\"Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises\");\n    }\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject) {\n      self.end(function(err, res) {\n        if (err) innerReject(err);\n        else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n};\n\nRequestBase.prototype.catch = function(cb) {\n  return this.then(undefined, cb);\n};\n\n/**\n * Allow for extension\n */\n\nRequestBase.prototype.use = function use(fn) {\n  fn(this);\n  return this;\n};\n\nRequestBase.prototype.ok = function(cb) {\n  if ('function' !== typeof cb) throw Error(\"Callback required\");\n  this._okCallback = cb;\n  return this;\n};\n\nRequestBase.prototype._isResponseOK = function(res) {\n  if (!res) {\n    return false;\n  }\n\n  if (this._okCallback) {\n    return this._okCallback(res);\n  }\n\n  return res.status >= 200 && res.status < 300;\n};\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nRequestBase.prototype.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nRequestBase.prototype.getHeader = RequestBase.prototype.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nRequestBase.prototype.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val`, or multiple fields with one object\n * for \"multipart/form-data\" request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n *\n * request.post('/upload')\n *   .field({ foo: 'bar', baz: 'qux' })\n *   .end(callback);\n * ```\n *\n * @param {String|Object} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nRequestBase.prototype.field = function(name, val) {\n  // name should be either a string or an object.\n  if (null === name || undefined === name) {\n    throw new Error('.field(name, val) name can not be empty');\n  }\n\n  if (this._data) {\n    console.error(\".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObject(name)) {\n    for (var key in name) {\n      this.field(key, name[key]);\n    }\n    return this;\n  }\n\n  if (Array.isArray(val)) {\n    for (var i in val) {\n      this.field(name, val[i]);\n    }\n    return this;\n  }\n\n  // val should be defined now\n  if (null === val || undefined === val) {\n    throw new Error('.field(name, val) val can not be empty');\n  }\n  if ('boolean' === typeof val) {\n    val = '' + val;\n  }\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nRequestBase.prototype.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\nRequestBase.prototype._auth = function(user, pass, options, base64Encoder) {\n  switch (options.type) {\n    case 'basic':\n      this.set('Authorization', 'Basic ' + base64Encoder(user + ':' + pass));\n      break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n      break;\n\n    case 'bearer': // usage would be .auth(accessToken, { type: 'bearer' })\n      this.set('Authorization', 'Bearer ' + user);\n      break;\n  }\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nRequestBase.prototype.withCredentials = function(on) {\n  // This is browser-only functionality. Node side is no-op.\n  if (on == undefined) on = true;\n  this._withCredentials = on;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Maximum size of buffered response body, in bytes. Counts uncompressed size.\n * Default 200MB.\n *\n * @param {Number} n\n * @return {Request} for chaining\n */\nRequestBase.prototype.maxResponseSize = function(n){\n  if ('number' !== typeof n) {\n    throw TypeError(\"Invalid argument\");\n  }\n  this._maxResponseSize = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nRequestBase.prototype.toJSON = function() {\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header,\n  };\n};\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.send = function(data){\n  var isObj = isObject(data);\n  var type = this._header['content-type'];\n\n  if (this._formData) {\n    console.error(\".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObj && !this._data) {\n    if (Array.isArray(data)) {\n      this._data = [];\n    } else if (!this._isHost(data)) {\n      this._data = {};\n    }\n  } else if (data && this._data && this._isHost(this._data)) {\n    throw Error(\"Can't merge these send calls\");\n  }\n\n  // merge\n  if (isObj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!isObj || this._isHost(data)) {\n    return this;\n  }\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n/**\n * Sort `querystring` by the sort function\n *\n *\n * Examples:\n *\n *       // default order\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery()\n *         .end(callback)\n *\n *       // customized sort function\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery(function(a, b){\n *           return a.length - b.length;\n *         })\n *         .end(callback)\n *\n *\n * @param {Function} sort\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.sortQuery = function(sort) {\n  // _sort default to true but otherwise can be a function or boolean\n  this._sort = typeof sort === 'undefined' ? true : sort;\n  return this;\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\nRequestBase.prototype._finalizeQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += (this.url.indexOf('?') >= 0 ? '&' : '?') + query;\n  }\n  this._query.length = 0; // Makes the call idempotent\n\n  if (this._sort) {\n    var index = this.url.indexOf('?');\n    if (index >= 0) {\n      var queryArr = this.url.substring(index + 1).split('&');\n      if ('function' === typeof this._sort) {\n        queryArr.sort(this._sort);\n      } else {\n        queryArr.sort();\n      }\n      this.url = this.url.substring(0, index) + '?' + queryArr.join('&');\n    }\n  }\n};\n\n// For backwards compat only\nRequestBase.prototype._appendQueryString = function() {console.trace(\"Unsupported\");}\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequestBase.prototype._timeoutError = function(reason, timeout, errno){\n  if (this._aborted) {\n    return;\n  }\n  var err = new Error(reason + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  err.code = 'ECONNABORTED';\n  err.errno = errno;\n  this.timedout = true;\n  this.abort();\n  this.callback(err);\n};\n\nRequestBase.prototype._setTimeouts = function() {\n  var self = this;\n\n  // deadline\n  if (this._timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self._timeoutError('Timeout of ', self._timeout, 'ETIME');\n    }, this._timeout);\n  }\n  // response timeout\n  if (this._responseTimeout && !this._responseTimeoutTimer) {\n    this._responseTimeoutTimer = setTimeout(function(){\n      self._timeoutError('Response timeout of ', self._responseTimeout, 'ETIMEDOUT');\n    }, this._responseTimeout);\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/request-base.js\n// module id = 83\n// module chunks = 0","'use strict';\n\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/is-object.js\n// module id = 84\n// module chunks = 0","'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar utils = require('./utils');\n\n/**\n * Expose `ResponseBase`.\n */\n\nmodule.exports = ResponseBase;\n\n/**\n * Initialize a new `ResponseBase`.\n *\n * @api public\n */\n\nfunction ResponseBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in ResponseBase.prototype) {\n    obj[key] = ResponseBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponseBase.prototype.get = function(field) {\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponseBase.prototype._setHeaderProperties = function(header){\n    // TODO: moar!\n    // TODO: make this a util\n\n    // content-type\n    var ct = header['content-type'] || '';\n    this.type = utils.type(ct);\n\n    // params\n    var params = utils.params(ct);\n    for (var key in params) this[key] = params[key];\n\n    this.links = {};\n\n    // links\n    try {\n        if (header.link) {\n            this.links = utils.parseLinks(header.link);\n        }\n    } catch (err) {\n        // ignore\n    }\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponseBase.prototype._setStatusProperties = function(status){\n    var type = status / 100 | 0;\n\n    // status / class\n    this.status = this.statusCode = status;\n    this.statusType = type;\n\n    // basics\n    this.info = 1 == type;\n    this.ok = 2 == type;\n    this.redirect = 3 == type;\n    this.clientError = 4 == type;\n    this.serverError = 5 == type;\n    this.error = (4 == type || 5 == type)\n        ? this.toError()\n        : false;\n\n    // sugar\n    this.accepted = 202 == status;\n    this.noContent = 204 == status;\n    this.badRequest = 400 == status;\n    this.unauthorized = 401 == status;\n    this.notAcceptable = 406 == status;\n    this.forbidden = 403 == status;\n    this.notFound = 404 == status;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/response-base.js\n// module id = 85\n// module chunks = 0","'use strict';\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.type = function(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.params = function(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */);\n    var key = parts.shift();\n    var val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Parse Link header fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.parseLinks = function(str){\n  return str.split(/ *, */).reduce(function(obj, str){\n    var parts = str.split(/ *; */);\n    var url = parts[0].slice(1, -1);\n    var rel = parts[1].split(/ *= */)[1].slice(1, -1);\n    obj[rel] = url;\n    return obj;\n  }, {});\n};\n\n/**\n * Strip content related fields from `header`.\n *\n * @param {Object} header\n * @return {Object} header\n * @api private\n */\n\nexports.cleanHeader = function(header, shouldStripCookie){\n  delete header['content-type'];\n  delete header['content-length'];\n  delete header['transfer-encoding'];\n  delete header['host'];\n  if (shouldStripCookie) {\n    delete header['cookie'];\n  }\n  return header;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/utils.js\n// module id = 86\n// module chunks = 0","function Agent() {\n  this._defaults = [];\n}\n\n[\"use\", \"on\", \"once\", \"set\", \"query\", \"type\", \"accept\", \"auth\", \"withCredentials\", \"sortQuery\", \"retry\", \"ok\", \"redirects\",\n \"timeout\", \"buffer\", \"serialize\", \"parse\", \"ca\", \"key\", \"pfx\", \"cert\"].forEach(function(fn) {\n  /** Default setting for all requests from this agent */\n  Agent.prototype[fn] = function(/*varargs*/) {\n    this._defaults.push({fn:fn, arguments:arguments});\n    return this;\n  }\n});\n\nAgent.prototype._setDefaults = function(req) {\n    this._defaults.forEach(function(def) {\n      req[def.fn].apply(req, def.arguments);\n    });\n};\n\nmodule.exports = Agent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/agent-base.js\n// module id = 87\n// module chunks = 0","export default function setupUtilityFunctions(app, $mdToast, $rootScope) {\n\n    /**\n     * @name $abl.showToast\n     * @function showToast\n     * @memberOf abl-sdk-feathers.$abl\n     * @description Show an Angular Material toast.\n     * @param {string} message - The message to display.\n     * @param {string} [class] - The CSS class to apply to the toast.\n     * @param {number} [timeout=3000] - The length of time (ms) for the toast to remain visible. \n     */\n    app.showToast = function (msg, toastClass, delay) {\n        if (!toastClass)\n            var toastClass = '';\n        if (!delay)\n            var delay = 3000;\n\n        var toast = $mdToast.simple()\n            .toastClass(toastClass)\n            .textContent(msg)\n            .action('Hide')\n            .hideDelay(delay)\n            .position('bottom left')\n            .highlightAction(false);\n        $mdToast.show(toast);\n        console.debug('showToast ', toastClass, msg);\n    };\n\n\n    /**\n     * @name $abl.randomInt\n     * @function randomInt\n     * @memberOf abl-sdk-feathers.$abl\n     * @description Returns random integer between min and max.\n     * @param {number} min - The upper bound of the random calculation.\n     * @param {number} max - The lower bound of the random calculation.\n     * @returns {number} between min and max.\n     */\n    //\n    app.randomInt = function (min, max) {\n        return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n\n\n    /**\n     * @class abl-sdk-feathers.$rootScope\n     * @hidden\n     */\n\n    /**\n     * @name $rootScope.showToast\n     * @function showToast\n     * @memberOf abl-sdk-feathers.$rootScope\n     * @description Show an Angular Material toast.\n     * @param {string} message - The message to display.\n     * @param {string} [class] - The CSS class to apply to the toast.\n     * @param {number} [timeout=3000] - The length of time (ms) for the toast to remain visible. \n     */\n    $rootScope.showToast = function (a, b, c) {\n        app.showToast(a, b, c); //Legacy support\n    };\n\n    /**\n     * @name $rootScope.safeApply\n     * @function safeApply\n     * @memberOf abl-sdk-feathers.$rootScope\n     * @description App-wide safeApply function for usage in app controllers as a safer alternative to $apply().\n     */\n    $rootScope.safeApply = function (fn) {\n        if (this.$root) {\n            var phase = this.$root.$$phase;\n            if (phase === '$apply' || phase === '$digest') {\n                if (fn && (typeof (fn) === 'function')) {\n                    fn();\n                }\n            } else {\n                this.$apply(fn);\n            }\n        } else {\n            this.$apply(fn);\n        }\n    };\n\n\n    return app;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./styles.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles.css\n// module id = 91\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"md-list {\\n    display: block;\\n    padding: 0px 0px 0px 0px;\\n}\\n\\n.list-item-48 {\\n    height: 36px;\\n    min-height: 36px;\\n    font-size: 14px;\\n    font-weight: 300;\\n}\\n\\n.red {\\n    color: rgb(221, 44, 0);\\n}\\n\\n.paymentResponseContainer {\\n    display: block;\\n    height: auto;\\n    padding: 20px;\\n    background-color: #fff;\\n    overflow-y: auto;\\n}\\n\\n.activityPaymentSummaryCard {\\n    margin-bottom: 8px;\\n    margin-top: 8px;\\n    margin-right: 0;\\n    margin-left: 0;\\n    background: none;\\n    box-shadow: none;\\n    position: relative;\\n}\\n\\n.activityPaymentSummaryCardMobile {}\\n\\n.paymentSummaryCard {\\n    min-width: 100%;\\n    margin-bottom: 8px;\\n    margin-right: 16px;\\n    margin-top: 0;\\n    background: none;\\n    box-shadow: none;\\n    height: 100%;\\n}\\n\\n.paymentSummaryCardLarge {\\n    /*min-width: 370px;*/\\n    width: 100%;\\n    margin-bottom: 0;\\n    margin-top: 0;\\n    padding-right: 0;\\n    padding-left: 0;\\n}\\n\\n.paymentHeader p {\\n    color: rgba(0, 0, 0, .8) !important;\\n    font-weight: 500;\\n    letter-spacing: 0.012em;\\n    margin: 0 0 0 0;\\n    line-height: 1.6em;\\n}\\n\\n.paymentTitle {\\n    font-size: 20px !important;\\n}\\n\\n.paymentSubTitle {\\n    font-size: 14px !important;\\n    font-weight: 400;\\n}\\n\\n.lineItemIcon {\\n    width: 32px;\\n    height: 32px;\\n    margin: 4px 4px 4px -6px;\\n    background: url('https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg') no-repeat;\\n    background-position: center;\\n    background-size: 28px 28px;\\n}\\n\\n.headerIcon {\\n    vertical-align: middle;\\n    height: 36px;\\n    width: 40px;\\n    padding-right: 16px;\\n}\\n\\n.headerIconRight {\\n    padding-left: 16px;\\n}\\n\\n.headerIcon svg {\\n    position: absolute;\\n    top: 24px;\\n    bottom: 24px;\\n    height: 24px;\\n    width: 24px;\\n}\\n\\n.lineItemText {\\n    font-size: 14px;\\n    font-weight: 500;\\n    letter-spacing: 0.010em;\\n    margin: 0 0 0 0;\\n    line-height: 1.6em;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    color: rgba(0, 0, 0, 0.54) !important;\\n}\\n\\n.lineItemDetail {\\n    background: rgba(255, 255, 255, .1);\\n}\\n\\n.lineItemDetail p {\\n    font-size: 12px;\\n    color: rgba(0, 0, 0, .77);\\n    font-weight: 400;\\n}\\n\\n.lineItemHeader p {\\n    font-size: 16px;\\n    font-weight: 400;\\n    letter-spacing: 0.010em;\\n    margin: 0 0 0 0;\\n    line-height: 50px;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    color: rgba(0, 0, 0, 0.82) !important;\\n}\\n\\n.lineItemSubHeader {\\n    font-size: 16px;\\n    font-weight: 400;\\n    margin: 0 0 0 0;\\n    line-height: 1.6em;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    color: rgba(0, 0, 0, 0.82) !important;\\n}\\n\\n.lineItemSubDetail {\\n    font-size: 12px;\\n    font-weight: 500;\\n    margin: 0 0 0 0;\\n    line-height: 1.6em;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    color: rgba(0, 0, 0, .6);\\n}\\n\\n.lineItemHeader {\\n    background: rgba(0, 0, 0, 0);\\n    color: rgba(0, 0, 0, .7) !important;\\n}\\n\\n.addOnAdjusters {\\n    width: 36px;\\n    margin-right: 0;\\n}\\n\\n.addOnQuantityText {\\n    border: none;\\n    width: 40px;\\n    font-weight: 500;\\n    text-align: center;\\n    font-size: 16px;\\n    outline: none;\\n}\\n\\n.guestIcon {\\n    width: 32px;\\n    height: 32px;\\n    margin: 4px 4px 4px -6px;\\n    background: url('https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg') no-repeat;\\n    background-position: center;\\n    background-size: 28px 28px;\\n}\\n\\n.lineItemIconRight {\\n    width: 40px;\\n    height: 40px;\\n    margin: 4px -6px 4px 4px;\\n    background: url('https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg') no-repeat;\\n    background-position: center;\\n    background-size: 28px 28px;\\n}\\n\\n.locationHeader {\\n    font-size: 14px !important;\\n    letter-spacing: 0.010em;\\n    line-height: 20px;\\n    color: rgba(0, 0, 0, 0.66) !important;\\n}\\n\\n.total {\\n    font-size: 16px;\\n    letter-spacing: 0.01em;\\n    color: rgba(0, 0, 0, 0.8);\\n}\\n\\n.activityTotal {\\n    font-size: 16px;\\n    letter-spacing: 0.01em;\\n    color: rgba(0, 0, 0, 0.8);\\n}\\n\\n.spacer {\\n    margin: 4px;\\n    width: 8px;\\n}\\n\\n.darkerDivider {\\n    border-top-color: rgba(0, 0, 0, 0.12);\\n}\\n\\n.totalDivider {\\n    display: block;\\n    border-top-width: 1px;\\n}\\n\\n.lineItemDetailDivider {\\n    border-top-color: rgba(0, 0, 0, 0.0);\\n}\\n\\n.paymentSummaryImage {\\n    height: 120px;\\n    margin: 24px 12px 0 12px;\\n    background-position: center center;\\n    background-repeat: no-repeat;\\n    border-radius: 2px;\\n}\\n\\n.paymentSummaryImageBig {\\n    height: 244px;\\n    margin: 24px 12px 0 12px;\\n    background-position: center center;\\n    background-repeat: no-repeat;\\n    border-radius: 2px;\\n    /*box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .6);*/\\n}\\n\\n.mobileList {\\n    height: 100%;\\n}\\n\\n.mobileBottomBar {\\n    position: fixed;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n}\\n\\n.cardForm {\\n    margin: 16px 16px 16px 16px;\\n}\\n\\n.addonForm {\\n    padding-left: 16px;\\n    padding-right: 16px;\\n}\\n\\n.activityCardForm {\\n    margin: 0 16px 0 16px;\\n}\\n\\n.paymentHeader._md-button-wrap>div.md-button:first-child {\\n    font-size: 22px;\\n    /*box-shadow: 0 1px rgba(0, 0, 0, .12);*/\\n}\\n\\n.listIcon {\\n    padding: 0 0px 0 0;\\n}\\n\\n.listIconSub {\\n    height: 20px;\\n    width: 20px;\\n    color: rgba(0, 0, 0, .5);\\n    fill: rgba(0, 0, 0, .5);\\n    outline: none;\\n}\\n\\n.listIconSub svg {\\n    height: 20px;\\n    width: 20px;\\n}\\n\\n.listIconSub:hover {\\n    height: 20px;\\n    width: 20px;\\n    color: rgba(0, 0, 0, .86);\\n    fill: rgba(0, 0, 0, .86);\\n    outline: none;\\n}\\n\\n.formButton {\\n    margin-right: 0;\\n}\\n\\n.stepStatusRow ng-md-icon svg {\\n    height: 16px;\\n    margin-top: 1px;\\n    vertical-align: top;\\n}\\n\\n\\n/*md-list-item:disabled .md-list-item-text,\\nmd-list-item[disabled=disabled] .md-list-item-text{\\ncolor: #ccc;\\n}*/\\n\\nmd-list-item.addOnListItem {\\n    margin-right: -24px;\\n    padding-left: 0;\\n}\\n\\nmd-list-item.listItemNotButton {\\n    padding: 0 8px !important;\\n}\\n\\n.totalListItem {\\n    margin-bottom: 12px;\\n}\\n\\n.listMessage {\\n    font-size: 16px;\\n    line-height: 1.6em;\\n    padding: 0 4px;\\n}\\n\\n.slideDown.ng-hide {\\n    height: 0;\\n    transition: height 0.35s ease;\\n    overflow: hidden;\\n    position: relative;\\n}\\n\\n.slideDown {\\n    transition: height 0.35s ease;\\n    overflow: hidden;\\n    position: relative;\\n}\\n\\n.slideDown.ng-hide-remove,\\n.slideDown.ng-hide-add {\\n    /* remember, the .hg-hide class is added to element\\nwhen the active class is added causing it to appear\\nas hidden. Therefore set the styling to display=block\\nso that the hide animation is visible */\\n    display: block!important;\\n}\\n\\n.slideDown.ng-hide-add {\\n    animation-name: hide;\\n    -webkit-animation-name: hide;\\n    animation-duration: .5s;\\n    -webkit-animation-duration: .5s;\\n    animation-timing-function: ease-in;\\n    -webkit-animation-timing-function: ease-in;\\n}\\n\\n.slideDown.ng-hide-remove {\\n    animation-name: show;\\n    -webkit-animation-name: show;\\n    animation-duration: .5s;\\n    -webkit-animation-duration: .5s;\\n    animation-timing-function: ease-out;\\n    -webkit-animation-timing-function: ease-out;\\n}\\n\\n.couponInput {\\n    width: 100%;\\n    border: none;\\n    /* background-color: rgba(0, 0, 0, .08); */\\n    /* border-radius: 3px; */\\n    padding: 12px;\\n    /* width: 100%; */\\n    box-shadow: none;\\n    margin-left: -12px;\\n    line-height: 36px;\\n    outline: none;\\n}\\n\\n.remove-coupon {\\n    cursor: pointer;\\n}\\n\\n.toUppercase {\\n    text-transform: uppercase;\\n}\\n\\n.listItemCircularProgress {\\n    /*margin-right: -6px;*/\\n}\\n\\nmd-list-item:hover {\\n    background: transparent;\\n}\\n\\nmd-list-item.md-button.md-default-theme:not([disabled]):hover,\\n.md-button:not([disabled]):hover {\\n    background-color: transparent;\\n}\\n\\n.easeIn.ng-hide-add,\\n.easeIn.ng-hide-remove {\\n    -webkit-transition: 0.5s ease-in-out opacity;\\n    -moz-transition: 0.5s ease-in-out opacity;\\n    -ms-transition: 0.5s ease-in-out opacity;\\n    -o-transition: 0.5s ease-in-out opacity;\\n    transition: 0.5s ease-in-out opacity;\\n    opacity: 1;\\n}\\n\\n.easeIn.ng-hide {\\n    -webkit-transition: 0s ease-in-out opacity;\\n    -moz-transition: 0s ease-in-out opacity;\\n    -ms-transition: 0s ease-in-out opacity;\\n    -o-transition: 0s ease-in-out opacity;\\n    transition: 0s ease-in-out opacity;\\n    opacity: 0;\\n}\\n\\n.couponText {\\n    margin-left: 16px;\\n}\\n\\n.md-button[disabled] {\\n    pointer-events: none;\\n}\\n\\n.subtotalLineItem {\\n    padding: 8px 32px 8px 16px;\\n}\\n\\n.subtotalLineItemSmall {\\n    font-size: 12px;\\n}\\n\\n.bottomTotal {\\n    font-size: 16px;\\n    margin-top: 8px;\\n    margin-bottom: 16px;\\n    font-weight: 600;\\n}\\n\\n.payzenIframe {\\n    border: none;\\n    outline: none;\\n    width: 100%;\\n}\\n\\n.small-label {\\n    font-size: 12px;\\n    padding-left: 4px;\\n}\\n\\n.confirmation {\\n    padding: 20px 0;\\n    text-align: center;\\n}\\n\\n.confirmation h3 {\\n    text-align: center;\\n    margin-bottom: 20px;\\n}\\n\\n.confirmation .margin-top {\\n    margin-top: 8px;\\n}\\n\\n.confirmation .booking-id {\\n    padding: 15px;\\n    margin: 8px auto;\\n    width: 260px;\\n    opacity: 0.8;\\n    font-weight: bold;\\n    color: #fff;\\n}\\n\\nbody[md-theme=blue] .confirmation .booking-id {\\n    background: #2196F3;\\n}\\n\\nbody[md-theme=teal] .confirmation .booking-id {\\n    background: #009688;\\n}\\n\\nbody[md-theme=green] .confirmation .booking-id {\\n    background: #4CAF50;\\n}\\n\\nbody[md-theme=grey] .confirmation .booking-id {\\n    background: #9E9E9E;\\n}\\n\\nbody[md-theme=blue-grey] .confirmation .booking-id {\\n    background: #607D8B;\\n}\\n\\nbody[md-theme=yellow] .confirmation .booking-id {\\n    background: #FFEB3B;\\n    color: #000;\\n}\\n\\nbody[md-theme=indigo] .confirmation .booking-id {\\n    background: #3F51B5;\\n}\\n\\nbody[md-theme=red] .confirmation .booking-id {\\n    background: #F44336;\\n}\\n\\nbody[md-theme=black] .confirmation .booking-id {\\n    background: #000000;\\n}\\n\\n@media(max-width: 600px) {\\n    .confirmation {\\n        padding: 20px;\\n        font-size: 13px;\\n    }\\n}\\n\\n.no-margin {\\n    margin: 0 !important;\\n}\\n\\n.picker-container {\\n    border-radius: 2px;\\n    background: white;\\n}\\n\\n.bigDateToolbar {\\n    background: white !important;\\n    color: black !important;\\n}\\n\\n.activity-dialog-container {\\n    display: -ms-flexbox;\\n    display: flex;\\n    -ms-flex-pack: center;\\n    justify-content: center;\\n    -ms-flex-align: center;\\n    align-items: center;\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n    z-index: 80;\\n    overflow: hidden;\\n}\\n\\n.activity-dialog,\\nmd-dialog.activity-dialog {\\n    max-height: 80%;\\n    max-width: 90%;\\n    position: relative;\\n    overflow: auto;\\n    box-shadow: 0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 13px 19px 2px rgba(0, 0, 0, 0.14), 0px 5px 24px 4px rgba(0, 0, 0, 0.12);\\n    display: -ms-flexbox;\\n    display: flex;\\n    overflow-x: hidden;\\n    overflow-y: hidden;\\n    -ms-flex-direction: column;\\n    flex-direction: column;\\n}\\n\\n.activity-dialog,\\nmd-dialog md-dialog-content {\\n    padding: 0;\\n    overflow: hidden;\\n}\\n\\n.no-margin {\\n    margin: 0 !important;\\n}\\n\\n.leftCard {\\n    background: rgba(0, 0, 0, .025);\\n}\\n\\n.activityBookDialogLarge {\\n    width: 840px;\\n    min-height: 600px;\\n    height: 100%;\\n}\\n\\n.leftCardLarge {\\n    border-right: 1px solid #e4e4e4 !important;\\n    box-shadow: 1px 0 5px 1px rgba(0, 0, 0, 0.12) !important;\\n    min-height: 100%;\\n    min-width: 420px;\\n    width: 50%;\\n    position: absolute;\\n    height: 100%;\\n    overflow-y: scroll;\\n}\\n\\n.leftCardSmall {\\n    border-bottom: 1px solid #e4e4e4 !important;\\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08) !important;\\n}\\n\\n.rightCardLarge {\\n    position: absolute;\\n    right: 0;\\n    min-width: 420px;\\n    width: 50%;\\n    display: block;\\n    height: 100%;\\n}\\n\\n.activity-total-include {\\n    height: 100%;\\n}\\n\\n.couponText {\\n    font-size: 16px;\\n}\\n\\n.couponTextTotal {\\n    font-size: 16px;\\n    padding-right: 12px;\\n}\\n\\n.listItemAutocomplete {\\n    padding-left: 0 !important;\\n}\\n\\n.addOnQuantityText {\\n    border: none;\\n    width: 40px;\\n    font-weight: 500;\\n    text-align: center;\\n    font-size: 16px;\\n    margin-right: -8px;\\n    outline: none;\\n    background: transparent;\\n}\\n\\n.activityPaymentSummaryCard {\\n    margin-bottom: 0 !important;\\n    margin-top: 0 !important;\\n    margin-right: 0;\\n    margin-left: 0;\\n    background: none;\\n    box-shadow: none;\\n    position: relative;\\n    height: 100%;\\n}\\n\\n.activityCardForm {\\n    margin: 0 16px 0 16px;\\n}\\n\\n.detailsForm {\\n    padding-left: 16px;\\n    padding-right: 16px;\\n}\\n\\n.listItemInputContainer {\\n    margin: 24px 16px !important;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/styles.css\n// module id = 92\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/helper-styles.css\n// module id = 96\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".no-margin-top {\\n    margin-top: 0 !important;\\n}\\n\\n.no-margin-bottom {\\n    margin-bottom: 0 !important;\\n}\\n\\n.no-margin-right {\\n    margin-right: 0 !important;\\n}\\n\\n.no-margin-left {\\n    margin-left: 0 !important;\\n}\\n\\n.margin-right-30 {\\n    margin-right: 30px;\\n}\\n\\n.no-padding {\\n    padding: 0 !important;\\n}\\n\\n.green {\\n    color: green;\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/helper-styles.css\n// module id = 97\n// module chunks = 0","// Use RxJS in a Service\n\n// What about in a situation where you have a Service that's holding state for example. How could I push changes to that Service, and other random components on the page be aware of such a change? Been struggling with tackling this problem lately\n// Build a service with RxJS Extensions for Angular.\n\n// <script src=\"//unpkg.com/angular/angular.js\"></script>\n// <script src=\"//unpkg.com/rx/dist/rx.all.js\"></script>\n// <script src=\"//unpkg.com/rx-angular/dist/rx.angular.js\"></script>\n// var app = angular.module('myApp', ['rx']);\n\n// app.factory(\"DataService\", function(rx) {\n//   var subject = new rx.Subject(); \n//   var data = \"Initial\";\n\n//   return {\n//       set: function set(d){\n//         data = d;\n//         subject.onNext(d);\n//       },\n//       get: function get() {\n//         return data;\n//       },\n//       subscribe: function (o) {\n//          return subject.subscribe(o);\n//       }\n//   };\n// });\n// Then simply subscribe to the changes.\n\n// app.controller('displayCtrl', function(DataService) {\n//   var $ctrl = this;\n\n//   $ctrl.data = DataService.get();\n//   var subscription = DataService.subscribe(function onNext(d) {\n//       $ctrl.data = d;\n//   });\n\n//   this.$onDestroy = function() {\n//       subscription.dispose();\n//   };\n// });\n\n/**\n * \n * \n * @class api\n * @memberOf abl-sdk-feathers.$abl\n * @hidden\n */\nexport default function rest(app, $http) {\n    const that = {};\n    const Rx = window.Rx;\n    const moment = window.moment;\n\n    app.api = {};\n    /**\n     * @class activity\n     * @memberOf abl-sdk-feathers.$abl.api\n     * @hidden\n     */\n    app.api.activity = {\n        /**\n         * @function get\n         * @memberOf abl-sdk-feathers.$abl.api.activity\n         */\n        get: function (query) {\n            return Rx.Observable\n                .fromPromise(activityService.find(\n                    query || {}\n                ))\n                .catch((response) => {\n                    console.log('$abl.api.GET ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    return response.list;\n                });\n        },\n        /**\n         * @function find\n         * @memberOf abl-sdk-feathers.$abl.api.activity\n         */\n        find: function (query) {\n            return Rx.Observable\n                .fromPromise(activitySearchService.find(\n                    query || {}\n                ))\n                .catch((response) => {\n                    console.log('$abl.api.activity.FIND ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    return response;\n                });\n        }\n    }\n\n\n    /**\n     * @class timeslots\n     * @memberOf abl-sdk-feathers.$abl.api\n     * @hidden\n     */\n    app.api.timeslots = {\n        /**\n         * @function getRange\n         * @memberOf abl-sdk-feathers.$abl.api.timeslots\n         */\n        getRange: function (d) {\n            return Rx.Observable\n                .fromPromise($http({\n                    method: 'GET',\n                    url: app.endpoint + '/timeslots?',\n                    data: d,\n                    headers: app.headers\n                }))\n                .catch((response) => {\n                    console.log('$abl.api.timeslots.GETRANGE ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    console.log('$abl.api.timeslots.GETRANGE SUCCESS', response);\n                    return response.data.list;\n                });\n        },\n        /**\n         * @function get\n         * @memberOf abl-sdk-feathers.$abl.api.timeslots\n         */\n        get: function (id) {\n            return Rx.Observable\n                .fromPromise($http({\n                    method: 'GET',\n                    url: app.endpoint + '/timeslots?id=' + id,\n                    headers: app.headers\n\n                }))\n                .catch((response) => {\n                    console.log('$abl.api.timeslots.GET ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    console.log('$abl.api.timeslots.GET SUCCESS', response);\n                    return response;\n                });\n        }\n    }\n\n\n    //Feathers REST endpoints\n    const activityService = app.service('activities');\n    const eventService = app.service('events');\n    const timeslotService = app.service('timeslots');\n\n    const activitySearchService = app.service('search');\n\n    // activitySearchService.find({\n    //     query: {\n    //         \"sort\": \"-updatedAt\"\n    //     }\n    // });\n\n    app.activitySearchInterval = function (t) {\n        return setInterval(() => {\n            activitySearchService.find({\n                query: {\n                    \"sort\": \"-updatedAt\"\n                }\n            });\n        }, t);\n    }\n\n\n    //Feathers localstorage cache service\n    /**\n     * @class cache\n     * @memberOf abl-sdk-feathers.$abl\n     * @description localstorage cache wrapped in a Feathers.js service.\n     * @example   <caption>Open or Create</caption>      \n     * $abl.cache.get('activities').then(function (res) {\n     *   console.log(res);\n     *}).catch(res => {\n     *    $abl.cache.create({\n     *       id: 'activities',\n     *      data: {},\n     *      map: []\n     *  });\n     *});\n     * @hidden\n     */\n    const cache = app.service('cache');\n    const max = 500;\n    let cacheQuery = {\n        page: 0,\n        pageSize: 20,\n        total: 0,\n        \"sort\": \"-updatedAt\"\n    }\n\n    cache.get('activities').then(function (res) {\n        console.log(res);\n    }).catch(res => {\n        cache.create({\n            id: 'activities',\n            data: {},\n            map: []\n        });\n    });\n\n    const updateCache = store => { // always wrap in a function so you can pass options and for consistency.\n        return hook => {\n            let modified = false;\n\n            cache.get('activities').then(function (activities) {\n                activities.updated = [];\n\n                const acs = Rx.Observable.fromArray(hook.result.data);\n                acs.map(res => res)\n                    .filter(res => activities.data[res._id] == undefined)\n                    .subscribe(function (x) {\n                        modified = true;\n                        activities.data[x._id] = x;\n                        activities.map.push(x._id);\n                        activities.updated.push(x._id);\n                        // console.log('creating activity', x);\n                    }, function (err) {\n                        return Promise.resolve(hook); // A good convention is to always return a promise.\n\n                    }, function () {\n                        if (modified) {\n                            console.log('updateCache', store, activities);\n                            if (activities.map.length > max) {\n                                for (var i = 0; i < activities.map.length - max; i++) {\n                                    delete activities.data[activities.map[i]];\n                                    console.log('deleting activity', activities.data[activities.map[0]]);\n\n                                }\n                                // activities.map.fill('', 0, activities.map.length - max);\n                            }\n                            activities.total = hook.result.total;\n                            cache.update('activities', activities).then(function () {\n                                console.log('updateCache', store, hook);\n\n                                return Promise.resolve(hook); // A good convention is to always return a promise.\n                            });\n                        }\n\n                    });\n\n            });\n        };\n    };\n\n    function getObjectIndex(id, arr) {\n        for (var i = 0; i < arr.length - 1; i++) {\n            if (arr[i].id == id)\n                return i;\n        }\n        return -1;\n    }\n\n    // Set up our after hook to cache new data\n    activitySearchService.after({\n        all: [], // run hooks for all service methods\n        find: [updateCache()] // run hook after a find. You can chain multiple hooks.\n    });\n\n\n    app.cache = cache;\n    return app;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/rest.js","    /**\n     * @function toUppercase\n     * @memberOf abl-sdk-feathers.directives\n     * @description Transforms input text to all uppercase characters.\n     * @example   <input type=\"text\" ng-model=\"name\" to-uppercase>\n     */\n    export default function toUppercase() {\n        return {\n            require: 'ngModel',\n            link: function (scope, element, attrs, modelCtrl) {\n                var capitalize = function (inputValue) {\n                    if (inputValue == undefined) inputValue = '';\n                    var capitalized = inputValue.toUpperCase();\n                    if (capitalized !== inputValue) {\n                        modelCtrl.$setViewValue(capitalized);\n                        modelCtrl.$render();\n                    }\n                    return capitalized;\n                }\n\n                modelCtrl.$parsers.push(capitalize);\n                capitalize(scope[attrs.ngModel]); // capitalize initial value\n            }\n        };\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/toUppercase.directive.js"," /**\n  * @class abl-sdk-feathers.directives\n  * @hidden\n  */\n\n /**\n  * @function formatPhone\n  * @memberOf abl-sdk-feathers.directives\n  * @description Formats a phone number nicely.\n  * @example <input type=\"text\" id=\"phonenumber\" ng-model=\"phonenumber\" format-phone>\n  */\n export default function formatPhone() {\n     return {\n         require: 'ngModel',\n         restrict: 'A',\n         link: function (scope, elem, attrs, ctrl, ngModel) {\n             elem.add(phonenumber).on('keyup', function () {\n                 var origVal = elem.val().replace(/[^\\w\\s]/gi, '');\n                 if (origVal.length === 10) {\n                     var str = origVal.replace(/(.{3})/g, \"$1-\");\n                     var phone = str.slice(0, -2) + str.slice(-1);\n                     jQuery(\"#phonenumber\").val(phone);\n                 }\n\n             });\n             console.log('format-phone', scope);\n         }\n     };\n }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/formatPhone.directive.js","    /**\n     * @function toUppercase\n     * @memberOf abl-sdk-feathers.directives\n     * @description Transforms input text to all uppercase characters.\n     * @example   <input type=\"text\" ng-model=\"name\" to-uppercase>\n     */\n    export default function focusParent() {\n        return {\n            require: 'ngModel',\n            link: function (scope, element, attrs, modelCtrl) {\n                console.log(element);\n                console.log(attrs);\n\n                let elem = $(element[0].parentElement);\n                element.on('focus', function () {\n                    console.log(elem);\n                    elem.addClass(attrs.onFocus);\n\n                });\n\n                element.on('blur', () => {\n                    elem.removeClass(attrs.onFocus);\n\n                })\n                //modelCtrl.$parsers.push(capitalize);\n                //capitalize(scope[attrs.ngModel]); // capitalize initial value\n            }\n        };\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/focusParent.directive.js","    export default function size() {\n        return {\n            link: function (scope, element, attrs, modelCtrl) {\n                console.log(element);\n                console.log(attrs);\n\n                if (attrs.size) {\n                    let elem = $(element[0].children[0]);\n                    elem.addClass(attrs.size);\n                }\n\n\n            }\n        };\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/size.directive.js","     /**\n      * @class abl-sdk-feathers.services\n      * @hidden\n      */\n\n\n     navigatorService.$inject = [\"$window\", \"$q\"];\n     /**\n      * @function navigatorService\n      * @memberOf abl-sdk-feathers.services\n      * @description Requests the user's geographic coordinates using the {@link https://developer.mozilla.org/en/docs/Web/API/Navigator | Navigator Web API}.\n      * @example    navigatorService.getCurrentPosition().then(function(position) {\n      *     console.log(position);\n      *   }).catch(function(e) {\n      * });\n      * @tutorial navigator\n      * @returns {Promise} A Promise object from the {@link https://developer.mozilla.org/en/docs/Web/API/Navigator | Navigator Web API}.\n      */\n     export default function navigatorService($window, $q) {\n\n         function getCurrentPosition() {\n             var deferred = $q.defer();\n\n             if (!$window.navigator.geolocation) {\n                 deferred.reject('Geolocation not supported.');\n             } else {\n                 $window.navigator.geolocation.getCurrentPosition(\n                     function (position) {\n                         deferred.resolve(position);\n                     },\n                     function (err) {\n                         deferred.reject();\n                     });\n             }\n\n             return deferred.promise;\n         }\n\n         return {\n             getCurrentPosition: getCurrentPosition\n         };\n\n     }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/navigator.service.js"," import colTemplate from './column.html';\n const col = {\n     bindings: {\n         pos: '@',\n         size: '@'\n     },\n     controller: function ($element, $scope) {\n         this.$onInit = function () {\n             //  console.log('col', this);\n             if (!this.pos)\n                 this.position = 'start center'\n             if (this.pos == 'right')\n                 this.position = 'end center';\n             else\n                 this.position = this.pos;\n\n         };\n\n         this.$onChanges = (changesObj) => {};\n         this.$postLink = function () {};\n     },\n     template: colTemplate,\n     transclude: true,\n     controllerAs: 'vm'\n };\n\n\n export default col;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/col.component.js","module.exports = \"<div layout=\\\"row\\\" layout-align=\\\"{{vm.position}}\\\" ng-transclude flex></div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/column.html\n// module id = 105\n// module chunks = 0","import progressButtonTemplate from './progressButton.html';\nconst progressButton = {\n    bindings: {\n        loading: '<',\n        class: '@',\n        ngDisabled: '<',\n        spinner: '<',\n        stroke: '@',\n        fill: '@',\n        label: '@'\n    },\n    controller: function ($element, $scope) {\n        this.$onInit = function () {\n            if (this.loading)\n                console.log('progressButton:loading', this.loading);\n\n            console.log('progressButton disabled', this.ngDisabled);\n\n        };\n\n        this.$onChanges = (changesObj) => {\n            console.log('progressButton changes ', changesObj);\n            this.disabled = this.ngDisabled;\n        };\n\n        this.$postLink = function () {};\n    },\n    template: progressButtonTemplate,\n    transclude: true,\n    controllerAs: 'vm'\n};\n\n\nexport default progressButton;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/progressButton.component.js","module.exports = \"<md-button layout=\\\"row\\\" layout-align=\\\"center center\\\" class=\\\"{{vm.class}}\\\" ng-disabled=\\\"vm.loading || vm.disabled\\\">\\n    <div layout=\\\"row\\\" layout-align=\\\"center center\\\">\\n        <svg ng-show=\\\"vm.loading && vm.spinner == 1\\\" version=\\\"1.1\\\" id=\\\"loader-1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n            x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"24px\\\" height=\\\"24px\\\" viewBox=\\\"0 0 50 50\\\" style=\\\"enable-background:new 0 0 50 50;\\\" xml:space=\\\"preserve\\\">\\n            <path fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" d=\\\"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z\\\">\\n                <animateTransform attributeType=\\\"xml\\\" attributeName=\\\"transform\\\" type=\\\"rotate\\\" from=\\\"0 25 25\\\" to=\\\"360 25 25\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"\\n                />\\n            </path>\\n        </svg>\\n\\n        <svg ng-show=\\\"vm.loading && vm.spinner == 2\\\" version=\\\"1.1\\\" id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n            x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"24px\\\" height=\\\"30px\\\" viewBox=\\\"0 0 24 30\\\" style=\\\"enable-background:new 0 0 50 50;\\\" xml:space=\\\"preserve\\\">\\n            <rect x=\\\"0\\\" y=\\\"0\\\" width=\\\"4\\\" height=\\\"10\\\" fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\">\\n                <animateTransform attributeType=\\\"xml\\\" attributeName=\\\"transform\\\" type=\\\"translate\\\" values=\\\"0 0; 0 20; 0 0\\\" begin=\\\"0\\\" dur=\\\"0.6s\\\"\\n                    repeatCount=\\\"indefinite\\\" />\\n            </rect>\\n            <rect x=\\\"10\\\" y=\\\"0\\\" width=\\\"4\\\" height=\\\"10\\\" fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\">\\n                <animateTransform attributeType=\\\"xml\\\" attributeName=\\\"transform\\\" type=\\\"translate\\\" values=\\\"0 0; 0 20; 0 0\\\" begin=\\\"0.2s\\\" dur=\\\"0.6s\\\"\\n                    repeatCount=\\\"indefinite\\\" />\\n            </rect>\\n            <rect x=\\\"20\\\" y=\\\"0\\\" width=\\\"4\\\" height=\\\"10\\\" fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\">\\n                <animateTransform attributeType=\\\"xml\\\" attributeName=\\\"transform\\\" type=\\\"translate\\\" values=\\\"0 0; 0 20; 0 0\\\" begin=\\\"0.4s\\\" dur=\\\"0.6s\\\"\\n                    repeatCount=\\\"indefinite\\\" />\\n            </rect>\\n        </svg>\\n\\n        <svg ng-show=\\\"vm.loading && vm.spinner == 3\\\" version=\\\"1.1\\\" id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n            x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"24px\\\" height=\\\"30px\\\" viewBox=\\\"0 0 24 30\\\" style=\\\"enable-background:new 0 0 50 50;\\\" xml:space=\\\"preserve\\\">\\n            <rect x=\\\"0\\\" y=\\\"10\\\" width=\\\"4\\\" height=\\\"10\\\" fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=\\\"0.2\\\">\\n                <animate attributeName=\\\"opacity\\\" attributeType=\\\"XML\\\" values=\\\"0.2; 1; .2\\\" begin=\\\"0s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\" />\\n                <animate attributeName=\\\"height\\\" attributeType=\\\"XML\\\" values=\\\"10; 20; 10\\\" begin=\\\"0s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\" />\\n                <animate attributeName=\\\"y\\\" attributeType=\\\"XML\\\" values=\\\"10; 5; 10\\\" begin=\\\"0s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\" />\\n            </rect>\\n            <rect x=\\\"8\\\" y=\\\"10\\\" width=\\\"4\\\" height=\\\"10\\\" fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=\\\"0.2\\\">\\n                <animate attributeName=\\\"opacity\\\" attributeType=\\\"XML\\\" values=\\\"0.2; 1; .2\\\" begin=\\\"0.15s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"\\n                />\\n                <animate attributeName=\\\"height\\\" attributeType=\\\"XML\\\" values=\\\"10; 20; 10\\\" begin=\\\"0.15s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"\\n                />\\n                <animate attributeName=\\\"y\\\" attributeType=\\\"XML\\\" values=\\\"10; 5; 10\\\" begin=\\\"0.15s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\" />\\n            </rect>\\n            <rect x=\\\"16\\\" y=\\\"10\\\" width=\\\"4\\\" height=\\\"10\\\" fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=\\\"0.2\\\">\\n                <animate attributeName=\\\"opacity\\\" attributeType=\\\"XML\\\" values=\\\"0.2; 1; .2\\\" begin=\\\"0.3s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"\\n                />\\n                <animate attributeName=\\\"height\\\" attributeType=\\\"XML\\\" values=\\\"10; 20; 10\\\" begin=\\\"0.3s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"\\n                />\\n                <animate attributeName=\\\"y\\\" attributeType=\\\"XML\\\" values=\\\"10; 5; 10\\\" begin=\\\"0.3s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\" />\\n            </rect>\\n        </svg>\\n\\n\\n    </div>\\n    <span ng-show=\\\"!vm.loading\\\">{{vm.label}}</span>\\n</md-button>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/progressButton.html\n// module id = 107\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/progressButton.css\n// module id = 108\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"progress-button {\\n    outline: none;\\n    margin: 0px 0px !important;\\n    pointer-events: auto;\\n    cursor: pointer;\\n}\\n\\nprogress-button md-button {\\n    pointer-events: auto;\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/components/progressButton.css\n// module id = 109\n// module chunks = 0"," import listItemTemplate from './listItem.html';\n const listItem = {\n     bindings: {\n         size: '@',\n     },\n     controller: function ($element, $scope) {\n         this.$onInit = function () {};\n\n         this.$onChanges = (changesObj) => {};\n         this.$postLink = function () {};\n     },\n     template: listItemTemplate,\n     transclude: true,\n     controllerAs: 'vm'\n };\n\n\n export default listItem;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItem.component.js","module.exports = \"<div layout=\\\"row\\\" class=\\\"listItem\\\" ng-class=\\\"[vm.size]\\\" flex=\\\"100\\\" ng-transclude>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItem.html\n// module id = 111\n// module chunks = 0","import template from './listItemNumericControl.html';\n// import controller from './goatListItem.controller'; import\n// './goatListItem.scss';\n/**\n * @function li-NumberControl\n * @memberOf abl-sdk-feathers.components\n * @description List item control with +/- buttons and input to modify the value.\n * @example  <list-item-numeric-control label=\"Attendee\" value=\"numValue\" min=\"1\" max=\"5\"></list-item-numeric-control>\n */\nconst listItemNumericControl = {\n    restrict: 'E',\n    bindings: {\n        value: '=',\n        label: '@',\n        price: '@',\n        max: '@',\n        min: '@ ',\n        size: '@'\n    },\n    template: template,\n    controller: function ($element) {\n        this.min = 0;\n\n        this.$onInit = function () {\n            this.elem = $($element[0].children[0]);\n            if (!this.value) \n                this.value = 0;\n\n            };\n        \n        this.$onChanges = (changesObj) => {};\n        this.$postLink = function () {};\n\n        this.increment = function () {\n            if (this.max == undefined || this.max > this.value) \n                this.value++;\n                // console.log('increment');\n            };\n        \n        this.decrement = function () {\n            if (this.value > this.min) \n                this.value--;\n            console.log('decrementer');\n        };\n\n        this.checkAdjustValue = () => {\n            if (this.value > this.max) {\n                this.value = this.max;\n            }\n            if (this.value < this.min) \n                this.value = this.min;\n            };\n    },\n    controllerAs: 'vm'\n};\n\nexport default listItemNumericControl;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItemNumericControl.component.js","module.exports = \"<div layout=\\\"row\\\" class=\\\"listItem\\\" ng-class=\\\"[vm.size]\\\" flex=\\\"100\\\">\\n    <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n        <div layout=\\\"column\\\" class=\\\"\\\">\\n            <span class=\\\"lineItemSubHeader\\\">{{vm.label}}</span>\\n            <div layout=\\\"row\\\">\\n                <span class=\\\"lineItemSubDetail\\\">${{vm.price / 100  | number:2}}</span>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <div layout=\\\"row\\\" layout-align=\\\"end center\\\">\\n        <div layout=\\\"column\\\" class=\\\"addOnAdjusters\\\" layout-align=\\\"center end\\\" flex layout-grow>\\n            <ng-md-icon icon=\\\"add_circle_outline\\\" class=\\\"listIconSub\\\" md-colors=\\\"{'fill': 'primary-A200'}\\\" ng-click=\\\"vm.increment();\\\">\\n            </ng-md-icon>\\n            <ng-md-icon icon=\\\" remove_circle_outline\\\" class=\\\"listIconSub\\\" ng-click=\\\"vm.decrement();\\\"></ng-md-icon>\\n        </div>\\n        <div layout=\\\"column\\\" layout-align=\\\"end end\\\">\\n            <input class='addOnQuantityText' ng-model=\\\"vm.value\\\" ng-change=\\\"vm.checkAdjustValue();\\\" type=\\\"number\\\" md-select-on-focus></input>\\n        </div>\\n    </div>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItemNumericControl.html\n// module id = 113\n// module chunks = 0"," /**\n  * @class abl-sdk-feathers.components\n  * @hidden\n  */\n\n\n\n /**\n  * @function li-AddCharge\n  * @memberOf abl-sdk-feathers.components\n  * @description List item to enter a new charge with value.\n  * @example  <list-item-add-charge group=\"vm.charges\"></list-item-add-charge>\n  */\n import template from './listItemAddCharge.html';\n // import controller from './goatListItem.controller';  \n import './listItem.css';\n\n const listItemAddCharge = {\n     bindings: {\n         add: '<',\n         group: '=',\n         buttonClass: '@'\n     },\n     template: template,\n     controller: function ($scope) {\n         this.price = 0;\n         this.$onInit = function () {};\n\n         this.$onChanges = (changesObj) => {};\n         this.$postLink = function () {};\n     },\n     controllerAs: 'vm'\n };\n\n\n export default listItemAddCharge;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItemAddCharge.component.js","module.exports = \"<md-list-item class=\\\"addOnListItem\\\">\\n    <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n        <md-input-container class=\\\"buttonInlineInput full-width \\\">\\n            <label>Name</label>\\n\\n            <input class='buttonInlineInput' ng-model=\\\"vm.label\\\"></input>\\n        </md-input-container>\\n\\n    </div>\\n\\n    <div layout=\\\"row\\\" layout-align=\\\"end center\\\" flex=\\\"20\\\">\\n        <md-input-container class=\\\"buttonInlineInput full-width\\\">\\n            <label>Price</label>\\n\\n            <input class='full-width buttonInlineInput' md-select-on-focus ng-model=\\\"vm.price\\\" type=\\\"number\\\" min=\\\"0\\\" step=\\\"0.01\\\"></input>\\n        </md-input-container>\\n    </div>\\n    <div layout=\\\"row\\\">\\n        <md-button ng-disabled=\\\"!vm.label || !vm.price\\\" ng-class=\\\"[vm.buttonClass.length > 0 ? vm.buttonClass : 'md-raised']\\\" ng-click=\\\"vm.add(vm.label, vm.price)\\\">\\n            Add\\n        </md-button>\\n    </div>\\n\\n</md-list-item>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItemAddCharge.html\n// module id = 115\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./listItem.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./listItem.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./listItem.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItem.css\n// module id = 116\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"    .full-width {\\n        width: 100%;\\n    }\\n\\n    .text-align-left {\\n        text-align: left !important;\\n    }\\n\\n    col-section {\\n        width: 100%;\\n    }\\n\\n    md-checkbox.listItemCheckbox .md-label {\\n        margin-top: 26px;\\n        margin-left: 38px;\\n    }\\n\\n    list-item,\\n    list-item-header,\\n    list-item-numeric-control {\\n        display: block;\\n        width: 100%;\\n    }\\n\\n    .listItem {\\n        height: 72px;\\n        padding: 0 16px;\\n        outline: none;\\n        border: none;\\n        box-shadow: 0 1px 0 0 rgba(0, 0, 0, .05)\\n    }\\n\\n    .listItem md-checkbox .md-container {\\n        height: 4px;\\n    }\\n\\n    .listItem.md {\\n        min-height: 56px;\\n        height: 56px;\\n        line-height: 56px;\\n        padding: 0 16px;\\n        outline: none;\\n        border: none;\\n        box-shadow: 0 1px 0 0 rgba(0, 0, 0, .05);\\n    }\\n\\n    .lg.slideDown.ng-hide {\\n        height: 0 !important;\\n        transition: height 0.35s ease;\\n        overflow: hidden;\\n        position: relative;\\n    }\\n\\n    .lg.slideDown {\\n        height: 72px;\\n        line-height: 72px;\\n        transition: height 0.35s ease;\\n        overflow: hidden;\\n        position: relative;\\n    }\\n\\n    .lg.slideDown.ng-hide-remove,\\n    .lg.slideDown.ng-hide-add {\\n        /* remember, the .hg-hide class is added to element\\n    when the active class is added causing it to appear\\n    as hidden. Therefore set the styling to display=block\\n    so that the hide animation is visible */\\n        display: block!important;\\n    }\\n\\n    .lg.slideDown.ng-hide-add {\\n        animation-name: hide;\\n        -webkit-animation-name: hide;\\n        animation-duration: .5s;\\n        -webkit-animation-duration: .5s;\\n        animation-timing-function: ease-in;\\n        -webkit-animation-timing-function: ease-in;\\n    }\\n\\n    .lg.slideDown.ng-hide-remove {\\n        animation-name: show;\\n        -webkit-animation-name: show;\\n        animation-duration: .5s;\\n        -webkit-animation-duration: .5s;\\n        animation-timing-function: ease-out;\\n        -webkit-animation-timing-function: ease-out;\\n    }\\n\\n    .listItem.sm {\\n        min-height: 36px;\\n        height: 36px;\\n        line-height: 36px;\\n        min-height: 36px;\\n        padding: 0 16px;\\n        font-size: 12px;\\n        outline: none;\\n        border: none;\\n        box-shadow: 0 1px 0 0 rgba(0, 0, 0, .05);\\n    }\\n\\n    .listItem md-autocomplete input:not(.md-input) {\\n        height: 100% !important;\\n        line-height: 100% !important;\\n        padding: 0;\\n    }\\n\\n    .listItem md-autocomplete md-autocomplete-wrap {\\n        box-shadow: none !important;\\n        height: 100% !important;\\n    }\\n\\n    .listItem md-autocomplete {\\n        padding: 0 !important;\\n    }\\n\\n    .listItemAutoCompleteAfterContainer {\\n        margin-top: -20px !important;\\n    }\\n\\n    .listItemFocus {\\n        box-shadow: 0 1px 0 rgba(255, 152, 0, 0.4), 0 -1px 0 rgba(255, 152, 0, 0.4), inset 0px 1px 4px rgba(255, 152, 0, 0.2), inset 0px -1px 4px rgba(255, 152, 0, 0.2) !important;\\n        background: white;\\n    }\\n\\n    input.buttonInlineInput {\\n        /* margin: 0px -16px;*/\\n        padding: 0 0 0 0;\\n        border-width: 0;\\n        -ms-flex-preferred-size: 36px;\\n        font-size: inherit;\\n        width: 100%;\\n        border: none;\\n        outline: none;\\n        box-sizing: border-box;\\n        float: left;\\n        background: transparent;\\n    }\\n\\n    .inputStatusIcon {\\n        height: 24px;\\n        width: 36px;\\n        margin-bottom: 42px !important;\\n        margin-right: 4px !important;\\n    }\\n\\n    .buttonInlineInput:focus {\\n        /* box-shadow: inset 0px 1px 3px rgba(33, 33, 33, 0.3), inset 0px -1px 3px rgba(33, 33, 33, 0.3); */\\n    }\\n\\n    .listItemGreyFocus {\\n        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.28), 0 -1px 0 rgba(0, 0, 0, 0.28), inset 0px 1px 4px rgba(0, 0, 0, 0.16), inset 1px -1px 4px rgba(0, 0, 0, 0.2) !important;\\n    }\\n\\n    .listItemGreyFocus input,\\n    textarea {\\n        color: rgb(63, 81, 181);\\n    }\\n\\n    .listItemGreyFocus ng-md-icon.listItemHeaderIcon {\\n        fill: rgb(63, 81, 181);\\n    }\\n\\n    .listItemFocusBottomBorder {\\n        box-shadow: 0px 2px 0 rgba(58, 171, 56, 0.92), inset 0 -1px 3px rgba(57, 73, 171, .2), inset 0 1px rgba(0, 0, 0, .1) !important;\\n    }\\n\\n    .listItemFocusBottomBorder input,\\n    textarea {\\n        color: rgb(0, 0, 0);\\n    }\\n\\n    md-input-container.buttonInlineInput {\\n        display: inline-block;\\n        position: relative;\\n        height: 36px;\\n        padding: 5px;\\n        margin: 0;\\n        vertical-align: middle;\\n    }\\n\\n    .listItemPadding {\\n        padding: 0 16px;\\n    }\\n\\n    .listItem.listItemHeader {\\n        font-size: 16px;\\n        margin: auto;\\n        font-weight: 500;\\n        cursor: unset;\\n        line-height: 72px;\\n        font-weight: 500;\\n        cursor: unset;\\n        color: white;\\n    }\\n\\n    .listItem.listItemHeader.light {\\n        color: black;\\n        background: #fff;\\n    }\\n\\n    .listItem.listItemHeader.dark {\\n        color: white;\\n        background: #424242;\\n    }\\n\\n    .listItemHeaderBottomBorder {\\n      box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.16), 0px 0px 1px rgba(0, 0, 0, .3);\\n    }\\n    .listItem .strong {\\n        font-weight: 600;\\n    }\\n\\n    .listItem.sm.listItemHeader {\\n        font-size: 12px;\\n        margin: 0;\\n        font-weight: 500;\\n        cursor: unset;\\n        line-height: 36px;\\n    }\\n\\n    .listItem.md.listItemHeader {\\n        font-size: 16px;\\n        margin: 0;\\n        font-weight: 500;\\n        cursor: unset;\\n        line-height: 54px;\\n    }\\n\\n    .leftIcon {\\n        margin-right: 16px;\\n    }\\n\\n    ng-md-icon.listItemHeaderIcon.lg,\\n    ng-md-icon.listItemHeaderIcon.lg svg {\\n        margin: auto 0 auto 0;\\n        height: 32px;\\n        width: 32px;\\n    }\\n\\n    ng-md-icon.listItemHeaderIcon.md,\\n    ng-md-icon.listItemHeaderIcon.md svg {\\n        margin: auto 0 auto 0;\\n        height: 24px;\\n        width: 24px;\\n    }\\n\\n    ng-md-icon.listItemHeaderIcon.sm,\\n    ng-md-icon.listItemHeaderIcon.sm svg {\\n        margin: auto 8px auto 0;\\n        height: 16px;\\n        width: 16px;\\n    }\\n\\n    .lineItemSubHeader {\\n        font-size: 14px;\\n        font-weight: 400;\\n        padding: 0 16px 0 0;\\n        line-height: 1.6em;\\n        overflow: hidden;\\n        white-space: nowrap;\\n        text-overflow: ellipsis;\\n        color: rgba(0, 0, 0, 0.92) !important;\\n    }\\n\\n    .autocomplete-custom-template li {\\n        border-bottom: 1px solid #ccc;\\n        height: auto;\\n        padding-top: 8px;\\n        padding-bottom: 8px;\\n        white-space: normal;\\n    }\\n\\n    .autocomplete-custom-template li:last-child {\\n        border-bottom-width: 0;\\n    }\\n\\n    .autocomplete-custom-template .item-title {\\n        font-weight: 600;\\n    }\\n\\n    .autocomplete-custom-template .item-title,\\n    .autocomplete-custom-template .item-metadata {\\n        display: block;\\n        line-height: 2;\\n    }\\n\\n    .autocomplete-custom-template .item-title md-icon {\\n        height: 18px;\\n        width: 18px;\\n    }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/components/listItem.css\n// module id = 117\n// module chunks = 0","import template from './listItemHeader.html';\n// import controller from './goatListItem.controller';\n\nconst listItemHeader = {\n    bindings: {\n        action: '@',\n        actionClick: '=',\n        expanded: '=',\n        title: '@',\n        icon: '@',\n        size: '@'\n    },\n    template: template,\n    controller: function () {\n\n        this.$onInit = function () {\n            if (!this.expanded) \n                this.expanded = false;\n\n            };\n        \n        this.$onChanges = (changesObj) => {};\n        this.$postLink = function () {};\n\n        this.click = function () {\n            console.log('click function');\n            if (this.action == 'expandable') {\n                this.expanded = !this.expanded;\n\n            }\n        }\n    },\n    controllerAs: 'vm'\n};\n\nexport default listItemHeader;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItemHeader.component.js","module.exports = \"<div class=\\\"listItem listItemHeader\\\" ng-class=\\\"[vm.size]\\\" ng-disabled=\\\"!vm.action\\\" ng-click=\\\"vm.click()\\\">\\n    <div layout=\\\"row\\\" flex>\\n        <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex=\\\"80\\\">\\n            <ng-md-icon ng-if=\\\"vm.icon\\\" icon=\\\"{{vm.icon}}\\\" class=\\\"headerIcon listIcon\\\"></ng-md-icon>\\n            <div class=\\\"listItemHeaderText\\\">{{vm.title}}</div>\\n        </div>\\n\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" flex=\\\"20\\\">\\n            <div layout=\\\"column\\\" layout-align=\\\"center end\\\" ng-if=\\\"vm.action == 'expandable'\\\" flex>\\n                <ng-md-icon icon=\\\"{{vm.expanded ? 'expand_less' : 'expand_more'}}\\\" options='{\\\"duration\\\": 500, \\\"rotation\\\": \\\"clock\\\", \\\"easing\\\":\\\"linear\\\"}'\\n                    class=\\\"listItemHeaderIcon\\\"></ng-md-icon>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItemHeader.html\n// module id = 119\n// module chunks = 0","import './activity-book.css';\n\nimport activityTotalTemplate from './activity-total.html';\nimport activityFormsTemplate from './activity-forms.html';\nimport activityBookingTemplate from './activity-book.html';\nimport activityBookValidators from './activity-book-validators';\n\nimport activityAdjustmentController from './activity.adjustment.controls.component.js'\n/**\n * @namespace activity-book\n */\nexport default angular\n    .module('activity-book', ['ngMaterial', 'rx'])\n    .run(function ($templateCache) {\n        $templateCache.put('activity-forms.html', activityFormsTemplate);\n        $templateCache.put('activity-book.html', activityBookingTemplate);\n        $templateCache.put('activity-total.html', activityTotalTemplate);\n    })\n    .controller('activityAdjustmentController', activityAdjustmentController)\n    .directive('ablActivityBook', [\n        '$rootScope',\n        '$sce',\n        '$compile',\n        '$mdMedia',\n        '$mdDialog',\n        '$mdToast',\n        '$log',\n        '$window',\n        '$timeout',\n        '$http',\n        'rx',\n        'observeOnScope',\n        '$stateParams',\n        '$state',\n        function ($rootScope, $sce, $compile, $mdMedia, $mdDialog, $mdToast, $log, $window, $timeout, $http, rx, observeOnScope, $stateParams, $state) {\n            return {\n                restrict: 'E',\n                scope: {\n                    book: '=',\n                    activity: '=',\n                    app: '='\n                },\n                template: activityBookingTemplate,\n                link: function ($scope, element, attrs) {\n                    // Digest on resize to recalculate $mdMedia window size\n                    function onResize() {\n                        $scope.$digest();\n                    };\n                    angular\n                        .element($window)\n                        .on('resize', onResize);\n                },\n                controllerAs: 'vm',\n                controller: function ($scope, $element, $attrs) {\n                    let vm = this;\n                    this.formWasBlocked = false;\n                    this.guestDetailsExpanded = true;\n                    this.attendeesExpanded = false;\n                    this.addonsExpanded = false;\n                    this.questionsExpanded = false;\n                    this.stripePaymentExpanded = false;\n                    this.stripeCardIsValid = false;\n                    this.paymentExpanded = false;\n                    this.showPaymentForm = false;\n                    this.paymentFormIsLoading = false;\n                    this.paymentWasSent = false;\n                    this.waitingForResponse = false;\n                    this.validStepsForPayment = {\n                        'guest': false,\n                        'attendees': false\n                    };\n\n                    this.couponStatus = 'untouched';\n                    this.appliedCoupon = {};\n                    this.couponQuery = '';\n                    this.occupancyRemaining = 0;\n\n                    this.attendeeSubtotals = [];\n                    this.addonSubtotals = [];\n\n                    vm.taxes = [];\n                    vm.taxTotal = 0;\n                    vm.addons = [];\n                    vm.questions = [];\n                    vm.goToPay = goToPay;\n                    vm.submitNonCreditCardBooking = submitNonCreditCardBooking;\n\n                    $scope.sendConfirmationEmail = true;\n\n                    // Environment is configured differently across apps so get config from the\n                    // $rootScope for now\n                    const config = $rootScope.config;\n                    let headers = {};\n\n                    //Activity dash needs no headers\n                    if (!config.DASHBOARD) {\n                        headers = {\n                            'x-abl-access-key': $stateParams.merchant || 'tLVVsHUlBAweKP2ZOofhRBCFFP54hX9CfmQ9EsDlyLfN6DYHY5k8VzpuiUxjNO5L', //$stateParams.merchant || config.ABL_ACCESS_KEY,\n                            'x-abl-date': Date.parse(new Date().toISOString()),\n                            \"Content-Type\": \"application/json;charset=utf-8\"\n\n                        };\n                        //Require booking questions on consumer facing apps\n                        vm.validStepsForPayment['bookingQuestions'] = false;\n                    } else {\n                        $scope.dashboard = true;\n                    }\n\n                    $log.debug('abl-activity-book $scope', $scope);\n\n                    if (Raven) {\n                        Raven.captureMessage('Add Booking', {\n                            level: 'info', // one of 'info', 'warning', or 'error'\n                            tags: {\n                                step: 'opened'\n                            }\n                        });\n                    }\n                    $scope.formatDate = function (date, format) {\n                        return window\n                            .moment(date)\n                            .format(format);\n                    }\n                    $scope.paymentResponse = '';\n                    $scope.paymentSuccessful = false;\n\n                    this.goToNextStep = function (currentStepName, form) {\n                        switch (currentStepName) {\n                            case 'guestDetailsStep': //goes to attendees\n                                vm.toggleGuestDetails();\n                                vm.toggleAttendees();\n                                break;\n                            case 'attendeesStep': //goes to addons || booking || pay\n                                //$log.debug('goToNextStep:attendeesStep', vm.attendeesAdded);\n                                if (vm.countAttendeesAdded() > 0) { //validate attendees\n                                    //$log.debug('attendeesStep', vm.addons.length, vm.questions);\n                                    if (vm.addons.length > 0) {\n                                        vm.attendeesExpanded = false; //close current\n                                        vm.addonsExpanded = true; //close current\n                                    } else if (vm.questions.length > 0) {\n                                        vm.attendeesExpanded = false; //close current\n                                        vm.questionsExpanded = true;\n                                    } else {\n                                        vm.attendeesExpanded = false; //close current\n                                        vm.stripePaymentExpanded = true;\n                                        if (!$scope.dashboard) {\n                                            $log.debug('no questions, goToPay');\n                                            vm.goToPay();\n                                        }\n                                    }\n                                }\n                                break;\n                            case 'addonsStep': //goes to addons || booking || pay\n                                if (vm.addons && vm.addons.length > 0) { //validate addons\n                                    if (vm.countAttendeesAdded()) { //if guests and attendees are valid\n                                        if (vm.questions.length > 0) { //go to questions if questions exist\n                                            vm.addonsExpanded = false;\n                                            vm.questionsExpanded = true;\n                                        } else { //got to pay if qustions doesn't exist\n                                            vm.addonsExpanded = false;\n                                            vm.stripePaymentExpanded = true;\n                                            if (!$scope.dashboard) {\n                                                $log.debug('no questions, goToPay');\n                                                vm.goToPay();\n                                            }\n                                        }\n                                    }\n                                }\n                                break;\n                            case 'paymentStep': //goes to addons || booking || pay\n                                $log.debug('goToNextStep:paymentStep', vm.isPaymentValid());\n                                if (vm.isPaymentValid()) { //if guests and attendees are valid\n                                    vm.guestDetailsExpanded = false;\n                                    vm.attendeesExpanded = false;\n                                    vm.addonsExpanded = false;\n                                    vm.questionsExpanded = false;\n                                    vm.stripePaymentExpanded = true;\n                                    if (!$scope.dashboard) {\n                                        vm.goToPay()\n                                    }\n                                }\n                                break;\n                        }\n                    }\n\n                    vm.guestDetailsFormValid = false;\n\n                    this.toggleGuestDetails = function () {\n                        //console.log('toggle guest details');\n                        this.guestDetailsExpanded = this.formWasBlocked\n                            ? false\n                            : !this.guestDetailsExpanded;\n                    }\n\n                    this.togglePayment = function () {\n                        //$log.debug('toggle payment');\n                        this.paymentExpanded = !this.paymentExpanded;\n                    }\n\n                    this.returnToMainPage = function () {\n\n                        if ($rootScope.config.DASHBOARD) {\n                            $mdDialog.hide();\n                            $state.reload();\n                        } else {\n                            $mdDialog.hide();\n                            $state.go('home', {merchant: $stateParams.merchant});\n                        }\n                    }\n                    this.pricing = {\n                        total: 0\n                    };\n                    this.taxTotal,\n                    this.addonTotal,\n                    this.attendeeTotal = 0;\n\n                    $scope.bookingSucceeded = false;\n                    $scope.$mdMedia = $mdMedia;\n                    $scope.screenIsBig = function () {\n                        var w = angular.element($window);\n                        return w[0].innerWidth > 742;\n                    }\n\n                    $scope.addBookingController = $scope.$parent;\n                    //$log.debug('addBookingController', $scope.addBookingController);\n\n                    this.toggleQuestions = function () {\n                        //$log.debug('toggle questions');\n                        this.questionsExpanded = this.formWasBlocked\n                            ? false\n                            : !this.questionsExpanded;\n                    }\n\n                    this.adjustAddon = function (i, mode) {\n                        if (mode == 'up') \n                            vm.addons[i].quantity++;\n                        if (mode == 'down' && vm.addons[i].quantity > 0) \n                            vm.addons[i].quantity--;\n                        \n                        $scope.safeApply()\n                        $log.debug('adjust addons', vm.addons);\n                        vm.getPricingQuote();\n                    }\n                    //$log.debug('adjustAddon:addons', vm.addons);\n\n                    this.toggleAddons = function () {\n                        //$log.debug('toggle addons');\n                        if (vm.addons.length < 1) \n                            this.questionsExpanded = this.formWasBlocked\n                                ? false\n                                : !this.questionsExpanded;\n                        else \n                            this.addonsExpanded = this.formWasBlocked\n                                ? false\n                                : !this.addonsExpanded;\n                        }\n                    \n                    this.toggleStripePay = function () {\n                        this.paymentExpanded = !this.paymentExpanded;\n                    }\n\n                    this.togglePay = function () {\n                        this.payButtonEnabled = !this.payButtonEnabled;\n                    }\n\n                    this.adjustAttendee = function (i, mode) {\n                        //Allow dashboard users to overbook\n                        if (mode == 'up' && (vm.countAttendees() > 0 || $scope.dashboard)) \n                            vm.attendees[i].quantity++;\n                        if (mode == 'down' && vm.attendees[i].quantity > 0) \n                            vm.attendees[i].quantity--;\n                        \n                        //$log.debug('adjust attendees', vm.attendees);\n                        vm.getPricingQuote();\n                        vm.countAttendees();\n                    }\n\n                    this.toggleAttendees = function () {\n                        //$log.debug('toggle attendees');\n                        this.attendeesExpanded = this.formWasBlocked\n                            ? false\n                            : !this.attendeesExpanded;\n                    }\n\n                    this.checkAdjustAttendee = function ($index) {\n                        if (!$scope.dashboard && vm.attendees[$index].quantity > vm.countAttendees()) {\n                            vm.attendees[$index].quantity = 0;\n                            vm.attendees[$index].quantity = vm.countAttendees();\n                        }\n                        if (vm.attendees[$index].quantity < 0) \n                            vm.attendees[$index].quantity = 0;\n                        \n                        vm.getPricingQuote();\n                        vm.countAttendees();\n                        $scope.safeApply();\n                        $log.debug('attendees added', vm.countAttendees(), vm.attendees[$index].quantity);\n                    }\n\n                    var data = {\n                        \"attendees\": {},\n                        \"addons\": {}\n                    }\n\n                    function buildQuery() {\n                        // Parse attendees\n                        angular\n                            .forEach(vm.attendees, function (e, i) {\n                                data[\"attendees\"][e._id] = [];\n                                if (e.quantity > 0) {\n                                    for (var i = 0; i < e.quantity; i++) {\n                                        data[\"attendees\"][e._id].push(null);\n                                    }\n                                }\n                            });\n                        // Parse addons\n                        angular.forEach(vm.addons, function (e, i) {\n                            data[\"addons\"][e._id] = [];\n                            if (e.quantity > 0) {\n                                for (var i = 0; i < e.quantity; i++) {\n                                    data[\"addons\"][e._id].push(null);\n                                }\n                            }\n                        });\n                        //$log.debug('pricing quote POST data', data);\n                        return data;\n                    }\n\n                    // Query for pricing data based on the data object used to make a booking\n                    // request\n                    vm.getPricingQuote = function () {\n                        var query = buildQuery();\n                        $http({\n                                method: 'POST',\n                                url: config.FEATHERS_URL + '/pricing-quotes',\n                                data: query,\n                                headers: headers\n                            }).then(function successCallback(response) {\n                            vm.pricing = response.data;\n                            vm.pricing.couponDeduction = vm\n                                .pricing\n                                .items\n                                .filter(function (item) {\n                                    return item.type == 'coupon';\n                                });\n\n                            var addonsFilter = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == 'addon';\n                                });\n                            vm.addonTotal = 0;\n                            vm.addonSubtotals = [];\n                            var addonsArray = {};\n                            angular.forEach(addonsFilter, function (addon, key) {\n                                var object = addon.type + addon\n                                    .name\n                                    .replace(' ', '');\n                                if (!addonsArray[object]) {\n                                    addonsArray[object] = {\n                                        addons: []\n                                    };\n                                }\n                                addonsArray[object]\n                                    .addons\n                                    .push(addon);\n                            });\n                            angular.forEach(addonsArray, function (addon, key) {\n                                var obj = {\n                                    name: addon.addons[0].name,\n                                    price: addon.addons[0].amount || addon.addons[0].price,\n                                    amount: (addon.addons[0].amount || addon.addons[0].price) * addon.addons[0].quantity,\n                                    quantity: addon.addons[0].quantity\n                                };\n                                vm.addonTotal += (addon.addons[0].amount || addon.addons[0].price) * addon.addons[0].quantity;\n                                vm\n                                    .addonSubtotals\n                                    .push(obj);\n                            });\n\n                            vm.attendeeTotal = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == \"aap\"\n                                })\n                                .reduce(function (result, att) {\n                                    return result + (att.amount || att.price) * att.quantity\n                                }, 0);\n\n                            var aapFilter = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == 'aap';\n                                });\n                            vm.attendeeSubtotals = [];\n                            var attendeesArray = {};\n                            angular.forEach(aapFilter, function (aap, key) {\n                                var object = aap.type + aap\n                                    .name\n                                    .replace(' ', '');\n                                if (!attendeesArray[object]) {\n                                    attendeesArray[object] = {\n                                        aaps: []\n                                    };\n                                }\n                                attendeesArray[object]\n                                    .aaps\n                                    .push(aap);\n                            });\n                            angular.forEach(attendeesArray, function (aap, key) {\n                                var obj = {\n                                    name: aap.aaps[0].name,\n                                    price: aap.aaps[0].amount || aap.aaps[0].price,\n                                    amount: aap.aaps[0].amount * aap.aaps[0].quantity,\n                                    quantity: aap.aaps[0].quantity\n                                };\n                                vm\n                                    .attendeeSubtotals\n                                    .push(obj);\n                            });\n\n                            vm.taxTotal = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == \"tax\" || item.type == \"fee\" || item.type == 'service'\n                                })\n                                .reduce(function (result, tax) {\n                                    return result + ((tax.amount || tax.price) * tax.quantity)\n                                }, 0);\n\n                            $log.debug('getPricingQuotes', response);\n                            $log.debug('attendeeSubtotal', vm.attendeeSubtotals);\n                            $log.debug('taxTotal', vm.taxTotal);\n\n                            if (vm.pricing.total == 0 && vm.paymentMethod == 'credit') {\n                                vm.paymentMethod = 'cash';\n                            }\n                        }, function errorCallback(response) {\n                            vm.pricing = {};\n                            vm.taxTotal = 0;\n                            $mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position('left bottom').hideDelay(3000));\n                            //$log.debug('getPricingQuotes error!', response, vm.pricing);\n                        });\n                    }\n\n                    //Query for possible coupons partially matching the vm.couponQuery search string\n                    vm.getPossibleCoupons = function () {\n                        $http({\n                                method: 'GET',\n                                url: config.FEATHERS_URL + '/coupons?bookingId=' + vm.couponQuery,\n                                headers: headers\n                            })\n                            .then(function successCallback(response) {\n                                vm.possibleCoupons = response.data;\n                                $log.debug('getPossibleCoupons success', response);\n                            }, function errorCallback(response) {\n                                vm.possibleCoupons = [];\n                                // vm.taxTotal = 0; $log.debug('getPossibleCoupons error!', response);\n                            });\n                    }\n\n                    vm.clients = [];\n                    observeOnScope($scope, 'vm.formData.fullName').map(function (data) {\n                        return data;\n                    })\n                        .subscribe(function (change) {\n                            $log.debug('clientSearchText ', change.newValue);\n                            if ($scope.dashboard) {\n                                vm.clients = $http({\n                                        method: 'GET',\n                                        url: config.FEATHERS_URL + '/clients?fullName=' + change.newValue,\n                                        headers: headers\n                                    }).then(function successCallback(response) {\n                                    $log.debug('clientSearch success', response);\n                                    return response.data.list;\n                                }, function errorCallback(response) {\n                                    $log.debug('clientSearch error!', response);\n                                    return [];\n                                });\n                            }\n                        });\n\n                    vm.selectedClientChange = function (client) {\n                        if (client) {\n                            vm.formData.fullName = client.primaryContact.fullName || '';\n                            vm.formData.mail = client.primaryContact.email || '';\n                            vm.formData.phoneNumber = client.primaryContact.phoneNumber || '';\n                            $log.debug('selectedClientChange', client);\n                        }\n                    }\n\n                    $scope.autocomplete = {};\n                    vm.couponStatus = 'untouched';\n\n                    $scope.autocomplete.searchTextChange = function searchTextChange(text) {\n                        if (!text) \n                            if (data['couponId']) \n                                delete data['couponId'];\n                            }\n                        \n                    $scope.autocomplete.selectedItemChange = function selectedItemChange(item) {\n                        $log.debug('applied coupon', item);\n\n                        if (item) {\n                            vm.appliedCoupon = item;\n                            data['couponId'] = item['couponId'];\n                            vm.validateCoupon(vm.appliedCoupon);\n                            vm.couponStatus = 'valid';\n                            vm.getPricingQuote();\n                            vm.checkingCoupon = false;\n                        } else {\n                            vm.appliedCoupon = undefined;\n                            vm.couponStatus = 'untouched';\n                            if (data['couponId']) \n                                delete data['couponId'];\n                            }\n                        }\n\n                    var queryDebounce = false;\n                    vm.coupons = [];\n                    $scope.autocomplete.querySearch = function querySearch(text) {\n                        if ($scope.dashboard) {\n                            text = text.toUpperCase();\n                            if (!queryDebounce && text.length !== 1) {\n                                queryDebounce = true;\n                                return $timeout(function () {\n                                    return $http({\n                                            method: 'GET',\n                                            url: config.FEATHERS_URL + '/coupons?couponId=' + text + '&activities=' + $scope.addBookingController.activity._id,\n                                            headers: headers\n                                        }).then(function successCallback(response) {\n                                        queryDebounce = false;\n                                        vm.coupons = response.data.list;\n                                        return vm.coupons;\n                                        $log.debug('getPossibleCoupons success', response.data.list);\n                                    }, function errorCallback(response) {\n                                        queryDebounce = false;\n                                        return [];\n                                        $log.debug('getPossibleCoupons error!', response);\n                                    });\n                                }, 100)\n\n                            } else {\n                                return this;\n                            }\n                        }\n\n                    }\n\n                    // Check whether the vm.couponQuery search string exists as a coupon, if\n                    // successful, add the coupon id to the make booking request object as the\n                    // 'coupon' property\n                    vm.checkCoupon = function () {\n                        vm.checkingCoupon = true;\n                        //$log.debug('check coupon', vm.couponQuery);\n                        $http({\n                                method: 'GET',\n                                url: config.FEATHERS_URL + '/coupons/' + vm.couponQuery + '&activities=' + $scope.addBookingController.activity._id,\n                                headers: headers\n                            }).then(function successCallback(response) {\n                            $log.debug('checkCoupon success', response);\n                            data['couponId'] = response.data['couponId'];\n                            vm.appliedCoupon = response.data;\n                            $log.debug('applied coupon', vm.appliedCoupon);\n                            vm.validateCoupon(vm.appliedCoupon);\n                            vm.couponStatus = 'valid';\n                            vm.getPricingQuote();\n                            vm.checkingCoupon = false;\n\n                        }, function errorCallback(response) {\n                            delete data['couponId'];\n                            vm.couponStatus = 'invalid';\n                            vm.appliedCoupon = {};\n                            vm.checkingCoupon = false;\n\n                            //$log.debug('checkCoupon error!', response);\n                        });\n                    }\n\n                    vm.removeCoupon = function () {\n                        vm.couponQuery = '';\n                        delete data['couponId'];\n                        $scope.autocomplete.selectedItem = undefined;\n                        vm.couponStatus = 'untouched';\n                        vm.appliedCoupon = {};\n                        vm.getPricingQuote();\n                    }\n\n                    const moment = window.moment;\n\n                    vm.validateCoupon = function (coupon) {\n                        const today = moment();\n                        // $log.debug('coupon expires after today',\n                        // moment(coupon.endTime).isAfter(moment())); Coupon is not expired and is\n                        // infinitely redeemable\n                        if (moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions == 0) \n                            return true;\n                        \n                        // Coupon is not expired and has been redeemed less than the maximum allowable\n                        // redemptions\n                        if (coupon.maxRedemptions > 0 && moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions - coupon.redemptions >= 0) \n                            return true;\n                        \n                        //Coupon is expired or has been redeemed too many times\n                        vm.couponStatus = 'invalid';\n                        return false;\n                    }\n\n                    vm.bookingQuestionsCompleted = function () {\n                        var completed = 0;\n                        if (vm.bookingQuestions) {\n                            angular\n                                .forEach(vm.bookingQuestions, function (e, i) {\n                                    if (e.length > 0) \n                                        completed++;\n                                    }\n                                );\n                        } else {\n                            completed = 0;\n                        }\n                        //$log.debug('vm.bookingQuestions', vm.bookingQuestions, completed);\n                        return completed;\n                    }\n                    // Observe and debounce an object on the $scope, can be used on a search input\n                    // for example to wait before auto-sending the value\n                    observeOnScope($scope, 'vm.couponQuery')\n                        .debounce(500)\n                        .select(function (response) {\n                            return response;\n                        })\n                        .subscribe(function (change) {\n                            //$log.debug('search value', change);\n                            if (vm.couponQuery.length > 0) \n                                vm.checkCoupon();\n                            }\n                        );\n\n                    activityBookValidators(vm, rx, $http, $stateParams);\n\n                    $scope.$watch('addBookingController.activity', function (changes) {\n                        $log.debug('addBookingController.activity', changes);\n                        if (angular.isDefined($scope.addBookingController.activity)) {\n                            //Get booking questions\n                            vm.questions = $scope.addBookingController.activity.questions || [];\n                            if (!vm.questions) {\n                                delete vm.validStepsForPayment.bookingQuestions;\n                            }\n                            //$log.debug('booking questions', vm.questions);\n\n                            vm.addons = $scope\n                                .addBookingController\n                                .activity\n                                .charges\n                                .filter(function (charge) {\n                                    return charge.type == 'addon' && charge.status == 'active';\n                                });\n                            if (!vm.addons) {\n                                delete vm.validStepsForPayment.addons;\n                            }\n                            vm\n                                .addons\n                                .forEach(function (e, i) {\n                                    if (!angular.isDefined(e.quantity)) \n                                        e.quantity = 0;\n                                    }\n                                );\n\n                            vm.taxes = $scope\n                                .addBookingController\n                                .activity\n                                .charges\n                                .filter(function (charge) {\n                                    return charge.type == 'tax';\n                                });\n                            $scope.safeApply();\n                            //$log.debug('taxes', vm.taxes);\n\n                        }\n                    }, true);\n\n                    $scope.$watch('addBookingController.timeslot', function (changes) {\n                        if (angular.isDefined($scope.addBookingController.timeslot) && angular.isDefined($scope.addBookingController.event)) {\n\n                            if (angular.isDefined($scope.addBookingController.timeslot.charges)) {\n                                vm.attendees = $scope\n                                    .addBookingController\n                                    .timeslot\n                                    .charges\n                                    .filter(function (charge) {\n                                        return charge.type == 'aap' && charge.status == 'active';\n                                    });\n                                vm\n                                    .attendees\n                                    .forEach(function (e, i) {\n                                        if (!angular.isDefined(e.quantity)) \n                                            e.quantity = 0;\n                                        }\n                                    );\n                            }\n                            data['timeSlotId'] = $scope.addBookingController.timeslot._id;\n                            data['startTime'] = $scope.addBookingController.event.startTime;\n\n                        }\n                    }, true);\n\n                    vm.countAttendees = function () {\n                        var attendees = 0;\n                        if ($scope.addBookingController.event) {\n                            if (vm.attendees) {\n                                attendees = ($scope.addBookingController.event.maxOcc\n                                    ? $scope.addBookingController.event.maxOcc\n                                    : $scope.addBookingController.timeslot.maxOcc) - vm\n                                    .attendees\n                                    .map(function (att) {\n                                        return att.quantity;\n                                    })\n                                    .reduce((a, b) => a + b, 0) - $scope.addBookingController.event.attendees;\n                            } else {\n                                attendees = 0;\n                            }\n                        }\n                        return attendees;\n\n                    }\n\n                    vm.countAttendeesAdded = function () {\n                        var attendeesAdded = 0;\n                        if ($scope.addBookingController.event) {\n                            if (vm.attendees) {\n                                attendeesAdded = vm\n                                    .attendees\n                                    .map(function (att) {\n                                        return att.quantity;\n                                    })\n                                    .reduce((a, b) => a + b, 0);\n                            }\n                        }\n                        // $log.debug('countAttendeesAdded', attendeesAdded);\n                        return attendeesAdded;\n                    }\n\n                    vm.countAddonsAdded = function () {\n                        if ($scope.addBookingController.event) {\n                            if (vm.addons) {\n                                return vm\n                                    .addons\n                                    .map(function (add) {\n                                        return add.quantity;\n                                    })\n                                    .reduce((a, b) => a + b, 0);\n                            } else {\n                                return 0;\n                            }\n                        }\n                        return 0;\n                    }\n\n                    vm.addonsChanged = function () {\n                        $scope.safeApply();\n                        $log.debug('addonsChanged');\n                        $timeout(function () {\n                            vm.getPricingQuote();\n                        }, 0);\n                    }\n\n                    this.areGuestDetailsValid = function (form) {\n                        if (form) {\n                            vm.guestDetailsAreValid = form.$valid;\n                            vm.validStepsForPayment.guest = vm.guestDetailsAreValid;\n                        } else {\n                            vm.guestDetailsAreValid = false;\n                        }\n                        return vm.guestDetailsAreValid;\n                    }\n\n                    this.areAttendeesValid = function () {\n                        vm.validStepsForPayment.attendees = vm.countAttendeesAdded() === 0\n                            ? false\n                            : true;\n                        return vm.countAttendeesAdded() === 0\n                            ? false\n                            : true;\n                    }\n\n                    this.areAddonsValid = function () {\n                        if (vm.validStepsForPayment.addons != null) {\n                            vm.validStepsForPayment.addons = true;\n                        }\n                        return vm.countAddonsAdded() === 0\n                            ? false\n                            : true;\n                    }\n\n                    this.areBookingQuestionsValid = function () {\n                        if (vm.validStepsForPayment.bookingQuestions != null) {\n                            vm.validStepsForPayment.bookingQuestions = (vm.bookingQuestionsCompleted() === vm.questions.length\n                                ? true\n                                : false);\n                        }\n                        $log.debug('areBookingQuestionsValid ', vm.validStepsForPayment.bookingQuestions)\n\n                        return vm.validStepsForPayment.bookingQuestions;\n                    }\n\n                    this.isPaymentValid = function () {\n                        var isValid = [];\n                        angular.forEach(vm.validStepsForPayment, function (step, key) {\n                            if (!step) {\n                                isValid.push(step);\n                            }\n                        });\n                        return isValid.length > 0\n                            ? false\n                            : true;\n                    }\n\n                    this.isNextStepPayment = function (step) {\n                        if (step === 'attendees') {\n                            if (vm.addons || vm.questions) {\n                                return vm.addons || vm.questions\n                                    ? true\n                                    : false;\n                            } else {\n                                return false;\n                            }\n                        }\n                        if (step === 'addons') {\n                            if (vm.questions) {\n                                return vm.questions\n                                    ? true\n                                    : false;\n                            } else {\n                                return false;\n                            }\n                        }\n                        if (step === 'payment') {\n                            return true;\n                        }\n                    }\n\n                    vm.paymentMethod = 'credit';\n                    vm.bookingQuestions = [];\n                    vm.getBookingData = function () {\n                        const bookingData = angular.copy(data);\n                        if (vm.paymentMethod == 'reserved') \n                            bookingData['amount'] = 0;\n                        bookingData['eventInstanceId'] = $scope.addBookingController.event['eventInstanceId'] || $scope.addBookingController.event;\n                        bookingData['answers'] = {};\n\n                        bookingData['sendConfirmationEmail'] = $scope.sendConfirmationEmail;\n                        bookingData['skipConfirmation'] = !$scope.sendConfirmationEmail;\n\n                        bookingData['email'] = vm.formData['mail'];\n                        bookingData['phoneNumber'] = vm.formData['phoneNumber'];\n                        bookingData['fullName'] = vm.formData['fullName'];\n                        bookingData['notes'] = vm.formData['notes'];\n                        bookingData['skipConfirmation'] = false;\n                        bookingData['operator'] = $scope.addBookingController.event.operator || $scope.addBookingController.event.organizations[0] || $scope.addBookingController.activity.operator || $scope.addBookingController.activity.organizations[0];\n                        angular.forEach(vm.questions, function (e, i) {\n                            $log.debug('vm.questions', vm.questions);\n                            $log.debug('vm.bookingQuestions', vm.bookingQuestions);\n                            bookingData['answers'][e._id\n                                    ? e._id\n                                    : e] = vm.bookingQuestions[i];\n                        });\n\n                        if (vm.paymentMethod != 'reserved') \n                            bookingData['paymentMethod'] = vm.paymentMethod;\n                        else \n                            bookingData['paymentMethod'] = 'cash';\n                        \n                        if (vm.paymentMethod == 'reserved') {\n                            bookingData['amount'] = 0;\n                        }\n                        bookingData['currency'] = 'default';\n\n                        return bookingData;\n                    }\n\n                    vm.outputBookingData = function () {\n                        $log.debug(vm.getBookingData());\n                    }\n\n                    $scope.safeApply = function (fn) {\n                        var phase = this.$root.$$phase;\n                        if (phase == '$apply' || phase == '$digest') {\n                            if (fn && (typeof(fn) === 'function')) {\n                                fn();\n                            }\n                        } else {\n                            this.$apply(fn);\n                        }\n                    };\n\n                    function goToPay() {\n\n                        vm.guestDetailsExpanded = false;\n                        vm.attendeesExpanded = false;\n                        vm.addonsExpanded = false;\n                        vm.questionsExpanded = false;\n\n                        vm.showPaymentForm = true;\n                        vm.paymentFormIsLoading = true;\n                        vm.stripePaymentExpanded = true;\n\n                        vm.paymentWasSent = true;\n                        this.formWasBlocked = true;\n                        $scope.bookingSuccessResponse = 'processing';\n                        $scope.safeApply();\n                        $scope.makeBooking();\n                    }\n\n                    function submitNonCreditCardBooking() {\n                        $log.debug('submitNonCreditCardBooking', this.pricing.total);\n\n                        var bookingData = vm.getBookingData();\n                        if (bookingData.stripeToken) \n                            delete bookingData.stripeToken;\n                        bookingData.location = {};\n                        bookingData.isMobile = false;\n                        vm.paymentWasSent = true;\n                        $scope.bookingSuccessResponse = 'processing';\n                        if (Raven) {\n                            Raven.captureMessage('Submit Booking', {\n                                level: 'info', // one of 'info', 'warning', or 'error'\n                                extra: {\n                                    bookingData: bookingData\n                                },\n                                tags: {\n                                    step: 'pay-non-cc'\n                                }\n                            });\n                        }\n                        $http({\n                                method: 'POST',\n                                url: config.FEATHERS_URL + '/bookings',\n                                data: bookingData,\n                                headers: headers\n                            })\n                            .then(function successCallback(response) {\n                                $log.debug('submitNonCreditCardBooking success', response);\n                                $scope.bookingSuccessResponse = response;\n                                vm.waitingForResponse = false;\n                                $rootScope.$emit('paymentResponse');\n                                validatePayment(response);\n                            }, function errorCallback(response) {\n                                var errorElement = document.getElementById('card-errors');\n                                errorElement.textContent = response.data.errors[0];\n                                vm.paymentWasSent = false;\n                                $rootScope.$emit('paymentResponse');\n                                vm.waitingForResponse = false;\n                            });\n                    }\n\n                    function validatePayment(response) {\n                        if (response.status === 200) {\n                            $scope.paymentResponse = 'success'; //processing, failed\n                            $scope.paymentSuccessful = true;\n                            if (Raven) {\n                                Raven.captureMessage('Booking Suceeded', {\n                                    level: 'info', // one of 'info', 'warning', or 'error'\n                                    extra: {\n                                        response: response\n                                    },\n                                    tags: {\n                                        step: 'pay-non-cc'\n                                    }\n                                });\n                            }\n                            $scope.safeApply();\n                        }\n                        $scope.bookingSuccessResponse = response;\n\n                        $scope.$emit('paymentResponse', response);\n                        console.log('paymentResponse', response);\n                    }\n\n                    $scope.makeBooking = function (data) {\n                        vm.paymentExpanded = true;\n                        vm.loadingIframe = true;\n                        var bookingData = vm.getBookingData();\n                        if (Raven) {\n                            Raven.captureMessage('Submit Booking', {\n                                level: 'info', // one of 'info', 'warning', or 'error'\n                                extra: {\n                                    bookingData: bookingData\n                                },\n                                tags: {\n                                    step: 'pay-cc'\n                                }\n                            });\n                        }\n                        $log.debug('$scope.makeBooking', data);\n                        $scope.bookingResponse = $http({\n                                method: 'POST',\n                                url: config.FEATHERS_URL + '/bookings',\n                                data: bookingData,\n                                headers: headers\n                                // headers: {     \"Content-Type\": \"application/json;charset=utf-8\" }\n                            }).then(function successCallback(response) {\n                            $log.debug('makeBooking success', response);\n                            vm.loadingIframe = false;\n                            $scope.paymentSuccessful = false;\n                            $scope.bookingSuccessResponse = response;\n                            vm.paymentFormIsLoading = false;\n                            var iframe = document.getElementById(\"paymentIframe\");\n                            iframe.style.display = 'block';\n                            var iframeDoc = iframe.contentWindow.document;\n                            iframeDoc.open();\n                            iframeDoc.write(response.data.iframeHtml);\n                            iframeDoc.close();\n                            $scope.bookingSucceeded = true;\n                            if (Raven) {\n                                Raven.captureMessage('Booking Succeeded', {\n                                    level: 'info', // one of 'info', 'warning', or 'error'\n                                    extra: {\n                                        response: response.data\n                                    },\n                                    tags: {\n                                        step: 'pay-cc'\n                                    }\n                                });\n                            }\n                        }, function errorCallback(response) {\n                            $mdDialog.hide();\n                            vm.loadingIframe = false;\n                            vm.paymentFormIsLoading = false;\n                            vm.paymentExpanded = false;\n                            $scope.bookingSucceeded = false;\n                            if (Raven) {\n                                Raven.captureMessage('Booking Error', {\n                                    level: 'error', // one of 'info', 'warning', or 'error'\n                                    extra: {\n                                        response: response.data\n                                    },\n                                    tags: {\n                                        step: 'pay-cc'\n                                    }\n                                });\n                            }\n                            $mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position('left bottom').hideDelay(3000));\n                            $log.debug('makeBooking error!', response);\n                        });\n                    }\n\n                    var lpad = function (numberStr, padString, length) {\n                        while (numberStr.length < length) {\n                            numberStr = padString + numberStr;\n                        }\n                        return numberStr;\n                    };\n\n                    var paymentMessageHandler;\n                    paymentMessageHandler = function (event) {\n                        // if (event.origin == \"https://calendar.ablist.win\") { // TODO add to config\n                        // $log.debug(\"TRUSTED ORIGIN\", event.origin);\n                        $log.debug(\"DATA\", event.data);\n                        if (event.data == \"payment_complete\" || event.data.type == \"payment_success\") {\n                            $log.debug(\"PAYMENT COMPLETE\");\n                            $scope.paymentResponse = 'success'; //processing, failed\n                            //   $rootScope.showToast('Payment processed successfully.');\n                            $rootScope.$broadcast('paymentWithResponse', {response: event.data});\n\n                            window.removeEventListener(\"message\", paymentMessageHandler);\n                            $scope.paymentSuccessful = true;\n                            //   $scope.changeState('bookings'); //Go to bookings view if successful\n                            $scope.safeApply();\n                            //$mdDialog.hide();\n                        } else {\n                            if (Raven) {\n                                Raven.captureMessage('Booking Payment Error', {\n                                    level: 'error', // one of 'info', 'warning', or 'error'\n                                    extra: {\n                                        paymentMessageHandler: event.data\n                                    },\n                                    tags: {\n                                        step: 'pay-non-cc'\n                                    }\n                                });\n                            } // $rootScope.showToast(event.data.message, 'errorToast');\n                            // $rootScope.$broadcast('paymentWithResponse', { response: event.data });\n                            $scope.paymentSuccessful = false;\n                            $scope.paymentResponse = ''; //processing, failed\n                            vm.showPaymentForm = true;\n                            $scope.safeApply();\n                        }\n                    };\n\n                    $log.debug(\"Adding Payment Message Event Listener\");\n                    window.addEventListener(\"message\", paymentMessageHandler);\n\n                    $scope.safeApply = function (fn) {\n                        var phase = this.$root.$$phase;\n                        if (phase == '$apply' || phase == '$digest') {\n                            if (fn && (typeof(fn) === 'function')) {\n                                fn();\n                            }\n                        } else {\n                            this.$apply(fn);\n                        }\n                    };\n\n                    var lpad = function (numberStr, padString, length) {\n                        while (numberStr.length < length) {\n                            numberStr = padString + numberStr;\n                        }\n                        return numberStr;\n                    };\n\n                    // Merge identical items from an array into nested objects, summing their amount\n                    // properties and keeping track of quantities\n                    function mergeIdenticalArrayItemsIntoObject(data, oldObject) {\n                        var seen = oldObject;\n                        //$log.debug('mergeIdenticalArrayItemsIntoObject:data', data);\n                        angular.forEach(data, function (e, i) {\n                            // Have we seen this item before?\n                            // $log.debug('mergeIdenticalArrayItemsIntoObject', seen, e,\n                            // seen.hasOwnProperty(e.name));\n                            if (seen.hasOwnProperty(e.name) && seen[e.name] === e.name) {\n                                seen[e['name']]['price'] = e['price']; //Sum their prices\n                                seen[e['name']]['quantity'] += 1; //Increment their quantity\n                                seen[e['name']]['amount'] = seen[e['name']]['amount'] * seen[e['name']]['quantity']; //Sum their prices\n                                //$log.debug('merged', seen[e['name']]);\n                            } else {\n                                seen[e['name']] = {};\n                                seen[e['name']]['name'] = e['name'];\n                                seen[e['name']]['price'] = e['price'];\n                                seen[e['name']]['quantity'] = 1;\n                                seen[e['name']]['amount'] = e['amount'];\n                            }\n                        });\n                        //$log.debug('mergeIdenticalArrayItems', seen);\n                        return seen;\n                    }\n                }\n            };\n        }\n    ]);\n\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity-book.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./activity-book.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./activity-book.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./activity-book.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-book.css\n// module id = 121\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"#paymentIframe {\\n    margin: 0;\\n    padding: 8px 8px;\\n    border: none;\\n    min-height: 330px;\\n    height: 100%;\\n    overflow-y: hidden;\\n    width: 100%;\\n    display: none;\\n}\\n\\nabl-activity-book md-card {\\n    box-shadow: none !important;\\n    border: none !important;\\n    background: transparent;\\n}\\n\\n.inputBottomMargin {\\n    margin-bottom: 42px !important;\\n}\\n\\n.transparent {\\n    background-color: transparent !important;\\n}\\n\\nlist-item {\\n    display: block !important;\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/activity/activity-book.css\n// module id = 122\n// module chunks = 0","module.exports = \"<md-card class=\\\"paymentSummaryCard\\\" ng-show=\\\"paymentResponse != 'success'\\\">\\n  <md-list flex>\\n\\n    <md-list-item class=\\\"lineItemHeader \\\" ng-if=\\\"vm.base \\\" ng-click=\\\"null\\\">\\n      <div class=\\\"md-list-item-text  \\\" layout=\\\"row \\\" flex>\\n        <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\">\\n          <p class=\\\" \\\">Base Price </p>\\n        </div>\\n        <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\">\\n          <p class=\\\" \\\">{{vm.base() / 100}} CFP</p>\\n        </div>\\n      </div>\\n    </md-list-item>\\n\\n    <!--Coupons-->\\n\\n    <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-disabled=\\\"detailsForm.$invalid\\\" ng-show=\\\"vm.couponStatus == 'valid'\\\">\\n      <div layout=\\\"row\\\" class=\\\"md-list-item-text \\\" flex>\\n        <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n          <!-- <ng-md-icon class=\\\"headerIcon\\\" icon=\\\"local_offer\\\" class=\\\"listIcon\\\" ng-if=\\\"vm.couponStatus !='valid'\\\"></ng-md-icon> -->\\n          <div layout=\\\"column\\\" layout-align=\\\"center start\\\">\\n            <ng-md-icon icon=\\\"clear\\\" class=\\\"listIcon remove-coupon\\\" ng-click=\\\"vm.removeCoupon();\\\" ng-if=\\\"vm.couponStatus =='valid'\\\"></ng-md-icon>\\n          </div>\\n          <span class=\\\"couponText total\\\" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCoupon.percentage ? vm.appliedCoupon.amount : (vm.appliedCoupon.amount / 100)| currency}}{{vm.appliedCoupon.percentage ? '%' : ''}} Off</span>\\n\\n        </div>\\n        <div layout=\\\"row \\\" layout-align=\\\"end center \\\">\\n          <span class=\\\"couponTextTotal\\\" ng-if=\\\"vm.pricing.couponDeduction[0]\\\">-{{(-1 * vm.pricing.couponDeduction[0].price / 100) | currency}}</span>\\n          <md-progress-circular md-mode=\\\"indeterminate\\\" ng-show=\\\"vm.checkingCoupon && vm.couponQuery.length > 0\\\" class=\\\"listItemCircularProgress easeIn\\\"\\n            md-diameter=\\\"24px\\\">\\n          </md-progress-circular>\\n        </div>\\n      </div>\\n    </md-list-item>\\n    <list-item size=\\\"lg\\\" class=\\\"listItemAutocomplete\\\" ng-show=\\\"vm.couponStatus == 'untouched' || vm.couponStatus =='invalid'\\\">\\n      <md-autocomplete md-selected-item=\\\"autocomplete.selectedItem\\\" md-search-text-change=\\\"autocomplete.searchTextChange(autocomplete.searchText)\\\"\\n        md-search-text=\\\"autocomplete.searchText\\\" md-no-cache=\\\"true\\\" md-selected-item-change=\\\"autocomplete.selectedItemChange(item)\\\"\\n        md-items=\\\"item in autocomplete.querySearch(autocomplete.searchText)\\\" md-item-text=\\\"item.couponId\\\" md-min-length=\\\"0\\\"\\n        placeholder=\\\"{{dashboard ? 'Search coupons..' : 'Enter a coupon..'}}\\\" class=\\\"listItem\\\" ng-if=\\\"dashboard\\\">\\n        <md-item-template>\\n          <span md-highlight-text=\\\"ctrl.searchText\\\" md-highlight-flags=\\\"^i\\\">{{item.couponId}}</span>\\n          <span>{{item.percentage ? item.amount : (item.amount / 100) | currency}}{{item.percentage ? \\\"%\\\" : \\\"\\\"}}</span>\\n        </md-item-template>\\n        <md-not-found>\\n          No coupons found{{autocomplete.searchText.length > 0 ? (' matching \\\"' + autocomplete.searchText + '\\\".') : '.'}}\\n        </md-not-found>\\n      </md-autocomplete>\\n      <span class=\\\"paymentSubTitle total\\\">\\n        <input id=\\\"#coupon\\\" ng-model=\\\"vm.couponQuery\\\" type=\\\"text\\\" class=\\\"couponInput\\\" ng-if=\\\"(vm.couponStatus =='untouched' || vm.couponStatus =='invalid') && !dashboard\\\" ng-change=\\\"vm.checkingCoupon = true\\\" placeholder=\\\"Enter coupon..\\\" to-uppercase/>\\n        </span>\\n    </list-item>\\n    <md-list-item ng-show=\\\"vm.couponStatus =='invalid' && vm.couponQuery.length > 0 && !vm.checkingCoupon\\\" class=\\\"paymentHeader md-2-line md-primary easeIn\\\"\\n      ng-if=\\\"!dashboard\\\">\\n      <div layout=\\\"row\\\" class=\\\"md-list-item-text \\\" flex>\\n        <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n          <ng-md-icon class=\\\"headerIcon\\\" icon=\\\"error_outline\\\" class=\\\"listIcon\\\" ng-if=\\\"vm.couponStatus !='valid'\\\" style=\\\"fill: rgba(255,87,87,0.8)\\\"></ng-md-icon>\\n          <span class=\\\"paymentSubTitle total\\\">\\n            Invalid Coupon\\n          </span>\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" flex>\\n          <ng-md-icon icon=\\\"clear\\\" class=\\\"listIcon\\\" ng-click=\\\"vm.couponQuery = '';\\\"></ng-md-icon>\\n        </div>\\n      </div>\\n    </md-list-item>\\n\\n    <div ng-if=\\\"vm.attendeeSubtotals.length > 0\\\">\\n      <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex>\\n        <div layout=\\\"row\\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"total\\\">Attendees </span>\\n        </div>\\n        <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"activityTotal\\\">{{vm.attendeeTotal / 100 | currency}}</span>\\n        </div>\\n      </div>\\n\\n      <div ng-repeat=\\\"(key, value) in vm.attendeeSubtotals\\\" layout=\\\"row\\\" flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\">\\n        <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex=\\\"50\\\">\\n          {{value.quantity}} x {{value.name}} @ {{value.price/100 | currency}} each\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" flex=\\\"50\\\">\\n          {{value.amount / 100 | currency}}\\n        </div>\\n      </div>\\n    </div>\\n    <div ng-if=\\\"vm.addonSubtotals.length > 0\\\">\\n      <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex>\\n        <div layout=\\\"row\\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"total\\\">Add-ons </span>\\n        </div>\\n        <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"activityTotal\\\">{{vm.addonTotal / 100 | currency}}</span>\\n        </div>\\n      </div>\\n\\n      <div ng-repeat=\\\"addon in vm.addonSubtotals\\\" layout=\\\"row\\\" flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\">\\n        <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex=\\\"50\\\">\\n          {{addon.quantity}} x {{addon.name}} @ {{addon.price/100 | currency}} each\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" flex=\\\"50\\\">\\n          {{addon.amount / 100 | currency}}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div ng-if=\\\"vm.taxTotal > 0\\\">\\n      <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex>\\n        <div layout=\\\"row\\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"total\\\">Taxes and Fees </span>\\n        </div>\\n        <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"activityTotal\\\">{{vm.taxTotal / 100 | currency}}</span>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div>\\n      <div class=\\\"md-list-item-text subtotalLineItem bottomTotal\\\" layout=\\\"row \\\" layout-align=\\\"space-between center \\\" flex>\\n        <div layout=\\\"row \\\" layout-align=\\\"start center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"\\\">Total </span>\\n        </div>\\n        <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\">\\n          <span class=\\\"\\\">{{(vm.pricing.total || 0) / 100  | currency}}</span>\\n        </div>\\n      </div>\\n    </div>\\n  </md-list>\\n</md-card>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-total.html\n// module id = 123\n// module chunks = 0","module.exports = \"<div ng-if=\\\"paymentResponse != 'success' || !vm.showPaymentForm\\\">\\n  <div class=\\\"activityPaymentSummaryCard\\\" layout=\\\"column\\\" after-render>\\n    <!-- Guest Details -->\\n    <list-item size=\\\"lg\\\" class=\\\"listItemHeader\\\" ng-click=\\\"vm.toggleGuestDetails()\\\" ng-disabled=\\\"!vm.guestDetailsAreValid\\\" layout=\\\"column\\\">\\n      <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n        <ng-md-icon icon=\\\"filter_1\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\"></ng-md-icon>\\n        <span class=\\\"paymentSubTitle\\\" flex>Guest Details</span>\\n      </div>\\n      <div layout=\\\"row\\\" layout-align=\\\"end center\\\">\\n        <div layout=\\\"column\\\" layout-align=\\\"center end\\\">\\n          <ng-md-icon icon=\\\"{{vm.guestDetailsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=\\\"listIcon\\\"></ng-md-icon>\\n        </div>\\n      </div>\\n    </list-item>\\n\\n    <div ng-show=\\\"vm.guestDetailsExpanded\\\" layout=\\\"column\\\">\\n      <list-item ng-if=\\\"dashboard\\\">\\n        <md-checkbox ng-model=\\\"sendConfirmationEmail\\\" class=\\\"listItemCheckbox\\\">Send confirmation e-mail to client</md-checkbox>\\n      </list-item>\\n      <form name=\\\"guestDetailsForm\\\" novalidate>\\n        <div>\\n          <md-input-container class=\\\"md-block listItemInputContainer inputBottomMargin\\\" ng-if=\\\"!dashboard\\\">\\n            <label>Full Name</label>\\n            <input name=\\\"fullName\\\" ng-model=\\\"vm.formData.fullName\\\" required type=\\\"text\\\" md-maxlength=\\\"100\\\" ng-minlength=\\\"3\\\" />\\n            <div ng-messages=\\\"guestDetailsForm.fullName.$error\\\">\\n              <div ng-message=\\\"required\\\">This is required.</div>\\n              <div ng-message=\\\"minlength\\\">The name must be at least 3 characters long.</div>\\n              <div ng-message=\\\"md-maxlength\\\">The name must be less than 100 characters long.</div>\\n            </div>\\n          </md-input-container>\\n\\n\\n          <md-autocomplete ng-if=\\\"dashboard\\\" required md-input-name=\\\"autocompleteField\\\" md-input-minlength=\\\"3\\\" md-input-maxlength=\\\"100\\\"\\n            md-no-cache=\\\"true\\\" md-delay=\\\"250\\\" md-selected-item=\\\"vm.clientSearchSelectedItem\\\" md-search-text=\\\"vm.formData.fullName\\\"\\n            md-items=\\\"item in vm.clients\\\" md-item-text=\\\"item.primaryContact.fullName\\\" md-floating-label=\\\"Full Name\\\" md-selected-item-change=\\\"vm.selectedClientChange(item)\\\"\\n            class=\\\"md-block listItemInputContainer\\\" md-menu-class=\\\"autocomplete-custom-template\\\" md-min-length=\\\"2\\\">\\n            <md-item-template>\\n              <span class=\\\"item-title\\\">\\n                  <ng-md-icon icon=\\\"person\\\" class=\\\"listItemHeaderIcon sm\\\"></ng-md-icon>\\n                  <span> {{item.primaryContact.fullName}} </span>\\n              </span>\\n              <span class=\\\"item-metadata\\\">\\n                  <span>\\n                      <ng-md-icon icon=\\\"email\\\" class=\\\"listItemHeaderIcon sm\\\" md-colors=\\\"{fill: 'blue-grey-A200'}\\\"></ng-md-icon>\\n                      \\n                    {{item.primaryContact.email}}\\n                  </span>\\n              <!-- <span>\\n                  <ng-md-icon icon=\\\"phone\\\" class=\\\"listItemHeaderIcon sm\\\" md-colors=\\\"{fill: 'blue-grey-A200'}\\\"></ng-md-icon>\\n                  \\n                    {{item.primaryContact.phoneNumber}}\\n                  </span> -->\\n              </span>\\n            </md-item-template>\\n            <div ng-messages=\\\"guestDetailsForm.autocompleteField.$error\\\" ng-if=\\\"guestDetailsForm.autocompleteField.$touched\\\">\\n              <div ng-message=\\\"required\\\">You <b>must</b> enter a client name.</div>\\n              <div ng-message=\\\"minlength\\\">The name must be at least 3 characters long.</div>\\n              <div ng-message=\\\"md-maxlength\\\">The name must be less than 100 characters long.</div>\\n            </div>\\n          </md-autocomplete>\\n\\n\\n          <md-input-container class=\\\"md-block listItemInputContainer listItemAutoCompleteAfterContainer\\\" ng-if=\\\"!dashboard\\\">\\n            <label>E-mail</label>\\n            <input name=\\\"mail\\\" ng-model=\\\"vm.formData.mail\\\" required type=\\\"email\\\" md-maxlength=\\\"100\\\" ng-minlength=\\\"3\\\" />\\n            <div ng-messages=\\\"guestDetailsForm.mail.$error\\\">\\n              <div ng-message=\\\"required\\\">This is required.</div>\\n              <div ng-message=\\\"email\\\">Please enter a valid e-mail address.</div>\\n              <div ng-message=\\\"minlength\\\">The e-mail must be at least 3 characters long.</div>\\n              <div ng-message=\\\"md-maxlength\\\">The e-mail must be less than 100 characters long.</div>\\n            </div>\\n          </md-input-container>\\n          <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=\\\"!dashboard\\\">\\n            <label>Phone</label>\\n            <input name=\\\"phone\\\" ng-model=\\\"vm.formData.phoneNumber\\\" required type=\\\"text\\\" />\\n            <div ng-messages=\\\"guestDetailsForm.phone.$error\\\">\\n              <div ng-message=\\\"required\\\">This is required.</div>\\n            </div>\\n          </md-input-container>\\n\\n          <md-input-container class=\\\"md-block listItemInputContainer listItemAutoCompleteAfterContainer\\\" ng-if=\\\"dashboard\\\">\\n            <label>E-mail</label>\\n            <input name=\\\"mail\\\" ng-model=\\\"vm.formData.mail\\\" type=\\\"email\\\" md-maxlength=\\\"100\\\" ng-minlength=\\\"3\\\" />\\n            <div ng-messages=\\\"guestDetailsForm.mail.$error\\\">\\n              <div ng-message=\\\"email\\\">Please enter a valid e-mail address.</div>\\n              <div ng-message=\\\"minlength\\\">The e-mail must be at least 3 characters long.</div>\\n              <div ng-message=\\\"md-maxlength\\\">The e-mail must be less than 100 characters long.</div>\\n            </div>\\n          </md-input-container>\\n          <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=\\\"dashboard\\\">\\n            <label>Phone</label>\\n            <input name=\\\"phone\\\" ng-model=\\\"vm.formData.phoneNumber\\\" type=\\\"text\\\" />\\n            <div ng-messages=\\\"guestDetailsForm.phone.$error\\\">\\n            </div>\\n          </md-input-container>\\n\\n          <md-input-container class=\\\"md-block listItemInputContainer\\\">\\n            <label>Notes</label>\\n            <textarea ng-model=\\\"vm.formData.notes\\\" md-maxlength=\\\"300\\\" rows=\\\"1\\\"></textarea>\\n          </md-input-container>\\n\\n          <div layout=\\\"row\\\" layout-align=\\\"end center\\\" layout-margin>\\n            <md-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"!vm.areGuestDetailsValid(guestDetailsForm)\\\" ng-click=\\\"vm.goToNextStep('guestDetailsStep')\\\">Next</md-button>\\n          </div>\\n        </div>\\n      </form>\\n    </div>\\n    <md-divider class=\\\"no-margin\\\"></md-divider>\\n\\n    <!-- Attendees -->\\n    <list-item size=\\\"lg\\\" class=\\\"listItemHeader\\\" ng-click=\\\"vm.toggleAttendees()\\\" ng-disabled=\\\"!vm.guestDetailsAreValid\\\" layout=\\\"column\\\">\\n      <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n        <ng-md-icon icon=\\\"filter_2\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\"></ng-md-icon>\\n        <span class=\\\"paymentSubTitle\\\" ng-if=\\\"vm.countAttendees() >= 0\\\" flex>Attendees <span ng-show=\\\"vm.countAttendees() < 4\\\"> {{vm.countAttendees()}} spot{{vm.countAttendees() != 1 ? 's' : ''}} remaining</span></span>\\n        <span class=\\\"paymentSubTitle\\\" ng-if=\\\"vm.countAttendees() < 0 \\\" flex>Attendees <span class=\\\"red\\\"> <strong> {{vm.countAttendees() * -1}}</strong> spot{{((vm.countAttendees() * -1) > 1 || (vm.countAttendees() * -1) == 0) ? 's' : ''}} over maximum occupancy</span></span>\\n      </div>\\n      <div layout=\\\"row\\\" layout-align=\\\"end center\\\">\\n        <div layout=\\\"column\\\" layout-align=\\\"center end\\\">\\n          <ng-md-icon icon=\\\"{{vm.attendeesExpanded ? 'expand_less' : 'expand_more'}}\\\" class=\\\"listIcon\\\"></ng-md-icon>\\n        </div>\\n      </div>\\n    </list-item>\\n\\n    <div ng-show=\\\"vm.attendeesExpanded\\\" ng-class=\\\"vm.areAttendeesValid()\\\" layout=\\\"column\\\">\\n      <div ng-repeat=\\\"attendee in vm.attendees\\\">\\n        <list-item class=\\\"md-2-line addOnListItem\\\">\\n          <div layout=\\\"row\\\" class=\\\"list-item-text\\\" flex>\\n            <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n              <div layout=\\\"column\\\" class=\\\"\\\">\\n                <span class=\\\"lineItemSubHeader\\\">{{attendee.name}}</span>\\n\\n                <div layout=\\\"row\\\">\\n                  <span class=\\\"lineItemSubDetail\\\">{{attendee.amount/ 100  | currency}}</span>\\n                </div>\\n\\n              </div>\\n            </div>\\n\\n            <div layout=\\\"row\\\" layout-align=\\\"end center\\\">\\n              <div layout=\\\"column\\\" class=\\\"addOnAdjusters\\\" layout-align=\\\"center end\\\" flex layout-grow>\\n                <ng-md-icon icon=\\\"add_circle_outline\\\" class=\\\"listIconSub\\\" ng-click=\\\"vm.adjustAttendee($index,'up');\\\"> </ng-md-icon>\\n                <ng-md-icon icon=\\\" remove_circle_outline\\\" class=\\\"listIconSub\\\" ng-click=\\\"vm.adjustAttendee($index,'down');\\\"></ng-md-icon>\\n              </div>\\n\\n              <div layout=\\\"column\\\" layout-align=\\\"end end\\\">\\n                <input class='addOnQuantityText' ng-model=\\\"attendee.quantity\\\" ng-change=\\\"vm.checkAdjustAttendee($index);\\\" type=\\\"number\\\" min=\\\"0\\\"\\n                  md-select-on-focus></input>\\n              </div>\\n            </div>\\n          </div>\\n        </list-item>\\n      </div>\\n      <div layout=\\\"row\\\" layout-align=\\\"end center\\\" layout-margin>\\n        <md-button ng-if=\\\"vm.isNextStepPayment('attendees')\\\" class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"!vm.areAttendeesValid()\\\"\\n          ng-click=\\\"vm.goToNextStep('attendeesStep')\\\">Next</md-button>\\n      </div>\\n    </div>\\n\\n\\n    <md-divider class=\\\"no-margin\\\"></md-divider>\\n\\n    <!-- Add ons -->\\n    <div ng-if=\\\"vm.addons.length > 0\\\">\\n      <list-item class=\\\"paymentHeader md-2-line\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=\\\"vm.toggleAddons()\\\"\\n        layout=\\\"column\\\" flex>\\n        <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n          <ng-md-icon icon=\\\"filter_3\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\"></ng-md-icon>\\n          <span class=\\\"paymentSubTitle\\\">Add-ons</span>\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\">\\n          <div layout=\\\"column\\\" layout-align=\\\"center end\\\">\\n            <ng-md-icon ng-show=\\\"vm.addOnsSelected == 1\\\" icon=\\\"check\\\" class=\\\"listIcon\\\"></ng-md-icon>\\n            <ng-md-icon icon=\\\"{{vm.addonsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=\\\"listIcon\\\"></ng-md-icon>\\n          </div>\\n        </div>\\n      </list-item>\\n      <md-divider class=\\\"no-margin\\\"></md-divider>\\n      <div ng-show=\\\"vm.addonsExpanded\\\" ng-class=\\\"vm.areAddonsValid()\\\">\\n        <div ng-repeat=\\\"addon in vm.addons\\\">\\n          <list-item class=\\\"md-2-line addOnListItem\\\">\\n            <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n              <div layout=\\\"column\\\" class=\\\"\\\">\\n                <span class=\\\"lineItemSubHeader\\\">{{addon.name}}</span>\\n                <div layout=\\\"row\\\" class=\\\"\\\">\\n                  <span class=\\\"lineItemSubDetail\\\">{{addon.amount/ 100  | currency}}</span>\\n                </div>\\n              </div>\\n            </div>\\n            <div layout=\\\"row\\\" layout-align=\\\"end center\\\" flex>\\n              <div layout=\\\"column\\\" class=\\\"addOnAdjusters\\\" layout-align=\\\"center end\\\">\\n                <ng-md-icon icon=\\\"add_circle_outline\\\" class=\\\"listIconSub\\\" ng-click=\\\"vm.adjustAddon($index,'up');\\\"> </ng-md-icon>\\n                <ng-md-icon icon=\\\" remove_circle_outline\\\" class=\\\"listIconSub\\\" ng-click=\\\"vm.adjustAddon($index,'down');\\\"></ng-md-icon>\\n              </div>\\n              <div layout=\\\"column\\\" layout-align=\\\"end end\\\">\\n                <input class='addOnQuantityText' ng-model=\\\"addon.quantity\\\" ng-change=\\\"vm.addonsChanged();\\\" md-select-on-focus type=\\\"number\\\"></input>\\n              </div>\\n            </div>\\n          </list-item>\\n        </div>\\n\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" layout-margin>\\n          <md-button ng-if=\\\"vm.isNextStepPayment('addons')\\\" class=\\\"md-raised md-primary md-hue-2\\\" ng-click=\\\"vm.goToNextStep('addonsStep')\\\">Next</md-button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--Questions-->\\n    <div ng-if=\\\"vm.questions.length > 0\\\">\\n      <list-item class=\\\"paymentHeader md-2-line\\\" ng-disabled=\\\"guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1\\\" ng-click=\\\"vm.toggleQuestions()\\\">\\n        <div layout=\\\"row\\\" class=\\\"list-item-text\\\" flex>\\n          <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n            <div layout=\\\"column\\\" class=\\\"\\\">\\n              <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n                <ng-md-icon icon=\\\"filter_4\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0\\\"></ng-md-icon>\\n                <ng-md-icon icon=\\\"filter_3\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length == 0\\\"></ng-md-icon>\\n                <span class=\\\"paymentSubTitle\\\">Booking Questions <i class=\\\"fa fa-angle-right\\\" aria-hidden=\\\"true\\\"></i> {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div layout=\\\"row\\\" layout-align=\\\"end center\\\">\\n            <div layout=\\\"column\\\" layout-align=\\\"center end\\\" flex>\\n              <ng-md-icon icon=\\\"{{vm.questionsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=\\\"listIcon\\\"></ng-md-icon>\\n            </div>\\n          </div>\\n        </div>\\n      </list-item>\\n      <div ng-show=\\\"vm.questionsExpanded\\\" ng-class=\\\"!vm.areBookingQuestionsValid()\\\">\\n        <div class=\\\"questionForm slideDown\\\">\\n          <div ng-repeat=\\\"question in vm.questions\\\" class=\\\"listItemInputContainer\\\">\\n            <div layout=\\\"column\\\" layout-align=\\\"center stretch\\\" flex>\\n              <label class=\\\"small-label\\\">{{question.questionText}}</label>\\n              <div layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n                <ng-md-icon icon=\\\"{{vm.bookingQuestions[$index].length > 0 ? 'done' : 'priority_high'}}\\\" class=\\\"inputStatusIcon\\\"></ng-md-icon>\\n                <md-input-container class=\\\"md-block\\\" flex>\\n                  <textarea name=\\\"question\\\" ng-model=\\\"vm.bookingQuestions[$index]\\\" md-maxlength=\\\"300\\\" rows=\\\"1\\\"></textarea>\\n                </md-input-container>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" layout-margin>\\n          <md-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"!dashboard && !vm.areBookingQuestionsValid()\\\" ng-click=\\\"vm.goToNextStep('paymentStep')\\\">Next</md-button>\\n        </div>\\n      </div>\\n      <md-divider class=\\\"no-margin\\\"></md-divider>\\n    </div>\\n\\n    <!-- Payment Stripe -->\\n    <div>\\n      <list-item class=\\\"paymentHeader md-2-line\\\" ng-disabled=\\\"!vm.isPaymentValid()\\\">\\n        <div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex=\\\"80\\\">\\n          <ng-md-icon icon=\\\"filter_5\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0 && vm.questions.length > 0\\\"></ng-md-icon>\\n          <ng-md-icon icon=\\\"filter_4\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0 && vm.questions.length == 0 || vm.addons.length == 0 && vm.questions.length > 0\\\"></ng-md-icon>\\n          <ng-md-icon icon=\\\"filter_3\\\" class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length == 0 && vm.questions.length == 0\\\"></ng-md-icon>\\n          <span class=\\\"paymentSubTitle\\\">Payment Details</span>\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" flex=\\\"20\\\">\\n          <div layout=\\\"column\\\" layout-align=\\\"center end\\\" flex>\\n            <!--<ng-md-icon icon=\\\"{{vm.guestDetailsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=\\\"listIcon\\\"></ng-md-icon>\\n                <ng-md-icon ng-show=\\\"!guestDetailsHover && detailsForm.$valid\\\" icon=\\\"check\\\" class=\\\"listIcon\\\"></ng-md-icon>-->\\n          </div>\\n        </div>\\n      </list-item>\\n      <md-divider class=\\\"no-margin\\\"></md-divider>\\n      <!--<list-item class=\\\"activityCardForm\\\" ng-if=\\\"app == 'dashboard'\\\">\\n          Dashboard\\n        </list-item>-->\\n      <!-- <div ng-show=\\\"vm.stripePaymentExpanded\\\"> -->\\n      <div ng-show=\\\"vm.stripePaymentExpanded\\\">\\n        <div class=\\\"radioGroup listItemInputContainer\\\" ng-if=\\\"dashboard\\\">\\n          <md-radio-group ng-model=\\\"vm.paymentMethod\\\">\\n            <md-radio-button value=\\\"credit\\\" ng-if=\\\"vm.pricing.total > 0\\\"> Credit Card (Online)</md-radio-button>\\n            <md-radio-button value=\\\"cash\\\">Cash</md-radio-button>\\n            <md-radio-button value=\\\"debit\\\"> Office Point of Sale (POS) </md-radio-button>\\n            <md-radio-button value=\\\"gift\\\"> Gift Card </md-radio-button>\\n            <md-radio-button value=\\\"transfer\\\"> Bank Transfer </md-radio-button>\\n            <md-radio-button value=\\\"reserved\\\"> Reservation - Pay Later </md-radio-button>\\n          </md-radio-group>\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" layout-margin ng-if=\\\"vm.paymentMethod != 'credit'\\\">\\n          <progress-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1\\\" loading=\\\"bookingSuccessResponse == 'processing'\\\"\\n            ng-click=\\\"vm.submitNonCreditCardBooking()\\\" spinner=\\\"3\\\" label=\\\"{{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }}\\\"></progress-button>\\n        </div>\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" layout-margin ng-if=\\\"vm.paymentMethod == 'credit' && dashboard\\\">\\n          <progress-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1\\\" loading=\\\"bookingSuccessResponse == 'processing'\\\"\\n            ng-click=\\\"vm.goToPay()\\\" spinner=\\\"3\\\" label=\\\"{{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }}\\\"></progress-button>\\n        </div>\\n      </div>\\n      <form method=\\\"post\\\" id=\\\"payment-form\\\" name=\\\"creditCardDetailsForm\\\" ng-show=\\\"false\\\">\\n        <div class=\\\"form-row\\\" style=\\\"padding:0 30px 20px 20px\\\">\\n          <div id=\\\"card-errors\\\"></div>\\n          <div id=\\\"card-element\\\">\\n          </div>\\n        </div>\\n        <div ng-if=\\\"vm.waitingForResponse\\\" layout=\\\"row\\\" layout-align=\\\"space-around center\\\" style=\\\"padding:20px\\\">\\n          <md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular>\\n        </div>\\n\\n\\n        <div layout=\\\"row\\\" layout-align=\\\"end center\\\" layout-margin>\\n          <md-button type=\\\"submit\\\" class=\\\"md-raised md-primary md-hue-2\\\" ng-class=\\\"{'valid': vm.isPaymentValid() && vm.stripeCardIsValid && !vm.waitingForResponse}\\\"\\n            ng-disabled=\\\"!vm.isPaymentValid() || vm.paymentWasSent\\\" class=\\\"submitButton\\\"><i class=\\\"fa fa-credit-card\\\" aria-hidden=\\\"true\\\"></i> {{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }}</md-button>\\n        </div>\\n      </form>\\n\\n      <div layout=\\\"row\\\" ng-if=\\\"false\\\">\\n        <md-button flex class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"!vm.isPaymentValid() || vm.paymentWasSent\\\" ng-click=\\\"vm.goToPay()\\\"><i class=\\\"fa fa-credit-card\\\" aria-hidden=\\\"true\\\"></i> {{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }}</md-button>\\n      </div>\\n\\n      <div ng-if=\\\"!dashboard\\\">\\n        <md-card class=\\\"transparent no-margin\\\" ng-show=\\\"vm.showPaymentForm && paymentResponse.length < 1\\\">\\n          <div ng-if=\\\"vm.loadingIframe\\\" layout=\\\"row\\\" layout-align=\\\"space-around center\\\" style=\\\"padding:20px\\\">\\n            <md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular>\\n          </div>\\n          <iframe id=\\\"paymentIframe\\\"></iframe>\\n        </md-card>\\n      </div>\\n\\n    </div>\\n  </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-forms.html\n// module id = 124\n// module chunks = 0","module.exports = \"<!--<div layout=\\\"row\\\" class=\\\"activityPaymentSummaryCard\\\" ng-class=\\\"{'activityPaymentSummaryCardMobile' : !screenIsBig()}\\\" layout-align=\\\"center start\\\" flex=\\\"100\\\">-->\\n<div layout=\\\"{{screenIsBig() ? 'row' : 'column'}}\\\" layout-align=\\\"{{screenIsBig() ? 'start stretch' : 'center center'}}\\\" layout-fill class=\\\"columnFix\\\" ng-class=\\\"screenIsBig() ? 'activityBookDialogLarge' : 'activityBookDialogSmall'\\\" ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\">\\n  <div class=\\\"paymentSummaryCardLarge leftCard \\\" ng-class=\\\"screenIsBig() ? 'leftCardLarge' : 'leftCardSmall'\\\" layout-align=\\\"start stretch\\\">\\n    <div ng-include=\\\"'activity-forms.html'\\\"></div>\\n  </div>\\n  <div class=\\\"paymentSummaryCardLarge rightCard\\\" ng-class=\\\"screenIsBig() ? 'rightCardLarge' : 'rightCardSmall'\\\" layout=\\\"column\\\" layout-align=\\\"center stretch\\\">\\n    <div class=\\\"activity-total-include\\\" ng-include=\\\"'activity-total.html'\\\"></div>\\n  </div>\\n</div>\\n\\n<div ng-if=\\\"dashboard\\\">\\n  <md-card class=\\\"paymentSummaryCard no-margin\\\" ng-show=\\\"vm.showPaymentForm && paymentResponse.length < 1\\\">\\n    <div style=\\\"min-height:310px\\\" layout=\\\"row\\\" layout-sm=\\\"column\\\" layout-align=\\\"center center\\\" ng-if=\\\"vm.paymentFormIsLoading\\\">\\n      <md-progress-circular md-mode=\\\"indeterminate\\\" md-diameter=\\\"40\\\"></md-progress-circular>\\n    </div>\\n    <iframe id=\\\"paymentIframe\\\"></iframe>\\n  </md-card>\\n</div>\\n\\n<div class=\\\"paymentResponseContainer\\\">\\n  <div class=\\\"paymentSummaryCard no-margin\\\" ng-show=\\\"paymentResponse.length > 0\\\">\\n    <div ng-if=\\\"paymentResponse == 'success'\\\" class=\\\"easeIn\\\">\\n      <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\">\\n        <div layout=\\\"row\\\" class=\\\"md-list-item-text\\\" flex>\\n          <div flex layout=\\\"row\\\" layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\">\\n            <ng-md-icon class=\\\"listItemHeaderIcon\\\" icon=\\\"payment\\\" class=\\\"listIcon \\\"></ng-md-icon>\\n            <span class=\\\"paymentSubTitle total\\\">{{bookingSuccessResponse.data.booking.status == 'unpaid' ? 'Booking' : 'Payment'}} Complete</span>\\n          </div>\\n          <div layout=\\\"column\\\" flex=\\\"none\\\" style=\\\"width:24px\\\">\\n            <ng-md-icon flex=\\\"none\\\" style=\\\"width:24px;height:24px;margin: inherit;\\\" icon=\\\"check\\\" class=\\\"listIcon\\\" ng-style=\\\"{fill: 'green'}\\\"></ng-md-icon>\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"paymentBody\\\">\\n        <div class=\\\"confirmation\\\" ng-if=\\\"dashboard\\\">\\n          <h3>Congratulations!</h3>\\n          <p>Your {{bookingSuccessResponse.data.booking.status == 'unpaid' ? 'reservation' : 'booking'}} is confirmed.</p>\\n          <p>{{vm.formData.fullName}} is attending {{bookingSuccessResponse.data.booking.title}} on {{formatDate(bookingSuccessResponse.data.booking.startTime, 'LL')}}</p>\\n          <p>A confirmation email will be sent to {{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</p>\\n          <div class=\\\"booking-id\\\">The reference ID is: {{bookingSuccessResponse.data.booking.bookingId}}</div>\\n          <div layout=\\\"row\\\" layout-align=\\\"center center\\\">\\n            <span flex>\\n              <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"vm.returnToMainPage()\\\">Return</md-button>\\n            </span>\\n          </div>\\n        </div>\\n        <div class=\\\"confirmation\\\" ng-if=\\\"!dashboard\\\">\\n          <h3>Congratulations!</h3>\\n          <p>Your booking is confirmed.</p>\\n          <p>You will receive a confirmation email at: <strong>{{vm.formData['mail']}}</strong></p>\\n          <p class=\\\"margin-top\\\">For questions about your booking, please contact:</p>\\n          <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].companyName}} ({{bookingSuccessResponse.data.booking.organizations[0].primaryContact.phoneNumber}})</strong></p>\\n          <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</strong></p>\\n          <div class=\\\"booking-id\\\">Booking ID: {{bookingSuccessResponse.data.booking.bookingId}}</div>\\n          <div style=\\\"margin-top:25px\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\">\\n            <span flex>\\n              <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"vm.returnToMainPage()\\\">Return</md-button>\\n            </span>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div ng-if=\\\"paymentResponse == 'failed'\\\">\\n      <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\">\\n        <div layout=\\\"row\\\" class=\\\"md-list-item-text\\\" flex>\\n          <div flex layout=\\\"row\\\" layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\">\\n            <ng-md-icon class=\\\"listItemHeaderIcon\\\" icon=\\\"payment\\\" class=\\\"listIcon \\\"></ng-md-icon>\\n            <span class=\\\"paymentSubTitle total\\\">Payment Failed</span>\\n          </div>\\n          <div layout=\\\"column\\\" flex=\\\"none\\\" style=\\\"width:24px\\\">\\n            <ng-md-icon flex=\\\"none\\\" style=\\\"width:24px;height:24px;margin: inherit;\\\" icon=\\\"error\\\" class=\\\"listIcon\\\" ng-style=\\\"{fill: 'red'}\\\"></ng-md-icon>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"paymentBody\\\">\\n        <div class=\\\"confirmation\\\">\\n          <p>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p>\\n          <div style=\\\"margin-top:25px\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\">\\n            <span flex>\\n              <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"vm.payNow()\\\">Try Again</md-button>\\n            </span>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n\\n    <div ng-if=\\\"paymentResponse == 'processing'\\\">\\n      <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\">\\n        <div layout=\\\"row\\\" class=\\\"md-list-item-text\\\" flex>\\n          <div flex layout=\\\"row\\\" layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\">\\n            <ng-md-icon class=\\\"listItemHeaderIcon\\\" icon=\\\"payment\\\" class=\\\"listIcon \\\"></ng-md-icon>\\n            <span class=\\\"paymentSubTitle total\\\">Payment Processing</span>\\n          </div>\\n          <div layout=\\\"column\\\" flex=\\\"none\\\" style=\\\"width:24px\\\">\\n            <ng-md-icon flex=\\\"none\\\" style=\\\"width:24px;height:24px;margin: inherit;\\\" icon=\\\"watch_later\\\" class=\\\"listIcon\\\" ng-style=\\\"{fill: 'red'}\\\"></ng-md-icon>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"paymentBody\\\">\\n        <div class=\\\"confirmation\\\">\\n          <p>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p>\\n          <div style=\\\"margin-top:25px\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\">\\n            <span flex>\\n              <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"goToState('home')\\\">Return</md-button>\\n            </span>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-book.html\n// module id = 125\n// module chunks = 0","export default function activityBookValidator(vm, $http, $stateParams) {\n\n\n    vm.searchClients = function (query) {\n        return Rx.Observable\n            .fromPromise($http({\n                method: 'GET',\n                url: vm.config.apiVersion + \"/clients?fullName=\" + text,\n                headers: {\n                    'x-abl-access-key': $stateParams.merchant,\n                    'x-abl-date': Date.parse(new Date().toISOString())\n                }\n            }))\n            .select(function (response) {\n                console.log(response);\n                return response;\n            });\n\n    }\n\n    return vm;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity-book-validators.js","   /**\n    * @class abl-sdk-feathers.components\n    * @hidden\n    */\n\n   /**\n    * @function activity-AdjustmentControls\n    * @memberOf abl-sdk-feathers.components\n    * @description Parent component controller for shared activity adjustment functions.\n    * @example  <activity-adjustment-controls></activity-adjustment-controls>\n    */\n\n   function activityAdjustmentControls() {\n       var vm = this;\n\n       this.$onInit = function () {\n           console.log('activityAdjustmentControls', this);\n       };\n\n       this.$onChanges = (changesObj) => {};\n\n       this.$postLink = function () {};\n\n       vm.addCharge = function (label, price) {\n           console.log(label, price);\n       };\n   };\n\n\n   export default activityAdjustmentControls;\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity.adjustment.controls.component.js"],"sourceRoot":""}