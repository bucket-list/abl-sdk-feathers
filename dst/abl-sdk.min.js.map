{"version":3,"sources":["webpack:///abl-sdk.min.js","webpack:///./src/abl-sdk.js","webpack:///./~/superagent/lib/client.js","webpack:///./~/superagent/~/component-emitter/index.js","webpack:///./~/superagent/lib/request-base.js","webpack:///./~/superagent/lib/is-object.js","webpack:///./~/superagent/lib/response-base.js","webpack:///./~/superagent/lib/utils.js","webpack:///./~/superagent/lib/agent-base.js","webpack:///./src/utils.js","webpack:///./src/styles.css?f492","webpack:///./src/styles.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./~/style-loader/fixUrls.js","webpack:///./src/lib/helper-styles.css?200c","webpack:///./src/lib/helper-styles.css","webpack:///./src/angular-material-icons.css?f591","webpack:///./src/angular-material-icons.css","webpack:///./src/rest.js","webpack:///./src/lib/directives/toUppercase.directive.js","webpack:///./src/lib/directives/formatPhone.directive.js","webpack:///./src/lib/directives/focusParent.directive.js","webpack:///./src/lib/directives/size.directive.js","webpack:///./src/lib/services/navigator.service.js","webpack:///./src/lib/components/col.component.js","webpack:///./src/lib/components/column.html","webpack:///./src/lib/components/progressButton.component.js","webpack:///./src/lib/components/progressButton.html","webpack:///./src/lib/components/progressButton.css?4c0b","webpack:///./src/lib/components/progressButton.css","webpack:///./src/lib/components/listItem.component.js","webpack:///./src/lib/components/listItem.html","webpack:///./src/lib/components/listItemNumericControl.component.js","webpack:///./src/lib/components/listItemNumericControl.html","webpack:///./src/lib/components/listItemAddCharge.component.js","webpack:///./src/lib/components/listItemAddCharge.html","webpack:///./src/lib/components/listItem.css?7895","webpack:///./src/lib/components/listItem.css","webpack:///./src/lib/components/listItemHeader.component.js","webpack:///./src/lib/components/listItemHeader.html","webpack:///./src/activity/activity-book.js","webpack:///./src/activity/activity-book.css?9fca","webpack:///./src/activity/activity-book.css","webpack:///./src/activity/activity-total.html","webpack:///./src/activity/activity-forms.html","webpack:///./src/activity/activity-book.html","webpack:///./src/activity/dashboard.html","webpack:///./src/activity/no-dashboard.html","webpack:///./src/activity/activity-book-validators.js","webpack:///./src/activity/activity.adjustment.controls.component.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_rx","_rx2","_feathersClient","_feathersClient2","_feathersLocalstorage","_feathersLocalstorage2","_feathersReactive","_feathersReactive2","_superagent","_rx3","_utils","_utils2","_styles","_helperStyles","_angularMaterialIcons","_rest","_rest2","_toUppercase","_toUppercase2","_formatPhone","_formatPhone2","_focusParent","_focusParent2","_size","_navigator","_navigator2","_col","_col2","_progressButton","_progressButton2","_progressButton3","_listItem","_listItem2","_listItemNumericControl","_listItemNumericControl2","_listItemAddCharge","_listItemAddCharge2","_listItemHeader","_listItemHeader2","sdkProvider","window","jQuery","settings","endpoint","apiKey","socketOpts","useSocket","services","socketEnabled","setSocketOpts","opts","setEndpoint","newEndpoint","setApiKey","key","setServices","newServices","getSettings","$get","$injector","$timeout","$log","$mdToast","$http","$rootScope","get","that","this","app","debug","config","configure","RxJS","feathers","hooks","use","name","DASHBOARD","storage","localStorage","xsrfToken","document","cookie","indexOf","headers","Content-Type","X-ABL-Access-Key","X-ABL-Date","Date","parse","toISOString","socket","io","socketio","addHeadersHook","hook","x","split","map","s","reduce","r","a","trim","undefined","params","assign","withCredentials","afterRequestHook","rest","jquery","mixins","push","service","before","after","loading","loadingTimeout","afterRender","current","total","cancel","$abl","feathersSdk","ablSdk","angular","provider","filter","input","start","slice","navigatorService","directive","toUppercase","formatPhone","onFocus","component","col","progressButton","listItem","listItemNumericControl","listItemAddCharge","listItemHeader","noop","serialize","isObject","pairs","pushEncodedKeyValuePair","join","val","Array","isArray","forEach","v","subkey","encodeURIComponent","parseString","str","pair","pos","i","len","length","decodeURIComponent","parseHeader","index","line","field","lines","fields","toLowerCase","isJSON","mime","test","Response","req","xhr","text","method","responseType","responseText","statusText","status","_setStatusProperties","header","getAllResponseHeaders","getResponseHeader","_setHeaderProperties","_responseType","body","response","_parseBody","Request","url","self","_query","_header","on","err","res","e","Error","original","rawResponse","statusCode","callback","emit","new_err","_isResponseOK","custom_err","del","data","fn","request","send","end","root","Emitter","RequestBase","ResponseBase","Agent","arguments","getXHR","XMLHttpRequest","location","protocol","ActiveXObject","replace","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","JSON","stringify","prototype","type","_parser","toError","msg","set","accept","auth","user","pass","options","btoa","encoder","string","_auth","query","attach","file","_data","_getFormData","append","_formData","FormData","_shouldRetry","_retry","_callback","clearTimeout","_maxRetries","retries","_retries","crossDomainError","crossDomain","buffer","ca","agent","pipe","write","_isHost","toString","call","_endCalled","_finalizeQueryString","_end","_setTimeouts","onreadystatechange","readyState","_responseTimeoutTimer","timedout","_aborted","handleProgress","direction","percent","loaded","hasListeners","onprogress","bind","upload","username","password","open","_withCredentials","contentType","_serializer","hasOwnProperty","setRequestHeader","_setDefaults","head","patch","post","put","mixin","addEventListener","event","_callbacks","once","off","apply","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","args","listeners","_timer","timeout","_timeout","_responseTimeout","option","deadline","retry","count","_retryCallback","ERROR_CODES","override","code","then","resolve","reject","_fullfilledPromise","Promise","innerResolve","innerReject","ok","_okCallback","getHeader","unset","abort","base64Encoder","redirects","n","_maxRedirects","maxResponseSize","TypeError","_maxResponseSize","toJSON","isObj","sortQuery","sort","_sort","queryArr","substring","_appendQueryString","_timeoutError","reason","errno","setTimeout","utils","ct","links","link","parseLinks","statusType","info","redirect","clientError","serverError","error","created","accepted","noContent","badRequest","unauthorized","notAcceptable","forbidden","notFound","unprocessableEntity","shift","parts","rel","cleanHeader","changesOrigin","_defaults","def","setupUtilityFunctions","showToast","toastClass","delay","toast","simple","textContent","action","hideDelay","position","highlightAction","show","randomInt","min","max","Math","floor","random","b","c","safeApply","$root","phase","$$phase","$apply","content","id","locals","cssWithMappingToString","item","useSourceMap","cssMapping","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","concat","sourceMap","base64","unescape","list","modules","mediaQuery","alreadyImportedModules","addStylesToDom","styles","domStyle","stylesInDom","refs","j","addStyle","listToStyles","newStyles","css","media","part","insertStyleElement","styleElement","styleTarget","getElement","insertInto","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","removeStyleElement","parentNode","removeChild","idx","createStyleElement","createElement","attrs","attachTagAttrs","createLinkElement","linkElement","element","keys","setAttribute","update","remove","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","fixUrls","blob","oldSrc","memoize","memo","isOldIE","all","atob","selector","querySelector","newList","mayRemove","textStore","replacement","Boolean","baseUrl","host","currentDir","pathname","fixedCss","fullMatch","origUrl","unquotedOrigUrl","o","$1","newUrl","Rx","moment","api","activity","Observable","fromPromise","activityService","find","catch","empty","select","activitySearchService","timeslots","getRange","d","activitySearchInterval","t","setInterval","cache","create","updateCache","store","modified","activities","updated","acs","fromArray","result","_id","subscribe","require","scope","modelCtrl","capitalize","inputValue","capitalized","toUpperCase","$setViewValue","$render","$parsers","ngModel","restrict","elem","ctrl","add","phonenumber","origVal","phone","focusParent","$","parentElement","addClass","removeClass","size","children","$window","$q","getCurrentPosition","deferred","defer","navigator","geolocation","promise","$inject","_column","_column2","bindings","controller","$element","$scope","$onInit","$onChanges","changesObj","$postLink","template","colTemplate","transclude","controllerAs","class","ngDisabled","spinner","stroke","fill","label","onClick","_this","disabled","progressButtonTemplate","listItemTemplate","price","increment","decrement","checkAdjustValue","group","buttonClass","actionClick","expanded","title","icon","click","_activityTotal","_activityTotal2","_activityForms","_activityForms2","_activityBook","_activityBook2","_dashboard","_dashboard2","_noDashboard","_noDashboard2","_activityBookValidators","_activityBookValidators2","_activityAdjustmentControlsComponent","_activityAdjustmentControlsComponent2","run","$templateCache","activityFormsTemplate","activityBookingTemplate","activityTotalTemplate","dashboardTemplate","noDashboardTemplate","factory","loadingCount","$broadcast","when","responseError","$httpProvider","interceptors","activityAdjustmentController","$sce","$compile","$mdMedia","$mdDialog","rx","observeOnScope","$stateParams","$state","$filter","book","onResize","$digest","$attrs","buildQuery","vm","attendees","quantity","addons","currency","goToPay","guestDetailsExpanded","attendeesExpanded","addonsExpanded","questionsExpanded","showPaymentForm","paymentFormIsLoading","stripePaymentExpanded","paymentWasSent","formWasBlocked","bookingSuccessResponse","makeBooking","submitNonCreditCardBooking","pricing","bookingData","getBookingData","stripeToken","isMobile","Raven","captureMessage","level","extra","tags","step","FEATHERS_URL","waitingForResponse","$emit","validatePayment","errorElement","getElementById","errors","paymentResponse","paymentSuccessful","theme","stripeCardIsValid","paymentExpanded","answerAllQuestionsChecked","validStepsForPayment","guest","couponStatus","appliedCoupon","couponQuery","occupancyRemaining","agentCodeStatus","appliedAgentCode","agentCodeQuery","attendeeSubtotals","addonSubtotals","taxes","taxTotal","questions","isFinishButtonValid","sendConfirmationEmail","dashboard","MARKETPLACE","x-abl-access-key","ABL_ACCESS_KEY","x-abl-date","merchant","eventDate","activityImage","activityLocation","eventTime","$watch","$on","getPricingQuote","formatDate","date","format","goToNextStep","currentStepName","toggleGuestDetails","toggleAttendees","countAttendeesAdded","isPaymentValid","pricingQuoteStarted","guestDetailsFormValid","togglePayment","returnToMainPage","hide","reload","go","addonTotal","attendeeTotal","bookingSucceeded","screenIsBig","w","innerWidth","addBookingController","$parent","timeslot","charges","toggleQuestions","timerAdjustingAddons","adjustAddon","mode","pricingQuoteRequestState","toggleAddons","toggleStripePay","togglePay","payButtonEnabled","timerAdjustingAttendee","adjustAttendee","countAttendees","checkAdjustAttendee","$index","couponDeduction","items","agentCommission","amount","addonsFilter","addonsArray","addon","object","att","isDefined","aapFilter","attendeesArray","aap","aaps","tax","paymentMethod","getPossibleCoupons","possibleCoupons","clients","change","newValue","selectedClientChange","client","formData","fullName","primaryContact","mail","email","phoneNumber","autocomplete","searchTextChange","selectedItemChange","validateCoupon","checkingCoupon","queryDebounce","coupons","querySearch","checkCoupon","removeCoupon","selectedItem","pricingInformation","coupon","endTime","isAfter","maxRedemptions","redemptions","appliedCouponType","percentage","bookingQuestionsCompleted","completed","bookingQuestions","debounce","agentAutocomplete","validateAgent","checkingAgentCode","orgId","checkAgentCode","removeAgentCode","active","changes","operator","organizations","charge","startTime","preferences","agentsIsOn","features","agents","maxOcc","attendeesAdded","countAddonsAdded","addonsChanged","areGuestDetailsValid","guestDetailsAreValid","$valid","areAttendeesValid","areAddonsValid","areBookingQuestionsValid","answerAllQuestions","isValid","isNextStepPayment","nextButtonLabel","statusObj","copy","outputBookingData","iframe","iframeDoc","contentWindow","close","loadingIframe","bookingResponse","iframeHtml","style","display","booking","paymentMessageHandler","message","payment","cards","cardsKeys","amex","discover","mastercard","visa","activityBookValidator","searchClients","apiVersion","activityAdjustmentControls","addCharge"],"mappings":"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","file":"abl-sdk.min.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _rx = __webpack_require__(2);\n\n\tvar _rx2 = _interopRequireDefault(_rx);\n\n\tvar _feathersClient = __webpack_require__(5);\n\n\tvar _feathersClient2 = _interopRequireDefault(_feathersClient);\n\n\tvar _feathersLocalstorage = __webpack_require__(62);\n\n\tvar _feathersLocalstorage2 = _interopRequireDefault(_feathersLocalstorage);\n\n\tvar _feathersReactive = __webpack_require__(76);\n\n\tvar _feathersReactive2 = _interopRequireDefault(_feathersReactive);\n\n\tvar _superagent = __webpack_require__(84);\n\n\tvar _superagent2 = _interopRequireDefault(_superagent);\n\n\tvar _rx3 = __webpack_require__(91);\n\n\tvar _rx4 = _interopRequireDefault(_rx3);\n\n\tvar _utils = __webpack_require__(93);\n\n\tvar _utils2 = _interopRequireDefault(_utils);\n\n\tvar _styles = __webpack_require__(94);\n\n\tvar _styles2 = _interopRequireDefault(_styles);\n\n\tvar _helperStyles = __webpack_require__(99);\n\n\tvar _helperStyles2 = _interopRequireDefault(_helperStyles);\n\n\tvar _angularMaterialIcons = __webpack_require__(101);\n\n\tvar _angularMaterialIcons2 = _interopRequireDefault(_angularMaterialIcons);\n\n\tvar _rest = __webpack_require__(103);\n\n\tvar _rest2 = _interopRequireDefault(_rest);\n\n\tvar _toUppercase = __webpack_require__(104);\n\n\tvar _toUppercase2 = _interopRequireDefault(_toUppercase);\n\n\tvar _formatPhone = __webpack_require__(105);\n\n\tvar _formatPhone2 = _interopRequireDefault(_formatPhone);\n\n\tvar _focusParent = __webpack_require__(106);\n\n\tvar _focusParent2 = _interopRequireDefault(_focusParent);\n\n\tvar _size = __webpack_require__(107);\n\n\tvar _size2 = _interopRequireDefault(_size);\n\n\tvar _navigator = __webpack_require__(108);\n\n\tvar _navigator2 = _interopRequireDefault(_navigator);\n\n\tvar _col = __webpack_require__(109);\n\n\tvar _col2 = _interopRequireDefault(_col);\n\n\tvar _progressButton = __webpack_require__(111);\n\n\tvar _progressButton2 = _interopRequireDefault(_progressButton);\n\n\tvar _progressButton3 = __webpack_require__(113);\n\n\tvar _progressButton4 = _interopRequireDefault(_progressButton3);\n\n\tvar _listItem = __webpack_require__(115);\n\n\tvar _listItem2 = _interopRequireDefault(_listItem);\n\n\tvar _listItemNumericControl = __webpack_require__(117);\n\n\tvar _listItemNumericControl2 = _interopRequireDefault(_listItemNumericControl);\n\n\tvar _listItemAddCharge = __webpack_require__(119);\n\n\tvar _listItemAddCharge2 = _interopRequireDefault(_listItemAddCharge);\n\n\tvar _listItemHeader = __webpack_require__(123);\n\n\tvar _listItemHeader2 = _interopRequireDefault(_listItemHeader);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t//Including independent module source code for packaging\n\tvar ablBook = __webpack_require__(125);\n\n\n\tvar jQuery = window.jQuery;\n\n\t// import feathersAuthentication from './auth';\n\n\n\tvar sdkProvider = function sdkProvider(settings) {\n\t  var endpoint = null;\n\t  var apiKey = null;\n\t  var socketOpts = null;\n\t  var _useSocket = true;\n\t  var services = [];\n\n\t  //Configuration\n\t  return {\n\t    useSocket: function useSocket(socketEnabled) {\n\t      _useSocket = !!socketEnabled;\n\t    },\n\t    setSocketOpts: function setSocketOpts(opts) {\n\t      socketOpts = opts;\n\t    },\n\t    setEndpoint: function setEndpoint(newEndpoint) {\n\t      endpoint = newEndpoint;\n\t    },\n\t    setApiKey: function setApiKey(key) {\n\t      apiKey = key;\n\t    },\n\t    setServices: function setServices(newServices) {\n\t      services = newServices;\n\t    },\n\t    getSettings: function getSettings() {\n\t      return endpoint;\n\t    },\n\t    $get: ['$injector', '$timeout', '$log', '$mdToast', '$http', function ($injector, $timeout, $log, $mdToast, $http) {\n\t      var $rootScope = $injector.get('$rootScope');\n\t      var that = this;\n\n\t      if (!endpoint) {\n\t        this.app = {};\n\t        return this.app;\n\t      }\n\n\t      $log.debug('config', $rootScope.config);\n\n\t      this.app = (0, _feathersClient2.default)().configure((0, _feathersReactive2.default)(_rx2.default)) //feathers-reactive\n\t      .configure(_feathersClient2.default.hooks()).use('cache', (0, _feathersLocalstorage2.default)({\n\t        name: 'abl' + ($rootScope.config.DASHBOARD ? '-dash' : ''),\n\t        storage: window.localStorage\n\t      }));\n\n\t      this.app.endpoint = endpoint;\n\t      this.app.apiKey = apiKey;\n\n\t      var xsrfCookieIndex = document.cookie.indexOf('XSRF-TOKEN=');\n\n\t      var xsrfToken = '';\n\n\t      console.log(document.cookie);\n\n\t      this.app.headers = {\n\t        'Content-Type': 'application/json;charset=utf-8'\n\t      };\n\n\t      if (apiKey) {\n\t        this.app.headers = {\n\t          'X-ABL-Access-Key': apiKey,\n\t          'X-ABL-Date': Date.parse(new Date().toISOString()),\n\t          'Content-Type': 'application/json;charset=utf-8'\n\t        };\n\t      }\n\n\t      // if (xsrfCookieIndex > -1) {   var nextCharacter = xsrfCookieIndex + 12;   for\n\t      // (var i = xsrfCookieIndex + 11; i < document.cookie.length; i++) {     if\n\t      // (document.cookie.substring(i, i + 1) == ' ' || document.cookie.substring(i, i\n\t      // + 1) == ';')       i = document.cookie.length;     else       xsrfToken +=\n\t      // document         .cookie         .substring(i, i + 1);     }\n\t      // console.log('xsrf cookie', xsrfToken); }\n\n\t      if (_useSocket) {\n\t        $log.debug('endpoint', endpoint);\n\t        this.socket = io(endpoint, socketOpts);\n\t        this.app.configure(_feathersClient2.default.socketio(this.socket));\n\t      } else {\n\t        // .configure(feathers.rest(endpoint).superagent(superagent, {   headers:\n\t        // that.app.headers,   withCredentials: true })) Hook for adding headers to all\n\t        // service calls\n\t        var addHeadersHook = function addHeadersHook(hook) {\n\t          var x = document.cookie.split(';').map(function (s) {\n\t            return s.split('=');\n\t          }).reduce(function (r, a) {\n\t            r[a[0].trim()] = a[1];\n\t            return r;\n\t          }, {});\n\n\t          xsrfToken = x['XSRF-TOKEN'] || undefined;\n\t          console.log('xsrf ', xsrfToken);\n\n\t          if (xsrfToken) that.app.headers['X-XSRF-TOKEN'] = xsrfToken;\n\n\t          hook.params.headers = Object.assign({}, that.app.headers, hook.params.headers);\n\t          hook.params.withCredentials = true;\n\t        };\n\n\t        var afterRequestHook = function afterRequestHook(hook) {}\n\t        // console.log('afterRequestHook ', hook);\n\n\n\t        // Mixin automatically adds hook to all services\n\t        ;\n\n\t        this.app.configure(_feathersClient2.default.rest(endpoint).jquery(window.jQuery, {\n\t          headers: that.app.headers,\n\t          withCredentials: true\n\t        }));this.app.mixins.push(function (service) {\n\t          service.before(addHeadersHook);\n\t          service.after(afterRequestHook);\n\t        });\n\t      }\n\n\t      (0, _utils2.default)(this.app, $mdToast, $rootScope);\n\n\t      (0, _rest2.default)(this.app, $http);\n\n\t      $rootScope.loading = true;\n\n\t      this.app.loadingTimeout = null;\n\n\t      this.app.loadingTimeout = $timeout(function () {\n\t        $rootScope.loading = false;\n\t      }, 1500);\n\n\t      //Add timeout\n\t      $rootScope.afterRender = function (current, total) {\n\t        $timeout.cancel(this.loadingTimeout);\n\t        this.loadingTimeout = $timeout(function () {\n\t          $rootScope.loading = false;\n\t        }, 1500);\n\t      };\n\n\t      window.$abl = this.app;\n\t      window.$http = $http;\n\n\t      return this.app;\n\t    }]\n\t  };\n\t};\n\n\t//Old naming convention, left for backwards compatibility\n\tvar feathersSdk = [function $feathersProvider() {\n\t  return sdkProvider('feathers');\n\t}];\n\n\tvar ablSdk = [function $ablProvider() {\n\t  return sdkProvider('abl');\n\t}];\n\n\t/**\n\t * @namespace abl-sdk-feathers\n\t * @requires feathers\n\t * @requires RxJS\n\t * @requires rx-angular\n\t * @requires socket.io-client\n\n\t */\n\texports.default = angular.module('abl-sdk-feathers', ['ngMaterial', 'rx', 'currency-component'])\n\t/**\n\t * @class abl-sdk-feathers.$abl\n\t */\n\t.provider('$abl', ablSdk).provider('$feathers', feathersSdk).filter('startFrom', function () {\n\t  return function (input, start) {\n\t    start = +start; //parse to int\n\t    return input.slice(start);\n\t  };\n\t}).service('navigatorService', _navigator2.default).directive('toUppercase', _toUppercase2.default).directive('formatPhone', _formatPhone2.default).directive('onFocus', _focusParent2.default)\n\t// .directive('size', size)\n\t.directive('formatPhone', _formatPhone2.default).component('colSection', _col2.default).component('progressButton', _progressButton2.default).component('listItem', _listItem2.default).component('listItemNumericControl', _listItemNumericControl2.default).component('listItemAddCharge', _listItemAddCharge2.default).component('listItemHeader', _listItemHeader2.default);\n\n/***/ }),\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */,\n/* 53 */,\n/* 54 */,\n/* 55 */,\n/* 56 */,\n/* 57 */,\n/* 58 */,\n/* 59 */,\n/* 60 */,\n/* 61 */,\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */,\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Root reference for iframes.\n\t */\n\n\tvar root;\n\tif (typeof window !== 'undefined') { // Browser window\n\t  root = window;\n\t} else if (typeof self !== 'undefined') { // Web Worker\n\t  root = self;\n\t} else { // Other environments\n\t  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n\t  root = this;\n\t}\n\n\tvar Emitter = __webpack_require__(85);\n\tvar RequestBase = __webpack_require__(86);\n\tvar isObject = __webpack_require__(87);\n\tvar ResponseBase = __webpack_require__(88);\n\tvar Agent = __webpack_require__(90);\n\n\t/**\n\t * Noop.\n\t */\n\n\tfunction noop(){};\n\n\t/**\n\t * Expose `request`.\n\t */\n\n\tvar request = exports = module.exports = function(method, url) {\n\t  // callback\n\t  if ('function' == typeof url) {\n\t    return new exports.Request('GET', method).end(url);\n\t  }\n\n\t  // url first\n\t  if (1 == arguments.length) {\n\t    return new exports.Request('GET', method);\n\t  }\n\n\t  return new exports.Request(method, url);\n\t}\n\n\texports.Request = Request;\n\n\t/**\n\t * Determine XHR.\n\t */\n\n\trequest.getXHR = function () {\n\t  if (root.XMLHttpRequest\n\t      && (!root.location || 'file:' != root.location.protocol\n\t          || !root.ActiveXObject)) {\n\t    return new XMLHttpRequest;\n\t  } else {\n\t    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n\t    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n\t    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n\t    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n\t  }\n\t  throw Error(\"Browser-only version of superagent could not find XHR\");\n\t};\n\n\t/**\n\t * Removes leading and trailing whitespace, added to support IE.\n\t *\n\t * @param {String} s\n\t * @return {String}\n\t * @api private\n\t */\n\n\tvar trim = ''.trim\n\t  ? function(s) { return s.trim(); }\n\t  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n\t/**\n\t * Serialize the given `obj`.\n\t *\n\t * @param {Object} obj\n\t * @return {String}\n\t * @api private\n\t */\n\n\tfunction serialize(obj) {\n\t  if (!isObject(obj)) return obj;\n\t  var pairs = [];\n\t  for (var key in obj) {\n\t    pushEncodedKeyValuePair(pairs, key, obj[key]);\n\t  }\n\t  return pairs.join('&');\n\t}\n\n\t/**\n\t * Helps 'serialize' with serializing arrays.\n\t * Mutates the pairs array.\n\t *\n\t * @param {Array} pairs\n\t * @param {String} key\n\t * @param {Mixed} val\n\t */\n\n\tfunction pushEncodedKeyValuePair(pairs, key, val) {\n\t  if (val != null) {\n\t    if (Array.isArray(val)) {\n\t      val.forEach(function(v) {\n\t        pushEncodedKeyValuePair(pairs, key, v);\n\t      });\n\t    } else if (isObject(val)) {\n\t      for(var subkey in val) {\n\t        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n\t      }\n\t    } else {\n\t      pairs.push(encodeURIComponent(key)\n\t        + '=' + encodeURIComponent(val));\n\t    }\n\t  } else if (val === null) {\n\t    pairs.push(encodeURIComponent(key));\n\t  }\n\t}\n\n\t/**\n\t * Expose serialization method.\n\t */\n\n\trequest.serializeObject = serialize;\n\n\t/**\n\t  * Parse the given x-www-form-urlencoded `str`.\n\t  *\n\t  * @param {String} str\n\t  * @return {Object}\n\t  * @api private\n\t  */\n\n\tfunction parseString(str) {\n\t  var obj = {};\n\t  var pairs = str.split('&');\n\t  var pair;\n\t  var pos;\n\n\t  for (var i = 0, len = pairs.length; i < len; ++i) {\n\t    pair = pairs[i];\n\t    pos = pair.indexOf('=');\n\t    if (pos == -1) {\n\t      obj[decodeURIComponent(pair)] = '';\n\t    } else {\n\t      obj[decodeURIComponent(pair.slice(0, pos))] =\n\t        decodeURIComponent(pair.slice(pos + 1));\n\t    }\n\t  }\n\n\t  return obj;\n\t}\n\n\t/**\n\t * Expose parser.\n\t */\n\n\trequest.parseString = parseString;\n\n\t/**\n\t * Default MIME type map.\n\t *\n\t *     superagent.types.xml = 'application/xml';\n\t *\n\t */\n\n\trequest.types = {\n\t  html: 'text/html',\n\t  json: 'application/json',\n\t  xml: 'text/xml',\n\t  urlencoded: 'application/x-www-form-urlencoded',\n\t  'form': 'application/x-www-form-urlencoded',\n\t  'form-data': 'application/x-www-form-urlencoded'\n\t};\n\n\t/**\n\t * Default serialization map.\n\t *\n\t *     superagent.serialize['application/xml'] = function(obj){\n\t *       return 'generated xml here';\n\t *     };\n\t *\n\t */\n\n\trequest.serialize = {\n\t  'application/x-www-form-urlencoded': serialize,\n\t  'application/json': JSON.stringify\n\t};\n\n\t/**\n\t  * Default parsers.\n\t  *\n\t  *     superagent.parse['application/xml'] = function(str){\n\t  *       return { object parsed from str };\n\t  *     };\n\t  *\n\t  */\n\n\trequest.parse = {\n\t  'application/x-www-form-urlencoded': parseString,\n\t  'application/json': JSON.parse\n\t};\n\n\t/**\n\t * Parse the given header `str` into\n\t * an object containing the mapped fields.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api private\n\t */\n\n\tfunction parseHeader(str) {\n\t  var lines = str.split(/\\r?\\n/);\n\t  var fields = {};\n\t  var index;\n\t  var line;\n\t  var field;\n\t  var val;\n\n\t  for (var i = 0, len = lines.length; i < len; ++i) {\n\t    line = lines[i];\n\t    index = line.indexOf(':');\n\t    if (index === -1) { // could be empty line, just skip it\n\t      continue;\n\t    }\n\t    field = line.slice(0, index).toLowerCase();\n\t    val = trim(line.slice(index + 1));\n\t    fields[field] = val;\n\t  }\n\n\t  return fields;\n\t}\n\n\t/**\n\t * Check if `mime` is json or has +json structured syntax suffix.\n\t *\n\t * @param {String} mime\n\t * @return {Boolean}\n\t * @api private\n\t */\n\n\tfunction isJSON(mime) {\n\t  // should match /json or +json\n\t  // but not /json-seq\n\t  return /[\\/+]json($|[^-\\w])/.test(mime);\n\t}\n\n\t/**\n\t * Initialize a new `Response` with the given `xhr`.\n\t *\n\t *  - set flags (.ok, .error, etc)\n\t *  - parse header\n\t *\n\t * Examples:\n\t *\n\t *  Aliasing `superagent` as `request` is nice:\n\t *\n\t *      request = superagent;\n\t *\n\t *  We can use the promise-like API, or pass callbacks:\n\t *\n\t *      request.get('/').end(function(res){});\n\t *      request.get('/', function(res){});\n\t *\n\t *  Sending data can be chained:\n\t *\n\t *      request\n\t *        .post('/user')\n\t *        .send({ name: 'tj' })\n\t *        .end(function(res){});\n\t *\n\t *  Or passed to `.send()`:\n\t *\n\t *      request\n\t *        .post('/user')\n\t *        .send({ name: 'tj' }, function(res){});\n\t *\n\t *  Or passed to `.post()`:\n\t *\n\t *      request\n\t *        .post('/user', { name: 'tj' })\n\t *        .end(function(res){});\n\t *\n\t * Or further reduced to a single call for simple cases:\n\t *\n\t *      request\n\t *        .post('/user', { name: 'tj' }, function(res){});\n\t *\n\t * @param {XMLHTTPRequest} xhr\n\t * @param {Object} options\n\t * @api private\n\t */\n\n\tfunction Response(req) {\n\t  this.req = req;\n\t  this.xhr = this.req.xhr;\n\t  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n\t  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n\t     ? this.xhr.responseText\n\t     : null;\n\t  this.statusText = this.req.xhr.statusText;\n\t  var status = this.xhr.status;\n\t  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n\t  if (status === 1223) {\n\t    status = 204;\n\t  }\n\t  this._setStatusProperties(status);\n\t  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n\t  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n\t  // getResponseHeader still works. so we get content-type even if getting\n\t  // other headers fails.\n\t  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n\t  this._setHeaderProperties(this.header);\n\n\t  if (null === this.text && req._responseType) {\n\t    this.body = this.xhr.response;\n\t  } else {\n\t    this.body = this.req.method != 'HEAD'\n\t      ? this._parseBody(this.text ? this.text : this.xhr.response)\n\t      : null;\n\t  }\n\t}\n\n\tResponseBase(Response.prototype);\n\n\t/**\n\t * Parse the given body `str`.\n\t *\n\t * Used for auto-parsing of bodies. Parsers\n\t * are defined on the `superagent.parse` object.\n\t *\n\t * @param {String} str\n\t * @return {Mixed}\n\t * @api private\n\t */\n\n\tResponse.prototype._parseBody = function(str) {\n\t  var parse = request.parse[this.type];\n\t  if (this.req._parser) {\n\t    return this.req._parser(this, str);\n\t  }\n\t  if (!parse && isJSON(this.type)) {\n\t    parse = request.parse['application/json'];\n\t  }\n\t  return parse && str && (str.length || str instanceof Object)\n\t    ? parse(str)\n\t    : null;\n\t};\n\n\t/**\n\t * Return an `Error` representative of this response.\n\t *\n\t * @return {Error}\n\t * @api public\n\t */\n\n\tResponse.prototype.toError = function(){\n\t  var req = this.req;\n\t  var method = req.method;\n\t  var url = req.url;\n\n\t  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n\t  var err = new Error(msg);\n\t  err.status = this.status;\n\t  err.method = method;\n\t  err.url = url;\n\n\t  return err;\n\t};\n\n\t/**\n\t * Expose `Response`.\n\t */\n\n\trequest.Response = Response;\n\n\t/**\n\t * Initialize a new `Request` with the given `method` and `url`.\n\t *\n\t * @param {String} method\n\t * @param {String} url\n\t * @api public\n\t */\n\n\tfunction Request(method, url) {\n\t  var self = this;\n\t  this._query = this._query || [];\n\t  this.method = method;\n\t  this.url = url;\n\t  this.header = {}; // preserves header name case\n\t  this._header = {}; // coerces header names to lowercase\n\t  this.on('end', function(){\n\t    var err = null;\n\t    var res = null;\n\n\t    try {\n\t      res = new Response(self);\n\t    } catch(e) {\n\t      err = new Error('Parser is unable to parse the response');\n\t      err.parse = true;\n\t      err.original = e;\n\t      // issue #675: return the raw response if the response parsing fails\n\t      if (self.xhr) {\n\t        // ie9 doesn't have 'response' property\n\t        err.rawResponse = typeof self.xhr.responseType == 'undefined' ? self.xhr.responseText : self.xhr.response;\n\t        // issue #876: return the http status code if the response parsing fails\n\t        err.status = self.xhr.status ? self.xhr.status : null;\n\t        err.statusCode = err.status; // backwards-compat only\n\t      } else {\n\t        err.rawResponse = null;\n\t        err.status = null;\n\t      }\n\n\t      return self.callback(err);\n\t    }\n\n\t    self.emit('response', res);\n\n\t    var new_err;\n\t    try {\n\t      if (!self._isResponseOK(res)) {\n\t        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n\t      }\n\t    } catch(custom_err) {\n\t      new_err = custom_err; // ok() callback can throw\n\t    }\n\n\t    // #1000 don't catch errors from the callback to avoid double calling it\n\t    if (new_err) {\n\t      new_err.original = err;\n\t      new_err.response = res;\n\t      new_err.status = res.status;\n\t      self.callback(new_err, res);\n\t    } else {\n\t      self.callback(null, res);\n\t    }\n\t  });\n\t}\n\n\t/**\n\t * Mixin `Emitter` and `RequestBase`.\n\t */\n\n\tEmitter(Request.prototype);\n\tRequestBase(Request.prototype);\n\n\t/**\n\t * Set Content-Type to `type`, mapping values from `request.types`.\n\t *\n\t * Examples:\n\t *\n\t *      superagent.types.xml = 'application/xml';\n\t *\n\t *      request.post('/')\n\t *        .type('xml')\n\t *        .send(xmlstring)\n\t *        .end(callback);\n\t *\n\t *      request.post('/')\n\t *        .type('application/xml')\n\t *        .send(xmlstring)\n\t *        .end(callback);\n\t *\n\t * @param {String} type\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequest.prototype.type = function(type){\n\t  this.set('Content-Type', request.types[type] || type);\n\t  return this;\n\t};\n\n\t/**\n\t * Set Accept to `type`, mapping values from `request.types`.\n\t *\n\t * Examples:\n\t *\n\t *      superagent.types.json = 'application/json';\n\t *\n\t *      request.get('/agent')\n\t *        .accept('json')\n\t *        .end(callback);\n\t *\n\t *      request.get('/agent')\n\t *        .accept('application/json')\n\t *        .end(callback);\n\t *\n\t * @param {String} accept\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequest.prototype.accept = function(type){\n\t  this.set('Accept', request.types[type] || type);\n\t  return this;\n\t};\n\n\t/**\n\t * Set Authorization field value with `user` and `pass`.\n\t *\n\t * @param {String} user\n\t * @param {String} [pass] optional in case of using 'bearer' as type\n\t * @param {Object} options with 'type' property 'auto', 'basic' or 'bearer' (default 'basic')\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequest.prototype.auth = function(user, pass, options){\n\t  if (1 === arguments.length) pass = '';\n\t  if (typeof pass === 'object' && pass !== null) { // pass is optional and can be replaced with options\n\t    options = pass;\n\t    pass = '';\n\t  }\n\t  if (!options) {\n\t    options = {\n\t      type: 'function' === typeof btoa ? 'basic' : 'auto',\n\t    };\n\t  }\n\n\t  var encoder = function(string) {\n\t    if ('function' === typeof btoa) {\n\t      return btoa(string);\n\t    }\n\t    throw new Error('Cannot use basic auth, btoa is not a function');\n\t  };\n\n\t  return this._auth(user, pass, options, encoder);\n\t};\n\n\t/**\n\t * Add query-string `val`.\n\t *\n\t * Examples:\n\t *\n\t *   request.get('/shoes')\n\t *     .query('size=10')\n\t *     .query({ color: 'blue' })\n\t *\n\t * @param {Object|String} val\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequest.prototype.query = function(val){\n\t  if ('string' != typeof val) val = serialize(val);\n\t  if (val) this._query.push(val);\n\t  return this;\n\t};\n\n\t/**\n\t * Queue the given `file` as an attachment to the specified `field`,\n\t * with optional `options` (or filename).\n\t *\n\t * ``` js\n\t * request.post('/upload')\n\t *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n\t *   .end(callback);\n\t * ```\n\t *\n\t * @param {String} field\n\t * @param {Blob|File} file\n\t * @param {String|Object} options\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequest.prototype.attach = function(field, file, options){\n\t  if (file) {\n\t    if (this._data) {\n\t      throw Error(\"superagent can't mix .send() and .attach()\");\n\t    }\n\n\t    this._getFormData().append(field, file, options || file.name);\n\t  }\n\t  return this;\n\t};\n\n\tRequest.prototype._getFormData = function(){\n\t  if (!this._formData) {\n\t    this._formData = new root.FormData();\n\t  }\n\t  return this._formData;\n\t};\n\n\t/**\n\t * Invoke the callback with `err` and `res`\n\t * and handle arity check.\n\t *\n\t * @param {Error} err\n\t * @param {Response} res\n\t * @api private\n\t */\n\n\tRequest.prototype.callback = function(err, res){\n\t  if (this._shouldRetry(err, res)) {\n\t    return this._retry();\n\t  }\n\n\t  var fn = this._callback;\n\t  this.clearTimeout();\n\n\t  if (err) {\n\t    if (this._maxRetries) err.retries = this._retries - 1;\n\t    this.emit('error', err);\n\t  }\n\n\t  fn(err, res);\n\t};\n\n\t/**\n\t * Invoke callback with x-domain error.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.crossDomainError = function(){\n\t  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n\t  err.crossDomain = true;\n\n\t  err.status = this.status;\n\t  err.method = this.method;\n\t  err.url = this.url;\n\n\t  this.callback(err);\n\t};\n\n\t// This only warns, because the request is still likely to work\n\tRequest.prototype.buffer = Request.prototype.ca = Request.prototype.agent = function(){\n\t  console.warn(\"This is not supported in browser version of superagent\");\n\t  return this;\n\t};\n\n\t// This throws, because it can't send/receive data as expected\n\tRequest.prototype.pipe = Request.prototype.write = function(){\n\t  throw Error(\"Streaming is not supported in browser version of superagent\");\n\t};\n\n\t/**\n\t * Check if `obj` is a host object,\n\t * we don't want to serialize these :)\n\t *\n\t * @param {Object} obj\n\t * @return {Boolean}\n\t * @api private\n\t */\n\tRequest.prototype._isHost = function _isHost(obj) {\n\t  // Native objects stringify to [object File], [object Blob], [object FormData], etc.\n\t  return obj && 'object' === typeof obj && !Array.isArray(obj) && Object.prototype.toString.call(obj) !== '[object Object]';\n\t}\n\n\t/**\n\t * Initiate request, invoking callback `fn(res)`\n\t * with an instanceof `Response`.\n\t *\n\t * @param {Function} fn\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequest.prototype.end = function(fn){\n\t  if (this._endCalled) {\n\t    console.warn(\"Warning: .end() was called twice. This is not supported in superagent\");\n\t  }\n\t  this._endCalled = true;\n\n\t  // store callback\n\t  this._callback = fn || noop;\n\n\t  // querystring\n\t  this._finalizeQueryString();\n\n\t  return this._end();\n\t};\n\n\tRequest.prototype._end = function() {\n\t  var self = this;\n\t  var xhr = (this.xhr = request.getXHR());\n\t  var data = this._formData || this._data;\n\n\t  this._setTimeouts();\n\n\t  // state change\n\t  xhr.onreadystatechange = function(){\n\t    var readyState = xhr.readyState;\n\t    if (readyState >= 2 && self._responseTimeoutTimer) {\n\t      clearTimeout(self._responseTimeoutTimer);\n\t    }\n\t    if (4 != readyState) {\n\t      return;\n\t    }\n\n\t    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n\t    // result in the error \"Could not complete the operation due to error c00c023f\"\n\t    var status;\n\t    try { status = xhr.status } catch(e) { status = 0; }\n\n\t    if (!status) {\n\t      if (self.timedout || self._aborted) return;\n\t      return self.crossDomainError();\n\t    }\n\t    self.emit('end');\n\t  };\n\n\t  // progress\n\t  var handleProgress = function(direction, e) {\n\t    if (e.total > 0) {\n\t      e.percent = e.loaded / e.total * 100;\n\t    }\n\t    e.direction = direction;\n\t    self.emit('progress', e);\n\t  };\n\t  if (this.hasListeners('progress')) {\n\t    try {\n\t      xhr.onprogress = handleProgress.bind(null, 'download');\n\t      if (xhr.upload) {\n\t        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n\t      }\n\t    } catch(e) {\n\t      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n\t      // Reported here:\n\t      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n\t    }\n\t  }\n\n\t  // initiate request\n\t  try {\n\t    if (this.username && this.password) {\n\t      xhr.open(this.method, this.url, true, this.username, this.password);\n\t    } else {\n\t      xhr.open(this.method, this.url, true);\n\t    }\n\t  } catch (err) {\n\t    // see #1149\n\t    return this.callback(err);\n\t  }\n\n\t  // CORS\n\t  if (this._withCredentials) xhr.withCredentials = true;\n\n\t  // body\n\t  if (!this._formData && 'GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n\t    // serialize stuff\n\t    var contentType = this._header['content-type'];\n\t    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n\t    if (!serialize && isJSON(contentType)) {\n\t      serialize = request.serialize['application/json'];\n\t    }\n\t    if (serialize) data = serialize(data);\n\t  }\n\n\t  // set header fields\n\t  for (var field in this.header) {\n\t    if (null == this.header[field]) continue;\n\n\t    if (this.header.hasOwnProperty(field))\n\t      xhr.setRequestHeader(field, this.header[field]);\n\t  }\n\n\t  if (this._responseType) {\n\t    xhr.responseType = this._responseType;\n\t  }\n\n\t  // send stuff\n\t  this.emit('request', this);\n\n\t  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n\t  // We need null here if data is undefined\n\t  xhr.send(typeof data !== 'undefined' ? data : null);\n\t  return this;\n\t};\n\n\trequest.agent = function() {\n\t  return new Agent();\n\t};\n\n\t[\"GET\", \"POST\", \"OPTIONS\", \"PATCH\", \"PUT\", \"DELETE\"].forEach(function(method) {\n\t  Agent.prototype[method.toLowerCase()] = function(url, fn) {\n\t    var req = new request.Request(method, url);\n\t    this._setDefaults(req);\n\t    if (fn) {\n\t      req.end(fn);\n\t    }\n\t    return req;\n\t  };\n\t});\n\n\tAgent.prototype.del = Agent.prototype['delete'];\n\n\t/**\n\t * GET `url` with optional callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed|Function} [data] or fn\n\t * @param {Function} [fn]\n\t * @return {Request}\n\t * @api public\n\t */\n\n\trequest.get = function(url, data, fn) {\n\t  var req = request('GET', url);\n\t  if ('function' == typeof data) (fn = data), (data = null);\n\t  if (data) req.query(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\n\t/**\n\t * HEAD `url` with optional callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed|Function} [data] or fn\n\t * @param {Function} [fn]\n\t * @return {Request}\n\t * @api public\n\t */\n\n\trequest.head = function(url, data, fn) {\n\t  var req = request('HEAD', url);\n\t  if ('function' == typeof data) (fn = data), (data = null);\n\t  if (data) req.query(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\n\t/**\n\t * OPTIONS query to `url` with optional callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed|Function} [data] or fn\n\t * @param {Function} [fn]\n\t * @return {Request}\n\t * @api public\n\t */\n\n\trequest.options = function(url, data, fn) {\n\t  var req = request('OPTIONS', url);\n\t  if ('function' == typeof data) (fn = data), (data = null);\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\n\t/**\n\t * DELETE `url` with optional `data` and callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed} [data]\n\t * @param {Function} [fn]\n\t * @return {Request}\n\t * @api public\n\t */\n\n\tfunction del(url, data, fn) {\n\t  var req = request('DELETE', url);\n\t  if ('function' == typeof data) (fn = data), (data = null);\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t}\n\n\trequest['del'] = del;\n\trequest['delete'] = del;\n\n\t/**\n\t * PATCH `url` with optional `data` and callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed} [data]\n\t * @param {Function} [fn]\n\t * @return {Request}\n\t * @api public\n\t */\n\n\trequest.patch = function(url, data, fn) {\n\t  var req = request('PATCH', url);\n\t  if ('function' == typeof data) (fn = data), (data = null);\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\n\t/**\n\t * POST `url` with optional `data` and callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed} [data]\n\t * @param {Function} [fn]\n\t * @return {Request}\n\t * @api public\n\t */\n\n\trequest.post = function(url, data, fn) {\n\t  var req = request('POST', url);\n\t  if ('function' == typeof data) (fn = data), (data = null);\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\n\t/**\n\t * PUT `url` with optional `data` and callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed|Function} [data] or fn\n\t * @param {Function} [fn]\n\t * @return {Request}\n\t * @api public\n\t */\n\n\trequest.put = function(url, data, fn) {\n\t  var req = request('PUT', url);\n\t  if ('function' == typeof data) (fn = data), (data = null);\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\r\n\t/**\r\n\t * Expose `Emitter`.\r\n\t */\r\n\r\n\tif (true) {\r\n\t  module.exports = Emitter;\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize a new `Emitter`.\r\n\t *\r\n\t * @api public\r\n\t */\r\n\r\n\tfunction Emitter(obj) {\r\n\t  if (obj) return mixin(obj);\r\n\t};\r\n\r\n\t/**\r\n\t * Mixin the emitter properties.\r\n\t *\r\n\t * @param {Object} obj\r\n\t * @return {Object}\r\n\t * @api private\r\n\t */\r\n\r\n\tfunction mixin(obj) {\r\n\t  for (var key in Emitter.prototype) {\r\n\t    obj[key] = Emitter.prototype[key];\r\n\t  }\r\n\t  return obj;\r\n\t}\r\n\r\n\t/**\r\n\t * Listen on the given `event` with `fn`.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.on =\r\n\tEmitter.prototype.addEventListener = function(event, fn){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n\t    .push(fn);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Adds an `event` listener that will be invoked a single\r\n\t * time then automatically removed.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.once = function(event, fn){\r\n\t  function on() {\r\n\t    this.off(event, on);\r\n\t    fn.apply(this, arguments);\r\n\t  }\r\n\r\n\t  on.fn = fn;\r\n\t  this.on(event, on);\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove the given callback for `event` or all\r\n\t * registered callbacks.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Function} fn\r\n\t * @return {Emitter}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.off =\r\n\tEmitter.prototype.removeListener =\r\n\tEmitter.prototype.removeAllListeners =\r\n\tEmitter.prototype.removeEventListener = function(event, fn){\r\n\t  this._callbacks = this._callbacks || {};\r\n\r\n\t  // all\r\n\t  if (0 == arguments.length) {\r\n\t    this._callbacks = {};\r\n\t    return this;\r\n\t  }\r\n\r\n\t  // specific event\r\n\t  var callbacks = this._callbacks['$' + event];\r\n\t  if (!callbacks) return this;\r\n\r\n\t  // remove all handlers\r\n\t  if (1 == arguments.length) {\r\n\t    delete this._callbacks['$' + event];\r\n\t    return this;\r\n\t  }\r\n\r\n\t  // remove specific handler\r\n\t  var cb;\r\n\t  for (var i = 0; i < callbacks.length; i++) {\r\n\t    cb = callbacks[i];\r\n\t    if (cb === fn || cb.fn === fn) {\r\n\t      callbacks.splice(i, 1);\r\n\t      break;\r\n\t    }\r\n\t  }\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Emit `event` with the given args.\r\n\t *\r\n\t * @param {String} event\r\n\t * @param {Mixed} ...\r\n\t * @return {Emitter}\r\n\t */\r\n\r\n\tEmitter.prototype.emit = function(event){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  var args = [].slice.call(arguments, 1)\r\n\t    , callbacks = this._callbacks['$' + event];\r\n\r\n\t  if (callbacks) {\r\n\t    callbacks = callbacks.slice(0);\r\n\t    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n\t      callbacks[i].apply(this, args);\r\n\t    }\r\n\t  }\r\n\r\n\t  return this;\r\n\t};\r\n\r\n\t/**\r\n\t * Return array of callbacks for `event`.\r\n\t *\r\n\t * @param {String} event\r\n\t * @return {Array}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.listeners = function(event){\r\n\t  this._callbacks = this._callbacks || {};\r\n\t  return this._callbacks['$' + event] || [];\r\n\t};\r\n\r\n\t/**\r\n\t * Check if this emitter has `event` handlers.\r\n\t *\r\n\t * @param {String} event\r\n\t * @return {Boolean}\r\n\t * @api public\r\n\t */\r\n\r\n\tEmitter.prototype.hasListeners = function(event){\r\n\t  return !! this.listeners(event).length;\r\n\t};\r\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\t/**\n\t * Module of mixed-in functions shared between node and client code\n\t */\n\tvar isObject = __webpack_require__(87);\n\n\t/**\n\t * Expose `RequestBase`.\n\t */\n\n\tmodule.exports = RequestBase;\n\n\t/**\n\t * Initialize a new `RequestBase`.\n\t *\n\t * @api public\n\t */\n\n\tfunction RequestBase(obj) {\n\t  if (obj) return mixin(obj);\n\t}\n\n\t/**\n\t * Mixin the prototype properties.\n\t *\n\t * @param {Object} obj\n\t * @return {Object}\n\t * @api private\n\t */\n\n\tfunction mixin(obj) {\n\t  for (var key in RequestBase.prototype) {\n\t    obj[key] = RequestBase.prototype[key];\n\t  }\n\t  return obj;\n\t}\n\n\t/**\n\t * Clear previous timeout.\n\t *\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.clearTimeout = function _clearTimeout(){\n\t  clearTimeout(this._timer);\n\t  clearTimeout(this._responseTimeoutTimer);\n\t  delete this._timer;\n\t  delete this._responseTimeoutTimer;\n\t  return this;\n\t};\n\n\t/**\n\t * Override default response body parser\n\t *\n\t * This function will be called to convert incoming data into request.body\n\t *\n\t * @param {Function}\n\t * @api public\n\t */\n\n\tRequestBase.prototype.parse = function parse(fn){\n\t  this._parser = fn;\n\t  return this;\n\t};\n\n\t/**\n\t * Set format of binary response body.\n\t * In browser valid formats are 'blob' and 'arraybuffer',\n\t * which return Blob and ArrayBuffer, respectively.\n\t *\n\t * In Node all values result in Buffer.\n\t *\n\t * Examples:\n\t *\n\t *      req.get('/')\n\t *        .responseType('blob')\n\t *        .end(callback);\n\t *\n\t * @param {String} val\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.responseType = function(val){\n\t  this._responseType = val;\n\t  return this;\n\t};\n\n\t/**\n\t * Override default request body serializer\n\t *\n\t * This function will be called to convert data set via .send or .attach into payload to send\n\t *\n\t * @param {Function}\n\t * @api public\n\t */\n\n\tRequestBase.prototype.serialize = function serialize(fn){\n\t  this._serializer = fn;\n\t  return this;\n\t};\n\n\t/**\n\t * Set timeouts.\n\t *\n\t * - response timeout is time between sending request and receiving the first byte of the response. Includes DNS and connection time.\n\t * - deadline is the time from start of the request to receiving response body in full. If the deadline is too short large files may not load at all on slow connections.\n\t *\n\t * Value of 0 or false means no timeout.\n\t *\n\t * @param {Number|Object} ms or {response, deadline}\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.timeout = function timeout(options){\n\t  if (!options || 'object' !== typeof options) {\n\t    this._timeout = options;\n\t    this._responseTimeout = 0;\n\t    return this;\n\t  }\n\n\t  for(var option in options) {\n\t    switch(option) {\n\t      case 'deadline':\n\t        this._timeout = options.deadline;\n\t        break;\n\t      case 'response':\n\t        this._responseTimeout = options.response;\n\t        break;\n\t      default:\n\t        console.warn(\"Unknown timeout option\", option);\n\t    }\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Set number of retry attempts on error.\n\t *\n\t * Failed requests will be retried 'count' times if timeout or err.code >= 500.\n\t *\n\t * @param {Number} count\n\t * @param {Function} [fn]\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.retry = function retry(count, fn){\n\t  // Default to 1 if no count passed or true\n\t  if (arguments.length === 0 || count === true) count = 1;\n\t  if (count <= 0) count = 0;\n\t  this._maxRetries = count;\n\t  this._retries = 0;\n\t  this._retryCallback = fn;\n\t  return this;\n\t};\n\n\tvar ERROR_CODES = [\n\t  'ECONNRESET',\n\t  'ETIMEDOUT',\n\t  'EADDRINFO',\n\t  'ESOCKETTIMEDOUT'\n\t];\n\n\t/**\n\t * Determine if a request should be retried.\n\t * (Borrowed from segmentio/superagent-retry)\n\t *\n\t * @param {Error} err\n\t * @param {Response} [res]\n\t * @returns {Boolean}\n\t */\n\tRequestBase.prototype._shouldRetry = function(err, res) {\n\t  if (!this._maxRetries || this._retries++ >= this._maxRetries) {\n\t    return false;\n\t  }\n\t  if (this._retryCallback) {\n\t    try {\n\t      var override = this._retryCallback(err, res);\n\t      if (override === true) return true;\n\t      if (override === false) return false;\n\t      // undefined falls back to defaults\n\t    } catch(e) {\n\t      console.error(e);\n\t    }\n\t  }\n\t  if (res && res.status && res.status >= 500 && res.status != 501) return true;\n\t  if (err) {\n\t    if (err.code && ~ERROR_CODES.indexOf(err.code)) return true;\n\t    // Superagent timeout\n\t    if (err.timeout && err.code == 'ECONNABORTED') return true;\n\t    if (err.crossDomain) return true;\n\t  }\n\t  return false;\n\t};\n\n\t/**\n\t * Retry request\n\t *\n\t * @return {Request} for chaining\n\t * @api private\n\t */\n\n\tRequestBase.prototype._retry = function() {\n\n\t  this.clearTimeout();\n\n\t  // node\n\t  if (this.req) {\n\t    this.req = null;\n\t    this.req = this.request();\n\t  }\n\n\t  this._aborted = false;\n\t  this.timedout = false;\n\n\t  return this._end();\n\t};\n\n\t/**\n\t * Promise support\n\t *\n\t * @param {Function} resolve\n\t * @param {Function} [reject]\n\t * @return {Request}\n\t */\n\n\tRequestBase.prototype.then = function then(resolve, reject) {\n\t  if (!this._fullfilledPromise) {\n\t    var self = this;\n\t    if (this._endCalled) {\n\t      console.warn(\"Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises\");\n\t    }\n\t    this._fullfilledPromise = new Promise(function(innerResolve, innerReject) {\n\t      self.end(function(err, res) {\n\t        if (err) innerReject(err);\n\t        else innerResolve(res);\n\t      });\n\t    });\n\t  }\n\t  return this._fullfilledPromise.then(resolve, reject);\n\t};\n\n\tRequestBase.prototype['catch'] = function(cb) {\n\t  return this.then(undefined, cb);\n\t};\n\n\t/**\n\t * Allow for extension\n\t */\n\n\tRequestBase.prototype.use = function use(fn) {\n\t  fn(this);\n\t  return this;\n\t};\n\n\tRequestBase.prototype.ok = function(cb) {\n\t  if ('function' !== typeof cb) throw Error(\"Callback required\");\n\t  this._okCallback = cb;\n\t  return this;\n\t};\n\n\tRequestBase.prototype._isResponseOK = function(res) {\n\t  if (!res) {\n\t    return false;\n\t  }\n\n\t  if (this._okCallback) {\n\t    return this._okCallback(res);\n\t  }\n\n\t  return res.status >= 200 && res.status < 300;\n\t};\n\n\t/**\n\t * Get request header `field`.\n\t * Case-insensitive.\n\t *\n\t * @param {String} field\n\t * @return {String}\n\t * @api public\n\t */\n\n\tRequestBase.prototype.get = function(field){\n\t  return this._header[field.toLowerCase()];\n\t};\n\n\t/**\n\t * Get case-insensitive header `field` value.\n\t * This is a deprecated internal API. Use `.get(field)` instead.\n\t *\n\t * (getHeader is no longer used internally by the superagent code base)\n\t *\n\t * @param {String} field\n\t * @return {String}\n\t * @api private\n\t * @deprecated\n\t */\n\n\tRequestBase.prototype.getHeader = RequestBase.prototype.get;\n\n\t/**\n\t * Set header `field` to `val`, or multiple fields with one object.\n\t * Case-insensitive.\n\t *\n\t * Examples:\n\t *\n\t *      req.get('/')\n\t *        .set('Accept', 'application/json')\n\t *        .set('X-API-Key', 'foobar')\n\t *        .end(callback);\n\t *\n\t *      req.get('/')\n\t *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n\t *        .end(callback);\n\t *\n\t * @param {String|Object} field\n\t * @param {String} val\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.set = function(field, val){\n\t  if (isObject(field)) {\n\t    for (var key in field) {\n\t      this.set(key, field[key]);\n\t    }\n\t    return this;\n\t  }\n\t  this._header[field.toLowerCase()] = val;\n\t  this.header[field] = val;\n\t  return this;\n\t};\n\n\t/**\n\t * Remove header `field`.\n\t * Case-insensitive.\n\t *\n\t * Example:\n\t *\n\t *      req.get('/')\n\t *        .unset('User-Agent')\n\t *        .end(callback);\n\t *\n\t * @param {String} field\n\t */\n\tRequestBase.prototype.unset = function(field){\n\t  delete this._header[field.toLowerCase()];\n\t  delete this.header[field];\n\t  return this;\n\t};\n\n\t/**\n\t * Write the field `name` and `val`, or multiple fields with one object\n\t * for \"multipart/form-data\" request bodies.\n\t *\n\t * ``` js\n\t * request.post('/upload')\n\t *   .field('foo', 'bar')\n\t *   .end(callback);\n\t *\n\t * request.post('/upload')\n\t *   .field({ foo: 'bar', baz: 'qux' })\n\t *   .end(callback);\n\t * ```\n\t *\n\t * @param {String|Object} name\n\t * @param {String|Blob|File|Buffer|fs.ReadStream} val\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\tRequestBase.prototype.field = function(name, val) {\n\t  // name should be either a string or an object.\n\t  if (null === name || undefined === name) {\n\t    throw new Error('.field(name, val) name can not be empty');\n\t  }\n\n\t  if (this._data) {\n\t    console.error(\".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()\");\n\t  }\n\n\t  if (isObject(name)) {\n\t    for (var key in name) {\n\t      this.field(key, name[key]);\n\t    }\n\t    return this;\n\t  }\n\n\t  if (Array.isArray(val)) {\n\t    for (var i in val) {\n\t      this.field(name, val[i]);\n\t    }\n\t    return this;\n\t  }\n\n\t  // val should be defined now\n\t  if (null === val || undefined === val) {\n\t    throw new Error('.field(name, val) val can not be empty');\n\t  }\n\t  if ('boolean' === typeof val) {\n\t    val = '' + val;\n\t  }\n\t  this._getFormData().append(name, val);\n\t  return this;\n\t};\n\n\t/**\n\t * Abort the request, and clear potential timeout.\n\t *\n\t * @return {Request}\n\t * @api public\n\t */\n\tRequestBase.prototype.abort = function(){\n\t  if (this._aborted) {\n\t    return this;\n\t  }\n\t  this._aborted = true;\n\t  this.xhr && this.xhr.abort(); // browser\n\t  this.req && this.req.abort(); // node\n\t  this.clearTimeout();\n\t  this.emit('abort');\n\t  return this;\n\t};\n\n\tRequestBase.prototype._auth = function(user, pass, options, base64Encoder) {\n\t  switch (options.type) {\n\t    case 'basic':\n\t      this.set('Authorization', 'Basic ' + base64Encoder(user + ':' + pass));\n\t      break;\n\n\t    case 'auto':\n\t      this.username = user;\n\t      this.password = pass;\n\t      break;\n\n\t    case 'bearer': // usage would be .auth(accessToken, { type: 'bearer' })\n\t      this.set('Authorization', 'Bearer ' + user);\n\t      break;\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Enable transmission of cookies with x-domain requests.\n\t *\n\t * Note that for this to work the origin must not be\n\t * using \"Access-Control-Allow-Origin\" with a wildcard,\n\t * and also must set \"Access-Control-Allow-Credentials\"\n\t * to \"true\".\n\t *\n\t * @api public\n\t */\n\n\tRequestBase.prototype.withCredentials = function(on) {\n\t  // This is browser-only functionality. Node side is no-op.\n\t  if (on == undefined) on = true;\n\t  this._withCredentials = on;\n\t  return this;\n\t};\n\n\t/**\n\t * Set the max redirects to `n`. Does noting in browser XHR implementation.\n\t *\n\t * @param {Number} n\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.redirects = function(n){\n\t  this._maxRedirects = n;\n\t  return this;\n\t};\n\n\t/**\n\t * Maximum size of buffered response body, in bytes. Counts uncompressed size.\n\t * Default 200MB.\n\t *\n\t * @param {Number} n\n\t * @return {Request} for chaining\n\t */\n\tRequestBase.prototype.maxResponseSize = function(n){\n\t  if ('number' !== typeof n) {\n\t    throw TypeError(\"Invalid argument\");\n\t  }\n\t  this._maxResponseSize = n;\n\t  return this;\n\t};\n\n\t/**\n\t * Convert to a plain javascript object (not JSON string) of scalar properties.\n\t * Note as this method is designed to return a useful non-this value,\n\t * it cannot be chained.\n\t *\n\t * @return {Object} describing method, url, and data of this request\n\t * @api public\n\t */\n\n\tRequestBase.prototype.toJSON = function() {\n\t  return {\n\t    method: this.method,\n\t    url: this.url,\n\t    data: this._data,\n\t    headers: this._header,\n\t  };\n\t};\n\n\t/**\n\t * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n\t * an object is given.\n\t *\n\t * Examples:\n\t *\n\t *       // manual json\n\t *       request.post('/user')\n\t *         .type('json')\n\t *         .send('{\"name\":\"tj\"}')\n\t *         .end(callback)\n\t *\n\t *       // auto json\n\t *       request.post('/user')\n\t *         .send({ name: 'tj' })\n\t *         .end(callback)\n\t *\n\t *       // manual x-www-form-urlencoded\n\t *       request.post('/user')\n\t *         .type('form')\n\t *         .send('name=tj')\n\t *         .end(callback)\n\t *\n\t *       // auto x-www-form-urlencoded\n\t *       request.post('/user')\n\t *         .type('form')\n\t *         .send({ name: 'tj' })\n\t *         .end(callback)\n\t *\n\t *       // defaults to x-www-form-urlencoded\n\t *      request.post('/user')\n\t *        .send('name=tobi')\n\t *        .send('species=ferret')\n\t *        .end(callback)\n\t *\n\t * @param {String|Object} data\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.send = function(data){\n\t  var isObj = isObject(data);\n\t  var type = this._header['content-type'];\n\n\t  if (this._formData) {\n\t    console.error(\".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()\");\n\t  }\n\n\t  if (isObj && !this._data) {\n\t    if (Array.isArray(data)) {\n\t      this._data = [];\n\t    } else if (!this._isHost(data)) {\n\t      this._data = {};\n\t    }\n\t  } else if (data && this._data && this._isHost(this._data)) {\n\t    throw Error(\"Can't merge these send calls\");\n\t  }\n\n\t  // merge\n\t  if (isObj && isObject(this._data)) {\n\t    for (var key in data) {\n\t      this._data[key] = data[key];\n\t    }\n\t  } else if ('string' == typeof data) {\n\t    // default to x-www-form-urlencoded\n\t    if (!type) this.type('form');\n\t    type = this._header['content-type'];\n\t    if ('application/x-www-form-urlencoded' == type) {\n\t      this._data = this._data\n\t        ? this._data + '&' + data\n\t        : data;\n\t    } else {\n\t      this._data = (this._data || '') + data;\n\t    }\n\t  } else {\n\t    this._data = data;\n\t  }\n\n\t  if (!isObj || this._isHost(data)) {\n\t    return this;\n\t  }\n\n\t  // default to json\n\t  if (!type) this.type('json');\n\t  return this;\n\t};\n\n\t/**\n\t * Sort `querystring` by the sort function\n\t *\n\t *\n\t * Examples:\n\t *\n\t *       // default order\n\t *       request.get('/user')\n\t *         .query('name=Nick')\n\t *         .query('search=Manny')\n\t *         .sortQuery()\n\t *         .end(callback)\n\t *\n\t *       // customized sort function\n\t *       request.get('/user')\n\t *         .query('name=Nick')\n\t *         .query('search=Manny')\n\t *         .sortQuery(function(a, b){\n\t *           return a.length - b.length;\n\t *         })\n\t *         .end(callback)\n\t *\n\t *\n\t * @param {Function} sort\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\n\tRequestBase.prototype.sortQuery = function(sort) {\n\t  // _sort default to true but otherwise can be a function or boolean\n\t  this._sort = typeof sort === 'undefined' ? true : sort;\n\t  return this;\n\t};\n\n\t/**\n\t * Compose querystring to append to req.url\n\t *\n\t * @api private\n\t */\n\tRequestBase.prototype._finalizeQueryString = function(){\n\t  var query = this._query.join('&');\n\t  if (query) {\n\t    this.url += (this.url.indexOf('?') >= 0 ? '&' : '?') + query;\n\t  }\n\t  this._query.length = 0; // Makes the call idempotent\n\n\t  if (this._sort) {\n\t    var index = this.url.indexOf('?');\n\t    if (index >= 0) {\n\t      var queryArr = this.url.substring(index + 1).split('&');\n\t      if ('function' === typeof this._sort) {\n\t        queryArr.sort(this._sort);\n\t      } else {\n\t        queryArr.sort();\n\t      }\n\t      this.url = this.url.substring(0, index) + '?' + queryArr.join('&');\n\t    }\n\t  }\n\t};\n\n\t// For backwards compat only\n\tRequestBase.prototype._appendQueryString = function() {console.trace(\"Unsupported\");}\n\n\t/**\n\t * Invoke callback with timeout error.\n\t *\n\t * @api private\n\t */\n\n\tRequestBase.prototype._timeoutError = function(reason, timeout, errno){\n\t  if (this._aborted) {\n\t    return;\n\t  }\n\t  var err = new Error(reason + timeout + 'ms exceeded');\n\t  err.timeout = timeout;\n\t  err.code = 'ECONNABORTED';\n\t  err.errno = errno;\n\t  this.timedout = true;\n\t  this.abort();\n\t  this.callback(err);\n\t};\n\n\tRequestBase.prototype._setTimeouts = function() {\n\t  var self = this;\n\n\t  // deadline\n\t  if (this._timeout && !this._timer) {\n\t    this._timer = setTimeout(function(){\n\t      self._timeoutError('Timeout of ', self._timeout, 'ETIME');\n\t    }, this._timeout);\n\t  }\n\t  // response timeout\n\t  if (this._responseTimeout && !this._responseTimeoutTimer) {\n\t    this._responseTimeoutTimer = setTimeout(function(){\n\t      self._timeoutError('Response timeout of ', self._responseTimeout, 'ETIMEDOUT');\n\t    }, this._responseTimeout);\n\t  }\n\t};\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\t/**\n\t * Check if `obj` is an object.\n\t *\n\t * @param {Object} obj\n\t * @return {Boolean}\n\t * @api private\n\t */\n\n\tfunction isObject(obj) {\n\t  return null !== obj && 'object' === typeof obj;\n\t}\n\n\tmodule.exports = isObject;\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar utils = __webpack_require__(89);\n\n\t/**\n\t * Expose `ResponseBase`.\n\t */\n\n\tmodule.exports = ResponseBase;\n\n\t/**\n\t * Initialize a new `ResponseBase`.\n\t *\n\t * @api public\n\t */\n\n\tfunction ResponseBase(obj) {\n\t  if (obj) return mixin(obj);\n\t}\n\n\t/**\n\t * Mixin the prototype properties.\n\t *\n\t * @param {Object} obj\n\t * @return {Object}\n\t * @api private\n\t */\n\n\tfunction mixin(obj) {\n\t  for (var key in ResponseBase.prototype) {\n\t    obj[key] = ResponseBase.prototype[key];\n\t  }\n\t  return obj;\n\t}\n\n\t/**\n\t * Get case-insensitive `field` value.\n\t *\n\t * @param {String} field\n\t * @return {String}\n\t * @api public\n\t */\n\n\tResponseBase.prototype.get = function(field) {\n\t  return this.header[field.toLowerCase()];\n\t};\n\n\t/**\n\t * Set header related properties:\n\t *\n\t *   - `.type` the content type without params\n\t *\n\t * A response of \"Content-Type: text/plain; charset=utf-8\"\n\t * will provide you with a `.type` of \"text/plain\".\n\t *\n\t * @param {Object} header\n\t * @api private\n\t */\n\n\tResponseBase.prototype._setHeaderProperties = function(header){\n\t    // TODO: moar!\n\t    // TODO: make this a util\n\n\t    // content-type\n\t    var ct = header['content-type'] || '';\n\t    this.type = utils.type(ct);\n\n\t    // params\n\t    var params = utils.params(ct);\n\t    for (var key in params) this[key] = params[key];\n\n\t    this.links = {};\n\n\t    // links\n\t    try {\n\t        if (header.link) {\n\t            this.links = utils.parseLinks(header.link);\n\t        }\n\t    } catch (err) {\n\t        // ignore\n\t    }\n\t};\n\n\t/**\n\t * Set flags such as `.ok` based on `status`.\n\t *\n\t * For example a 2xx response will give you a `.ok` of __true__\n\t * whereas 5xx will be __false__ and `.error` will be __true__. The\n\t * `.clientError` and `.serverError` are also available to be more\n\t * specific, and `.statusType` is the class of error ranging from 1..5\n\t * sometimes useful for mapping respond colors etc.\n\t *\n\t * \"sugar\" properties are also defined for common cases. Currently providing:\n\t *\n\t *   - .noContent\n\t *   - .badRequest\n\t *   - .unauthorized\n\t *   - .notAcceptable\n\t *   - .notFound\n\t *\n\t * @param {Number} status\n\t * @api private\n\t */\n\n\tResponseBase.prototype._setStatusProperties = function(status){\n\t    var type = status / 100 | 0;\n\n\t    // status / class\n\t    this.status = this.statusCode = status;\n\t    this.statusType = type;\n\n\t    // basics\n\t    this.info = 1 == type;\n\t    this.ok = 2 == type;\n\t    this.redirect = 3 == type;\n\t    this.clientError = 4 == type;\n\t    this.serverError = 5 == type;\n\t    this.error = (4 == type || 5 == type)\n\t        ? this.toError()\n\t        : false;\n\n\t    // sugar\n\t    this.created = 201 == status;\n\t    this.accepted = 202 == status;\n\t    this.noContent = 204 == status;\n\t    this.badRequest = 400 == status;\n\t    this.unauthorized = 401 == status;\n\t    this.notAcceptable = 406 == status;\n\t    this.forbidden = 403 == status;\n\t    this.notFound = 404 == status;\n\t    this.unprocessableEntity = 422 == status;\n\t};\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\t/**\n\t * Return the mime type for the given `str`.\n\t *\n\t * @param {String} str\n\t * @return {String}\n\t * @api private\n\t */\n\n\texports.type = function(str){\n\t  return str.split(/ *; */).shift();\n\t};\n\n\t/**\n\t * Return header field parameters.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api private\n\t */\n\n\texports.params = function(str){\n\t  return str.split(/ *; */).reduce(function(obj, str){\n\t    var parts = str.split(/ *= */);\n\t    var key = parts.shift();\n\t    var val = parts.shift();\n\n\t    if (key && val) obj[key] = val;\n\t    return obj;\n\t  }, {});\n\t};\n\n\t/**\n\t * Parse Link header fields.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api private\n\t */\n\n\texports.parseLinks = function(str){\n\t  return str.split(/ *, */).reduce(function(obj, str){\n\t    var parts = str.split(/ *; */);\n\t    var url = parts[0].slice(1, -1);\n\t    var rel = parts[1].split(/ *= */)[1].slice(1, -1);\n\t    obj[rel] = url;\n\t    return obj;\n\t  }, {});\n\t};\n\n\t/**\n\t * Strip content related fields from `header`.\n\t *\n\t * @param {Object} header\n\t * @return {Object} header\n\t * @api private\n\t */\n\n\texports.cleanHeader = function(header, changesOrigin){\n\t  delete header['content-type'];\n\t  delete header['content-length'];\n\t  delete header['transfer-encoding'];\n\t  delete header['host'];\n\t  // secuirty\n\t  if (changesOrigin) {\n\t    delete header['authorization'];\n\t    delete header['cookie'];\n\t  }\n\t  return header;\n\t};\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\n\tfunction Agent() {\n\t  this._defaults = [];\n\t}\n\n\t[\"use\", \"on\", \"once\", \"set\", \"query\", \"type\", \"accept\", \"auth\", \"withCredentials\", \"sortQuery\", \"retry\", \"ok\", \"redirects\",\n\t \"timeout\", \"buffer\", \"serialize\", \"parse\", \"ca\", \"key\", \"pfx\", \"cert\"].forEach(function(fn) {\n\t  /** Default setting for all requests from this agent */\n\t  Agent.prototype[fn] = function(/*varargs*/) {\n\t    this._defaults.push({fn:fn, arguments:arguments});\n\t    return this;\n\t  }\n\t});\n\n\tAgent.prototype._setDefaults = function(req) {\n\t    this._defaults.forEach(function(def) {\n\t      req[def.fn].apply(req, def.arguments);\n\t    });\n\t};\n\n\tmodule.exports = Agent;\n\n\n/***/ }),\n/* 91 */,\n/* 92 */,\n/* 93 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = setupUtilityFunctions;\n\tfunction setupUtilityFunctions(app, $mdToast, $rootScope) {\n\n\t    /**\n\t     * @name $abl.showToast\n\t     * @function showToast\n\t     * @memberOf abl-sdk-feathers.$abl\n\t     * @description Show an Angular Material toast.\n\t     * @param {string} message - The message to display.\n\t     * @param {string} [class] - The CSS class to apply to the toast.\n\t     * @param {number} [timeout=3000] - The length of time (ms) for the toast to remain visible. \n\t     */\n\t    app.showToast = function (msg, toastClass, delay) {\n\t        if (!toastClass) var toastClass = '';\n\t        if (!delay) var delay = 3000;\n\n\t        var toast = $mdToast.simple().toastClass(toastClass).textContent(msg).action('Hide').hideDelay(delay).position('bottom left').highlightAction(false);\n\t        $mdToast.show(toast);\n\t        console.debug('showToast ', toastClass, msg);\n\t    };\n\n\t    /**\n\t     * @name $abl.randomInt\n\t     * @function randomInt\n\t     * @memberOf abl-sdk-feathers.$abl\n\t     * @description Returns random integer between min and max.\n\t     * @param {number} min - The upper bound of the random calculation.\n\t     * @param {number} max - The lower bound of the random calculation.\n\t     * @returns {number} between min and max.\n\t     */\n\t    //\n\t    app.randomInt = function (min, max) {\n\t        return Math.floor(Math.random() * (max - min + 1) + min);\n\t    };\n\n\t    /**\n\t     * @class abl-sdk-feathers.$rootScope\n\t     * @hidden\n\t     */\n\n\t    /**\n\t     * @name $rootScope.showToast\n\t     * @function showToast\n\t     * @memberOf abl-sdk-feathers.$rootScope\n\t     * @description Show an Angular Material toast.\n\t     * @param {string} message - The message to display.\n\t     * @param {string} [class] - The CSS class to apply to the toast.\n\t     * @param {number} [timeout=3000] - The length of time (ms) for the toast to remain visible. \n\t     */\n\t    $rootScope.showToast = function (a, b, c) {\n\t        app.showToast(a, b, c); //Legacy support\n\t    };\n\n\t    /**\n\t     * @name $rootScope.safeApply\n\t     * @function safeApply\n\t     * @memberOf abl-sdk-feathers.$rootScope\n\t     * @description App-wide safeApply function for usage in app controllers as a safer alternative to $apply().\n\t     */\n\t    $rootScope.safeApply = function (fn) {\n\t        if (this.$root) {\n\t            var phase = this.$root.$$phase;\n\t            if (phase === '$apply' || phase === '$digest') {\n\t                if (fn && typeof fn === 'function') {\n\t                    fn();\n\t                }\n\t            } else {\n\t                this.$apply(fn);\n\t            }\n\t        } else {\n\t            this.$apply(fn);\n\t        }\n\t    };\n\n\t    return app;\n\t}\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\n\t// load the styles\n\tvar content = __webpack_require__(95);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(97)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./styles.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(96)(false);\n\t// imports\n\n\n\t// module\n\texports.push([module.id, \"md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.red{color:#dd2c00}.paymentResponseContainer{display:block;height:auto;background-color:#fff;overflow-y:auto}.activityPaymentSummaryCard{margin:8px 0}.paymentSummaryCard{min-width:100%;margin-bottom:0!important;margin-top:0!important;margin-right:16px;background:none;box-shadow:none;height:100%;padding:20px}.paymentSummaryCardNewContent{background-color:#fff}.paymentSummaryCardResponse{padding:8px}.rightCheckoutPanel{background-color:#fff!important}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:0;padding-left:0}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:0}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.agentCommission,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{padding:0}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:0 4px}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.remove-coupon{cursor:pointer}.toUppercase{text-transform:uppercase}md-list-item:hover{background:transparent}.md-button:not([disabled]):hover,md-list-item.md-button.md-default-theme:not([disabled]):hover{background-color:transparent}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.agentInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none;margin-top:1px}.remove-agent-code{cursor:pointer}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 32px 8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}.confirmation{padding:20px 0;text-align:center}.confirmation h3{text-align:center;margin-bottom:20px}.confirmation .margin-top{margin-top:8px}.confirmation .booking-id{padding:15px;margin:8px auto;width:260px;opacity:.8;font-weight:700;color:#fff}body[md-theme=blue] .confirmation .booking-id{background:#2196f3}body[md-theme=teal] .confirmation .booking-id{background:#009688}body[md-theme=green] .confirmation .booking-id{background:#4caf50}body[md-theme=grey] .confirmation .booking-id{background:#9e9e9e}body[md-theme=blue_grey] .confirmation .booking-id{background:#607d8b}body[md-theme=yellow] .confirmation .booking-id{background:#ffeb3b;color:#000}body[md-theme=indigo] .confirmation .booking-id{background:#3f51b5}body[md-theme=red] .confirmation .booking-id{background:#f44336}body[md-theme=black] .confirmation .booking-id{background:#000}body[md-theme=pink] .confirmation .booking-id{background:#e07bb5}body[md-theme=white] .confirmation .booking-id{background:#eee;color:#000}body[md-theme=dark_blue] .confirmation .booking-id{background:#1e88e5}body[md-theme=purple] .confirmation .booking-id{background:#9c27b0}body[md-theme=orange] .confirmation .booking-id{background:#ff6d00}@media(max-width:600px){.confirmation{padding:20px;font-size:13px}.paymentSummaryCard{margin:0}}@media(min-width:743px) and (max-width:1024px){.paymentSummaryCard{margin-left:0}}.picker-container{border-radius:2px;background:#fff}.bigDateToolbar{background:#fff!important;color:#000!important}.activity-dialog-container{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;z-index:80;overflow:hidden}.activity-dialog,md-dialog.activity-dialog{max-height:80%;max-width:90%;position:relative;overflow:auto;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12);display:-ms-flexbox;display:flex;overflow-x:hidden;overflow-y:hidden;-ms-flex-direction:column;flex-direction:column}.activity-dialog,md-dialog md-dialog-content{padding:0;overflow:hidden}.no-margin{margin:0!important}.leftCard{background:rgba(0,0,0,.025)}.activityBookDialogLarge{width:100%;min-height:500px;height:100%;background-color:#fff}.leftCardLarge{border-right:1px solid #e4e4e4!important;box-shadow:1px 0 5px 1px rgba(0,0,0,.12)!important;min-height:100%;min-width:420px;width:50%;position:absolute;height:100%;overflow-y:scroll}.leftCardSmall{border-bottom:1px solid #e4e4e4!important;box-shadow:0 1px 5px rgba(0,0,0,.08)!important}.rightCardLarge{position:absolute;right:0;min-width:420px;width:50%;display:block;height:100%}.activity-total-include{height:100%}.couponText{font-size:16px}.couponTextTotal{font-size:16px;padding-right:12px}.listItemAutocomplete{padding-left:0!important}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;margin-right:-8px;outline:none;background:transparent}.activityPaymentSummaryCard{margin-bottom:0!important;margin-top:0!important;margin-right:0;margin-left:0;background:none;box-shadow:none;position:relative;height:100%}.activityCardForm{margin:0 16px}.detailsForm{padding-left:16px;padding-right:16px}.listItemInputContainer{margin:10px 0!important;position:relative;padding:2px;vertical-align:middle;display:inline-block!important;margin-top:-10px!important;width:100%!important}.listItemInputContainerNoMargin{margin-top:0!important;margin-bottom:0!important}.formContainer{padding:16px!important;padding-top:42px!important}.formContainerQuestions{padding:16px 16px 0}.formContainerQuestions md-input-container{margin-bottom:0;margin-top:0}md-input-container{margin:18px 0}md-input-container .md-input-messages-animation{text-align:right}\", \"\"]);\n\n\t// exports\n\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\n\t/*\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\n\t\tAuthor Tobias Koppers @sokra\n\t*/\n\t// css base code, injected by the css-loader\n\tmodule.exports = function(useSourceMap) {\n\t\tvar list = [];\n\n\t\t// return the list of modules as css string\n\t\tlist.toString = function toString() {\n\t\t\treturn this.map(function (item) {\n\t\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\t\tif(item[2]) {\n\t\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t\t} else {\n\t\t\t\t\treturn content;\n\t\t\t\t}\n\t\t\t}).join(\"\");\n\t\t};\n\n\t\t// import a list of modules into the list\n\t\tlist.i = function(modules, mediaQuery) {\n\t\t\tif(typeof modules === \"string\")\n\t\t\t\tmodules = [[null, modules, \"\"]];\n\t\t\tvar alreadyImportedModules = {};\n\t\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\t\tvar id = this[i][0];\n\t\t\t\tif(typeof id === \"number\")\n\t\t\t\t\talreadyImportedModules[id] = true;\n\t\t\t}\n\t\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\t\tvar item = modules[i];\n\t\t\t\t// skip already imported module\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tlist.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn list;\n\t};\n\n\tfunction cssWithMappingToString(item, useSourceMap) {\n\t\tvar content = item[1] || '';\n\t\tvar cssMapping = item[3];\n\t\tif (!cssMapping) {\n\t\t\treturn content;\n\t\t}\n\n\t\tif (useSourceMap && typeof btoa === 'function') {\n\t\t\tvar sourceMapping = toComment(cssMapping);\n\t\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t\t});\n\n\t\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t\t}\n\n\t\treturn [content].join('\\n');\n\t}\n\n\t// Adapted from convert-source-map (MIT)\n\tfunction toComment(sourceMap) {\n\t\t// eslint-disable-next-line no-undef\n\t\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\t\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\t\treturn '/*# ' + data + ' */';\n\t}\n\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\n\t\tAuthor Tobias Koppers @sokra\n\t*/\n\tvar stylesInDom = {},\n\t\tmemoize = function(fn) {\n\t\t\tvar memo;\n\t\t\treturn function () {\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\t\treturn memo;\n\t\t\t};\n\t\t},\n\t\tisOldIE = memoize(function() {\n\t\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t\t// to operate correctly into non-standard environments\n\t\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\t\treturn window && document && document.all && !window.atob;\n\t\t}),\n\t\tgetElement = (function(fn) {\n\t\t\tvar memo = {};\n\t\t\treturn function(selector) {\n\t\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t\t}\n\t\t\t\treturn memo[selector]\n\t\t\t};\n\t\t})(function (styleTarget) {\n\t\t\treturn document.querySelector(styleTarget)\n\t\t}),\n\t\tsingletonElement = null,\n\t\tsingletonCounter = 0,\n\t\tstyleElementsInsertedAtTop = [],\n\t\tfixUrls = __webpack_require__(98);\n\n\tmodule.exports = function(list, options) {\n\t\tif(false) {\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t\t}\n\n\t\toptions = options || {};\n\t\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t\t// tags it will allow on a page\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t\t// By default, add <style> tags to the <head> element\n\t\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t\t// By default, add <style> tags to the bottom of the target\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\t\tvar styles = listToStyles(list);\n\t\taddStylesToDom(styles, options);\n\n\t\treturn function update(newList) {\n\t\t\tvar mayRemove = [];\n\t\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\t\tvar item = styles[i];\n\t\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\t\tdomStyle.refs--;\n\t\t\t\tmayRemove.push(domStyle);\n\t\t\t}\n\t\t\tif(newList) {\n\t\t\t\tvar newStyles = listToStyles(newList);\n\t\t\t\taddStylesToDom(newStyles, options);\n\t\t\t}\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\t\tvar domStyle = mayRemove[i];\n\t\t\t\tif(domStyle.refs === 0) {\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n\tfunction addStylesToDom(styles, options) {\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tif(domStyle) {\n\t\t\t\tdomStyle.refs++;\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t\t}\n\t\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar parts = [];\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t\t}\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction listToStyles(list) {\n\t\tvar styles = [];\n\t\tvar newStyles = {};\n\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i];\n\t\t\tvar id = item[0];\n\t\t\tvar css = item[1];\n\t\t\tvar media = item[2];\n\t\t\tvar sourceMap = item[3];\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\t\tif(!newStyles[id])\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\t\telse\n\t\t\t\tnewStyles[id].parts.push(part);\n\t\t}\n\t\treturn styles;\n\t}\n\n\tfunction insertStyleElement(options, styleElement) {\n\t\tvar styleTarget = getElement(options.insertInto)\n\t\tif (!styleTarget) {\n\t\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t\t}\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\t\tif (options.insertAt === \"top\") {\n\t\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t\t} else {\n\t\t\t\tstyleTarget.appendChild(styleElement);\n\t\t\t}\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t\t} else if (options.insertAt === \"bottom\") {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t} else {\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t\t}\n\t}\n\n\tfunction removeStyleElement(styleElement) {\n\t\tstyleElement.parentNode.removeChild(styleElement);\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\t\tif(idx >= 0) {\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t\t}\n\t}\n\n\tfunction createStyleElement(options) {\n\t\tvar styleElement = document.createElement(\"style\");\n\t\toptions.attrs.type = \"text/css\";\n\n\t\tattachTagAttrs(styleElement, options.attrs);\n\t\tinsertStyleElement(options, styleElement);\n\t\treturn styleElement;\n\t}\n\n\tfunction createLinkElement(options) {\n\t\tvar linkElement = document.createElement(\"link\");\n\t\toptions.attrs.type = \"text/css\";\n\t\toptions.attrs.rel = \"stylesheet\";\n\n\t\tattachTagAttrs(linkElement, options.attrs);\n\t\tinsertStyleElement(options, linkElement);\n\t\treturn linkElement;\n\t}\n\n\tfunction attachTagAttrs(element, attrs) {\n\t\tObject.keys(attrs).forEach(function (key) {\n\t\t\telement.setAttribute(key, attrs[key]);\n\t\t});\n\t}\n\n\tfunction addStyle(obj, options) {\n\t\tvar styleElement, update, remove;\n\n\t\tif (options.singleton) {\n\t\t\tvar styleIndex = singletonCounter++;\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t\t} else if(obj.sourceMap &&\n\t\t\ttypeof URL === \"function\" &&\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\t\ttypeof Blob === \"function\" &&\n\t\t\ttypeof btoa === \"function\") {\n\t\t\tstyleElement = createLinkElement(options);\n\t\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\t\tremove = function() {\n\t\t\t\tremoveStyleElement(styleElement);\n\t\t\t\tif(styleElement.href)\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t\t};\n\t\t} else {\n\t\t\tstyleElement = createStyleElement(options);\n\t\t\tupdate = applyToTag.bind(null, styleElement);\n\t\t\tremove = function() {\n\t\t\t\tremoveStyleElement(styleElement);\n\t\t\t};\n\t\t}\n\n\t\tupdate(obj);\n\n\t\treturn function updateStyle(newObj) {\n\t\t\tif(newObj) {\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\t\treturn;\n\t\t\t\tupdate(obj = newObj);\n\t\t\t} else {\n\t\t\t\tremove();\n\t\t\t}\n\t\t};\n\t}\n\n\tvar replaceText = (function () {\n\t\tvar textStore = [];\n\n\t\treturn function (index, replacement) {\n\t\t\ttextStore[index] = replacement;\n\t\t\treturn textStore.filter(Boolean).join('\\n');\n\t\t};\n\t})();\n\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\t\tvar css = remove ? \"\" : obj.css;\n\n\t\tif (styleElement.styleSheet) {\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t\t} else {\n\t\t\tvar cssNode = document.createTextNode(css);\n\t\t\tvar childNodes = styleElement.childNodes;\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\t\tif (childNodes.length) {\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t\t} else {\n\t\t\t\tstyleElement.appendChild(cssNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction applyToTag(styleElement, obj) {\n\t\tvar css = obj.css;\n\t\tvar media = obj.media;\n\n\t\tif(media) {\n\t\t\tstyleElement.setAttribute(\"media\", media)\n\t\t}\n\n\t\tif(styleElement.styleSheet) {\n\t\t\tstyleElement.styleSheet.cssText = css;\n\t\t} else {\n\t\t\twhile(styleElement.firstChild) {\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t\t}\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\n\t\t}\n\t}\n\n\tfunction updateLink(linkElement, options, obj) {\n\t\tvar css = obj.css;\n\t\tvar sourceMap = obj.sourceMap;\n\n\t\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t\t*/\n\t\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\t\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\t\tcss = fixUrls(css);\n\t\t}\n\n\t\tif(sourceMap) {\n\t\t\t// http://stackoverflow.com/a/26603875\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t\t}\n\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\t\tvar oldSrc = linkElement.href;\n\n\t\tlinkElement.href = URL.createObjectURL(blob);\n\n\t\tif(oldSrc)\n\t\t\tURL.revokeObjectURL(oldSrc);\n\t}\n\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\n\t\n\t/**\n\t * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n\t * embed the css on the page. This breaks all relative urls because now they are relative to a\n\t * bundle instead of the current page.\n\t *\n\t * One solution is to only use full urls, but that may be impossible.\n\t *\n\t * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n\t *\n\t * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n\t *\n\t */\n\n\tmodule.exports = function (css) {\n\t  // get current location\n\t  var location = typeof window !== \"undefined\" && window.location;\n\n\t  if (!location) {\n\t    throw new Error(\"fixUrls requires window.location\");\n\t  }\n\n\t\t// blank or null?\n\t\tif (!css || typeof css !== \"string\") {\n\t\t  return css;\n\t  }\n\n\t  var baseUrl = location.protocol + \"//\" + location.host;\n\t  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t\t// convert each url(...)\n\t\t/*\n\t\tThis regular expression is just a way to recursively match brackets within\n\t\ta string.\n\n\t\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t\t   (  = Start a capturing group\n\t\t     (?:  = Start a non-capturing group\n\t\t         [^)(]  = Match anything that isn't a parentheses\n\t\t         |  = OR\n\t\t         \\(  = Match a start parentheses\n\t\t             (?:  = Start another non-capturing groups\n\t\t                 [^)(]+  = Match anything that isn't a parentheses\n\t\t                 |  = OR\n\t\t                 \\(  = Match a start parentheses\n\t\t                     [^)(]*  = Match anything that isn't a parentheses\n\t\t                 \\)  = Match a end parentheses\n\t\t             )  = End Group\n\t              *\\) = Match anything and then a close parens\n\t          )  = Close non-capturing group\n\t          *  = Match anything\n\t       )  = Close capturing group\n\t\t \\)  = Match a close parens\n\n\t\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t\t */\n\t\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t\t// strip quotes (if they exist)\n\t\t\tvar unquotedOrigUrl = origUrl\n\t\t\t\t.trim()\n\t\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t\t// already a full url? no change\n\t\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t\t  return fullMatch;\n\t\t\t}\n\n\t\t\t// convert the url to a full url\n\t\t\tvar newUrl;\n\n\t\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t\t  \t//TODO: should we add protocol?\n\t\t\t\tnewUrl = unquotedOrigUrl;\n\t\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t\t// path should be relative to the base url\n\t\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t\t} else {\n\t\t\t\t// path should be relative to current directory\n\t\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t\t}\n\n\t\t\t// send back the fixed url(...)\n\t\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t\t});\n\n\t\t// send back the fixed css\n\t\treturn fixedCss;\n\t};\n\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\n\t// load the styles\n\tvar content = __webpack_require__(100);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(97)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(96)(false);\n\t// imports\n\n\n\t// module\n\texports.push([module.id, \".no-margin-top{margin-top:0!important}.no-margin-bottom{margin-bottom:0!important}.no-margin-right{margin-right:0!important}.no-margin-left{margin-left:0!important}.margin-right-30{margin-right:30px}.no-padding{padding:0!important}.green{color:green}\", \"\"]);\n\n\t// exports\n\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\n\t// load the styles\n\tvar content = __webpack_require__(102);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(97)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./angular-material-icons.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./angular-material-icons.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(96)(false);\n\t// imports\n\n\n\t// module\n\texports.push([module.id, \"/*!\\n * Angular Material Design\\n * https://github.com/angular/material\\n * @license MIT\\n * v0.9.7\\n */md-autocomplete button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0) scale(.9);transform:translate3d(-50%,-50%,0) scale(.9)}md-autocomplete button ng-md-icon path{stroke-width:0}.md-button.ng-md-icon{padding:0;background:none}.md-button.md-fab ng-md-icon{margin-top:0}md-checkbox .ng-md-icon{transition:.24s;position:absolute;top:0;left:0;width:18px;height:18px;border:2px solid;border-radius:2px}md-checkbox.md-checked .ng-md-icon{border:none}md-checkbox.md-checked .ng-md-icon:after{-webkit-transform:rotate(45deg);transform:rotate(45deg);position:absolute;left:6px;top:2px;display:table;width:6px;height:12px;border:2px solid;border-top:0;border-left:0;content:\\\"\\\"}.md-chips .md-chip .md-chip-remove ng-md-icon{height:18px;width:18px;position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}ng-md-icon{background-repeat:no-repeat;display:inline-block;vertical-align:middle;fill:currentColor;height:24px;width:24px}ng-md-icon svg{pointer-events:none;display:block}ng-md-icon[md-font-icon]{line-height:1;width:auto}md-input-container>ng-md-icon{position:absolute;top:5px;left:2px}md-input-container>ng-md-icon+input{margin-left:36px}md-input-container.md-icon-float>ng-md-icon{top:26px;left:2px}md-input-container.md-icon-float>ng-md-icon+input{margin-left:36px}@media screen and (-ms-high-contrast:active){md-input-container.md-default-theme>ng-md-icon{fill:#fff}}md-list-item .md-list-item-inner>div.md-primary>ng-md-icon,md-list-item .md-list-item-inner>div.md-secondary>ng-md-icon,md-list-item .md-list-item-inner>ng-md-icon.md-secondary,md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>div.md-primary>ng-md-icon,md-list-item>div.md-secondary>ng-md-icon,md-list-item>ng-md-icon.md-secondary,md-list-item>ng-md-icon:first-child{width:24px;margin-top:16px;margin-bottom:12px;box-sizing:content-box}md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>ng-md-icon:first-child{margin-right:32px}md-list-item.md-2-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-2-line>ng-md-icon:first-child{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}md-list-item.md-3-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-3-line>ng-md-icon:first-child{margin-top:16px}md-tabs-wrapper md-next-button ng-md-icon,md-tabs-wrapper md-prev-button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}md-tabs-wrapper md-next-button ng-md-icon{-webkit-transform:translate3d(-50%,-50%,0) rotate(180deg);transform:translate3d(-50%,-50%,0) rotate(180deg)}\", \"\"]);\n\n\t// exports\n\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = rest;\n\t// Use RxJS in a Service\n\n\t// What about in a situation where you have a Service that's holding state for example. How could I push changes to that Service, and other random components on the page be aware of such a change? Been struggling with tackling this problem lately\n\t// Build a service with RxJS Extensions for Angular.\n\n\t// <script src=\"//unpkg.com/angular/angular.js\"></script>\n\t// <script src=\"//unpkg.com/rx/dist/rx.all.js\"></script>\n\t// <script src=\"//unpkg.com/rx-angular/dist/rx.angular.js\"></script>\n\t// var app = angular.module('myApp', ['rx']);\n\n\t// app.factory(\"DataService\", function(rx) {\n\t//   var subject = new rx.Subject(); \n\t//   var data = \"Initial\";\n\n\t//   return {\n\t//       set: function set(d){\n\t//         data = d;\n\t//         subject.onNext(d);\n\t//       },\n\t//       get: function get() {\n\t//         return data;\n\t//       },\n\t//       subscribe: function (o) {\n\t//          return subject.subscribe(o);\n\t//       }\n\t//   };\n\t// });\n\t// Then simply subscribe to the changes.\n\n\t// app.controller('displayCtrl', function(DataService) {\n\t//   var $ctrl = this;\n\n\t//   $ctrl.data = DataService.get();\n\t//   var subscription = DataService.subscribe(function onNext(d) {\n\t//       $ctrl.data = d;\n\t//   });\n\n\t//   this.$onDestroy = function() {\n\t//       subscription.dispose();\n\t//   };\n\t// });\n\n\t/**\n\t * \n\t * \n\t * @class api\n\t * @memberOf abl-sdk-feathers.$abl\n\t * @hidden\n\t */\n\tfunction rest(app, $http) {\n\t    var that = {};\n\t    var Rx = window.Rx;\n\t    var moment = window.moment;\n\n\t    app.api = {};\n\t    /**\n\t     * @class activity\n\t     * @memberOf abl-sdk-feathers.$abl.api\n\t     * @hidden\n\t     */\n\t    app.api.activity = {\n\t        /**\n\t         * @function get\n\t         * @memberOf abl-sdk-feathers.$abl.api.activity\n\t         */\n\t        get: function get(query) {\n\t            return Rx.Observable.fromPromise(activityService.find(query || {})).catch(function (response) {\n\t                console.log('$abl.api.GET ERROR', response);\n\t                return Rx.Observable.empty();\n\t            }).select(function (response) {\n\t                return response.list;\n\t            });\n\t        },\n\t        /**\n\t         * @function find\n\t         * @memberOf abl-sdk-feathers.$abl.api.activity\n\t         */\n\t        find: function find(query) {\n\t            return Rx.Observable.fromPromise(activitySearchService.find(query || {})).catch(function (response) {\n\t                console.log('$abl.api.activity.FIND ERROR', response);\n\t                return Rx.Observable.empty();\n\t            }).select(function (response) {\n\t                return response;\n\t            });\n\t        }\n\n\t        /**\n\t         * @class timeslots\n\t         * @memberOf abl-sdk-feathers.$abl.api\n\t         * @hidden\n\t         */\n\t    };app.api.timeslots = {\n\t        /**\n\t         * @function getRange\n\t         * @memberOf abl-sdk-feathers.$abl.api.timeslots\n\t         */\n\t        getRange: function getRange(d) {\n\t            return Rx.Observable.fromPromise($http({\n\t                method: 'GET',\n\t                url: app.endpoint + '/timeslots?',\n\t                data: d,\n\t                headers: app.headers\n\t            })).catch(function (response) {\n\t                console.log('$abl.api.timeslots.GETRANGE ERROR', response);\n\t                return Rx.Observable.empty();\n\t            }).select(function (response) {\n\t                console.log('$abl.api.timeslots.GETRANGE SUCCESS', response);\n\t                return response.data.list;\n\t            });\n\t        },\n\t        /**\n\t         * @function get\n\t         * @memberOf abl-sdk-feathers.$abl.api.timeslots\n\t         */\n\t        get: function get(id) {\n\t            return Rx.Observable.fromPromise($http({\n\t                method: 'GET',\n\t                url: app.endpoint + '/timeslots?id=' + id,\n\t                headers: app.headers\n\n\t            })).catch(function (response) {\n\t                console.log('$abl.api.timeslots.GET ERROR', response);\n\t                return Rx.Observable.empty();\n\t            }).select(function (response) {\n\t                console.log('$abl.api.timeslots.GET SUCCESS', response);\n\t                return response;\n\t            });\n\t        }\n\n\t        //Feathers REST endpoints\n\t    };var activityService = app.service('activities');\n\t    var eventService = app.service('events');\n\t    var timeslotService = app.service('timeslots');\n\n\t    var activitySearchService = app.service('search');\n\n\t    // activitySearchService.find({\n\t    //     query: {\n\t    //         \"sort\": \"-updatedAt\"\n\t    //     }\n\t    // });\n\n\t    app.activitySearchInterval = function (t) {\n\t        return setInterval(function () {\n\t            activitySearchService.find({\n\t                query: {\n\t                    \"sort\": \"-updatedAt\"\n\t                }\n\t            });\n\t        }, t);\n\t    };\n\n\t    //Feathers localstorage cache service\n\t    /**\n\t     * @class cache\n\t     * @memberOf abl-sdk-feathers.$abl\n\t     * @description localstorage cache wrapped in a Feathers.js service.\n\t     * @example   <caption>Open or Create</caption>      \n\t     * $abl.cache.get('activities').then(function (res) {\n\t     *   console.log(res);\n\t     *}).catch(res => {\n\t     *    $abl.cache.create({\n\t     *       id: 'activities',\n\t     *      data: {},\n\t     *      map: []\n\t     *  });\n\t     *});\n\t     * @hidden\n\t     */\n\t    var cache = app.service('cache');\n\t    var max = 500;\n\t    var cacheQuery = {\n\t        page: 0,\n\t        pageSize: 20,\n\t        total: 0,\n\t        \"sort\": \"-updatedAt\"\n\t    };\n\n\t    cache.get('activities').then(function (res) {\n\t        console.log(res);\n\t    }).catch(function (res) {\n\t        cache.create({\n\t            id: 'activities',\n\t            data: {},\n\t            map: []\n\t        });\n\t    });\n\n\t    var updateCache = function updateCache(store) {\n\t        // always wrap in a function so you can pass options and for consistency.\n\t        return function (hook) {\n\t            var modified = false;\n\n\t            cache.get('activities').then(function (activities) {\n\t                activities.updated = [];\n\n\t                var acs = Rx.Observable.fromArray(hook.result.data);\n\t                acs.map(function (res) {\n\t                    return res;\n\t                }).filter(function (res) {\n\t                    return activities.data[res._id] == undefined;\n\t                }).subscribe(function (x) {\n\t                    modified = true;\n\t                    activities.data[x._id] = x;\n\t                    activities.map.push(x._id);\n\t                    activities.updated.push(x._id);\n\t                    // console.log('creating activity', x);\n\t                }, function (err) {\n\t                    return Promise.resolve(hook); // A good convention is to always return a promise.\n\t                }, function () {\n\t                    if (modified) {\n\t                        console.log('updateCache', store, activities);\n\t                        if (activities.map.length > max) {\n\t                            for (var i = 0; i < activities.map.length - max; i++) {\n\t                                delete activities.data[activities.map[i]];\n\t                                console.log('deleting activity', activities.data[activities.map[0]]);\n\t                            }\n\t                            // activities.map.fill('', 0, activities.map.length - max);\n\t                        }\n\t                        activities.total = hook.result.total;\n\t                        cache.update('activities', activities).then(function () {\n\t                            console.log('updateCache', store, hook);\n\n\t                            return Promise.resolve(hook); // A good convention is to always return a promise.\n\t                        });\n\t                    }\n\t                });\n\t            });\n\t        };\n\t    };\n\n\t    function getObjectIndex(id, arr) {\n\t        for (var i = 0; i < arr.length - 1; i++) {\n\t            if (arr[i].id == id) return i;\n\t        }\n\t        return -1;\n\t    }\n\n\t    // Set up our after hook to cache new data\n\t    activitySearchService.after({\n\t        all: [], // run hooks for all service methods\n\t        find: [updateCache()] // run hook after a find. You can chain multiple hooks.\n\t    });\n\n\t    app.cache = cache;\n\t    return app;\n\t}\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = toUppercase;\n\t/**\n\t * @function toUppercase\n\t * @memberOf abl-sdk-feathers.directives\n\t * @description Transforms input text to all uppercase characters.\n\t * @example   <input type=\"text\" ng-model=\"name\" to-uppercase>\n\t */\n\tfunction toUppercase() {\n\t    return {\n\t        require: 'ngModel',\n\t        link: function link(scope, element, attrs, modelCtrl) {\n\t            var capitalize = function capitalize(inputValue) {\n\t                if (inputValue == undefined) inputValue = '';\n\t                var capitalized = inputValue.toUpperCase();\n\t                if (capitalized !== inputValue) {\n\t                    modelCtrl.$setViewValue(capitalized);\n\t                    modelCtrl.$render();\n\t                }\n\t                return capitalized;\n\t            };\n\n\t            modelCtrl.$parsers.push(capitalize);\n\t            capitalize(scope[attrs.ngModel]); // capitalize initial value\n\t        }\n\t    };\n\t}\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = formatPhone;\n\t/**\n\t * @class abl-sdk-feathers.directives\n\t * @hidden\n\t */\n\n\t/**\n\t * @function formatPhone\n\t * @memberOf abl-sdk-feathers.directives\n\t * @description Formats a phone number nicely.\n\t * @example <input type=\"text\" id=\"phonenumber\" ng-model=\"phonenumber\" format-phone>\n\t */\n\tfunction formatPhone() {\n\t    return {\n\t        require: 'ngModel',\n\t        restrict: 'A',\n\t        link: function link(scope, elem, attrs, ctrl, ngModel) {\n\t            elem.add(phonenumber).on('keyup', function () {\n\t                var origVal = elem.val().replace(/[^\\w\\s]/gi, '');\n\t                if (origVal.length === 10) {\n\t                    var str = origVal.replace(/(.{3})/g, \"$1-\");\n\t                    var phone = str.slice(0, -2) + str.slice(-1);\n\t                    jQuery(\"#phonenumber\").val(phone);\n\t                }\n\t            });\n\t            console.log('format-phone', scope);\n\t        }\n\t    };\n\t}\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = focusParent;\n\t/**\n\t * @function toUppercase\n\t * @memberOf abl-sdk-feathers.directives\n\t * @description Transforms input text to all uppercase characters.\n\t * @example   <input type=\"text\" ng-model=\"name\" to-uppercase>\n\t */\n\tfunction focusParent() {\n\t    return {\n\t        require: 'ngModel',\n\t        link: function link(scope, element, attrs, modelCtrl) {\n\t            console.log(element);\n\t            console.log(attrs);\n\n\t            var elem = $(element[0].parentElement);\n\t            element.on('focus', function () {\n\t                console.log(elem);\n\t                elem.addClass(attrs.onFocus);\n\t            });\n\n\t            element.on('blur', function () {\n\t                elem.removeClass(attrs.onFocus);\n\t            });\n\t            //modelCtrl.$parsers.push(capitalize);\n\t            //capitalize(scope[attrs.ngModel]); // capitalize initial value\n\t        }\n\t    };\n\t}\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = size;\n\tfunction size() {\n\t    return {\n\t        link: function link(scope, element, attrs, modelCtrl) {\n\t            console.log(element);\n\t            console.log(attrs);\n\n\t            if (attrs.size) {\n\t                var elem = $(element[0].children[0]);\n\t                elem.addClass(attrs.size);\n\t            }\n\t        }\n\t    };\n\t}\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = navigatorService;\n\t/**\n\t * @class abl-sdk-feathers.services\n\t * @hidden\n\t */\n\n\tnavigatorService.$inject = [\"$window\", \"$q\"];\n\t/**\n\t * @function navigatorService\n\t * @memberOf abl-sdk-feathers.services\n\t * @description Requests the user's geographic coordinates using the {@link https://developer.mozilla.org/en/docs/Web/API/Navigator | Navigator Web API}.\n\t * @example    navigatorService.getCurrentPosition().then(function(position) {\n\t *     console.log(position);\n\t *   }).catch(function(e) {\n\t * });\n\t * @tutorial navigator\n\t * @returns {Promise} A Promise object from the {@link https://developer.mozilla.org/en/docs/Web/API/Navigator | Navigator Web API}.\n\t */\n\tfunction navigatorService($window, $q) {\n\n\t    function getCurrentPosition() {\n\t        var deferred = $q.defer();\n\n\t        if (!$window.navigator.geolocation) {\n\t            deferred.reject('Geolocation not supported.');\n\t        } else {\n\t            $window.navigator.geolocation.getCurrentPosition(function (position) {\n\t                deferred.resolve(position);\n\t            }, function (err) {\n\t                deferred.reject();\n\t            });\n\t        }\n\n\t        return deferred.promise;\n\t    }\n\n\t    return {\n\t        getCurrentPosition: getCurrentPosition\n\t    };\n\t}\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _column = __webpack_require__(110);\n\n\tvar _column2 = _interopRequireDefault(_column);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar col = {\n\t    bindings: {\n\t        pos: '@',\n\t        size: '@'\n\t    },\n\t    controller: function controller($element, $scope) {\n\t        this.$onInit = function () {\n\t            //  console.log('col', this);\n\t            if (!this.pos) this.position = 'start center';\n\t            if (this.pos == 'right') this.position = 'end center';else this.position = this.pos;\n\t        };\n\n\t        this.$onChanges = function (changesObj) {};\n\t        this.$postLink = function () {};\n\t    },\n\t    template: _column2.default,\n\t    transclude: true,\n\t    controllerAs: 'vm'\n\t};\n\n\texports.default = col;\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div layout=row layout-align={{vm.position}} ng-transclude flex></div>\";\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _progressButton = __webpack_require__(112);\n\n\tvar _progressButton2 = _interopRequireDefault(_progressButton);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar progressButton = {\n\t    bindings: {\n\t        loading: '<',\n\t        class: '@',\n\t        ngDisabled: '<',\n\t        spinner: '<',\n\t        stroke: '@',\n\t        fill: '@',\n\t        label: '@',\n\t        onClick: '&'\n\t    },\n\t    controller: function controller($element, $scope, $log) {\n\t        var _this = this;\n\n\t        this.$onInit = function () {\n\t            $log.debug('progressButton', this);\n\t            if (this.loading) $log.debug('progressButton:loading', this.loading);\n\n\t            $log.debug('progressButton disabled', this.ngDisabled);\n\t        };\n\n\t        this.$onChanges = function (changesObj) {\n\t            $log.debug('progressButton changes ', changesObj);\n\t            _this.disabled = _this.ngDisabled;\n\t        };\n\n\t        this.$postLink = function () {};\n\t    },\n\t    template: _progressButton2.default,\n\t    transclude: true,\n\t    controllerAs: 'vm'\n\t};\n\n\texports.default = progressButton;\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<md-button layout=row layout-align=\\\"center center\\\" class={{vm.class}} ng-disabled=\\\"vm.loading || vm.disabled\\\" ng-click=vm.onClick()> <div layout=row layout-align=\\\"center center\\\"> <svg ng-show=\\\"vm.loading && vm.spinner == 1\\\" version=1.1 id=loader-1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=24px viewBox=\\\"0 0 50 50\\\" style=\\\"enable-background:new 0 0 50 50\\\" xml:space=preserve> <path fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" d=M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z> <animateTransform attributeType=xml attributeName=transform type=rotate from=\\\"0 25 25\\\" to=\\\"360 25 25\\\" dur=0.6s repeatCount=indefinite /> </path> </svg> <svg ng-show=\\\"vm.loading && vm.spinner == 2\\\" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox=\\\"0 0 24 30\\\" style=\\\"enable-background:new 0 0 50 50\\\" xml:space=preserve> <rect x=0 y=0 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\"> <animateTransform attributeType=xml attributeName=transform type=translate values=\\\"0 0; 0 20; 0 0\\\" begin=0 dur=0.6s repeatCount=indefinite /> </rect> <rect x=10 y=0 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\"> <animateTransform attributeType=xml attributeName=transform type=translate values=\\\"0 0; 0 20; 0 0\\\" begin=0.2s dur=0.6s repeatCount=indefinite /> </rect> <rect x=20 y=0 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\"> <animateTransform attributeType=xml attributeName=transform type=translate values=\\\"0 0; 0 20; 0 0\\\" begin=0.4s dur=0.6s repeatCount=indefinite /> </rect> </svg> <svg ng-show=\\\"vm.loading && vm.spinner == 3\\\" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox=\\\"0 0 24 30\\\" style=\\\"enable-background:new 0 0 50 50\\\" xml:space=preserve> <rect x=0 y=10 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=0.2> <animate attributeName=opacity attributeType=XML values=\\\"0.2; 1; .2\\\" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values=\\\"10; 20; 10\\\" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values=\\\"10; 5; 10\\\" begin=0s dur=0.6s repeatCount=indefinite /> </rect> <rect x=8 y=10 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=0.2> <animate attributeName=opacity attributeType=XML values=\\\"0.2; 1; .2\\\" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values=\\\"10; 20; 10\\\" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values=\\\"10; 5; 10\\\" begin=0.15s dur=0.6s repeatCount=indefinite /> </rect> <rect x=16 y=10 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=0.2> <animate attributeName=opacity attributeType=XML values=\\\"0.2; 1; .2\\\" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values=\\\"10; 20; 10\\\" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values=\\\"10; 5; 10\\\" begin=0.3s dur=0.6s repeatCount=indefinite /> </rect> </svg> </div> <span ng-show=!vm.loading>{{vm.label}}</span> </md-button>\";\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\n\t// load the styles\n\tvar content = __webpack_require__(114);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(97)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(96)(false);\n\t// imports\n\n\n\t// module\n\texports.push([module.id, \"progress-button{outline:none;margin:0!important}progress-button,progress-button md-button{pointer-events:auto}\", \"\"]);\n\n\t// exports\n\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _listItem = __webpack_require__(116);\n\n\tvar _listItem2 = _interopRequireDefault(_listItem);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar listItem = {\n\t    bindings: {\n\t        size: '@'\n\t    },\n\t    controller: function controller($element, $scope) {\n\t        this.$onInit = function () {};\n\n\t        this.$onChanges = function (changesObj) {};\n\t        this.$postLink = function () {};\n\t    },\n\t    template: _listItem2.default,\n\t    transclude: true,\n\t    controllerAs: 'vm'\n\t};\n\n\texports.default = listItem;\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div layout=row class=listItem ng-class=[vm.size] flex=100 ng-transclude> </div>\";\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _listItemNumericControl = __webpack_require__(118);\n\n\tvar _listItemNumericControl2 = _interopRequireDefault(_listItemNumericControl);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t// import controller from './goatListItem.controller'; import\n\t// './goatListItem.scss';\n\t/**\n\t * @function li-NumberControl\n\t * @memberOf abl-sdk-feathers.components\n\t * @description List item control with +/- buttons and input to modify the value.\n\t * @example  <list-item-numeric-control label=\"Attendee\" value=\"numValue\" min=\"1\" max=\"5\"></list-item-numeric-control>\n\t */\n\tvar listItemNumericControl = {\n\t    restrict: 'E',\n\t    bindings: {\n\t        value: '=',\n\t        label: '@',\n\t        price: '@',\n\t        max: '@',\n\t        min: '@ ',\n\t        size: '@'\n\t    },\n\t    template: _listItemNumericControl2.default,\n\t    controller: function controller($element) {\n\t        var _this = this;\n\n\t        this.min = 0;\n\n\t        this.$onInit = function () {\n\t            this.elem = $($element[0].children[0]);\n\t            if (!this.value) this.value = 0;\n\t        };\n\n\t        this.$onChanges = function (changesObj) {};\n\t        this.$postLink = function () {};\n\n\t        this.increment = function () {\n\t            if (this.max == undefined || this.max > this.value) this.value++;\n\t            // console.log('increment');\n\t        };\n\n\t        this.decrement = function () {\n\t            if (this.value > this.min) this.value--;\n\t            console.log('decrementer');\n\t        };\n\n\t        this.checkAdjustValue = function () {\n\t            if (_this.value > _this.max) {\n\t                _this.value = _this.max;\n\t            }\n\t            if (_this.value < _this.min) _this.value = _this.min;\n\t        };\n\t    },\n\t    controllerAs: 'vm'\n\t};\n\n\texports.default = listItemNumericControl;\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div layout=row class=listItem ng-class=[vm.size] flex=100> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{vm.label}}</span> <div layout=row> <span class=lineItemSubDetail>{{vm.price | ablCurrency: $root.currency}}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column class=addOnAdjusters layout-align=\\\"center end\\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub md-colors=\\\"{'fill': 'primary-A200'}\\\" ng-click=vm.increment();> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline\\\" class=listIconSub ng-click=vm.decrement();></ng-md-icon> </div> <div layout=column layout-align=\\\"end end\\\"> <input class=addOnQuantityText ng-model=vm.value ng-change=vm.checkAdjustValue(); type=number md-select-on-focus> </div> </div> </div>\";\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _listItemAddCharge = __webpack_require__(120);\n\n\tvar _listItemAddCharge2 = _interopRequireDefault(_listItemAddCharge);\n\n\t__webpack_require__(121);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t/**\n\t * @class abl-sdk-feathers.components\n\t * @hidden\n\t */\n\n\t/**\n\t * @function li-AddCharge\n\t * @memberOf abl-sdk-feathers.components\n\t * @description List item to enter a new charge with value.\n\t * @example  <list-item-add-charge group=\"vm.charges\"></list-item-add-charge>\n\t */\n\tvar listItemAddCharge = {\n\t    bindings: {\n\t        add: '<',\n\t        group: '=',\n\t        buttonClass: '@'\n\t    },\n\t    template: _listItemAddCharge2.default,\n\t    controller: function controller($scope) {\n\t        this.price = 0;\n\t        this.$onInit = function () {};\n\n\t        this.$onChanges = function (changesObj) {};\n\t        this.$postLink = function () {};\n\t    },\n\t    controllerAs: 'vm'\n\t};\n\t// import controller from './goatListItem.controller';  \n\texports.default = listItemAddCharge;\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<md-list-item class=addOnListItem> <div layout=row layout-align=\\\"start center\\\" flex> <md-input-container class=\\\"buttonInlineInput full-width\\\"> <label>Name</label> <input class=buttonInlineInput ng-model=vm.label> </md-input-container> </div> <div layout=row layout-align=\\\"end center\\\" flex=20> <md-input-container class=\\\"buttonInlineInput full-width\\\"> <label>Price</label> <input class=\\\"full-width buttonInlineInput\\\" md-select-on-focus ng-model=vm.price type=number min=0 step=0.01> </md-input-container> </div> <div layout=row> <md-button ng-disabled=\\\"!vm.label || !vm.price\\\" ng-class=\\\"[vm.buttonClass.length > 0 ? vm.buttonClass : 'md-raised']\\\" ng-click=\\\"vm.add(vm.label, vm.price)\\\"> Add </md-button> </div> </md-list-item>\";\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\n\t// load the styles\n\tvar content = __webpack_require__(122);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(97)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./listItem.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./listItem.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(96)(false);\n\t// imports\n\n\n\t// module\n\texports.push([module.id, \".full-width{width:100%}.text-align-left{text-align:left!important}col-section{width:100%}md-checkbox.listItemCheckbox .md-label{margin-top:26px;margin-left:38px}list-item,list-item-header,list-item-numeric-control{display:block;width:100%}.listItem{height:72px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItemHeader .listItem{height:40px}.listItem md-checkbox .md-container{height:4px}.listItem.md{min-height:56px;height:56px;line-height:56px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.lg.slideDown.ng-hide{height:0!important}.lg.slideDown,.lg.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.lg.slideDown{height:72px;line-height:72px}.lg.slideDown.ng-hide-add,.lg.slideDown.ng-hide-remove{display:block!important}.lg.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.lg.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.listItem.sm{height:36px;line-height:36px;min-height:36px;padding:0 16px;font-size:12px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItem md-autocomplete input:not(.md-input){height:100%!important;line-height:100%!important;padding:0}.listItem md-autocomplete md-autocomplete-wrap{box-shadow:none!important;height:100%!important}.listItem md-autocomplete{padding:0!important}.listItemAutoCompleteAfterContainer{margin-top:-20px!important}.listItemFocus{box-shadow:0 1px 0 rgba(255,152,0,.4),0 -1px 0 rgba(255,152,0,.4),inset 0 1px 4px rgba(255,152,0,.2),inset 0 -1px 4px rgba(255,152,0,.2)!important;background:#fff}input.buttonInlineInput{padding:0;border-width:0;-ms-flex-preferred-size:36px;font-size:inherit;width:100%;border:none;outline:none;box-sizing:border-box;float:left;background:transparent}.inputStatusIcon{height:24px;width:36px;margin-right:4px!important}.listItemGreyFocus{box-shadow:0 1px 0 rgba(0,0,0,.28),0 -1px 0 rgba(0,0,0,.28),inset 0 1px 4px rgba(0,0,0,.16),inset 1px -1px 4px rgba(0,0,0,.2)!important}.listItemGreyFocus input,textarea{color:#3f51b5}.listItemGreyFocus ng-md-icon.listItemHeaderIcon{fill:#3f51b5}.listItemFocusBottomBorder{box-shadow:0 2px 0 rgba(58,171,56,.92),inset 0 -1px 3px rgba(57,73,171,.2),inset 0 1px rgba(0,0,0,.1)!important}.listItemFocusBottomBorder input,textarea{color:#000}md-input-container.buttonInlineInput{display:inline-block;position:relative;height:36px;padding:5px;margin:0;vertical-align:middle}.listItemPadding{padding:0 16px}.listItem.listItemHeader{font-size:16px;margin:auto;line-height:72px;font-weight:500;cursor:unset;color:#fff}.listItem.listItemHeader.light{color:#000;background:#fff}.listItem.listItemHeader.dark{color:#fff;background:#424242}.listItemHeaderBottomBorder{box-shadow:0 1px 2px rgba(0,0,0,.16),0 0 1px rgba(0,0,0,.3)}.listItem .strong{font-weight:600}.listItem.sm.listItemHeader{font-size:12px;margin:0;font-weight:500;cursor:unset;line-height:36px}.listItem.md.listItemHeader{font-size:16px;margin:0;font-weight:500;cursor:unset;line-height:54px}.leftIcon{margin-right:16px}ng-md-icon.listItemHeaderIcon{height:20px;width:20px}ng-md-icon.listItemHeaderIcon.lg,ng-md-icon.listItemHeaderIcon.lg svg,ng-md-icon.listItemHeaderIcon.md,ng-md-icon.listItemHeaderIcon.md svg{margin:auto 0}ng-md-icon.listItemHeaderIcon.sm,ng-md-icon.listItemHeaderIcon.sm svg{margin:auto 8px auto 0;height:16px;width:16px}.lineItemSubHeader{font-size:14px;font-weight:400;padding:0 16px 0 0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.92)!important}.autocomplete-custom-template li{border-bottom:1px solid #ccc;height:auto;padding-top:8px;padding-bottom:8px;white-space:normal}.autocomplete-custom-template li:last-child{border-bottom-width:0}.autocomplete-custom-template .item-title{font-weight:600}.autocomplete-custom-template .item-metadata,.autocomplete-custom-template .item-title{display:block;line-height:2}.autocomplete-custom-template .item-title md-icon{height:18px;width:18px}\", \"\"]);\n\n\t// exports\n\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _listItemHeader = __webpack_require__(124);\n\n\tvar _listItemHeader2 = _interopRequireDefault(_listItemHeader);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t// import controller from './goatListItem.controller';\n\n\tvar listItemHeader = {\n\t    bindings: {\n\t        action: '@',\n\t        actionClick: '=',\n\t        expanded: '=',\n\t        title: '@',\n\t        icon: '@',\n\t        size: '@'\n\t    },\n\t    template: _listItemHeader2.default,\n\t    controller: function controller() {\n\n\t        this.$onInit = function () {\n\t            if (!this.expanded) this.expanded = false;\n\t        };\n\n\t        this.$onChanges = function (changesObj) {};\n\t        this.$postLink = function () {};\n\n\t        this.click = function () {\n\t            console.log('click function');\n\t            if (this.action == 'expandable') {\n\t                this.expanded = !this.expanded;\n\t            }\n\t        };\n\t    },\n\t    controllerAs: 'vm'\n\t};\n\n\texports.default = listItemHeader;\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"listItem listItemHeader\\\" ng-class=[vm.size] ng-disabled=!vm.action ng-click=vm.click()> <div layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=80> <ng-md-icon ng-if=vm.icon icon={{vm.icon}} class=\\\"headerIcon listIcon\\\"></ng-md-icon> <div class=listItemHeaderText>{{vm.title}}</div> </div> <div layout=row layout-align=\\\"end center\\\" flex=20> <div layout=column layout-align=\\\"center end\\\" ng-if=\\\"vm.action == 'expandable'\\\" flex> <ng-md-icon icon=\\\"{{vm.expanded ? 'expand_less' : 'expand_more'}}\\\" options='{\\\"duration\\\": 500, \\\"rotation\\\": \\\"clock\\\", \\\"easing\\\":\\\"linear\\\"}' class=listItemHeaderIcon></ng-md-icon> </div> </div> </div> </div> \";\n\n/***/ }),\n/* 125 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\t__webpack_require__(126);\n\n\tvar _activityTotal = __webpack_require__(128);\n\n\tvar _activityTotal2 = _interopRequireDefault(_activityTotal);\n\n\tvar _activityForms = __webpack_require__(129);\n\n\tvar _activityForms2 = _interopRequireDefault(_activityForms);\n\n\tvar _activityBook = __webpack_require__(130);\n\n\tvar _activityBook2 = _interopRequireDefault(_activityBook);\n\n\tvar _dashboard = __webpack_require__(131);\n\n\tvar _dashboard2 = _interopRequireDefault(_dashboard);\n\n\tvar _noDashboard = __webpack_require__(132);\n\n\tvar _noDashboard2 = _interopRequireDefault(_noDashboard);\n\n\tvar _activityBookValidators = __webpack_require__(133);\n\n\tvar _activityBookValidators2 = _interopRequireDefault(_activityBookValidators);\n\n\tvar _activityAdjustmentControlsComponent = __webpack_require__(134);\n\n\tvar _activityAdjustmentControlsComponent2 = _interopRequireDefault(_activityAdjustmentControlsComponent);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t/**\n\t * @namespace activity-book\n\t */\n\texports.default = angular.module('activity-book', ['ngMaterial', 'rx']).run([\"$templateCache\", function ($templateCache) {\n\t    $templateCache.put('activity-forms.html', _activityForms2.default);\n\t    $templateCache.put('activity-book.html', _activityBook2.default);\n\t    $templateCache.put('activity-total.html', _activityTotal2.default);\n\t    $templateCache.put('dashboard.html', _dashboard2.default);\n\t    $templateCache.put('no-dashboard.html', _noDashboard2.default);\n\t}]).factory('httpInterceptor', ['$q', '$rootScope', function ($q, $rootScope) {\n\t    var loadingCount = 0;\n\t    return {\n\t        request: function request(config) {\n\t            if (++loadingCount === 1) $rootScope.$broadcast('loading:progress', { request: config });\n\t            return config || $q.when(config);\n\t        },\n\t        response: function response(_response) {\n\t            if (--loadingCount === 0) $rootScope.$broadcast('loading:finish', { response: _response });\n\t            return _response || $q.when(_response);\n\t        },\n\t        responseError: function responseError(response) {\n\t            if (--loadingCount === 0) $rootScope.$broadcast('loading:finish', { response: response });\n\t            return $q.reject(response);\n\t        }\n\t    };\n\t}]).config(['$httpProvider', function ($httpProvider) {\n\t    $httpProvider.interceptors.push('httpInterceptor');\n\t}]).controller('activityAdjustmentController', _activityAdjustmentControlsComponent2.default).directive('ablActivityBook', ['$rootScope', '$sce', '$compile', '$mdMedia', '$mdDialog', '$mdToast', '$log', '$window', '$timeout', '$http', 'rx', 'observeOnScope', '$stateParams', '$state', '$filter', function ($rootScope, $sce, $compile, $mdMedia, $mdDialog, $mdToast, $log, $window, $timeout, $http, rx, observeOnScope, $stateParams, $state, $filter) {\n\t    return {\n\t        restrict: 'E',\n\t        scope: {\n\t            book: '=',\n\t            activity: '=',\n\t            app: '='\n\t        },\n\t        template: _activityBook2.default,\n\t        link: function link($scope, element, attrs) {\n\t            // Digest on resize to recalculate $mdMedia window size\n\t            function onResize() {\n\t                $scope.$digest();\n\t            };\n\t            angular.element($window).on('resize', onResize);\n\t        },\n\t        controllerAs: 'vm',\n\t        controller: [\"$scope\", \"$element\", \"$attrs\", function controller($scope, $element, $attrs) {\n\t            var vm = this;\n\t            vm.theme = $rootScope.theme;\n\t            this.formWasBlocked = false;\n\t            this.guestDetailsExpanded = true;\n\t            this.attendeesExpanded = false;\n\t            this.addonsExpanded = false;\n\t            this.questionsExpanded = false;\n\t            this.stripePaymentExpanded = false;\n\t            this.stripeCardIsValid = false;\n\t            this.paymentExpanded = false;\n\t            this.showPaymentForm = false;\n\t            this.answerAllQuestionsChecked = false;\n\t            this.paymentFormIsLoading = false;\n\t            this.paymentWasSent = false;\n\t            this.waitingForResponse = false;\n\t            this.validStepsForPayment = {\n\t                'guest': false,\n\t                'attendees': false\n\t            };\n\n\t            this.couponStatus = 'untouched';\n\t            this.appliedCoupon = {};\n\t            this.couponQuery = '';\n\t            this.occupancyRemaining = 0;\n\n\t            this.agentCodeStatus = 'untouched';\n\t            this.appliedAgentCode = {};\n\t            this.agentCodeQuery = '';\n\n\t            this.attendeeSubtotals = [];\n\t            this.addonSubtotals = [];\n\n\t            vm.taxes = [];\n\t            vm.taxTotal = 0;\n\t            vm.addons = [];\n\t            vm.questions = [];\n\t            vm.goToPay = goToPay;\n\t            vm.submitNonCreditCardBooking = submitNonCreditCardBooking;\n\t            vm.isFinishButtonValid = false;\n\n\t            $scope.sendConfirmationEmail = true;\n\n\t            // Environment is configured differently across apps so get config from the\n\t            // $rootScope for now\n\t            var config = $rootScope.config;\n\t            var headers = {};\n\n\t            //Activity dash needs no headers\n\t            if (!config.DASHBOARD) {\n\t                if (config.MARKETPLACE) {\n\t                    //this is for apps that set the ACCESS_KEY as .env var instead of url param\n\t                    headers = {\n\t                        'x-abl-access-key': config.ABL_ACCESS_KEY,\n\t                        'x-abl-date': Date.parse(new Date().toISOString()),\n\t                        \"Content-Type\": \"application/json;charset=utf-8\"\n\t                    };\n\t                } else {\n\t                    headers = {\n\t                        'x-abl-access-key': $stateParams.merchant || 'tLVVsHUlBAweKP2ZOofhRBCFFP54hX9CfmQ9EsDlyLfN6DYHY5k8VzpuiUxjNO5L', //$stateParams.merchant || config.ABL_ACCESS_KEY,\n\t                        'x-abl-date': Date.parse(new Date().toISOString()),\n\t                        \"Content-Type\": \"application/json;charset=utf-8\"\n\t                    };\n\t                }\n\t                //Require booking questions on consumer facing apps\n\t                vm.validStepsForPayment['bookingQuestions'] = false;\n\t            } else {\n\t                $scope.dashboard = true;\n\t            }\n\n\t            $log.debug('abl-activity-book $scope', $scope);\n\n\t            vm.currency = $rootScope.currency;\n\t            vm.eventDate = $rootScope.eventDate;\n\t            vm.activityImage = $rootScope.activityImage || null;\n\t            vm.activityLocation = $rootScope.activityLocation || null;\n\t            vm.eventTime = $rootScope.eventTime;\n\n\t            $scope.$watch(function () {\n\t                return $rootScope.currency;\n\t            }, function (n, o) {\n\t                if (n) {\n\t                    $log.debug('$scope.$watch:$rootScope.currency', n);\n\t                    vm.currency = n.toLowerCase();\n\t                }\n\t            });\n\n\t            $scope.$on('currency-updated', function (event, args) {\n\t                $log.debug('ablActivityBook:currency-updated', args);\n\t                vm.getPricingQuote(args.currency);\n\t            });\n\n\t            if (Raven) {\n\t                Raven.captureMessage('Add Booking', {\n\t                    level: 'info', // one of 'info', 'warning', or 'error'\n\t                    tags: {\n\t                        step: 'opened'\n\t                    }\n\t                });\n\t            }\n\t            $scope.formatDate = function (date, format) {\n\t                return window.moment(date).format(format);\n\t            };\n\t            $scope.paymentResponse = '';\n\t            $scope.paymentSuccessful = false;\n\n\t            this.goToNextStep = function (currentStepName, form) {\n\t                switch (currentStepName) {\n\t                    case 'guestDetailsStep':\n\t                        //goes to attendees\n\t                        vm.toggleGuestDetails();\n\t                        vm.toggleAttendees();\n\t                        break;\n\t                    case 'attendeesStep':\n\t                        //goes to addons || booking || pay\n\t                        //$log.debug('goToNextStep:attendeesStep', vm.attendeesAdded);\n\t                        if (vm.countAttendeesAdded() > 0) {\n\t                            //validate attendees\n\t                            //$log.debug('attendeesStep', vm.addons.length, vm.questions);\n\t                            if (vm.addons.length > 0) {\n\t                                vm.attendeesExpanded = false; //close current\n\t                                vm.addonsExpanded = true; //close current\n\t                            } else if (vm.questions.length > 0) {\n\t                                vm.attendeesExpanded = false; //close current\n\t                                vm.questionsExpanded = true;\n\t                            } else {\n\t                                vm.attendeesExpanded = false; //close current\n\t                                vm.stripePaymentExpanded = true;\n\t                                if (!$scope.dashboard) {\n\t                                    $log.debug('no questions, goToPay');\n\t                                    vm.goToNextStep('paymentStep');\n\t                                }\n\t                            }\n\t                        }\n\t                        break;\n\t                    case 'addonsStep':\n\t                        //goes to addons || booking || pay\n\t                        if (vm.addons && vm.addons.length > 0) {\n\t                            //validate addons\n\t                            if (vm.countAttendeesAdded()) {\n\t                                //if guests and attendees are valid\n\t                                if (vm.questions.length > 0) {\n\t                                    //go to questions if questions exist\n\t                                    vm.addonsExpanded = false;\n\t                                    vm.questionsExpanded = true;\n\t                                } else {\n\t                                    //got to pay if qustions doesn't exist\n\t                                    vm.addonsExpanded = false;\n\t                                    vm.stripePaymentExpanded = true;\n\t                                    if (!$scope.dashboard) {\n\t                                        $log.debug('no questions, goToPay');\n\t                                        vm.goToNextStep('paymentStep');\n\t                                    }\n\t                                }\n\t                            }\n\t                        }\n\t                        break;\n\t                    case 'paymentStep':\n\t                        //goes to addons || booking || pay\n\t                        $log.debug('goToNextStep:paymentStep', vm.isPaymentValid());\n\t                        if (vm.isPaymentValid() && !vm.pricingQuoteStarted) {\n\t                            //if guests and attendees are valid\n\t                            vm.guestDetailsExpanded = false;\n\t                            vm.attendeesExpanded = false;\n\t                            vm.addonsExpanded = false;\n\t                            vm.questionsExpanded = false;\n\t                            vm.stripePaymentExpanded = true;\n\t                            if (!$scope.dashboard) {\n\t                                vm.goToPay();\n\t                            }\n\t                        }\n\t                        break;\n\t                }\n\t            };\n\n\t            vm.guestDetailsFormValid = false;\n\n\t            this.toggleGuestDetails = function () {\n\t                //console.log('toggle guest details');\n\t                this.guestDetailsExpanded = this.formWasBlocked ? false : !this.guestDetailsExpanded;\n\t            };\n\n\t            this.togglePayment = function () {\n\t                //$log.debug('toggle payment');\n\t                this.paymentExpanded = !this.paymentExpanded;\n\t            };\n\n\t            this.returnToMainPage = function () {\n\n\t                if ($rootScope.config.DASHBOARD) {\n\t                    $mdDialog.hide();\n\t                    $state.reload();\n\t                } else {\n\t                    $mdDialog.hide();\n\t                    $state.go('home', { merchant: $stateParams.merchant });\n\t                }\n\t            };\n\t            this.pricing = {\n\t                total: 0\n\t            };\n\t            this.taxTotal, this.addonTotal, this.attendeeTotal = 0;\n\n\t            $scope.bookingSucceeded = false;\n\t            $scope.$mdMedia = $mdMedia;\n\t            $scope.screenIsBig = function () {\n\t                var w = angular.element($window);\n\t                return w[0].innerWidth > 742;\n\t            };\n\n\t            $scope.addBookingController = $scope.$parent;\n\t            vm.addBookingController = $scope.addBookingController;\n\t            $log.debug('addBookingController:initialize', $scope.addBookingController);\n\n\t            $scope.addBookingController.timeslot.charges.forEach(function (item) {\n\t                //reset quantity to 0 for all charges for every new booking dialog open\n\t                item.quantity = 0;\n\t            });\n\n\t            this.toggleQuestions = function () {\n\t                //$log.debug('toggle questions');\n\t                this.questionsExpanded = this.formWasBlocked ? false : !this.questionsExpanded;\n\t            };\n\n\t            var timerAdjustingAddons = 0;\n\t            this.adjustAddon = function (i, mode) {\n\t                if (vm.pricingQuoteRequestState === 'progress') {\n\t                    return;\n\t                }\n\t                vm.pricingQuoteStarted = true;\n\t                $timeout.cancel(timerAdjustingAddons);\n\t                if (mode == 'up') vm.addons[i].quantity++;\n\t                if (mode == 'down' && vm.addons[i].quantity > 0) vm.addons[i].quantity--;\n\n\t                timerAdjustingAddons = $timeout(function () {\n\t                    vm.getPricingQuote();\n\t                }, 400);\n\t            };\n\t            //$log.debug('adjustAddon:addons', vm.addons);\n\n\t            this.toggleAddons = function () {\n\t                //$log.debug('toggle addons');\n\t                if (vm.addons.length < 1) this.questionsExpanded = this.formWasBlocked ? false : !this.questionsExpanded;else this.addonsExpanded = this.formWasBlocked ? false : !this.addonsExpanded;\n\t            };\n\n\t            this.toggleStripePay = function () {\n\t                this.paymentExpanded = !this.paymentExpanded;\n\t            };\n\n\t            this.togglePay = function () {\n\t                this.payButtonEnabled = !this.payButtonEnabled;\n\t            };\n\n\t            var timerAdjustingAttendee = 0;\n\t            this.adjustAttendee = function (i, mode) {\n\t                if (vm.pricingQuoteRequestState === 'progress') {\n\t                    return;\n\t                }\n\t                vm.pricingQuoteStarted = true;\n\t                $timeout.cancel(timerAdjustingAttendee);\n\t                //Allow dashboard users to overbook\n\t                if (mode == 'up' && (vm.countAttendees() > 0 || $scope.dashboard)) vm.attendees[i].quantity++;\n\t                if (mode == 'down' && vm.attendees[i].quantity > 0) vm.attendees[i].quantity--;\n\n\t                timerAdjustingAttendee = $timeout(function () {\n\t                    vm.getPricingQuote();\n\t                    vm.countAttendees();\n\t                }, 400);\n\t            };\n\n\t            vm.pricingQuoteRequestState = null;\n\t            $rootScope.$on('loading:progress', function (event, args) {\n\t                if (args.request.url.indexOf('pricing-quotes') !== -1) {\n\t                    vm.pricingQuoteRequestState = 'progress';\n\t                }\n\t            });\n\n\t            $rootScope.$on('loading:finish', function (event, args) {\n\t                if (args.response.config.url.indexOf('pricing-quotes') !== -1) {\n\t                    vm.pricingQuoteRequestState = 'finished';\n\t                }\n\t            });\n\n\t            this.toggleAttendees = function () {\n\t                //$log.debug('toggle attendees');\n\t                this.attendeesExpanded = this.formWasBlocked ? false : !this.attendeesExpanded;\n\t            };\n\n\t            this.checkAdjustAttendee = function ($index) {\n\t                if (!$scope.dashboard && vm.attendees[$index].quantity > vm.countAttendees()) {\n\t                    vm.attendees[$index].quantity = 0;\n\t                    vm.attendees[$index].quantity = vm.countAttendees();\n\t                }\n\t                if (vm.attendees[$index].quantity < 0) vm.attendees[$index].quantity = 0;\n\n\t                vm.getPricingQuote();\n\t                vm.countAttendees();\n\t                $scope.safeApply();\n\t                $log.debug('attendees added', vm.countAttendees(), vm.attendees[$index].quantity);\n\t            };\n\n\t            var data = {\n\t                \"attendees\": {},\n\t                \"addons\": {}\n\t            };\n\n\t            function buildQuery() {\n\t                // Parse attendees\n\t                angular.forEach(vm.attendees, function (e, i) {\n\t                    data[\"attendees\"][e._id] = [];\n\t                    if (e.quantity > 0) {\n\t                        for (var i = 0; i < e.quantity; i++) {\n\t                            data[\"attendees\"][e._id].push(null);\n\t                        }\n\t                    }\n\t                });\n\t                // Parse addons\n\t                angular.forEach(vm.addons, function (e, i) {\n\t                    data[\"addons\"][e._id] = [];\n\t                    if (e.quantity > 0) {\n\t                        for (var i = 0; i < e.quantity; i++) {\n\t                            data[\"addons\"][e._id].push(null);\n\t                        }\n\t                    }\n\t                });\n\t                //$log.debug('pricing quote POST data', data);\n\t                data.currency = vm.currency.toUpperCase();\n\t                return data;\n\t            }\n\n\t            vm.pricingQuoteStarted = false;\n\t            // Query for pricing data based on the data object used to make a booking\n\t            // request\n\t            vm.getPricingQuote = function (currency) {\n\t                var query = buildQuery();\n\t                $http({\n\t                    method: 'POST',\n\t                    url: config.FEATHERS_URL + '/pricing-quotes',\n\t                    data: query,\n\t                    headers: headers\n\t                }).then(function successCallback(response) {\n\t                    vm.pricing = response.data;\n\t                    vm.pricing.couponDeduction = vm.pricing.items.filter(function (item) {\n\t                        return item.type == 'coupon';\n\t                    });\n\n\t                    vm.pricing.agentCommission = vm.pricing.items.filter(function (item) {\n\t                        return item.type == 'agent_commission';\n\t                    }).reduce(function (result, agentCommission) {\n\t                        return result + (agentCommission.price.amount || agentCommission.price.price) * agentCommission.quantity;\n\t                    }, 0);\n\n\t                    var addonsFilter = response.data.items.filter(function (item) {\n\t                        return item.type == 'addon';\n\t                    });\n\t                    vm.addonTotal = 0;\n\t                    vm.addonSubtotals = [];\n\t                    var addonsArray = {};\n\t                    angular.forEach(addonsFilter, function (addon, key) {\n\t                        var object = addon.type + addon.name.replace(' ', '');\n\t                        if (!addonsArray[object]) {\n\t                            addonsArray[object] = {\n\t                                addons: []\n\t                            };\n\t                        }\n\t                        addonsArray[object].addons.push(addon);\n\t                    });\n\t                    angular.forEach(addonsArray, function (addon, key) {\n\t                        var obj = {\n\t                            name: addon.addons[0].name,\n\t                            price: addon.addons[0].amount || addon.addons[0].price,\n\t                            amount: (addon.addons[0].amount || addon.addons[0].price) * addon.addons[0].quantity,\n\t                            quantity: addon.addons[0].quantity\n\t                        };\n\t                        vm.addonTotal += (addon.addons[0].amount || addon.addons[0].price) * addon.addons[0].quantity;\n\t                        vm.addonSubtotals.push(obj);\n\t                    });\n\n\t                    vm.attendeeTotal = response.data.items.filter(function (item) {\n\t                        return item.type == \"aap\";\n\t                    }).reduce(function (result, att) {\n\t                        if (angular.isDefined(att.amount) && att.amount > -1) {\n\t                            return result + att.amount * att.quantity;\n\t                        } else {\n\t                            return result + att.price * att.quantity;\n\t                        }\n\t                    }, 0);\n\n\t                    var aapFilter = response.data.items.filter(function (item) {\n\t                        return item.type == 'aap';\n\t                    });\n\t                    vm.attendeeSubtotals = [];\n\t                    var attendeesArray = {};\n\t                    angular.forEach(aapFilter, function (aap, key) {\n\t                        var object = aap.type + aap.name.replace(' ', '');\n\t                        if (!attendeesArray[object]) {\n\t                            attendeesArray[object] = {\n\t                                aaps: []\n\t                            };\n\t                        }\n\t                        attendeesArray[object].aaps.push(aap);\n\t                    });\n\t                    angular.forEach(attendeesArray, function (aap, key) {\n\t                        var obj = {\n\t                            name: aap.aaps[0].name,\n\t                            amount: aap.aaps[0].amount * aap.aaps[0].quantity,\n\t                            quantity: aap.aaps[0].quantity\n\t                        };\n\t                        if (angular.isDefined(aap.aaps[0].amount)) {\n\t                            obj.price = aap.aaps[0].amount;\n\t                        } else {\n\t                            obj.price = aap.aaps[0].price;\n\t                        }\n\t                        vm.attendeeSubtotals.push(obj);\n\t                    });\n\n\t                    vm.taxTotal = response.data.items.filter(function (item) {\n\t                        return item.type == \"tax\" || item.type == \"fee\" || item.type == 'service';\n\t                    }).reduce(function (result, tax) {\n\t                        $log.debug('reduce.vm.taxTotal', tax);\n\t                        if (angular.isDefined(tax.price.amount)) {\n\t                            return result + tax.price.amount * tax.quantity;\n\t                        } else {\n\t                            return result + tax.price.price * tax.quantity;\n\t                        }\n\t                    }, 0);\n\t                    vm.taxTotal = vm.taxTotal + vm.pricing.agentCommission;\n\n\t                    $log.debug('getPricingQuotes', response);\n\t                    $log.debug('vm.attendeeSubtotal', vm.attendeeSubtotals);\n\t                    $log.debug('vm.taxTotal', vm.taxTotal, vm.taxTotal + vm.pricing.agentCommission);\n\n\t                    // Reset the payment method to prevent some valid cases affecting the payment method wrongly\n\t                    // e.g., agent code addition before adding attendees will amount to 0 changing the method to 'gift' but it needs to be reset when the attendees are added.\n\t                    if (!vm.showPaymentForm) {\n\t                        vm.paymentMethod = 'credit';\n\t                    }\n\n\t                    if (vm.pricing.total == 0 && vm.paymentMethod == 'credit') {\n\t                        vm.paymentMethod = 'cash';\n\t                    }\n\t                    if (vm.attendeeTotal === 0 || vm.pricing.total.amount === 0) {\n\t                        vm.paymentMethod = 'gift';\n\t                    }\n\t                    if (vm.pricing.total > 0 || vm.pricing.total.amount > 0) {\n\t                        vm.paymentMethod = 'credit';\n\t                    }\n\n\t                    if (currency) {\n\t                        vm.currency = currency;\n\t                    }\n\t                    vm.pricingQuoteStarted = false;\n\t                    $scope.safeApply();\n\t                    $log.debug('finalPricingQuote', vm.pricingQuoteStarted, vm.pricing, vm.paymentMethod, vm.attendeeTotal);\n\t                }, function errorCallback(response) {\n\t                    vm.pricing = {};\n\t                    vm.taxTotal = 0;\n\t                    vm.pricingQuoteStarted = false;\n\t                    $mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position('left bottom').hideDelay(3000));\n\t                    $scope.safeApply();\n\t                    //$log.debug('getPricingQuotes error!', response, vm.pricing);\n\t                });\n\t            };\n\n\t            //Query for possible coupons partially matching the vm.couponQuery search string\n\t            vm.getPossibleCoupons = function () {\n\t                vm.pricingQuoteStarted = true;\n\t                $http({\n\t                    method: 'GET',\n\t                    url: config.FEATHERS_URL + '/coupons?bookingId=' + vm.couponQuery,\n\t                    headers: headers\n\t                }).then(function successCallback(response) {\n\t                    vm.possibleCoupons = response.data;\n\t                    $log.debug('getPossibleCoupons success', response);\n\t                    vm.pricingQuoteStarted = false;\n\t                }, function errorCallback(response) {\n\t                    vm.possibleCoupons = [];\n\t                    vm.pricingQuoteStarted = false;\n\t                    // vm.taxTotal = 0; $log.debug('getPossibleCoupons error!', response);\n\t                });\n\t            };\n\n\t            vm.clients = [];\n\t            observeOnScope($scope, 'vm.formData.fullName').map(function (data) {\n\t                return data;\n\t            }).subscribe(function (change) {\n\t                $log.debug('clientSearchText ', change.newValue);\n\t                if ($scope.dashboard) {\n\t                    vm.clients = $http({\n\t                        method: 'GET',\n\t                        url: config.FEATHERS_URL + '/clients?fullName=' + change.newValue,\n\t                        headers: headers\n\t                    }).then(function successCallback(response) {\n\t                        $log.debug('clientSearch success', response);\n\t                        return response.data.list;\n\t                    }, function errorCallback(response) {\n\t                        $log.debug('clientSearch error!', response);\n\t                        return [];\n\t                    });\n\t                }\n\t            });\n\n\t            vm.selectedClientChange = function (client) {\n\t                if (client) {\n\t                    vm.formData.fullName = client.primaryContact.fullName || '';\n\t                    vm.formData.mail = client.primaryContact.email || '';\n\t                    vm.formData.phoneNumber = client.primaryContact.phoneNumber || '';\n\t                    $log.debug('selectedClientChange', client);\n\t                }\n\t            };\n\n\t            $scope.autocomplete = {};\n\t            vm.couponStatus = 'untouched';\n\n\t            $scope.autocomplete.searchTextChange = function searchTextChange(text) {\n\t                if (!text) if (data['couponId']) delete data['couponId'];\n\t            };\n\n\t            $scope.autocomplete.selectedItemChange = function selectedItemChange(item) {\n\t                $log.debug('applied coupon', item);\n\n\t                if (item) {\n\t                    vm.appliedCoupon = item;\n\t                    data['couponId'] = item['couponId'];\n\t                    vm.validateCoupon(vm.appliedCoupon);\n\t                    vm.couponStatus = 'valid';\n\t                    vm.getPricingQuote();\n\t                    vm.checkingCoupon = false;\n\t                } else {\n\t                    vm.appliedCoupon = undefined;\n\t                    vm.couponStatus = 'untouched';\n\t                    if (data['couponId']) delete data['couponId'];\n\t                }\n\t            };\n\n\t            var queryDebounce = false;\n\t            vm.coupons = [];\n\t            $scope.autocomplete.querySearch = function querySearch(text) {\n\t                if ($scope.dashboard) {\n\t                    text = text.toUpperCase();\n\t                    if (!queryDebounce && text.length !== 1) {\n\t                        queryDebounce = true;\n\t                        return $timeout(function () {\n\t                            return $http({\n\t                                method: 'GET',\n\t                                url: config.FEATHERS_URL + '/coupons?couponId=' + text,\n\t                                headers: headers\n\t                            }).then(function successCallback(response) {\n\t                                queryDebounce = false;\n\t                                vm.coupons = response.data.list.filter(function (item) {\n\t                                    $log.debug('vm.coupons', item, $scope.addBookingController, $scope.addBookingController.activity);\n\t                                    return item.activities.length === 0 || item.activities.length > 0 && item.activities[0] === $scope.addBookingController.activity._id;\n\t                                });\n\t                                return vm.coupons;\n\t                                $log.debug('getPossibleCoupons success', response.data.list);\n\t                            }, function errorCallback(response) {\n\t                                queryDebounce = false;\n\t                                return [];\n\t                                $log.debug('getPossibleCoupons error!', response);\n\t                            });\n\t                        }, 100);\n\t                    } else {\n\t                        return this;\n\t                    }\n\t                }\n\t            };\n\n\t            // Check whether the vm.couponQuery search string exists as a coupon, if\n\t            // successful, add the coupon id to the make booking request object as the\n\t            // 'coupon' property\n\t            vm.checkCoupon = function () {\n\t                vm.checkingCoupon = true;\n\t                //$log.debug('check coupon', vm.couponQuery);\n\t                $http({\n\t                    method: 'GET',\n\t                    url: config.FEATHERS_URL + '/coupons/' + vm.couponQuery,\n\t                    headers: headers\n\t                }).then(function successCallback(response) {\n\t                    $log.debug('checkCoupon success', response);\n\t                    data['couponId'] = response.data['couponId'];\n\t                    vm.appliedCoupon = response.data;\n\t                    $log.debug('applied coupon', vm.appliedCoupon);\n\t                    vm.validateCoupon(vm.appliedCoupon);\n\t                    vm.couponStatus = 'valid';\n\t                    vm.getPricingQuote();\n\t                    vm.checkingCoupon = false;\n\t                }, function errorCallback(response) {\n\t                    delete data['couponId'];\n\t                    vm.couponStatus = 'invalid';\n\t                    vm.appliedCoupon = {};\n\t                    vm.checkingCoupon = false;\n\n\t                    //$log.debug('checkCoupon error!', response);\n\t                });\n\t            };\n\n\t            vm.removeCoupon = function () {\n\t                vm.couponQuery = '';\n\t                delete data['couponId'];\n\t                $scope.autocomplete.selectedItem = undefined;\n\t                vm.couponStatus = 'untouched';\n\t                vm.appliedCoupon = {};\n\t                vm.getPricingQuote();\n\t                $scope.safeApply();\n\t            };\n\n\t            vm.pricingInformation = function (total) {\n\t                $log.debug('pricingInformation', total);\n\t            };\n\n\t            var moment = window.moment;\n\n\t            vm.validateCoupon = function (coupon) {\n\t                var today = moment();\n\t                // $log.debug('coupon expires after today',\n\t                // moment(coupon.endTime).isAfter(moment())); Coupon is not expired and is\n\t                // infinitely redeemable\n\t                if (moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions == 0) return true;\n\n\t                // Coupon is not expired and has been redeemed less than the maximum allowable\n\t                // redemptions\n\t                if (coupon.maxRedemptions > 0 && moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions - coupon.redemptions >= 0) return true;\n\n\t                //Coupon is expired or has been redeemed too many times\n\t                vm.couponStatus = 'invalid';\n\t                return false;\n\t            };\n\n\t            vm.appliedCouponType = function (coupon) {\n\t                if (coupon) {\n\t                    if (coupon.percentage) {\n\t                        return coupon.amount + '%';\n\t                    } else {\n\t                        return $filter('ablCurrency')(coupon.amount, $rootScope.currency);\n\t                    }\n\t                }\n\t            };\n\n\t            vm.bookingQuestionsCompleted = function () {\n\t                var completed = 0;\n\t                if (vm.bookingQuestions) {\n\t                    angular.forEach(vm.bookingQuestions, function (e, i) {\n\t                        if (e) {\n\t                            if (e.length > 0) completed++;\n\t                        }\n\t                    });\n\t                } else {\n\t                    completed = 0;\n\t                }\n\t                //$log.debug('vm.bookingQuestions', vm.bookingQuestions, completed);\n\t                return completed;\n\t            };\n\t            // Observe and debounce an object on the $scope, can be used on a search input\n\t            // for example to wait before auto-sending the value\n\t            observeOnScope($scope, 'vm.couponQuery').debounce(500).select(function (response) {\n\t                return response;\n\t            }).subscribe(function (change) {\n\t                //$log.debug('search value', change);\n\t                if (vm.couponQuery.length > 0) vm.checkCoupon();\n\t            });\n\n\t            // -- START - Agent code autocomplete\n\n\t            $scope.agentAutocomplete = {};\n\t            vm.agentCodeStatus = 'untouched';\n\n\t            $scope.agentAutocomplete.searchTextChange = function searchAgentTextChange(text) {\n\t                console.log(\"SEARCH TEXT\", text);\n\t            };\n\t            $scope.agentAutocomplete.selectedItemChange = function selectedAgentItemChange(item) {\n\t                console.log('applied agent', item);\n\n\t                if (item) {\n\t                    vm.appliedAgentCode = item;\n\t                    data['agentCode'] = item['code'];\n\t                    vm.validateAgent(vm.appliedAgentCode);\n\t                    vm.agentCodeStatus = 'valid';\n\t                    vm.getPricingQuote();\n\t                    vm.checkingAgentCode = false;\n\t                } else {\n\t                    vm.appliedAgentCode = undefined;\n\t                    vm.agentCodeStatus = 'untouched';\n\t                    if (data['agentCode']) delete data['agentCode'];\n\t                }\n\t            };\n\n\t            $scope.agentAutocomplete.querySearch = function querySearch(text) {\n\t                // text = text.toUpperCase();\n\t                text = !text ? \".\" : text;\n\t                return $http({\n\t                    method: 'GET',\n\t                    url: config.FEATHERS_URL + '/operators/' + $scope.orgId + '/agents?partialMatch=true&code=' + text,\n\t                    headers: headers\n\t                }).then(function successCallback(response) {\n\t                    return response.data;\n\t                    console.log('getPossibleAgent success', response.data);\n\t                }, function errorCallback(response) {\n\t                    return [];\n\t                    console.log('getPossibleAgentCodes error!', response);\n\t                });\n\t            };\n\n\t            // Check whether the vm.agentCodeQuery search string exists as a agent, if successful,\n\t            // add the agent code to the make booking request object as the 'agentCode' property\n\t            vm.checkAgentCode = function () {\n\t                vm.checkingAgentCode = true;\n\n\t                $http({\n\t                    method: 'GET',\n\t                    url: config.FEATHERS_URL + '/operators/' + $scope.orgId + '/agents?code=' + vm.agentCodeQuery,\n\t                    headers: headers\n\t                }).then(function successCallback(response) {\n\t                    console.log('checkAgentCode success', response);\n\t                    if (response.data && response.data.length == 0) {\n\t                        delete data['agentCode'];\n\t                        vm.agentCodeStatus = 'invalid';\n\t                        vm.appliedAgentCode = {};\n\t                        vm.checkingAgentCode = false;\n\t                        return;\n\t                    }\n\t                    data['agentCode'] = response.data[0]['code'];\n\t                    vm.appliedAgentCode = response.data[0];\n\t                    console.log('applied agent code', vm.appliedAgentCode);\n\t                    vm.validateAgent(vm.appliedAgentCode);\n\t                    vm.agentCodeStatus = 'valid';\n\t                    vm.getPricingQuote();\n\t                    vm.checkingAgentCode = false;\n\t                }, function errorCallback(response) {\n\t                    delete data['agentCode'];\n\t                    vm.agentCodeStatus = 'invalid';\n\t                    vm.appliedAgentCode = {};\n\t                    vm.checkingAgentCode = false;\n\t                });\n\t            };\n\n\t            vm.removeAgentCode = function () {\n\t                vm.agentCodeQuery = '';\n\t                delete data['agentCode'];\n\t                $scope.agentAutocomplete.selectedItem = undefined;\n\t                vm.agentCodeStatus = 'untouched';\n\t                vm.appliedAgentCode = {};\n\t                vm.getPricingQuote();\n\t            };\n\n\t            vm.validateAgent = function (agent) {\n\t                if (agent.active) {\n\t                    console.log(\"agent active\");\n\t                    return true;\n\t                }\n\t                vm.agentCodeStatus = 'invalid';\n\t                return false;\n\t            };\n\n\t            //Observe and debounce an object on the $scope, can be used on \n\t            //a search input for example to wait before auto-sending the value\n\t            observeOnScope($scope, 'vm.agentCodeQuery').debounce(500).select(function (response) {\n\t                return response;\n\t            }).subscribe(function (change) {\n\t                //console.log('search value', change);\n\t                if (vm.agentCodeQuery.length > 0) vm.checkAgentCode();\n\t            });\n\n\t            // -- END - Agent code autocomplete\n\n\t            (0, _activityBookValidators2.default)(vm, rx, $http, $stateParams);\n\n\t            $scope.$watch('addBookingController.activity', function (changes) {\n\t                $log.debug('addBookingController.activity', changes);\n\t                if (angular.isDefined($scope.addBookingController.activity)) {\n\n\t                    // This is needed for Agent code search query\n\t                    $scope.orgId = $scope.addBookingController.activity.operator || $scope.addBookingController.activity.organizations[0];\n\n\t                    //Get booking questions\n\t                    vm.questions = $scope.addBookingController.activity.questions || [];\n\t                    if (!vm.questions) {\n\t                        delete vm.validStepsForPayment.bookingQuestions;\n\t                    }\n\n\t                    vm.addons = $scope.addBookingController.activity.charges.filter(function (charge) {\n\t                        return charge.type == 'addon' && charge.status == 'active';\n\t                    });\n\t                    if (!vm.addons) {\n\t                        delete vm.validStepsForPayment.addons;\n\t                    }\n\t                    vm.addons.forEach(function (e, i) {\n\t                        if (!angular.isDefined(e.quantity)) e.quantity = 0;\n\t                    });\n\n\t                    vm.taxes = $scope.addBookingController.activity.charges.filter(function (charge) {\n\t                        return charge.type == 'tax';\n\t                    });\n\n\t                    $scope.safeApply();\n\t                }\n\t            }, true);\n\n\t            $scope.$watch('addBookingController.timeslot', function (changes) {\n\t                if (angular.isDefined($scope.addBookingController.timeslot) && angular.isDefined($scope.addBookingController.event)) {\n\n\t                    if (angular.isDefined($scope.addBookingController.timeslot.charges)) {\n\t                        vm.attendees = $scope.addBookingController.timeslot.charges.filter(function (charge) {\n\t                            return charge.type == 'aap' && charge.status == 'active';\n\t                        });\n\t                        vm.attendees.forEach(function (e, i) {\n\t                            if (!angular.isDefined(e.quantity)) e.quantity = 0;\n\t                        });\n\t                    }\n\t                    data['timeSlotId'] = $scope.addBookingController.timeslot._id;\n\t                    data['startTime'] = $scope.addBookingController.event.startTime;\n\t                }\n\t            }, true);\n\n\t            $scope.$watch('addBookingController.preferences', function (changes) {\n\t                var preferences = $scope.addBookingController.preferences;\n\t                $scope.agentsIsOn = preferences && preferences.features ? preferences.features.agents : false;\n\t            }, true);\n\n\t            vm.countAttendees = function () {\n\t                var attendees = 0;\n\t                if ($scope.addBookingController.event) {\n\t                    if (vm.attendees) {\n\t                        attendees = ($scope.addBookingController.event.maxOcc ? $scope.addBookingController.event.maxOcc : $scope.addBookingController.timeslot.maxOcc) - vm.attendees.map(function (att) {\n\t                            return att.quantity;\n\t                        }).reduce(function (a, b) {\n\t                            return a + b;\n\t                        }, 0) - $scope.addBookingController.event.attendees;\n\t                    } else {\n\t                        attendees = 0;\n\t                    }\n\t                }\n\t                return attendees;\n\t            };\n\n\t            vm.countAttendeesAdded = function () {\n\t                var attendeesAdded = 0;\n\t                if ($scope.addBookingController.event) {\n\t                    if (vm.attendees) {\n\t                        attendeesAdded = vm.attendees.map(function (att) {\n\t                            return att.quantity;\n\t                        }).reduce(function (a, b) {\n\t                            return a + b;\n\t                        }, 0);\n\t                    }\n\t                }\n\t                // $log.debug('countAttendeesAdded', attendeesAdded);\n\t                return attendeesAdded;\n\t            };\n\n\t            vm.countAddonsAdded = function () {\n\t                if ($scope.addBookingController.event) {\n\t                    if (vm.addons) {\n\t                        return vm.addons.map(function (add) {\n\t                            return add.quantity;\n\t                        }).reduce(function (a, b) {\n\t                            return a + b;\n\t                        }, 0);\n\t                    } else {\n\t                        return 0;\n\t                    }\n\t                }\n\t                return 0;\n\t            };\n\n\t            vm.addonsChanged = function () {\n\t                $scope.safeApply();\n\t                $log.debug('addonsChanged');\n\t                $timeout(function () {\n\t                    vm.getPricingQuote();\n\t                }, 0);\n\t            };\n\n\t            this.areGuestDetailsValid = function (form) {\n\t                if (form) {\n\t                    vm.guestDetailsAreValid = form.$valid;\n\t                    vm.validStepsForPayment.guest = vm.guestDetailsAreValid;\n\t                } else {\n\t                    vm.guestDetailsAreValid = false;\n\t                }\n\t                return vm.guestDetailsAreValid;\n\t            };\n\n\t            this.areAttendeesValid = function () {\n\t                vm.validStepsForPayment.attendees = vm.countAttendeesAdded() === 0 ? false : true;\n\t                return vm.countAttendeesAdded() === 0 ? false : true;\n\t            };\n\n\t            this.areAddonsValid = function () {\n\t                if (vm.validStepsForPayment.addons != null) {\n\t                    vm.validStepsForPayment.addons = true;\n\t                }\n\t                return vm.countAddonsAdded() === 0 ? false : true;\n\t            };\n\n\t            this.areBookingQuestionsValid = function () {\n\t                if (vm.validStepsForPayment.bookingQuestions != null) {\n\t                    vm.validStepsForPayment.bookingQuestions = vm.bookingQuestionsCompleted() === vm.questions.length ? true : false;\n\t                }\n\t                return vm.validStepsForPayment.bookingQuestions;\n\t            };\n\n\t            /*$scope.$watch(function(){\n\t                return vm.answerAllQuestionsChecked;\n\t            }, function(n, o){\n\t                if(n){\n\t                    $log.debug('answerAllQuestionsChecked', n, vm.bookingQuestions, vm.questions);\n\t                    if(n === 'yes'){\n\t                        vm.bookingQuestions = new Array(vm.questions.length);\n\t                        vm.bookingQuestionsCopy = vm.bookingQuestions;\n\t                        for(var i = 0; i < vm.bookingQuestions.length; i++){\n\t                            vm.bookingQuestions[i] = 'No answer';\n\t                        }\n\t                    }else{\n\t                        vm.bookingQuestions = vm.bookingQuestionsCopy;\n\t                    }\n\t                }\n\t            });*/\n\n\t            this.answerAllQuestions = function () {\n\t                $log.debug('answerAllQuestions', vm.answerAllQuestionsChecked, vm.bookingQuestions);\n\t                if (!vm.answerAllQuestionsChecked) {\n\t                    for (var i = 0; i < vm.bookingQuestions.length; i++) {\n\t                        vm.bookingQuestions[i] = 'No answer';\n\t                    }\n\t                    vm.answerAllQuestionsChecked = true;\n\t                } else {\n\t                    for (var i = 0; i < vm.bookingQuestions.length; i++) {\n\t                        vm.bookingQuestions[i] = '';\n\t                    }\n\t                    vm.answerAllQuestionsChecked = false;\n\t                }\n\t            };\n\n\t            this.isPaymentValid = function () {\n\t                var isValid = [];\n\t                angular.forEach(vm.validStepsForPayment, function (step, key) {\n\t                    if (!step) {\n\t                        isValid.push(step);\n\t                    }\n\t                });\n\t                vm.isFinishButtonValid = isValid.length === 0 && vm.pricingQuoteStarted === false;\n\t                return isValid.length > 0 && vm.pricingQuoteStarted === true ? false : true;\n\t            };\n\n\t            this.isNextStepPayment = function (step) {\n\t                if (step === 'attendees') {\n\t                    if (vm.addons || vm.questions) {\n\t                        return vm.addons || vm.questions ? true : false;\n\t                    } else {\n\t                        return false;\n\t                    }\n\t                }\n\t                if (step === 'addons') {\n\t                    if (vm.questions) {\n\t                        return vm.questions ? true : false;\n\t                    } else {\n\t                        return false;\n\t                    }\n\t                }\n\t                if (step === 'payment') {\n\t                    return true;\n\t                }\n\t            };\n\n\t            this.nextButtonLabel = function (step) {\n\t                var statusObj = { step: step };\n\t                //$log.debug('validStepsForPayment', vm.validStepsForPayment, step);\n\t                if (!$scope.dashboard && vm.pricing.total.amount === 0 && vm.countAttendeesAdded() > 0) {\n\t                    if (step === 'guest') {\n\t                        statusObj.label = 'Next';\n\t                    }\n\t                    if (step === 'attendees') {\n\t                        if (vm.addons || vm.questions) {\n\t                            if (vm.addons.length > 0 || vm.questions.length > 0) {\n\t                                statusObj.label = 'Next';\n\t                            } else {\n\t                                statusObj.label = 'Finish';\n\t                            }\n\t                        } else {\n\t                            statusObj.label = 'Next';\n\t                        }\n\t                    }\n\t                    if (step === 'addons') {\n\t                        if (vm.questions) {\n\t                            if (vm.questions.length > 0) {\n\t                                statusObj.label = 'Next';\n\t                            } else {\n\t                                statusObj.label = 'Finish';\n\t                            }\n\t                        } else {\n\t                            statusObj.label = 'Next';\n\t                        }\n\t                    }\n\t                    if (step === 'questions') {\n\t                        statusObj.label = 'Finish';\n\t                    }\n\t                } else {\n\t                    statusObj.label = 'Next';\n\t                }\n\t                return statusObj;\n\t            };\n\n\t            vm.paymentMethod = 'credit';\n\t            vm.bookingQuestions = [];\n\t            vm.getBookingData = function () {\n\t                var bookingData = angular.copy(data);\n\t                if (vm.paymentMethod == 'reserved') bookingData['amount'] = 0;\n\t                bookingData['eventInstanceId'] = $scope.addBookingController.event['eventInstanceId'] || $scope.addBookingController.event;\n\t                bookingData['answers'] = {};\n\n\t                bookingData['sendConfirmationEmail'] = $scope.sendConfirmationEmail;\n\t                bookingData['skipConfirmation'] = !$scope.sendConfirmationEmail;\n\n\t                bookingData['email'] = vm.formData['mail'];\n\t                bookingData['phoneNumber'] = vm.formData['phoneNumber'];\n\t                bookingData['fullName'] = vm.formData['fullName'];\n\t                bookingData['notes'] = vm.formData['notes'];\n\t                bookingData['skipConfirmation'] = false;\n\t                bookingData['operator'] = $scope.addBookingController.event.operator || $scope.addBookingController.event.organizations[0] || $scope.addBookingController.activity.operator || $scope.addBookingController.activity.organizations[0];\n\t                angular.forEach(vm.questions, function (e, i) {\n\t                    $log.debug('vm.questions', vm.questions);\n\t                    $log.debug('vm.bookingQuestions', vm.bookingQuestions);\n\t                    bookingData['answers'][e._id ? e._id : e] = vm.bookingQuestions[i];\n\t                });\n\n\t                if (vm.paymentMethod != 'reserved') bookingData['paymentMethod'] = vm.paymentMethod;else bookingData['paymentMethod'] = 'cash';\n\n\t                if (vm.paymentMethod == 'reserved') {\n\t                    bookingData['amount'] = 0;\n\t                }\n\t                bookingData['currency'] = 'default';\n\n\t                return bookingData;\n\t            };\n\n\t            vm.outputBookingData = function () {\n\t                $log.debug(vm.getBookingData());\n\t            };\n\n\t            $scope.safeApply = function (fn) {\n\t                var phase = this.$root.$$phase;\n\t                if (phase == '$apply' || phase == '$digest') {\n\t                    if (fn && typeof fn === 'function') {\n\t                        fn();\n\t                    }\n\t                } else {\n\t                    this.$apply(fn);\n\t                }\n\t            };\n\n\t            function goToPay() {\n\n\t                vm.guestDetailsExpanded = false;\n\t                vm.attendeesExpanded = false;\n\t                vm.addonsExpanded = false;\n\t                vm.questionsExpanded = false;\n\n\t                vm.showPaymentForm = true;\n\t                vm.paymentFormIsLoading = true;\n\t                vm.stripePaymentExpanded = true;\n\n\t                vm.paymentWasSent = true;\n\t                this.formWasBlocked = true;\n\t                $scope.bookingSuccessResponse = 'processing';\n\t                $scope.safeApply();\n\t                $scope.makeBooking();\n\t            }\n\n\t            function submitNonCreditCardBooking() {\n\t                $log.debug('submitNonCreditCardBooking', this.pricing.total);\n\n\t                var bookingData = vm.getBookingData();\n\t                if (bookingData.stripeToken) delete bookingData.stripeToken;\n\t                bookingData.location = {};\n\t                bookingData.isMobile = false;\n\t                vm.paymentWasSent = true;\n\t                $scope.bookingSuccessResponse = 'processing';\n\t                if (Raven) {\n\t                    Raven.captureMessage('Submit Booking', {\n\t                        level: 'info', // one of 'info', 'warning', or 'error'\n\t                        extra: {\n\t                            bookingData: bookingData\n\t                        },\n\t                        tags: {\n\t                            step: 'pay-non-cc'\n\t                        }\n\t                    });\n\t                }\n\t                $http({\n\t                    method: 'POST',\n\t                    url: config.FEATHERS_URL + '/bookings',\n\t                    data: bookingData,\n\t                    headers: headers\n\t                }).then(function successCallback(response) {\n\t                    $log.debug('submitNonCreditCardBooking success', response);\n\t                    $scope.bookingSuccessResponse = response;\n\t                    vm.waitingForResponse = false;\n\t                    $rootScope.$emit('paymentResponse');\n\t                    validatePayment(response);\n\t                }, function errorCallback(response) {\n\t                    var errorElement = document.getElementById('card-errors');\n\t                    errorElement.textContent = response.data.errors[0];\n\t                    vm.paymentWasSent = false;\n\t                    $rootScope.$emit('paymentResponse');\n\t                    vm.waitingForResponse = false;\n\t                });\n\t            }\n\n\t            function validatePayment(response) {\n\t                if (response.status === 200) {\n\t                    $scope.paymentResponse = 'success'; //processing, failed\n\t                    $scope.paymentSuccessful = true;\n\t                    if (Raven) {\n\t                        Raven.captureMessage('Booking Suceeded', {\n\t                            level: 'info', // one of 'info', 'warning', or 'error'\n\t                            extra: {\n\t                                response: response\n\t                            },\n\t                            tags: {\n\t                                step: 'pay-non-cc'\n\t                            }\n\t                        });\n\t                    }\n\t                    $scope.safeApply();\n\t                }\n\t                $scope.bookingSuccessResponse = response;\n\n\t                $scope.$emit('paymentResponse', response);\n\t                console.log('paymentResponse', response);\n\t            }\n\n\t            $scope.$on('reloadPaymentForm', function (event, args) {\n\t                var iframe = document.getElementById(\"paymentIframe\");\n\t                var iframeDoc = iframe.contentWindow.document;\n\t                iframeDoc.open();\n\t                iframeDoc.write('');\n\t                iframeDoc.close();\n\t                $scope.makeBooking();\n\t            });\n\n\t            $scope.makeBooking = function (data) {\n\t                vm.paymentExpanded = true;\n\t                vm.loadingIframe = true;\n\t                var bookingData = vm.getBookingData();\n\t                if (Raven) {\n\t                    Raven.captureMessage('Submit Booking', {\n\t                        level: 'info', // one of 'info', 'warning', or 'error'\n\t                        extra: {\n\t                            bookingData: bookingData\n\t                        },\n\t                        tags: {\n\t                            step: 'pay-cc'\n\t                        }\n\t                    });\n\t                }\n\t                $log.debug('$scope.makeBooking', data);\n\t                $scope.bookingResponse = $http({\n\t                    method: 'POST',\n\t                    url: config.FEATHERS_URL + '/bookings',\n\t                    data: bookingData,\n\t                    headers: headers\n\t                    // headers: {     \"Content-Type\": \"application/json;charset=utf-8\" }\n\t                }).then(function successCallback(response) {\n\t                    $log.debug('makeBooking success', response);\n\t                    if (response.data.iframeHtml) {\n\t                        vm.loadingIframe = false;\n\t                        $scope.paymentSuccessful = false;\n\t                        $scope.bookingSuccessResponse = response;\n\t                        vm.paymentFormIsLoading = false;\n\t                        var iframe = document.getElementById(\"paymentIframe\");\n\t                        iframe.style.display = 'block';\n\t                        var iframeDoc = iframe.contentWindow.document;\n\t                        iframeDoc.open();\n\t                        iframeDoc.write(response.data.iframeHtml);\n\t                        iframeDoc.close();\n\t                        $scope.bookingSucceeded = true;\n\t                        if (Raven) {\n\t                            Raven.captureMessage('Booking Succeeded', {\n\t                                level: 'info', // one of 'info', 'warning', or 'error'\n\t                                extra: {\n\t                                    response: response.data\n\t                                },\n\t                                tags: {\n\t                                    step: 'pay-cc'\n\t                                }\n\t                            });\n\t                        }\n\t                    } else if (response.data.booking.status === 'paid') {\n\t                        $log.debug('makeBooking success $0', response);\n\t                        $scope.paymentSuccessful = true;\n\t                        $scope.bookingSuccessResponse = response;\n\t                        $scope.bookingSucceeded = true;\n\t                        var event = {\n\t                            data: { type: 'payment_success' }\n\t                        };\n\t                        _paymentMessageHandler(event);\n\t                    }\n\t                }, function errorCallback(response) {\n\t                    $mdDialog.hide();\n\t                    vm.loadingIframe = false;\n\t                    vm.paymentFormIsLoading = false;\n\t                    vm.paymentExpanded = false;\n\t                    $scope.bookingSucceeded = false;\n\t                    if (Raven) {\n\t                        Raven.captureMessage('Booking Error', {\n\t                            level: 'error', // one of 'info', 'warning', or 'error'\n\t                            extra: {\n\t                                response: response.data\n\t                            },\n\t                            tags: {\n\t                                step: 'pay-cc'\n\t                            }\n\t                        });\n\t                    }\n\t                    $mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position('left bottom').hideDelay(3000));\n\t                    $log.debug('makeBooking error!', response);\n\t                });\n\t            };\n\n\t            var lpad = function lpad(numberStr, padString, length) {\n\t                while (numberStr.length < length) {\n\t                    numberStr = padString + numberStr;\n\t                }\n\t                return numberStr;\n\t            };\n\n\t            var _paymentMessageHandler;\n\t            _paymentMessageHandler = function paymentMessageHandler(event) {\n\t                // if (event.origin == \"https://calendar.ablist.win\") { // TODO add to config\n\t                // $log.debug(\"TRUSTED ORIGIN\", event.origin);\n\t                $log.debug(\"DATA\", event.data);\n\t                if (event.data == \"payment_complete\" || event.data.type == \"payment_success\") {\n\t                    $log.debug(\"PAYMENT COMPLETE\");\n\t                    $scope.paymentResponse = 'success'; //processing, failed\n\t                    //   $rootScope.showToast('Payment processed successfully.');\n\t                    $rootScope.$broadcast('paymentWithResponse', { response: event.data });\n\n\t                    window.removeEventListener(\"message\", _paymentMessageHandler);\n\t                    $scope.paymentSuccessful = true;\n\t                    //   $scope.changeState('bookings'); //Go to bookings view if successful\n\t                    $scope.safeApply();\n\t                    //$mdDialog.hide();\n\t                } else {\n\t                    if (event.data.message === 'Your card was declined.') {\n\t                        $log.debug('$scope.addBookingController.preferences', $scope.addBookingController.preferences.payment.cards);\n\t                        if ($scope.addBookingController.preferences.payment.cards) {\n\t                            var cards = [];\n\t                            var cardsKeys = { 'amex': 'American Express', 'discover': 'Discover', 'mastercard': 'Mastercard', 'visa': 'Visa' };\n\t                            angular.forEach($scope.addBookingController.preferences.payment.cards, function (value, key) {\n\t                                if (value === true) {\n\t                                    cards.push(cardsKeys[key]);\n\t                                }\n\t                            });\n\t                            $mdToast.show($mdToast.simple().textContent('Card Declined, please try one of the following cards: ' + cards.join(', ')).position('left bottom').hideDelay(5000));\n\t                        } else {\n\t                            $mdToast.show($mdToast.simple().textContent('Card Declined, please try one of the cards listed above').position('left bottom').hideDelay(5000));\n\t                        }\n\t                    }\n\t                    if (event.data.type) {\n\t                        if (event.data.type.indexOf('setImmediate') === -1) {\n\t                            if (Raven) {\n\t                                Raven.captureMessage('Booking Payment Error', {\n\t                                    level: 'error', // one of 'info', 'warning', or 'error'\n\t                                    extra: {\n\t                                        paymentMessageHandler: event.data\n\t                                    },\n\t                                    tags: {\n\t                                        step: 'pay-non-cc'\n\t                                    }\n\t                                });\n\t                            } // $rootScope.showToast(event.data.message, 'errorToast');\n\t                            // $rootScope.$broadcast('paymentWithResponse', { response: event.data });\n\t                            $scope.paymentSuccessful = false;\n\t                            $scope.paymentResponse = ''; //processing, failed\n\t                            vm.showPaymentForm = true;\n\t                            $scope.safeApply();\n\t                        }\n\t                    }\n\t                    $rootScope.$broadcast('paymentWithErrorResponse', { response: event.data });\n\t                }\n\t            };\n\n\t            $log.debug(\"Adding Payment Message Event Listener\");\n\t            window.addEventListener(\"message\", _paymentMessageHandler);\n\n\t            $scope.safeApply = function (fn) {\n\t                var phase = this.$root.$$phase;\n\t                if (phase == '$apply' || phase == '$digest') {\n\t                    if (fn && typeof fn === 'function') {\n\t                        fn();\n\t                    }\n\t                } else {\n\t                    this.$apply(fn);\n\t                }\n\t            };\n\n\t            var lpad = function lpad(numberStr, padString, length) {\n\t                while (numberStr.length < length) {\n\t                    numberStr = padString + numberStr;\n\t                }\n\t                return numberStr;\n\t            };\n\n\t            // Merge identical items from an array into nested objects, summing their amount\n\t            // properties and keeping track of quantities\n\t            function mergeIdenticalArrayItemsIntoObject(data, oldObject) {\n\t                var seen = oldObject;\n\t                //$log.debug('mergeIdenticalArrayItemsIntoObject:data', data);\n\t                angular.forEach(data, function (e, i) {\n\t                    if (seen.hasOwnProperty(e.name) && seen[e.name] === e.name) {\n\t                        seen[e['name']]['price'] = e['price']; //Sum their prices\n\t                        seen[e['name']]['quantity'] += 1; //Increment their quantity\n\t                        seen[e['name']]['amount'] = seen[e['name']]['amount'] * seen[e['name']]['quantity']; //Sum their prices\n\t                        //$log.debug('merged', seen[e['name']]);\n\t                    } else {\n\t                        seen[e['name']] = {};\n\t                        seen[e['name']]['name'] = e['name'];\n\t                        seen[e['name']]['price'] = e['price'];\n\t                        seen[e['name']]['quantity'] = 1;\n\t                        seen[e['name']]['amount'] = e['amount'];\n\t                    }\n\t                });\n\t                //$log.debug('mergeIdenticalArrayItems', seen);\n\t                return seen;\n\t            }\n\t        }]\n\t    };\n\t}]).filter('imageService', function () {\n\t    return function (value) {\n\t        return value.replace(/(.png|.jpg|.jpeg)/i, '-small$1');\n\t    };\n\t});\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\n\t// load the styles\n\tvar content = __webpack_require__(127);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(97)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./activity-book.css\", function() {\n\t\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./activity-book.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(96)(false);\n\t// imports\n\n\n\t// module\n\texports.push([module.id, \"#paymentIframe{margin:0;padding:8px;border:none;min-height:330px;height:100%;overflow-y:hidden;width:100%;display:none}abl-activity-book md-card{box-shadow:none!important;border:none!important;background:transparent}.transparent{background-color:transparent!important}list-item{display:block!important}.payment-section{margin-bottom:54px}md-input-container.md-white-theme:not(.md-input-invalid).md-input-focused label{color:#666!important}.paymentSummaryCardNewContent .paymentSummaryCardNew{margin:0!important}.payment-icons-bar{padding-top:8px;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,.1);background:#ccc}.payment-icons-bar img.payment-icons-bar-left{height:40px;padding-left:16px;vertical-align:middle}.payment-icons-bar img.payment-icons-bar-right{height:30px;padding-right:12px;vertical-align:middle}.left-panel{border-right:1px solid #ddd}.left-panel,.left-panel-no-dashboard{background-color:#fff}.left-panel-no-dashboard>md-content,.left-panel>md-content{background-color:transparent!important}.paymentSummaryCardNewContent .gradient{background:#000;background:-webkit-linear-gradient(left,rgba(0,0,0,.15),hsla(0,0%,96%,.2049194677871149));background:-moz-linear-gradient(left,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149) 100%);background:-o-linear-gradient(left,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149) 100%);background:linear-gradient(90deg,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149));width:5px}.paymentSummaryCardNewContent .paymentSummaryCardNew{overflow-y:auto!important}.payment-icons-bar{padding-top:0;padding-bottom:0}.payment-icons-bar img.payment-icons-bar-left{height:28px;margin-top:2px}.payment-icons-bar img.payment-icons-bar-right{height:25px;padding-right:15px}.listItemHeader{outline:none;background-color:#f2f2f2}.listItemContentArea{background-color:#fff;border-top:1px solid #cacaca}@media(max-width:599px){.left-panel{border-right:none}.payment-icons-bar img.payment-icons-bar-left{height:30px;padding-left:8px}.payment-icons-bar img.payment-icons-bar-right{height:24px;padding-right:8px}}\", \"\"]);\n\n\t// exports\n\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<md-content flex class=paymentSummaryCardNewContent layout=row layout-align=\\\"space-between stretch\\\"> <div hide-xs flex=none class=gradient></div> <md-card flex class=paymentSummaryCardNew ng-show=\\\"paymentResponse != 'success'\\\"> <md-list> <div ng-if=\\\"!dashboard && vm.eventDate\\\"> <div layout-padding layout-xs=column layout-gt-sm=row> <div flex-gt-sm=30 flex ng-if=vm.activityImage style=max-height:250px;overflow:hidden;margin-bottom:8px> <img style=width:100% ng-src={{vm.activityImage}} /> </div> <div flex=none hide-sm style=width:16px></div> <div flex flex-gt-sm=60> <h2 style=font-size:17px;margin-bottom:8px>{{vm.addBookingController.timeslot.title}}</h2> <p style=font-size:14px ng-if=vm.activityLocation><ng-md-icon icon=place class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.activityLocation}}</p> <p style=font-size:14px><ng-md-icon icon=date_range class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.eventDate}}</p> <p style=font-size:14px ng-if=vm.eventTime><ng-md-icon icon=access_time class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.eventTime}} </p></div> </div> <div ng-if=!vm.activityLocation> <md-list-item class=lineItemHeader ng-if=vm.base ng-click=null> <div class=md-list-item-text layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <p class=\\\"\\\">Base Price </p> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <p> <abl-currency-directive price=vm.base() currency={{vm.currency}}></abl-currency-directive> {{$parent.currency | uppercase}}</p> </div> </div> </md-list-item> </div> </div> <md-list-item class=lineItemHeader ng-if=vm.base ng-click=null> <div class=md-list-item-text layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <p class=\\\"\\\">Base Price </p> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <p> <abl-currency-directive price=vm.base() currency={{vm.currency}}></abl-currency-directive> {{$parent.currency | uppercase}}</p> </div> </div> </md-list-item> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-disabled=detailsForm.$invalid ng-show=\\\"vm.couponStatus == 'valid'\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column layout-align=\\\"center start\\\"> <ng-md-icon icon=clear class=\\\"listIcon remove-coupon\\\" ng-click=vm.removeCoupon(); ng-if=\\\"vm.couponStatus =='valid'\\\" ng-hide=\\\"!dashboard && vm.formWasBlocked\\\"></ng-md-icon> </div> <span class=\\\"couponText total\\\" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCouponType(vm.appliedCoupon)}} Off</span> </div> <div layout=row layout-align=\\\"end center\\\"> <span class=couponTextTotal ng-if=vm.pricing.couponDeduction[0]>-<abl-currency-directive price=\\\"(-1 * vm.pricing.couponDeduction[0].price.amount)\\\" currency={{vm.currency}}></abl-currency-directive></span> <md-progress-circular md-mode=indeterminate ng-show=\\\"vm.checkingCoupon && vm.couponQuery.length > 0\\\" class=\\\"listItemCircularProgress easeIn\\\" md-diameter=24px> </md-progress-circular> </div> </div> </md-list-item> <list-item ng-if=\\\"!vm.showPaymentForm && paymentResponse.length <= 1\\\" style=margin-bottom:1px size=lg class=listItemAutocomplete ng-show=\\\"vm.couponStatus == 'untouched' || vm.couponStatus =='invalid'\\\"> <md-autocomplete md-selected-item=autocomplete.selectedItem md-search-text-change=autocomplete.searchTextChange(autocomplete.searchText) md-search-text=autocomplete.searchText md-no-cache=true md-selected-item-change=autocomplete.selectedItemChange(item) md-items=\\\"item in autocomplete.querySearch(autocomplete.searchText)\\\" md-item-text=item.couponId md-min-length=0 placeholder=\\\"{{dashboard ? 'Search coupons..' : 'Enter a coupon..'}}\\\" class=listItem ng-if=dashboard> <md-item-template> <span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.couponId}}</span> <span>{{vm.appliedCouponType(item)}}</span> </md-item-template> <md-not-found> No coupons found{{autocomplete.searchText.length > 0 ? (' matching\\\"' + autocomplete.searchText + '\\\".') : '.'}} </md-not-found> </md-autocomplete> <span class=\\\"paymentSubTitle total\\\"> <input id=#coupon ng-model=vm.couponQuery type=text class=couponInput ng-if=\\\"(vm.couponStatus =='untouched' || vm.couponStatus =='invalid') && !dashboard\\\" ng-change=\\\"vm.checkingCoupon = true\\\" placeholder=\\\"Enter coupon..\\\" ng-hide=vm.formWasBlocked to-uppercase/> </span> </list-item> <md-list-item ng-show=\\\"vm.couponStatus =='invalid' && vm.couponQuery.length > 0 && !vm.checkingCoupon\\\" class=\\\"paymentHeader md-2-line md-primary easeIn\\\" ng-if=!dashboard> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if=\\\"vm.couponStatus !='valid'\\\" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class=\\\"paymentSubTitle total\\\"> Invalid Coupon </span> </div> <div layout=row layout-align=\\\"end center\\\" flex> <ng-md-icon icon=clear class=listIcon ng-click=\\\"vm.couponQuery = '';\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item ng-if=agentsIsOn class=\\\"paymentHeader md-2-line md-primary\\\" ng-disabled=detailsForm.$invalid ng-show=\\\"vm.agentCodeStatus == 'valid'\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <span class=\\\"agentCodeText total\\\" flex> <b>Agent Code: </b> {{vm.appliedAgentCode.code}} </span> <ng-md-icon icon=clear class=\\\"listIcon remove-agent-code\\\" ng-click=vm.removeAgentCode(); ng-if=\\\"vm.agentCodeStatus =='valid'\\\" ng-hide=\\\"!dashboard && vm.formWasBlocked\\\"></ng-md-icon> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <md-progress-circular md-mode=indeterminate ng-show=\\\"vm.checkingAgentCode && vm.agentCodeQuery.length > 0\\\" class=\\\"listItemCircularProgress easeIn\\\" md-diameter=24px> </md-progress-circular> </div> </div> </md-list-item> <list-item ng-if=\\\"agentsIsOn && !vm.showPaymentForm && paymentResponse.length <= 1\\\" size=lg class=listItemAutocomplete ng-show=\\\"vm.agentCodeStatus == 'untouched' || vm.agentCodeStatus == 'invalid'\\\"> <md-autocomplete md-selected-item=agentAutocomplete.selectedItem md-search-text-change=agentAutocomplete.searchTextChange(agentAutocomplete.searchText) md-search-text=agentAutocomplete.searchText md-no-cache=true md-selected-item-change=agentAutocomplete.selectedItemChange(item) md-items=\\\"item in agentAutocomplete.querySearch(agentAutocomplete.searchText)\\\" md-item-text=item.code md-min-length=0 placeholder=\\\"Agent Code\\\" class=listItem ng-if=dashboard> <md-item-template> <span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.code}}</span> </md-item-template> <md-not-found> Agent code not found{{agentAutocomplete.searchText.length > 0 ? (' matching \\\"' + agentAutocomplete.searchText + '\\\".') : '.'}} </md-not-found> </md-autocomplete> <span class=\\\"paymentSubTitle total\\\"> <input id=#agentCode ng-model=vm.agentCodeQuery type=text class=agentInput ng-if=\\\"(vm.agentCodeStatus =='untouched' || vm.agentCodeStatus == 'invalid') && !dashboard\\\" ng-change=\\\"vm.checkingAgentCode = true\\\" placeholder=\\\"Enter agent code..\\\" ng-hide=vm.formWasBlocked to-uppercase/> </span> </list-item> <md-list-item ng-show=\\\"vm.agentCodeStatus =='invalid' && vm.agentCodeQuery.length > 0 && !vm.checkingAgentCode\\\" class=\\\"paymentHeader md-2-line md-primary easeIn\\\" ng-if=!dashboard> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if=\\\"vm.agentCodeStatus !='valid'\\\" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class=\\\"paymentSubTitle total\\\"> Invalid agent code </span> </div> <div layout=row layout-align=\\\"end center\\\" flex> <ng-md-icon icon=clear class=listIcon ng-click=\\\"vm.agentCodeQuery = '';\\\"></ng-md-icon> </div> </div> </md-list-item> <div ng-if=\\\"vm.attendeeSubtotals.length > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Attendees </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span class=activityTotal><abl-currency-directive price=vm.attendeeTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat=\\\"(key, value) in vm.attendeeSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{value.quantity}} x {{value.name}} @ <abl-currency-directive style=\\\"margin:0 4px\\\" price=value.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <abl-currency-directive price=value.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if=\\\"vm.addonSubtotals.length > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <span class=total>Add-ons </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span class=activityTotal><abl-currency-directive price=vm.addonTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat=\\\"addon in vm.addonSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{addon.quantity}} x {{addon.name}} @ <abl-currency-directive style=\\\"margin:0 4px\\\" price=addon.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <abl-currency-directive price=addon.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if=\\\"vm.taxTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <span class=total>Taxes and Fees </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span class=activityTotal><abl-currency-directive price=vm.taxTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> </div> <div ng-if=false> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Agent Commission </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=agentCommission>${{vm.pricing.agentCommission / 100 | number:2}}</span> </div> </div> </div> <div> <div class=\\\"md-list-item-text subtotalLineItem bottomTotal\\\" layout=row layout-align=\\\"space-between center\\\" flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <span class=\\\"\\\">Total </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span><abl-currency-directive price=\\\"(vm.pricing.total.amount || 0)\\\" currency={{vm.currency}}></abl-currency-directive> <span class=pricing ng-if=\\\"vm.pricing.total.amount > 0\\\"><ng-md-icon icon=information class=listIcon><md-tooltip md-direction=top>Original price: {{vm.pricing.total.originalAmount | ablCurrency : (vm.pricing.total.originalCurrency | lowercase)}}, Original currency: {{vm.pricing.total.originalCurrency}}</md-tooltip></ng-md-icon></span></span> </div> </div> </div> </md-list> </md-card> </md-content> \";\n\n/***/ }),\n/* 129 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<md-content> <div ng-if=\\\"paymentResponse != 'success' || !vm.showPaymentForm\\\"> <div class=activityPaymentSummaryCard> <list-item size=lg class=listItemHeader ng-click=vm.toggleGuestDetails() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_1 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" size=20></ng-md-icon> <span class=paymentSubTitle flex>Guest Details</span> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\"> <ng-md-icon icon=\\\"{{vm.guestDetailsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.guestDetailsExpanded layout=column class=listItemContentArea> <list-item ng-if=dashboard> <md-checkbox ng-model=sendConfirmationEmail class=listItemCheckbox>Send confirmation e-mail to client</md-checkbox> </list-item> <form name=guestDetailsForm novalidate> <div class=formContainer> <md-input-container class=\\\"md-block listItemInputContainer inputBottomMargin\\\" ng-if=!dashboard> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.fullName.$error ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be at least 3 chars.</div> <div ng-message=md-maxlength>Must be less than 100 chars.</div> </div> </md-input-container> <md-autocomplete ng-if=dashboard required md-input-name=autocompleteField md-input-minlength=3 md-input-maxlength=100 md-no-cache=true md-delay=250 md-selected-item=vm.clientSearchSelectedItem md-search-text=vm.formData.fullName md-items=\\\"item in vm.clients\\\" md-item-text=item.primaryContact.fullName md-floating-label=\\\"Full Name\\\" md-selected-item-change=vm.selectedClientChange(item) class=\\\"md-block listItemInputContainer\\\" md-menu-class=autocomplete-custom-template md-min-length=2> <md-item-template> <span class=item-title> <ng-md-icon icon=person class=\\\"listItemHeaderIcon sm\\\"></ng-md-icon> <span> {{item.primaryContact.fullName}} </span> </span> <span class=item-metadata> <span> <ng-md-icon icon=email class=\\\"listItemHeaderIcon sm\\\" md-colors=\\\"{fill: 'blue-grey-A200'}\\\"></ng-md-icon> {{item.primaryContact.email}} </span> </span> </md-item-template> <div ng-messages=guestDetailsForm.autocompleteField.$error ng-if=guestDetailsForm.autocompleteField.$touched> <div ng-message=required>You <b>must</b> enter a client name.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-autocomplete> <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=!dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 ng-pattern=/^\\\\w+([\\\\.-]?\\\\w+)*@\\\\w+([\\\\.-]?\\\\w+)*(\\\\.\\\\w{2,3})+$/ /> <div ng-messages=guestDetailsForm.mail.$error ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=pattern>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.mail.$error ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=pattern>Invalid e-mail address</div> <div ng-message=minlength>Must be at least 3 chars</div> <div ng-message=md-maxlength>Must be less than 100 chars</div> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=!dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer listItemAutoCompleteAfterContainer\\\" ng-if=dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail type=email md-maxlength=100 ng-minlength=3 ng-pattern=/^\\\\w+([\\\\.-]?\\\\w+)*@\\\\w+([\\\\.-]?\\\\w+)*(\\\\.\\\\w{2,3})+$/ /> <div ng-messages=guestDetailsForm.mail.$error ng-if=screenIsBig()> <div ng-message=pattern>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.mail.$error ng-if=!screenIsBig()> <div ng-message=pattern>Invalid e-mail address.</div> <div ng-message=minlength>Must be at least 3 chars</div> <div ng-message=md-maxlength>Must be less than 100 chars</div> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber type=text /> <div ng-messages=guestDetailsForm.phone.$error> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer\\\"> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align=\\\"end center\\\"> <md-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=!vm.areGuestDetailsValid(guestDetailsForm) ng-click=\\\"vm.goToNextStep('guestDetailsStep')\\\">{{vm.nextButtonLabel('guest').label}}</md-button> </div> </div> </form> </div> <md-divider class=no-margin></md-divider> <list-item size=lg class=listItemHeader ng-click=vm.toggleAttendees() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_2 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" size=20></ng-md-icon> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() >= 0\\\" flex>Attendees <span ng-show=\\\"vm.countAttendees() < 4\\\"> {{vm.countAttendees()}} spot{{vm.countAttendees() != 1 ? 's' : ''}} remaining</span></span> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() < 0\\\" flex>Attendees <span class=red> <strong> {{vm.countAttendees() * -1}}</strong> spot{{((vm.countAttendees() * -1) > 1 || (vm.countAttendees() * -1) == 0) ? 's' : ''}} over maximum occupancy</span></span> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\"> <ng-md-icon icon=\\\"{{vm.attendeesExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.attendeesExpanded ng-class=vm.areAttendeesValid() layout=column class=listItemContentArea> <div flex ng-repeat=\\\"attendee in vm.attendees\\\"> <list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row> <span class=lineItemSubDetail>{{ attendee.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column class=addOnAdjusters layout-align=\\\"center end\\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline\\\" class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end\\\"> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); type=number min=0 md-select-on-focus> </div> </div> </div> </list-item> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin> <progress-button class=\\\"md-raised md-primary md-hue-2 md-{{vm.theme}}-theme\\\" ng-disabled=\\\"!vm.areAttendeesValid() || vm.pricingQuoteStarted\\\" loading=vm.pricingQuoteStarted on-click=\\\"vm.goToNextStep('attendeesStep')\\\" spinner=3 label=\\\"{{vm.nextButtonLabel('attendees').label}}\\\"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> <div ng-if=\\\"vm.addons.length > 0\\\"> <list-item class=\\\"paymentHeader listItemHeader md-2-line\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=vm.toggleAddons() layout=column flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_3 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" size=20></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\"> <ng-md-icon ng-show=\\\"vm.addOnsSelected == 1\\\" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon=\\\"{{vm.addonsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </list-item> <div layout=column ng-show=vm.addonsExpanded ng-class=vm.areAddonsValid() class=listItemContentArea> <div flex ng-repeat=\\\"addon in vm.addons\\\"> <list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=\\\"\\\"> <span class=lineItemSubDetail>{{ addon.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\" flex> <div layout=column class=addOnAdjusters layout-align=\\\"center end\\\"> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAddon($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline\\\" class=listIconSub ng-click=\\\"vm.adjustAddon($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end\\\"> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.addonsChanged(); md-select-on-focus type=number> </div> </div> </list-item> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin> <progress-button ng-if=\\\"vm.isNextStepPayment('addons')\\\" class=\\\"md-raised md-primary md-hue-2 md-{{vm.theme}}-theme\\\" ng-disabled=vm.pricingQuoteStarted loading=vm.pricingQuoteStarted on-click=\\\"vm.goToNextStep('addonsStep')\\\" spinner=3 label=\\\"{{vm.nextButtonLabel('addons').label}}\\\"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> </div> <div ng-if=\\\"vm.questions.length > 0\\\"> <list-item class=\\\"paymentHeader listItemHeader md-2-line\\\" ng-disabled=\\\"guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1\\\" ng-click=vm.toggleQuestions()> <div layout=row class=list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_4 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0\\\" size=20></ng-md-icon> <ng-md-icon icon=filter_3 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length == 0\\\" size=20></ng-md-icon> <span class=paymentSubTitle>Booking Questions <i class=\\\"fa fa-angle-right\\\" aria-hidden=true></i> {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\" flex> <ng-md-icon icon=\\\"{{vm.questionsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </list-item> <div ng-show=vm.questionsExpanded ng-class=!vm.areBookingQuestionsValid() class=listItemContentArea layout=column> <div flex class=\\\"questionForm slideDown\\\"> <form name=questionForm class=formContainerQuestions> <div ng-repeat=\\\"question in vm.questions\\\" class=\\\"listItemInputContainer listItemInputContainerNoMargin\\\"> <div layout=column layout-align=\\\"center stretch\\\" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align=\\\"center start\\\"> <ng-md-icon icon=\\\"{{vm.bookingQuestions[$index].length > 0 ? 'done' : 'priority_high'}}\\\" class=inputStatusIcon></ng-md-icon> <md-input-container class=md-block flex> <textarea name=question{{$index}} ng-model=vm.bookingQuestions[$index] minlength=2 maxlength=300 rows=1 required></textarea> <div class=errors ng-messages=\\\"questionForm['question' + $index].$error\\\" ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be 2 or more characters long.</div> <div ng-message=maxlength>Must be 300 or fewer characters long.</div> </div> <div class=errors ng-messages=\\\"questionForm['question' + $index].$error\\\" ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be 2 or more chars.</div> <div ng-message=maxlength>Must be 300 or fewer chars</div> </div> </md-input-container> </div> </div> </div> </form> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin> <span flex style=text-align:right;color:red;font-size:12px ng-if=\\\"!dashboard && !vm.areBookingQuestionsValid()\\\"> Please answer all questions before proceeding to payment. Write N/A if a question does not apply <md-checkbox ng-if=false ng-model=vm.answerAllQuestionsChecked ng-true-value=\\\"'yes'\\\" ng-false-value=\\\"'no'\\\" aria-label=\\\"\\\"> Answer all question ? </md-checkbox> </span> <progress-button class=\\\"md-raised md-primary md-hue-2 md-{{vm.theme}}-theme\\\" ng-disabled=\\\"!dashboard && !vm.isFinishButtonValid\\\" loading=vm.pricingQuoteStarted on-click=\\\"vm.goToNextStep('paymentStep')\\\" spinner=3 label=\\\"{{vm.nextButtonLabel('questions').label}}\\\"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> </div> <div class=payment-section-new> <list-item class=\\\"paymentHeader listItemHeader md-2-line\\\" ng-disabled=!vm.isPaymentValid() style=\\\"border-bottom:1px solid #e0e0e0\\\"> <div layout=row layout-align=\\\"start center\\\" flex=80> <ng-md-icon icon=filter_5 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0 && vm.questions.length > 0\\\" size=20></ng-md-icon> <ng-md-icon icon=filter_4 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0 && vm.questions.length == 0 || vm.addons.length == 0 && vm.questions.length > 0\\\" size=20></ng-md-icon> <ng-md-icon icon=filter_3 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length == 0 && vm.questions.length == 0\\\" size=20></ng-md-icon> <span class=paymentSubTitle>Payment Details</span> </div> <div layout=row layout-align=\\\"end center\\\" flex=20> <div layout=column layout-align=\\\"center end\\\" flex> </div> </div> </list-item> <div ng-show=vm.stripePaymentExpanded layout=column> <div class=listItemContentArea layout=column style=border-top:none> <div flex class=\\\"radioGroup listItemInputContainer listItemInputContainerNoMargin\\\" ng-if=dashboard> <md-radio-group ng-model=vm.paymentMethod> <md-radio-button value=credit ng-if=\\\"vm.pricing.total.amount > 0\\\"> Credit Card (Online)</md-radio-button> <md-radio-button value=cash>Cash</md-radio-button> <md-radio-button value=debit> Office Point of Sale (POS) </md-radio-button> <md-radio-button value=gift> Gift Card </md-radio-button> <md-radio-button value=transfer> Bank Transfer </md-radio-button> <md-radio-button value=reserved> Reservation - Pay Later </md-radio-button> </md-radio-group> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin ng-if=\\\"vm.paymentMethod != 'credit' && dashboard\\\"> <progress-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1\\\" loading=\\\"bookingSuccessResponse == 'processing'\\\" on-click=vm.submitNonCreditCardBooking() spinner=3 label=\\\"{{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}\\\"></progress-button> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin ng-if=\\\"vm.paymentMethod == 'credit' && dashboard\\\"> <progress-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1\\\" loading=\\\"bookingSuccessResponse == 'processing'\\\" on-click=vm.goToPay() spinner=3 label=\\\"{{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}\\\"></progress-button> </div> <div flex ng-if=!dashboard> <md-card class=\\\"transparent no-margin\\\" ng-show=\\\"vm.showPaymentForm && paymentResponse.length < 1\\\"> <div ng-if=vm.loadingIframe layout=row layout-align=\\\"space-around center\\\" style=padding:20px> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div> </div> </div> </div> </div> </div></md-content> \";\n\n/***/ }),\n/* 130 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div flex layout=column> <div ng-if=\\\"dashboard && paymentResponse.length == 0\\\" flex ng-include=\\\"'dashboard.html'\\\" layout=column></div> <div ng-if=\\\"!dashboard && paymentResponse.length == 0\\\" flex ng-include=\\\"'no-dashboard.html'\\\" layout=column></div> <div flex ng-show=\\\"paymentResponse.length > 0\\\" class=paymentResponseContainer layout=column> <div flex layout=column class=paymentSummaryCardResponse> <div flex ng-if=\\\"paymentResponse == 'success'\\\" class=easeIn> <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">{{bookingSuccessResponse.data.booking.status == 'unpaid' ? 'Booking' : 'Payment'}} Complete</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=check class=listIcon ng-style=\\\"{fill: 'green'}\\\"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation ng-if=dashboard> <h3>Congratulations!</h3> <p>Your {{bookingSuccessResponse.data.booking.status == 'unpaid' ? 'reservation' : 'booking'}} is confirmed.</p> <p>{{vm.formData.fullName}} is attending {{bookingSuccessResponse.data.booking.title}} on {{formatDate(bookingSuccessResponse.data.booking.startTime, 'LL')}}</p> <p>A confirmation email will be sent to {{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</p> <div class=booking-id>The reference ID is: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> <div class=confirmation ng-if=!dashboard> <h3>Congratulations!</h3> <p>Your booking is confirmed.</p> <p>You will receive a confirmation email at: <strong>{{vm.formData['mail']}}</strong></p> <p class=margin-top>For questions about your booking, please contact:</p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].companyName}} ({{bookingSuccessResponse.data.booking.organizations[0].primaryContact.phoneNumber}})</strong></p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</strong></p> <div class=booking-id>Booking ID: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div style=margin-top:25px layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> </div> </div> <div flex ng-if=\\\"paymentResponse == 'failed'\\\"> <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Failed</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=error class=listIcon ng-style=\\\"{fill: 'red'}\\\"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> <div style=margin-top:25px layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.payNow()>Try Again</md-button> </span> </div> </div> </div> </div> <div flex ng-if=\\\"paymentResponse == 'processing'\\\"> <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Processing</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=watch_later class=listIcon ng-style=\\\"{fill: 'red'}\\\"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> <div style=margin-top:25px layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"goToState('home')\\\">Return</md-button> </span> </div> </div> </div> </div> </div> </div> </div>\";\n\n/***/ }),\n/* 131 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div flex layout=column> <div flex ng-if=screenIsBig() layout=row class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div flex layout=column> <div class=left-panel flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div flex layout=column> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> <div flex ng-if=!screenIsBig() class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div layout=column> <div flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div layout=column> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> <md-card flex layout=column style=min-height:350px ng-show=\\\"vm.showPaymentForm && paymentResponse.length < 1\\\"> <div flex layout=column layout-align=\\\"center center\\\" ng-if=vm.paymentFormIsLoading> <md-progress-circular md-mode=indeterminate md-diameter=40></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div>\";\n\n/***/ }),\n/* 132 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = \"<div flex layout=column> <div class=payment-icons-bar flex=none layout=row layout-align=\\\"center center\\\"> <div flex style=height:32px> <img class=payment-icons-bar-left src=https://s3.amazonaws.com/assets.ablsolution.com/Dashboard/ablpay2.png /> </div> <div flex style=text-align:right> <img class=payment-icons-bar-right src=https://s3.amazonaws.com/assets.ablsolution.com/Dashboard/paylock.png /> </div> </div> <div flex ng-if=screenIsBig() layout=row class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div flex layout=column> <div class=left-panel-no-dashboard flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div flex layout=column class=rightCheckoutPanel> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> <div flex ng-if=!screenIsBig() class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div> <div class=left-panel-no-dashboard flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div class=rightCheckoutPanel> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> </div>\";\n\n/***/ }),\n/* 133 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = activityBookValidator;\n\tfunction activityBookValidator(vm, $http, $stateParams) {\n\n\t    vm.searchClients = function (query) {\n\t        return Rx.Observable.fromPromise($http({\n\t            method: 'GET',\n\t            url: vm.config.apiVersion + \"/clients?fullName=\" + text,\n\t            headers: {\n\t                'x-abl-access-key': $stateParams.merchant,\n\t                'x-abl-date': Date.parse(new Date().toISOString())\n\t            }\n\t        })).select(function (response) {\n\t            console.log(response);\n\t            return response;\n\t        });\n\t    };\n\n\t    return vm;\n\t}\n\n/***/ }),\n/* 134 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t/**\n\t * @class abl-sdk-feathers.components\n\t * @hidden\n\t */\n\n\t/**\n\t * @function activity-AdjustmentControls\n\t * @memberOf abl-sdk-feathers.components\n\t * @description Parent component controller for shared activity adjustment functions.\n\t * @example  <activity-adjustment-controls></activity-adjustment-controls>\n\t */\n\n\tfunction activityAdjustmentControls() {\n\t    var vm = this;\n\n\t    this.$onInit = function () {\n\t        console.log('activityAdjustmentControls', this);\n\t    };\n\n\t    this.$onChanges = function (changesObj) {};\n\n\t    this.$postLink = function () {};\n\n\t    vm.addCharge = function (label, price) {\n\t        console.log(label, price);\n\t    };\n\t};\n\n\texports.default = activityAdjustmentControls;\n\n/***/ })\n]);\n\n\n// WEBPACK FOOTER //\n// abl-sdk.min.js","//Including independent module source code for packaging\nconst ablBook = require('./activity/activity-book.js');\nimport RxJS from 'rx';\n\nconst jQuery = window.jQuery;\n\nimport feathers from 'feathers-client';\nimport localstorage from 'feathers-localstorage';\nimport feathersRx from 'feathers-reactive';\nimport superagent from 'superagent';\n\nimport rxa from 'rx-angular/dist/rx.angular';\n\n// import feathersAuthentication from './auth';\nimport setupUtilFunctions from './utils';\n\nimport styles from './styles.css';\nimport helperStyles from './lib/helper-styles.css';\nimport ngMdIcons from './angular-material-icons.css';\n\nimport rest from './rest';\n\nvar sdkProvider = function(settings) {\n  var endpoint = null;\n  var apiKey = null;\n  var socketOpts = null;\n  var useSocket = true;\n  var services = [];\n\n  //Configuration\n  return {\n    useSocket: function(socketEnabled) {\n      useSocket = !!socketEnabled;\n    },\n    setSocketOpts: function(opts) {\n      socketOpts = opts;\n    },\n    setEndpoint: function(newEndpoint) {\n      endpoint = newEndpoint;\n    },\n    setApiKey: function(key) {\n      apiKey = key;\n    },\n    setServices: function(newServices) {\n      services = newServices;\n    },\n    getSettings: function() {\n      return endpoint;\n    },\n    $get: [\n      '$injector',\n      '$timeout',\n      '$log',\n      '$mdToast',\n      '$http',\n      function($injector, $timeout, $log, $mdToast, $http) {\n        var $rootScope = $injector.get('$rootScope');\n        var that = this;\n\n        if (!endpoint) {\n          this.app = {};\n          return this.app;\n        }\n\n        $log.debug('config', $rootScope.config);\n\n        this.app = feathers()\n          .configure(feathersRx(RxJS)) //feathers-reactive\n          .configure(feathers.hooks())\n          .use(\n            'cache',\n            localstorage({\n              name: 'abl' + ($rootScope.config.DASHBOARD ? '-dash' : ''),\n              storage: window.localStorage\n            })\n          );\n\n        this.app.endpoint = endpoint;\n        this.app.apiKey = apiKey;\n\n        var xsrfCookieIndex = document.cookie.indexOf('XSRF-TOKEN=');\n\n        var xsrfToken = '';\n\n        console.log(document.cookie);\n\n        this.app.headers = {\n          'Content-Type': 'application/json;charset=utf-8'\n        };\n\n        if (apiKey) {\n          this.app.headers = {\n            'X-ABL-Access-Key': apiKey,\n            'X-ABL-Date': Date.parse(new Date().toISOString()),\n            'Content-Type': 'application/json;charset=utf-8'\n          };\n        }\n\n        // if (xsrfCookieIndex > -1) {   var nextCharacter = xsrfCookieIndex + 12;   for\n        // (var i = xsrfCookieIndex + 11; i < document.cookie.length; i++) {     if\n        // (document.cookie.substring(i, i + 1) == ' ' || document.cookie.substring(i, i\n        // + 1) == ';')       i = document.cookie.length;     else       xsrfToken +=\n        // document         .cookie         .substring(i, i + 1);     }\n        // console.log('xsrf cookie', xsrfToken); }\n\n        if (useSocket) {\n          $log.debug('endpoint', endpoint);\n          this.socket = io(endpoint, socketOpts);\n          this.app.configure(feathers.socketio(this.socket));\n        } else {\n          this.app.configure(\n            feathers.rest(endpoint).jquery(window.jQuery, {\n              headers: that.app.headers,\n              withCredentials: true\n            })\n          );\n          // .configure(feathers.rest(endpoint).superagent(superagent, {   headers:\n          // that.app.headers,   withCredentials: true })) Hook for adding headers to all\n          // service calls\n          function addHeadersHook(hook) {\n            var x = document.cookie\n              .split(';')\n              .map(function(s) {\n                return s.split('=');\n              })\n              .reduce(function(r, a) {\n                r[a[0].trim()] = a[1];\n                return r;\n              }, {});\n\n            xsrfToken = x['XSRF-TOKEN'] || undefined;\n            console.log('xsrf ', xsrfToken);\n\n            if (xsrfToken) that.app.headers['X-XSRF-TOKEN'] = xsrfToken;\n\n            hook.params.headers = Object.assign(\n              {},\n              that.app.headers,\n              hook.params.headers\n            );\n            hook.params.withCredentials = true;\n          }\n\n          function afterRequestHook(hook) {\n            // console.log('afterRequestHook ', hook);\n          }\n\n          // Mixin automatically adds hook to all services\n          this.app.mixins.push(function(service) {\n            service.before(addHeadersHook);\n            service.after(afterRequestHook);\n          });\n        }\n\n        setupUtilFunctions(this.app, $mdToast, $rootScope);\n\n        rest(this.app, $http);\n\n        $rootScope.loading = true;\n\n        this.app.loadingTimeout = null;\n\n        this.app.loadingTimeout = $timeout(function() {\n          $rootScope.loading = false;\n        }, 1500);\n\n        //Add timeout\n        $rootScope.afterRender = function(current, total) {\n          $timeout.cancel(this.loadingTimeout);\n          this.loadingTimeout = $timeout(function() {\n            $rootScope.loading = false;\n          }, 1500);\n        };\n\n        window.$abl = this.app;\n        window.$http = $http;\n\n        return this.app;\n      }\n    ]\n  };\n};\n\n//Old naming convention, left for backwards compatibility\nvar feathersSdk = [\n  function $feathersProvider() {\n    return sdkProvider('feathers');\n  }\n];\n\nvar ablSdk = [\n  function $ablProvider() {\n    return sdkProvider('abl');\n  }\n];\n\nimport toUppercase from './lib/directives/toUppercase.directive';\nimport formatPhone from './lib/directives/formatPhone.directive';\nimport onFocus from './lib/directives/focusParent.directive';\nimport size from './lib/directives/size.directive';\n\nimport navigatorService from './lib/services/navigator.service';\n\nimport col from './lib/components/col.component';\n\nimport progressButton from './lib/components/progressButton.component';\nimport progressButtonStyles from './lib/components/progressButton.css';\n\nimport listItem from './lib/components/listItem.component';\nimport listItemNumericControl from './lib/components/listItemNumericControl.component';\nimport listItemAddCharge from './lib/components/listItemAddCharge.component';\nimport listItemHeader from './lib/components/listItemHeader.component';\n\n/**\n * @namespace abl-sdk-feathers\n * @requires feathers\n * @requires RxJS\n * @requires rx-angular\n * @requires socket.io-client\n\n */\nexport default angular\n  .module('abl-sdk-feathers', ['ngMaterial', 'rx', 'currency-component'])\n  /**\n   * @class abl-sdk-feathers.$abl\n   */\n  .provider('$abl', ablSdk)\n  .provider('$feathers', feathersSdk)\n  .filter('startFrom', function() {\n    return function(input, start) {\n      start = +start; //parse to int\n      return input.slice(start);\n    };\n  })\n  .service('navigatorService', navigatorService)\n  .directive('toUppercase', toUppercase)\n  .directive('formatPhone', formatPhone)\n  .directive('onFocus', onFocus)\n  // .directive('size', size)\n  .directive('formatPhone', formatPhone)\n  .component('colSection', col)\n  .component('progressButton', progressButton)\n  .component('listItem', listItem)\n  .component('listItemNumericControl', listItemNumericControl)\n  .component('listItemAddCharge', listItemAddCharge)\n  .component('listItemHeader', listItemHeader);\n\n\n\n// WEBPACK FOOTER //\n// ./src/abl-sdk.js","/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('component-emitter');\nvar RequestBase = require('./request-base');\nvar isObject = require('./is-object');\nvar ResponseBase = require('./response-base');\nvar Agent = require('./agent-base');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = exports = module.exports = function(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new exports.Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new exports.Request('GET', method);\n  }\n\n  return new exports.Request(method, url);\n}\n\nexports.Request = Request;\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only version of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    pushEncodedKeyValuePair(pairs, key, obj[key]);\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (val != null) {\n    if (Array.isArray(val)) {\n      val.forEach(function(v) {\n        pushEncodedKeyValuePair(pairs, key, v);\n      });\n    } else if (isObject(val)) {\n      for(var subkey in val) {\n        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n      }\n    } else {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(val));\n    }\n  } else if (val === null) {\n    pairs.push(encodeURIComponent(key));\n  }\n}\n\n/**\n * Expose serialization method.\n */\n\nrequest.serializeObject = serialize;\n\n/**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'text/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\nrequest.serialize = {\n  'application/x-www-form-urlencoded': serialize,\n  'application/json': JSON.stringify\n};\n\n/**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    if (index === -1) { // could be empty line, just skip it\n      continue;\n    }\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  // should match /json or +json\n  // but not /json-seq\n  return /[\\/+]json($|[^-\\w])/.test(mime);\n}\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req) {\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  var status = this.xhr.status;\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n  this._setStatusProperties(status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n\n  if (null === this.text && req._responseType) {\n    this.body = this.xhr.response;\n  } else {\n    this.body = this.req.method != 'HEAD'\n      ? this._parseBody(this.text ? this.text : this.xhr.response)\n      : null;\n  }\n}\n\nResponseBase(Response.prototype);\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str) {\n  var parse = request.parse[this.type];\n  if (this.req._parser) {\n    return this.req._parser(this, str);\n  }\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      if (self.xhr) {\n        // ie9 doesn't have 'response' property\n        err.rawResponse = typeof self.xhr.responseType == 'undefined' ? self.xhr.responseText : self.xhr.response;\n        // issue #876: return the http status code if the response parsing fails\n        err.status = self.xhr.status ? self.xhr.status : null;\n        err.statusCode = err.status; // backwards-compat only\n      } else {\n        err.rawResponse = null;\n        err.status = null;\n      }\n\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (!self._isResponseOK(res)) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n      }\n    } catch(custom_err) {\n      new_err = custom_err; // ok() callback can throw\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      new_err.original = err;\n      new_err.response = res;\n      new_err.status = res.status;\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `RequestBase`.\n */\n\nEmitter(Request.prototype);\nRequestBase(Request.prototype);\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} [pass] optional in case of using 'bearer' as type\n * @param {Object} options with 'type' property 'auto', 'basic' or 'bearer' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (1 === arguments.length) pass = '';\n  if (typeof pass === 'object' && pass !== null) { // pass is optional and can be replaced with options\n    options = pass;\n    pass = '';\n  }\n  if (!options) {\n    options = {\n      type: 'function' === typeof btoa ? 'basic' : 'auto',\n    };\n  }\n\n  var encoder = function(string) {\n    if ('function' === typeof btoa) {\n      return btoa(string);\n    }\n    throw new Error('Cannot use basic auth, btoa is not a function');\n  };\n\n  return this._auth(user, pass, options, encoder);\n};\n\n/**\n * Add query-string `val`.\n *\n * Examples:\n *\n *   request.get('/shoes')\n *     .query('size=10')\n *     .query({ color: 'blue' })\n *\n * @param {Object|String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `options` (or filename).\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String|Object} options\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, options){\n  if (file) {\n    if (this._data) {\n      throw Error(\"superagent can't mix .send() and .attach()\");\n    }\n\n    this._getFormData().append(field, file, options || file.name);\n  }\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  if (this._shouldRetry(err, res)) {\n    return this._retry();\n  }\n\n  var fn = this._callback;\n  this.clearTimeout();\n\n  if (err) {\n    if (this._maxRetries) err.retries = this._retries - 1;\n    this.emit('error', err);\n  }\n\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n// This only warns, because the request is still likely to work\nRequest.prototype.buffer = Request.prototype.ca = Request.prototype.agent = function(){\n  console.warn(\"This is not supported in browser version of superagent\");\n  return this;\n};\n\n// This throws, because it can't send/receive data as expected\nRequest.prototype.pipe = Request.prototype.write = function(){\n  throw Error(\"Streaming is not supported in browser version of superagent\");\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\nRequest.prototype._isHost = function _isHost(obj) {\n  // Native objects stringify to [object File], [object Blob], [object FormData], etc.\n  return obj && 'object' === typeof obj && !Array.isArray(obj) && Object.prototype.toString.call(obj) !== '[object Object]';\n}\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  if (this._endCalled) {\n    console.warn(\"Warning: .end() was called twice. This is not supported in superagent\");\n  }\n  this._endCalled = true;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // querystring\n  this._finalizeQueryString();\n\n  return this._end();\n};\n\nRequest.prototype._end = function() {\n  var self = this;\n  var xhr = (this.xhr = request.getXHR());\n  var data = this._formData || this._data;\n\n  this._setTimeouts();\n\n  // state change\n  xhr.onreadystatechange = function(){\n    var readyState = xhr.readyState;\n    if (readyState >= 2 && self._responseTimeoutTimer) {\n      clearTimeout(self._responseTimeoutTimer);\n    }\n    if (4 != readyState) {\n      return;\n    }\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (!status) {\n      if (self.timedout || self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(direction, e) {\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = direction;\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    try {\n      xhr.onprogress = handleProgress.bind(null, 'download');\n      if (xhr.upload) {\n        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n      }\n    } catch(e) {\n      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n      // Reported here:\n      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n    }\n  }\n\n  // initiate request\n  try {\n    if (this.username && this.password) {\n      xhr.open(this.method, this.url, true, this.username, this.password);\n    } else {\n      xhr.open(this.method, this.url, true);\n    }\n  } catch (err) {\n    // see #1149\n    return this.callback(err);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if (!this._formData && 'GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) {\n      serialize = request.serialize['application/json'];\n    }\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n\n    if (this.header.hasOwnProperty(field))\n      xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\nrequest.agent = function() {\n  return new Agent();\n};\n\n[\"GET\", \"POST\", \"OPTIONS\", \"PATCH\", \"PUT\", \"DELETE\"].forEach(function(method) {\n  Agent.prototype[method.toLowerCase()] = function(url, fn) {\n    var req = new request.Request(method, url);\n    this._setDefaults(req);\n    if (fn) {\n      req.end(fn);\n    }\n    return req;\n  };\n});\n\nAgent.prototype.del = Agent.prototype['delete'];\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn) {\n  var req = request('GET', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn) {\n  var req = request('HEAD', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn) {\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, data, fn) {\n  var req = request('DELETE', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n}\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn) {\n  var req = request('PATCH', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn) {\n  var req = request('POST', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn) {\n  var req = request('PUT', url);\n  if ('function' == typeof data) (fn = data), (data = null);\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/client.js\n// module id = 84\n// module chunks = 0","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/~/component-emitter/index.js\n// module id = 85\n// module chunks = 0","'use strict';\n\n/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Expose `RequestBase`.\n */\n\nmodule.exports = RequestBase;\n\n/**\n * Initialize a new `RequestBase`.\n *\n * @api public\n */\n\nfunction RequestBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in RequestBase.prototype) {\n    obj[key] = RequestBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.clearTimeout = function _clearTimeout(){\n  clearTimeout(this._timer);\n  clearTimeout(this._responseTimeoutTimer);\n  delete this._timer;\n  delete this._responseTimeoutTimer;\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Set format of binary response body.\n * In browser valid formats are 'blob' and 'arraybuffer',\n * which return Blob and ArrayBuffer, respectively.\n *\n * In Node all values result in Buffer.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeouts.\n *\n * - response timeout is time between sending request and receiving the first byte of the response. Includes DNS and connection time.\n * - deadline is the time from start of the request to receiving response body in full. If the deadline is too short large files may not load at all on slow connections.\n *\n * Value of 0 or false means no timeout.\n *\n * @param {Number|Object} ms or {response, deadline}\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.timeout = function timeout(options){\n  if (!options || 'object' !== typeof options) {\n    this._timeout = options;\n    this._responseTimeout = 0;\n    return this;\n  }\n\n  for(var option in options) {\n    switch(option) {\n      case 'deadline':\n        this._timeout = options.deadline;\n        break;\n      case 'response':\n        this._responseTimeout = options.response;\n        break;\n      default:\n        console.warn(\"Unknown timeout option\", option);\n    }\n  }\n  return this;\n};\n\n/**\n * Set number of retry attempts on error.\n *\n * Failed requests will be retried 'count' times if timeout or err.code >= 500.\n *\n * @param {Number} count\n * @param {Function} [fn]\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.retry = function retry(count, fn){\n  // Default to 1 if no count passed or true\n  if (arguments.length === 0 || count === true) count = 1;\n  if (count <= 0) count = 0;\n  this._maxRetries = count;\n  this._retries = 0;\n  this._retryCallback = fn;\n  return this;\n};\n\nvar ERROR_CODES = [\n  'ECONNRESET',\n  'ETIMEDOUT',\n  'EADDRINFO',\n  'ESOCKETTIMEDOUT'\n];\n\n/**\n * Determine if a request should be retried.\n * (Borrowed from segmentio/superagent-retry)\n *\n * @param {Error} err\n * @param {Response} [res]\n * @returns {Boolean}\n */\nRequestBase.prototype._shouldRetry = function(err, res) {\n  if (!this._maxRetries || this._retries++ >= this._maxRetries) {\n    return false;\n  }\n  if (this._retryCallback) {\n    try {\n      var override = this._retryCallback(err, res);\n      if (override === true) return true;\n      if (override === false) return false;\n      // undefined falls back to defaults\n    } catch(e) {\n      console.error(e);\n    }\n  }\n  if (res && res.status && res.status >= 500 && res.status != 501) return true;\n  if (err) {\n    if (err.code && ~ERROR_CODES.indexOf(err.code)) return true;\n    // Superagent timeout\n    if (err.timeout && err.code == 'ECONNABORTED') return true;\n    if (err.crossDomain) return true;\n  }\n  return false;\n};\n\n/**\n * Retry request\n *\n * @return {Request} for chaining\n * @api private\n */\n\nRequestBase.prototype._retry = function() {\n\n  this.clearTimeout();\n\n  // node\n  if (this.req) {\n    this.req = null;\n    this.req = this.request();\n  }\n\n  this._aborted = false;\n  this.timedout = false;\n\n  return this._end();\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} [reject]\n * @return {Request}\n */\n\nRequestBase.prototype.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    if (this._endCalled) {\n      console.warn(\"Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises\");\n    }\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject) {\n      self.end(function(err, res) {\n        if (err) innerReject(err);\n        else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n};\n\nRequestBase.prototype['catch'] = function(cb) {\n  return this.then(undefined, cb);\n};\n\n/**\n * Allow for extension\n */\n\nRequestBase.prototype.use = function use(fn) {\n  fn(this);\n  return this;\n};\n\nRequestBase.prototype.ok = function(cb) {\n  if ('function' !== typeof cb) throw Error(\"Callback required\");\n  this._okCallback = cb;\n  return this;\n};\n\nRequestBase.prototype._isResponseOK = function(res) {\n  if (!res) {\n    return false;\n  }\n\n  if (this._okCallback) {\n    return this._okCallback(res);\n  }\n\n  return res.status >= 200 && res.status < 300;\n};\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nRequestBase.prototype.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nRequestBase.prototype.getHeader = RequestBase.prototype.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nRequestBase.prototype.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val`, or multiple fields with one object\n * for \"multipart/form-data\" request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n *\n * request.post('/upload')\n *   .field({ foo: 'bar', baz: 'qux' })\n *   .end(callback);\n * ```\n *\n * @param {String|Object} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nRequestBase.prototype.field = function(name, val) {\n  // name should be either a string or an object.\n  if (null === name || undefined === name) {\n    throw new Error('.field(name, val) name can not be empty');\n  }\n\n  if (this._data) {\n    console.error(\".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObject(name)) {\n    for (var key in name) {\n      this.field(key, name[key]);\n    }\n    return this;\n  }\n\n  if (Array.isArray(val)) {\n    for (var i in val) {\n      this.field(name, val[i]);\n    }\n    return this;\n  }\n\n  // val should be defined now\n  if (null === val || undefined === val) {\n    throw new Error('.field(name, val) val can not be empty');\n  }\n  if ('boolean' === typeof val) {\n    val = '' + val;\n  }\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nRequestBase.prototype.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\nRequestBase.prototype._auth = function(user, pass, options, base64Encoder) {\n  switch (options.type) {\n    case 'basic':\n      this.set('Authorization', 'Basic ' + base64Encoder(user + ':' + pass));\n      break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n      break;\n\n    case 'bearer': // usage would be .auth(accessToken, { type: 'bearer' })\n      this.set('Authorization', 'Bearer ' + user);\n      break;\n  }\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nRequestBase.prototype.withCredentials = function(on) {\n  // This is browser-only functionality. Node side is no-op.\n  if (on == undefined) on = true;\n  this._withCredentials = on;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Maximum size of buffered response body, in bytes. Counts uncompressed size.\n * Default 200MB.\n *\n * @param {Number} n\n * @return {Request} for chaining\n */\nRequestBase.prototype.maxResponseSize = function(n){\n  if ('number' !== typeof n) {\n    throw TypeError(\"Invalid argument\");\n  }\n  this._maxResponseSize = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nRequestBase.prototype.toJSON = function() {\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header,\n  };\n};\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.send = function(data){\n  var isObj = isObject(data);\n  var type = this._header['content-type'];\n\n  if (this._formData) {\n    console.error(\".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObj && !this._data) {\n    if (Array.isArray(data)) {\n      this._data = [];\n    } else if (!this._isHost(data)) {\n      this._data = {};\n    }\n  } else if (data && this._data && this._isHost(this._data)) {\n    throw Error(\"Can't merge these send calls\");\n  }\n\n  // merge\n  if (isObj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!isObj || this._isHost(data)) {\n    return this;\n  }\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n/**\n * Sort `querystring` by the sort function\n *\n *\n * Examples:\n *\n *       // default order\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery()\n *         .end(callback)\n *\n *       // customized sort function\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery(function(a, b){\n *           return a.length - b.length;\n *         })\n *         .end(callback)\n *\n *\n * @param {Function} sort\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.sortQuery = function(sort) {\n  // _sort default to true but otherwise can be a function or boolean\n  this._sort = typeof sort === 'undefined' ? true : sort;\n  return this;\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\nRequestBase.prototype._finalizeQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += (this.url.indexOf('?') >= 0 ? '&' : '?') + query;\n  }\n  this._query.length = 0; // Makes the call idempotent\n\n  if (this._sort) {\n    var index = this.url.indexOf('?');\n    if (index >= 0) {\n      var queryArr = this.url.substring(index + 1).split('&');\n      if ('function' === typeof this._sort) {\n        queryArr.sort(this._sort);\n      } else {\n        queryArr.sort();\n      }\n      this.url = this.url.substring(0, index) + '?' + queryArr.join('&');\n    }\n  }\n};\n\n// For backwards compat only\nRequestBase.prototype._appendQueryString = function() {console.trace(\"Unsupported\");}\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequestBase.prototype._timeoutError = function(reason, timeout, errno){\n  if (this._aborted) {\n    return;\n  }\n  var err = new Error(reason + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  err.code = 'ECONNABORTED';\n  err.errno = errno;\n  this.timedout = true;\n  this.abort();\n  this.callback(err);\n};\n\nRequestBase.prototype._setTimeouts = function() {\n  var self = this;\n\n  // deadline\n  if (this._timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self._timeoutError('Timeout of ', self._timeout, 'ETIME');\n    }, this._timeout);\n  }\n  // response timeout\n  if (this._responseTimeout && !this._responseTimeoutTimer) {\n    this._responseTimeoutTimer = setTimeout(function(){\n      self._timeoutError('Response timeout of ', self._responseTimeout, 'ETIMEDOUT');\n    }, this._responseTimeout);\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/request-base.js\n// module id = 86\n// module chunks = 0","'use strict';\n\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/is-object.js\n// module id = 87\n// module chunks = 0","'use strict';\n\n/**\n * Module dependencies.\n */\n\nvar utils = require('./utils');\n\n/**\n * Expose `ResponseBase`.\n */\n\nmodule.exports = ResponseBase;\n\n/**\n * Initialize a new `ResponseBase`.\n *\n * @api public\n */\n\nfunction ResponseBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in ResponseBase.prototype) {\n    obj[key] = ResponseBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponseBase.prototype.get = function(field) {\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponseBase.prototype._setHeaderProperties = function(header){\n    // TODO: moar!\n    // TODO: make this a util\n\n    // content-type\n    var ct = header['content-type'] || '';\n    this.type = utils.type(ct);\n\n    // params\n    var params = utils.params(ct);\n    for (var key in params) this[key] = params[key];\n\n    this.links = {};\n\n    // links\n    try {\n        if (header.link) {\n            this.links = utils.parseLinks(header.link);\n        }\n    } catch (err) {\n        // ignore\n    }\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponseBase.prototype._setStatusProperties = function(status){\n    var type = status / 100 | 0;\n\n    // status / class\n    this.status = this.statusCode = status;\n    this.statusType = type;\n\n    // basics\n    this.info = 1 == type;\n    this.ok = 2 == type;\n    this.redirect = 3 == type;\n    this.clientError = 4 == type;\n    this.serverError = 5 == type;\n    this.error = (4 == type || 5 == type)\n        ? this.toError()\n        : false;\n\n    // sugar\n    this.created = 201 == status;\n    this.accepted = 202 == status;\n    this.noContent = 204 == status;\n    this.badRequest = 400 == status;\n    this.unauthorized = 401 == status;\n    this.notAcceptable = 406 == status;\n    this.forbidden = 403 == status;\n    this.notFound = 404 == status;\n    this.unprocessableEntity = 422 == status;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/response-base.js\n// module id = 88\n// module chunks = 0","'use strict';\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.type = function(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.params = function(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */);\n    var key = parts.shift();\n    var val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Parse Link header fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.parseLinks = function(str){\n  return str.split(/ *, */).reduce(function(obj, str){\n    var parts = str.split(/ *; */);\n    var url = parts[0].slice(1, -1);\n    var rel = parts[1].split(/ *= */)[1].slice(1, -1);\n    obj[rel] = url;\n    return obj;\n  }, {});\n};\n\n/**\n * Strip content related fields from `header`.\n *\n * @param {Object} header\n * @return {Object} header\n * @api private\n */\n\nexports.cleanHeader = function(header, changesOrigin){\n  delete header['content-type'];\n  delete header['content-length'];\n  delete header['transfer-encoding'];\n  delete header['host'];\n  // secuirty\n  if (changesOrigin) {\n    delete header['authorization'];\n    delete header['cookie'];\n  }\n  return header;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/utils.js\n// module id = 89\n// module chunks = 0","function Agent() {\n  this._defaults = [];\n}\n\n[\"use\", \"on\", \"once\", \"set\", \"query\", \"type\", \"accept\", \"auth\", \"withCredentials\", \"sortQuery\", \"retry\", \"ok\", \"redirects\",\n \"timeout\", \"buffer\", \"serialize\", \"parse\", \"ca\", \"key\", \"pfx\", \"cert\"].forEach(function(fn) {\n  /** Default setting for all requests from this agent */\n  Agent.prototype[fn] = function(/*varargs*/) {\n    this._defaults.push({fn:fn, arguments:arguments});\n    return this;\n  }\n});\n\nAgent.prototype._setDefaults = function(req) {\n    this._defaults.forEach(function(def) {\n      req[def.fn].apply(req, def.arguments);\n    });\n};\n\nmodule.exports = Agent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/superagent/lib/agent-base.js\n// module id = 90\n// module chunks = 0","export default function setupUtilityFunctions(app, $mdToast, $rootScope) {\n\n    /**\n     * @name $abl.showToast\n     * @function showToast\n     * @memberOf abl-sdk-feathers.$abl\n     * @description Show an Angular Material toast.\n     * @param {string} message - The message to display.\n     * @param {string} [class] - The CSS class to apply to the toast.\n     * @param {number} [timeout=3000] - The length of time (ms) for the toast to remain visible. \n     */\n    app.showToast = function (msg, toastClass, delay) {\n        if (!toastClass)\n            var toastClass = '';\n        if (!delay)\n            var delay = 3000;\n\n        var toast = $mdToast.simple()\n            .toastClass(toastClass)\n            .textContent(msg)\n            .action('Hide')\n            .hideDelay(delay)\n            .position('bottom left')\n            .highlightAction(false);\n        $mdToast.show(toast);\n        console.debug('showToast ', toastClass, msg);\n    };\n\n\n    /**\n     * @name $abl.randomInt\n     * @function randomInt\n     * @memberOf abl-sdk-feathers.$abl\n     * @description Returns random integer between min and max.\n     * @param {number} min - The upper bound of the random calculation.\n     * @param {number} max - The lower bound of the random calculation.\n     * @returns {number} between min and max.\n     */\n    //\n    app.randomInt = function (min, max) {\n        return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n\n\n    /**\n     * @class abl-sdk-feathers.$rootScope\n     * @hidden\n     */\n\n    /**\n     * @name $rootScope.showToast\n     * @function showToast\n     * @memberOf abl-sdk-feathers.$rootScope\n     * @description Show an Angular Material toast.\n     * @param {string} message - The message to display.\n     * @param {string} [class] - The CSS class to apply to the toast.\n     * @param {number} [timeout=3000] - The length of time (ms) for the toast to remain visible. \n     */\n    $rootScope.showToast = function (a, b, c) {\n        app.showToast(a, b, c); //Legacy support\n    };\n\n    /**\n     * @name $rootScope.safeApply\n     * @function safeApply\n     * @memberOf abl-sdk-feathers.$rootScope\n     * @description App-wide safeApply function for usage in app controllers as a safer alternative to $apply().\n     */\n    $rootScope.safeApply = function (fn) {\n        if (this.$root) {\n            var phase = this.$root.$$phase;\n            if (phase === '$apply' || phase === '$digest') {\n                if (fn && (typeof (fn) === 'function')) {\n                    fn();\n                }\n            } else {\n                this.$apply(fn);\n            }\n        } else {\n            this.$apply(fn);\n        }\n    };\n\n\n    return app;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./styles.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./styles.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles.css\n// module id = 94\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"md-list{display:block;padding:0}.list-item-48{height:36px;min-height:36px;font-size:14px;font-weight:300}.red{color:#dd2c00}.paymentResponseContainer{display:block;height:auto;background-color:#fff;overflow-y:auto}.activityPaymentSummaryCard{margin:8px 0}.paymentSummaryCard{min-width:100%;margin-bottom:0!important;margin-top:0!important;margin-right:16px;background:none;box-shadow:none;height:100%;padding:20px}.paymentSummaryCardNewContent{background-color:#fff}.paymentSummaryCardResponse{padding:8px}.rightCheckoutPanel{background-color:#fff!important}.paymentSummaryCardLarge{width:100%;margin-bottom:0;margin-top:0;padding-right:0;padding-left:0}.paymentHeader p{color:rgba(0,0,0,.8)!important;font-weight:500;letter-spacing:.012em;margin:0;line-height:1.6em}.paymentTitle{font-size:20px!important}.paymentSubTitle{font-size:14px!important;font-weight:400}.lineItemIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/stopwatch-2.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.headerIcon{vertical-align:middle;height:36px;width:40px;padding-right:16px}.headerIconRight{padding-left:16px}.headerIcon svg{position:absolute;top:24px;bottom:24px;height:24px;width:24px}.lineItemText{font-size:14px;font-weight:500;letter-spacing:.01em;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.54)!important}.lineItemDetail{background:hsla(0,0%,100%,.1)}.lineItemDetail p{font-size:12px;color:rgba(0,0,0,.77);font-weight:400}.lineItemHeader p{letter-spacing:.01em;line-height:50px}.lineItemHeader p,.lineItemSubHeader{font-size:16px;font-weight:400;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.82)!important}.lineItemSubHeader{line-height:1.6em}.lineItemSubDetail{font-size:12px;font-weight:500;margin:0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.6)}.lineItemHeader{background:transparent;color:rgba(0,0,0,.7)!important}.addOnAdjusters{width:36px;margin-right:0}.guestIcon{width:32px;height:32px;margin:4px 4px 4px -6px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/user-3.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.lineItemIconRight{width:40px;height:40px;margin:4px -6px 4px 4px;background:url(\\\"https://s3.amazonaws.com/assets.ablsolution.com/icons/calendar.svg\\\") no-repeat;background-position:50%;background-size:28px 28px}.locationHeader{font-size:14px!important;letter-spacing:.01em;line-height:20px;color:rgba(0,0,0,.66)!important}.activityTotal,.agentCommission,.total{font-size:16px;letter-spacing:.01em;color:rgba(0,0,0,.8)}.spacer{margin:4px;width:8px}.darkerDivider{border-top-color:rgba(0,0,0,.12)}.totalDivider{display:block;border-top-width:1px}.lineItemDetailDivider{border-top-color:transparent}.paymentSummaryImage{height:120px}.paymentSummaryImage,.paymentSummaryImageBig{margin:24px 12px 0;background-position:50%;background-repeat:no-repeat;border-radius:2px}.paymentSummaryImageBig{height:244px}.mobileList{height:100%}.mobileBottomBar{position:fixed;bottom:0;left:0;right:0}.cardForm{margin:16px}.addonForm{padding-left:16px;padding-right:16px}.paymentHeader._md-button-wrap>div.md-button:first-child{font-size:22px}.listIcon{padding:0}.listIconSub{color:rgba(0,0,0,.5);fill:rgba(0,0,0,.5);outline:none}.listIconSub,.listIconSub:hover,.listIconSub svg{height:20px;width:20px}.listIconSub:hover{color:rgba(0,0,0,.86);fill:rgba(0,0,0,.86);outline:none}.formButton{margin-right:0}.stepStatusRow ng-md-icon svg{height:16px;margin-top:1px;vertical-align:top}md-list-item.addOnListItem{margin-right:-24px;padding-left:0}md-list-item.listItemNotButton{padding:0 8px!important}.totalListItem{margin-bottom:12px}.listMessage{font-size:16px;line-height:1.6em;padding:0 4px}.slideDown.ng-hide{height:0}.slideDown,.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.slideDown.ng-hide-add,.slideDown.ng-hide-remove{display:block!important}.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.couponInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none}.remove-coupon{cursor:pointer}.toUppercase{text-transform:uppercase}md-list-item:hover{background:transparent}.md-button:not([disabled]):hover,md-list-item.md-button.md-default-theme:not([disabled]):hover{background-color:transparent}.easeIn.ng-hide-add,.easeIn.ng-hide-remove{-webkit-transition:opacity .5s ease-in-out;-moz-transition:.5s ease-in-out opacity;-ms-transition:.5s ease-in-out opacity;-o-transition:.5s ease-in-out opacity;transition:opacity .5s ease-in-out;opacity:1}.easeIn.ng-hide{-webkit-transition:opacity 0s ease-in-out;-moz-transition:0s ease-in-out opacity;-ms-transition:0s ease-in-out opacity;-o-transition:0s ease-in-out opacity;transition:opacity 0s ease-in-out;opacity:0}.couponText{margin-left:16px}.agentInput{width:100%;border:none;padding:12px;box-shadow:none;margin-left:-12px;line-height:36px;outline:none;margin-top:1px}.remove-agent-code{cursor:pointer}.md-button[disabled]{pointer-events:none}.subtotalLineItem{padding:8px 32px 8px 16px}.subtotalLineItemSmall{font-size:12px}.bottomTotal{font-size:16px;margin-top:8px;margin-bottom:16px;font-weight:600}.payzenIframe{border:none;outline:none;width:100%}.small-label{font-size:12px;padding-left:4px}.confirmation{padding:20px 0;text-align:center}.confirmation h3{text-align:center;margin-bottom:20px}.confirmation .margin-top{margin-top:8px}.confirmation .booking-id{padding:15px;margin:8px auto;width:260px;opacity:.8;font-weight:700;color:#fff}body[md-theme=blue] .confirmation .booking-id{background:#2196f3}body[md-theme=teal] .confirmation .booking-id{background:#009688}body[md-theme=green] .confirmation .booking-id{background:#4caf50}body[md-theme=grey] .confirmation .booking-id{background:#9e9e9e}body[md-theme=blue_grey] .confirmation .booking-id{background:#607d8b}body[md-theme=yellow] .confirmation .booking-id{background:#ffeb3b;color:#000}body[md-theme=indigo] .confirmation .booking-id{background:#3f51b5}body[md-theme=red] .confirmation .booking-id{background:#f44336}body[md-theme=black] .confirmation .booking-id{background:#000}body[md-theme=pink] .confirmation .booking-id{background:#e07bb5}body[md-theme=white] .confirmation .booking-id{background:#eee;color:#000}body[md-theme=dark_blue] .confirmation .booking-id{background:#1e88e5}body[md-theme=purple] .confirmation .booking-id{background:#9c27b0}body[md-theme=orange] .confirmation .booking-id{background:#ff6d00}@media(max-width:600px){.confirmation{padding:20px;font-size:13px}.paymentSummaryCard{margin:0}}@media(min-width:743px) and (max-width:1024px){.paymentSummaryCard{margin-left:0}}.picker-container{border-radius:2px;background:#fff}.bigDateToolbar{background:#fff!important;color:#000!important}.activity-dialog-container{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;z-index:80;overflow:hidden}.activity-dialog,md-dialog.activity-dialog{max-height:80%;max-width:90%;position:relative;overflow:auto;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12);display:-ms-flexbox;display:flex;overflow-x:hidden;overflow-y:hidden;-ms-flex-direction:column;flex-direction:column}.activity-dialog,md-dialog md-dialog-content{padding:0;overflow:hidden}.no-margin{margin:0!important}.leftCard{background:rgba(0,0,0,.025)}.activityBookDialogLarge{width:100%;min-height:500px;height:100%;background-color:#fff}.leftCardLarge{border-right:1px solid #e4e4e4!important;box-shadow:1px 0 5px 1px rgba(0,0,0,.12)!important;min-height:100%;min-width:420px;width:50%;position:absolute;height:100%;overflow-y:scroll}.leftCardSmall{border-bottom:1px solid #e4e4e4!important;box-shadow:0 1px 5px rgba(0,0,0,.08)!important}.rightCardLarge{position:absolute;right:0;min-width:420px;width:50%;display:block;height:100%}.activity-total-include{height:100%}.couponText{font-size:16px}.couponTextTotal{font-size:16px;padding-right:12px}.listItemAutocomplete{padding-left:0!important}.addOnQuantityText{border:none;width:40px;font-weight:500;text-align:center;font-size:16px;margin-right:-8px;outline:none;background:transparent}.activityPaymentSummaryCard{margin-bottom:0!important;margin-top:0!important;margin-right:0;margin-left:0;background:none;box-shadow:none;position:relative;height:100%}.activityCardForm{margin:0 16px}.detailsForm{padding-left:16px;padding-right:16px}.listItemInputContainer{margin:10px 0!important;position:relative;padding:2px;vertical-align:middle;display:inline-block!important;margin-top:-10px!important;width:100%!important}.listItemInputContainerNoMargin{margin-top:0!important;margin-bottom:0!important}.formContainer{padding:16px!important;padding-top:42px!important}.formContainerQuestions{padding:16px 16px 0}.formContainerQuestions md-input-container{margin-bottom:0;margin-top:0}md-input-container{margin:18px 0}md-input-container .md-input-messages-animation{text-align:right}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/styles.css\n// module id = 95\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 96\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = require(\"./fixUrls\");\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 97\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/fixUrls.js\n// module id = 98\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./helper-styles.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/helper-styles.css\n// module id = 99\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".no-margin-top{margin-top:0!important}.no-margin-bottom{margin-bottom:0!important}.no-margin-right{margin-right:0!important}.no-margin-left{margin-left:0!important}.margin-right-30{margin-right:30px}.no-padding{padding:0!important}.green{color:green}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/helper-styles.css\n// module id = 100\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!./angular-material-icons.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./angular-material-icons.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./angular-material-icons.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/angular-material-icons.css\n// module id = 101\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*!\\n * Angular Material Design\\n * https://github.com/angular/material\\n * @license MIT\\n * v0.9.7\\n */md-autocomplete button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0) scale(.9);transform:translate3d(-50%,-50%,0) scale(.9)}md-autocomplete button ng-md-icon path{stroke-width:0}.md-button.ng-md-icon{padding:0;background:none}.md-button.md-fab ng-md-icon{margin-top:0}md-checkbox .ng-md-icon{transition:.24s;position:absolute;top:0;left:0;width:18px;height:18px;border:2px solid;border-radius:2px}md-checkbox.md-checked .ng-md-icon{border:none}md-checkbox.md-checked .ng-md-icon:after{-webkit-transform:rotate(45deg);transform:rotate(45deg);position:absolute;left:6px;top:2px;display:table;width:6px;height:12px;border:2px solid;border-top:0;border-left:0;content:\\\"\\\"}.md-chips .md-chip .md-chip-remove ng-md-icon{height:18px;width:18px;position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}ng-md-icon{background-repeat:no-repeat;display:inline-block;vertical-align:middle;fill:currentColor;height:24px;width:24px}ng-md-icon svg{pointer-events:none;display:block}ng-md-icon[md-font-icon]{line-height:1;width:auto}md-input-container>ng-md-icon{position:absolute;top:5px;left:2px}md-input-container>ng-md-icon+input{margin-left:36px}md-input-container.md-icon-float>ng-md-icon{top:26px;left:2px}md-input-container.md-icon-float>ng-md-icon+input{margin-left:36px}@media screen and (-ms-high-contrast:active){md-input-container.md-default-theme>ng-md-icon{fill:#fff}}md-list-item .md-list-item-inner>div.md-primary>ng-md-icon,md-list-item .md-list-item-inner>div.md-secondary>ng-md-icon,md-list-item .md-list-item-inner>ng-md-icon.md-secondary,md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>div.md-primary>ng-md-icon,md-list-item>div.md-secondary>ng-md-icon,md-list-item>ng-md-icon.md-secondary,md-list-item>ng-md-icon:first-child{width:24px;margin-top:16px;margin-bottom:12px;box-sizing:content-box}md-list-item .md-list-item-inner>ng-md-icon:first-child,md-list-item>ng-md-icon:first-child{margin-right:32px}md-list-item.md-2-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-2-line>ng-md-icon:first-child{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}md-list-item.md-3-line>.md-no-style>ng-md-icon:first-child,md-list-item.md-3-line>ng-md-icon:first-child{margin-top:16px}md-tabs-wrapper md-next-button ng-md-icon,md-tabs-wrapper md-prev-button ng-md-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}md-tabs-wrapper md-next-button ng-md-icon{-webkit-transform:translate3d(-50%,-50%,0) rotate(180deg);transform:translate3d(-50%,-50%,0) rotate(180deg)}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/angular-material-icons.css\n// module id = 102\n// module chunks = 0","// Use RxJS in a Service\n\n// What about in a situation where you have a Service that's holding state for example. How could I push changes to that Service, and other random components on the page be aware of such a change? Been struggling with tackling this problem lately\n// Build a service with RxJS Extensions for Angular.\n\n// <script src=\"//unpkg.com/angular/angular.js\"></script>\n// <script src=\"//unpkg.com/rx/dist/rx.all.js\"></script>\n// <script src=\"//unpkg.com/rx-angular/dist/rx.angular.js\"></script>\n// var app = angular.module('myApp', ['rx']);\n\n// app.factory(\"DataService\", function(rx) {\n//   var subject = new rx.Subject(); \n//   var data = \"Initial\";\n\n//   return {\n//       set: function set(d){\n//         data = d;\n//         subject.onNext(d);\n//       },\n//       get: function get() {\n//         return data;\n//       },\n//       subscribe: function (o) {\n//          return subject.subscribe(o);\n//       }\n//   };\n// });\n// Then simply subscribe to the changes.\n\n// app.controller('displayCtrl', function(DataService) {\n//   var $ctrl = this;\n\n//   $ctrl.data = DataService.get();\n//   var subscription = DataService.subscribe(function onNext(d) {\n//       $ctrl.data = d;\n//   });\n\n//   this.$onDestroy = function() {\n//       subscription.dispose();\n//   };\n// });\n\n/**\n * \n * \n * @class api\n * @memberOf abl-sdk-feathers.$abl\n * @hidden\n */\nexport default function rest(app, $http) {\n    const that = {};\n    const Rx = window.Rx;\n    const moment = window.moment;\n\n    app.api = {};\n    /**\n     * @class activity\n     * @memberOf abl-sdk-feathers.$abl.api\n     * @hidden\n     */\n    app.api.activity = {\n        /**\n         * @function get\n         * @memberOf abl-sdk-feathers.$abl.api.activity\n         */\n        get: function (query) {\n            return Rx.Observable\n                .fromPromise(activityService.find(\n                    query || {}\n                ))\n                .catch((response) => {\n                    console.log('$abl.api.GET ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    return response.list;\n                });\n        },\n        /**\n         * @function find\n         * @memberOf abl-sdk-feathers.$abl.api.activity\n         */\n        find: function (query) {\n            return Rx.Observable\n                .fromPromise(activitySearchService.find(\n                    query || {}\n                ))\n                .catch((response) => {\n                    console.log('$abl.api.activity.FIND ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    return response;\n                });\n        }\n    }\n\n\n    /**\n     * @class timeslots\n     * @memberOf abl-sdk-feathers.$abl.api\n     * @hidden\n     */\n    app.api.timeslots = {\n        /**\n         * @function getRange\n         * @memberOf abl-sdk-feathers.$abl.api.timeslots\n         */\n        getRange: function (d) {\n            return Rx.Observable\n                .fromPromise($http({\n                    method: 'GET',\n                    url: app.endpoint + '/timeslots?',\n                    data: d,\n                    headers: app.headers\n                }))\n                .catch((response) => {\n                    console.log('$abl.api.timeslots.GETRANGE ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    console.log('$abl.api.timeslots.GETRANGE SUCCESS', response);\n                    return response.data.list;\n                });\n        },\n        /**\n         * @function get\n         * @memberOf abl-sdk-feathers.$abl.api.timeslots\n         */\n        get: function (id) {\n            return Rx.Observable\n                .fromPromise($http({\n                    method: 'GET',\n                    url: app.endpoint + '/timeslots?id=' + id,\n                    headers: app.headers\n\n                }))\n                .catch((response) => {\n                    console.log('$abl.api.timeslots.GET ERROR', response);\n                    return Rx.Observable.empty();\n                })\n                .select(function (response) {\n                    console.log('$abl.api.timeslots.GET SUCCESS', response);\n                    return response;\n                });\n        }\n    }\n\n\n    //Feathers REST endpoints\n    const activityService = app.service('activities');\n    const eventService = app.service('events');\n    const timeslotService = app.service('timeslots');\n\n    const activitySearchService = app.service('search');\n\n    // activitySearchService.find({\n    //     query: {\n    //         \"sort\": \"-updatedAt\"\n    //     }\n    // });\n\n    app.activitySearchInterval = function (t) {\n        return setInterval(() => {\n            activitySearchService.find({\n                query: {\n                    \"sort\": \"-updatedAt\"\n                }\n            });\n        }, t);\n    }\n\n\n    //Feathers localstorage cache service\n    /**\n     * @class cache\n     * @memberOf abl-sdk-feathers.$abl\n     * @description localstorage cache wrapped in a Feathers.js service.\n     * @example   <caption>Open or Create</caption>      \n     * $abl.cache.get('activities').then(function (res) {\n     *   console.log(res);\n     *}).catch(res => {\n     *    $abl.cache.create({\n     *       id: 'activities',\n     *      data: {},\n     *      map: []\n     *  });\n     *});\n     * @hidden\n     */\n    const cache = app.service('cache');\n    const max = 500;\n    let cacheQuery = {\n        page: 0,\n        pageSize: 20,\n        total: 0,\n        \"sort\": \"-updatedAt\"\n    }\n\n    cache.get('activities').then(function (res) {\n        console.log(res);\n    }).catch(res => {\n        cache.create({\n            id: 'activities',\n            data: {},\n            map: []\n        });\n    });\n\n    const updateCache = store => { // always wrap in a function so you can pass options and for consistency.\n        return hook => {\n            let modified = false;\n\n            cache.get('activities').then(function (activities) {\n                activities.updated = [];\n\n                const acs = Rx.Observable.fromArray(hook.result.data);\n                acs.map(res => res)\n                    .filter(res => activities.data[res._id] == undefined)\n                    .subscribe(function (x) {\n                        modified = true;\n                        activities.data[x._id] = x;\n                        activities.map.push(x._id);\n                        activities.updated.push(x._id);\n                        // console.log('creating activity', x);\n                    }, function (err) {\n                        return Promise.resolve(hook); // A good convention is to always return a promise.\n\n                    }, function () {\n                        if (modified) {\n                            console.log('updateCache', store, activities);\n                            if (activities.map.length > max) {\n                                for (var i = 0; i < activities.map.length - max; i++) {\n                                    delete activities.data[activities.map[i]];\n                                    console.log('deleting activity', activities.data[activities.map[0]]);\n\n                                }\n                                // activities.map.fill('', 0, activities.map.length - max);\n                            }\n                            activities.total = hook.result.total;\n                            cache.update('activities', activities).then(function () {\n                                console.log('updateCache', store, hook);\n\n                                return Promise.resolve(hook); // A good convention is to always return a promise.\n                            });\n                        }\n\n                    });\n\n            });\n        };\n    };\n\n    function getObjectIndex(id, arr) {\n        for (var i = 0; i < arr.length - 1; i++) {\n            if (arr[i].id == id)\n                return i;\n        }\n        return -1;\n    }\n\n    // Set up our after hook to cache new data\n    activitySearchService.after({\n        all: [], // run hooks for all service methods\n        find: [updateCache()] // run hook after a find. You can chain multiple hooks.\n    });\n\n\n    app.cache = cache;\n    return app;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/rest.js","    /**\n     * @function toUppercase\n     * @memberOf abl-sdk-feathers.directives\n     * @description Transforms input text to all uppercase characters.\n     * @example   <input type=\"text\" ng-model=\"name\" to-uppercase>\n     */\n    export default function toUppercase() {\n        return {\n            require: 'ngModel',\n            link: function (scope, element, attrs, modelCtrl) {\n                var capitalize = function (inputValue) {\n                    if (inputValue == undefined) inputValue = '';\n                    var capitalized = inputValue.toUpperCase();\n                    if (capitalized !== inputValue) {\n                        modelCtrl.$setViewValue(capitalized);\n                        modelCtrl.$render();\n                    }\n                    return capitalized;\n                }\n\n                modelCtrl.$parsers.push(capitalize);\n                capitalize(scope[attrs.ngModel]); // capitalize initial value\n            }\n        };\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/toUppercase.directive.js"," /**\n  * @class abl-sdk-feathers.directives\n  * @hidden\n  */\n\n /**\n  * @function formatPhone\n  * @memberOf abl-sdk-feathers.directives\n  * @description Formats a phone number nicely.\n  * @example <input type=\"text\" id=\"phonenumber\" ng-model=\"phonenumber\" format-phone>\n  */\n export default function formatPhone() {\n     return {\n         require: 'ngModel',\n         restrict: 'A',\n         link: function (scope, elem, attrs, ctrl, ngModel) {\n             elem.add(phonenumber).on('keyup', function () {\n                 var origVal = elem.val().replace(/[^\\w\\s]/gi, '');\n                 if (origVal.length === 10) {\n                     var str = origVal.replace(/(.{3})/g, \"$1-\");\n                     var phone = str.slice(0, -2) + str.slice(-1);\n                     jQuery(\"#phonenumber\").val(phone);\n                 }\n\n             });\n             console.log('format-phone', scope);\n         }\n     };\n }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/formatPhone.directive.js","    /**\n     * @function toUppercase\n     * @memberOf abl-sdk-feathers.directives\n     * @description Transforms input text to all uppercase characters.\n     * @example   <input type=\"text\" ng-model=\"name\" to-uppercase>\n     */\n    export default function focusParent() {\n        return {\n            require: 'ngModel',\n            link: function (scope, element, attrs, modelCtrl) {\n                console.log(element);\n                console.log(attrs);\n\n                let elem = $(element[0].parentElement);\n                element.on('focus', function () {\n                    console.log(elem);\n                    elem.addClass(attrs.onFocus);\n\n                });\n\n                element.on('blur', () => {\n                    elem.removeClass(attrs.onFocus);\n\n                })\n                //modelCtrl.$parsers.push(capitalize);\n                //capitalize(scope[attrs.ngModel]); // capitalize initial value\n            }\n        };\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/focusParent.directive.js","    export default function size() {\n        return {\n            link: function (scope, element, attrs, modelCtrl) {\n                console.log(element);\n                console.log(attrs);\n\n                if (attrs.size) {\n                    let elem = $(element[0].children[0]);\n                    elem.addClass(attrs.size);\n                }\n\n\n            }\n        };\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/directives/size.directive.js","     /**\n      * @class abl-sdk-feathers.services\n      * @hidden\n      */\n\n\n     navigatorService.$inject = [\"$window\", \"$q\"];\n     /**\n      * @function navigatorService\n      * @memberOf abl-sdk-feathers.services\n      * @description Requests the user's geographic coordinates using the {@link https://developer.mozilla.org/en/docs/Web/API/Navigator | Navigator Web API}.\n      * @example    navigatorService.getCurrentPosition().then(function(position) {\n      *     console.log(position);\n      *   }).catch(function(e) {\n      * });\n      * @tutorial navigator\n      * @returns {Promise} A Promise object from the {@link https://developer.mozilla.org/en/docs/Web/API/Navigator | Navigator Web API}.\n      */\n     export default function navigatorService($window, $q) {\n\n         function getCurrentPosition() {\n             var deferred = $q.defer();\n\n             if (!$window.navigator.geolocation) {\n                 deferred.reject('Geolocation not supported.');\n             } else {\n                 $window.navigator.geolocation.getCurrentPosition(\n                     function (position) {\n                         deferred.resolve(position);\n                     },\n                     function (err) {\n                         deferred.reject();\n                     });\n             }\n\n             return deferred.promise;\n         }\n\n         return {\n             getCurrentPosition: getCurrentPosition\n         };\n\n     }\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/navigator.service.js"," import colTemplate from './column.html';\n const col = {\n     bindings: {\n         pos: '@',\n         size: '@'\n     },\n     controller: function ($element, $scope) {\n         this.$onInit = function () {\n             //  console.log('col', this);\n             if (!this.pos)\n                 this.position = 'start center'\n             if (this.pos == 'right')\n                 this.position = 'end center';\n             else\n                 this.position = this.pos;\n\n         };\n\n         this.$onChanges = (changesObj) => {};\n         this.$postLink = function () {};\n     },\n     template: colTemplate,\n     transclude: true,\n     controllerAs: 'vm'\n };\n\n\n export default col;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/col.component.js","module.exports = \"<div layout=row layout-align={{vm.position}} ng-transclude flex></div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/column.html\n// module id = 110\n// module chunks = 0","import progressButtonTemplate from './progressButton.html';\nconst progressButton = {\n    bindings: {\n        loading: '<',\n        class: '@',\n        ngDisabled: '<',\n        spinner: '<',\n        stroke: '@',\n        fill: '@',\n        label: '@',\n        onClick: '&'\n    },\n    controller: function ($element, $scope, $log) {\n        this.$onInit = function () {\n            $log.debug('progressButton', this);\n            if (this.loading)\n                $log.debug('progressButton:loading', this.loading);\n\n            $log.debug('progressButton disabled', this.ngDisabled);\n\n        };\n\n        this.$onChanges = (changesObj) => {\n            $log.debug('progressButton changes ', changesObj);\n            this.disabled = this.ngDisabled;\n        };\n\n        this.$postLink = function () {};\n    },\n    template: progressButtonTemplate,\n    transclude: true,\n    controllerAs: 'vm'\n};\n\n\nexport default progressButton;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/progressButton.component.js","module.exports = \"<md-button layout=row layout-align=\\\"center center\\\" class={{vm.class}} ng-disabled=\\\"vm.loading || vm.disabled\\\" ng-click=vm.onClick()> <div layout=row layout-align=\\\"center center\\\"> <svg ng-show=\\\"vm.loading && vm.spinner == 1\\\" version=1.1 id=loader-1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=24px viewBox=\\\"0 0 50 50\\\" style=\\\"enable-background:new 0 0 50 50\\\" xml:space=preserve> <path fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" d=M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z> <animateTransform attributeType=xml attributeName=transform type=rotate from=\\\"0 25 25\\\" to=\\\"360 25 25\\\" dur=0.6s repeatCount=indefinite /> </path> </svg> <svg ng-show=\\\"vm.loading && vm.spinner == 2\\\" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox=\\\"0 0 24 30\\\" style=\\\"enable-background:new 0 0 50 50\\\" xml:space=preserve> <rect x=0 y=0 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\"> <animateTransform attributeType=xml attributeName=transform type=translate values=\\\"0 0; 0 20; 0 0\\\" begin=0 dur=0.6s repeatCount=indefinite /> </rect> <rect x=10 y=0 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\"> <animateTransform attributeType=xml attributeName=transform type=translate values=\\\"0 0; 0 20; 0 0\\\" begin=0.2s dur=0.6s repeatCount=indefinite /> </rect> <rect x=20 y=0 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\"> <animateTransform attributeType=xml attributeName=transform type=translate values=\\\"0 0; 0 20; 0 0\\\" begin=0.4s dur=0.6s repeatCount=indefinite /> </rect> </svg> <svg ng-show=\\\"vm.loading && vm.spinner == 3\\\" version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=24px height=30px viewBox=\\\"0 0 24 30\\\" style=\\\"enable-background:new 0 0 50 50\\\" xml:space=preserve> <rect x=0 y=10 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=0.2> <animate attributeName=opacity attributeType=XML values=\\\"0.2; 1; .2\\\" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values=\\\"10; 20; 10\\\" begin=0s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values=\\\"10; 5; 10\\\" begin=0s dur=0.6s repeatCount=indefinite /> </rect> <rect x=8 y=10 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=0.2> <animate attributeName=opacity attributeType=XML values=\\\"0.2; 1; .2\\\" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values=\\\"10; 20; 10\\\" begin=0.15s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values=\\\"10; 5; 10\\\" begin=0.15s dur=0.6s repeatCount=indefinite /> </rect> <rect x=16 y=10 width=4 height=10 fill=\\\"{{vm.fill || '#fff'}}\\\" stroke=\\\"{{vm.stroke || ''}}\\\" opacity=0.2> <animate attributeName=opacity attributeType=XML values=\\\"0.2; 1; .2\\\" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=height attributeType=XML values=\\\"10; 20; 10\\\" begin=0.3s dur=0.6s repeatCount=indefinite /> <animate attributeName=y attributeType=XML values=\\\"10; 5; 10\\\" begin=0.3s dur=0.6s repeatCount=indefinite /> </rect> </svg> </div> <span ng-show=!vm.loading>{{vm.label}}</span> </md-button>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/progressButton.html\n// module id = 112\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./progressButton.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/progressButton.css\n// module id = 113\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"progress-button{outline:none;margin:0!important}progress-button,progress-button md-button{pointer-events:auto}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/components/progressButton.css\n// module id = 114\n// module chunks = 0"," import listItemTemplate from './listItem.html';\n const listItem = {\n     bindings: {\n         size: '@',\n     },\n     controller: function ($element, $scope) {\n         this.$onInit = function () {};\n\n         this.$onChanges = (changesObj) => {};\n         this.$postLink = function () {};\n     },\n     template: listItemTemplate,\n     transclude: true,\n     controllerAs: 'vm'\n };\n\n\n export default listItem;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItem.component.js","module.exports = \"<div layout=row class=listItem ng-class=[vm.size] flex=100 ng-transclude> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItem.html\n// module id = 116\n// module chunks = 0","import template from './listItemNumericControl.html';\n// import controller from './goatListItem.controller'; import\n// './goatListItem.scss';\n/**\n * @function li-NumberControl\n * @memberOf abl-sdk-feathers.components\n * @description List item control with +/- buttons and input to modify the value.\n * @example  <list-item-numeric-control label=\"Attendee\" value=\"numValue\" min=\"1\" max=\"5\"></list-item-numeric-control>\n */\nconst listItemNumericControl = {\n    restrict: 'E',\n    bindings: {\n        value: '=',\n        label: '@',\n        price: '@',\n        max: '@',\n        min: '@ ',\n        size: '@'\n    },\n    template: template,\n    controller: function ($element) {\n        this.min = 0;\n\n        this.$onInit = function () {\n            this.elem = $($element[0].children[0]);\n            if (!this.value) \n                this.value = 0;\n\n            };\n        \n        this.$onChanges = (changesObj) => {};\n        this.$postLink = function () {};\n\n        this.increment = function () {\n            if (this.max == undefined || this.max > this.value) \n                this.value++;\n                // console.log('increment');\n            };\n        \n        this.decrement = function () {\n            if (this.value > this.min) \n                this.value--;\n            console.log('decrementer');\n        };\n\n        this.checkAdjustValue = () => {\n            if (this.value > this.max) {\n                this.value = this.max;\n            }\n            if (this.value < this.min) \n                this.value = this.min;\n            };\n    },\n    controllerAs: 'vm'\n};\n\nexport default listItemNumericControl;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItemNumericControl.component.js","module.exports = \"<div layout=row class=listItem ng-class=[vm.size] flex=100> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{vm.label}}</span> <div layout=row> <span class=lineItemSubDetail>{{vm.price | ablCurrency: $root.currency}}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column class=addOnAdjusters layout-align=\\\"center end\\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub md-colors=\\\"{'fill': 'primary-A200'}\\\" ng-click=vm.increment();> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline\\\" class=listIconSub ng-click=vm.decrement();></ng-md-icon> </div> <div layout=column layout-align=\\\"end end\\\"> <input class=addOnQuantityText ng-model=vm.value ng-change=vm.checkAdjustValue(); type=number md-select-on-focus> </div> </div> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItemNumericControl.html\n// module id = 118\n// module chunks = 0"," /**\n  * @class abl-sdk-feathers.components\n  * @hidden\n  */\n\n\n\n /**\n  * @function li-AddCharge\n  * @memberOf abl-sdk-feathers.components\n  * @description List item to enter a new charge with value.\n  * @example  <list-item-add-charge group=\"vm.charges\"></list-item-add-charge>\n  */\n import template from './listItemAddCharge.html';\n // import controller from './goatListItem.controller';  \n import './listItem.css';\n\n const listItemAddCharge = {\n     bindings: {\n         add: '<',\n         group: '=',\n         buttonClass: '@'\n     },\n     template: template,\n     controller: function ($scope) {\n         this.price = 0;\n         this.$onInit = function () {};\n\n         this.$onChanges = (changesObj) => {};\n         this.$postLink = function () {};\n     },\n     controllerAs: 'vm'\n };\n\n\n export default listItemAddCharge;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItemAddCharge.component.js","module.exports = \"<md-list-item class=addOnListItem> <div layout=row layout-align=\\\"start center\\\" flex> <md-input-container class=\\\"buttonInlineInput full-width\\\"> <label>Name</label> <input class=buttonInlineInput ng-model=vm.label> </md-input-container> </div> <div layout=row layout-align=\\\"end center\\\" flex=20> <md-input-container class=\\\"buttonInlineInput full-width\\\"> <label>Price</label> <input class=\\\"full-width buttonInlineInput\\\" md-select-on-focus ng-model=vm.price type=number min=0 step=0.01> </md-input-container> </div> <div layout=row> <md-button ng-disabled=\\\"!vm.label || !vm.price\\\" ng-class=\\\"[vm.buttonClass.length > 0 ? vm.buttonClass : 'md-raised']\\\" ng-click=\\\"vm.add(vm.label, vm.price)\\\"> Add </md-button> </div> </md-list-item>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItemAddCharge.html\n// module id = 120\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./listItem.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!./listItem.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!./listItem.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItem.css\n// module id = 121\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".full-width{width:100%}.text-align-left{text-align:left!important}col-section{width:100%}md-checkbox.listItemCheckbox .md-label{margin-top:26px;margin-left:38px}list-item,list-item-header,list-item-numeric-control{display:block;width:100%}.listItem{height:72px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItemHeader .listItem{height:40px}.listItem md-checkbox .md-container{height:4px}.listItem.md{min-height:56px;height:56px;line-height:56px;padding:0 16px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.lg.slideDown.ng-hide{height:0!important}.lg.slideDown,.lg.slideDown.ng-hide{transition:height .35s ease;overflow:hidden;position:relative}.lg.slideDown{height:72px;line-height:72px}.lg.slideDown.ng-hide-add,.lg.slideDown.ng-hide-remove{display:block!important}.lg.slideDown.ng-hide-add{animation-name:hide;-webkit-animation-name:hide;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in}.lg.slideDown.ng-hide-remove{animation-name:show;-webkit-animation-name:show;animation-duration:.5s;-webkit-animation-duration:.5s;animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out}.listItem.sm{height:36px;line-height:36px;min-height:36px;padding:0 16px;font-size:12px;outline:none;border:none;box-shadow:0 1px 0 0 rgba(0,0,0,.05)}.listItem md-autocomplete input:not(.md-input){height:100%!important;line-height:100%!important;padding:0}.listItem md-autocomplete md-autocomplete-wrap{box-shadow:none!important;height:100%!important}.listItem md-autocomplete{padding:0!important}.listItemAutoCompleteAfterContainer{margin-top:-20px!important}.listItemFocus{box-shadow:0 1px 0 rgba(255,152,0,.4),0 -1px 0 rgba(255,152,0,.4),inset 0 1px 4px rgba(255,152,0,.2),inset 0 -1px 4px rgba(255,152,0,.2)!important;background:#fff}input.buttonInlineInput{padding:0;border-width:0;-ms-flex-preferred-size:36px;font-size:inherit;width:100%;border:none;outline:none;box-sizing:border-box;float:left;background:transparent}.inputStatusIcon{height:24px;width:36px;margin-right:4px!important}.listItemGreyFocus{box-shadow:0 1px 0 rgba(0,0,0,.28),0 -1px 0 rgba(0,0,0,.28),inset 0 1px 4px rgba(0,0,0,.16),inset 1px -1px 4px rgba(0,0,0,.2)!important}.listItemGreyFocus input,textarea{color:#3f51b5}.listItemGreyFocus ng-md-icon.listItemHeaderIcon{fill:#3f51b5}.listItemFocusBottomBorder{box-shadow:0 2px 0 rgba(58,171,56,.92),inset 0 -1px 3px rgba(57,73,171,.2),inset 0 1px rgba(0,0,0,.1)!important}.listItemFocusBottomBorder input,textarea{color:#000}md-input-container.buttonInlineInput{display:inline-block;position:relative;height:36px;padding:5px;margin:0;vertical-align:middle}.listItemPadding{padding:0 16px}.listItem.listItemHeader{font-size:16px;margin:auto;line-height:72px;font-weight:500;cursor:unset;color:#fff}.listItem.listItemHeader.light{color:#000;background:#fff}.listItem.listItemHeader.dark{color:#fff;background:#424242}.listItemHeaderBottomBorder{box-shadow:0 1px 2px rgba(0,0,0,.16),0 0 1px rgba(0,0,0,.3)}.listItem .strong{font-weight:600}.listItem.sm.listItemHeader{font-size:12px;margin:0;font-weight:500;cursor:unset;line-height:36px}.listItem.md.listItemHeader{font-size:16px;margin:0;font-weight:500;cursor:unset;line-height:54px}.leftIcon{margin-right:16px}ng-md-icon.listItemHeaderIcon{height:20px;width:20px}ng-md-icon.listItemHeaderIcon.lg,ng-md-icon.listItemHeaderIcon.lg svg,ng-md-icon.listItemHeaderIcon.md,ng-md-icon.listItemHeaderIcon.md svg{margin:auto 0}ng-md-icon.listItemHeaderIcon.sm,ng-md-icon.listItemHeaderIcon.sm svg{margin:auto 8px auto 0;height:16px;width:16px}.lineItemSubHeader{font-size:14px;font-weight:400;padding:0 16px 0 0;line-height:1.6em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.92)!important}.autocomplete-custom-template li{border-bottom:1px solid #ccc;height:auto;padding-top:8px;padding-bottom:8px;white-space:normal}.autocomplete-custom-template li:last-child{border-bottom-width:0}.autocomplete-custom-template .item-title{font-weight:600}.autocomplete-custom-template .item-metadata,.autocomplete-custom-template .item-title{display:block;line-height:2}.autocomplete-custom-template .item-title md-icon{height:18px;width:18px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/lib/components/listItem.css\n// module id = 122\n// module chunks = 0","import template from './listItemHeader.html';\n// import controller from './goatListItem.controller';\n\nconst listItemHeader = {\n    bindings: {\n        action: '@',\n        actionClick: '=',\n        expanded: '=',\n        title: '@',\n        icon: '@',\n        size: '@'\n    },\n    template: template,\n    controller: function () {\n\n        this.$onInit = function () {\n            if (!this.expanded) \n                this.expanded = false;\n\n            };\n        \n        this.$onChanges = (changesObj) => {};\n        this.$postLink = function () {};\n\n        this.click = function () {\n            console.log('click function');\n            if (this.action == 'expandable') {\n                this.expanded = !this.expanded;\n\n            }\n        }\n    },\n    controllerAs: 'vm'\n};\n\nexport default listItemHeader;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/components/listItemHeader.component.js","module.exports = \"<div class=\\\"listItem listItemHeader\\\" ng-class=[vm.size] ng-disabled=!vm.action ng-click=vm.click()> <div layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=80> <ng-md-icon ng-if=vm.icon icon={{vm.icon}} class=\\\"headerIcon listIcon\\\"></ng-md-icon> <div class=listItemHeaderText>{{vm.title}}</div> </div> <div layout=row layout-align=\\\"end center\\\" flex=20> <div layout=column layout-align=\\\"center end\\\" ng-if=\\\"vm.action == 'expandable'\\\" flex> <ng-md-icon icon=\\\"{{vm.expanded ? 'expand_less' : 'expand_more'}}\\\" options='{\\\"duration\\\": 500, \\\"rotation\\\": \\\"clock\\\", \\\"easing\\\":\\\"linear\\\"}' class=listItemHeaderIcon></ng-md-icon> </div> </div> </div> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/components/listItemHeader.html\n// module id = 124\n// module chunks = 0","import './activity-book.css';\n\nimport activityTotalTemplate from './activity-total.html';\nimport activityFormsTemplate from './activity-forms.html';\nimport activityBookingTemplate from './activity-book.html';\nimport dashboardTemplate from './dashboard.html';\nimport noDashboardTemplate from './no-dashboard.html';\nimport activityBookValidators from './activity-book-validators';\n\nimport activityAdjustmentController from './activity.adjustment.controls.component.js'\n/**\n * @namespace activity-book\n */\nexport default angular\n    .module('activity-book', ['ngMaterial', 'rx'])\n    .run(function ($templateCache) {\n        $templateCache.put('activity-forms.html', activityFormsTemplate);\n        $templateCache.put('activity-book.html', activityBookingTemplate);\n        $templateCache.put('activity-total.html', activityTotalTemplate);\n        $templateCache.put('dashboard.html', dashboardTemplate);\n        $templateCache.put('no-dashboard.html', noDashboardTemplate);\n    })\n    .factory('httpInterceptor', ['$q', '$rootScope', function($q, $rootScope){\n        var loadingCount = 0;\n        return {\n            request: function (config) {\n                if(++loadingCount === 1) $rootScope.$broadcast('loading:progress', {request: config});\n                return config || $q.when(config);\n            },\n            response: function (response) {\n                if(--loadingCount === 0) $rootScope.$broadcast('loading:finish', {response: response});\n                return response || $q.when(response);\n            },\n            responseError: function (response) {\n                if(--loadingCount === 0) $rootScope.$broadcast('loading:finish', {response: response});\n                return $q.reject(response);\n            }\n        };\n    }])\n    .config(['$httpProvider', function ($httpProvider) {\n        $httpProvider.interceptors.push('httpInterceptor');\n    }])\n    .controller('activityAdjustmentController', activityAdjustmentController)\n    .directive('ablActivityBook', [\n        '$rootScope',\n        '$sce',\n        '$compile',\n        '$mdMedia',\n        '$mdDialog',\n        '$mdToast',\n        '$log',\n        '$window',\n        '$timeout',\n        '$http',\n        'rx',\n        'observeOnScope',\n        '$stateParams',\n        '$state',\n        '$filter',\n        function ($rootScope, $sce, $compile, $mdMedia, $mdDialog, $mdToast, $log, $window, $timeout, $http, rx, observeOnScope, $stateParams, $state, $filter) {\n            return {\n                restrict: 'E',\n                scope: {\n                    book: '=',\n                    activity: '=',\n                    app: '='\n                },\n                template: activityBookingTemplate,\n                link: function ($scope, element, attrs) {\n                    // Digest on resize to recalculate $mdMedia window size\n                    function onResize() {\n                        $scope.$digest();\n                    };\n                    angular\n                        .element($window)\n                        .on('resize', onResize);\n                },\n                controllerAs: 'vm',\n                controller: function ($scope, $element, $attrs) {\n                    let vm = this;\n                    vm.theme = $rootScope.theme;\n                    this.formWasBlocked = false;\n                    this.guestDetailsExpanded = true;\n                    this.attendeesExpanded = false;\n                    this.addonsExpanded = false;\n                    this.questionsExpanded = false;\n                    this.stripePaymentExpanded = false;\n                    this.stripeCardIsValid = false;\n                    this.paymentExpanded = false;\n                    this.showPaymentForm = false;\n                    this.answerAllQuestionsChecked = false;\n                    this.paymentFormIsLoading = false;\n                    this.paymentWasSent = false;\n                    this.waitingForResponse = false;\n                    this.validStepsForPayment = {\n                        'guest': false,\n                        'attendees': false\n                    };\n\n                    this.couponStatus = 'untouched';\n                    this.appliedCoupon = {};\n                    this.couponQuery = '';\n                    this.occupancyRemaining = 0;\n\n                    this.agentCodeStatus = 'untouched';\n                    this.appliedAgentCode = {};\n                    this.agentCodeQuery= '';\n\n                    this.attendeeSubtotals = [];\n                    this.addonSubtotals = [];\n\n                    vm.taxes = [];\n                    vm.taxTotal = 0;\n                    vm.addons = [];\n                    vm.questions = [];\n                    vm.goToPay = goToPay;\n                    vm.submitNonCreditCardBooking = submitNonCreditCardBooking;\n                    vm.isFinishButtonValid = false;\n\n                    $scope.sendConfirmationEmail = true;\n\n                    // Environment is configured differently across apps so get config from the\n                    // $rootScope for now\n                    const config = $rootScope.config;\n                    let headers = {};\n\n                    //Activity dash needs no headers\n                    if (!config.DASHBOARD) {\n                        if(config.MARKETPLACE){//this is for apps that set the ACCESS_KEY as .env var instead of url param\n                            headers = {\n                                'x-abl-access-key': config.ABL_ACCESS_KEY,\n                                'x-abl-date': Date.parse(new Date().toISOString()),\n                                \"Content-Type\": \"application/json;charset=utf-8\"\n                            };\n                        }else{\n                            headers = {\n                                'x-abl-access-key': $stateParams.merchant || 'tLVVsHUlBAweKP2ZOofhRBCFFP54hX9CfmQ9EsDlyLfN6DYHY5k8VzpuiUxjNO5L', //$stateParams.merchant || config.ABL_ACCESS_KEY,\n                                'x-abl-date': Date.parse(new Date().toISOString()),\n                                \"Content-Type\": \"application/json;charset=utf-8\"\n                            };\n                        }\n                        //Require booking questions on consumer facing apps\n                        vm.validStepsForPayment['bookingQuestions'] = false;\n                    } else {\n                        $scope.dashboard = true;\n                    }\n\n                    $log.debug('abl-activity-book $scope', $scope);\n                    \n                    vm.currency = $rootScope.currency;\n                    vm.eventDate = $rootScope.eventDate;\n                    vm.activityImage = $rootScope.activityImage || null;\n                    vm.activityLocation = $rootScope.activityLocation || null;\n                    vm.eventTime = $rootScope.eventTime;\n\n                    $scope.$watch(function(){\n                        return $rootScope.currency;\n                    }, function(n, o){\n                        if(n){\n                            $log.debug('$scope.$watch:$rootScope.currency', n);\n                            vm.currency = n.toLowerCase();\n                        }\n                    });\n                    \n                    $scope.$on('currency-updated', function(event, args){\n                        $log.debug('ablActivityBook:currency-updated', args);\n                        vm.getPricingQuote(args.currency);\n                    });\n\n                    if (Raven) {\n                        Raven.captureMessage('Add Booking', {\n                            level: 'info', // one of 'info', 'warning', or 'error'\n                            tags: {\n                                step: 'opened'\n                            }\n                        });\n                    }\n                    $scope.formatDate = function (date, format) {\n                        return window\n                            .moment(date)\n                            .format(format);\n                    }\n                    $scope.paymentResponse = '';\n                    $scope.paymentSuccessful = false;\n\n\n                    this.goToNextStep = function (currentStepName, form) {\n                        switch (currentStepName) {\n                            case 'guestDetailsStep': //goes to attendees\n                                vm.toggleGuestDetails();\n                                vm.toggleAttendees();\n                                break;\n                            case 'attendeesStep': //goes to addons || booking || pay\n                                //$log.debug('goToNextStep:attendeesStep', vm.attendeesAdded);\n                                if (vm.countAttendeesAdded() > 0) { //validate attendees\n                                    //$log.debug('attendeesStep', vm.addons.length, vm.questions);\n                                    if (vm.addons.length > 0) {\n                                        vm.attendeesExpanded = false; //close current\n                                        vm.addonsExpanded = true; //close current\n                                    } else if (vm.questions.length > 0) {\n                                        vm.attendeesExpanded = false; //close current\n                                        vm.questionsExpanded = true;\n                                    } else {\n                                        vm.attendeesExpanded = false; //close current\n                                        vm.stripePaymentExpanded = true;\n                                        if (!$scope.dashboard) {\n                                            $log.debug('no questions, goToPay');\n                                            vm.goToNextStep('paymentStep');\n                                        }\n                                    }\n                                }\n                                break;\n                            case 'addonsStep': //goes to addons || booking || pay\n                                if (vm.addons && vm.addons.length > 0) { //validate addons\n                                    if (vm.countAttendeesAdded()) { //if guests and attendees are valid\n                                        if (vm.questions.length > 0) { //go to questions if questions exist\n                                            vm.addonsExpanded = false;\n                                            vm.questionsExpanded = true;\n                                        } else { //got to pay if qustions doesn't exist\n                                            vm.addonsExpanded = false;\n                                            vm.stripePaymentExpanded = true;\n                                            if (!$scope.dashboard) {\n                                                $log.debug('no questions, goToPay');\n                                                vm.goToNextStep('paymentStep');\n                                            }\n                                        }\n                                    }\n                                }\n                                break;\n                            case 'paymentStep': //goes to addons || booking || pay\n                                $log.debug('goToNextStep:paymentStep', vm.isPaymentValid());\n                                if (vm.isPaymentValid() && !vm.pricingQuoteStarted) { //if guests and attendees are valid\n                                    vm.guestDetailsExpanded = false;\n                                    vm.attendeesExpanded = false;\n                                    vm.addonsExpanded = false;\n                                    vm.questionsExpanded = false;\n                                    vm.stripePaymentExpanded = true;\n                                    if (!$scope.dashboard) {\n                                        vm.goToPay()\n                                    }\n                                }\n                                break;\n                        }\n                    }\n\n                    vm.guestDetailsFormValid = false;\n\n                    this.toggleGuestDetails = function () {\n                        //console.log('toggle guest details');\n                        this.guestDetailsExpanded = this.formWasBlocked\n                            ? false\n                            : !this.guestDetailsExpanded;\n                    }\n\n                    this.togglePayment = function () {\n                        //$log.debug('toggle payment');\n                        this.paymentExpanded = !this.paymentExpanded;\n                    }\n\n                    this.returnToMainPage = function () {\n\n                        if ($rootScope.config.DASHBOARD) {\n                            $mdDialog.hide();\n                            $state.reload();\n                        } else {\n                            $mdDialog.hide();\n                            $state.go('home', {merchant: $stateParams.merchant});\n                        }\n                    }\n                    this.pricing = {\n                        total: 0\n                    };\n                    this.taxTotal,\n                    this.addonTotal,\n                    this.attendeeTotal = 0;\n\n                    $scope.bookingSucceeded = false;\n                    $scope.$mdMedia = $mdMedia;\n                    $scope.screenIsBig = function () {\n                        var w = angular.element($window);\n                        return w[0].innerWidth > 742;\n                    }\n\n                $scope.addBookingController = $scope.$parent;\n                vm.addBookingController = $scope.addBookingController;\n                $log.debug('addBookingController:initialize', $scope.addBookingController);\n                    \n                $scope.addBookingController.timeslot.charges.forEach(function(item) { //reset quantity to 0 for all charges for every new booking dialog open\n                    item.quantity = 0;\n                });\n\n                    this.toggleQuestions = function () {\n                        //$log.debug('toggle questions');\n                        this.questionsExpanded = this.formWasBlocked\n                            ? false\n                            : !this.questionsExpanded;\n                    }\n\n                    var timerAdjustingAddons = 0;\n                    this.adjustAddon = function (i, mode) {\n                        if(vm.pricingQuoteRequestState === 'progress'){\n                            return;\n                        }\n                        vm.pricingQuoteStarted = true;\n                        $timeout.cancel(timerAdjustingAddons);\n                        if (mode == 'up')\n                            vm.addons[i].quantity++;\n                        if (mode == 'down' && vm.addons[i].quantity > 0)\n                            vm.addons[i].quantity--;\n                        \n                        timerAdjustingAddons = $timeout(function(){\n                            vm.getPricingQuote();\n                        }, 400);\n                    }\n                    //$log.debug('adjustAddon:addons', vm.addons);\n\n                    this.toggleAddons = function () {\n                        //$log.debug('toggle addons');\n                        if (vm.addons.length < 1)\n                            this.questionsExpanded = this.formWasBlocked\n                                ? false\n                                : !this.questionsExpanded;\n                        else\n                            this.addonsExpanded = this.formWasBlocked\n                                ? false\n                                : !this.addonsExpanded;\n                        }\n\n                    this.toggleStripePay = function () {\n                        this.paymentExpanded = !this.paymentExpanded;\n                    }\n\n                    this.togglePay = function () {\n                        this.payButtonEnabled = !this.payButtonEnabled;\n                    }\n\n                    var timerAdjustingAttendee = 0;\n                    this.adjustAttendee = function (i, mode) {\n                        if(vm.pricingQuoteRequestState === 'progress'){\n                            return;\n                        }\n                        vm.pricingQuoteStarted = true;\n                        $timeout.cancel(timerAdjustingAttendee);\n                        //Allow dashboard users to overbook\n                        if (mode == 'up' && (vm.countAttendees() > 0 || $scope.dashboard))\n                            vm.attendees[i].quantity++;\n                        if (mode == 'down' && vm.attendees[i].quantity > 0)\n                            vm.attendees[i].quantity--;\n\n                        timerAdjustingAttendee = $timeout(function(){\n                            vm.getPricingQuote();\n                            vm.countAttendees();\n                        }, 400);\n                    }\n                    \n                    vm.pricingQuoteRequestState = null;\n                    $rootScope.$on('loading:progress', function (event, args){\n                        if(args.request.url.indexOf('pricing-quotes') !== -1){\n                            vm.pricingQuoteRequestState = 'progress';\n                        }\n                    });\n                    \n                    $rootScope.$on('loading:finish', function (event, args){\n                        if(args.response.config.url.indexOf('pricing-quotes') !== -1){\n                            vm.pricingQuoteRequestState = 'finished';\n                        }\n                    });\n\n                    this.toggleAttendees = function () {\n                        //$log.debug('toggle attendees');\n                        this.attendeesExpanded = this.formWasBlocked\n                            ? false\n                            : !this.attendeesExpanded;\n                    }\n\n                    this.checkAdjustAttendee = function ($index) {\n                        if (!$scope.dashboard && vm.attendees[$index].quantity > vm.countAttendees()) {\n                            vm.attendees[$index].quantity = 0;\n                            vm.attendees[$index].quantity = vm.countAttendees();\n                        }\n                        if (vm.attendees[$index].quantity < 0)\n                            vm.attendees[$index].quantity = 0;\n\n                        vm.getPricingQuote();\n                        vm.countAttendees();\n                        $scope.safeApply();\n                        $log.debug('attendees added', vm.countAttendees(), vm.attendees[$index].quantity);\n                    }\n\n                    var data = {\n                        \"attendees\": {},\n                        \"addons\": {}\n                    }\n\n                    function buildQuery() {\n                        // Parse attendees\n                        angular\n                            .forEach(vm.attendees, function (e, i) {\n                                data[\"attendees\"][e._id] = [];\n                                if (e.quantity > 0) {\n                                    for (var i = 0; i < e.quantity; i++) {\n                                        data[\"attendees\"][e._id].push(null);\n                                    }\n                                }\n                            });\n                        // Parse addons\n                        angular.forEach(vm.addons, function (e, i) {\n                            data[\"addons\"][e._id] = [];\n                            if (e.quantity > 0) {\n                                for (var i = 0; i < e.quantity; i++) {\n                                    data[\"addons\"][e._id].push(null);\n                                }\n                            }\n                        });\n                        //$log.debug('pricing quote POST data', data);\n                        data.currency = vm.currency.toUpperCase()\n                        return data;\n                    }\n\n                    vm.pricingQuoteStarted = false;\n                    // Query for pricing data based on the data object used to make a booking\n                    // request\n                    vm.getPricingQuote = function (currency) {\n                        var query = buildQuery();\n                        $http({\n                                method: 'POST',\n                                url: config.FEATHERS_URL + '/pricing-quotes',\n                                data: query,\n                                headers: headers\n                            }).then(function successCallback(response) {\n                            vm.pricing = response.data;\n                            vm.pricing.couponDeduction = vm\n                                .pricing\n                                .items\n                                .filter(function (item) {\n                                    return item.type == 'coupon';\n                                });\n\n                            vm.pricing.agentCommission = vm\n                                .pricing\n                                .items\n                                .filter(function (item) {\n                                    return item.type == 'agent_commission';\n                                }).reduce(function (result, agentCommission) {\n                                    return result + (agentCommission.price.amount || agentCommission.price.price) * agentCommission.quantity;\n                                }, 0);\n\n                            var addonsFilter = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == 'addon';\n                                });\n                            vm.addonTotal = 0;\n                            vm.addonSubtotals = [];\n                            var addonsArray = {};\n                            angular.forEach(addonsFilter, function (addon, key) {\n                                var object = addon.type + addon\n                                    .name\n                                    .replace(' ', '');\n                                if (!addonsArray[object]) {\n                                    addonsArray[object] = {\n                                        addons: []\n                                    };\n                                }\n                                addonsArray[object]\n                                    .addons\n                                    .push(addon);\n                            });\n                            angular.forEach(addonsArray, function (addon, key) {\n                                var obj = {\n                                    name: addon.addons[0].name,\n                                    price: addon.addons[0].amount || addon.addons[0].price,\n                                    amount: (addon.addons[0].amount || addon.addons[0].price) * addon.addons[0].quantity,\n                                    quantity: addon.addons[0].quantity\n                                };\n                                vm.addonTotal += (addon.addons[0].amount || addon.addons[0].price) * addon.addons[0].quantity;\n                                vm\n                                    .addonSubtotals\n                                    .push(obj);\n                            });\n\n                            vm.attendeeTotal = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == \"aap\"\n                                })\n                                .reduce(function (result, att) {\n                                    if(angular.isDefined(att.amount) && att.amount > -1){\n                                        return result + (att.amount * att.quantity);\n                                    }else{\n                                        return result + (att.price * att.quantity);\n                                    }\n                                }, 0);\n\n                            var aapFilter = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == 'aap';\n                                });\n                            vm.attendeeSubtotals = [];\n                            var attendeesArray = {};\n                            angular.forEach(aapFilter, function (aap, key) {\n                                var object = aap.type + aap\n                                    .name\n                                    .replace(' ', '');\n                                if (!attendeesArray[object]) {\n                                    attendeesArray[object] = {\n                                        aaps: []\n                                    };\n                                }\n                                attendeesArray[object]\n                                    .aaps\n                                    .push(aap);\n                            });\n                            angular.forEach(attendeesArray, function (aap, key) {\n                                var obj = {\n                                    name: aap.aaps[0].name,\n                                    amount: aap.aaps[0].amount * aap.aaps[0].quantity,\n                                    quantity: aap.aaps[0].quantity\n                                };\n                                if(angular.isDefined(aap.aaps[0].amount)){\n                                    obj.price = aap.aaps[0].amount;\n                                }else{\n                                    obj.price = aap.aaps[0].price;\n                                }\n                                vm\n                                    .attendeeSubtotals\n                                    .push(obj);\n                            });\n\n                            vm.taxTotal = response\n                                .data\n                                .items\n                                .filter(function (item) {\n                                    return item.type == \"tax\" || item.type == \"fee\" || item.type == 'service'\n                                })\n                                .reduce(function (result, tax) {\n                                    $log.debug('reduce.vm.taxTotal', tax);\n                                    if(angular.isDefined(tax.price.amount)){\n                                        return result + ((tax.price.amount) * tax.quantity);\n                                    }else{\n                                        return result + ((tax.price.price) * tax.quantity);\n                                    }\n                                    \n                                }, 0);\n                            vm.taxTotal = vm.taxTotal + vm.pricing.agentCommission;\n\n                            $log.debug('getPricingQuotes', response);\n                            $log.debug('vm.attendeeSubtotal', vm.attendeeSubtotals);\n                            $log.debug('vm.taxTotal', vm.taxTotal, vm.taxTotal + vm.pricing.agentCommission);\n\n                            // Reset the payment method to prevent some valid cases affecting the payment method wrongly\n                            // e.g., agent code addition before adding attendees will amount to 0 changing the method to 'gift' but it needs to be reset when the attendees are added.\n                            if(!vm.showPaymentForm) {\n                                vm.paymentMethod = 'credit';\n                            }\n\n                            if (vm.pricing.total == 0 && vm.paymentMethod == 'credit') {\n                                vm.paymentMethod = 'cash';\n                            }\n                            if(vm.attendeeTotal === 0 || vm.pricing.total.amount === 0){\n                                vm.paymentMethod = 'gift';\n                            }\n                            if(vm.pricing.total > 0 || vm.pricing.total.amount > 0){\n                                vm.paymentMethod = 'credit';\n                            }\n                            \n                            if(currency){\n                                vm.currency = currency;\n                            }\n                            vm.pricingQuoteStarted = false;\n                            $scope.safeApply();\n                            $log.debug('finalPricingQuote', vm.pricingQuoteStarted, vm.pricing, vm.paymentMethod, vm.attendeeTotal);\n                        }, function errorCallback(response) {\n                            vm.pricing = {};\n                            vm.taxTotal = 0;\n                            vm.pricingQuoteStarted = false;\n                            $mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position('left bottom').hideDelay(3000));\n                            $scope.safeApply();\n                            //$log.debug('getPricingQuotes error!', response, vm.pricing);\n                        });\n                    }\n\n                    //Query for possible coupons partially matching the vm.couponQuery search string\n                    vm.getPossibleCoupons = function () {\n                        vm.pricingQuoteStarted = true;\n                        $http({\n                                method: 'GET',\n                                url: config.FEATHERS_URL + '/coupons?bookingId=' + vm.couponQuery,\n                                headers: headers\n                            })\n                            .then(function successCallback(response) {\n                                vm.possibleCoupons = response.data;\n                                $log.debug('getPossibleCoupons success', response);\n                                vm.pricingQuoteStarted = false;\n                            }, function errorCallback(response) {\n                                vm.possibleCoupons = [];\n                                vm.pricingQuoteStarted = false;\n                                // vm.taxTotal = 0; $log.debug('getPossibleCoupons error!', response);\n                            });\n                    }\n\n                    vm.clients = [];\n                    observeOnScope($scope, 'vm.formData.fullName').map(function (data) {\n                        return data;\n                    })\n                        .subscribe(function (change) {\n                            $log.debug('clientSearchText ', change.newValue);\n                            if ($scope.dashboard) {\n                                vm.clients = $http({\n                                        method: 'GET',\n                                        url: config.FEATHERS_URL + '/clients?fullName=' + change.newValue,\n                                        headers: headers\n                                    }).then(function successCallback(response) {\n                                    $log.debug('clientSearch success', response);\n                                    return response.data.list;\n                                }, function errorCallback(response) {\n                                    $log.debug('clientSearch error!', response);\n                                    return [];\n                                });\n                            }\n                        });\n\n                    vm.selectedClientChange = function (client) {\n                        if (client) {\n                            vm.formData.fullName = client.primaryContact.fullName || '';\n                            vm.formData.mail = client.primaryContact.email || '';\n                            vm.formData.phoneNumber = client.primaryContact.phoneNumber || '';\n                            $log.debug('selectedClientChange', client);\n                        }\n                    }\n\n                    $scope.autocomplete = {};\n                    vm.couponStatus = 'untouched';\n\n                    $scope.autocomplete.searchTextChange = function searchTextChange(text) {\n                        if (!text)\n                            if (data['couponId'])\n                                delete data['couponId'];\n                            }\n\n                    $scope.autocomplete.selectedItemChange = function selectedItemChange(item) {\n                        $log.debug('applied coupon', item);\n\n                        if (item) {\n                            vm.appliedCoupon = item;\n                            data['couponId'] = item['couponId'];\n                            vm.validateCoupon(vm.appliedCoupon);\n                            vm.couponStatus = 'valid';\n                            vm.getPricingQuote();\n                            vm.checkingCoupon = false;\n                        } else {\n                            vm.appliedCoupon = undefined;\n                            vm.couponStatus = 'untouched';\n                            if (data['couponId'])\n                                delete data['couponId'];\n                            }\n                        }\n\n                    var queryDebounce = false;\n                    vm.coupons = [];\n                    $scope.autocomplete.querySearch = function querySearch(text) {\n                        if ($scope.dashboard) {\n                            text = text.toUpperCase();\n                            if (!queryDebounce && text.length !== 1) {\n                                queryDebounce = true;\n                                return $timeout(function () {\n                                    return $http({\n                                            method: 'GET',\n                                            url: config.FEATHERS_URL + '/coupons?couponId=' + text,\n                                            headers: headers\n                                        }).then(function successCallback(response) {\n                                        queryDebounce = false;\n                                        vm.coupons = response.data.list.filter(function(item){\n                                            $log.debug('vm.coupons', item, $scope.addBookingController, $scope.addBookingController.activity);\n                                            return item.activities.length === 0 || (item.activities.length > 0 && item.activities[0] === $scope.addBookingController.activity._id)\n                                        });\n                                        return vm.coupons;\n                                        $log.debug('getPossibleCoupons success', response.data.list);\n                                    }, function errorCallback(response) {\n                                        queryDebounce = false;\n                                        return [];\n                                        $log.debug('getPossibleCoupons error!', response);\n                                    });\n                                }, 100)\n\n                            } else {\n                                return this;\n                            }\n                        }\n\n                    }\n\n                    // Check whether the vm.couponQuery search string exists as a coupon, if\n                    // successful, add the coupon id to the make booking request object as the\n                    // 'coupon' property\n                    vm.checkCoupon = function () {\n                        vm.checkingCoupon = true;\n                        //$log.debug('check coupon', vm.couponQuery);\n                        $http({\n                                method: 'GET',\n                                url: config.FEATHERS_URL + '/coupons/' + vm.couponQuery,\n                                headers: headers\n                            }).then(function successCallback(response) {\n                            $log.debug('checkCoupon success', response);\n                            data['couponId'] = response.data['couponId'];\n                            vm.appliedCoupon = response.data;\n                            $log.debug('applied coupon', vm.appliedCoupon);\n                            vm.validateCoupon(vm.appliedCoupon);\n                            vm.couponStatus = 'valid';\n                            vm.getPricingQuote();\n                            vm.checkingCoupon = false;\n\n                        }, function errorCallback(response) {\n                            delete data['couponId'];\n                            vm.couponStatus = 'invalid';\n                            vm.appliedCoupon = {};\n                            vm.checkingCoupon = false;\n\n                            //$log.debug('checkCoupon error!', response);\n                        });\n                    }\n\n                    vm.removeCoupon = function () {\n                        vm.couponQuery = '';\n                        delete data['couponId'];\n                        $scope.autocomplete.selectedItem = undefined;\n                        vm.couponStatus = 'untouched';\n                        vm.appliedCoupon = {};\n                        vm.getPricingQuote();\n                        $scope.safeApply();\n                    }\n                    \n                    vm.pricingInformation = function(total){\n                        $log.debug('pricingInformation', total);\n                    };\n\n                    const moment = window.moment;\n\n                    vm.validateCoupon = function (coupon) {\n                        const today = moment();\n                        // $log.debug('coupon expires after today',\n                        // moment(coupon.endTime).isAfter(moment())); Coupon is not expired and is\n                        // infinitely redeemable\n                        if (moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions == 0)\n                            return true;\n\n                        // Coupon is not expired and has been redeemed less than the maximum allowable\n                        // redemptions\n                        if (coupon.maxRedemptions > 0 && moment(coupon.endTime).isAfter(moment()) && coupon.maxRedemptions - coupon.redemptions >= 0)\n                            return true;\n\n                        //Coupon is expired or has been redeemed too many times\n                        vm.couponStatus = 'invalid';\n                        return false;\n                    }\n                    \n                    vm.appliedCouponType = function(coupon) {\n                        if (coupon) {\n                            if (coupon.percentage) {\n                                return coupon.amount + '%';\n                            }\n                            else {\n                                return $filter('ablCurrency')(coupon.amount, $rootScope.currency);\n                            }\n                        }\n                    }\n\n                    vm.bookingQuestionsCompleted = function () {\n                        var completed = 0;\n                        if (vm.bookingQuestions) {\n                            angular\n                                .forEach(vm.bookingQuestions, function (e, i) {\n                                    if(e){\n                                        if (e.length > 0)\n                                            completed++;\n                                        }\n                                    }\n                                );\n                        } else {\n                            completed = 0;\n                        }\n                        //$log.debug('vm.bookingQuestions', vm.bookingQuestions, completed);\n                        return completed;\n                    }\n                    // Observe and debounce an object on the $scope, can be used on a search input\n                    // for example to wait before auto-sending the value\n                    observeOnScope($scope, 'vm.couponQuery')\n                        .debounce(500)\n                        .select(function (response) {\n                            return response;\n                        })\n                        .subscribe(function (change) {\n                            //$log.debug('search value', change);\n                            if (vm.couponQuery.length > 0)\n                                vm.checkCoupon();\n                            }\n                        );\n\n                    // -- START - Agent code autocomplete\n\n                    $scope.agentAutocomplete = {};\n                    vm.agentCodeStatus = 'untouched';\n\n                    \n                    $scope.agentAutocomplete.searchTextChange = function searchAgentTextChange(text) {\n                        console.log(\"SEARCH TEXT\", text);\n                    }\n                    $scope.agentAutocomplete.selectedItemChange = function selectedAgentItemChange(item) {\n                        console.log('applied agent', item);\n\n                        if (item) {\n                            vm.appliedAgentCode = item;\n                            data['agentCode'] = item['code'];\n                            vm.validateAgent(vm.appliedAgentCode);\n                            vm.agentCodeStatus = 'valid';\n                            vm.getPricingQuote();\n                            vm.checkingAgentCode = false;\n                        } else {\n                            vm.appliedAgentCode = undefined;\n                            vm.agentCodeStatus = 'untouched';\n                            if (data['agentCode'])\n                                delete data['agentCode'];\n                        }\n                    }\n\n                    $scope.agentAutocomplete.querySearch = function querySearch(text) {\n                        // text = text.toUpperCase();\n                        text = !text ? \".\" : text;\n                        return $http({\n                            method: 'GET',\n                            url:  config.FEATHERS_URL + '/operators/'+ $scope.orgId +  '/agents?partialMatch=true&code='  + text,\n                            headers: headers\n                        }).then(function successCallback(response) {\n                            return response.data;\n                            console.log('getPossibleAgent success', response.data);\n                        }, function errorCallback(response) {\n                            return [];\n                            console.log('getPossibleAgentCodes error!', response);\n                        });\n                    }\n\n                    // Check whether the vm.agentCodeQuery search string exists as a agent, if successful,\n                    // add the agent code to the make booking request object as the 'agentCode' property\n                    vm.checkAgentCode = function () {\n                        vm.checkingAgentCode = true;\n\n                        $http({\n                            method: 'GET',\n                            url:  config.FEATHERS_URL + '/operators/'+ $scope.orgId +  '/agents?code='  + vm.agentCodeQuery,\n                            headers: headers\n                        }).then(function successCallback(response) {\n                            console.log('checkAgentCode success', response);\n                            if(response.data && response.data.length == 0 ){\n                               delete data['agentCode'];\n                               vm.agentCodeStatus = 'invalid';\n                               vm.appliedAgentCode = {};\n                               vm.checkingAgentCode = false;\n                               return; \n                            }\n                            data['agentCode'] = response.data[0]['code'];\n                            vm.appliedAgentCode = response.data[0];\n                            console.log('applied agent code', vm.appliedAgentCode);\n                            vm.validateAgent(vm.appliedAgentCode);\n                            vm.agentCodeStatus = 'valid';\n                            vm.getPricingQuote();\n                            vm.checkingAgentCode = false;\n\n                        }, function errorCallback(response) {\n                            delete data['agentCode'];\n                            vm.agentCodeStatus = 'invalid';\n                            vm.appliedAgentCode = {};\n                            vm.checkingAgentCode = false;\n                        });\n                    }\n\n                    vm.removeAgentCode = function () {\n                        vm.agentCodeQuery = '';\n                        delete data['agentCode'];\n                        $scope.agentAutocomplete.selectedItem = undefined;\n                        vm.agentCodeStatus = 'untouched';\n                        vm.appliedAgentCode = {};\n                        vm.getPricingQuote();\n                    }\n\n                    vm.validateAgent = function (agent) { \n                        if(agent.active){\n                            console.log(\"agent active\");\n                            return true;\n                        }\n                        vm.agentCodeStatus = 'invalid';\n                        return false;\n                    }\n\n                    //Observe and debounce an object on the $scope, can be used on \n                    //a search input for example to wait before auto-sending the value\n                    observeOnScope($scope, 'vm.agentCodeQuery')\n                        .debounce(500)\n                        .select(function (response) {\n                            return response;\n                        })\n                        .subscribe(function (change) {\n                            //console.log('search value', change);\n                            if (vm.agentCodeQuery.length > 0)\n                                vm.checkAgentCode();\n                        });\n\n                    // -- END - Agent code autocomplete\n\n                    activityBookValidators(vm, rx, $http, $stateParams);\n\n                    $scope.$watch('addBookingController.activity', function (changes) {\n                        $log.debug('addBookingController.activity', changes);\n                        if (angular.isDefined($scope.addBookingController.activity)) {\n\n                            // This is needed for Agent code search query\n                            $scope.orgId = $scope.addBookingController.activity.operator || $scope.addBookingController.activity.organizations[0];\n\n                            //Get booking questions\n                            vm.questions = $scope.addBookingController.activity.questions || [];\n                            if (!vm.questions) {\n                                delete vm.validStepsForPayment.bookingQuestions;\n                            }\n\n                            vm.addons = $scope\n                                .addBookingController\n                                .activity\n                                .charges\n                                .filter(function (charge) {\n                                    return charge.type == 'addon' && charge.status == 'active';\n                                });\n                            if (!vm.addons) {\n                                delete vm.validStepsForPayment.addons;\n                            }\n                            vm\n                                .addons\n                                .forEach(function (e, i) {\n                                    if (!angular.isDefined(e.quantity))\n                                        e.quantity = 0;\n                                    }\n                                );\n\n                            vm.taxes = $scope\n                                .addBookingController\n                                .activity\n                                .charges\n                                .filter(function (charge) {\n                                    return charge.type == 'tax';\n                                });\n                            \n                            $scope.safeApply();\n                        }\n                    }, true);\n\n                    $scope.$watch('addBookingController.timeslot', function (changes) {\n                        if (angular.isDefined($scope.addBookingController.timeslot) && angular.isDefined($scope.addBookingController.event)) {\n\n                            if (angular.isDefined($scope.addBookingController.timeslot.charges)) {\n                                vm.attendees = $scope\n                                    .addBookingController\n                                    .timeslot\n                                    .charges\n                                    .filter(function (charge) {\n                                        return charge.type == 'aap' && charge.status == 'active';\n                                    });\n                                vm\n                                    .attendees\n                                    .forEach(function (e, i) {\n                                        if (!angular.isDefined(e.quantity))\n                                            e.quantity = 0;\n                                        }\n                                    );\n                            }\n                            data['timeSlotId'] = $scope.addBookingController.timeslot._id;\n                            data['startTime'] = $scope.addBookingController.event.startTime;\n\n                        }\n                    }, true);\n\n                    $scope.$watch('addBookingController.preferences', function (changes) {\n                        var preferences = $scope.addBookingController.preferences;\n                        $scope.agentsIsOn = (preferences && preferences.features) ? preferences.features.agents : false;\n                    }, true);\n\n                    vm.countAttendees = function () {\n                        var attendees = 0;\n                        if ($scope.addBookingController.event) {\n                            if (vm.attendees) {\n                                attendees = ($scope.addBookingController.event.maxOcc\n                                    ? $scope.addBookingController.event.maxOcc\n                                    : $scope.addBookingController.timeslot.maxOcc) - vm\n                                    .attendees\n                                    .map(function (att) {\n                                        return att.quantity;\n                                    })\n                                    .reduce((a, b) => a + b, 0) - $scope.addBookingController.event.attendees;\n                            } else {\n                                attendees = 0;\n                            }\n                        }\n                        return attendees;\n\n                    }\n\n                    vm.countAttendeesAdded = function () {\n                        var attendeesAdded = 0;\n                        if ($scope.addBookingController.event) {\n                            if (vm.attendees) {\n                                attendeesAdded = vm\n                                    .attendees\n                                    .map(function (att) {\n                                        return att.quantity;\n                                    })\n                                    .reduce((a, b) => a + b, 0);\n                            }\n                        }\n                        // $log.debug('countAttendeesAdded', attendeesAdded);\n                        return attendeesAdded;\n                    }\n\n                    vm.countAddonsAdded = function () {\n                        if ($scope.addBookingController.event) {\n                            if (vm.addons) {\n                                return vm\n                                    .addons\n                                    .map(function (add) {\n                                        return add.quantity;\n                                    })\n                                    .reduce((a, b) => a + b, 0);\n                            } else {\n                                return 0;\n                            }\n                        }\n                        return 0;\n                    }\n\n                    vm.addonsChanged = function () {\n                        $scope.safeApply();\n                        $log.debug('addonsChanged');\n                        $timeout(function () {\n                            vm.getPricingQuote();\n                        }, 0);\n                    }\n\n                    this.areGuestDetailsValid = function (form) {\n                        if (form) {\n                            vm.guestDetailsAreValid = form.$valid;\n                            vm.validStepsForPayment.guest = vm.guestDetailsAreValid;\n                        } else {\n                            vm.guestDetailsAreValid = false;\n                        }\n                        return vm.guestDetailsAreValid;\n                    }\n\n                    this.areAttendeesValid = function () {\n                        vm.validStepsForPayment.attendees = vm.countAttendeesAdded() === 0\n                            ? false\n                            : true;\n                        return vm.countAttendeesAdded() === 0\n                            ? false\n                            : true;\n                    }\n\n                    this.areAddonsValid = function () {\n                        if (vm.validStepsForPayment.addons != null) {\n                            vm.validStepsForPayment.addons = true;\n                        }\n                        return vm.countAddonsAdded() === 0\n                            ? false\n                            : true;\n                    }\n\n                    this.areBookingQuestionsValid = function () {\n                        if (vm.validStepsForPayment.bookingQuestions != null) {\n                            vm.validStepsForPayment.bookingQuestions = (vm.bookingQuestionsCompleted() === vm.questions.length\n                                ? true\n                                : false);\n                        }\n                        return vm.validStepsForPayment.bookingQuestions;\n                    }\n                    \n                    /*$scope.$watch(function(){\n                        return vm.answerAllQuestionsChecked;\n                    }, function(n, o){\n                        if(n){\n                            $log.debug('answerAllQuestionsChecked', n, vm.bookingQuestions, vm.questions);\n                            if(n === 'yes'){\n                                vm.bookingQuestions = new Array(vm.questions.length);\n                                vm.bookingQuestionsCopy = vm.bookingQuestions;\n                                for(var i = 0; i < vm.bookingQuestions.length; i++){\n                                    vm.bookingQuestions[i] = 'No answer';\n                                }\n                            }else{\n                                vm.bookingQuestions = vm.bookingQuestionsCopy;\n                            }\n                        }\n                    });*/\n                    \n                    this.answerAllQuestions = function(){\n                        $log.debug('answerAllQuestions', vm.answerAllQuestionsChecked, vm.bookingQuestions);\n                        if(!vm.answerAllQuestionsChecked){\n                            for(var i = 0; i < vm.bookingQuestions.length; i++){\n                                vm.bookingQuestions[i] = 'No answer';\n                            }\n                            vm.answerAllQuestionsChecked = true;\n                        }else{\n                            for(var i = 0; i < vm.bookingQuestions.length; i++){\n                                vm.bookingQuestions[i] = '';\n                            }\n                            vm.answerAllQuestionsChecked = false;\n                        }\n                    }\n\n                    this.isPaymentValid = function () {\n                        var isValid = [];\n                        angular.forEach(vm.validStepsForPayment, function (step, key) {\n                            if (!step) {\n                                isValid.push(step);\n                            }\n                        });\n                        vm.isFinishButtonValid = isValid.length === 0 && vm.pricingQuoteStarted === false;\n                        return isValid.length > 0 && vm.pricingQuoteStarted === true\n                            ? false\n                            : true;\n                    }\n\n                    this.isNextStepPayment = function (step) {\n                        if (step === 'attendees') {\n                            if (vm.addons || vm.questions) {\n                                return vm.addons || vm.questions\n                                    ? true\n                                    : false;\n                            } else {\n                                return false;\n                            }\n                        }\n                        if (step === 'addons') {\n                            if (vm.questions) {\n                                return vm.questions\n                                    ? true\n                                    : false;\n                            } else {\n                                return false;\n                            }\n                        }\n                        if (step === 'payment') {\n                            return true;\n                        }\n                    }\n                    \n                    this.nextButtonLabel = function(step){\n                        var statusObj = {step: step};\n                        //$log.debug('validStepsForPayment', vm.validStepsForPayment, step);\n                        if(!$scope.dashboard && vm.pricing.total.amount === 0 && vm.countAttendeesAdded() > 0){\n                            if(step === 'guest'){\n                                statusObj.label = 'Next';\n                            }\n                            if (step === 'attendees') {\n                                if (vm.addons || vm.questions) {\n                                    if(vm.addons.length > 0 || vm.questions.length > 0){\n                                        statusObj.label = 'Next';\n                                    }else{\n                                        statusObj.label = 'Finish';\n                                    }\n                                } else {\n                                    statusObj.label = 'Next';\n                                }\n                            }\n                            if (step === 'addons') {\n                                if (vm.questions) {\n                                    if(vm.questions.length > 0){\n                                        statusObj.label = 'Next';\n                                    }else{\n                                        statusObj.label = 'Finish';\n                                    }\n                                } else {\n                                    statusObj.label = 'Next';\n                                }\n                            }\n                            if (step === 'questions') {\n                                statusObj.label = 'Finish';\n                            }\n                        }else{\n                            statusObj.label = 'Next';\n                        }\n                        return statusObj;\n                    }\n\n                    vm.paymentMethod = 'credit';\n                    vm.bookingQuestions = [];\n                    vm.getBookingData = function () {\n                        const bookingData = angular.copy(data);\n                        if (vm.paymentMethod == 'reserved')\n                            bookingData['amount'] = 0;\n                        bookingData['eventInstanceId'] = $scope.addBookingController.event['eventInstanceId'] || $scope.addBookingController.event;\n                        bookingData['answers'] = {};\n\n                        bookingData['sendConfirmationEmail'] = $scope.sendConfirmationEmail;\n                        bookingData['skipConfirmation'] = !$scope.sendConfirmationEmail;\n\n                        bookingData['email'] = vm.formData['mail'];\n                        bookingData['phoneNumber'] = vm.formData['phoneNumber'];\n                        bookingData['fullName'] = vm.formData['fullName'];\n                        bookingData['notes'] = vm.formData['notes'];\n                        bookingData['skipConfirmation'] = false;\n                        bookingData['operator'] = $scope.addBookingController.event.operator || $scope.addBookingController.event.organizations[0] || $scope.addBookingController.activity.operator || $scope.addBookingController.activity.organizations[0];\n                        angular.forEach(vm.questions, function (e, i) {\n                            $log.debug('vm.questions', vm.questions);\n                            $log.debug('vm.bookingQuestions', vm.bookingQuestions);\n                            bookingData['answers'][e._id\n                                    ? e._id\n                                    : e] = vm.bookingQuestions[i];\n                        });\n\n                        if (vm.paymentMethod != 'reserved')\n                            bookingData['paymentMethod'] = vm.paymentMethod;\n                        else\n                            bookingData['paymentMethod'] = 'cash';\n\n                        if (vm.paymentMethod == 'reserved') {\n                            bookingData['amount'] = 0;\n                        }\n                        bookingData['currency'] = 'default';\n\n                        return bookingData;\n                    }\n\n                    vm.outputBookingData = function () {\n                        $log.debug(vm.getBookingData());\n                    }\n\n                    $scope.safeApply = function (fn) {\n                        var phase = this.$root.$$phase;\n                        if (phase == '$apply' || phase == '$digest') {\n                            if (fn && (typeof(fn) === 'function')) {\n                                fn();\n                            }\n                        } else {\n                            this.$apply(fn);\n                        }\n                    };\n\n                    function goToPay() {\n\n                        vm.guestDetailsExpanded = false;\n                        vm.attendeesExpanded = false;\n                        vm.addonsExpanded = false;\n                        vm.questionsExpanded = false;\n\n                        vm.showPaymentForm = true;\n                        vm.paymentFormIsLoading = true;\n                        vm.stripePaymentExpanded = true;\n\n                        vm.paymentWasSent = true;\n                        this.formWasBlocked = true;\n                        $scope.bookingSuccessResponse = 'processing';\n                        $scope.safeApply();\n                        $scope.makeBooking();\n                    }\n\n                    function submitNonCreditCardBooking() {\n                        $log.debug('submitNonCreditCardBooking', this.pricing.total);\n\n                        var bookingData = vm.getBookingData();\n                        if (bookingData.stripeToken)\n                            delete bookingData.stripeToken;\n                        bookingData.location = {};\n                        bookingData.isMobile = false;\n                        vm.paymentWasSent = true;\n                        $scope.bookingSuccessResponse = 'processing';\n                        if (Raven) {\n                            Raven.captureMessage('Submit Booking', {\n                                level: 'info', // one of 'info', 'warning', or 'error'\n                                extra: {\n                                    bookingData: bookingData\n                                },\n                                tags: {\n                                    step: 'pay-non-cc'\n                                }\n                            });\n                        }\n                        $http({\n                                method: 'POST',\n                                url: config.FEATHERS_URL + '/bookings',\n                                data: bookingData,\n                                headers: headers\n                            })\n                            .then(function successCallback(response) {\n                                $log.debug('submitNonCreditCardBooking success', response);\n                                $scope.bookingSuccessResponse = response;\n                                vm.waitingForResponse = false;\n                                $rootScope.$emit('paymentResponse');\n                                validatePayment(response);\n                            }, function errorCallback(response) {\n                                var errorElement = document.getElementById('card-errors');\n                                errorElement.textContent = response.data.errors[0];\n                                vm.paymentWasSent = false;\n                                $rootScope.$emit('paymentResponse');\n                                vm.waitingForResponse = false;\n                            });\n                    }\n\n                    function validatePayment(response) {\n                        if (response.status === 200) {\n                            $scope.paymentResponse = 'success'; //processing, failed\n                            $scope.paymentSuccessful = true;\n                            if (Raven) {\n                                Raven.captureMessage('Booking Suceeded', {\n                                    level: 'info', // one of 'info', 'warning', or 'error'\n                                    extra: {\n                                        response: response\n                                    },\n                                    tags: {\n                                        step: 'pay-non-cc'\n                                    }\n                                });\n                            }\n                            $scope.safeApply();\n                        }\n                        $scope.bookingSuccessResponse = response;\n\n                        $scope.$emit('paymentResponse', response);\n                        console.log('paymentResponse', response);\n                    }\n                    \n                    $scope.$on('reloadPaymentForm', function (event, args){\n                        var iframe = document.getElementById(\"paymentIframe\");\n                        var iframeDoc = iframe.contentWindow.document;\n                        iframeDoc.open();\n                        iframeDoc.write('');\n                        iframeDoc.close();\n                        $scope.makeBooking();\n                    });\n\n                    $scope.makeBooking = function (data) {\n                        vm.paymentExpanded = true;\n                        vm.loadingIframe = true;\n                        var bookingData = vm.getBookingData();\n                        if (Raven) {\n                            Raven.captureMessage('Submit Booking', {\n                                level: 'info', // one of 'info', 'warning', or 'error'\n                                extra: {\n                                    bookingData: bookingData\n                                },\n                                tags: {\n                                    step: 'pay-cc'\n                                }\n                            });\n                        }\n                        $log.debug('$scope.makeBooking', data);\n                        $scope.bookingResponse = $http({\n                                method: 'POST',\n                                url: config.FEATHERS_URL + '/bookings',\n                                data: bookingData,\n                                headers: headers\n                                // headers: {     \"Content-Type\": \"application/json;charset=utf-8\" }\n                            }).then(function successCallback(response) {\n                            $log.debug('makeBooking success', response);\n                            if(response.data.iframeHtml){\n                                vm.loadingIframe = false;\n                                $scope.paymentSuccessful = false;\n                                $scope.bookingSuccessResponse = response;\n                                vm.paymentFormIsLoading = false;\n                                var iframe = document.getElementById(\"paymentIframe\");\n                                iframe.style.display = 'block';\n                                var iframeDoc = iframe.contentWindow.document;\n                                iframeDoc.open();\n                                iframeDoc.write(response.data.iframeHtml);\n                                iframeDoc.close();\n                                $scope.bookingSucceeded = true;\n                                if (Raven) {\n                                    Raven.captureMessage('Booking Succeeded', {\n                                        level: 'info', // one of 'info', 'warning', or 'error'\n                                        extra: {\n                                            response: response.data\n                                        },\n                                        tags: {\n                                            step: 'pay-cc'\n                                        }\n                                    });\n                                }\n                            }else if(response.data.booking.status === 'paid'){\n                                $log.debug('makeBooking success $0', response);\n                                $scope.paymentSuccessful = true;\n                                $scope.bookingSuccessResponse = response;\n                                $scope.bookingSucceeded = true;\n                                var event = {\n                                    data: {type: 'payment_success'}\n                                };\n                                paymentMessageHandler(event);\n                            }\n                        }, function errorCallback(response) {\n                            $mdDialog.hide();\n                            vm.loadingIframe = false;\n                            vm.paymentFormIsLoading = false;\n                            vm.paymentExpanded = false;\n                            $scope.bookingSucceeded = false;\n                            if (Raven) {\n                                Raven.captureMessage('Booking Error', {\n                                    level: 'error', // one of 'info', 'warning', or 'error'\n                                    extra: {\n                                        response: response.data\n                                    },\n                                    tags: {\n                                        step: 'pay-cc'\n                                    }\n                                });\n                            }\n                            $mdToast.show($mdToast.simple().textContent(response.data.errors[0]).position('left bottom').hideDelay(3000));\n                            $log.debug('makeBooking error!', response);\n                        });\n                    }\n\n                    var lpad = function (numberStr, padString, length) {\n                        while (numberStr.length < length) {\n                            numberStr = padString + numberStr;\n                        }\n                        return numberStr;\n                    };\n\n                    var paymentMessageHandler;\n                    paymentMessageHandler = function (event) {\n                        // if (event.origin == \"https://calendar.ablist.win\") { // TODO add to config\n                        // $log.debug(\"TRUSTED ORIGIN\", event.origin);\n                        $log.debug(\"DATA\", event.data);\n                        if (event.data == \"payment_complete\" || event.data.type == \"payment_success\") {\n                            $log.debug(\"PAYMENT COMPLETE\");\n                            $scope.paymentResponse = 'success'; //processing, failed\n                            //   $rootScope.showToast('Payment processed successfully.');\n                            $rootScope.$broadcast('paymentWithResponse', {response: event.data});\n\n                            window.removeEventListener(\"message\", paymentMessageHandler);\n                            $scope.paymentSuccessful = true;\n                            //   $scope.changeState('bookings'); //Go to bookings view if successful\n                            $scope.safeApply();\n                            //$mdDialog.hide();\n                        } else {\n                            if(event.data.message === 'Your card was declined.'){\n                                $log.debug('$scope.addBookingController.preferences', $scope.addBookingController.preferences.payment.cards);\n                                if($scope.addBookingController.preferences.payment.cards){\n                                    var cards = [];\n                                    var cardsKeys = {'amex': 'American Express', 'discover': 'Discover', 'mastercard': 'Mastercard', 'visa': 'Visa'};\n                                    angular.forEach($scope.addBookingController.preferences.payment.cards, function(value, key){\n                                        if(value === true){\n                                            cards.push(cardsKeys[key]);\n                                        }\n                                    });\n                                    $mdToast.show($mdToast.simple().textContent('Card Declined, please try one of the following cards: ' + cards.join(', ')).position('left bottom').hideDelay(5000));\n                                }else{\n                                    $mdToast.show($mdToast.simple().textContent('Card Declined, please try one of the cards listed above').position('left bottom').hideDelay(5000));\n                                }\n                            }\n                            if(event.data.type){\n                                if (event.data.type.indexOf('setImmediate') === -1) {\n                                    if (Raven) {\n                                        Raven.captureMessage('Booking Payment Error', {\n                                            level: 'error', // one of 'info', 'warning', or 'error'\n                                            extra: {\n                                                paymentMessageHandler: event.data\n                                            },\n                                            tags: {\n                                                step: 'pay-non-cc'\n                                            }\n                                        });\n                                    } // $rootScope.showToast(event.data.message, 'errorToast');\n                                    // $rootScope.$broadcast('paymentWithResponse', { response: event.data });\n                                    $scope.paymentSuccessful = false;\n                                    $scope.paymentResponse = ''; //processing, failed\n                                    vm.showPaymentForm = true;\n                                    $scope.safeApply();\n                                }\n                            }\n                            $rootScope.$broadcast('paymentWithErrorResponse', {response: event.data});\n                        }\n                    };\n\n                    $log.debug(\"Adding Payment Message Event Listener\");\n                    window.addEventListener(\"message\", paymentMessageHandler);\n\n                    $scope.safeApply = function (fn) {\n                        var phase = this.$root.$$phase;\n                        if (phase == '$apply' || phase == '$digest') {\n                            if (fn && (typeof(fn) === 'function')) {\n                                fn();\n                            }\n                        } else {\n                            this.$apply(fn);\n                        }\n                    };\n\n                    var lpad = function (numberStr, padString, length) {\n                        while (numberStr.length < length) {\n                            numberStr = padString + numberStr;\n                        }\n                        return numberStr;\n                    };\n\n                    // Merge identical items from an array into nested objects, summing their amount\n                    // properties and keeping track of quantities\n                    function mergeIdenticalArrayItemsIntoObject(data, oldObject) {\n                        var seen = oldObject;\n                        //$log.debug('mergeIdenticalArrayItemsIntoObject:data', data);\n                        angular.forEach(data, function (e, i) {\n                            if (seen.hasOwnProperty(e.name) && seen[e.name] === e.name) {\n                                seen[e['name']]['price'] = e['price']; //Sum their prices\n                                seen[e['name']]['quantity'] += 1; //Increment their quantity\n                                seen[e['name']]['amount'] = seen[e['name']]['amount'] * seen[e['name']]['quantity']; //Sum their prices\n                                //$log.debug('merged', seen[e['name']]);\n                            } else {\n                                seen[e['name']] = {};\n                                seen[e['name']]['name'] = e['name'];\n                                seen[e['name']]['price'] = e['price'];\n                                seen[e['name']]['quantity'] = 1;\n                                seen[e['name']]['amount'] = e['amount'];\n                            }\n                        });\n                        //$log.debug('mergeIdenticalArrayItems', seen);\n                        return seen;\n                    }\n                }\n            };\n        }\n    ])\n    .filter('imageService', function(){\n        return function(value){\n            return value.replace(/(.png|.jpg|.jpeg)/i, '-small$1');\n        }\n    });\n\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity-book.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!./activity-book.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./activity-book.css\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./activity-book.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-book.css\n// module id = 126\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"#paymentIframe{margin:0;padding:8px;border:none;min-height:330px;height:100%;overflow-y:hidden;width:100%;display:none}abl-activity-book md-card{box-shadow:none!important;border:none!important;background:transparent}.transparent{background-color:transparent!important}list-item{display:block!important}.payment-section{margin-bottom:54px}md-input-container.md-white-theme:not(.md-input-invalid).md-input-focused label{color:#666!important}.paymentSummaryCardNewContent .paymentSummaryCardNew{margin:0!important}.payment-icons-bar{padding-top:8px;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,.1);background:#ccc}.payment-icons-bar img.payment-icons-bar-left{height:40px;padding-left:16px;vertical-align:middle}.payment-icons-bar img.payment-icons-bar-right{height:30px;padding-right:12px;vertical-align:middle}.left-panel{border-right:1px solid #ddd}.left-panel,.left-panel-no-dashboard{background-color:#fff}.left-panel-no-dashboard>md-content,.left-panel>md-content{background-color:transparent!important}.paymentSummaryCardNewContent .gradient{background:#000;background:-webkit-linear-gradient(left,rgba(0,0,0,.15),hsla(0,0%,96%,.2049194677871149));background:-moz-linear-gradient(left,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149) 100%);background:-o-linear-gradient(left,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149) 100%);background:linear-gradient(90deg,rgba(0,0,0,.15) 0,hsla(0,0%,96%,.2049194677871149));width:5px}.paymentSummaryCardNewContent .paymentSummaryCardNew{overflow-y:auto!important}.payment-icons-bar{padding-top:0;padding-bottom:0}.payment-icons-bar img.payment-icons-bar-left{height:28px;margin-top:2px}.payment-icons-bar img.payment-icons-bar-right{height:25px;padding-right:15px}.listItemHeader{outline:none;background-color:#f2f2f2}.listItemContentArea{background-color:#fff;border-top:1px solid #cacaca}@media(max-width:599px){.left-panel{border-right:none}.payment-icons-bar img.payment-icons-bar-left{height:30px;padding-left:8px}.payment-icons-bar img.payment-icons-bar-right{height:24px;padding-right:8px}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./src/activity/activity-book.css\n// module id = 127\n// module chunks = 0","module.exports = \"<md-content flex class=paymentSummaryCardNewContent layout=row layout-align=\\\"space-between stretch\\\"> <div hide-xs flex=none class=gradient></div> <md-card flex class=paymentSummaryCardNew ng-show=\\\"paymentResponse != 'success'\\\"> <md-list> <div ng-if=\\\"!dashboard && vm.eventDate\\\"> <div layout-padding layout-xs=column layout-gt-sm=row> <div flex-gt-sm=30 flex ng-if=vm.activityImage style=max-height:250px;overflow:hidden;margin-bottom:8px> <img style=width:100% ng-src={{vm.activityImage}} /> </div> <div flex=none hide-sm style=width:16px></div> <div flex flex-gt-sm=60> <h2 style=font-size:17px;margin-bottom:8px>{{vm.addBookingController.timeslot.title}}</h2> <p style=font-size:14px ng-if=vm.activityLocation><ng-md-icon icon=place class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.activityLocation}}</p> <p style=font-size:14px><ng-md-icon icon=date_range class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.eventDate}}</p> <p style=font-size:14px ng-if=vm.eventTime><ng-md-icon icon=access_time class=listIcon style=transform:scale(.8)></ng-md-icon> {{vm.eventTime}} </p></div> </div> <div ng-if=!vm.activityLocation> <md-list-item class=lineItemHeader ng-if=vm.base ng-click=null> <div class=md-list-item-text layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <p class=\\\"\\\">Base Price </p> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <p> <abl-currency-directive price=vm.base() currency={{vm.currency}}></abl-currency-directive> {{$parent.currency | uppercase}}</p> </div> </div> </md-list-item> </div> </div> <md-list-item class=lineItemHeader ng-if=vm.base ng-click=null> <div class=md-list-item-text layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <p class=\\\"\\\">Base Price </p> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <p> <abl-currency-directive price=vm.base() currency={{vm.currency}}></abl-currency-directive> {{$parent.currency | uppercase}}</p> </div> </div> </md-list-item> <md-list-item class=\\\"paymentHeader md-2-line md-primary\\\" ng-disabled=detailsForm.$invalid ng-show=\\\"vm.couponStatus == 'valid'\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column layout-align=\\\"center start\\\"> <ng-md-icon icon=clear class=\\\"listIcon remove-coupon\\\" ng-click=vm.removeCoupon(); ng-if=\\\"vm.couponStatus =='valid'\\\" ng-hide=\\\"!dashboard && vm.formWasBlocked\\\"></ng-md-icon> </div> <span class=\\\"couponText total\\\" flex>{{vm.appliedCoupon.couponId}} - {{vm.appliedCouponType(vm.appliedCoupon)}} Off</span> </div> <div layout=row layout-align=\\\"end center\\\"> <span class=couponTextTotal ng-if=vm.pricing.couponDeduction[0]>-<abl-currency-directive price=\\\"(-1 * vm.pricing.couponDeduction[0].price.amount)\\\" currency={{vm.currency}}></abl-currency-directive></span> <md-progress-circular md-mode=indeterminate ng-show=\\\"vm.checkingCoupon && vm.couponQuery.length > 0\\\" class=\\\"listItemCircularProgress easeIn\\\" md-diameter=24px> </md-progress-circular> </div> </div> </md-list-item> <list-item ng-if=\\\"!vm.showPaymentForm && paymentResponse.length <= 1\\\" style=margin-bottom:1px size=lg class=listItemAutocomplete ng-show=\\\"vm.couponStatus == 'untouched' || vm.couponStatus =='invalid'\\\"> <md-autocomplete md-selected-item=autocomplete.selectedItem md-search-text-change=autocomplete.searchTextChange(autocomplete.searchText) md-search-text=autocomplete.searchText md-no-cache=true md-selected-item-change=autocomplete.selectedItemChange(item) md-items=\\\"item in autocomplete.querySearch(autocomplete.searchText)\\\" md-item-text=item.couponId md-min-length=0 placeholder=\\\"{{dashboard ? 'Search coupons..' : 'Enter a coupon..'}}\\\" class=listItem ng-if=dashboard> <md-item-template> <span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.couponId}}</span> <span>{{vm.appliedCouponType(item)}}</span> </md-item-template> <md-not-found> No coupons found{{autocomplete.searchText.length > 0 ? (' matching\\\"' + autocomplete.searchText + '\\\".') : '.'}} </md-not-found> </md-autocomplete> <span class=\\\"paymentSubTitle total\\\"> <input id=#coupon ng-model=vm.couponQuery type=text class=couponInput ng-if=\\\"(vm.couponStatus =='untouched' || vm.couponStatus =='invalid') && !dashboard\\\" ng-change=\\\"vm.checkingCoupon = true\\\" placeholder=\\\"Enter coupon..\\\" ng-hide=vm.formWasBlocked to-uppercase/> </span> </list-item> <md-list-item ng-show=\\\"vm.couponStatus =='invalid' && vm.couponQuery.length > 0 && !vm.checkingCoupon\\\" class=\\\"paymentHeader md-2-line md-primary easeIn\\\" ng-if=!dashboard> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if=\\\"vm.couponStatus !='valid'\\\" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class=\\\"paymentSubTitle total\\\"> Invalid Coupon </span> </div> <div layout=row layout-align=\\\"end center\\\" flex> <ng-md-icon icon=clear class=listIcon ng-click=\\\"vm.couponQuery = '';\\\"></ng-md-icon> </div> </div> </md-list-item> <md-list-item ng-if=agentsIsOn class=\\\"paymentHeader md-2-line md-primary\\\" ng-disabled=detailsForm.$invalid ng-show=\\\"vm.agentCodeStatus == 'valid'\\\"> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <span class=\\\"agentCodeText total\\\" flex> <b>Agent Code: </b> {{vm.appliedAgentCode.code}} </span> <ng-md-icon icon=clear class=\\\"listIcon remove-agent-code\\\" ng-click=vm.removeAgentCode(); ng-if=\\\"vm.agentCodeStatus =='valid'\\\" ng-hide=\\\"!dashboard && vm.formWasBlocked\\\"></ng-md-icon> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\"> <md-progress-circular md-mode=indeterminate ng-show=\\\"vm.checkingAgentCode && vm.agentCodeQuery.length > 0\\\" class=\\\"listItemCircularProgress easeIn\\\" md-diameter=24px> </md-progress-circular> </div> </div> </md-list-item> <list-item ng-if=\\\"agentsIsOn && !vm.showPaymentForm && paymentResponse.length <= 1\\\" size=lg class=listItemAutocomplete ng-show=\\\"vm.agentCodeStatus == 'untouched' || vm.agentCodeStatus == 'invalid'\\\"> <md-autocomplete md-selected-item=agentAutocomplete.selectedItem md-search-text-change=agentAutocomplete.searchTextChange(agentAutocomplete.searchText) md-search-text=agentAutocomplete.searchText md-no-cache=true md-selected-item-change=agentAutocomplete.selectedItemChange(item) md-items=\\\"item in agentAutocomplete.querySearch(agentAutocomplete.searchText)\\\" md-item-text=item.code md-min-length=0 placeholder=\\\"Agent Code\\\" class=listItem ng-if=dashboard> <md-item-template> <span md-highlight-text=ctrl.searchText md-highlight-flags=^i>{{item.code}}</span> </md-item-template> <md-not-found> Agent code not found{{agentAutocomplete.searchText.length > 0 ? (' matching \\\"' + agentAutocomplete.searchText + '\\\".') : '.'}} </md-not-found> </md-autocomplete> <span class=\\\"paymentSubTitle total\\\"> <input id=#agentCode ng-model=vm.agentCodeQuery type=text class=agentInput ng-if=\\\"(vm.agentCodeStatus =='untouched' || vm.agentCodeStatus == 'invalid') && !dashboard\\\" ng-change=\\\"vm.checkingAgentCode = true\\\" placeholder=\\\"Enter agent code..\\\" ng-hide=vm.formWasBlocked to-uppercase/> </span> </list-item> <md-list-item ng-show=\\\"vm.agentCodeStatus =='invalid' && vm.agentCodeQuery.length > 0 && !vm.checkingAgentCode\\\" class=\\\"paymentHeader md-2-line md-primary easeIn\\\" ng-if=!dashboard> <div layout=row class=md-list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon class=headerIcon icon=error_outline class=listIcon ng-if=\\\"vm.agentCodeStatus !='valid'\\\" style=fill:rgba(255,87,87,.8)></ng-md-icon> <span class=\\\"paymentSubTitle total\\\"> Invalid agent code </span> </div> <div layout=row layout-align=\\\"end center\\\" flex> <ng-md-icon icon=clear class=listIcon ng-click=\\\"vm.agentCodeQuery = '';\\\"></ng-md-icon> </div> </div> </md-list-item> <div ng-if=\\\"vm.attendeeSubtotals.length > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Attendees </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span class=activityTotal><abl-currency-directive price=vm.attendeeTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat=\\\"(key, value) in vm.attendeeSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{value.quantity}} x {{value.name}} @ <abl-currency-directive style=\\\"margin:0 4px\\\" price=value.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <abl-currency-directive price=value.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if=\\\"vm.addonSubtotals.length > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <span class=total>Add-ons </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span class=activityTotal><abl-currency-directive price=vm.addonTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> <div ng-repeat=\\\"addon in vm.addonSubtotals\\\" layout=row flex class=\\\"subtotalLineItem subtotalLineItemSmall\\\"> <div layout=row layout-align=\\\"start center\\\" flex=50> {{addon.quantity}} x {{addon.name}} @ <abl-currency-directive style=\\\"margin:0 4px\\\" price=addon.price currency={{vm.currency}}></abl-currency-directive> each </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <abl-currency-directive price=addon.amount currency={{vm.currency}}></abl-currency-directive> </div> </div> </div> <div ng-if=\\\"vm.taxTotal > 0\\\"> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=row flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <span class=total>Taxes and Fees </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span class=activityTotal><abl-currency-directive price=vm.taxTotal currency={{vm.currency}}></abl-currency-directive></span> </div> </div> </div> <div ng-if=false> <div class=\\\"md-list-item-text subtotalLineItem\\\" layout=\\\"row \\\" flex> <div layout=row layout-align=\\\"start center \\\" flex=\\\"50 \\\"> <span class=total>Agent Commission </span> </div> <div layout=\\\"row \\\" layout-align=\\\"end center \\\" flex=\\\"50 \\\"> <span class=agentCommission>${{vm.pricing.agentCommission / 100 | number:2}}</span> </div> </div> </div> <div> <div class=\\\"md-list-item-text subtotalLineItem bottomTotal\\\" layout=row layout-align=\\\"space-between center\\\" flex> <div layout=row layout-align=\\\"start center\\\" flex=50> <span class=\\\"\\\">Total </span> </div> <div layout=row layout-align=\\\"end center\\\" flex=50> <span><abl-currency-directive price=\\\"(vm.pricing.total.amount || 0)\\\" currency={{vm.currency}}></abl-currency-directive> <span class=pricing ng-if=\\\"vm.pricing.total.amount > 0\\\"><ng-md-icon icon=information class=listIcon><md-tooltip md-direction=top>Original price: {{vm.pricing.total.originalAmount | ablCurrency : (vm.pricing.total.originalCurrency | lowercase)}}, Original currency: {{vm.pricing.total.originalCurrency}}</md-tooltip></ng-md-icon></span></span> </div> </div> </div> </md-list> </md-card> </md-content> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-total.html\n// module id = 128\n// module chunks = 0","module.exports = \"<md-content> <div ng-if=\\\"paymentResponse != 'success' || !vm.showPaymentForm\\\"> <div class=activityPaymentSummaryCard> <list-item size=lg class=listItemHeader ng-click=vm.toggleGuestDetails() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_1 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" size=20></ng-md-icon> <span class=paymentSubTitle flex>Guest Details</span> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\"> <ng-md-icon icon=\\\"{{vm.guestDetailsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.guestDetailsExpanded layout=column class=listItemContentArea> <list-item ng-if=dashboard> <md-checkbox ng-model=sendConfirmationEmail class=listItemCheckbox>Send confirmation e-mail to client</md-checkbox> </list-item> <form name=guestDetailsForm novalidate> <div class=formContainer> <md-input-container class=\\\"md-block listItemInputContainer inputBottomMargin\\\" ng-if=!dashboard> <label>Full Name</label> <input name=fullName ng-model=vm.formData.fullName required type=text md-maxlength=100 ng-minlength=3 /> <div ng-messages=guestDetailsForm.fullName.$error ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.fullName.$error ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be at least 3 chars.</div> <div ng-message=md-maxlength>Must be less than 100 chars.</div> </div> </md-input-container> <md-autocomplete ng-if=dashboard required md-input-name=autocompleteField md-input-minlength=3 md-input-maxlength=100 md-no-cache=true md-delay=250 md-selected-item=vm.clientSearchSelectedItem md-search-text=vm.formData.fullName md-items=\\\"item in vm.clients\\\" md-item-text=item.primaryContact.fullName md-floating-label=\\\"Full Name\\\" md-selected-item-change=vm.selectedClientChange(item) class=\\\"md-block listItemInputContainer\\\" md-menu-class=autocomplete-custom-template md-min-length=2> <md-item-template> <span class=item-title> <ng-md-icon icon=person class=\\\"listItemHeaderIcon sm\\\"></ng-md-icon> <span> {{item.primaryContact.fullName}} </span> </span> <span class=item-metadata> <span> <ng-md-icon icon=email class=\\\"listItemHeaderIcon sm\\\" md-colors=\\\"{fill: 'blue-grey-A200'}\\\"></ng-md-icon> {{item.primaryContact.email}} </span> </span> </md-item-template> <div ng-messages=guestDetailsForm.autocompleteField.$error ng-if=guestDetailsForm.autocompleteField.$touched> <div ng-message=required>You <b>must</b> enter a client name.</div> <div ng-message=minlength>The name must be at least 3 characters long.</div> <div ng-message=md-maxlength>The name must be less than 100 characters long.</div> </div> </md-autocomplete> <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=!dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail required type=email md-maxlength=100 ng-minlength=3 ng-pattern=/^\\\\w+([\\\\.-]?\\\\w+)*@\\\\w+([\\\\.-]?\\\\w+)*(\\\\.\\\\w{2,3})+$/ /> <div ng-messages=guestDetailsForm.mail.$error ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=pattern>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.mail.$error ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=pattern>Invalid e-mail address</div> <div ng-message=minlength>Must be at least 3 chars</div> <div ng-message=md-maxlength>Must be less than 100 chars</div> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=!dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber required type=text /> <div ng-messages=guestDetailsForm.phone.$error> <div ng-message=required>This is required.</div> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer listItemAutoCompleteAfterContainer\\\" ng-if=dashboard> <label>E-mail</label> <input name=mail ng-model=vm.formData.mail type=email md-maxlength=100 ng-minlength=3 ng-pattern=/^\\\\w+([\\\\.-]?\\\\w+)*@\\\\w+([\\\\.-]?\\\\w+)*(\\\\.\\\\w{2,3})+$/ /> <div ng-messages=guestDetailsForm.mail.$error ng-if=screenIsBig()> <div ng-message=pattern>Please enter a valid e-mail address.</div> <div ng-message=minlength>The e-mail must be at least 3 characters long.</div> <div ng-message=md-maxlength>The e-mail must be less than 100 characters long.</div> </div> <div ng-messages=guestDetailsForm.mail.$error ng-if=!screenIsBig()> <div ng-message=pattern>Invalid e-mail address.</div> <div ng-message=minlength>Must be at least 3 chars</div> <div ng-message=md-maxlength>Must be less than 100 chars</div> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer\\\" ng-if=dashboard> <label>Phone</label> <input name=phone ng-model=vm.formData.phoneNumber type=text /> <div ng-messages=guestDetailsForm.phone.$error> </div> </md-input-container> <md-input-container class=\\\"md-block listItemInputContainer\\\"> <label>Notes</label> <textarea ng-model=vm.formData.notes md-maxlength=300 rows=1></textarea> </md-input-container> <div layout=row layout-align=\\\"end center\\\"> <md-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=!vm.areGuestDetailsValid(guestDetailsForm) ng-click=\\\"vm.goToNextStep('guestDetailsStep')\\\">{{vm.nextButtonLabel('guest').label}}</md-button> </div> </div> </form> </div> <md-divider class=no-margin></md-divider> <list-item size=lg class=listItemHeader ng-click=vm.toggleAttendees() ng-disabled=!vm.guestDetailsAreValid layout=column> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_2 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" size=20></ng-md-icon> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() >= 0\\\" flex>Attendees <span ng-show=\\\"vm.countAttendees() < 4\\\"> {{vm.countAttendees()}} spot{{vm.countAttendees() != 1 ? 's' : ''}} remaining</span></span> <span class=paymentSubTitle ng-if=\\\"vm.countAttendees() < 0\\\" flex>Attendees <span class=red> <strong> {{vm.countAttendees() * -1}}</strong> spot{{((vm.countAttendees() * -1) > 1 || (vm.countAttendees() * -1) == 0) ? 's' : ''}} over maximum occupancy</span></span> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\"> <ng-md-icon icon=\\\"{{vm.attendeesExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </list-item> <div ng-show=vm.attendeesExpanded ng-class=vm.areAttendeesValid() layout=column class=listItemContentArea> <div flex ng-repeat=\\\"attendee in vm.attendees\\\"> <list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row class=list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{attendee.name}}</span> <div layout=row> <span class=lineItemSubDetail>{{ attendee.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column class=addOnAdjusters layout-align=\\\"center end\\\" flex layout-grow> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline\\\" class=listIconSub ng-click=\\\"vm.adjustAttendee($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end\\\"> <input class=addOnQuantityText ng-model=attendee.quantity ng-change=vm.checkAdjustAttendee($index); type=number min=0 md-select-on-focus> </div> </div> </div> </list-item> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin> <progress-button class=\\\"md-raised md-primary md-hue-2 md-{{vm.theme}}-theme\\\" ng-disabled=\\\"!vm.areAttendeesValid() || vm.pricingQuoteStarted\\\" loading=vm.pricingQuoteStarted on-click=\\\"vm.goToNextStep('attendeesStep')\\\" spinner=3 label=\\\"{{vm.nextButtonLabel('attendees').label}}\\\"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> <div ng-if=\\\"vm.addons.length > 0\\\"> <list-item class=\\\"paymentHeader listItemHeader md-2-line\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1 || guestDetailsForm.$invalid\\\" ng-click=vm.toggleAddons() layout=column flex> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_3 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" size=20></ng-md-icon> <span class=paymentSubTitle>Add-ons</span> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\"> <ng-md-icon ng-show=\\\"vm.addOnsSelected == 1\\\" icon=check class=listIcon></ng-md-icon> <ng-md-icon icon=\\\"{{vm.addonsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </list-item> <div layout=column ng-show=vm.addonsExpanded ng-class=vm.areAddonsValid() class=listItemContentArea> <div flex ng-repeat=\\\"addon in vm.addons\\\"> <list-item class=\\\"md-2-line addOnListItem\\\"> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <span class=lineItemSubHeader>{{addon.name}}</span> <div layout=row class=\\\"\\\"> <span class=lineItemSubDetail>{{ addon.amount | ablCurrency: vm.currency }}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\" flex> <div layout=column class=addOnAdjusters layout-align=\\\"center end\\\"> <ng-md-icon icon=add_circle_outline class=listIconSub ng-click=\\\"vm.adjustAddon($index,'up');\\\"> </ng-md-icon> <ng-md-icon icon=\\\" remove_circle_outline\\\" class=listIconSub ng-click=\\\"vm.adjustAddon($index,'down');\\\"></ng-md-icon> </div> <div layout=column layout-align=\\\"end end\\\"> <input class=addOnQuantityText ng-model=addon.quantity ng-change=vm.addonsChanged(); md-select-on-focus type=number> </div> </div> </list-item> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin> <progress-button ng-if=\\\"vm.isNextStepPayment('addons')\\\" class=\\\"md-raised md-primary md-hue-2 md-{{vm.theme}}-theme\\\" ng-disabled=vm.pricingQuoteStarted loading=vm.pricingQuoteStarted on-click=\\\"vm.goToNextStep('addonsStep')\\\" spinner=3 label=\\\"{{vm.nextButtonLabel('addons').label}}\\\"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> </div> <div ng-if=\\\"vm.questions.length > 0\\\"> <list-item class=\\\"paymentHeader listItemHeader md-2-line\\\" ng-disabled=\\\"guestDetailsForm.$invalid || vm.countAttendeesAdded() < 1\\\" ng-click=vm.toggleQuestions()> <div layout=row class=list-item-text flex> <div layout=row layout-align=\\\"start center\\\" flex> <div layout=column class=\\\"\\\"> <div layout=row layout-align=\\\"start center\\\" flex> <ng-md-icon icon=filter_4 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0\\\" size=20></ng-md-icon> <ng-md-icon icon=filter_3 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length == 0\\\" size=20></ng-md-icon> <span class=paymentSubTitle>Booking Questions <i class=\\\"fa fa-angle-right\\\" aria-hidden=true></i> {{vm.bookingQuestionsCompleted()}}/{{vm.questions.length}}</span> </div> </div> </div> <div layout=row layout-align=\\\"end center\\\"> <div layout=column layout-align=\\\"center end\\\" flex> <ng-md-icon icon=\\\"{{vm.questionsExpanded ? 'expand_less' : 'expand_more'}}\\\" class=listIcon></ng-md-icon> </div> </div> </div> </list-item> <div ng-show=vm.questionsExpanded ng-class=!vm.areBookingQuestionsValid() class=listItemContentArea layout=column> <div flex class=\\\"questionForm slideDown\\\"> <form name=questionForm class=formContainerQuestions> <div ng-repeat=\\\"question in vm.questions\\\" class=\\\"listItemInputContainer listItemInputContainerNoMargin\\\"> <div layout=column layout-align=\\\"center stretch\\\" flex> <label class=small-label>{{question.questionText}}</label> <div layout=row layout-align=\\\"center start\\\"> <ng-md-icon icon=\\\"{{vm.bookingQuestions[$index].length > 0 ? 'done' : 'priority_high'}}\\\" class=inputStatusIcon></ng-md-icon> <md-input-container class=md-block flex> <textarea name=question{{$index}} ng-model=vm.bookingQuestions[$index] minlength=2 maxlength=300 rows=1 required></textarea> <div class=errors ng-messages=\\\"questionForm['question' + $index].$error\\\" ng-if=screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be 2 or more characters long.</div> <div ng-message=maxlength>Must be 300 or fewer characters long.</div> </div> <div class=errors ng-messages=\\\"questionForm['question' + $index].$error\\\" ng-if=!screenIsBig()> <div ng-message=required>This is required.</div> <div ng-message=minlength>Must be 2 or more chars.</div> <div ng-message=maxlength>Must be 300 or fewer chars</div> </div> </md-input-container> </div> </div> </div> </form> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin> <span flex style=text-align:right;color:red;font-size:12px ng-if=\\\"!dashboard && !vm.areBookingQuestionsValid()\\\"> Please answer all questions before proceeding to payment. Write N/A if a question does not apply <md-checkbox ng-if=false ng-model=vm.answerAllQuestionsChecked ng-true-value=\\\"'yes'\\\" ng-false-value=\\\"'no'\\\" aria-label=\\\"\\\"> Answer all question ? </md-checkbox> </span> <progress-button class=\\\"md-raised md-primary md-hue-2 md-{{vm.theme}}-theme\\\" ng-disabled=\\\"!dashboard && !vm.isFinishButtonValid\\\" loading=vm.pricingQuoteStarted on-click=\\\"vm.goToNextStep('paymentStep')\\\" spinner=3 label=\\\"{{vm.nextButtonLabel('questions').label}}\\\"></progress-button> </div> </div> <md-divider class=no-margin></md-divider> </div> <div class=payment-section-new> <list-item class=\\\"paymentHeader listItemHeader md-2-line\\\" ng-disabled=!vm.isPaymentValid() style=\\\"border-bottom:1px solid #e0e0e0\\\"> <div layout=row layout-align=\\\"start center\\\" flex=80> <ng-md-icon icon=filter_5 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0 && vm.questions.length > 0\\\" size=20></ng-md-icon> <ng-md-icon icon=filter_4 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length > 0 && vm.questions.length == 0 || vm.addons.length == 0 && vm.questions.length > 0\\\" size=20></ng-md-icon> <ng-md-icon icon=filter_3 class=\\\"listIcon listItemHeaderIcon leftIcon\\\" ng-if=\\\"vm.addons.length == 0 && vm.questions.length == 0\\\" size=20></ng-md-icon> <span class=paymentSubTitle>Payment Details</span> </div> <div layout=row layout-align=\\\"end center\\\" flex=20> <div layout=column layout-align=\\\"center end\\\" flex> </div> </div> </list-item> <div ng-show=vm.stripePaymentExpanded layout=column> <div class=listItemContentArea layout=column style=border-top:none> <div flex class=\\\"radioGroup listItemInputContainer listItemInputContainerNoMargin\\\" ng-if=dashboard> <md-radio-group ng-model=vm.paymentMethod> <md-radio-button value=credit ng-if=\\\"vm.pricing.total.amount > 0\\\"> Credit Card (Online)</md-radio-button> <md-radio-button value=cash>Cash</md-radio-button> <md-radio-button value=debit> Office Point of Sale (POS) </md-radio-button> <md-radio-button value=gift> Gift Card </md-radio-button> <md-radio-button value=transfer> Bank Transfer </md-radio-button> <md-radio-button value=reserved> Reservation - Pay Later </md-radio-button> </md-radio-group> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin ng-if=\\\"vm.paymentMethod != 'credit' && dashboard\\\"> <progress-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1\\\" loading=\\\"bookingSuccessResponse == 'processing'\\\" on-click=vm.submitNonCreditCardBooking() spinner=3 label=\\\"{{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}\\\"></progress-button> </div> <div flex layout=row layout-align=\\\"end center\\\" layout-margin ng-if=\\\"vm.paymentMethod == 'credit' && dashboard\\\"> <progress-button class=\\\"md-raised md-primary md-hue-2\\\" ng-disabled=\\\"vm.countAttendeesAdded() < 1\\\" loading=\\\"bookingSuccessResponse == 'processing'\\\" on-click=vm.goToPay() spinner=3 label=\\\"{{vm.paymentMethod == 'reserved' ? 'Reserve' : 'Pay' }} {{ (vm.pricing.total.amount || 0) | ablCurrency: vm.currency }}\\\"></progress-button> </div> <div flex ng-if=!dashboard> <md-card class=\\\"transparent no-margin\\\" ng-show=\\\"vm.showPaymentForm && paymentResponse.length < 1\\\"> <div ng-if=vm.loadingIframe layout=row layout-align=\\\"space-around center\\\" style=padding:20px> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div> </div> </div> </div> </div> </div></md-content> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-forms.html\n// module id = 129\n// module chunks = 0","module.exports = \"<div flex layout=column> <div ng-if=\\\"dashboard && paymentResponse.length == 0\\\" flex ng-include=\\\"'dashboard.html'\\\" layout=column></div> <div ng-if=\\\"!dashboard && paymentResponse.length == 0\\\" flex ng-include=\\\"'no-dashboard.html'\\\" layout=column></div> <div flex ng-show=\\\"paymentResponse.length > 0\\\" class=paymentResponseContainer layout=column> <div flex layout=column class=paymentSummaryCardResponse> <div flex ng-if=\\\"paymentResponse == 'success'\\\" class=easeIn> <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">{{bookingSuccessResponse.data.booking.status == 'unpaid' ? 'Booking' : 'Payment'}} Complete</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=check class=listIcon ng-style=\\\"{fill: 'green'}\\\"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation ng-if=dashboard> <h3>Congratulations!</h3> <p>Your {{bookingSuccessResponse.data.booking.status == 'unpaid' ? 'reservation' : 'booking'}} is confirmed.</p> <p>{{vm.formData.fullName}} is attending {{bookingSuccessResponse.data.booking.title}} on {{formatDate(bookingSuccessResponse.data.booking.startTime, 'LL')}}</p> <p>A confirmation email will be sent to {{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</p> <div class=booking-id>The reference ID is: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> <div class=confirmation ng-if=!dashboard> <h3>Congratulations!</h3> <p>Your booking is confirmed.</p> <p>You will receive a confirmation email at: <strong>{{vm.formData['mail']}}</strong></p> <p class=margin-top>For questions about your booking, please contact:</p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].companyName}} ({{bookingSuccessResponse.data.booking.organizations[0].primaryContact.phoneNumber}})</strong></p> <p><strong>{{bookingSuccessResponse.data.booking.organizations[0].primaryContact.email}}</strong></p> <div class=booking-id>Booking ID: {{bookingSuccessResponse.data.booking.bookingId}}</div> <div style=margin-top:25px layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.returnToMainPage()>Return</md-button> </span> </div> </div> </div> </div> <div flex ng-if=\\\"paymentResponse == 'failed'\\\"> <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Failed</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=error class=listIcon ng-style=\\\"{fill: 'red'}\\\"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your credit card has been declined. Please confirm the information you provided is correct and try again.</p> <div style=margin-top:25px layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=vm.payNow()>Try Again</md-button> </span> </div> </div> </div> </div> <div flex ng-if=\\\"paymentResponse == 'processing'\\\"> <div class=\\\"paymentHeader md-2-line md-primary\\\" ng-mouseleave=\\\"addOnsHover = 0\\\" ng-mouseenter=\\\"addOnsHover = 1\\\" ng-init=\\\"addOnsHover=0\\\"> <div layout=row class=md-list-item-text flex> <div flex layout=row layout-align=\\\"start center\\\" md-colors=\\\"{color: 'default-primary'}\\\"> <ng-md-icon class=listItemHeaderIcon icon=payment class=listIcon></ng-md-icon> <span class=\\\"paymentSubTitle total\\\">Payment Processing</span> </div> <div layout=column flex=none style=width:24px> <ng-md-icon flex=none style=width:24px;height:24px;margin:inherit icon=watch_later class=listIcon ng-style=\\\"{fill: 'red'}\\\"></ng-md-icon> </div> </div> </div> <div class=paymentBody> <div class=confirmation> <p>Your booking payment is still processing. An e-mail will be sent to {{vm.formData.mail }} with details about your reservation.</p> <div style=margin-top:25px layout=row layout-align=\\\"center center\\\"> <span flex> <md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"goToState('home')\\\">Return</md-button> </span> </div> </div> </div> </div> </div> </div> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/activity-book.html\n// module id = 130\n// module chunks = 0","module.exports = \"<div flex layout=column> <div flex ng-if=screenIsBig() layout=row class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div flex layout=column> <div class=left-panel flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div flex layout=column> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> <div flex ng-if=!screenIsBig() class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div layout=column> <div flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div layout=column> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> <md-card flex layout=column style=min-height:350px ng-show=\\\"vm.showPaymentForm && paymentResponse.length < 1\\\"> <div flex layout=column layout-align=\\\"center center\\\" ng-if=vm.paymentFormIsLoading> <md-progress-circular md-mode=indeterminate md-diameter=40></md-progress-circular> </div> <iframe id=paymentIframe></iframe> </md-card> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/dashboard.html\n// module id = 131\n// module chunks = 0","module.exports = \"<div flex layout=column> <div class=payment-icons-bar flex=none layout=row layout-align=\\\"center center\\\"> <div flex style=height:32px> <img class=payment-icons-bar-left src=https://s3.amazonaws.com/assets.ablsolution.com/Dashboard/ablpay2.png /> </div> <div flex style=text-align:right> <img class=payment-icons-bar-right src=https://s3.amazonaws.com/assets.ablsolution.com/Dashboard/paylock.png /> </div> </div> <div flex ng-if=screenIsBig() layout=row class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div flex layout=column> <div class=left-panel-no-dashboard flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div flex layout=column class=rightCheckoutPanel> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> <div flex ng-if=!screenIsBig() class=activityBookDialogLargeNew ng-show=\\\"(paymentResponse.length <= 0 && !vm.showPaymentForm) || (!dashboard && paymentResponse.length <= 0)\\\"> <div> <div class=left-panel-no-dashboard flex ng-include=\\\"'activity-forms.html'\\\" layout=column></div> </div> <div class=rightCheckoutPanel> <div flex ng-include=\\\"'activity-total.html'\\\" layout=column></div> </div> </div> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/activity/no-dashboard.html\n// module id = 132\n// module chunks = 0","export default function activityBookValidator(vm, $http, $stateParams) {\n\n\n    vm.searchClients = function (query) {\n        return Rx.Observable\n            .fromPromise($http({\n                method: 'GET',\n                url: vm.config.apiVersion + \"/clients?fullName=\" + text,\n                headers: {\n                    'x-abl-access-key': $stateParams.merchant,\n                    'x-abl-date': Date.parse(new Date().toISOString())\n                }\n            }))\n            .select(function (response) {\n                console.log(response);\n                return response;\n            });\n\n    }\n\n    return vm;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity-book-validators.js","   /**\n    * @class abl-sdk-feathers.components\n    * @hidden\n    */\n\n   /**\n    * @function activity-AdjustmentControls\n    * @memberOf abl-sdk-feathers.components\n    * @description Parent component controller for shared activity adjustment functions.\n    * @example  <activity-adjustment-controls></activity-adjustment-controls>\n    */\n\n   function activityAdjustmentControls() {\n       var vm = this;\n\n       this.$onInit = function () {\n           console.log('activityAdjustmentControls', this);\n       };\n\n       this.$onChanges = (changesObj) => {};\n\n       this.$postLink = function () {};\n\n       vm.addCharge = function (label, price) {\n           console.log(label, price);\n       };\n   };\n\n\n   export default activityAdjustmentControls;\n\n\n// WEBPACK FOOTER //\n// ./src/activity/activity.adjustment.controls.component.js"],"sourceRoot":""}