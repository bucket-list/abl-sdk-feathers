{"version":3,"sources":["webpack:///webpack/bootstrap b0a06f0892cbf7182c82","webpack:///./src/abl-sdk.js"],"names":["angular","module","provider","$feathersProvider","endpoint","socketOpts","useSocket","authStorage","window","localStorage","services","setAuthStorage","newAuthStorage","setSocketOpts","opts","socketEnabled","setEndpoint","newEndpoint","setServices","newServices","$get","$injector","$timeout","$log","$mdToast","$rootScope","get","loading","loadingTimeout","afterRender","current","total","cancel","$on","event","toState","toParams","fromState","fromParams","app","feathers","configure","hooks","socket","io","socketio","rest","jquery","jQuery","authentication","storage","directive","def","restrict","terminal","transclude","link","scope","element","attrs","$eval"],"mappings":"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","file":"abl-sdk.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b0a06f0892cbf7182c82","angular.module('abl-sdk-feathers', [])\n.provider('$feathers', [\n    function $feathersProvider() {\n        //OK this works and we can still keep configuring it the same way we were before :) \n        //muy bien\n        var endpoint = null\n        var socketOpts = null\n        var useSocket = true\n        var authStorage = window.localStorage\n        var services = [];\n\n        //Configuration\n        return {\n            setAuthStorage: function(newAuthStorage) {\n                authStorage = newAuthStorage\n            },\n            setSocketOpts: function(opts) {\n                socketOpts = opts\n            },\n            useSocket: function(socketEnabled) {\n                useSocket = !!socketEnabled\n            },\n            setEndpoint: function(newEndpoint) {\n                endpoint = newEndpoint\n            },\n            setServices: function(newServices) {\n                services = newServices\n            },\n            $get: ['$injector', '$timeout', '$log',\n                function($injector, $timeout, $log, $mdToast) {\n                    var $rootScope = $injector.get('$rootScope');\n                    \n                    $rootScope.loading = true;\n                    this.loadingTimeout = null;\n                        \n                    //Add timeout\n                    $rootScope.afterRender = function(current, total) {\n                        //$log.debug('after render', current, total,  Math.round(current/total * 100));\n                        $timeout.cancel(this.loadingTimeout);\n                        this.loadingTimeout = $timeout(function() {\n                            //$log.debug('loading', $rootScope.loading);\n                            $rootScope.loading = false;\n                        }, 1500);      \n                    };\n                    \n                    \n                    // $rootScope.showToast = function(msg, toastClass, delay) {\n                    //     if(!toastClass)\n                    //     var toastClass = '';\n                    //     if(!delay)\n                    //     var delay = 3000;\n                        \n                    //     var toast = $mdToast.simple()\n                    //             .textContent(msg)\n                    //             .action('Hide')\n                    //             .hideDelay(delay)\n                    //             .position('bottom left')\n                    //             .highlightAction(false)\n                    //             .toastClass(toastClass);\t\n                    //     $mdToast.show(toast);\n                    //     $log.debug('showToast ', toastClass, msg);\n                    //     };\n                    \n                    //Show indeterminate loading animation for all state changes\n                    $rootScope.$on('$stateChangeStart', \n                        function(event, toState, toParams, fromState, fromParams){\n                        //Show loading only for higher level parent states..\n                        // if(toState.name.split('.').length < 2)\n                            $rootScope.loading = true;\n                    });\n                    \n                    //Stop loading animation after state load success\n                    $rootScope.$on('$stateChangeSuccess', \n                        function(event, toState, toParams, fromState, fromParams){\n                        if($rootScope.loading)\n                            $rootScope.afterRender();\n                    });\n                    \n                    this.app = feathers()\n                        .configure(feathers.hooks())\n                    \n                    if (useSocket) {\n                        this.socket = io(endpoint, socketOpts)\n                        this.app.configure(feathers.socketio(this.socket))\n                    } else {\n                        this.app.configure(feathers.rest(endpoint).jquery(window.jQuery))\n                    }\n                    \n                    this.app.configure(feathers.authentication({\n                        storage: authStorage\n                    }));\n                    \n\n                    return this.app\n                }\n            ]\n        }\n    }\n])\n.directive('afterRender', ['$timeout', function ($timeout) {\n    var def = {\n        restrict: 'A',\n        terminal: true,\n        transclude: false,\n        link: function (scope, element, attrs) {\n                            $timeout(scope.$eval(attrs.afterRender), 1000);  //Calling a scoped method\n        }\n    };\n    return def;\n}]);\n\n\n// WEBPACK FOOTER //\n// ./src/abl-sdk.js"],"sourceRoot":""}